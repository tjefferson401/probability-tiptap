var Ou=Object.defineProperty;var Au=(s,e,d)=>e in s?Ou(s,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[e]=d;var Rn=(s,e,d)=>Au(s,typeof e!="symbol"?e+"":e,d);function _mergeNamespaces(s,e){for(var d=0;d<e.length;d++){const b=e[d];if(typeof b!="string"&&!Array.isArray(b)){for(const tt in b)if(tt!=="default"&&!(tt in s)){const nt=Object.getOwnPropertyDescriptor(b,tt);nt&&Object.defineProperty(s,tt,nt.get?nt:{enumerable:!0,get:()=>b[tt]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const tt of document.querySelectorAll('link[rel="modulepreload"]'))b(tt);new MutationObserver(tt=>{for(const nt of tt)if(nt.type==="childList")for(const ot of nt.addedNodes)ot.tagName==="LINK"&&ot.rel==="modulepreload"&&b(ot)}).observe(document,{childList:!0,subtree:!0});function d(tt){const nt={};return tt.integrity&&(nt.integrity=tt.integrity),tt.referrerPolicy&&(nt.referrerPolicy=tt.referrerPolicy),tt.crossOrigin==="use-credentials"?nt.credentials="include":tt.crossOrigin==="anonymous"?nt.credentials="omit":nt.credentials="same-origin",nt}function b(tt){if(tt.ep)return;tt.ep=!0;const nt=d(tt);fetch(tt.href,nt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var d=function b(){return this instanceof b?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};d.prototype=e.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(s).forEach(function(b){var tt=Object.getOwnPropertyDescriptor(s,b);Object.defineProperty(d,b,tt.get?tt:{enumerable:!0,get:function(){return s[b]}})}),d}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(s){return s===null||typeof s!="object"?null:(s=z$2&&s[z$2]||s["@@iterator"],typeof s=="function"?s:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$4={};function E$1(s,e,d){this.props=s,this.context=e,this.refs=D$4,this.updater=d||B$2}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};E$1.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function F$1(){}F$1.prototype=E$1.prototype;function G$2(s,e,d){this.props=s,this.context=e,this.refs=D$4,this.updater=d||B$2}var H$3=G$2.prototype=new F$1;H$3.constructor=G$2;C$2(H$3,E$1.prototype);H$3.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(s,e,d){var b,tt={},nt=null,ot=null;if(e!=null)for(b in e.ref!==void 0&&(ot=e.ref),e.key!==void 0&&(nt=""+e.key),e)J$1.call(e,b)&&!L$2.hasOwnProperty(b)&&(tt[b]=e[b]);var ht=arguments.length-2;if(ht===1)tt.children=d;else if(1<ht){for(var mt=Array(ht),gt=0;gt<ht;gt++)mt[gt]=arguments[gt+2];tt.children=mt}if(s&&s.defaultProps)for(b in ht=s.defaultProps,ht)tt[b]===void 0&&(tt[b]=ht[b]);return{$$typeof:l$2,type:s,key:nt,ref:ot,props:tt,_owner:K$2.current}}function N$1(s,e){return{$$typeof:l$2,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function O$2(s){return typeof s=="object"&&s!==null&&s.$$typeof===l$2}function escape$1(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(d){return e[d]})}var P$1=/\/+/g;function Q$2(s,e){return typeof s=="object"&&s!==null&&s.key!=null?escape$1(""+s.key):e.toString(36)}function R$2(s,e,d,b,tt){var nt=typeof s;(nt==="undefined"||nt==="boolean")&&(s=null);var ot=!1;if(s===null)ot=!0;else switch(nt){case"string":case"number":ot=!0;break;case"object":switch(s.$$typeof){case l$2:case n$1:ot=!0}}if(ot)return ot=s,tt=tt(ot),s=b===""?"."+Q$2(ot,0):b,I$2(tt)?(d="",s!=null&&(d=s.replace(P$1,"$&/")+"/"),R$2(tt,e,d,"",function(gt){return gt})):tt!=null&&(O$2(tt)&&(tt=N$1(tt,d+(!tt.key||ot&&ot.key===tt.key?"":(""+tt.key).replace(P$1,"$&/")+"/")+s)),e.push(tt)),1;if(ot=0,b=b===""?".":b+":",I$2(s))for(var ht=0;ht<s.length;ht++){nt=s[ht];var mt=b+Q$2(nt,ht);ot+=R$2(nt,e,d,mt,tt)}else if(mt=A$2(s),typeof mt=="function")for(s=mt.call(s),ht=0;!(nt=s.next()).done;)nt=nt.value,mt=b+Q$2(nt,ht++),ot+=R$2(nt,e,d,mt,tt);else if(nt==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return ot}function S$3(s,e,d){if(s==null)return s;var b=[],tt=0;return R$2(s,b,"","",function(nt){return e.call(d,nt,tt++)}),b}function T$3(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(d){(s._status===0||s._status===-1)&&(s._status=1,s._result=d)},function(d){(s._status===0||s._status===-1)&&(s._status=2,s._result=d)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$3,forEach:function(s,e,d){S$3(s,function(){e.apply(this,arguments)},d)},count:function(s){var e=0;return S$3(s,function(){e++}),e},toArray:function(s){return S$3(s,function(e){return e})||[]},only:function(s){if(!O$2(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$2;react_production_min.cloneElement=function(s,e,d){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var b=C$2({},s.props),tt=s.key,nt=s.ref,ot=s._owner;if(e!=null){if(e.ref!==void 0&&(nt=e.ref,ot=K$2.current),e.key!==void 0&&(tt=""+e.key),s.type&&s.type.defaultProps)var ht=s.type.defaultProps;for(mt in e)J$1.call(e,mt)&&!L$2.hasOwnProperty(mt)&&(b[mt]=e[mt]===void 0&&ht!==void 0?ht[mt]:e[mt])}var mt=arguments.length-2;if(mt===1)b.children=d;else if(1<mt){ht=Array(mt);for(var gt=0;gt<mt;gt++)ht[gt]=arguments[gt+2];b.children=ht}return{$$typeof:l$2,type:s.type,key:tt,ref:nt,props:b,_owner:ot}};react_production_min.createContext=function(s){return s={$$typeof:u,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:t,_context:s},s.Consumer=s};react_production_min.createElement=M$2;react_production_min.createFactory=function(s){var e=M$2.bind(null,s);return e.type=s,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:v$3,render:s}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(s){return{$$typeof:y$2,_payload:{_status:-1,_result:s},_init:T$3}};react_production_min.memo=function(s,e){return{$$typeof:x$2,type:s,compare:e===void 0?null:e}};react_production_min.startTransition=function(s){var e=V$2.transition;V$2.transition={};try{s()}finally{V$2.transition=e}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(s,e){return U$2.current.useCallback(s,e)};react_production_min.useContext=function(s){return U$2.current.useContext(s)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(s){return U$2.current.useDeferredValue(s)};react_production_min.useEffect=function(s,e){return U$2.current.useEffect(s,e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(s,e,d){return U$2.current.useImperativeHandle(s,e,d)};react_production_min.useInsertionEffect=function(s,e){return U$2.current.useInsertionEffect(s,e)};react_production_min.useLayoutEffect=function(s,e){return U$2.current.useLayoutEffect(s,e)};react_production_min.useMemo=function(s,e){return U$2.current.useMemo(s,e)};react_production_min.useReducer=function(s,e,d){return U$2.current.useReducer(s,e,d)};react_production_min.useRef=function(s){return U$2.current.useRef(s)};react_production_min.useState=function(s){return U$2.current.useState(s)};react_production_min.useSyncExternalStore=function(s,e,d){return U$2.current.useSyncExternalStore(s,e,d)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$2=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q$1(s,e,d){var b,tt={},nt=null,ot=null;d!==void 0&&(nt=""+d),e.key!==void 0&&(nt=""+e.key),e.ref!==void 0&&(ot=e.ref);for(b in e)m$2.call(e,b)&&!p$1.hasOwnProperty(b)&&(tt[b]=e[b]);if(s&&s.defaultProps)for(b in e=s.defaultProps,e)tt[b]===void 0&&(tt[b]=e[b]);return{$$typeof:k$2,type:s,key:nt,ref:ot,props:tt,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(tn,Kt){var an=tn.length;tn.push(Kt);e:for(;0<an;){var ln=an-1>>>1,hn=tn[ln];if(0<tt(hn,Kt))tn[ln]=Kt,tn[an]=hn,an=ln;else break e}}function d(tn){return tn.length===0?null:tn[0]}function b(tn){if(tn.length===0)return null;var Kt=tn[0],an=tn.pop();if(an!==Kt){tn[0]=an;e:for(var ln=0,hn=tn.length,kn=hn>>>1;ln<kn;){var Zt=2*(ln+1)-1,xn=tn[Zt],En=Zt+1,Cn=tn[En];if(0>tt(xn,an))En<hn&&0>tt(Cn,xn)?(tn[ln]=Cn,tn[En]=an,ln=En):(tn[ln]=xn,tn[Zt]=an,ln=Zt);else if(En<hn&&0>tt(Cn,an))tn[ln]=Cn,tn[En]=an,ln=En;else break e}}return Kt}function tt(tn,Kt){var an=tn.sortIndex-Kt.sortIndex;return an!==0?an:tn.id-Kt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var nt=performance;s.unstable_now=function(){return nt.now()}}else{var ot=Date,ht=ot.now();s.unstable_now=function(){return ot.now()-ht}}var mt=[],gt=[],yt=1,ft=null,st=3,bt=!1,vt=!1,xt=!1,wt=typeof setTimeout=="function"?setTimeout:null,St=typeof clearTimeout=="function"?clearTimeout:null,_t=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Tt(tn){for(var Kt=d(gt);Kt!==null;){if(Kt.callback===null)b(gt);else if(Kt.startTime<=tn)b(gt),Kt.sortIndex=Kt.expirationTime,e(mt,Kt);else break;Kt=d(gt)}}function Et(tn){if(xt=!1,Tt(tn),!vt)if(d(mt)!==null)vt=!0,Lt(kt);else{var Kt=d(gt);Kt!==null&&Ut(Et,Kt.startTime-tn)}}function kt(tn,Kt){vt=!1,xt&&(xt=!1,St(Dt),Dt=-1),bt=!0;var an=st;try{for(Tt(Kt),ft=d(mt);ft!==null&&(!(ft.expirationTime>Kt)||tn&&!jt());){var ln=ft.callback;if(typeof ln=="function"){ft.callback=null,st=ft.priorityLevel;var hn=ln(ft.expirationTime<=Kt);Kt=s.unstable_now(),typeof hn=="function"?ft.callback=hn:ft===d(mt)&&b(mt),Tt(Kt)}else b(mt);ft=d(mt)}if(ft!==null)var kn=!0;else{var Zt=d(gt);Zt!==null&&Ut(Et,Zt.startTime-Kt),kn=!1}return kn}finally{ft=null,st=an,bt=!1}}var Mt=!1,Ot=null,Dt=-1,At=5,It=-1;function jt(){return!(s.unstable_now()-It<At)}function qt(){if(Ot!==null){var tn=s.unstable_now();It=tn;var Kt=!0;try{Kt=Ot(!0,tn)}finally{Kt?Jt():(Mt=!1,Ot=null)}}else Mt=!1}var Jt;if(typeof _t=="function")Jt=function(){_t(qt)};else if(typeof MessageChannel<"u"){var Bt=new MessageChannel,Wt=Bt.port2;Bt.port1.onmessage=qt,Jt=function(){Wt.postMessage(null)}}else Jt=function(){wt(qt,0)};function Lt(tn){Ot=tn,Mt||(Mt=!0,Jt())}function Ut(tn,Kt){Dt=wt(function(){tn(s.unstable_now())},Kt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(tn){tn.callback=null},s.unstable_continueExecution=function(){vt||bt||(vt=!0,Lt(kt))},s.unstable_forceFrameRate=function(tn){0>tn||125<tn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):At=0<tn?Math.floor(1e3/tn):5},s.unstable_getCurrentPriorityLevel=function(){return st},s.unstable_getFirstCallbackNode=function(){return d(mt)},s.unstable_next=function(tn){switch(st){case 1:case 2:case 3:var Kt=3;break;default:Kt=st}var an=st;st=Kt;try{return tn()}finally{st=an}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(tn,Kt){switch(tn){case 1:case 2:case 3:case 4:case 5:break;default:tn=3}var an=st;st=tn;try{return Kt()}finally{st=an}},s.unstable_scheduleCallback=function(tn,Kt,an){var ln=s.unstable_now();switch(typeof an=="object"&&an!==null?(an=an.delay,an=typeof an=="number"&&0<an?ln+an:ln):an=ln,tn){case 1:var hn=-1;break;case 2:hn=250;break;case 5:hn=1073741823;break;case 4:hn=1e4;break;default:hn=5e3}return hn=an+hn,tn={id:yt++,callback:Kt,priorityLevel:tn,startTime:an,expirationTime:hn,sortIndex:-1},an>ln?(tn.sortIndex=an,e(gt,tn),d(mt)===null&&tn===d(gt)&&(xt?(St(Dt),Dt=-1):xt=!0,Ut(Et,an-ln))):(tn.sortIndex=hn,e(mt,tn),vt||bt||(vt=!0,Lt(kt))),tn},s.unstable_shouldYield=jt,s.unstable_wrapCallback=function(tn){var Kt=st;return function(){var an=st;st=Kt;try{return tn.apply(this,arguments)}finally{st=an}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)e+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(s,e){ha(s,e),ha(s+"Capture",e)}function ha(s,e){for(ea[s]=e,s=0;s<e.length;s++)da.add(e[s])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(s){return ja.call(ma,s)?!0:ja.call(la,s)?!1:ka.test(s)?ma[s]=!0:(la[s]=!0,!1)}function pa(s,e,d,b){if(d!==null&&d.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return b?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function qa(s,e,d,b){if(e===null||typeof e>"u"||pa(s,e,d,b))return!0;if(b)return!1;if(d!==null)switch(d.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$2(s,e,d,b,tt,nt,ot){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=b,this.attributeNamespace=tt,this.mustUseProperty=d,this.propertyName=s,this.type=e,this.sanitizeURL=nt,this.removeEmptyString=ot}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z$1[s]=new v$2(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];z$1[e]=new v$2(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){z$1[s]=new v$2(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z$1[s]=new v$2(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z$1[s]=new v$2(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){z$1[s]=new v$2(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){z$1[s]=new v$2(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){z$1[s]=new v$2(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){z$1[s]=new v$2(s,5,!1,s.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(ra,sa);z$1[e]=new v$2(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(ra,sa);z$1[e]=new v$2(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(ra,sa);z$1[e]=new v$2(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){z$1[s]=new v$2(s,1,!1,s.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){z$1[s]=new v$2(s,1,!1,s.toLowerCase(),null,!0,!0)});function ta(s,e,d,b){var tt=z$1.hasOwnProperty(e)?z$1[e]:null;(tt!==null?tt.type!==0:b||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,d,tt,b)&&(d=null),b||tt===null?oa(e)&&(d===null?s.removeAttribute(e):s.setAttribute(e,""+d)):tt.mustUseProperty?s[tt.propertyName]=d===null?tt.type===3?!1:"":d:(e=tt.attributeName,b=tt.attributeNamespace,d===null?s.removeAttribute(e):(tt=tt.type,d=tt===3||tt===4&&d===!0?"":""+d,b?s.setAttributeNS(b,e,d):s.setAttribute(e,d))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(s){return s===null||typeof s!="object"?null:(s=Ja&&s[Ja]||s["@@iterator"],typeof s=="function"?s:null)}var A$1=Object.assign,La;function Ma(s){if(La===void 0)try{throw Error()}catch(d){var e=d.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+s}var Na=!1;function Oa(s,e){if(!s||Na)return"";Na=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(gt){var b=gt}Reflect.construct(s,[],e)}else{try{e.call()}catch(gt){b=gt}s.call(e.prototype)}else{try{throw Error()}catch(gt){b=gt}s()}}catch(gt){if(gt&&b&&typeof gt.stack=="string"){for(var tt=gt.stack.split(`
`),nt=b.stack.split(`
`),ot=tt.length-1,ht=nt.length-1;1<=ot&&0<=ht&&tt[ot]!==nt[ht];)ht--;for(;1<=ot&&0<=ht;ot--,ht--)if(tt[ot]!==nt[ht]){if(ot!==1||ht!==1)do if(ot--,ht--,0>ht||tt[ot]!==nt[ht]){var mt=`
`+tt[ot].replace(" at new "," at ");return s.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",s.displayName)),mt}while(1<=ot&&0<=ht);break}}}finally{Na=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?Ma(s):""}function Pa(s){switch(s.tag){case 5:return Ma(s.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return s=Oa(s.type,!1),s;case 11:return s=Oa(s.type.render,!1),s;case 1:return s=Oa(s.type,!0),s;default:return""}}function Qa(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Ca:return(s.displayName||"Context")+".Consumer";case Ba:return(s._context.displayName||"Context")+".Provider";case Da:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ga:return e=s.displayName||null,e!==null?e:Qa(s.type)||"Memo";case Ha:e=s._payload,s=s._init;try{return Qa(s(e))}catch{}}return null}function Ra(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ta(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(s){var e=Ta(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),b=""+s[e];if(!s.hasOwnProperty(e)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var tt=d.get,nt=d.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return tt.call(this)},set:function(ot){b=""+ot,nt.call(this,ot)}}),Object.defineProperty(s,e,{enumerable:d.enumerable}),{getValue:function(){return b},setValue:function(ot){b=""+ot},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var d=e.getValue(),b="";return s&&(b=Ta(s)?s.checked?"true":"false":s.value),s=b,s!==d?(e.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,e){var d=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function Za(s,e){var d=e.defaultValue==null?"":e.defaultValue,b=e.checked!=null?e.checked:e.defaultChecked;d=Sa(e.value!=null?e.value:d),s._wrapperState={initialChecked:b,initialValue:d,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(s,e){e=e.checked,e!=null&&ta(s,"checked",e,!1)}function bb(s,e){ab(s,e);var d=Sa(e.value),b=e.type;if(d!=null)b==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(b==="submit"||b==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?cb(s,e.type,d):e.hasOwnProperty("defaultValue")&&cb(s,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function db(s,e,d){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var b=e.type;if(!(b!=="submit"&&b!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,d||e===s.value||(s.value=e),s.defaultValue=e}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function cb(s,e,d){(e!=="number"||Xa(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var eb=Array.isArray;function fb(s,e,d,b){if(s=s.options,e){e={};for(var tt=0;tt<d.length;tt++)e["$"+d[tt]]=!0;for(d=0;d<s.length;d++)tt=e.hasOwnProperty("$"+s[d].value),s[d].selected!==tt&&(s[d].selected=tt),tt&&b&&(s[d].defaultSelected=!0)}else{for(d=""+Sa(d),e=null,tt=0;tt<s.length;tt++){if(s[tt].value===d){s[tt].selected=!0,b&&(s[tt].defaultSelected=!0);return}e!==null||s[tt].disabled||(e=s[tt])}e!==null&&(e.selected=!0)}}function gb(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,e){var d=e.value;if(d==null){if(d=e.children,e=e.defaultValue,d!=null){if(e!=null)throw Error(p(92));if(eb(d)){if(1<d.length)throw Error(p(93));d=d[0]}e=d}e==null&&(e=""),d=e}s._wrapperState={initialValue:Sa(d)}}function ib(s,e){var d=Sa(e.value),b=Sa(e.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),e.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),b!=null&&(s.defaultValue=""+b)}function jb(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function kb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?kb(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var mb,nb=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,d,b,tt){MSApp.execUnsafeLocalFunction(function(){return s(e,d,b,tt)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function ob(s,e){if(e){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=e;return}}s.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(s){qb.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),pb[e]=pb[s]})});function rb(s,e,d){return e==null||typeof e=="boolean"||e===""?"":d||typeof e!="number"||e===0||pb.hasOwnProperty(s)&&pb[s]?(""+e).trim():e+"px"}function sb(s,e){s=s.style;for(var d in e)if(e.hasOwnProperty(d)){var b=d.indexOf("--")===0,tt=rb(d,e[d],b);d==="float"&&(d="cssFloat"),b?s.setProperty(d,tt):s[d]=tt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(s,e){if(e){if(tb[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(p(280));var e=s.stateNode;e&&(e=Db(e),yb(s.stateNode,s.type,e))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,e=Ab;if(Ab=zb=null,Bb(s),e)for(s=0;s<e.length;s++)Bb(e[s])}}function Gb(s,e){return s(e)}function Hb(){}var Ib=!1;function Jb(s,e,d){if(Ib)return s(e,d);Ib=!0;try{return Gb(s,e,d)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(s,e){var d=s.stateNode;if(d===null)return null;var b=Db(d);if(b===null)return null;d=b[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(s=s.type,b=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!b;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(p(231,e,typeof d));return d}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(s,e,d,b,tt,nt,ot,ht,mt){var gt=Array.prototype.slice.call(arguments,3);try{e.apply(d,gt)}catch(yt){this.onError(yt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(s){Ob=!0,Pb=s}};function Tb(s,e,d,b,tt,nt,ot,ht,mt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(s,e,d,b,tt,nt,ot,ht,mt){if(Tb.apply(this,arguments),Ob){if(Ob){var gt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=gt)}}function Vb(s){var e=s,d=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(d=e.return),s=e.return;while(s)}return e.tag===3?d:null}function Wb(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(s){if(Vb(s)!==s)throw Error(p(188))}function Yb(s){var e=s.alternate;if(!e){if(e=Vb(s),e===null)throw Error(p(188));return e!==s?null:s}for(var d=s,b=e;;){var tt=d.return;if(tt===null)break;var nt=tt.alternate;if(nt===null){if(b=tt.return,b!==null){d=b;continue}break}if(tt.child===nt.child){for(nt=tt.child;nt;){if(nt===d)return Xb(tt),s;if(nt===b)return Xb(tt),e;nt=nt.sibling}throw Error(p(188))}if(d.return!==b.return)d=tt,b=nt;else{for(var ot=!1,ht=tt.child;ht;){if(ht===d){ot=!0,d=tt,b=nt;break}if(ht===b){ot=!0,b=tt,d=nt;break}ht=ht.sibling}if(!ot){for(ht=nt.child;ht;){if(ht===d){ot=!0,d=nt,b=tt;break}if(ht===b){ot=!0,b=nt,d=tt;break}ht=ht.sibling}if(!ot)throw Error(p(189))}}if(d.alternate!==b)throw Error(p(190))}if(d.tag!==3)throw Error(p(188));return d.stateNode.current===d?s:e}function Zb(s){return s=Yb(s),s!==null?$b(s):null}function $b(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=$b(s);if(e!==null)return e;s=s.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(s){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,s,void 0,(s.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(pc(s)/qc|0)|0}var rc=64,sc=4194304;function tc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function uc(s,e){var d=s.pendingLanes;if(d===0)return 0;var b=0,tt=s.suspendedLanes,nt=s.pingedLanes,ot=d&268435455;if(ot!==0){var ht=ot&~tt;ht!==0?b=tc(ht):(nt&=ot,nt!==0&&(b=tc(nt)))}else ot=d&~tt,ot!==0?b=tc(ot):nt!==0&&(b=tc(nt));if(b===0)return 0;if(e!==0&&e!==b&&!(e&tt)&&(tt=b&-b,nt=e&-e,tt>=nt||tt===16&&(nt&4194240)!==0))return e;if(b&4&&(b|=d&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=b;0<e;)d=31-oc(e),tt=1<<d,b|=s[d],e&=~tt;return b}function vc(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(s,e){for(var d=s.suspendedLanes,b=s.pingedLanes,tt=s.expirationTimes,nt=s.pendingLanes;0<nt;){var ot=31-oc(nt),ht=1<<ot,mt=tt[ot];mt===-1?(!(ht&d)||ht&b)&&(tt[ot]=vc(ht,e)):mt<=e&&(s.expiredLanes|=ht),nt&=~ht}}function xc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yc(){var s=rc;return rc<<=1,!(rc&4194240)&&(rc=64),s}function zc(s){for(var e=[],d=0;31>d;d++)e.push(s);return e}function Ac(s,e,d){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-oc(e),s[e]=d}function Bc(s,e){var d=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var b=s.eventTimes;for(s=s.expirationTimes;0<d;){var tt=31-oc(d),nt=1<<tt;e[tt]=0,b[tt]=-1,s[tt]=-1,d&=~nt}}function Cc(s,e){var d=s.entangledLanes|=e;for(s=s.entanglements;d;){var b=31-oc(d),tt=1<<b;tt&e|s[b]&e&&(s[b]|=e),d&=~tt}}var C$1=0;function Dc$1(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(s,e){switch(s){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc$1(s,e,d,b,tt,nt){return s===null||s.nativeEvent!==nt?(s={blockedOn:e,domEventName:d,eventSystemFlags:b,nativeEvent:nt,targetContainers:[tt]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),s):(s.eventSystemFlags|=b,e=s.targetContainers,tt!==null&&e.indexOf(tt)===-1&&e.push(tt),s)}function Uc(s,e,d,b,tt){switch(e){case"focusin":return Lc=Tc$1(Lc,s,e,d,b,tt),!0;case"dragenter":return Mc=Tc$1(Mc,s,e,d,b,tt),!0;case"mouseover":return Nc=Tc$1(Nc,s,e,d,b,tt),!0;case"pointerover":var nt=tt.pointerId;return Oc.set(nt,Tc$1(Oc.get(nt)||null,s,e,d,b,tt)),!0;case"gotpointercapture":return nt=tt.pointerId,Pc.set(nt,Tc$1(Pc.get(nt)||null,s,e,d,b,tt)),!0}return!1}function Vc(s){var e=Wc(s.target);if(e!==null){var d=Vb(e);if(d!==null){if(e=d.tag,e===13){if(e=Wb(d),e!==null){s.blockedOn=e,Ic(s.priority,function(){Gc(d)});return}}else if(e===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var d=Yc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var b=new d.constructor(d.type,d);wb=b,d.target.dispatchEvent(b),wb=null}else return e=Cb(d),e!==null&&Fc(e),s.blockedOn=d,!1;e.shift()}return!0}function Zc(s,e,d){Xc(s)&&d.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(s,e){s.blockedOn===e&&(s.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(s){function e(tt){return ad(tt,s)}if(0<Kc.length){ad(Kc[0],s);for(var d=1;d<Kc.length;d++){var b=Kc[d];b.blockedOn===s&&(b.blockedOn=null)}}for(Lc!==null&&ad(Lc,s),Mc!==null&&ad(Mc,s),Nc!==null&&ad(Nc,s),Oc.forEach(e),Pc.forEach(e),d=0;d<Qc.length;d++)b=Qc[d],b.blockedOn===s&&(b.blockedOn=null);for(;0<Qc.length&&(d=Qc[0],d.blockedOn===null);)Vc(d),d.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(s,e,d,b){var tt=C$1,nt=cd.transition;cd.transition=null;try{C$1=1,fd(s,e,d,b)}finally{C$1=tt,cd.transition=nt}}function gd(s,e,d,b){var tt=C$1,nt=cd.transition;cd.transition=null;try{C$1=4,fd(s,e,d,b)}finally{C$1=tt,cd.transition=nt}}function fd(s,e,d,b){if(dd){var tt=Yc(s,e,d,b);if(tt===null)hd(s,e,b,id$1,d),Sc$1(s,b);else if(Uc(tt,s,e,d,b))b.stopPropagation();else if(Sc$1(s,b),e&4&&-1<Rc.indexOf(s)){for(;tt!==null;){var nt=Cb(tt);if(nt!==null&&Ec(nt),nt=Yc(s,e,d,b),nt===null&&hd(s,e,b,id$1,d),nt===tt)break;tt=nt}tt!==null&&b.stopPropagation()}else hd(s,e,b,null,d)}}var id$1=null;function Yc(s,e,d,b){if(id$1=null,s=xb(b),s=Wc(s),s!==null)if(e=Vb(s),e===null)s=null;else if(d=e.tag,d===13){if(s=Wb(e),s!==null)return s;s=null}else if(d===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return id$1=s,null}function jd(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,e=ld,d=e.length,b,tt="value"in kd?kd.value:kd.textContent,nt=tt.length;for(s=0;s<d&&e[s]===tt[s];s++);var ot=d-s;for(b=1;b<=ot&&e[d-b]===tt[nt-b];b++);return md=tt.slice(s,1<b?1-b:void 0)}function od(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function e(d,b,tt,nt,ot){this._reactName=d,this._targetInst=tt,this.type=b,this.nativeEvent=nt,this.target=ot,this.currentTarget=null;for(var ht in s)s.hasOwnProperty(ht)&&(d=s[ht],this[ht]=d?d(nt):nt[ht]);return this.isDefaultPrevented=(nt.defaultPrevented!=null?nt.defaultPrevented:nt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=Od[s])?!!e[s]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(s){if(s.key){var e=Md[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$2,de$1=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$2=" ",fe$2=!1;function ge$1(s,e){switch(s){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie$4=!1;function je$1(s,e){switch(s){case"compositionend":return he$2(e);case"keypress":return e.which!==32?null:(fe$2=!0,ee$2);case"textInput":return s=e.data,s===ee$2&&fe$2?null:s;default:return null}}function ke$1(s,e){if(ie$4)return s==="compositionend"||!ae$2&&ge$1(s,e)?(s=nd(),md=ld=kd=null,ie$4=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de$1&&e.locale!=="ko"?null:e.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!le$2[s.type]:e==="textarea"}function ne$1(s,e,d,b){Eb(b),e=oe$1(e,"onChange"),0<e.length&&(d=new td("onChange","change",null,d,b),s.push({event:d,listeners:e}))}var pe=null,qe$1=null;function re$1(s){se$2(s,0)}function te$2(s){var e=ue$1(s);if(Wa(e))return s}function ve$1(s,e){if(s==="change")return e}var we$1=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be),qe$1=pe=null)}function Be(s){if(s.propertyName==="value"&&te$2(qe$1)){var e=[];ne$1(e,qe$1,s,xb(s)),Jb(re$1,e)}}function Ce$2(s,e,d){s==="focusin"?(Ae$1(),pe=e,qe$1=d,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae$1()}function De$2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te$2(qe$1)}function Ee$2(s,e){if(s==="click")return te$2(e)}function Fe$1(s,e){if(s==="input"||s==="change")return te$2(e)}function Ge$1(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$1(s,e){if(He$2(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var d=Object.keys(s),b=Object.keys(e);if(d.length!==b.length)return!1;for(b=0;b<d.length;b++){var tt=d[b];if(!ja.call(e,tt)||!He$2(s[tt],e[tt]))return!1}return!0}function Je$1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ke$1(s,e){var d=Je$1(s);s=0;for(var b;d;){if(d.nodeType===3){if(b=s+d.textContent.length,s<=e&&b>=e)return{node:d,offset:e-s};s=b}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Je$1(d)}}function Le(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?Le(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function Me$2(){for(var s=window,e=Xa();e instanceof s.HTMLIFrameElement;){try{var d=typeof e.contentWindow.location.href=="string"}catch{d=!1}if(d)s=e.contentWindow;else break;e=Xa(s.document)}return e}function Ne$1(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function Oe$2(s){var e=Me$2(),d=s.focusedElem,b=s.selectionRange;if(e!==d&&d&&d.ownerDocument&&Le(d.ownerDocument.documentElement,d)){if(b!==null&&Ne$1(d)){if(e=b.start,s=b.end,s===void 0&&(s=e),"selectionStart"in d)d.selectionStart=e,d.selectionEnd=Math.min(s,d.value.length);else if(s=(e=d.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var tt=d.textContent.length,nt=Math.min(b.start,tt);b=b.end===void 0?nt:Math.min(b.end,tt),!s.extend&&nt>b&&(tt=b,b=nt,nt=tt),tt=Ke$1(d,nt);var ot=Ke$1(d,b);tt&&ot&&(s.rangeCount!==1||s.anchorNode!==tt.node||s.anchorOffset!==tt.offset||s.focusNode!==ot.node||s.focusOffset!==ot.offset)&&(e=e.createRange(),e.setStart(tt.node,tt.offset),s.removeAllRanges(),nt>b?(s.addRange(e),s.extend(ot.node,ot.offset)):(e.setEnd(ot.node,ot.offset),s.addRange(e)))}}for(e=[],s=d;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<e.length;d++)s=e[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Pe$1=ia&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(s,e,d){var b=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(b)||(b=Qe$1,"selectionStart"in b&&Ne$1(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Se$1&&Ie$1(Se$1,b)||(Se$1=b,b=oe$1(Re$1,"onSelect"),0<b.length&&(e=new td("onSelect","select",null,e,d),s.push({event:e,listeners:b}),e.target=Qe$1)))}function Ve$2(s,e){var d={};return d[s.toLowerCase()]=e.toLowerCase(),d["Webkit"+s]="webkit"+e,d["Moz"+s]="moz"+e,d}var We$1={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe$1={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(s){if(Xe$1[s])return Xe$1[s];if(!We$1[s])return s;var e=We$1[s],d;for(d in e)if(e.hasOwnProperty(d)&&d in Ye)return Xe$1[s]=e[d];return s}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(s,e){df.set(s,e),fa(e,[s])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(s,e,d){var b=s.type||"unknown-event";s.currentTarget=d,Ub(b,e,void 0,s),s.currentTarget=null}function se$2(s,e){e=(e&4)!==0;for(var d=0;d<s.length;d++){var b=s[d],tt=b.event;b=b.listeners;e:{var nt=void 0;if(e)for(var ot=b.length-1;0<=ot;ot--){var ht=b[ot],mt=ht.instance,gt=ht.currentTarget;if(ht=ht.listener,mt!==nt&&tt.isPropagationStopped())break e;nf(tt,ht,gt),nt=mt}else for(ot=0;ot<b.length;ot++){if(ht=b[ot],mt=ht.instance,gt=ht.currentTarget,ht=ht.listener,mt!==nt&&tt.isPropagationStopped())break e;nf(tt,ht,gt),nt=mt}}}if(Qb)throw s=Rb,Qb=!1,Rb=null,s}function D$3(s,e){var d=e[of];d===void 0&&(d=e[of]=new Set);var b=s+"__bubble";d.has(b)||(pf(e,s,2,!1),d.add(b))}function qf(s,e,d){var b=0;e&&(b|=4),pf(d,s,b,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(s){if(!s[rf]){s[rf]=!0,da.forEach(function(d){d!=="selectionchange"&&(mf.has(d)||qf(d,!1,s),qf(d,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(s,e,d,b){switch(jd(e)){case 1:var tt=ed;break;case 4:tt=gd;break;default:tt=fd}d=tt.bind(null,e,d,s),tt=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(tt=!0),b?tt!==void 0?s.addEventListener(e,d,{capture:!0,passive:tt}):s.addEventListener(e,d,!0):tt!==void 0?s.addEventListener(e,d,{passive:tt}):s.addEventListener(e,d,!1)}function hd(s,e,d,b,tt){var nt=b;if(!(e&1)&&!(e&2)&&b!==null)e:for(;;){if(b===null)return;var ot=b.tag;if(ot===3||ot===4){var ht=b.stateNode.containerInfo;if(ht===tt||ht.nodeType===8&&ht.parentNode===tt)break;if(ot===4)for(ot=b.return;ot!==null;){var mt=ot.tag;if((mt===3||mt===4)&&(mt=ot.stateNode.containerInfo,mt===tt||mt.nodeType===8&&mt.parentNode===tt))return;ot=ot.return}for(;ht!==null;){if(ot=Wc(ht),ot===null)return;if(mt=ot.tag,mt===5||mt===6){b=nt=ot;continue e}ht=ht.parentNode}}b=b.return}Jb(function(){var gt=nt,yt=xb(d),ft=[];e:{var st=df.get(s);if(st!==void 0){var bt=td,vt=s;switch(s){case"keypress":if(od(d)===0)break e;case"keydown":case"keyup":bt=Rd;break;case"focusin":vt="focus",bt=Fd;break;case"focusout":vt="blur",bt=Fd;break;case"beforeblur":case"afterblur":bt=Fd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=Vd;break;case $e$1:case af:case bf:bt=Hd;break;case cf:bt=Xd;break;case"scroll":bt=vd;break;case"wheel":bt=Zd;break;case"copy":case"cut":case"paste":bt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Td}var xt=(e&4)!==0,wt=!xt&&s==="scroll",St=xt?st!==null?st+"Capture":null:st;xt=[];for(var _t=gt,Tt;_t!==null;){Tt=_t;var Et=Tt.stateNode;if(Tt.tag===5&&Et!==null&&(Tt=Et,St!==null&&(Et=Kb(_t,St),Et!=null&&xt.push(tf(_t,Et,Tt)))),wt)break;_t=_t.return}0<xt.length&&(st=new bt(st,vt,null,d,yt),ft.push({event:st,listeners:xt}))}}if(!(e&7)){e:{if(st=s==="mouseover"||s==="pointerover",bt=s==="mouseout"||s==="pointerout",st&&d!==wb&&(vt=d.relatedTarget||d.fromElement)&&(Wc(vt)||vt[uf]))break e;if((bt||st)&&(st=yt.window===yt?yt:(st=yt.ownerDocument)?st.defaultView||st.parentWindow:window,bt?(vt=d.relatedTarget||d.toElement,bt=gt,vt=vt?Wc(vt):null,vt!==null&&(wt=Vb(vt),vt!==wt||vt.tag!==5&&vt.tag!==6)&&(vt=null)):(bt=null,vt=gt),bt!==vt)){if(xt=Bd,Et="onMouseLeave",St="onMouseEnter",_t="mouse",(s==="pointerout"||s==="pointerover")&&(xt=Td,Et="onPointerLeave",St="onPointerEnter",_t="pointer"),wt=bt==null?st:ue$1(bt),Tt=vt==null?st:ue$1(vt),st=new xt(Et,_t+"leave",bt,d,yt),st.target=wt,st.relatedTarget=Tt,Et=null,Wc(yt)===gt&&(xt=new xt(St,_t+"enter",vt,d,yt),xt.target=Tt,xt.relatedTarget=wt,Et=xt),wt=Et,bt&&vt)t:{for(xt=bt,St=vt,_t=0,Tt=xt;Tt;Tt=vf(Tt))_t++;for(Tt=0,Et=St;Et;Et=vf(Et))Tt++;for(;0<_t-Tt;)xt=vf(xt),_t--;for(;0<Tt-_t;)St=vf(St),Tt--;for(;_t--;){if(xt===St||St!==null&&xt===St.alternate)break t;xt=vf(xt),St=vf(St)}xt=null}else xt=null;bt!==null&&wf(ft,st,bt,xt,!1),vt!==null&&wt!==null&&wf(ft,wt,vt,xt,!0)}}e:{if(st=gt?ue$1(gt):window,bt=st.nodeName&&st.nodeName.toLowerCase(),bt==="select"||bt==="input"&&st.type==="file")var kt=ve$1;else if(me(st))if(we$1)kt=Fe$1;else{kt=De$2;var Mt=Ce$2}else(bt=st.nodeName)&&bt.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(kt=Ee$2);if(kt&&(kt=kt(s,gt))){ne$1(ft,kt,d,yt);break e}Mt&&Mt(s,st,gt),s==="focusout"&&(Mt=st._wrapperState)&&Mt.controlled&&st.type==="number"&&cb(st,"number",st.value)}switch(Mt=gt?ue$1(gt):window,s){case"focusin":(me(Mt)||Mt.contentEditable==="true")&&(Qe$1=Mt,Re$1=gt,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(ft,d,yt);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(ft,d,yt)}var Ot;if(ae$2)e:{switch(s){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else ie$4?ge$1(s,d)&&(Dt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Dt="onCompositionStart");Dt&&(de$1&&d.locale!=="ko"&&(ie$4||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&ie$4&&(Ot=nd()):(kd=yt,ld="value"in kd?kd.value:kd.textContent,ie$4=!0)),Mt=oe$1(gt,Dt),0<Mt.length&&(Dt=new Ld(Dt,s,null,d,yt),ft.push({event:Dt,listeners:Mt}),Ot?Dt.data=Ot:(Ot=he$2(d),Ot!==null&&(Dt.data=Ot)))),(Ot=ce$1?je$1(s,d):ke$1(s,d))&&(gt=oe$1(gt,"onBeforeInput"),0<gt.length&&(yt=new Ld("onBeforeInput","beforeinput",null,d,yt),ft.push({event:yt,listeners:gt}),yt.data=Ot))}se$2(ft,e)})}function tf(s,e,d){return{instance:s,listener:e,currentTarget:d}}function oe$1(s,e){for(var d=e+"Capture",b=[];s!==null;){var tt=s,nt=tt.stateNode;tt.tag===5&&nt!==null&&(tt=nt,nt=Kb(s,d),nt!=null&&b.unshift(tf(s,nt,tt)),nt=Kb(s,e),nt!=null&&b.push(tf(s,nt,tt))),s=s.return}return b}function vf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function wf(s,e,d,b,tt){for(var nt=e._reactName,ot=[];d!==null&&d!==b;){var ht=d,mt=ht.alternate,gt=ht.stateNode;if(mt!==null&&mt===b)break;ht.tag===5&&gt!==null&&(ht=gt,tt?(mt=Kb(d,nt),mt!=null&&ot.unshift(tf(d,mt,ht))):tt||(mt=Kb(d,nt),mt!=null&&ot.push(tf(d,mt,ht)))),d=d.return}ot.length!==0&&s.push({event:e,listeners:ot})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(s){return(typeof s=="string"?s:""+s).replace(xf,`
`).replace(yf,"")}function Af(s,e,d){if(e=zf(e),zf(s)!==e&&d)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(s){return Hf.resolve(null).then(s).catch(If)}:Ff;function If(s){setTimeout(function(){throw s})}function Kf(s,e){var d=e,b=0;do{var tt=d.nextSibling;if(s.removeChild(d),tt&&tt.nodeType===8)if(d=tt.data,d==="/$"){if(b===0){s.removeChild(tt),bd(e);return}b--}else d!=="$"&&d!=="$?"&&d!=="$!"||b++;d=tt}while(d);bd(e)}function Lf(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function Mf(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(e===0)return s;e--}else d==="/$"&&e++}s=s.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(s){var e=s[Of];if(e)return e;for(var d=s.parentNode;d;){if(e=d[uf]||d[Of]){if(d=e.alternate,e.child!==null||d!==null&&d.child!==null)for(s=Mf(s);s!==null;){if(d=s[Of])return d;s=Mf(s)}return e}s=d,d=s.parentNode}return null}function Cb(s){return s=s[Of]||s[uf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue$1(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(p(33))}function Db(s){return s[Pf]||null}var Sf=[],Tf=-1;function Uf(s){return{current:s}}function E(s){0>Tf||(s.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(s,e){Tf++,Sf[Tf]=s.current,s.current=e}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(s,e){var d=s.type.contextTypes;if(!d)return Vf;var b=s.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===e)return b.__reactInternalMemoizedMaskedChildContext;var tt={},nt;for(nt in d)tt[nt]=e[nt];return b&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=tt),tt}function Zf(s){return s=s.childContextTypes,s!=null}function $f(){E(Wf),E(H$2)}function ag(s,e,d){if(H$2.current!==Vf)throw Error(p(168));G$1(H$2,e),G$1(Wf,d)}function bg(s,e,d){var b=s.stateNode;if(e=e.childContextTypes,typeof b.getChildContext!="function")return d;b=b.getChildContext();for(var tt in b)if(!(tt in e))throw Error(p(108,Ra(s)||"Unknown",tt));return A$1({},d,b)}function cg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$1(H$2,s),G$1(Wf,Wf.current),!0}function dg(s,e,d){var b=s.stateNode;if(!b)throw Error(p(169));d?(s=bg(s,e,Xf),b.__reactInternalMemoizedMergedChildContext=s,E(Wf),E(H$2),G$1(H$2,s)):E(Wf),G$1(Wf,d)}var eg=null,fg=!1,gg=!1;function hg(s){eg===null?eg=[s]:eg.push(s)}function ig(s){fg=!0,hg(s)}function jg(){if(!gg&&eg!==null){gg=!0;var s=0,e=C$1;try{var d=eg;for(C$1=1;s<d.length;s++){var b=d[s];do b=b(!0);while(b!==null)}eg=null,fg=!1}catch(tt){throw eg!==null&&(eg=eg.slice(s+1)),ac(fc,jg),tt}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(s,e){kg[lg++]=ng,kg[lg++]=mg,mg=s,ng=e}function ug(s,e,d){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=s;var b=rg;s=sg;var tt=32-oc(b)-1;b&=~(1<<tt),d+=1;var nt=32-oc(e)+tt;if(30<nt){var ot=tt-tt%5;nt=(b&(1<<ot)-1).toString(32),b>>=ot,tt-=ot,rg=1<<32-oc(e)+tt|d<<tt|b,sg=nt+s}else rg=1<<nt|d<<tt|b,sg=s}function vg(s){s.return!==null&&(tg(s,1),ug(s,1,0))}function wg(s){for(;s===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;s===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(s,e){var d=Bg(5,null,null,0);d.elementType="DELETED",d.stateNode=e,d.return=s,e=s.deletions,e===null?(s.deletions=[d],s.flags|=16):e.push(d)}function Cg(s,e){switch(s.tag){case 5:var d=s.type;return e=e.nodeType!==1||d.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,xg=s,yg=Lf(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,xg=s,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(d=qg!==null?{id:rg,overflow:sg}:null,s.memoizedState={dehydrated:e,treeContext:d,retryLane:1073741824},d=Bg(18,null,null,0),d.stateNode=e,d.return=s,s.child=d,xg=s,yg=null,!0):!1;default:return!1}}function Dg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Eg(s){if(I$1){var e=yg;if(e){var d=e;if(!Cg(s,e)){if(Dg(s))throw Error(p(418));e=Lf(d.nextSibling);var b=xg;e&&Cg(s,e)?Ag(b,d):(s.flags=s.flags&-4097|2,I$1=!1,xg=s)}}else{if(Dg(s))throw Error(p(418));s.flags=s.flags&-4097|2,I$1=!1,xg=s}}}function Fg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xg=s}function Gg(s){if(s!==xg)return!1;if(!I$1)return Fg(s),I$1=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!Ef(s.type,s.memoizedProps)),e&&(e=yg)){if(Dg(s))throw Hg(),Error(p(418));for(;e;)Ag(s,e),e=Lf(e.nextSibling)}if(Fg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(e===0){yg=Lf(s.nextSibling);break e}e--}else d!=="$"&&d!=="$!"&&d!=="$?"||e++}s=s.nextSibling}yg=null}}else yg=xg?Lf(s.stateNode.nextSibling):null;return!0}function Hg(){for(var s=yg;s;)s=Lf(s.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(s){zg===null?zg=[s]:zg.push(s)}var Kg=ua.ReactCurrentBatchConfig;function Lg(s,e,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(p(309));var b=d.stateNode}if(!b)throw Error(p(147,s));var tt=b,nt=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===nt?e.ref:(e=function(ot){var ht=tt.refs;ot===null?delete ht[nt]:ht[nt]=ot},e._stringRef=nt,e)}if(typeof s!="string")throw Error(p(284));if(!d._owner)throw Error(p(290,s))}return s}function Mg(s,e){throw s=Object.prototype.toString.call(e),Error(p(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function Ng(s){var e=s._init;return e(s._payload)}function Og(s){function e(St,_t){if(s){var Tt=St.deletions;Tt===null?(St.deletions=[_t],St.flags|=16):Tt.push(_t)}}function d(St,_t){if(!s)return null;for(;_t!==null;)e(St,_t),_t=_t.sibling;return null}function b(St,_t){for(St=new Map;_t!==null;)_t.key!==null?St.set(_t.key,_t):St.set(_t.index,_t),_t=_t.sibling;return St}function tt(St,_t){return St=Pg(St,_t),St.index=0,St.sibling=null,St}function nt(St,_t,Tt){return St.index=Tt,s?(Tt=St.alternate,Tt!==null?(Tt=Tt.index,Tt<_t?(St.flags|=2,_t):Tt):(St.flags|=2,_t)):(St.flags|=1048576,_t)}function ot(St){return s&&St.alternate===null&&(St.flags|=2),St}function ht(St,_t,Tt,Et){return _t===null||_t.tag!==6?(_t=Qg(Tt,St.mode,Et),_t.return=St,_t):(_t=tt(_t,Tt),_t.return=St,_t)}function mt(St,_t,Tt,Et){var kt=Tt.type;return kt===ya?yt(St,_t,Tt.props.children,Et,Tt.key):_t!==null&&(_t.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Ha&&Ng(kt)===_t.type)?(Et=tt(_t,Tt.props),Et.ref=Lg(St,_t,Tt),Et.return=St,Et):(Et=Rg(Tt.type,Tt.key,Tt.props,null,St.mode,Et),Et.ref=Lg(St,_t,Tt),Et.return=St,Et)}function gt(St,_t,Tt,Et){return _t===null||_t.tag!==4||_t.stateNode.containerInfo!==Tt.containerInfo||_t.stateNode.implementation!==Tt.implementation?(_t=Sg(Tt,St.mode,Et),_t.return=St,_t):(_t=tt(_t,Tt.children||[]),_t.return=St,_t)}function yt(St,_t,Tt,Et,kt){return _t===null||_t.tag!==7?(_t=Tg(Tt,St.mode,Et,kt),_t.return=St,_t):(_t=tt(_t,Tt),_t.return=St,_t)}function ft(St,_t,Tt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return _t=Qg(""+_t,St.mode,Tt),_t.return=St,_t;if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case va:return Tt=Rg(_t.type,_t.key,_t.props,null,St.mode,Tt),Tt.ref=Lg(St,null,_t),Tt.return=St,Tt;case wa:return _t=Sg(_t,St.mode,Tt),_t.return=St,_t;case Ha:var Et=_t._init;return ft(St,Et(_t._payload),Tt)}if(eb(_t)||Ka(_t))return _t=Tg(_t,St.mode,Tt,null),_t.return=St,_t;Mg(St,_t)}return null}function st(St,_t,Tt,Et){var kt=_t!==null?_t.key:null;if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return kt!==null?null:ht(St,_t,""+Tt,Et);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va:return Tt.key===kt?mt(St,_t,Tt,Et):null;case wa:return Tt.key===kt?gt(St,_t,Tt,Et):null;case Ha:return kt=Tt._init,st(St,_t,kt(Tt._payload),Et)}if(eb(Tt)||Ka(Tt))return kt!==null?null:yt(St,_t,Tt,Et,null);Mg(St,Tt)}return null}function bt(St,_t,Tt,Et,kt){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return St=St.get(Tt)||null,ht(_t,St,""+Et,kt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:return St=St.get(Et.key===null?Tt:Et.key)||null,mt(_t,St,Et,kt);case wa:return St=St.get(Et.key===null?Tt:Et.key)||null,gt(_t,St,Et,kt);case Ha:var Mt=Et._init;return bt(St,_t,Tt,Mt(Et._payload),kt)}if(eb(Et)||Ka(Et))return St=St.get(Tt)||null,yt(_t,St,Et,kt,null);Mg(_t,Et)}return null}function vt(St,_t,Tt,Et){for(var kt=null,Mt=null,Ot=_t,Dt=_t=0,At=null;Ot!==null&&Dt<Tt.length;Dt++){Ot.index>Dt?(At=Ot,Ot=null):At=Ot.sibling;var It=st(St,Ot,Tt[Dt],Et);if(It===null){Ot===null&&(Ot=At);break}s&&Ot&&It.alternate===null&&e(St,Ot),_t=nt(It,_t,Dt),Mt===null?kt=It:Mt.sibling=It,Mt=It,Ot=At}if(Dt===Tt.length)return d(St,Ot),I$1&&tg(St,Dt),kt;if(Ot===null){for(;Dt<Tt.length;Dt++)Ot=ft(St,Tt[Dt],Et),Ot!==null&&(_t=nt(Ot,_t,Dt),Mt===null?kt=Ot:Mt.sibling=Ot,Mt=Ot);return I$1&&tg(St,Dt),kt}for(Ot=b(St,Ot);Dt<Tt.length;Dt++)At=bt(Ot,St,Dt,Tt[Dt],Et),At!==null&&(s&&At.alternate!==null&&Ot.delete(At.key===null?Dt:At.key),_t=nt(At,_t,Dt),Mt===null?kt=At:Mt.sibling=At,Mt=At);return s&&Ot.forEach(function(jt){return e(St,jt)}),I$1&&tg(St,Dt),kt}function xt(St,_t,Tt,Et){var kt=Ka(Tt);if(typeof kt!="function")throw Error(p(150));if(Tt=kt.call(Tt),Tt==null)throw Error(p(151));for(var Mt=kt=null,Ot=_t,Dt=_t=0,At=null,It=Tt.next();Ot!==null&&!It.done;Dt++,It=Tt.next()){Ot.index>Dt?(At=Ot,Ot=null):At=Ot.sibling;var jt=st(St,Ot,It.value,Et);if(jt===null){Ot===null&&(Ot=At);break}s&&Ot&&jt.alternate===null&&e(St,Ot),_t=nt(jt,_t,Dt),Mt===null?kt=jt:Mt.sibling=jt,Mt=jt,Ot=At}if(It.done)return d(St,Ot),I$1&&tg(St,Dt),kt;if(Ot===null){for(;!It.done;Dt++,It=Tt.next())It=ft(St,It.value,Et),It!==null&&(_t=nt(It,_t,Dt),Mt===null?kt=It:Mt.sibling=It,Mt=It);return I$1&&tg(St,Dt),kt}for(Ot=b(St,Ot);!It.done;Dt++,It=Tt.next())It=bt(Ot,St,Dt,It.value,Et),It!==null&&(s&&It.alternate!==null&&Ot.delete(It.key===null?Dt:It.key),_t=nt(It,_t,Dt),Mt===null?kt=It:Mt.sibling=It,Mt=It);return s&&Ot.forEach(function(qt){return e(St,qt)}),I$1&&tg(St,Dt),kt}function wt(St,_t,Tt,Et){if(typeof Tt=="object"&&Tt!==null&&Tt.type===ya&&Tt.key===null&&(Tt=Tt.props.children),typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va:e:{for(var kt=Tt.key,Mt=_t;Mt!==null;){if(Mt.key===kt){if(kt=Tt.type,kt===ya){if(Mt.tag===7){d(St,Mt.sibling),_t=tt(Mt,Tt.props.children),_t.return=St,St=_t;break e}}else if(Mt.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Ha&&Ng(kt)===Mt.type){d(St,Mt.sibling),_t=tt(Mt,Tt.props),_t.ref=Lg(St,Mt,Tt),_t.return=St,St=_t;break e}d(St,Mt);break}else e(St,Mt);Mt=Mt.sibling}Tt.type===ya?(_t=Tg(Tt.props.children,St.mode,Et,Tt.key),_t.return=St,St=_t):(Et=Rg(Tt.type,Tt.key,Tt.props,null,St.mode,Et),Et.ref=Lg(St,_t,Tt),Et.return=St,St=Et)}return ot(St);case wa:e:{for(Mt=Tt.key;_t!==null;){if(_t.key===Mt)if(_t.tag===4&&_t.stateNode.containerInfo===Tt.containerInfo&&_t.stateNode.implementation===Tt.implementation){d(St,_t.sibling),_t=tt(_t,Tt.children||[]),_t.return=St,St=_t;break e}else{d(St,_t);break}else e(St,_t);_t=_t.sibling}_t=Sg(Tt,St.mode,Et),_t.return=St,St=_t}return ot(St);case Ha:return Mt=Tt._init,wt(St,_t,Mt(Tt._payload),Et)}if(eb(Tt))return vt(St,_t,Tt,Et);if(Ka(Tt))return xt(St,_t,Tt,Et);Mg(St,Tt)}return typeof Tt=="string"&&Tt!==""||typeof Tt=="number"?(Tt=""+Tt,_t!==null&&_t.tag===6?(d(St,_t.sibling),_t=tt(_t,Tt),_t.return=St,St=_t):(d(St,_t),_t=Qg(Tt,St.mode,Et),_t.return=St,St=_t),ot(St)):d(St,_t)}return wt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(s){var e=Wg.current;E(Wg),s._currentValue=e}function bh(s,e,d){for(;s!==null;){var b=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,b!==null&&(b.childLanes|=e)):b!==null&&(b.childLanes&e)!==e&&(b.childLanes|=e),s===d)break;s=s.return}}function ch$1(s,e){Xg=s,Zg=Yg=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(dh=!0),s.firstContext=null)}function eh(s){var e=s._currentValue;if(Zg!==s)if(s={context:s,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=s,Xg.dependencies={lanes:0,firstContext:s}}else Yg=Yg.next=s;return e}var fh=null;function gh(s){fh===null?fh=[s]:fh.push(s)}function hh(s,e,d,b){var tt=e.interleaved;return tt===null?(d.next=d,gh(e)):(d.next=tt.next,tt.next=d),e.interleaved=d,ih(s,b)}function ih(s,e){s.lanes|=e;var d=s.alternate;for(d!==null&&(d.lanes|=e),d=s,s=s.return;s!==null;)s.childLanes|=e,d=s.alternate,d!==null&&(d.childLanes|=e),d=s,s=s.return;return d.tag===3?d.stateNode:null}var jh=!1;function kh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function mh(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(s,e,d){var b=s.updateQueue;if(b===null)return null;if(b=b.shared,K$1&2){var tt=b.pending;return tt===null?e.next=e:(e.next=tt.next,tt.next=e),b.pending=e,ih(s,d)}return tt=b.interleaved,tt===null?(e.next=e,gh(b)):(e.next=tt.next,tt.next=e),b.interleaved=e,ih(s,d)}function oh(s,e,d){if(e=e.updateQueue,e!==null&&(e=e.shared,(d&4194240)!==0)){var b=e.lanes;b&=s.pendingLanes,d|=b,e.lanes=d,Cc(s,d)}}function ph(s,e){var d=s.updateQueue,b=s.alternate;if(b!==null&&(b=b.updateQueue,d===b)){var tt=null,nt=null;if(d=d.firstBaseUpdate,d!==null){do{var ot={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};nt===null?tt=nt=ot:nt=nt.next=ot,d=d.next}while(d!==null);nt===null?tt=nt=e:nt=nt.next=e}else tt=nt=e;d={baseState:b.baseState,firstBaseUpdate:tt,lastBaseUpdate:nt,shared:b.shared,effects:b.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=e:s.next=e,d.lastBaseUpdate=e}function qh(s,e,d,b){var tt=s.updateQueue;jh=!1;var nt=tt.firstBaseUpdate,ot=tt.lastBaseUpdate,ht=tt.shared.pending;if(ht!==null){tt.shared.pending=null;var mt=ht,gt=mt.next;mt.next=null,ot===null?nt=gt:ot.next=gt,ot=mt;var yt=s.alternate;yt!==null&&(yt=yt.updateQueue,ht=yt.lastBaseUpdate,ht!==ot&&(ht===null?yt.firstBaseUpdate=gt:ht.next=gt,yt.lastBaseUpdate=mt))}if(nt!==null){var ft=tt.baseState;ot=0,yt=gt=mt=null,ht=nt;do{var st=ht.lane,bt=ht.eventTime;if((b&st)===st){yt!==null&&(yt=yt.next={eventTime:bt,lane:0,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null});e:{var vt=s,xt=ht;switch(st=e,bt=d,xt.tag){case 1:if(vt=xt.payload,typeof vt=="function"){ft=vt.call(bt,ft,st);break e}ft=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=xt.payload,st=typeof vt=="function"?vt.call(bt,ft,st):vt,st==null)break e;ft=A$1({},ft,st);break e;case 2:jh=!0}}ht.callback!==null&&ht.lane!==0&&(s.flags|=64,st=tt.effects,st===null?tt.effects=[ht]:st.push(ht))}else bt={eventTime:bt,lane:st,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null},yt===null?(gt=yt=bt,mt=ft):yt=yt.next=bt,ot|=st;if(ht=ht.next,ht===null){if(ht=tt.shared.pending,ht===null)break;st=ht,ht=st.next,st.next=null,tt.lastBaseUpdate=st,tt.shared.pending=null}}while(!0);if(yt===null&&(mt=ft),tt.baseState=mt,tt.firstBaseUpdate=gt,tt.lastBaseUpdate=yt,e=tt.shared.interleaved,e!==null){tt=e;do ot|=tt.lane,tt=tt.next;while(tt!==e)}else nt===null&&(tt.shared.lanes=0);rh|=ot,s.lanes=ot,s.memoizedState=ft}}function sh(s,e,d){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var b=s[e],tt=b.callback;if(tt!==null){if(b.callback=null,b=d,typeof tt!="function")throw Error(p(191,tt));tt.call(b)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(s){if(s===th)throw Error(p(174));return s}function yh(s,e){switch(G$1(wh,e),G$1(vh,s),G$1(uh,th),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=lb(e,s)}E(uh),G$1(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(s){xh(wh.current);var e=xh(uh.current),d=lb(e,s.type);e!==d&&(G$1(vh,s),G$1(uh,d))}function Bh(s){vh.current===s&&(E(uh),E(vh))}var L$1=Uf(0);function Ch(s){for(var e=s;e!==null;){if(e.tag===13){var d=e.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var s=0;s<Dh.length;s++)Dh[s]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(s,e){if(e===null)return!1;for(var d=0;d<e.length&&d<s.length;d++)if(!He$2(s[d],e[d]))return!1;return!0}function Nh(s,e,d,b,tt,nt){if(Hh=nt,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=s===null||s.memoizedState===null?Oh:Ph,s=d(b,tt),Jh){nt=0;do{if(Jh=!1,Kh=0,25<=nt)throw Error(p(301));nt+=1,O$1=N=null,e.updateQueue=null,Fh.current=Qh,s=d(b,tt)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,e)throw Error(p(300));return s}function Sh(){var s=Kh!==0;return Kh=0,s}function Th(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=s:O$1=O$1.next=s,O$1}function Uh(){if(N===null){var s=M$1.alternate;s=s!==null?s.memoizedState:null}else s=N.next;var e=O$1===null?M$1.memoizedState:O$1.next;if(e!==null)O$1=e,N=s;else{if(s===null)throw Error(p(310));N=s,s={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=s:O$1=O$1.next=s}return O$1}function Vh(s,e){return typeof e=="function"?e(s):e}function Wh(s){var e=Uh(),d=e.queue;if(d===null)throw Error(p(311));d.lastRenderedReducer=s;var b=N,tt=b.baseQueue,nt=d.pending;if(nt!==null){if(tt!==null){var ot=tt.next;tt.next=nt.next,nt.next=ot}b.baseQueue=tt=nt,d.pending=null}if(tt!==null){nt=tt.next,b=b.baseState;var ht=ot=null,mt=null,gt=nt;do{var yt=gt.lane;if((Hh&yt)===yt)mt!==null&&(mt=mt.next={lane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),b=gt.hasEagerState?gt.eagerState:s(b,gt.action);else{var ft={lane:yt,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null};mt===null?(ht=mt=ft,ot=b):mt=mt.next=ft,M$1.lanes|=yt,rh|=yt}gt=gt.next}while(gt!==null&&gt!==nt);mt===null?ot=b:mt.next=ht,He$2(b,e.memoizedState)||(dh=!0),e.memoizedState=b,e.baseState=ot,e.baseQueue=mt,d.lastRenderedState=b}if(s=d.interleaved,s!==null){tt=s;do nt=tt.lane,M$1.lanes|=nt,rh|=nt,tt=tt.next;while(tt!==s)}else tt===null&&(d.lanes=0);return[e.memoizedState,d.dispatch]}function Xh(s){var e=Uh(),d=e.queue;if(d===null)throw Error(p(311));d.lastRenderedReducer=s;var b=d.dispatch,tt=d.pending,nt=e.memoizedState;if(tt!==null){d.pending=null;var ot=tt=tt.next;do nt=s(nt,ot.action),ot=ot.next;while(ot!==tt);He$2(nt,e.memoizedState)||(dh=!0),e.memoizedState=nt,e.baseQueue===null&&(e.baseState=nt),d.lastRenderedState=nt}return[nt,b]}function Yh(){}function Zh(s,e){var d=M$1,b=Uh(),tt=e(),nt=!He$2(b.memoizedState,tt);if(nt&&(b.memoizedState=tt,dh=!0),b=b.queue,$h(ai.bind(null,d,b,s),[s]),b.getSnapshot!==e||nt||O$1!==null&&O$1.memoizedState.tag&1){if(d.flags|=2048,bi(9,ci.bind(null,d,b,tt,e),void 0,null),Q$1===null)throw Error(p(349));Hh&30||di(d,e,tt)}return tt}function di(s,e,d){s.flags|=16384,s={getSnapshot:e,value:d},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[s]):(d=e.stores,d===null?e.stores=[s]:d.push(s))}function ci(s,e,d,b){e.value=d,e.getSnapshot=b,ei(e)&&fi(s)}function ai(s,e,d){return d(function(){ei(e)&&fi(s)})}function ei(s){var e=s.getSnapshot;s=s.value;try{var d=e();return!He$2(s,d)}catch{return!0}}function fi(s){var e=ih(s,1);e!==null&&gi(e,s,1,-1)}function hi(s){var e=Th();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:s},e.queue=s,s=s.dispatch=ii.bind(null,M$1,s),[e.memoizedState,s]}function bi(s,e,d,b){return s={tag:s,create:e,destroy:d,deps:b,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=s.next=s):(d=e.lastEffect,d===null?e.lastEffect=s.next=s:(b=d.next,d.next=s,s.next=b,e.lastEffect=s)),s}function ji(){return Uh().memoizedState}function ki(s,e,d,b){var tt=Th();M$1.flags|=s,tt.memoizedState=bi(1|e,d,void 0,b===void 0?null:b)}function li(s,e,d,b){var tt=Uh();b=b===void 0?null:b;var nt=void 0;if(N!==null){var ot=N.memoizedState;if(nt=ot.destroy,b!==null&&Mh(b,ot.deps)){tt.memoizedState=bi(e,d,nt,b);return}}M$1.flags|=s,tt.memoizedState=bi(1|e,d,nt,b)}function mi(s,e){return ki(8390656,8,s,e)}function $h(s,e){return li(2048,8,s,e)}function ni(s,e){return li(4,2,s,e)}function oi(s,e){return li(4,4,s,e)}function pi$1(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function qi(s,e,d){return d=d!=null?d.concat([s]):null,li(4,4,pi$1.bind(null,e,s),d)}function ri(){}function si(s,e){var d=Uh();e=e===void 0?null:e;var b=d.memoizedState;return b!==null&&e!==null&&Mh(e,b[1])?b[0]:(d.memoizedState=[s,e],s)}function ti(s,e){var d=Uh();e=e===void 0?null:e;var b=d.memoizedState;return b!==null&&e!==null&&Mh(e,b[1])?b[0]:(s=s(),d.memoizedState=[s,e],s)}function ui(s,e,d){return Hh&21?(He$2(d,e)||(d=yc(),M$1.lanes|=d,rh|=d,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,dh=!0),s.memoizedState=d)}function vi(s,e){var d=C$1;C$1=d!==0&&4>d?d:4,s(!0);var b=Gh.transition;Gh.transition={};try{s(!1),e()}finally{C$1=d,Gh.transition=b}}function wi(){return Uh().memoizedState}function xi(s,e,d){var b=yi(s);if(d={lane:b,action:d,hasEagerState:!1,eagerState:null,next:null},zi(s))Ai(e,d);else if(d=hh(s,e,d,b),d!==null){var tt=R$1();gi(d,s,b,tt),Bi(d,e,b)}}function ii(s,e,d){var b=yi(s),tt={lane:b,action:d,hasEagerState:!1,eagerState:null,next:null};if(zi(s))Ai(e,tt);else{var nt=s.alternate;if(s.lanes===0&&(nt===null||nt.lanes===0)&&(nt=e.lastRenderedReducer,nt!==null))try{var ot=e.lastRenderedState,ht=nt(ot,d);if(tt.hasEagerState=!0,tt.eagerState=ht,He$2(ht,ot)){var mt=e.interleaved;mt===null?(tt.next=tt,gh(e)):(tt.next=mt.next,mt.next=tt),e.interleaved=tt;return}}catch{}finally{}d=hh(s,e,tt,b),d!==null&&(tt=R$1(),gi(d,s,b,tt),Bi(d,e,b))}}function zi(s){var e=s.alternate;return s===M$1||e!==null&&e===M$1}function Ai(s,e){Jh=Ih=!0;var d=s.pending;d===null?e.next=e:(e.next=d.next,d.next=e),s.pending=e}function Bi(s,e,d){if(d&4194240){var b=e.lanes;b&=s.pendingLanes,d|=b,e.lanes=d,Cc(s,d)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(s,e){return Th().memoizedState=[s,e===void 0?null:e],s},useContext:eh,useEffect:mi,useImperativeHandle:function(s,e,d){return d=d!=null?d.concat([s]):null,ki(4194308,4,pi$1.bind(null,e,s),d)},useLayoutEffect:function(s,e){return ki(4194308,4,s,e)},useInsertionEffect:function(s,e){return ki(4,2,s,e)},useMemo:function(s,e){var d=Th();return e=e===void 0?null:e,s=s(),d.memoizedState=[s,e],s},useReducer:function(s,e,d){var b=Th();return e=d!==void 0?d(e):e,b.memoizedState=b.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},b.queue=s,s=s.dispatch=xi.bind(null,M$1,s),[b.memoizedState,s]},useRef:function(s){var e=Th();return s={current:s},e.memoizedState=s},useState:hi,useDebugValue:ri,useDeferredValue:function(s){return Th().memoizedState=s},useTransition:function(){var s=hi(!1),e=s[0];return s=vi.bind(null,s[1]),Th().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,d){var b=M$1,tt=Th();if(I$1){if(d===void 0)throw Error(p(407));d=d()}else{if(d=e(),Q$1===null)throw Error(p(349));Hh&30||di(b,e,d)}tt.memoizedState=d;var nt={value:d,getSnapshot:e};return tt.queue=nt,mi(ai.bind(null,b,nt,s),[s]),b.flags|=2048,bi(9,ci.bind(null,b,nt,d,e),void 0,null),d},useId:function(){var s=Th(),e=Q$1.identifierPrefix;if(I$1){var d=sg,b=rg;d=(b&~(1<<32-oc(b)-1)).toString(32)+d,e=":"+e+"R"+d,d=Kh++,0<d&&(e+="H"+d.toString(32)),e+=":"}else d=Lh++,e=":"+e+"r"+d.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return ui(e,N.memoizedState,s)},useTransition:function(){var s=Wh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return N===null?e.memoizedState=s:ui(e,N.memoizedState,s)},useTransition:function(){var s=Xh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(s,e){if(s&&s.defaultProps){e=A$1({},e),s=s.defaultProps;for(var d in s)e[d]===void 0&&(e[d]=s[d]);return e}return e}function Di(s,e,d,b){e=s.memoizedState,d=d(b,e),d=d==null?e:A$1({},e,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Ei={isMounted:function(s){return(s=s._reactInternals)?Vb(s)===s:!1},enqueueSetState:function(s,e,d){s=s._reactInternals;var b=R$1(),tt=yi(s),nt=mh(b,tt);nt.payload=e,d!=null&&(nt.callback=d),e=nh(s,nt,tt),e!==null&&(gi(e,s,tt,b),oh(e,s,tt))},enqueueReplaceState:function(s,e,d){s=s._reactInternals;var b=R$1(),tt=yi(s),nt=mh(b,tt);nt.tag=1,nt.payload=e,d!=null&&(nt.callback=d),e=nh(s,nt,tt),e!==null&&(gi(e,s,tt,b),oh(e,s,tt))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var d=R$1(),b=yi(s),tt=mh(d,b);tt.tag=2,e!=null&&(tt.callback=e),e=nh(s,tt,b),e!==null&&(gi(e,s,b,d),oh(e,s,b))}};function Fi(s,e,d,b,tt,nt,ot){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(b,nt,ot):e.prototype&&e.prototype.isPureReactComponent?!Ie$1(d,b)||!Ie$1(tt,nt):!0}function Gi(s,e,d){var b=!1,tt=Vf,nt=e.contextType;return typeof nt=="object"&&nt!==null?nt=eh(nt):(tt=Zf(e)?Xf:H$2.current,b=e.contextTypes,nt=(b=b!=null)?Yf(s,tt):Vf),e=new e(d,nt),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,s.stateNode=e,e._reactInternals=s,b&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=tt,s.__reactInternalMemoizedMaskedChildContext=nt),e}function Hi(s,e,d,b){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(d,b),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(d,b),e.state!==s&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(s,e,d,b){var tt=s.stateNode;tt.props=d,tt.state=s.memoizedState,tt.refs={},kh(s);var nt=e.contextType;typeof nt=="object"&&nt!==null?tt.context=eh(nt):(nt=Zf(e)?Xf:H$2.current,tt.context=Yf(s,nt)),tt.state=s.memoizedState,nt=e.getDerivedStateFromProps,typeof nt=="function"&&(Di(s,e,nt,d),tt.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof tt.getSnapshotBeforeUpdate=="function"||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(e=tt.state,typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount(),e!==tt.state&&Ei.enqueueReplaceState(tt,tt.state,null),qh(s,d,tt,b),tt.state=s.memoizedState),typeof tt.componentDidMount=="function"&&(s.flags|=4194308)}function Ji(s,e){try{var d="",b=e;do d+=Pa(b),b=b.return;while(b);var tt=d}catch(nt){tt=`
Error generating stack: `+nt.message+`
`+nt.stack}return{value:s,source:e,stack:tt,digest:null}}function Ki(s,e,d){return{value:s,source:null,stack:d??null,digest:e??null}}function Li(s,e){try{console.error(e.value)}catch(d){setTimeout(function(){throw d})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(s,e,d){d=mh(-1,d),d.tag=3,d.payload={element:null};var b=e.value;return d.callback=function(){Oi||(Oi=!0,Pi=b),Li(s,e)},d}function Qi(s,e,d){d=mh(-1,d),d.tag=3;var b=s.type.getDerivedStateFromError;if(typeof b=="function"){var tt=e.value;d.payload=function(){return b(tt)},d.callback=function(){Li(s,e)}}var nt=s.stateNode;return nt!==null&&typeof nt.componentDidCatch=="function"&&(d.callback=function(){Li(s,e),typeof b!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var ot=e.stack;this.componentDidCatch(e.value,{componentStack:ot!==null?ot:""})}),d}function Si(s,e,d){var b=s.pingCache;if(b===null){b=s.pingCache=new Mi;var tt=new Set;b.set(e,tt)}else tt=b.get(e),tt===void 0&&(tt=new Set,b.set(e,tt));tt.has(d)||(tt.add(d),s=Ti.bind(null,s,e,d),e.then(s,s))}function Ui(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function Vi(s,e,d,b,tt){return s.mode&1?(s.flags|=65536,s.lanes=tt,s):(s===e?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(e=mh(-1,1),e.tag=2,nh(d,e,1))),d.lanes|=1),s)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(s,e,d,b){e.child=s===null?Vg(e,null,d,b):Ug(e,s.child,d,b)}function Yi(s,e,d,b,tt){d=d.render;var nt=e.ref;return ch$1(e,tt),b=Nh(s,e,d,b,nt,tt),d=Sh(),s!==null&&!dh?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~tt,Zi(s,e,tt)):(I$1&&d&&vg(e),e.flags|=1,Xi(s,e,b,tt),e.child)}function $i(s,e,d,b,tt){if(s===null){var nt=d.type;return typeof nt=="function"&&!aj(nt)&&nt.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(e.tag=15,e.type=nt,bj(s,e,nt,b,tt)):(s=Rg(d.type,null,b,e,e.mode,tt),s.ref=e.ref,s.return=e,e.child=s)}if(nt=s.child,!(s.lanes&tt)){var ot=nt.memoizedProps;if(d=d.compare,d=d!==null?d:Ie$1,d(ot,b)&&s.ref===e.ref)return Zi(s,e,tt)}return e.flags|=1,s=Pg(nt,b),s.ref=e.ref,s.return=e,e.child=s}function bj(s,e,d,b,tt){if(s!==null){var nt=s.memoizedProps;if(Ie$1(nt,b)&&s.ref===e.ref)if(dh=!1,e.pendingProps=b=nt,(s.lanes&tt)!==0)s.flags&131072&&(dh=!0);else return e.lanes=s.lanes,Zi(s,e,tt)}return cj(s,e,d,b,tt)}function dj(s,e,d){var b=e.pendingProps,tt=b.children,nt=s!==null?s.memoizedState:null;if(b.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=d;else{if(!(d&1073741824))return s=nt!==null?nt.baseLanes|d:d,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,G$1(ej,fj),fj|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=nt!==null?nt.baseLanes:d,G$1(ej,fj),fj|=b}else nt!==null?(b=nt.baseLanes|d,e.memoizedState=null):b=d,G$1(ej,fj),fj|=b;return Xi(s,e,tt,d),e.child}function gj(s,e){var d=e.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(e.flags|=512,e.flags|=2097152)}function cj(s,e,d,b,tt){var nt=Zf(d)?Xf:H$2.current;return nt=Yf(e,nt),ch$1(e,tt),d=Nh(s,e,d,b,nt,tt),b=Sh(),s!==null&&!dh?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~tt,Zi(s,e,tt)):(I$1&&b&&vg(e),e.flags|=1,Xi(s,e,d,tt),e.child)}function hj(s,e,d,b,tt){if(Zf(d)){var nt=!0;cg(e)}else nt=!1;if(ch$1(e,tt),e.stateNode===null)ij(s,e),Gi(e,d,b),Ii(e,d,b,tt),b=!0;else if(s===null){var ot=e.stateNode,ht=e.memoizedProps;ot.props=ht;var mt=ot.context,gt=d.contextType;typeof gt=="object"&&gt!==null?gt=eh(gt):(gt=Zf(d)?Xf:H$2.current,gt=Yf(e,gt));var yt=d.getDerivedStateFromProps,ft=typeof yt=="function"||typeof ot.getSnapshotBeforeUpdate=="function";ft||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(ht!==b||mt!==gt)&&Hi(e,ot,b,gt),jh=!1;var st=e.memoizedState;ot.state=st,qh(e,b,ot,tt),mt=e.memoizedState,ht!==b||st!==mt||Wf.current||jh?(typeof yt=="function"&&(Di(e,d,yt,b),mt=e.memoizedState),(ht=jh||Fi(e,d,ht,b,st,mt,gt))?(ft||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount()),typeof ot.componentDidMount=="function"&&(e.flags|=4194308)):(typeof ot.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=b,e.memoizedState=mt),ot.props=b,ot.state=mt,ot.context=gt,b=ht):(typeof ot.componentDidMount=="function"&&(e.flags|=4194308),b=!1)}else{ot=e.stateNode,lh(s,e),ht=e.memoizedProps,gt=e.type===e.elementType?ht:Ci(e.type,ht),ot.props=gt,ft=e.pendingProps,st=ot.context,mt=d.contextType,typeof mt=="object"&&mt!==null?mt=eh(mt):(mt=Zf(d)?Xf:H$2.current,mt=Yf(e,mt));var bt=d.getDerivedStateFromProps;(yt=typeof bt=="function"||typeof ot.getSnapshotBeforeUpdate=="function")||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(ht!==ft||st!==mt)&&Hi(e,ot,b,mt),jh=!1,st=e.memoizedState,ot.state=st,qh(e,b,ot,tt);var vt=e.memoizedState;ht!==ft||st!==vt||Wf.current||jh?(typeof bt=="function"&&(Di(e,d,bt,b),vt=e.memoizedState),(gt=jh||Fi(e,d,gt,b,st,vt,mt)||!1)?(yt||typeof ot.UNSAFE_componentWillUpdate!="function"&&typeof ot.componentWillUpdate!="function"||(typeof ot.componentWillUpdate=="function"&&ot.componentWillUpdate(b,vt,mt),typeof ot.UNSAFE_componentWillUpdate=="function"&&ot.UNSAFE_componentWillUpdate(b,vt,mt)),typeof ot.componentDidUpdate=="function"&&(e.flags|=4),typeof ot.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof ot.componentDidUpdate!="function"||ht===s.memoizedProps&&st===s.memoizedState||(e.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||ht===s.memoizedProps&&st===s.memoizedState||(e.flags|=1024),e.memoizedProps=b,e.memoizedState=vt),ot.props=b,ot.state=vt,ot.context=mt,b=gt):(typeof ot.componentDidUpdate!="function"||ht===s.memoizedProps&&st===s.memoizedState||(e.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||ht===s.memoizedProps&&st===s.memoizedState||(e.flags|=1024),b=!1)}return jj(s,e,d,b,nt,tt)}function jj(s,e,d,b,tt,nt){gj(s,e);var ot=(e.flags&128)!==0;if(!b&&!ot)return tt&&dg(e,d,!1),Zi(s,e,nt);b=e.stateNode,Wi.current=e;var ht=ot&&typeof d.getDerivedStateFromError!="function"?null:b.render();return e.flags|=1,s!==null&&ot?(e.child=Ug(e,s.child,null,nt),e.child=Ug(e,null,ht,nt)):Xi(s,e,ht,nt),e.memoizedState=b.state,tt&&dg(e,d,!0),e.child}function kj(s){var e=s.stateNode;e.pendingContext?ag(s,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(s,e.context,!1),yh(s,e.containerInfo)}function lj(s,e,d,b,tt){return Ig(),Jg(tt),e.flags|=256,Xi(s,e,d,b),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(s){return{baseLanes:s,cachePool:null,transitions:null}}function oj(s,e,d){var b=e.pendingProps,tt=L$1.current,nt=!1,ot=(e.flags&128)!==0,ht;if((ht=ot)||(ht=s!==null&&s.memoizedState===null?!1:(tt&2)!==0),ht?(nt=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(tt|=1),G$1(L$1,tt&1),s===null)return Eg(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(ot=b.children,s=b.fallback,nt?(b=e.mode,nt=e.child,ot={mode:"hidden",children:ot},!(b&1)&&nt!==null?(nt.childLanes=0,nt.pendingProps=ot):nt=pj(ot,b,0,null),s=Tg(s,b,d,null),nt.return=e,s.return=e,nt.sibling=s,e.child=nt,e.child.memoizedState=nj(d),e.memoizedState=mj,s):qj(e,ot));if(tt=s.memoizedState,tt!==null&&(ht=tt.dehydrated,ht!==null))return rj(s,e,ot,b,ht,tt,d);if(nt){nt=b.fallback,ot=e.mode,tt=s.child,ht=tt.sibling;var mt={mode:"hidden",children:b.children};return!(ot&1)&&e.child!==tt?(b=e.child,b.childLanes=0,b.pendingProps=mt,e.deletions=null):(b=Pg(tt,mt),b.subtreeFlags=tt.subtreeFlags&14680064),ht!==null?nt=Pg(ht,nt):(nt=Tg(nt,ot,d,null),nt.flags|=2),nt.return=e,b.return=e,b.sibling=nt,e.child=b,b=nt,nt=e.child,ot=s.child.memoizedState,ot=ot===null?nj(d):{baseLanes:ot.baseLanes|d,cachePool:null,transitions:ot.transitions},nt.memoizedState=ot,nt.childLanes=s.childLanes&~d,e.memoizedState=mj,b}return nt=s.child,s=nt.sibling,b=Pg(nt,{mode:"visible",children:b.children}),!(e.mode&1)&&(b.lanes=d),b.return=e,b.sibling=null,s!==null&&(d=e.deletions,d===null?(e.deletions=[s],e.flags|=16):d.push(s)),e.child=b,e.memoizedState=null,b}function qj(s,e){return e=pj({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function sj(s,e,d,b){return b!==null&&Jg(b),Ug(e,s.child,null,d),s=qj(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function rj(s,e,d,b,tt,nt,ot){if(d)return e.flags&256?(e.flags&=-257,b=Ki(Error(p(422))),sj(s,e,ot,b)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(nt=b.fallback,tt=e.mode,b=pj({mode:"visible",children:b.children},tt,0,null),nt=Tg(nt,tt,ot,null),nt.flags|=2,b.return=e,nt.return=e,b.sibling=nt,e.child=b,e.mode&1&&Ug(e,s.child,null,ot),e.child.memoizedState=nj(ot),e.memoizedState=mj,nt);if(!(e.mode&1))return sj(s,e,ot,null);if(tt.data==="$!"){if(b=tt.nextSibling&&tt.nextSibling.dataset,b)var ht=b.dgst;return b=ht,nt=Error(p(419)),b=Ki(nt,b,void 0),sj(s,e,ot,b)}if(ht=(ot&s.childLanes)!==0,dh||ht){if(b=Q$1,b!==null){switch(ot&-ot){case 4:tt=2;break;case 16:tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:tt=32;break;case 536870912:tt=268435456;break;default:tt=0}tt=tt&(b.suspendedLanes|ot)?0:tt,tt!==0&&tt!==nt.retryLane&&(nt.retryLane=tt,ih(s,tt),gi(b,s,tt,-1))}return tj(),b=Ki(Error(p(421))),sj(s,e,ot,b)}return tt.data==="$?"?(e.flags|=128,e.child=s.child,e=uj.bind(null,s),tt._reactRetry=e,null):(s=nt.treeContext,yg=Lf(tt.nextSibling),xg=e,I$1=!0,zg=null,s!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=s.id,sg=s.overflow,qg=e),e=qj(e,b.children),e.flags|=4096,e)}function vj(s,e,d){s.lanes|=e;var b=s.alternate;b!==null&&(b.lanes|=e),bh(s.return,e,d)}function wj(s,e,d,b,tt){var nt=s.memoizedState;nt===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:b,tail:d,tailMode:tt}:(nt.isBackwards=e,nt.rendering=null,nt.renderingStartTime=0,nt.last=b,nt.tail=d,nt.tailMode=tt)}function xj(s,e,d){var b=e.pendingProps,tt=b.revealOrder,nt=b.tail;if(Xi(s,e,b.children,d),b=L$1.current,b&2)b=b&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vj(s,d,e);else if(s.tag===19)vj(s,d,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}b&=1}if(G$1(L$1,b),!(e.mode&1))e.memoizedState=null;else switch(tt){case"forwards":for(d=e.child,tt=null;d!==null;)s=d.alternate,s!==null&&Ch(s)===null&&(tt=d),d=d.sibling;d=tt,d===null?(tt=e.child,e.child=null):(tt=d.sibling,d.sibling=null),wj(e,!1,tt,d,nt);break;case"backwards":for(d=null,tt=e.child,e.child=null;tt!==null;){if(s=tt.alternate,s!==null&&Ch(s)===null){e.child=tt;break}s=tt.sibling,tt.sibling=d,d=tt,tt=s}wj(e,!0,d,null,nt);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function Zi(s,e,d){if(s!==null&&(e.dependencies=s.dependencies),rh|=e.lanes,!(d&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(p(153));if(e.child!==null){for(s=e.child,d=Pg(s,s.pendingProps),e.child=d,d.return=e;s.sibling!==null;)s=s.sibling,d=d.sibling=Pg(s,s.pendingProps),d.return=e;d.sibling=null}return e.child}function yj(s,e,d){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var b=e.type._context,tt=e.memoizedProps.value;G$1(Wg,b._currentValue),b._currentValue=tt;break;case 13:if(b=e.memoizedState,b!==null)return b.dehydrated!==null?(G$1(L$1,L$1.current&1),e.flags|=128,null):d&e.child.childLanes?oj(s,e,d):(G$1(L$1,L$1.current&1),s=Zi(s,e,d),s!==null?s.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(b=(d&e.childLanes)!==0,s.flags&128){if(b)return xj(s,e,d);e.flags|=128}if(tt=e.memoizedState,tt!==null&&(tt.rendering=null,tt.tail=null,tt.lastEffect=null),G$1(L$1,L$1.current),b)break;return null;case 22:case 23:return e.lanes=0,dj(s,e,d)}return Zi(s,e,d)}var zj,Aj,Bj,Cj;zj=function(s,e){for(var d=e.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break;for(;d.sibling===null;){if(d.return===null||d.return===e)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};Aj=function(){};Bj=function(s,e,d,b){var tt=s.memoizedProps;if(tt!==b){s=e.stateNode,xh(uh.current);var nt=null;switch(d){case"input":tt=Ya(s,tt),b=Ya(s,b),nt=[];break;case"select":tt=A$1({},tt,{value:void 0}),b=A$1({},b,{value:void 0}),nt=[];break;case"textarea":tt=gb(s,tt),b=gb(s,b),nt=[];break;default:typeof tt.onClick!="function"&&typeof b.onClick=="function"&&(s.onclick=Bf)}ub(d,b);var ot;d=null;for(gt in tt)if(!b.hasOwnProperty(gt)&&tt.hasOwnProperty(gt)&&tt[gt]!=null)if(gt==="style"){var ht=tt[gt];for(ot in ht)ht.hasOwnProperty(ot)&&(d||(d={}),d[ot]="")}else gt!=="dangerouslySetInnerHTML"&&gt!=="children"&&gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&gt!=="autoFocus"&&(ea.hasOwnProperty(gt)?nt||(nt=[]):(nt=nt||[]).push(gt,null));for(gt in b){var mt=b[gt];if(ht=tt!=null?tt[gt]:void 0,b.hasOwnProperty(gt)&&mt!==ht&&(mt!=null||ht!=null))if(gt==="style")if(ht){for(ot in ht)!ht.hasOwnProperty(ot)||mt&&mt.hasOwnProperty(ot)||(d||(d={}),d[ot]="");for(ot in mt)mt.hasOwnProperty(ot)&&ht[ot]!==mt[ot]&&(d||(d={}),d[ot]=mt[ot])}else d||(nt||(nt=[]),nt.push(gt,d)),d=mt;else gt==="dangerouslySetInnerHTML"?(mt=mt?mt.__html:void 0,ht=ht?ht.__html:void 0,mt!=null&&ht!==mt&&(nt=nt||[]).push(gt,mt)):gt==="children"?typeof mt!="string"&&typeof mt!="number"||(nt=nt||[]).push(gt,""+mt):gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(gt)?(mt!=null&&gt==="onScroll"&&D$3("scroll",s),nt||ht===mt||(nt=[])):(nt=nt||[]).push(gt,mt))}d&&(nt=nt||[]).push("style",d);var gt=nt;(e.updateQueue=gt)&&(e.flags|=4)}};Cj=function(s,e,d,b){d!==b&&(e.flags|=4)};function Dj(s,e){if(!I$1)switch(s.tailMode){case"hidden":e=s.tail;for(var d=null;e!==null;)e.alternate!==null&&(d=e),e=e.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:b.sibling=null}}function S$2(s){var e=s.alternate!==null&&s.alternate.child===s.child,d=0,b=0;if(e)for(var tt=s.child;tt!==null;)d|=tt.lanes|tt.childLanes,b|=tt.subtreeFlags&14680064,b|=tt.flags&14680064,tt.return=s,tt=tt.sibling;else for(tt=s.child;tt!==null;)d|=tt.lanes|tt.childLanes,b|=tt.subtreeFlags,b|=tt.flags,tt.return=s,tt=tt.sibling;return s.subtreeFlags|=b,s.childLanes=d,e}function Ej(s,e,d){var b=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(e),null;case 1:return Zf(e.type)&&$f(),S$2(e),null;case 3:return b=e.stateNode,zh(),E(Wf),E(H$2),Eh(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(s===null||s.child===null)&&(Gg(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(s,e),S$2(e),null;case 5:Bh(e);var tt=xh(wh.current);if(d=e.type,s!==null&&e.stateNode!=null)Bj(s,e,d,b,tt),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!b){if(e.stateNode===null)throw Error(p(166));return S$2(e),null}if(s=xh(uh.current),Gg(e)){b=e.stateNode,d=e.type;var nt=e.memoizedProps;switch(b[Of]=e,b[Pf]=nt,s=(e.mode&1)!==0,d){case"dialog":D$3("cancel",b),D$3("close",b);break;case"iframe":case"object":case"embed":D$3("load",b);break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D$3(lf[tt],b);break;case"source":D$3("error",b);break;case"img":case"image":case"link":D$3("error",b),D$3("load",b);break;case"details":D$3("toggle",b);break;case"input":Za(b,nt),D$3("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!nt.multiple},D$3("invalid",b);break;case"textarea":hb(b,nt),D$3("invalid",b)}ub(d,nt),tt=null;for(var ot in nt)if(nt.hasOwnProperty(ot)){var ht=nt[ot];ot==="children"?typeof ht=="string"?b.textContent!==ht&&(nt.suppressHydrationWarning!==!0&&Af(b.textContent,ht,s),tt=["children",ht]):typeof ht=="number"&&b.textContent!==""+ht&&(nt.suppressHydrationWarning!==!0&&Af(b.textContent,ht,s),tt=["children",""+ht]):ea.hasOwnProperty(ot)&&ht!=null&&ot==="onScroll"&&D$3("scroll",b)}switch(d){case"input":Va(b),db(b,nt,!0);break;case"textarea":Va(b),jb(b);break;case"select":case"option":break;default:typeof nt.onClick=="function"&&(b.onclick=Bf)}b=tt,e.updateQueue=b,b!==null&&(e.flags|=4)}else{ot=tt.nodeType===9?tt:tt.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=kb(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=ot.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof b.is=="string"?s=ot.createElement(d,{is:b.is}):(s=ot.createElement(d),d==="select"&&(ot=s,b.multiple?ot.multiple=!0:b.size&&(ot.size=b.size))):s=ot.createElementNS(s,d),s[Of]=e,s[Pf]=b,zj(s,e,!1,!1),e.stateNode=s;e:{switch(ot=vb(d,b),d){case"dialog":D$3("cancel",s),D$3("close",s),tt=b;break;case"iframe":case"object":case"embed":D$3("load",s),tt=b;break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D$3(lf[tt],s);tt=b;break;case"source":D$3("error",s),tt=b;break;case"img":case"image":case"link":D$3("error",s),D$3("load",s),tt=b;break;case"details":D$3("toggle",s),tt=b;break;case"input":Za(s,b),tt=Ya(s,b),D$3("invalid",s);break;case"option":tt=b;break;case"select":s._wrapperState={wasMultiple:!!b.multiple},tt=A$1({},b,{value:void 0}),D$3("invalid",s);break;case"textarea":hb(s,b),tt=gb(s,b),D$3("invalid",s);break;default:tt=b}ub(d,tt),ht=tt;for(nt in ht)if(ht.hasOwnProperty(nt)){var mt=ht[nt];nt==="style"?sb(s,mt):nt==="dangerouslySetInnerHTML"?(mt=mt?mt.__html:void 0,mt!=null&&nb(s,mt)):nt==="children"?typeof mt=="string"?(d!=="textarea"||mt!=="")&&ob(s,mt):typeof mt=="number"&&ob(s,""+mt):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(ea.hasOwnProperty(nt)?mt!=null&&nt==="onScroll"&&D$3("scroll",s):mt!=null&&ta(s,nt,mt,ot))}switch(d){case"input":Va(s),db(s,b,!1);break;case"textarea":Va(s),jb(s);break;case"option":b.value!=null&&s.setAttribute("value",""+Sa(b.value));break;case"select":s.multiple=!!b.multiple,nt=b.value,nt!=null?fb(s,!!b.multiple,nt,!1):b.defaultValue!=null&&fb(s,!!b.multiple,b.defaultValue,!0);break;default:typeof tt.onClick=="function"&&(s.onclick=Bf)}switch(d){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$2(e),null;case 6:if(s&&e.stateNode!=null)Cj(s,e,s.memoizedProps,b);else{if(typeof b!="string"&&e.stateNode===null)throw Error(p(166));if(d=xh(wh.current),xh(uh.current),Gg(e)){if(b=e.stateNode,d=e.memoizedProps,b[Of]=e,(nt=b.nodeValue!==d)&&(s=xg,s!==null))switch(s.tag){case 3:Af(b.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Af(b.nodeValue,d,(s.mode&1)!==0)}nt&&(e.flags|=4)}else b=(d.nodeType===9?d:d.ownerDocument).createTextNode(b),b[Of]=e,e.stateNode=b}return S$2(e),null;case 13:if(E(L$1),b=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,nt=!1;else if(nt=Gg(e),b!==null&&b.dehydrated!==null){if(s===null){if(!nt)throw Error(p(318));if(nt=e.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(p(317));nt[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S$2(e),nt=!1}else zg!==null&&(Fj(zg),zg=null),nt=!0;if(!nt)return e.flags&65536?e:null}return e.flags&128?(e.lanes=d,e):(b=b!==null,b!==(s!==null&&s.memoizedState!==null)&&b&&(e.child.flags|=8192,e.mode&1&&(s===null||L$1.current&1?T$2===0&&(T$2=3):tj())),e.updateQueue!==null&&(e.flags|=4),S$2(e),null);case 4:return zh(),Aj(s,e),s===null&&sf(e.stateNode.containerInfo),S$2(e),null;case 10:return ah(e.type._context),S$2(e),null;case 17:return Zf(e.type)&&$f(),S$2(e),null;case 19:if(E(L$1),nt=e.memoizedState,nt===null)return S$2(e),null;if(b=(e.flags&128)!==0,ot=nt.rendering,ot===null)if(b)Dj(nt,!1);else{if(T$2!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(ot=Ch(s),ot!==null){for(e.flags|=128,Dj(nt,!1),b=ot.updateQueue,b!==null&&(e.updateQueue=b,e.flags|=4),e.subtreeFlags=0,b=d,d=e.child;d!==null;)nt=d,s=b,nt.flags&=14680066,ot=nt.alternate,ot===null?(nt.childLanes=0,nt.lanes=s,nt.child=null,nt.subtreeFlags=0,nt.memoizedProps=null,nt.memoizedState=null,nt.updateQueue=null,nt.dependencies=null,nt.stateNode=null):(nt.childLanes=ot.childLanes,nt.lanes=ot.lanes,nt.child=ot.child,nt.subtreeFlags=0,nt.deletions=null,nt.memoizedProps=ot.memoizedProps,nt.memoizedState=ot.memoizedState,nt.updateQueue=ot.updateQueue,nt.type=ot.type,s=ot.dependencies,nt.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return G$1(L$1,L$1.current&1|2),e.child}s=s.sibling}nt.tail!==null&&B$1()>Gj&&(e.flags|=128,b=!0,Dj(nt,!1),e.lanes=4194304)}else{if(!b)if(s=Ch(ot),s!==null){if(e.flags|=128,b=!0,d=s.updateQueue,d!==null&&(e.updateQueue=d,e.flags|=4),Dj(nt,!0),nt.tail===null&&nt.tailMode==="hidden"&&!ot.alternate&&!I$1)return S$2(e),null}else 2*B$1()-nt.renderingStartTime>Gj&&d!==1073741824&&(e.flags|=128,b=!0,Dj(nt,!1),e.lanes=4194304);nt.isBackwards?(ot.sibling=e.child,e.child=ot):(d=nt.last,d!==null?d.sibling=ot:e.child=ot,nt.last=ot)}return nt.tail!==null?(e=nt.tail,nt.rendering=e,nt.tail=e.sibling,nt.renderingStartTime=B$1(),e.sibling=null,d=L$1.current,G$1(L$1,b?d&1|2:d&1),e):(S$2(e),null);case 22:case 23:return Hj(),b=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==b&&(e.flags|=8192),b&&e.mode&1?fj&1073741824&&(S$2(e),e.subtreeFlags&6&&(e.flags|=8192)):S$2(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(s,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return zh(),E(Wf),E(H$2),Eh(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L$1),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return E(L$1),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(s,e){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(b){W$1(s,e,b)}else d.current=null}function Mj(s,e,d){try{d()}catch(b){W$1(s,e,b)}}var Nj=!1;function Oj(s,e){if(Cf=dd,s=Me$2(),Ne$1(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var b=d.getSelection&&d.getSelection();if(b&&b.rangeCount!==0){d=b.anchorNode;var tt=b.anchorOffset,nt=b.focusNode;b=b.focusOffset;try{d.nodeType,nt.nodeType}catch{d=null;break e}var ot=0,ht=-1,mt=-1,gt=0,yt=0,ft=s,st=null;t:for(;;){for(var bt;ft!==d||tt!==0&&ft.nodeType!==3||(ht=ot+tt),ft!==nt||b!==0&&ft.nodeType!==3||(mt=ot+b),ft.nodeType===3&&(ot+=ft.nodeValue.length),(bt=ft.firstChild)!==null;)st=ft,ft=bt;for(;;){if(ft===s)break t;if(st===d&&++gt===tt&&(ht=ot),st===nt&&++yt===b&&(mt=ot),(bt=ft.nextSibling)!==null)break;ft=st,st=ft.parentNode}ft=bt}d=ht===-1||mt===-1?null:{start:ht,end:mt}}else d=null}d=d||{start:0,end:0}}else d=null;for(Df={focusedElem:s,selectionRange:d},dd=!1,V$1=e;V$1!==null;)if(e=V$1,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,V$1=s;else for(;V$1!==null;){e=V$1;try{var vt=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(vt!==null){var xt=vt.memoizedProps,wt=vt.memoizedState,St=e.stateNode,_t=St.getSnapshotBeforeUpdate(e.elementType===e.type?xt:Ci(e.type,xt),wt);St.__reactInternalSnapshotBeforeUpdate=_t}break;case 3:var Tt=e.stateNode.containerInfo;Tt.nodeType===1?Tt.textContent="":Tt.nodeType===9&&Tt.documentElement&&Tt.removeChild(Tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(Et){W$1(e,e.return,Et)}if(s=e.sibling,s!==null){s.return=e.return,V$1=s;break}V$1=e.return}return vt=Nj,Nj=!1,vt}function Pj(s,e,d){var b=e.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var tt=b=b.next;do{if((tt.tag&s)===s){var nt=tt.destroy;tt.destroy=void 0,nt!==void 0&&Mj(e,d,nt)}tt=tt.next}while(tt!==b)}}function Qj(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var d=e=e.next;do{if((d.tag&s)===s){var b=d.create;d.destroy=b()}d=d.next}while(d!==e)}}function Rj(s){var e=s.ref;if(e!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof e=="function"?e(s):e.current=s}}function Sj(s){var e=s.alternate;e!==null&&(s.alternate=null,Sj(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Tj(s){return s.tag===5||s.tag===3||s.tag===4}function Uj(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Tj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vj(s,e,d){var b=s.tag;if(b===5||b===6)s=s.stateNode,e?d.nodeType===8?d.parentNode.insertBefore(s,e):d.insertBefore(s,e):(d.nodeType===8?(e=d.parentNode,e.insertBefore(s,d)):(e=d,e.appendChild(s)),d=d._reactRootContainer,d!=null||e.onclick!==null||(e.onclick=Bf));else if(b!==4&&(s=s.child,s!==null))for(Vj(s,e,d),s=s.sibling;s!==null;)Vj(s,e,d),s=s.sibling}function Wj(s,e,d){var b=s.tag;if(b===5||b===6)s=s.stateNode,e?d.insertBefore(s,e):d.appendChild(s);else if(b!==4&&(s=s.child,s!==null))for(Wj(s,e,d),s=s.sibling;s!==null;)Wj(s,e,d),s=s.sibling}var X$1=null,Xj=!1;function Yj(s,e,d){for(d=d.child;d!==null;)Zj(s,e,d),d=d.sibling}function Zj(s,e,d){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,d)}catch{}switch(d.tag){case 5:U$1||Lj(d,e);case 6:var b=X$1,tt=Xj;X$1=null,Yj(s,e,d),X$1=b,Xj=tt,X$1!==null&&(Xj?(s=X$1,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):X$1.removeChild(d.stateNode));break;case 18:X$1!==null&&(Xj?(s=X$1,d=d.stateNode,s.nodeType===8?Kf(s.parentNode,d):s.nodeType===1&&Kf(s,d),bd(s)):Kf(X$1,d.stateNode));break;case 4:b=X$1,tt=Xj,X$1=d.stateNode.containerInfo,Xj=!0,Yj(s,e,d),X$1=b,Xj=tt;break;case 0:case 11:case 14:case 15:if(!U$1&&(b=d.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){tt=b=b.next;do{var nt=tt,ot=nt.destroy;nt=nt.tag,ot!==void 0&&(nt&2||nt&4)&&Mj(d,e,ot),tt=tt.next}while(tt!==b)}Yj(s,e,d);break;case 1:if(!U$1&&(Lj(d,e),b=d.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=d.memoizedProps,b.state=d.memoizedState,b.componentWillUnmount()}catch(ht){W$1(d,e,ht)}Yj(s,e,d);break;case 21:Yj(s,e,d);break;case 22:d.mode&1?(U$1=(b=U$1)||d.memoizedState!==null,Yj(s,e,d),U$1=b):Yj(s,e,d);break;default:Yj(s,e,d)}}function ak(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new Kj),e.forEach(function(b){var tt=bk.bind(null,s,b);d.has(b)||(d.add(b),b.then(tt,tt))})}}function ck(s,e){var d=e.deletions;if(d!==null)for(var b=0;b<d.length;b++){var tt=d[b];try{var nt=s,ot=e,ht=ot;e:for(;ht!==null;){switch(ht.tag){case 5:X$1=ht.stateNode,Xj=!1;break e;case 3:X$1=ht.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=ht.stateNode.containerInfo,Xj=!0;break e}ht=ht.return}if(X$1===null)throw Error(p(160));Zj(nt,ot,tt),X$1=null,Xj=!1;var mt=tt.alternate;mt!==null&&(mt.return=null),tt.return=null}catch(gt){W$1(tt,e,gt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,s),e=e.sibling}function dk(s,e){var d=s.alternate,b=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ck(e,s),ek(s),b&4){try{Pj(3,s,s.return),Qj(3,s)}catch(xt){W$1(s,s.return,xt)}try{Pj(5,s,s.return)}catch(xt){W$1(s,s.return,xt)}}break;case 1:ck(e,s),ek(s),b&512&&d!==null&&Lj(d,d.return);break;case 5:if(ck(e,s),ek(s),b&512&&d!==null&&Lj(d,d.return),s.flags&32){var tt=s.stateNode;try{ob(tt,"")}catch(xt){W$1(s,s.return,xt)}}if(b&4&&(tt=s.stateNode,tt!=null)){var nt=s.memoizedProps,ot=d!==null?d.memoizedProps:nt,ht=s.type,mt=s.updateQueue;if(s.updateQueue=null,mt!==null)try{ht==="input"&&nt.type==="radio"&&nt.name!=null&&ab(tt,nt),vb(ht,ot);var gt=vb(ht,nt);for(ot=0;ot<mt.length;ot+=2){var yt=mt[ot],ft=mt[ot+1];yt==="style"?sb(tt,ft):yt==="dangerouslySetInnerHTML"?nb(tt,ft):yt==="children"?ob(tt,ft):ta(tt,yt,ft,gt)}switch(ht){case"input":bb(tt,nt);break;case"textarea":ib(tt,nt);break;case"select":var st=tt._wrapperState.wasMultiple;tt._wrapperState.wasMultiple=!!nt.multiple;var bt=nt.value;bt!=null?fb(tt,!!nt.multiple,bt,!1):st!==!!nt.multiple&&(nt.defaultValue!=null?fb(tt,!!nt.multiple,nt.defaultValue,!0):fb(tt,!!nt.multiple,nt.multiple?[]:"",!1))}tt[Pf]=nt}catch(xt){W$1(s,s.return,xt)}}break;case 6:if(ck(e,s),ek(s),b&4){if(s.stateNode===null)throw Error(p(162));tt=s.stateNode,nt=s.memoizedProps;try{tt.nodeValue=nt}catch(xt){W$1(s,s.return,xt)}}break;case 3:if(ck(e,s),ek(s),b&4&&d!==null&&d.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(xt){W$1(s,s.return,xt)}break;case 4:ck(e,s),ek(s);break;case 13:ck(e,s),ek(s),tt=s.child,tt.flags&8192&&(nt=tt.memoizedState!==null,tt.stateNode.isHidden=nt,!nt||tt.alternate!==null&&tt.alternate.memoizedState!==null||(fk=B$1())),b&4&&ak(s);break;case 22:if(yt=d!==null&&d.memoizedState!==null,s.mode&1?(U$1=(gt=U$1)||yt,ck(e,s),U$1=gt):ck(e,s),ek(s),b&8192){if(gt=s.memoizedState!==null,(s.stateNode.isHidden=gt)&&!yt&&s.mode&1)for(V$1=s,yt=s.child;yt!==null;){for(ft=V$1=yt;V$1!==null;){switch(st=V$1,bt=st.child,st.tag){case 0:case 11:case 14:case 15:Pj(4,st,st.return);break;case 1:Lj(st,st.return);var vt=st.stateNode;if(typeof vt.componentWillUnmount=="function"){b=st,d=st.return;try{e=b,vt.props=e.memoizedProps,vt.state=e.memoizedState,vt.componentWillUnmount()}catch(xt){W$1(b,d,xt)}}break;case 5:Lj(st,st.return);break;case 22:if(st.memoizedState!==null){gk(ft);continue}}bt!==null?(bt.return=st,V$1=bt):gk(ft)}yt=yt.sibling}e:for(yt=null,ft=s;;){if(ft.tag===5){if(yt===null){yt=ft;try{tt=ft.stateNode,gt?(nt=tt.style,typeof nt.setProperty=="function"?nt.setProperty("display","none","important"):nt.display="none"):(ht=ft.stateNode,mt=ft.memoizedProps.style,ot=mt!=null&&mt.hasOwnProperty("display")?mt.display:null,ht.style.display=rb("display",ot))}catch(xt){W$1(s,s.return,xt)}}}else if(ft.tag===6){if(yt===null)try{ft.stateNode.nodeValue=gt?"":ft.memoizedProps}catch(xt){W$1(s,s.return,xt)}}else if((ft.tag!==22&&ft.tag!==23||ft.memoizedState===null||ft===s)&&ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===s)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===s)break e;yt===ft&&(yt=null),ft=ft.return}yt===ft&&(yt=null),ft.sibling.return=ft.return,ft=ft.sibling}}break;case 19:ck(e,s),ek(s),b&4&&ak(s);break;case 21:break;default:ck(e,s),ek(s)}}function ek(s){var e=s.flags;if(e&2){try{e:{for(var d=s.return;d!==null;){if(Tj(d)){var b=d;break e}d=d.return}throw Error(p(160))}switch(b.tag){case 5:var tt=b.stateNode;b.flags&32&&(ob(tt,""),b.flags&=-33);var nt=Uj(s);Wj(s,nt,tt);break;case 3:case 4:var ot=b.stateNode.containerInfo,ht=Uj(s);Vj(s,ht,ot);break;default:throw Error(p(161))}}catch(mt){W$1(s,s.return,mt)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function hk(s,e,d){V$1=s,ik(s)}function ik(s,e,d){for(var b=(s.mode&1)!==0;V$1!==null;){var tt=V$1,nt=tt.child;if(tt.tag===22&&b){var ot=tt.memoizedState!==null||Jj;if(!ot){var ht=tt.alternate,mt=ht!==null&&ht.memoizedState!==null||U$1;ht=Jj;var gt=U$1;if(Jj=ot,(U$1=mt)&&!gt)for(V$1=tt;V$1!==null;)ot=V$1,mt=ot.child,ot.tag===22&&ot.memoizedState!==null?jk(tt):mt!==null?(mt.return=ot,V$1=mt):jk(tt);for(;nt!==null;)V$1=nt,ik(nt),nt=nt.sibling;V$1=tt,Jj=ht,U$1=gt}kk(s)}else tt.subtreeFlags&8772&&nt!==null?(nt.return=tt,V$1=nt):kk(s)}}function kk(s){for(;V$1!==null;){var e=V$1;if(e.flags&8772){var d=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U$1||Qj(5,e);break;case 1:var b=e.stateNode;if(e.flags&4&&!U$1)if(d===null)b.componentDidMount();else{var tt=e.elementType===e.type?d.memoizedProps:Ci(e.type,d.memoizedProps);b.componentDidUpdate(tt,d.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var nt=e.updateQueue;nt!==null&&sh(e,nt,b);break;case 3:var ot=e.updateQueue;if(ot!==null){if(d=null,e.child!==null)switch(e.child.tag){case 5:d=e.child.stateNode;break;case 1:d=e.child.stateNode}sh(e,ot,d)}break;case 5:var ht=e.stateNode;if(d===null&&e.flags&4){d=ht;var mt=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":mt.autoFocus&&d.focus();break;case"img":mt.src&&(d.src=mt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var gt=e.alternate;if(gt!==null){var yt=gt.memoizedState;if(yt!==null){var ft=yt.dehydrated;ft!==null&&bd(ft)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U$1||e.flags&512&&Rj(e)}catch(st){W$1(e,e.return,st)}}if(e===s){V$1=null;break}if(d=e.sibling,d!==null){d.return=e.return,V$1=d;break}V$1=e.return}}function gk(s){for(;V$1!==null;){var e=V$1;if(e===s){V$1=null;break}var d=e.sibling;if(d!==null){d.return=e.return,V$1=d;break}V$1=e.return}}function jk(s){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var d=e.return;try{Qj(4,e)}catch(mt){W$1(e,d,mt)}break;case 1:var b=e.stateNode;if(typeof b.componentDidMount=="function"){var tt=e.return;try{b.componentDidMount()}catch(mt){W$1(e,tt,mt)}}var nt=e.return;try{Rj(e)}catch(mt){W$1(e,nt,mt)}break;case 5:var ot=e.return;try{Rj(e)}catch(mt){W$1(e,ot,mt)}}}catch(mt){W$1(e,e.return,mt)}if(e===s){V$1=null;break}var ht=e.sibling;if(ht!==null){ht.return=e.return,V$1=ht;break}V$1=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$1=null,Y$2=null,Z$2=0,fj=0,ej=Uf(0),T$2=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(s){return s.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(s=C$1,s!==0||(s=window.event,s=s===void 0?16:jd(s.type)),s):1}function gi(s,e,d,b){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(s,d,b),(!(K$1&2)||s!==Q$1)&&(s===Q$1&&(!(K$1&2)&&(qk|=d),T$2===4&&Ck(s,Z$2)),Dk(s,b),d===1&&K$1===0&&!(e.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(s,e){var d=s.callbackNode;wc(s,e);var b=uc(s,s===Q$1?Z$2:0);if(b===0)d!==null&&bc(d),s.callbackNode=null,s.callbackPriority=0;else if(e=b&-b,s.callbackPriority!==e){if(d!=null&&bc(d),e===1)s.tag===0?ig(Ek.bind(null,s)):hg(Ek.bind(null,s)),Jf(function(){!(K$1&6)&&jg()}),d=null;else{switch(Dc$1(b)){case 1:d=fc;break;case 4:d=gc;break;case 16:d=hc;break;case 536870912:d=jc;break;default:d=hc}d=Fk(d,Gk.bind(null,s))}s.callbackPriority=e,s.callbackNode=d}}function Gk(s,e){if(Ak=-1,Bk=0,K$1&6)throw Error(p(327));var d=s.callbackNode;if(Hk()&&s.callbackNode!==d)return null;var b=uc(s,s===Q$1?Z$2:0);if(b===0)return null;if(b&30||b&s.expiredLanes||e)e=Ik(s,b);else{e=b;var tt=K$1;K$1|=2;var nt=Jk();(Q$1!==s||Z$2!==e)&&(uk=null,Gj=B$1()+500,Kk(s,e));do try{Lk();break}catch(ht){Mk(s,ht)}while(!0);$g(),mk.current=nt,K$1=tt,Y$2!==null?e=0:(Q$1=null,Z$2=0,e=T$2)}if(e!==0){if(e===2&&(tt=xc(s),tt!==0&&(b=tt,e=Nk(s,tt))),e===1)throw d=pk,Kk(s,0),Ck(s,b),Dk(s,B$1()),d;if(e===6)Ck(s,b);else{if(tt=s.current.alternate,!(b&30)&&!Ok(tt)&&(e=Ik(s,b),e===2&&(nt=xc(s),nt!==0&&(b=nt,e=Nk(s,nt))),e===1))throw d=pk,Kk(s,0),Ck(s,b),Dk(s,B$1()),d;switch(s.finishedWork=tt,s.finishedLanes=b,e){case 0:case 1:throw Error(p(345));case 2:Pk(s,tk,uk);break;case 3:if(Ck(s,b),(b&130023424)===b&&(e=fk+500-B$1(),10<e)){if(uc(s,0)!==0)break;if(tt=s.suspendedLanes,(tt&b)!==b){R$1(),s.pingedLanes|=s.suspendedLanes&tt;break}s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),e);break}Pk(s,tk,uk);break;case 4:if(Ck(s,b),(b&4194240)===b)break;for(e=s.eventTimes,tt=-1;0<b;){var ot=31-oc(b);nt=1<<ot,ot=e[ot],ot>tt&&(tt=ot),b&=~nt}if(b=tt,b=B$1()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*lk(b/1960))-b,10<b){s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),b);break}Pk(s,tk,uk);break;case 5:Pk(s,tk,uk);break;default:throw Error(p(329))}}}return Dk(s,B$1()),s.callbackNode===d?Gk.bind(null,s):null}function Nk(s,e){var d=sk;return s.current.memoizedState.isDehydrated&&(Kk(s,e).flags|=256),s=Ik(s,e),s!==2&&(e=tk,tk=d,e!==null&&Fj(e)),s}function Fj(s){tk===null?tk=s:tk.push.apply(tk,s)}function Ok(s){for(var e=s;;){if(e.flags&16384){var d=e.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var b=0;b<d.length;b++){var tt=d[b],nt=tt.getSnapshot;tt=tt.value;try{if(!He$2(nt(),tt))return!1}catch{return!1}}}if(d=e.child,e.subtreeFlags&16384&&d!==null)d.return=e,e=d;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(s,e){for(e&=~rk,e&=~qk,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var d=31-oc(e),b=1<<d;s[d]=-1,e&=~b}}function Ek(s){if(K$1&6)throw Error(p(327));Hk();var e=uc(s,0);if(!(e&1))return Dk(s,B$1()),null;var d=Ik(s,e);if(s.tag!==0&&d===2){var b=xc(s);b!==0&&(e=b,d=Nk(s,b))}if(d===1)throw d=pk,Kk(s,0),Ck(s,e),Dk(s,B$1()),d;if(d===6)throw Error(p(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,Pk(s,tk,uk),Dk(s,B$1()),null}function Qk(s,e){var d=K$1;K$1|=1;try{return s(e)}finally{K$1=d,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(s){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var e=K$1;K$1|=1;var d=ok.transition,b=C$1;try{if(ok.transition=null,C$1=1,s)return s()}finally{C$1=b,ok.transition=d,K$1=e,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(s,e){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,Gf(d)),Y$2!==null)for(d=Y$2.return;d!==null;){var b=d;switch(wg(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&$f();break;case 3:zh(),E(Wf),E(H$2),Eh();break;case 5:Bh(b);break;case 4:zh();break;case 13:E(L$1);break;case 19:E(L$1);break;case 10:ah(b.type._context);break;case 22:case 23:Hj()}d=d.return}if(Q$1=s,Y$2=s=Pg(s.current,null),Z$2=fj=e,T$2=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(d=fh[e],b=d.interleaved,b!==null){d.interleaved=null;var tt=b.next,nt=d.pending;if(nt!==null){var ot=nt.next;nt.next=tt,b.next=ot}d.pending=b}fh=null}return s}function Mk(s,e){do{var d=Y$2;try{if($g(),Fh.current=Rh,Ih){for(var b=M$1.memoizedState;b!==null;){var tt=b.queue;tt!==null&&(tt.pending=null),b=b.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,d===null||d.return===null){T$2=1,pk=e,Y$2=null;break}e:{var nt=s,ot=d.return,ht=d,mt=e;if(e=Z$2,ht.flags|=32768,mt!==null&&typeof mt=="object"&&typeof mt.then=="function"){var gt=mt,yt=ht,ft=yt.tag;if(!(yt.mode&1)&&(ft===0||ft===11||ft===15)){var st=yt.alternate;st?(yt.updateQueue=st.updateQueue,yt.memoizedState=st.memoizedState,yt.lanes=st.lanes):(yt.updateQueue=null,yt.memoizedState=null)}var bt=Ui(ot);if(bt!==null){bt.flags&=-257,Vi(bt,ot,ht,nt,e),bt.mode&1&&Si(nt,gt,e),e=bt,mt=gt;var vt=e.updateQueue;if(vt===null){var xt=new Set;xt.add(mt),e.updateQueue=xt}else vt.add(mt);break e}else{if(!(e&1)){Si(nt,gt,e),tj();break e}mt=Error(p(426))}}else if(I$1&&ht.mode&1){var wt=Ui(ot);if(wt!==null){!(wt.flags&65536)&&(wt.flags|=256),Vi(wt,ot,ht,nt,e),Jg(Ji(mt,ht));break e}}nt=mt=Ji(mt,ht),T$2!==4&&(T$2=2),sk===null?sk=[nt]:sk.push(nt),nt=ot;do{switch(nt.tag){case 3:nt.flags|=65536,e&=-e,nt.lanes|=e;var St=Ni(nt,mt,e);ph(nt,St);break e;case 1:ht=mt;var _t=nt.type,Tt=nt.stateNode;if(!(nt.flags&128)&&(typeof _t.getDerivedStateFromError=="function"||Tt!==null&&typeof Tt.componentDidCatch=="function"&&(Ri===null||!Ri.has(Tt)))){nt.flags|=65536,e&=-e,nt.lanes|=e;var Et=Qi(nt,ht,e);ph(nt,Et);break e}}nt=nt.return}while(nt!==null)}Sk(d)}catch(kt){e=kt,Y$2===d&&d!==null&&(Y$2=d=d.return);continue}break}while(!0)}function Jk(){var s=mk.current;return mk.current=Rh,s===null?Rh:s}function tj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$2)}function Ik(s,e){var d=K$1;K$1|=2;var b=Jk();(Q$1!==s||Z$2!==e)&&(uk=null,Kk(s,e));do try{Tk();break}catch(tt){Mk(s,tt)}while(!0);if($g(),K$1=d,mk.current=b,Y$2!==null)throw Error(p(261));return Q$1=null,Z$2=0,T$2}function Tk(){for(;Y$2!==null;)Uk(Y$2)}function Lk(){for(;Y$2!==null&&!cc();)Uk(Y$2)}function Uk(s){var e=Vk(s.alternate,s,fj);s.memoizedProps=s.pendingProps,e===null?Sk(s):Y$2=e,nk.current=null}function Sk(s){var e=s;do{var d=e.alternate;if(s=e.return,e.flags&32768){if(d=Ij(d,e),d!==null){d.flags&=32767,Y$2=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{T$2=6,Y$2=null;return}}else if(d=Ej(d,e,fj),d!==null){Y$2=d;return}if(e=e.sibling,e!==null){Y$2=e;return}Y$2=e=s}while(e!==null);T$2===0&&(T$2=5)}function Pk(s,e,d){var b=C$1,tt=ok.transition;try{ok.transition=null,C$1=1,Wk(s,e,d,b)}finally{ok.transition=tt,C$1=b}return null}function Wk(s,e,d,b){do Hk();while(wk!==null);if(K$1&6)throw Error(p(327));d=s.finishedWork;var tt=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(p(177));s.callbackNode=null,s.callbackPriority=0;var nt=d.lanes|d.childLanes;if(Bc(s,nt),s===Q$1&&(Y$2=Q$1=null,Z$2=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),nt=(d.flags&15990)!==0,d.subtreeFlags&15990||nt){nt=ok.transition,ok.transition=null;var ot=C$1;C$1=1;var ht=K$1;K$1|=4,nk.current=null,Oj(s,d),dk(d,s),Oe$2(Df),dd=!!Cf,Df=Cf=null,s.current=d,hk(d),dc(),K$1=ht,C$1=ot,ok.transition=nt}else s.current=d;if(vk&&(vk=!1,wk=s,xk=tt),nt=s.pendingLanes,nt===0&&(Ri=null),mc(d.stateNode),Dk(s,B$1()),e!==null)for(b=s.onRecoverableError,d=0;d<e.length;d++)tt=e[d],b(tt.value,{componentStack:tt.stack,digest:tt.digest});if(Oi)throw Oi=!1,s=Pi,Pi=null,s;return xk&1&&s.tag!==0&&Hk(),nt=s.pendingLanes,nt&1?s===zk?yk++:(yk=0,zk=s):yk=0,jg(),null}function Hk(){if(wk!==null){var s=Dc$1(xk),e=ok.transition,d=C$1;try{if(ok.transition=null,C$1=16>s?16:s,wk===null)var b=!1;else{if(s=wk,wk=null,xk=0,K$1&6)throw Error(p(331));var tt=K$1;for(K$1|=4,V$1=s.current;V$1!==null;){var nt=V$1,ot=nt.child;if(V$1.flags&16){var ht=nt.deletions;if(ht!==null){for(var mt=0;mt<ht.length;mt++){var gt=ht[mt];for(V$1=gt;V$1!==null;){var yt=V$1;switch(yt.tag){case 0:case 11:case 15:Pj(8,yt,nt)}var ft=yt.child;if(ft!==null)ft.return=yt,V$1=ft;else for(;V$1!==null;){yt=V$1;var st=yt.sibling,bt=yt.return;if(Sj(yt),yt===gt){V$1=null;break}if(st!==null){st.return=bt,V$1=st;break}V$1=bt}}}var vt=nt.alternate;if(vt!==null){var xt=vt.child;if(xt!==null){vt.child=null;do{var wt=xt.sibling;xt.sibling=null,xt=wt}while(xt!==null)}}V$1=nt}}if(nt.subtreeFlags&2064&&ot!==null)ot.return=nt,V$1=ot;else e:for(;V$1!==null;){if(nt=V$1,nt.flags&2048)switch(nt.tag){case 0:case 11:case 15:Pj(9,nt,nt.return)}var St=nt.sibling;if(St!==null){St.return=nt.return,V$1=St;break e}V$1=nt.return}}var _t=s.current;for(V$1=_t;V$1!==null;){ot=V$1;var Tt=ot.child;if(ot.subtreeFlags&2064&&Tt!==null)Tt.return=ot,V$1=Tt;else e:for(ot=_t;V$1!==null;){if(ht=V$1,ht.flags&2048)try{switch(ht.tag){case 0:case 11:case 15:Qj(9,ht)}}catch(kt){W$1(ht,ht.return,kt)}if(ht===ot){V$1=null;break e}var Et=ht.sibling;if(Et!==null){Et.return=ht.return,V$1=Et;break e}V$1=ht.return}}if(K$1=tt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,s)}catch{}b=!0}return b}finally{C$1=d,ok.transition=e}}return!1}function Xk(s,e,d){e=Ji(d,e),e=Ni(s,e,1),s=nh(s,e,1),e=R$1(),s!==null&&(Ac(s,1,e),Dk(s,e))}function W$1(s,e,d){if(s.tag===3)Xk(s,s,d);else for(;e!==null;){if(e.tag===3){Xk(e,s,d);break}else if(e.tag===1){var b=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Ri===null||!Ri.has(b))){s=Ji(d,s),s=Qi(e,s,1),e=nh(e,s,1),s=R$1(),e!==null&&(Ac(e,1,s),Dk(e,s));break}}e=e.return}}function Ti(s,e,d){var b=s.pingCache;b!==null&&b.delete(e),e=R$1(),s.pingedLanes|=s.suspendedLanes&d,Q$1===s&&(Z$2&d)===d&&(T$2===4||T$2===3&&(Z$2&130023424)===Z$2&&500>B$1()-fk?Kk(s,0):rk|=d),Dk(s,e)}function Yk(s,e){e===0&&(s.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var d=R$1();s=ih(s,e),s!==null&&(Ac(s,e,d),Dk(s,d))}function uj(s){var e=s.memoizedState,d=0;e!==null&&(d=e.retryLane),Yk(s,d)}function bk(s,e){var d=0;switch(s.tag){case 13:var b=s.stateNode,tt=s.memoizedState;tt!==null&&(d=tt.retryLane);break;case 19:b=s.stateNode;break;default:throw Error(p(314))}b!==null&&b.delete(e),Yk(s,d)}var Vk;Vk=function(s,e,d){if(s!==null)if(s.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(s.lanes&d)&&!(e.flags&128))return dh=!1,yj(s,e,d);dh=!!(s.flags&131072)}else dh=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var b=e.type;ij(s,e),s=e.pendingProps;var tt=Yf(e,H$2.current);ch$1(e,d),tt=Nh(null,e,b,s,tt,d);var nt=Sh();return e.flags|=1,typeof tt=="object"&&tt!==null&&typeof tt.render=="function"&&tt.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(b)?(nt=!0,cg(e)):nt=!1,e.memoizedState=tt.state!==null&&tt.state!==void 0?tt.state:null,kh(e),tt.updater=Ei,e.stateNode=tt,tt._reactInternals=e,Ii(e,b,s,d),e=jj(null,e,b,!0,nt,d)):(e.tag=0,I$1&&nt&&vg(e),Xi(null,e,tt,d),e=e.child),e;case 16:b=e.elementType;e:{switch(ij(s,e),s=e.pendingProps,tt=b._init,b=tt(b._payload),e.type=b,tt=e.tag=Zk(b),s=Ci(b,s),tt){case 0:e=cj(null,e,b,s,d);break e;case 1:e=hj(null,e,b,s,d);break e;case 11:e=Yi(null,e,b,s,d);break e;case 14:e=$i(null,e,b,Ci(b.type,s),d);break e}throw Error(p(306,b,""))}return e;case 0:return b=e.type,tt=e.pendingProps,tt=e.elementType===b?tt:Ci(b,tt),cj(s,e,b,tt,d);case 1:return b=e.type,tt=e.pendingProps,tt=e.elementType===b?tt:Ci(b,tt),hj(s,e,b,tt,d);case 3:e:{if(kj(e),s===null)throw Error(p(387));b=e.pendingProps,nt=e.memoizedState,tt=nt.element,lh(s,e),qh(e,b,null,d);var ot=e.memoizedState;if(b=ot.element,nt.isDehydrated)if(nt={element:b,isDehydrated:!1,cache:ot.cache,pendingSuspenseBoundaries:ot.pendingSuspenseBoundaries,transitions:ot.transitions},e.updateQueue.baseState=nt,e.memoizedState=nt,e.flags&256){tt=Ji(Error(p(423)),e),e=lj(s,e,b,d,tt);break e}else if(b!==tt){tt=Ji(Error(p(424)),e),e=lj(s,e,b,d,tt);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,d=Vg(e,null,b,d),e.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ig(),b===tt){e=Zi(s,e,d);break e}Xi(s,e,b,d)}e=e.child}return e;case 5:return Ah(e),s===null&&Eg(e),b=e.type,tt=e.pendingProps,nt=s!==null?s.memoizedProps:null,ot=tt.children,Ef(b,tt)?ot=null:nt!==null&&Ef(b,nt)&&(e.flags|=32),gj(s,e),Xi(s,e,ot,d),e.child;case 6:return s===null&&Eg(e),null;case 13:return oj(s,e,d);case 4:return yh(e,e.stateNode.containerInfo),b=e.pendingProps,s===null?e.child=Ug(e,null,b,d):Xi(s,e,b,d),e.child;case 11:return b=e.type,tt=e.pendingProps,tt=e.elementType===b?tt:Ci(b,tt),Yi(s,e,b,tt,d);case 7:return Xi(s,e,e.pendingProps,d),e.child;case 8:return Xi(s,e,e.pendingProps.children,d),e.child;case 12:return Xi(s,e,e.pendingProps.children,d),e.child;case 10:e:{if(b=e.type._context,tt=e.pendingProps,nt=e.memoizedProps,ot=tt.value,G$1(Wg,b._currentValue),b._currentValue=ot,nt!==null)if(He$2(nt.value,ot)){if(nt.children===tt.children&&!Wf.current){e=Zi(s,e,d);break e}}else for(nt=e.child,nt!==null&&(nt.return=e);nt!==null;){var ht=nt.dependencies;if(ht!==null){ot=nt.child;for(var mt=ht.firstContext;mt!==null;){if(mt.context===b){if(nt.tag===1){mt=mh(-1,d&-d),mt.tag=2;var gt=nt.updateQueue;if(gt!==null){gt=gt.shared;var yt=gt.pending;yt===null?mt.next=mt:(mt.next=yt.next,yt.next=mt),gt.pending=mt}}nt.lanes|=d,mt=nt.alternate,mt!==null&&(mt.lanes|=d),bh(nt.return,d,e),ht.lanes|=d;break}mt=mt.next}}else if(nt.tag===10)ot=nt.type===e.type?null:nt.child;else if(nt.tag===18){if(ot=nt.return,ot===null)throw Error(p(341));ot.lanes|=d,ht=ot.alternate,ht!==null&&(ht.lanes|=d),bh(ot,d,e),ot=nt.sibling}else ot=nt.child;if(ot!==null)ot.return=nt;else for(ot=nt;ot!==null;){if(ot===e){ot=null;break}if(nt=ot.sibling,nt!==null){nt.return=ot.return,ot=nt;break}ot=ot.return}nt=ot}Xi(s,e,tt.children,d),e=e.child}return e;case 9:return tt=e.type,b=e.pendingProps.children,ch$1(e,d),tt=eh(tt),b=b(tt),e.flags|=1,Xi(s,e,b,d),e.child;case 14:return b=e.type,tt=Ci(b,e.pendingProps),tt=Ci(b.type,tt),$i(s,e,b,tt,d);case 15:return bj(s,e,e.type,e.pendingProps,d);case 17:return b=e.type,tt=e.pendingProps,tt=e.elementType===b?tt:Ci(b,tt),ij(s,e),e.tag=1,Zf(b)?(s=!0,cg(e)):s=!1,ch$1(e,d),Gi(e,b,tt),Ii(e,b,tt,d),jj(null,e,b,!0,s,d);case 19:return xj(s,e,d);case 22:return dj(s,e,d)}throw Error(p(156,e.tag))};function Fk(s,e){return ac(s,e)}function $k(s,e,d,b){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(s,e,d,b){return new $k(s,e,d,b)}function aj(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zk(s){if(typeof s=="function")return aj(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Da)return 11;if(s===Ga)return 14}return 2}function Pg(s,e){var d=s.alternate;return d===null?(d=Bg(s.tag,e,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=e,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,e=s.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function Rg(s,e,d,b,tt,nt){var ot=2;if(b=s,typeof s=="function")aj(s)&&(ot=1);else if(typeof s=="string")ot=5;else e:switch(s){case ya:return Tg(d.children,tt,nt,e);case za:ot=8,tt|=8;break;case Aa:return s=Bg(12,d,e,tt|2),s.elementType=Aa,s.lanes=nt,s;case Ea:return s=Bg(13,d,e,tt),s.elementType=Ea,s.lanes=nt,s;case Fa:return s=Bg(19,d,e,tt),s.elementType=Fa,s.lanes=nt,s;case Ia:return pj(d,tt,nt,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ba:ot=10;break e;case Ca:ot=9;break e;case Da:ot=11;break e;case Ga:ot=14;break e;case Ha:ot=16,b=null;break e}throw Error(p(130,s==null?s:typeof s,""))}return e=Bg(ot,d,e,tt),e.elementType=s,e.type=b,e.lanes=nt,e}function Tg(s,e,d,b){return s=Bg(7,s,b,e),s.lanes=d,s}function pj(s,e,d,b){return s=Bg(22,s,b,e),s.elementType=Ia,s.lanes=d,s.stateNode={isHidden:!1},s}function Qg(s,e,d){return s=Bg(6,s,null,e),s.lanes=d,s}function Sg(s,e,d){return e=Bg(4,s.children!==null?s.children:[],s.key,e),e.lanes=d,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function al(s,e,d,b,tt){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=b,this.onRecoverableError=tt,this.mutableSourceEagerHydrationData=null}function bl(s,e,d,b,tt,nt,ot,ht,mt){return s=new al(s,e,d,ht,mt),e===1?(e=1,nt===!0&&(e|=8)):e=0,nt=Bg(3,null,null,e),s.current=nt,nt.stateNode=s,nt.memoizedState={element:b,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(nt),s}function cl(s,e,d){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:b==null?null:""+b,children:s,containerInfo:e,implementation:d}}function dl(s){if(!s)return Vf;s=s._reactInternals;e:{if(Vb(s)!==s||s.tag!==1)throw Error(p(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(s.tag===1){var d=s.type;if(Zf(d))return bg(s,d,e)}return e}function el(s,e,d,b,tt,nt,ot,ht,mt){return s=bl(d,b,!0,s,tt,nt,ot,ht,mt),s.context=dl(null),d=s.current,b=R$1(),tt=yi(d),nt=mh(b,tt),nt.callback=e??null,nh(d,nt,tt),s.current.lanes=tt,Ac(s,tt,b),Dk(s,b),s}function fl(s,e,d,b){var tt=e.current,nt=R$1(),ot=yi(tt);return d=dl(d),e.context===null?e.context=d:e.pendingContext=d,e=mh(nt,ot),e.payload={element:s},b=b===void 0?null:b,b!==null&&(e.callback=b),s=nh(tt,e,ot),s!==null&&(gi(s,tt,ot,nt),oh(s,tt,ot)),ot}function gl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function hl(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<e?d:e}}function il(s,e){hl(s,e),(s=s.alternate)&&hl(s,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(s){console.error(s)};function ll(s){this._internalRoot=s}ml.prototype.render=ll.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(s,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;Rk(function(){fl(null,s,null,null)}),e[uf]=null}};function ml(s){this._internalRoot=s}ml.prototype.unstable_scheduleHydration=function(s){if(s){var e=Hc();s={blockedOn:null,target:s,priority:e};for(var d=0;d<Qc.length&&e!==0&&e<Qc[d].priority;d++);Qc.splice(d,0,s),d===0&&Vc(s)}};function nl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ol(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(s,e,d,b,tt){if(tt){if(typeof b=="function"){var nt=b;b=function(){var gt=gl(ot);nt.call(gt)}}var ot=el(e,b,s,0,null,!1,!1,"",pl);return s._reactRootContainer=ot,s[uf]=ot.current,sf(s.nodeType===8?s.parentNode:s),Rk(),ot}for(;tt=s.lastChild;)s.removeChild(tt);if(typeof b=="function"){var ht=b;b=function(){var gt=gl(mt);ht.call(gt)}}var mt=bl(s,0,!1,null,null,!1,!1,"",pl);return s._reactRootContainer=mt,s[uf]=mt.current,sf(s.nodeType===8?s.parentNode:s),Rk(function(){fl(e,mt,d,b)}),mt}function rl(s,e,d,b,tt){var nt=d._reactRootContainer;if(nt){var ot=nt;if(typeof tt=="function"){var ht=tt;tt=function(){var mt=gl(ot);ht.call(mt)}}fl(e,ot,s,tt)}else ot=ql(d,e,s,tt,b);return gl(ot)}Ec=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var d=tc(e.pendingLanes);d!==0&&(Cc(e,d|1),Dk(e,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var b=ih(s,1);if(b!==null){var tt=R$1();gi(b,s,1,tt)}}),il(s,1)}};Fc=function(s){if(s.tag===13){var e=ih(s,134217728);if(e!==null){var d=R$1();gi(e,s,134217728,d)}il(s,134217728)}};Gc=function(s){if(s.tag===13){var e=yi(s),d=ih(s,e);if(d!==null){var b=R$1();gi(d,s,e,b)}il(s,e)}};Hc=function(){return C$1};Ic=function(s,e){var d=C$1;try{return C$1=s,e()}finally{C$1=d}};yb=function(s,e,d){switch(e){case"input":if(bb(s,d),e=d.name,d.type==="radio"&&e!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<d.length;e++){var b=d[e];if(b!==s&&b.form===s.form){var tt=Db(b);if(!tt)throw Error(p(90));Wa(b),bb(b,tt)}}}break;case"textarea":ib(s,d);break;case"select":e=d.value,e!=null&&fb(s,!!d.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Zb(s),s===null?null:s.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(s,e){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(s,e,null,d)};reactDom_production_min.createRoot=function(s,e){if(!nl(s))throw Error(p(299));var d=!1,b="",tt=kl;return e!=null&&(e.unstable_strictMode===!0&&(d=!0),e.identifierPrefix!==void 0&&(b=e.identifierPrefix),e.onRecoverableError!==void 0&&(tt=e.onRecoverableError)),e=bl(s,1,!1,null,null,d,!1,b,tt),s[uf]=e.current,sf(s.nodeType===8?s.parentNode:s),new ll(e)};reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(p(188)):(s=Object.keys(s).join(","),Error(p(268,s)));return s=Zb(e),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s){return Rk(s)};reactDom_production_min.hydrate=function(s,e,d){if(!ol(e))throw Error(p(200));return rl(null,s,e,!0,d)};reactDom_production_min.hydrateRoot=function(s,e,d){if(!nl(s))throw Error(p(405));var b=d!=null&&d.hydratedSources||null,tt=!1,nt="",ot=kl;if(d!=null&&(d.unstable_strictMode===!0&&(tt=!0),d.identifierPrefix!==void 0&&(nt=d.identifierPrefix),d.onRecoverableError!==void 0&&(ot=d.onRecoverableError)),e=el(e,null,s,1,d??null,tt,!1,nt,ot),s[uf]=e.current,sf(s),b)for(s=0;s<b.length;s++)d=b[s],tt=d._getVersion,tt=tt(d._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[d,tt]:e.mutableSourceEagerHydrationData.push(d,tt);return new ml(e)};reactDom_production_min.render=function(s,e,d){if(!ol(e))throw Error(p(200));return rl(null,s,e,!1,d)};reactDom_production_min.unmountComponentAtNode=function(s){if(!ol(s))throw Error(p(40));return s._reactRootContainer?(Rk(function(){rl(null,null,s,!1,function(){s._reactRootContainer=null,s[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,e,d,b){if(!ol(d))throw Error(p(200));if(s==null||s._reactInternals===void 0)throw Error(p(38));return rl(s,e,d,!1,b)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(s){console.error(s)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports),ReactDOM$1=_mergeNamespaces({__proto__:null,default:ReactDOM},[reactDomExports]);var m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;const PyodideContext=reactExports.createContext(),loadPyodide=async s=>window.pyodide?(console.log("init pyodid scopes"),initPyodideScopes(),window.pyodide):window.startedLoading?(console.log("started loading"),!1):(console.log("loading pyodide!"),window.setHandlers=()=>{},window.raisePyodideStopFlag=()=>{},window.startedLoading=!0,s("Loading python..."),window.pyodide=await window.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.25.0/full/"}),console.log("LOADED..."),await window.pyodide.loadPackage("numpy"),await window.pyodide.loadPackage("scipy"),await window.pyodide.loadPackage("pandas"),initPyodideScopes(),await window.pyodide.runPythonAsync(`
from js import document
import sys
import io


import copy
pyodide_scopes = {
 "copy": copy,
 "init_vars": copy.copy(globals()),
 "current_scope": "",
 "next_scope_number": 0,
 "scopes": {}
}
pyodide_scopes['init_vars']['pyodide_scopes'] = pyodide_scopes
del copy

# capture standard output
sys.stdout = io.StringIO()
__name__ = "__main__"
`),console.log("pyodide ready"),s("ready"),window.pyodide),initPyodideScopes=()=>{window.pyodide.runPython(`  import copy
  pyodide_scopes = {
   "copy": copy,
   "init_vars": copy.copy(globals()),
   "current_scope": "",
   "next_scope_number": 0,
   "scopes": {}
  }
  pyodide_scopes['init_vars']['pyodide_scopes'] = pyodide_scopes
  del copy
  `)};function PyodideProvider({children:s}){const[e,d]=reactExports.useState("loading");return reactExports.useEffect(()=>{loadPyodide(d)},[]),jsxRuntimeExports.jsx(PyodideContext.Provider,{value:{pyodideLoadingState:e},children:s})}/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var d=arguments[e];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(s[b]=d[b])}return s},_extends$3.apply(this,arguments)}var Action;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(s){s===void 0&&(s={});function e(b,tt){let{pathname:nt,search:ot,hash:ht}=b.location;return createLocation("",{pathname:nt,search:ot,hash:ht},tt.state&&tt.state.usr||null,tt.state&&tt.state.key||"default")}function d(b,tt){return typeof tt=="string"?tt:createPath(tt)}return getUrlBasedHistory(e,d,null,s)}function invariant(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function warning$1(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(s,e){return{usr:s.state,key:s.key,idx:e}}function createLocation(s,e,d,b){return d===void 0&&(d=null),_extends$3({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:d,key:e&&e.key||b||createKey$1()})}function createPath(s){let{pathname:e="/",search:d="",hash:b=""}=s;return d&&d!=="?"&&(e+=d.charAt(0)==="?"?d:"?"+d),b&&b!=="#"&&(e+=b.charAt(0)==="#"?b:"#"+b),e}function parsePath(s){let e={};if(s){let d=s.indexOf("#");d>=0&&(e.hash=s.substr(d),s=s.substr(0,d));let b=s.indexOf("?");b>=0&&(e.search=s.substr(b),s=s.substr(0,b)),s&&(e.pathname=s)}return e}function getUrlBasedHistory(s,e,d,b){b===void 0&&(b={});let{window:tt=document.defaultView,v5Compat:nt=!1}=b,ot=tt.history,ht=Action.Pop,mt=null,gt=yt();gt==null&&(gt=0,ot.replaceState(_extends$3({},ot.state,{idx:gt}),""));function yt(){return(ot.state||{idx:null}).idx}function ft(){ht=Action.Pop;let wt=yt(),St=wt==null?null:wt-gt;gt=wt,mt&&mt({action:ht,location:xt.location,delta:St})}function st(wt,St){ht=Action.Push;let _t=createLocation(xt.location,wt,St);gt=yt()+1;let Tt=getHistoryState(_t,gt),Et=xt.createHref(_t);try{ot.pushState(Tt,"",Et)}catch(kt){if(kt instanceof DOMException&&kt.name==="DataCloneError")throw kt;tt.location.assign(Et)}nt&&mt&&mt({action:ht,location:xt.location,delta:1})}function bt(wt,St){ht=Action.Replace;let _t=createLocation(xt.location,wt,St);gt=yt();let Tt=getHistoryState(_t,gt),Et=xt.createHref(_t);ot.replaceState(Tt,"",Et),nt&&mt&&mt({action:ht,location:xt.location,delta:0})}function vt(wt){let St=tt.location.origin!=="null"?tt.location.origin:tt.location.href,_t=typeof wt=="string"?wt:createPath(wt);return _t=_t.replace(/ $/,"%20"),invariant(St,"No window.location.(origin|href) available to create URL for href: "+_t),new URL(_t,St)}let xt={get action(){return ht},get location(){return s(tt,ot)},listen(wt){if(mt)throw new Error("A history only accepts one active listener");return tt.addEventListener(PopStateEventType,ft),mt=wt,()=>{tt.removeEventListener(PopStateEventType,ft),mt=null}},createHref(wt){return e(tt,wt)},createURL:vt,encodeLocation(wt){let St=vt(wt);return{pathname:St.pathname,search:St.search,hash:St.hash}},push:st,replace:bt,go(wt){return ot.go(wt)}};return xt}var ResultType;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(s){return s.index===!0}function convertRoutesToDataRoutes(s,e,d,b){return d===void 0&&(d=[]),b===void 0&&(b={}),s.map((tt,nt)=>{let ot=[...d,String(nt)],ht=typeof tt.id=="string"?tt.id:ot.join("-");if(invariant(tt.index!==!0||!tt.children,"Cannot specify children on an index route"),invariant(!b[ht],'Found a route id collision on id "'+ht+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(tt)){let mt=_extends$3({},tt,e(tt),{id:ht});return b[ht]=mt,mt}else{let mt=_extends$3({},tt,e(tt),{id:ht,children:void 0});return b[ht]=mt,tt.children&&(mt.children=convertRoutesToDataRoutes(tt.children,e,ot,b)),mt}})}function matchRoutes(s,e,d){return d===void 0&&(d="/"),matchRoutesImpl(s,e,d,!1)}function matchRoutesImpl(s,e,d,b){let tt=typeof e=="string"?parsePath(e):e,nt=stripBasename(tt.pathname||"/",d);if(nt==null)return null;let ot=flattenRoutes(s);rankRouteBranches(ot);let ht=null;for(let mt=0;ht==null&&mt<ot.length;++mt){let gt=decodePath(nt);ht=matchRouteBranch(ot[mt],gt,b)}return ht}function convertRouteMatchToUiMatch(s,e){let{route:d,pathname:b,params:tt}=s;return{id:d.id,pathname:b,params:tt,data:e[d.id],handle:d.handle}}function flattenRoutes(s,e,d,b){e===void 0&&(e=[]),d===void 0&&(d=[]),b===void 0&&(b="");let tt=(nt,ot,ht)=>{let mt={relativePath:ht===void 0?nt.path||"":ht,caseSensitive:nt.caseSensitive===!0,childrenIndex:ot,route:nt};mt.relativePath.startsWith("/")&&(invariant(mt.relativePath.startsWith(b),'Absolute route path "'+mt.relativePath+'" nested under path '+('"'+b+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),mt.relativePath=mt.relativePath.slice(b.length));let gt=joinPaths([b,mt.relativePath]),yt=d.concat(mt);nt.children&&nt.children.length>0&&(invariant(nt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+gt+'".')),flattenRoutes(nt.children,e,yt,gt)),!(nt.path==null&&!nt.index)&&e.push({path:gt,score:computeScore(gt,nt.index),routesMeta:yt})};return s.forEach((nt,ot)=>{var ht;if(nt.path===""||!((ht=nt.path)!=null&&ht.includes("?")))tt(nt,ot);else for(let mt of explodeOptionalSegments(nt.path))tt(nt,ot,mt)}),e}function explodeOptionalSegments(s){let e=s.split("/");if(e.length===0)return[];let[d,...b]=e,tt=d.endsWith("?"),nt=d.replace(/\?$/,"");if(b.length===0)return tt?[nt,""]:[nt];let ot=explodeOptionalSegments(b.join("/")),ht=[];return ht.push(...ot.map(mt=>mt===""?nt:[nt,mt].join("/"))),tt&&ht.push(...ot),ht.map(mt=>s.startsWith("/")&&mt===""?"/":mt)}function rankRouteBranches(s){s.sort((e,d)=>e.score!==d.score?d.score-e.score:compareIndexes(e.routesMeta.map(b=>b.childrenIndex),d.routesMeta.map(b=>b.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=s=>s==="*";function computeScore(s,e){let d=s.split("/"),b=d.length;return d.some(isSplat)&&(b+=splatPenalty),e&&(b+=indexRouteValue),d.filter(tt=>!isSplat(tt)).reduce((tt,nt)=>tt+(paramRe.test(nt)?dynamicSegmentValue:nt===""?emptySegmentValue:staticSegmentValue),b)}function compareIndexes(s,e){return s.length===e.length&&s.slice(0,-1).every((b,tt)=>b===e[tt])?s[s.length-1]-e[e.length-1]:0}function matchRouteBranch(s,e,d){d===void 0&&(d=!1);let{routesMeta:b}=s,tt={},nt="/",ot=[];for(let ht=0;ht<b.length;++ht){let mt=b[ht],gt=ht===b.length-1,yt=nt==="/"?e:e.slice(nt.length)||"/",ft=matchPath({path:mt.relativePath,caseSensitive:mt.caseSensitive,end:gt},yt),st=mt.route;if(!ft&&gt&&d&&!b[b.length-1].route.index&&(ft=matchPath({path:mt.relativePath,caseSensitive:mt.caseSensitive,end:!1},yt)),!ft)return null;Object.assign(tt,ft.params),ot.push({params:tt,pathname:joinPaths([nt,ft.pathname]),pathnameBase:normalizePathname(joinPaths([nt,ft.pathnameBase])),route:st}),ft.pathnameBase!=="/"&&(nt=joinPaths([nt,ft.pathnameBase]))}return ot}function matchPath(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[d,b]=compilePath(s.path,s.caseSensitive,s.end),tt=e.match(d);if(!tt)return null;let nt=tt[0],ot=nt.replace(/(.)\/+$/,"$1"),ht=tt.slice(1);return{params:b.reduce((gt,yt,ft)=>{let{paramName:st,isOptional:bt}=yt;if(st==="*"){let xt=ht[ft]||"";ot=nt.slice(0,nt.length-xt.length).replace(/(.)\/+$/,"$1")}const vt=ht[ft];return bt&&!vt?gt[st]=void 0:gt[st]=(vt||"").replace(/%2F/g,"/"),gt},{}),pathname:nt,pathnameBase:ot,pattern:s}}function compilePath(s,e,d){e===void 0&&(e=!1),d===void 0&&(d=!0),warning$1(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let b=[],tt="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(ot,ht,mt)=>(b.push({paramName:ht,isOptional:mt!=null}),mt?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(b.push({paramName:"*"}),tt+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?tt+="\\/*$":s!==""&&s!=="/"&&(tt+="(?:(?=\\/|$))"),[new RegExp(tt,e?void 0:"i"),b]}function decodePath(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning$1(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function stripBasename(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let d=e.endsWith("/")?e.length-1:e.length,b=s.charAt(d);return b&&b!=="/"?null:s.slice(d)||"/"}function resolvePath(s,e){e===void 0&&(e="/");let{pathname:d,search:b="",hash:tt=""}=typeof s=="string"?parsePath(s):s;return{pathname:d?d.startsWith("/")?d:resolvePathname(d,e):e,search:normalizeSearch(b),hash:normalizeHash(tt)}}function resolvePathname(s,e){let d=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(tt=>{tt===".."?d.length>1&&d.pop():tt!=="."&&d.push(tt)}),d.length>1?d.join("/"):"/"}function getInvalidPathError(s,e,d,b){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(b)+"].  Please separate it out to the ")+("`to."+d+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(s){return s.filter((e,d)=>d===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(s,e){let d=getPathContributingMatches(s);return e?d.map((b,tt)=>tt===d.length-1?b.pathname:b.pathnameBase):d.map(b=>b.pathnameBase)}function resolveTo(s,e,d,b){b===void 0&&(b=!1);let tt;typeof s=="string"?tt=parsePath(s):(tt=_extends$3({},s),invariant(!tt.pathname||!tt.pathname.includes("?"),getInvalidPathError("?","pathname","search",tt)),invariant(!tt.pathname||!tt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",tt)),invariant(!tt.search||!tt.search.includes("#"),getInvalidPathError("#","search","hash",tt)));let nt=s===""||tt.pathname==="",ot=nt?"/":tt.pathname,ht;if(ot==null)ht=d;else{let ft=e.length-1;if(!b&&ot.startsWith("..")){let st=ot.split("/");for(;st[0]==="..";)st.shift(),ft-=1;tt.pathname=st.join("/")}ht=ft>=0?e[ft]:"/"}let mt=resolvePath(tt,ht),gt=ot&&ot!=="/"&&ot.endsWith("/"),yt=(nt||ot===".")&&d.endsWith("/");return!mt.pathname.endsWith("/")&&(gt||yt)&&(mt.pathname+="/"),mt}const joinPaths=s=>s.join("/").replace(/\/\/+/g,"/"),normalizePathname=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,normalizeHash=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;class ErrorResponseImpl{constructor(e,d,b,tt){tt===void 0&&(tt=!1),this.status=e,this.statusText=d||"",this.internal=tt,b instanceof Error?(this.data=b.toString(),this.error=b):this.data=b}}function isRouteErrorResponse(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=s=>({hasErrorBoundary:!!s.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function createRouter(s){const e=s.window?s.window:typeof window<"u"?window:void 0,d=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",b=!d;invariant(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let tt;if(s.mapRouteProperties)tt=s.mapRouteProperties;else if(s.detectErrorBoundary){let en=s.detectErrorBoundary;tt=rn=>({hasErrorBoundary:en(rn)})}else tt=defaultMapRouteProperties;let nt={},ot=convertRoutesToDataRoutes(s.routes,tt,void 0,nt),ht,mt=s.basename||"/",gt=s.unstable_dataStrategy||defaultDataStrategy,yt=s.unstable_patchRoutesOnMiss,ft=_extends$3({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},s.future),st=null,bt=new Set,vt=null,xt=null,wt=null,St=s.hydrationData!=null,_t=matchRoutes(ot,s.history.location,mt),Tt=null;if(_t==null&&!yt){let en=getInternalRouterError(404,{pathname:s.history.location.pathname}),{matches:rn,route:un}=getShortCircuitMatches(ot);_t=rn,Tt={[un.id]:en}}_t&&yt&&!s.hydrationData&&qr(_t,ot,s.history.location.pathname).active&&(_t=null);let Et;if(!_t)Et=!1,_t=[];else if(_t.some(en=>en.route.lazy))Et=!1;else if(!_t.some(en=>en.route.loader))Et=!0;else if(ft.v7_partialHydration){let en=s.hydrationData?s.hydrationData.loaderData:null,rn=s.hydrationData?s.hydrationData.errors:null,un=mn=>mn.route.loader?typeof mn.route.loader=="function"&&mn.route.loader.hydrate===!0?!1:en&&en[mn.route.id]!==void 0||rn&&rn[mn.route.id]!==void 0:!0;if(rn){let mn=_t.findIndex(Sn=>rn[Sn.route.id]!==void 0);Et=_t.slice(0,mn+1).every(un)}else Et=_t.every(un)}else Et=s.hydrationData!=null;let kt,Mt={historyAction:s.history.action,location:s.history.location,matches:_t,initialized:Et,navigation:IDLE_NAVIGATION,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||Tt,fetchers:new Map,blockers:new Map},Ot=Action.Pop,Dt=!1,At,It=!1,jt=new Map,qt=null,Jt=!1,Bt=!1,Wt=[],Lt=[],Ut=new Map,tn=0,Kt=-1,an=new Map,ln=new Set,hn=new Map,kn=new Map,Zt=new Set,xn=new Map,En=new Map,Cn=new Map,Fn=!1;function Vn(){if(st=s.history.listen(en=>{let{action:rn,location:un,delta:mn}=en;if(Fn){Fn=!1;return}warning$1(En.size===0||mn!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Sn=jr({currentLocation:Mt.location,nextLocation:un,historyAction:rn});if(Sn&&mn!=null){Fn=!0,s.history.go(mn*-1),Kn(Sn,{state:"blocked",location:un,proceed(){Kn(Sn,{state:"proceeding",proceed:void 0,reset:void 0,location:un}),s.history.go(mn)},reset(){let Mn=new Map(Mt.blockers);Mn.set(Sn,IDLE_BLOCKER),Bn({blockers:Mn})}});return}return dr(rn,un)}),d){restoreAppliedTransitions(e,jt);let en=()=>persistAppliedTransitions(e,jt);e.addEventListener("pagehide",en),qt=()=>e.removeEventListener("pagehide",en)}return Mt.initialized||dr(Action.Pop,Mt.location,{initialHydration:!0}),kt}function qn(){st&&st(),qt&&qt(),bt.clear(),At&&At.abort(),Mt.fetchers.forEach((en,rn)=>Or(rn)),Mt.blockers.forEach((en,rn)=>zr(rn))}function cr(en){return bt.add(en),()=>bt.delete(en)}function Bn(en,rn){rn===void 0&&(rn={}),Mt=_extends$3({},Mt,en);let un=[],mn=[];ft.v7_fetcherPersist&&Mt.fetchers.forEach((Sn,Mn)=>{Sn.state==="idle"&&(Zt.has(Mn)?mn.push(Mn):un.push(Mn))}),[...bt].forEach(Sn=>Sn(Mt,{deletedFetchers:mn,unstable_viewTransitionOpts:rn.viewTransitionOpts,unstable_flushSync:rn.flushSync===!0})),ft.v7_fetcherPersist&&(un.forEach(Sn=>Mt.fetchers.delete(Sn)),mn.forEach(Sn=>Or(Sn)))}function ir(en,rn,un){var mn,Sn;let{flushSync:Mn}=un===void 0?{}:un,Pn=Mt.actionData!=null&&Mt.navigation.formMethod!=null&&isMutationMethod(Mt.navigation.formMethod)&&Mt.navigation.state==="loading"&&((mn=en.state)==null?void 0:mn._isRedirect)!==!0,bn;rn.actionData?Object.keys(rn.actionData).length>0?bn=rn.actionData:bn=null:Pn?bn=Mt.actionData:bn=null;let zt=rn.loaderData?mergeLoaderData(Mt.loaderData,rn.loaderData,rn.matches||[],rn.errors):Mt.loaderData,Ht=Mt.blockers;Ht.size>0&&(Ht=new Map(Ht),Ht.forEach((on,cn)=>Ht.set(cn,IDLE_BLOCKER)));let Xt=Dt===!0||Mt.navigation.formMethod!=null&&isMutationMethod(Mt.navigation.formMethod)&&((Sn=en.state)==null?void 0:Sn._isRedirect)!==!0;ht&&(ot=ht,ht=void 0),Jt||Ot===Action.Pop||(Ot===Action.Push?s.history.push(en,en.state):Ot===Action.Replace&&s.history.replace(en,en.state));let nn;if(Ot===Action.Pop){let on=jt.get(Mt.location.pathname);on&&on.has(en.pathname)?nn={currentLocation:Mt.location,nextLocation:en}:jt.has(en.pathname)&&(nn={currentLocation:en,nextLocation:Mt.location})}else if(It){let on=jt.get(Mt.location.pathname);on?on.add(en.pathname):(on=new Set([en.pathname]),jt.set(Mt.location.pathname,on)),nn={currentLocation:Mt.location,nextLocation:en}}Bn(_extends$3({},rn,{actionData:bn,loaderData:zt,historyAction:Ot,location:en,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Lr(en,rn.matches||Mt.matches),preventScrollReset:Xt,blockers:Ht}),{viewTransitionOpts:nn,flushSync:Mn===!0}),Ot=Action.Pop,Dt=!1,It=!1,Jt=!1,Bt=!1,Wt=[],Lt=[]}async function tr(en,rn){if(typeof en=="number"){s.history.go(en);return}let un=normalizeTo(Mt.location,Mt.matches,mt,ft.v7_prependBasename,en,ft.v7_relativeSplatPath,rn==null?void 0:rn.fromRouteId,rn==null?void 0:rn.relative),{path:mn,submission:Sn,error:Mn}=normalizeNavigateOptions(ft.v7_normalizeFormMethod,!1,un,rn),Pn=Mt.location,bn=createLocation(Mt.location,mn,rn&&rn.state);bn=_extends$3({},bn,s.history.encodeLocation(bn));let zt=rn&&rn.replace!=null?rn.replace:void 0,Ht=Action.Push;zt===!0?Ht=Action.Replace:zt===!1||Sn!=null&&isMutationMethod(Sn.formMethod)&&Sn.formAction===Mt.location.pathname+Mt.location.search&&(Ht=Action.Replace);let Xt=rn&&"preventScrollReset"in rn?rn.preventScrollReset===!0:void 0,nn=(rn&&rn.unstable_flushSync)===!0,on=jr({currentLocation:Pn,nextLocation:bn,historyAction:Ht});if(on){Kn(on,{state:"blocked",location:bn,proceed(){Kn(on,{state:"proceeding",proceed:void 0,reset:void 0,location:bn}),tr(en,rn)},reset(){let cn=new Map(Mt.blockers);cn.set(on,IDLE_BLOCKER),Bn({blockers:cn})}});return}return await dr(Ht,bn,{submission:Sn,pendingError:Mn,preventScrollReset:Xt,replace:rn&&rn.replace,enableViewTransition:rn&&rn.unstable_viewTransition,flushSync:nn})}function wr(){if(Fr(),Bn({revalidation:"loading"}),Mt.navigation.state!=="submitting"){if(Mt.navigation.state==="idle"){dr(Mt.historyAction,Mt.location,{startUninterruptedRevalidation:!0});return}dr(Ot||Mt.historyAction,Mt.navigation.location,{overrideNavigation:Mt.navigation})}}async function dr(en,rn,un){At&&At.abort(),At=null,Ot=en,Jt=(un&&un.startUninterruptedRevalidation)===!0,Er(Mt.location,Mt.matches),Dt=(un&&un.preventScrollReset)===!0,It=(un&&un.enableViewTransition)===!0;let mn=ht||ot,Sn=un&&un.overrideNavigation,Mn=matchRoutes(mn,rn,mt),Pn=(un&&un.flushSync)===!0,bn=qr(Mn,mn,rn.pathname);if(bn.active&&bn.matches&&(Mn=bn.matches),!Mn){let{error:yn,notFoundMatches:_n,route:vn}=Vr(rn.pathname);ir(rn,{matches:_n,loaderData:{},errors:{[vn.id]:yn}},{flushSync:Pn});return}if(Mt.initialized&&!Bt&&isHashChangeOnly(Mt.location,rn)&&!(un&&un.submission&&isMutationMethod(un.submission.formMethod))){ir(rn,{matches:Mn},{flushSync:Pn});return}At=new AbortController;let zt=createClientSideRequest(s.history,rn,At.signal,un&&un.submission),Ht;if(un&&un.pendingError)Ht=[findNearestBoundary(Mn).route.id,{type:ResultType.error,error:un.pendingError}];else if(un&&un.submission&&isMutationMethod(un.submission.formMethod)){let yn=await Sr(zt,rn,un.submission,Mn,bn.active,{replace:un.replace,flushSync:Pn});if(yn.shortCircuited)return;if(yn.pendingActionResult){let[_n,vn]=yn.pendingActionResult;if(isErrorResult(vn)&&isRouteErrorResponse(vn.error)&&vn.error.status===404){At=null,ir(rn,{matches:yn.matches,loaderData:{},errors:{[_n]:vn.error}});return}}Mn=yn.matches||Mn,Ht=yn.pendingActionResult,Sn=getLoadingNavigation(rn,un.submission),Pn=!1,bn.active=!1,zt=createClientSideRequest(s.history,zt.url,zt.signal)}let{shortCircuited:Xt,matches:nn,loaderData:on,errors:cn}=await ar(zt,rn,Mn,bn.active,Sn,un&&un.submission,un&&un.fetcherSubmission,un&&un.replace,un&&un.initialHydration===!0,Pn,Ht);Xt||(At=null,ir(rn,_extends$3({matches:nn||Mn},getActionDataForCommit(Ht),{loaderData:on,errors:cn})))}async function Sr(en,rn,un,mn,Sn,Mn){Mn===void 0&&(Mn={}),Fr();let Pn=getSubmittingNavigation(rn,un);if(Bn({navigation:Pn},{flushSync:Mn.flushSync===!0}),Sn){let Ht=await Gr(mn,rn.pathname,en.signal);if(Ht.type==="aborted")return{shortCircuited:!0};if(Ht.type==="error"){let{boundaryId:Xt,error:nn}=Hr(rn.pathname,Ht);return{matches:Ht.partialMatches,pendingActionResult:[Xt,{type:ResultType.error,error:nn}]}}else if(Ht.matches)mn=Ht.matches;else{let{notFoundMatches:Xt,error:nn,route:on}=Vr(rn.pathname);return{matches:Xt,pendingActionResult:[on.id,{type:ResultType.error,error:nn}]}}}let bn,zt=getTargetMatch(mn,rn);if(!zt.route.action&&!zt.route.lazy)bn={type:ResultType.error,error:getInternalRouterError(405,{method:en.method,pathname:rn.pathname,routeId:zt.route.id})};else if(bn=(await zn("action",en,[zt],mn))[0],en.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(bn)){let Ht;return Mn&&Mn.replace!=null?Ht=Mn.replace:Ht=normalizeRedirectLocation(bn.response.headers.get("Location"),new URL(en.url),mt)===Mt.location.pathname+Mt.location.search,await Cr(en,bn,{submission:un,replace:Ht}),{shortCircuited:!0}}if(isDeferredResult(bn))throw getInternalRouterError(400,{type:"defer-action"});if(isErrorResult(bn)){let Ht=findNearestBoundary(mn,zt.route.id);return(Mn&&Mn.replace)!==!0&&(Ot=Action.Push),{matches:mn,pendingActionResult:[Ht.route.id,bn]}}return{matches:mn,pendingActionResult:[zt.route.id,bn]}}async function ar(en,rn,un,mn,Sn,Mn,Pn,bn,zt,Ht,Xt){let nn=Sn||getLoadingNavigation(rn,Mn),on=Mn||Pn||getSubmissionFromNavigation(nn),cn=!Jt&&(!ft.v7_partialHydration||!zt);if(mn){if(cn){let pr=vr(Xt);Bn(_extends$3({navigation:nn},pr!==void 0?{actionData:pr}:{}),{flushSync:Ht})}let jn=await Gr(un,rn.pathname,en.signal);if(jn.type==="aborted")return{shortCircuited:!0};if(jn.type==="error"){let{boundaryId:pr,error:Rr}=Hr(rn.pathname,jn);return{matches:jn.partialMatches,loaderData:{},errors:{[pr]:Rr}}}else if(jn.matches)un=jn.matches;else{let{error:pr,notFoundMatches:Rr,route:Un}=Vr(rn.pathname);return{matches:Rr,loaderData:{},errors:{[Un.id]:pr}}}}let yn=ht||ot,[_n,vn]=getMatchesToLoad(s.history,Mt,un,on,rn,ft.v7_partialHydration&&zt===!0,ft.v7_skipActionErrorRevalidation,Bt,Wt,Lt,Zt,hn,ln,yn,mt,Xt);if(On(jn=>!(un&&un.some(pr=>pr.route.id===jn))||_n&&_n.some(pr=>pr.route.id===jn)),Kt=++tn,_n.length===0&&vn.length===0){let jn=Br();return ir(rn,_extends$3({matches:un,loaderData:{},errors:Xt&&isErrorResult(Xt[1])?{[Xt[0]]:Xt[1].error}:null},getActionDataForCommit(Xt),jn?{fetchers:new Map(Mt.fetchers)}:{}),{flushSync:Ht}),{shortCircuited:!0}}if(cn){let jn={};if(!mn){jn.navigation=nn;let pr=vr(Xt);pr!==void 0&&(jn.actionData=pr)}vn.length>0&&(jn.fetchers=hr(vn)),Bn(jn,{flushSync:Ht})}vn.forEach(jn=>{Ut.has(jn.key)&&xr(jn.key),jn.controller&&Ut.set(jn.key,jn.controller)});let Ln=()=>vn.forEach(jn=>xr(jn.key));At&&At.signal.addEventListener("abort",Ln);let{loaderResults:Zn,fetcherResults:gr}=await Yr(Mt.matches,un,_n,vn,en);if(en.signal.aborted)return{shortCircuited:!0};At&&At.signal.removeEventListener("abort",Ln),vn.forEach(jn=>Ut.delete(jn.key));let fr=findRedirect([...Zn,...gr]);if(fr){if(fr.idx>=_n.length){let jn=vn[fr.idx-_n.length].key;ln.add(jn)}return await Cr(en,fr.result,{replace:bn}),{shortCircuited:!0}}let{loaderData:dn,errors:Nn}=processLoaderData(Mt,un,_n,Zn,Xt,vn,gr,xn);xn.forEach((jn,pr)=>{jn.subscribe(Rr=>{(Rr||jn.done)&&xn.delete(pr)})}),ft.v7_partialHydration&&zt&&Mt.errors&&Object.entries(Mt.errors).filter(jn=>{let[pr]=jn;return!_n.some(Rr=>Rr.route.id===pr)}).forEach(jn=>{let[pr,Rr]=jn;Nn=Object.assign(Nn||{},{[pr]:Rr})});let sr=Br(),Ar=Wr(Kt),_r=sr||Ar||vn.length>0;return _extends$3({matches:un,loaderData:dn,errors:Nn},_r?{fetchers:new Map(Mt.fetchers)}:{})}function vr(en){if(en&&!isErrorResult(en[1]))return{[en[0]]:en[1].data};if(Mt.actionData)return Object.keys(Mt.actionData).length===0?null:Mt.actionData}function hr(en){return en.forEach(rn=>{let un=Mt.fetchers.get(rn.key),mn=getLoadingFetcher(void 0,un?un.data:void 0);Mt.fetchers.set(rn.key,mn)}),new Map(Mt.fetchers)}function Hn(en,rn,un,mn){if(b)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ut.has(en)&&xr(en);let Sn=(mn&&mn.unstable_flushSync)===!0,Mn=ht||ot,Pn=normalizeTo(Mt.location,Mt.matches,mt,ft.v7_prependBasename,un,ft.v7_relativeSplatPath,rn,mn==null?void 0:mn.relative),bn=matchRoutes(Mn,Pn,mt),zt=qr(bn,Mn,Pn);if(zt.active&&zt.matches&&(bn=zt.matches),!bn){lr(en,rn,getInternalRouterError(404,{pathname:Pn}),{flushSync:Sn});return}let{path:Ht,submission:Xt,error:nn}=normalizeNavigateOptions(ft.v7_normalizeFormMethod,!0,Pn,mn);if(nn){lr(en,rn,nn,{flushSync:Sn});return}let on=getTargetMatch(bn,Ht);if(Dt=(mn&&mn.preventScrollReset)===!0,Xt&&isMutationMethod(Xt.formMethod)){or(en,rn,Ht,on,bn,zt.active,Sn,Xt);return}hn.set(en,{routeId:rn,path:Ht}),Pr(en,rn,Ht,on,bn,zt.active,Sn,Xt)}async function or(en,rn,un,mn,Sn,Mn,Pn,bn){Fr(),hn.delete(en);function zt(Un){if(!Un.route.action&&!Un.route.lazy){let $r=getInternalRouterError(405,{method:bn.formMethod,pathname:un,routeId:rn});return lr(en,rn,$r,{flushSync:Pn}),!0}return!1}if(!Mn&&zt(mn))return;let Ht=Mt.fetchers.get(en);Dr(en,getSubmittingFetcher(bn,Ht),{flushSync:Pn});let Xt=new AbortController,nn=createClientSideRequest(s.history,un,Xt.signal,bn);if(Mn){let Un=await Gr(Sn,un,nn.signal);if(Un.type==="aborted")return;if(Un.type==="error"){let{error:$r}=Hr(un,Un);lr(en,rn,$r,{flushSync:Pn});return}else if(Un.matches){if(Sn=Un.matches,mn=getTargetMatch(Sn,un),zt(mn))return}else{lr(en,rn,getInternalRouterError(404,{pathname:un}),{flushSync:Pn});return}}Ut.set(en,Xt);let on=tn,yn=(await zn("action",nn,[mn],Sn))[0];if(nn.signal.aborted){Ut.get(en)===Xt&&Ut.delete(en);return}if(ft.v7_fetcherPersist&&Zt.has(en)){if(isRedirectResult(yn)||isErrorResult(yn)){Dr(en,getDoneFetcher(void 0));return}}else{if(isRedirectResult(yn))if(Ut.delete(en),Kt>on){Dr(en,getDoneFetcher(void 0));return}else return ln.add(en),Dr(en,getLoadingFetcher(bn)),Cr(nn,yn,{fetcherSubmission:bn});if(isErrorResult(yn)){lr(en,rn,yn.error);return}}if(isDeferredResult(yn))throw getInternalRouterError(400,{type:"defer-action"});let _n=Mt.navigation.location||Mt.location,vn=createClientSideRequest(s.history,_n,Xt.signal),Ln=ht||ot,Zn=Mt.navigation.state!=="idle"?matchRoutes(Ln,Mt.navigation.location,mt):Mt.matches;invariant(Zn,"Didn't find any matches after fetcher action");let gr=++tn;an.set(en,gr);let fr=getLoadingFetcher(bn,yn.data);Mt.fetchers.set(en,fr);let[dn,Nn]=getMatchesToLoad(s.history,Mt,Zn,bn,_n,!1,ft.v7_skipActionErrorRevalidation,Bt,Wt,Lt,Zt,hn,ln,Ln,mt,[mn.route.id,yn]);Nn.filter(Un=>Un.key!==en).forEach(Un=>{let $r=Un.key,so=Mt.fetchers.get($r),uo=getLoadingFetcher(void 0,so?so.data:void 0);Mt.fetchers.set($r,uo),Ut.has($r)&&xr($r),Un.controller&&Ut.set($r,Un.controller)}),Bn({fetchers:new Map(Mt.fetchers)});let sr=()=>Nn.forEach(Un=>xr(Un.key));Xt.signal.addEventListener("abort",sr);let{loaderResults:Ar,fetcherResults:_r}=await Yr(Mt.matches,Zn,dn,Nn,vn);if(Xt.signal.aborted)return;Xt.signal.removeEventListener("abort",sr),an.delete(en),Ut.delete(en),Nn.forEach(Un=>Ut.delete(Un.key));let jn=findRedirect([...Ar,..._r]);if(jn){if(jn.idx>=dn.length){let Un=Nn[jn.idx-dn.length].key;ln.add(Un)}return Cr(vn,jn.result)}let{loaderData:pr,errors:Rr}=processLoaderData(Mt,Mt.matches,dn,Ar,void 0,Nn,_r,xn);if(Mt.fetchers.has(en)){let Un=getDoneFetcher(yn.data);Mt.fetchers.set(en,Un)}Wr(gr),Mt.navigation.state==="loading"&&gr>Kt?(invariant(Ot,"Expected pending action"),At&&At.abort(),ir(Mt.navigation.location,{matches:Zn,loaderData:pr,errors:Rr,fetchers:new Map(Mt.fetchers)})):(Bn({errors:Rr,loaderData:mergeLoaderData(Mt.loaderData,pr,Zn,Rr),fetchers:new Map(Mt.fetchers)}),Bt=!1)}async function Pr(en,rn,un,mn,Sn,Mn,Pn,bn){let zt=Mt.fetchers.get(en);Dr(en,getLoadingFetcher(bn,zt?zt.data:void 0),{flushSync:Pn});let Ht=new AbortController,Xt=createClientSideRequest(s.history,un,Ht.signal);if(Mn){let yn=await Gr(Sn,un,Xt.signal);if(yn.type==="aborted")return;if(yn.type==="error"){let{error:_n}=Hr(un,yn);lr(en,rn,_n,{flushSync:Pn});return}else if(yn.matches)Sn=yn.matches,mn=getTargetMatch(Sn,un);else{lr(en,rn,getInternalRouterError(404,{pathname:un}),{flushSync:Pn});return}}Ut.set(en,Ht);let nn=tn,cn=(await zn("loader",Xt,[mn],Sn))[0];if(isDeferredResult(cn)&&(cn=await resolveDeferredData(cn,Xt.signal,!0)||cn),Ut.get(en)===Ht&&Ut.delete(en),!Xt.signal.aborted){if(Zt.has(en)){Dr(en,getDoneFetcher(void 0));return}if(isRedirectResult(cn))if(Kt>nn){Dr(en,getDoneFetcher(void 0));return}else{ln.add(en),await Cr(Xt,cn);return}if(isErrorResult(cn)){lr(en,rn,cn.error);return}invariant(!isDeferredResult(cn),"Unhandled fetcher deferred data"),Dr(en,getDoneFetcher(cn.data))}}async function Cr(en,rn,un){let{submission:mn,fetcherSubmission:Sn,replace:Mn}=un===void 0?{}:un;rn.response.headers.has("X-Remix-Revalidate")&&(Bt=!0);let Pn=rn.response.headers.get("Location");invariant(Pn,"Expected a Location header on the redirect Response"),Pn=normalizeRedirectLocation(Pn,new URL(en.url),mt);let bn=createLocation(Mt.location,Pn,{_isRedirect:!0});if(d){let cn=!1;if(rn.response.headers.has("X-Remix-Reload-Document"))cn=!0;else if(ABSOLUTE_URL_REGEX.test(Pn)){const yn=s.history.createURL(Pn);cn=yn.origin!==e.location.origin||stripBasename(yn.pathname,mt)==null}if(cn){Mn?e.location.replace(Pn):e.location.assign(Pn);return}}At=null;let zt=Mn===!0?Action.Replace:Action.Push,{formMethod:Ht,formAction:Xt,formEncType:nn}=Mt.navigation;!mn&&!Sn&&Ht&&Xt&&nn&&(mn=getSubmissionFromNavigation(Mt.navigation));let on=mn||Sn;if(redirectPreserveMethodStatusCodes.has(rn.response.status)&&on&&isMutationMethod(on.formMethod))await dr(zt,bn,{submission:_extends$3({},on,{formAction:Pn}),preventScrollReset:Dt});else{let cn=getLoadingNavigation(bn,mn);await dr(zt,bn,{overrideNavigation:cn,fetcherSubmission:Sn,preventScrollReset:Dt})}}async function zn(en,rn,un,mn){try{let Sn=await callDataStrategyImpl(gt,en,rn,un,mn,nt,tt);return await Promise.all(Sn.map((Mn,Pn)=>{if(isRedirectHandlerResult(Mn)){let bn=Mn.result;return{type:ResultType.redirect,response:normalizeRelativeRoutingRedirectResponse(bn,rn,un[Pn].route.id,mn,mt,ft.v7_relativeSplatPath)}}return convertHandlerResultToDataResult(Mn)}))}catch(Sn){return un.map(()=>({type:ResultType.error,error:Sn}))}}async function Yr(en,rn,un,mn,Sn){let[Mn,...Pn]=await Promise.all([un.length?zn("loader",Sn,un,rn):[],...mn.map(bn=>{if(bn.matches&&bn.match&&bn.controller){let zt=createClientSideRequest(s.history,bn.path,bn.controller.signal);return zn("loader",zt,[bn.match],bn.matches).then(Ht=>Ht[0])}else return Promise.resolve({type:ResultType.error,error:getInternalRouterError(404,{pathname:bn.path})})})]);return await Promise.all([resolveDeferredResults(en,un,Mn,Mn.map(()=>Sn.signal),!1,Mt.loaderData),resolveDeferredResults(en,mn.map(bn=>bn.match),Pn,mn.map(bn=>bn.controller?bn.controller.signal:null),!0)]),{loaderResults:Mn,fetcherResults:Pn}}function Fr(){Bt=!0,Wt.push(...On()),hn.forEach((en,rn)=>{Ut.has(rn)&&(Lt.push(rn),xr(rn))})}function Dr(en,rn,un){un===void 0&&(un={}),Mt.fetchers.set(en,rn),Bn({fetchers:new Map(Mt.fetchers)},{flushSync:(un&&un.flushSync)===!0})}function lr(en,rn,un,mn){mn===void 0&&(mn={});let Sn=findNearestBoundary(Mt.matches,rn);Or(en),Bn({errors:{[Sn.route.id]:un},fetchers:new Map(Mt.fetchers)},{flushSync:(mn&&mn.flushSync)===!0})}function Nr(en){return ft.v7_fetcherPersist&&(kn.set(en,(kn.get(en)||0)+1),Zt.has(en)&&Zt.delete(en)),Mt.fetchers.get(en)||IDLE_FETCHER}function Or(en){let rn=Mt.fetchers.get(en);Ut.has(en)&&!(rn&&rn.state==="loading"&&an.has(en))&&xr(en),hn.delete(en),an.delete(en),ln.delete(en),Zt.delete(en),Mt.fetchers.delete(en)}function kr(en){if(ft.v7_fetcherPersist){let rn=(kn.get(en)||0)-1;rn<=0?(kn.delete(en),Zt.add(en)):kn.set(en,rn)}else Or(en);Bn({fetchers:new Map(Mt.fetchers)})}function xr(en){let rn=Ut.get(en);invariant(rn,"Expected fetch controller: "+en),rn.abort(),Ut.delete(en)}function In(en){for(let rn of en){let un=Nr(rn),mn=getDoneFetcher(un.data);Mt.fetchers.set(rn,mn)}}function Br(){let en=[],rn=!1;for(let un of ln){let mn=Mt.fetchers.get(un);invariant(mn,"Expected fetcher: "+un),mn.state==="loading"&&(ln.delete(un),en.push(un),rn=!0)}return In(en),rn}function Wr(en){let rn=[];for(let[un,mn]of an)if(mn<en){let Sn=Mt.fetchers.get(un);invariant(Sn,"Expected fetcher: "+un),Sn.state==="loading"&&(xr(un),an.delete(un),rn.push(un))}return In(rn),rn.length>0}function Jr(en,rn){let un=Mt.blockers.get(en)||IDLE_BLOCKER;return En.get(en)!==rn&&En.set(en,rn),un}function zr(en){Mt.blockers.delete(en),En.delete(en)}function Kn(en,rn){let un=Mt.blockers.get(en)||IDLE_BLOCKER;invariant(un.state==="unblocked"&&rn.state==="blocked"||un.state==="blocked"&&rn.state==="blocked"||un.state==="blocked"&&rn.state==="proceeding"||un.state==="blocked"&&rn.state==="unblocked"||un.state==="proceeding"&&rn.state==="unblocked","Invalid blocker state transition: "+un.state+" -> "+rn.state);let mn=new Map(Mt.blockers);mn.set(en,rn),Bn({blockers:mn})}function jr(en){let{currentLocation:rn,nextLocation:un,historyAction:mn}=en;if(En.size===0)return;En.size>1&&warning$1(!1,"A router only supports one blocker at a time");let Sn=Array.from(En.entries()),[Mn,Pn]=Sn[Sn.length-1],bn=Mt.blockers.get(Mn);if(!(bn&&bn.state==="proceeding")&&Pn({currentLocation:rn,nextLocation:un,historyAction:mn}))return Mn}function Vr(en){let rn=getInternalRouterError(404,{pathname:en}),un=ht||ot,{matches:mn,route:Sn}=getShortCircuitMatches(un);return On(),{notFoundMatches:mn,route:Sn,error:rn}}function Hr(en,rn){return{boundaryId:findNearestBoundary(rn.partialMatches).route.id,error:getInternalRouterError(400,{type:"route-discovery",pathname:en,message:rn.error!=null&&"message"in rn.error?rn.error:String(rn.error)})}}function On(en){let rn=[];return xn.forEach((un,mn)=>{(!en||en(mn))&&(un.cancel(),rn.push(mn),xn.delete(mn))}),rn}function Dn(en,rn,un){if(vt=en,wt=rn,xt=un||null,!St&&Mt.navigation===IDLE_NAVIGATION){St=!0;let mn=Lr(Mt.location,Mt.matches);mn!=null&&Bn({restoreScrollPosition:mn})}return()=>{vt=null,wt=null,xt=null}}function $n(en,rn){return xt&&xt(en,rn.map(mn=>convertRouteMatchToUiMatch(mn,Mt.loaderData)))||en.key}function Er(en,rn){if(vt&&wt){let un=$n(en,rn);vt[un]=wt()}}function Lr(en,rn){if(vt){let un=$n(en,rn),mn=vt[un];if(typeof mn=="number")return mn}return null}function qr(en,rn,un){if(yt)if(en){let mn=en[en.length-1].route;if(mn.path&&(mn.path==="*"||mn.path.endsWith("/*")))return{active:!0,matches:matchRoutesImpl(rn,un,mt,!0)}}else return{active:!0,matches:matchRoutesImpl(rn,un,mt,!0)||[]};return{active:!1,matches:null}}async function Gr(en,rn,un){let mn=en,Sn=mn.length>0?mn[mn.length-1].route:null;for(;;){let Mn=ht==null,Pn=ht||ot;try{await loadLazyRouteChildren(yt,rn,mn,Pn,nt,tt,Cn,un)}catch(Xt){return{type:"error",error:Xt,partialMatches:mn}}finally{Mn&&(ot=[...ot])}if(un.aborted)return{type:"aborted"};let bn=matchRoutes(Pn,rn,mt),zt=!1;if(bn){let Xt=bn[bn.length-1].route;if(Xt.index)return{type:"success",matches:bn};if(Xt.path&&Xt.path.length>0)if(Xt.path==="*")zt=!0;else return{type:"success",matches:bn}}let Ht=matchRoutesImpl(Pn,rn,mt,!0);if(!Ht||mn.map(Xt=>Xt.route.id).join("-")===Ht.map(Xt=>Xt.route.id).join("-"))return{type:"success",matches:zt?bn:null};if(mn=Ht,Sn=mn[mn.length-1].route,Sn.path==="*")return{type:"success",matches:mn}}}function Qn(en){nt={},ht=convertRoutesToDataRoutes(en,tt,void 0,nt)}function Ir(en,rn){let un=ht==null;patchRoutesImpl(en,rn,ht||ot,nt,tt),un&&(ot=[...ot],Bn({}))}return kt={get basename(){return mt},get future(){return ft},get state(){return Mt},get routes(){return ot},get window(){return e},initialize:Vn,subscribe:cr,enableScrollRestoration:Dn,navigate:tr,fetch:Hn,revalidate:wr,createHref:en=>s.history.createHref(en),encodeLocation:en=>s.history.encodeLocation(en),getFetcher:Nr,deleteFetcher:kr,dispose:qn,getBlocker:Jr,deleteBlocker:zr,patchRoutes:Ir,_internalFetchControllers:Ut,_internalActiveDeferreds:xn,_internalSetRoutes:Qn},kt}function isSubmissionNavigation(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function normalizeTo(s,e,d,b,tt,nt,ot,ht){let mt,gt;if(ot){mt=[];for(let ft of e)if(mt.push(ft),ft.route.id===ot){gt=ft;break}}else mt=e,gt=e[e.length-1];let yt=resolveTo(tt||".",getResolveToMatches(mt,nt),stripBasename(s.pathname,d)||s.pathname,ht==="path");return tt==null&&(yt.search=s.search,yt.hash=s.hash),(tt==null||tt===""||tt===".")&&gt&&gt.route.index&&!hasNakedIndexQuery(yt.search)&&(yt.search=yt.search?yt.search.replace(/^\?/,"?index&"):"?index"),b&&d!=="/"&&(yt.pathname=yt.pathname==="/"?d:joinPaths([d,yt.pathname])),createPath(yt)}function normalizeNavigateOptions(s,e,d,b){if(!b||!isSubmissionNavigation(b))return{path:d};if(b.formMethod&&!isValidMethod(b.formMethod))return{path:d,error:getInternalRouterError(405,{method:b.formMethod})};let tt=()=>({path:d,error:getInternalRouterError(400,{type:"invalid-body"})}),nt=b.formMethod||"get",ot=s?nt.toUpperCase():nt.toLowerCase(),ht=stripHashFromPath(d);if(b.body!==void 0){if(b.formEncType==="text/plain"){if(!isMutationMethod(ot))return tt();let st=typeof b.body=="string"?b.body:b.body instanceof FormData||b.body instanceof URLSearchParams?Array.from(b.body.entries()).reduce((bt,vt)=>{let[xt,wt]=vt;return""+bt+xt+"="+wt+`
`},""):String(b.body);return{path:d,submission:{formMethod:ot,formAction:ht,formEncType:b.formEncType,formData:void 0,json:void 0,text:st}}}else if(b.formEncType==="application/json"){if(!isMutationMethod(ot))return tt();try{let st=typeof b.body=="string"?JSON.parse(b.body):b.body;return{path:d,submission:{formMethod:ot,formAction:ht,formEncType:b.formEncType,formData:void 0,json:st,text:void 0}}}catch{return tt()}}}invariant(typeof FormData=="function","FormData is not available in this environment");let mt,gt;if(b.formData)mt=convertFormDataToSearchParams(b.formData),gt=b.formData;else if(b.body instanceof FormData)mt=convertFormDataToSearchParams(b.body),gt=b.body;else if(b.body instanceof URLSearchParams)mt=b.body,gt=convertSearchParamsToFormData(mt);else if(b.body==null)mt=new URLSearchParams,gt=new FormData;else try{mt=new URLSearchParams(b.body),gt=convertSearchParamsToFormData(mt)}catch{return tt()}let yt={formMethod:ot,formAction:ht,formEncType:b&&b.formEncType||"application/x-www-form-urlencoded",formData:gt,json:void 0,text:void 0};if(isMutationMethod(yt.formMethod))return{path:d,submission:yt};let ft=parsePath(d);return e&&ft.search&&hasNakedIndexQuery(ft.search)&&mt.append("index",""),ft.search="?"+mt,{path:createPath(ft),submission:yt}}function getLoaderMatchesUntilBoundary(s,e){let d=s;if(e){let b=s.findIndex(tt=>tt.route.id===e);b>=0&&(d=s.slice(0,b))}return d}function getMatchesToLoad(s,e,d,b,tt,nt,ot,ht,mt,gt,yt,ft,st,bt,vt,xt){let wt=xt?isErrorResult(xt[1])?xt[1].error:xt[1].data:void 0,St=s.createURL(e.location),_t=s.createURL(tt),Tt=xt&&isErrorResult(xt[1])?xt[0]:void 0,Et=Tt?getLoaderMatchesUntilBoundary(d,Tt):d,kt=xt?xt[1].statusCode:void 0,Mt=ot&&kt&&kt>=400,Ot=Et.filter((At,It)=>{let{route:jt}=At;if(jt.lazy)return!0;if(jt.loader==null)return!1;if(nt)return typeof jt.loader!="function"||jt.loader.hydrate?!0:e.loaderData[jt.id]===void 0&&(!e.errors||e.errors[jt.id]===void 0);if(isNewLoader(e.loaderData,e.matches[It],At)||mt.some(Bt=>Bt===At.route.id))return!0;let qt=e.matches[It],Jt=At;return shouldRevalidateLoader(At,_extends$3({currentUrl:St,currentParams:qt.params,nextUrl:_t,nextParams:Jt.params},b,{actionResult:wt,actionStatus:kt,defaultShouldRevalidate:Mt?!1:ht||St.pathname+St.search===_t.pathname+_t.search||St.search!==_t.search||isNewRouteInstance(qt,Jt)}))}),Dt=[];return ft.forEach((At,It)=>{if(nt||!d.some(Wt=>Wt.route.id===At.routeId)||yt.has(It))return;let jt=matchRoutes(bt,At.path,vt);if(!jt){Dt.push({key:It,routeId:At.routeId,path:At.path,matches:null,match:null,controller:null});return}let qt=e.fetchers.get(It),Jt=getTargetMatch(jt,At.path),Bt=!1;st.has(It)?Bt=!1:gt.includes(It)?Bt=!0:qt&&qt.state!=="idle"&&qt.data===void 0?Bt=ht:Bt=shouldRevalidateLoader(Jt,_extends$3({currentUrl:St,currentParams:e.matches[e.matches.length-1].params,nextUrl:_t,nextParams:d[d.length-1].params},b,{actionResult:wt,actionStatus:kt,defaultShouldRevalidate:Mt?!1:ht})),Bt&&Dt.push({key:It,routeId:At.routeId,path:At.path,matches:jt,match:Jt,controller:new AbortController})}),[Ot,Dt]}function isNewLoader(s,e,d){let b=!e||d.route.id!==e.route.id,tt=s[d.route.id]===void 0;return b||tt}function isNewRouteInstance(s,e){let d=s.route.path;return s.pathname!==e.pathname||d!=null&&d.endsWith("*")&&s.params["*"]!==e.params["*"]}function shouldRevalidateLoader(s,e){if(s.route.shouldRevalidate){let d=s.route.shouldRevalidate(e);if(typeof d=="boolean")return d}return e.defaultShouldRevalidate}async function loadLazyRouteChildren(s,e,d,b,tt,nt,ot,ht){let mt=[e,...d.map(gt=>gt.route.id)].join("-");try{let gt=ot.get(mt);gt||(gt=s({path:e,matches:d,patch:(yt,ft)=>{ht.aborted||patchRoutesImpl(yt,ft,b,tt,nt)}}),ot.set(mt,gt)),gt&&isPromise(gt)&&await gt}finally{ot.delete(mt)}}function patchRoutesImpl(s,e,d,b,tt){if(s){var nt;let ot=b[s];invariant(ot,"No route found to patch children into: routeId = "+s);let ht=convertRoutesToDataRoutes(e,tt,[s,"patch",String(((nt=ot.children)==null?void 0:nt.length)||"0")],b);ot.children?ot.children.push(...ht):ot.children=ht}else{let ot=convertRoutesToDataRoutes(e,tt,["patch",String(d.length||"0")],b);d.push(...ot)}}async function loadLazyRouteModule(s,e,d){if(!s.lazy)return;let b=await s.lazy();if(!s.lazy)return;let tt=d[s.id];invariant(tt,"No route found in manifest");let nt={};for(let ot in b){let mt=tt[ot]!==void 0&&ot!=="hasErrorBoundary";warning$1(!mt,'Route "'+tt.id+'" has a static property "'+ot+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+ot+'" will be ignored.')),!mt&&!immutableRouteKeys.has(ot)&&(nt[ot]=b[ot])}Object.assign(tt,nt),Object.assign(tt,_extends$3({},e(tt),{lazy:void 0}))}function defaultDataStrategy(s){return Promise.all(s.matches.map(e=>e.resolve()))}async function callDataStrategyImpl(s,e,d,b,tt,nt,ot,ht){let mt=b.reduce((ft,st)=>ft.add(st.route.id),new Set),gt=new Set,yt=await s({matches:tt.map(ft=>{let st=mt.has(ft.route.id);return _extends$3({},ft,{shouldLoad:st,resolve:vt=>(gt.add(ft.route.id),st?callLoaderOrAction(e,d,ft,nt,ot,vt,ht):Promise.resolve({type:ResultType.data,result:void 0}))})}),request:d,params:tt[0].params,context:ht});return tt.forEach(ft=>invariant(gt.has(ft.route.id),'`match.resolve()` was not called for route id "'+ft.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),yt.filter((ft,st)=>mt.has(tt[st].route.id))}async function callLoaderOrAction(s,e,d,b,tt,nt,ot){let ht,mt,gt=yt=>{let ft,st=new Promise((xt,wt)=>ft=wt);mt=()=>ft(),e.signal.addEventListener("abort",mt);let bt=xt=>typeof yt!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+s+'" [routeId: '+d.route.id+"]"))):yt({request:e,params:d.params,context:ot},...xt!==void 0?[xt]:[]),vt;return nt?vt=nt(xt=>bt(xt)):vt=(async()=>{try{return{type:"data",result:await bt()}}catch(xt){return{type:"error",result:xt}}})(),Promise.race([vt,st])};try{let yt=d.route[s];if(d.route.lazy)if(yt){let ft,[st]=await Promise.all([gt(yt).catch(bt=>{ft=bt}),loadLazyRouteModule(d.route,tt,b)]);if(ft!==void 0)throw ft;ht=st}else if(await loadLazyRouteModule(d.route,tt,b),yt=d.route[s],yt)ht=await gt(yt);else if(s==="action"){let ft=new URL(e.url),st=ft.pathname+ft.search;throw getInternalRouterError(405,{method:e.method,pathname:st,routeId:d.route.id})}else return{type:ResultType.data,result:void 0};else if(yt)ht=await gt(yt);else{let ft=new URL(e.url),st=ft.pathname+ft.search;throw getInternalRouterError(404,{pathname:st})}invariant(ht.result!==void 0,"You defined "+(s==="action"?"an action":"a loader")+" for route "+('"'+d.route.id+"\" but didn't return anything from your `"+s+"` ")+"function. Please return a value or `null`.")}catch(yt){return{type:ResultType.error,result:yt}}finally{mt&&e.signal.removeEventListener("abort",mt)}return ht}async function convertHandlerResultToDataResult(s){let{result:e,type:d,status:b}=s;if(isResponse(e)){let ot;try{let ht=e.headers.get("Content-Type");ht&&/\bapplication\/json\b/.test(ht)?e.body==null?ot=null:ot=await e.json():ot=await e.text()}catch(ht){return{type:ResultType.error,error:ht}}return d===ResultType.error?{type:ResultType.error,error:new ErrorResponseImpl(e.status,e.statusText,ot),statusCode:e.status,headers:e.headers}:{type:ResultType.data,data:ot,statusCode:e.status,headers:e.headers}}if(d===ResultType.error)return{type:ResultType.error,error:e,statusCode:isRouteErrorResponse(e)?e.status:b};if(isDeferredData(e)){var tt,nt;return{type:ResultType.deferred,deferredData:e,statusCode:(tt=e.init)==null?void 0:tt.status,headers:((nt=e.init)==null?void 0:nt.headers)&&new Headers(e.init.headers)}}return{type:ResultType.data,data:e,statusCode:b}}function normalizeRelativeRoutingRedirectResponse(s,e,d,b,tt,nt){let ot=s.headers.get("Location");if(invariant(ot,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX.test(ot)){let ht=b.slice(0,b.findIndex(mt=>mt.route.id===d)+1);ot=normalizeTo(new URL(e.url),ht,tt,!0,ot,nt),s.headers.set("Location",ot)}return s}function normalizeRedirectLocation(s,e,d){if(ABSOLUTE_URL_REGEX.test(s)){let b=s,tt=b.startsWith("//")?new URL(e.protocol+b):new URL(b),nt=stripBasename(tt.pathname,d)!=null;if(tt.origin===e.origin&&nt)return tt.pathname+tt.search+tt.hash}return s}function createClientSideRequest(s,e,d,b){let tt=s.createURL(stripHashFromPath(e)).toString(),nt={signal:d};if(b&&isMutationMethod(b.formMethod)){let{formMethod:ot,formEncType:ht}=b;nt.method=ot.toUpperCase(),ht==="application/json"?(nt.headers=new Headers({"Content-Type":ht}),nt.body=JSON.stringify(b.json)):ht==="text/plain"?nt.body=b.text:ht==="application/x-www-form-urlencoded"&&b.formData?nt.body=convertFormDataToSearchParams(b.formData):nt.body=b.formData}return new Request(tt,nt)}function convertFormDataToSearchParams(s){let e=new URLSearchParams;for(let[d,b]of s.entries())e.append(d,typeof b=="string"?b:b.name);return e}function convertSearchParamsToFormData(s){let e=new FormData;for(let[d,b]of s.entries())e.append(d,b);return e}function processRouteLoaderData(s,e,d,b,tt,nt){let ot={},ht=null,mt,gt=!1,yt={},ft=b&&isErrorResult(b[1])?b[1].error:void 0;return d.forEach((st,bt)=>{let vt=e[bt].route.id;if(invariant(!isRedirectResult(st),"Cannot handle redirect results in processLoaderData"),isErrorResult(st)){let xt=st.error;ft!==void 0&&(xt=ft,ft=void 0),ht=ht||{};{let wt=findNearestBoundary(s,vt);ht[wt.route.id]==null&&(ht[wt.route.id]=xt)}ot[vt]=void 0,gt||(gt=!0,mt=isRouteErrorResponse(st.error)?st.error.status:500),st.headers&&(yt[vt]=st.headers)}else isDeferredResult(st)?(tt.set(vt,st.deferredData),ot[vt]=st.deferredData.data,st.statusCode!=null&&st.statusCode!==200&&!gt&&(mt=st.statusCode),st.headers&&(yt[vt]=st.headers)):(ot[vt]=st.data,st.statusCode&&st.statusCode!==200&&!gt&&(mt=st.statusCode),st.headers&&(yt[vt]=st.headers))}),ft!==void 0&&b&&(ht={[b[0]]:ft},ot[b[0]]=void 0),{loaderData:ot,errors:ht,statusCode:mt||200,loaderHeaders:yt}}function processLoaderData(s,e,d,b,tt,nt,ot,ht){let{loaderData:mt,errors:gt}=processRouteLoaderData(e,d,b,tt,ht);for(let yt=0;yt<nt.length;yt++){let{key:ft,match:st,controller:bt}=nt[yt];invariant(ot!==void 0&&ot[yt]!==void 0,"Did not find corresponding fetcher result");let vt=ot[yt];if(!(bt&&bt.signal.aborted))if(isErrorResult(vt)){let xt=findNearestBoundary(s.matches,st==null?void 0:st.route.id);gt&&gt[xt.route.id]||(gt=_extends$3({},gt,{[xt.route.id]:vt.error})),s.fetchers.delete(ft)}else if(isRedirectResult(vt))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(vt))invariant(!1,"Unhandled fetcher deferred data");else{let xt=getDoneFetcher(vt.data);s.fetchers.set(ft,xt)}}return{loaderData:mt,errors:gt}}function mergeLoaderData(s,e,d,b){let tt=_extends$3({},e);for(let nt of d){let ot=nt.route.id;if(e.hasOwnProperty(ot)?e[ot]!==void 0&&(tt[ot]=e[ot]):s[ot]!==void 0&&nt.route.loader&&(tt[ot]=s[ot]),b&&b.hasOwnProperty(ot))break}return tt}function getActionDataForCommit(s){return s?isErrorResult(s[1])?{actionData:{}}:{actionData:{[s[0]]:s[1].data}}:{}}function findNearestBoundary(s,e){return(e?s.slice(0,s.findIndex(b=>b.route.id===e)+1):[...s]).reverse().find(b=>b.route.hasErrorBoundary===!0)||s[0]}function getShortCircuitMatches(s){let e=s.length===1?s[0]:s.find(d=>d.index||!d.path||d.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function getInternalRouterError(s,e){let{pathname:d,routeId:b,method:tt,type:nt,message:ot}=e===void 0?{}:e,ht="Unknown Server Error",mt="Unknown @remix-run/router error";return s===400?(ht="Bad Request",nt==="route-discovery"?mt='Unable to match URL "'+d+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+ot):tt&&d&&b?mt="You made a "+tt+' request to "'+d+'" but '+('did not provide a `loader` for route "'+b+'", ')+"so there is no way to handle the request.":nt==="defer-action"?mt="defer() is not supported in actions":nt==="invalid-body"&&(mt="Unable to encode submission body")):s===403?(ht="Forbidden",mt='Route "'+b+'" does not match URL "'+d+'"'):s===404?(ht="Not Found",mt='No route matches URL "'+d+'"'):s===405&&(ht="Method Not Allowed",tt&&d&&b?mt="You made a "+tt.toUpperCase()+' request to "'+d+'" but '+('did not provide an `action` for route "'+b+'", ')+"so there is no way to handle the request.":tt&&(mt='Invalid request method "'+tt.toUpperCase()+'"')),new ErrorResponseImpl(s||500,ht,new Error(mt),!0)}function findRedirect(s){for(let e=s.length-1;e>=0;e--){let d=s[e];if(isRedirectResult(d))return{result:d,idx:e}}}function stripHashFromPath(s){let e=typeof s=="string"?parsePath(s):s;return createPath(_extends$3({},e,{hash:""}))}function isHashChangeOnly(s,e){return s.pathname!==e.pathname||s.search!==e.search?!1:s.hash===""?e.hash!=="":s.hash===e.hash?!0:e.hash!==""}function isPromise(s){return typeof s=="object"&&s!=null&&"then"in s}function isRedirectHandlerResult(s){return isResponse(s.result)&&redirectStatusCodes.has(s.result.status)}function isDeferredResult(s){return s.type===ResultType.deferred}function isErrorResult(s){return s.type===ResultType.error}function isRedirectResult(s){return(s&&s.type)===ResultType.redirect}function isDeferredData(s){let e=s;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function isResponse(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function isValidMethod(s){return validRequestMethods.has(s.toLowerCase())}function isMutationMethod(s){return validMutationMethods.has(s.toLowerCase())}async function resolveDeferredResults(s,e,d,b,tt,nt){for(let ot=0;ot<d.length;ot++){let ht=d[ot],mt=e[ot];if(!mt)continue;let gt=s.find(ft=>ft.route.id===mt.route.id),yt=gt!=null&&!isNewRouteInstance(gt,mt)&&(nt&&nt[mt.route.id])!==void 0;if(isDeferredResult(ht)&&(tt||yt)){let ft=b[ot];invariant(ft,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(ht,ft,tt).then(st=>{st&&(d[ot]=st||d[ot])})}}}async function resolveDeferredData(s,e,d){if(d===void 0&&(d=!1),!await s.deferredData.resolveData(e)){if(d)try{return{type:ResultType.data,data:s.deferredData.unwrappedData}}catch(tt){return{type:ResultType.error,error:tt}}return{type:ResultType.data,data:s.deferredData.data}}}function hasNakedIndexQuery(s){return new URLSearchParams(s).getAll("index").some(e=>e==="")}function getTargetMatch(s,e){let d=typeof e=="string"?parsePath(e).search:e.search;if(s[s.length-1].route.index&&hasNakedIndexQuery(d||""))return s[s.length-1];let b=getPathContributingMatches(s);return b[b.length-1]}function getSubmissionFromNavigation(s){let{formMethod:e,formAction:d,formEncType:b,text:tt,formData:nt,json:ot}=s;if(!(!e||!d||!b)){if(tt!=null)return{formMethod:e,formAction:d,formEncType:b,formData:void 0,json:void 0,text:tt};if(nt!=null)return{formMethod:e,formAction:d,formEncType:b,formData:nt,json:void 0,text:void 0};if(ot!==void 0)return{formMethod:e,formAction:d,formEncType:b,formData:void 0,json:ot,text:void 0}}}function getLoadingNavigation(s,e){return e?{state:"loading",location:s,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(s,e){return{state:"submitting",location:s,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function getLoadingFetcher(s,e){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function getSubmittingFetcher(s,e){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:e?e.data:void 0}}function getDoneFetcher(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function restoreAppliedTransitions(s,e){try{let d=s.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(d){let b=JSON.parse(d);for(let[tt,nt]of Object.entries(b||{}))nt&&Array.isArray(nt)&&e.set(tt,new Set(nt||[]))}}catch{}}function persistAppliedTransitions(s,e){if(e.size>0){let d={};for(let[b,tt]of e)d[b]=[...tt];try{s.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(d))}catch(b){warning$1(!1,"Failed to save applied view transitions in sessionStorage ("+b+").")}}}/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var d=arguments[e];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(s[b]=d[b])}return s},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useRoutesImpl(s,e,d,b){useInRouterContext()||invariant(!1);let{navigator:tt}=reactExports.useContext(NavigationContext),{matches:nt}=reactExports.useContext(RouteContext),ot=nt[nt.length-1],ht=ot?ot.params:{};ot&&ot.pathname;let mt=ot?ot.pathnameBase:"/";ot&&ot.route;let gt=useLocation(),yt;yt=gt;let ft=yt.pathname||"/",st=ft;if(mt!=="/"){let xt=mt.replace(/^\//,"").split("/");st="/"+ft.replace(/^\//,"").split("/").slice(xt.length).join("/")}let bt=matchRoutes(s,{pathname:st});return _renderMatches(bt&&bt.map(xt=>Object.assign({},xt,{params:Object.assign({},ht,xt.params),pathname:joinPaths([mt,tt.encodeLocation?tt.encodeLocation(xt.pathname).pathname:xt.pathname]),pathnameBase:xt.pathnameBase==="/"?mt:joinPaths([mt,tt.encodeLocation?tt.encodeLocation(xt.pathnameBase).pathname:xt.pathnameBase])})),nt,d,b)}function DefaultErrorComponent(){let s=useRouteError(),e=isRouteErrorResponse(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),d=s instanceof Error?s.stack:null,tt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),d?reactExports.createElement("pre",{style:tt},d):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,d){return d.location!==e.location||d.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:d.error,location:d.location,revalidation:e.revalidation||d.revalidation}}componentDidCatch(e,d){console.error("React Router caught the following error during render",e,d)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(s){let{routeContext:e,match:d,children:b}=s,tt=reactExports.useContext(DataRouterContext);return tt&&tt.static&&tt.staticContext&&(d.route.errorElement||d.route.ErrorBoundary)&&(tt.staticContext._deepestRenderedBoundaryId=d.route.id),reactExports.createElement(RouteContext.Provider,{value:e},b)}function _renderMatches(s,e,d,b){var tt;if(e===void 0&&(e=[]),d===void 0&&(d=null),b===void 0&&(b=null),s==null){var nt;if((nt=d)!=null&&nt.errors)s=d.matches;else return null}let ot=s,ht=(tt=d)==null?void 0:tt.errors;if(ht!=null){let yt=ot.findIndex(ft=>ft.route.id&&(ht==null?void 0:ht[ft.route.id])!==void 0);yt>=0||invariant(!1),ot=ot.slice(0,Math.min(ot.length,yt+1))}let mt=!1,gt=-1;if(d&&b&&b.v7_partialHydration)for(let yt=0;yt<ot.length;yt++){let ft=ot[yt];if((ft.route.HydrateFallback||ft.route.hydrateFallbackElement)&&(gt=yt),ft.route.id){let{loaderData:st,errors:bt}=d,vt=ft.route.loader&&st[ft.route.id]===void 0&&(!bt||bt[ft.route.id]===void 0);if(ft.route.lazy||vt){mt=!0,gt>=0?ot=ot.slice(0,gt+1):ot=[ot[0]];break}}}return ot.reduceRight((yt,ft,st)=>{let bt,vt=!1,xt=null,wt=null;d&&(bt=ht&&ft.route.id?ht[ft.route.id]:void 0,xt=ft.route.errorElement||defaultErrorElement,mt&&(gt<0&&st===0?(warningOnce("route-fallback"),vt=!0,wt=null):gt===st&&(vt=!0,wt=ft.route.hydrateFallbackElement||null)));let St=e.concat(ot.slice(0,st+1)),_t=()=>{let Tt;return bt?Tt=xt:vt?Tt=wt:ft.route.Component?Tt=reactExports.createElement(ft.route.Component,null):ft.route.element?Tt=ft.route.element:Tt=yt,reactExports.createElement(RenderedRoute,{match:ft,routeContext:{outlet:yt,matches:St,isDataRoute:d!=null},children:Tt})};return d&&(ft.route.ErrorBoundary||ft.route.errorElement||st===0)?reactExports.createElement(RenderErrorBoundary,{location:d.location,revalidation:d.revalidation,component:xt,error:bt,children:_t(),routeContext:{outlet:null,matches:St,isDataRoute:!0}}):_t()},null)}var DataRouterStateHook$1=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(DataRouterStateHook$1||{});function useDataRouterState(s){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(s){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(s){let e=useRouteContext(),d=e.matches[e.matches.length-1];return d.route.id||invariant(!1),d.route.id}function useRouteError(){var s;let e=reactExports.useContext(RouteErrorContext),d=useDataRouterState(DataRouterStateHook$1.UseRouteError),b=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e!==void 0?e:(s=d.errors)==null?void 0:s[b]}const alreadyWarned={};function warningOnce(s,e,d){alreadyWarned[s]||(alreadyWarned[s]=!0)}function Router(s){let{basename:e="/",children:d=null,location:b,navigationType:tt=Action.Pop,navigator:nt,static:ot=!1,future:ht}=s;useInRouterContext()&&invariant(!1);let mt=e.replace(/^\/*/,"/"),gt=reactExports.useMemo(()=>({basename:mt,navigator:nt,static:ot,future:_extends$2({v7_relativeSplatPath:!1},ht)}),[mt,ht,nt,ot]);typeof b=="string"&&(b=parsePath(b));let{pathname:yt="/",search:ft="",hash:st="",state:bt=null,key:vt="default"}=b,xt=reactExports.useMemo(()=>{let wt=stripBasename(yt,mt);return wt==null?null:{location:{pathname:wt,search:ft,hash:st,state:bt,key:vt},navigationType:tt}},[mt,yt,ft,st,bt,vt,tt]);return xt==null?null:reactExports.createElement(NavigationContext.Provider,{value:gt},reactExports.createElement(LocationContext.Provider,{children:d,value:xt}))}new Promise(()=>{});function mapRouteProperties(s){let e={hasErrorBoundary:s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&Object.assign(e,{element:reactExports.createElement(s.Component),Component:void 0}),s.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:reactExports.createElement(s.HydrateFallback),HydrateFallback:void 0}),s.ErrorBoundary&&Object.assign(e,{errorElement:reactExports.createElement(s.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var d=arguments[e];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(s[b]=d[b])}return s},_extends$1.apply(this,arguments)}const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}function createBrowserRouter(s,e){return createRouter({basename:void 0,future:_extends$1({},void 0,{v7_prependBasename:!0}),history:createBrowserHistory({window:void 0}),hydrationData:parseHydrationData(),routes:s,mapRouteProperties,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function parseHydrationData(){var s;let e=(s=window)==null?void 0:s.__staticRouterHydrationData;return e&&e.errors&&(e=_extends$1({},e,{errors:deserializeErrors(e.errors)})),e}function deserializeErrors(s){if(!s)return null;let e=Object.entries(s),d={};for(let[b,tt]of e)if(tt&&tt.__type==="RouteErrorResponse")d[b]=new ErrorResponseImpl(tt.status,tt.statusText,tt.data,tt.internal===!0);else if(tt&&tt.__type==="Error"){if(tt.__subType){let nt=window[tt.__subType];if(typeof nt=="function")try{let ot=new nt(tt.message);ot.stack="",d[b]=ot}catch{}}if(d[b]==null){let nt=new Error(tt.message);nt.stack="",d[b]=nt}}else d[b]=tt;return d}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM$1[FLUSH_SYNC];function startTransitionSafe(s){startTransitionImpl?startTransitionImpl(s):s()}function flushSyncSafe(s){flushSyncImpl?flushSyncImpl(s):s()}class Deferred{constructor(){this.status="pending",this.promise=new Promise((e,d)=>{this.resolve=b=>{this.status==="pending"&&(this.status="resolved",e(b))},this.reject=b=>{this.status==="pending"&&(this.status="rejected",d(b))}})}}function RouterProvider(s){let{fallbackElement:e,router:d,future:b}=s,[tt,nt]=reactExports.useState(d.state),[ot,ht]=reactExports.useState(),[mt,gt]=reactExports.useState({isTransitioning:!1}),[yt,ft]=reactExports.useState(),[st,bt]=reactExports.useState(),[vt,xt]=reactExports.useState(),wt=reactExports.useRef(new Map),{v7_startTransition:St}=b||{},_t=reactExports.useCallback(Dt=>{St?startTransitionSafe(Dt):Dt()},[St]),Tt=reactExports.useCallback((Dt,At)=>{let{deletedFetchers:It,unstable_flushSync:jt,unstable_viewTransitionOpts:qt}=At;It.forEach(Bt=>wt.current.delete(Bt)),Dt.fetchers.forEach((Bt,Wt)=>{Bt.data!==void 0&&wt.current.set(Wt,Bt.data)});let Jt=d.window==null||d.window.document==null||typeof d.window.document.startViewTransition!="function";if(!qt||Jt){jt?flushSyncSafe(()=>nt(Dt)):_t(()=>nt(Dt));return}if(jt){flushSyncSafe(()=>{st&&(yt&&yt.resolve(),st.skipTransition()),gt({isTransitioning:!0,flushSync:!0,currentLocation:qt.currentLocation,nextLocation:qt.nextLocation})});let Bt=d.window.document.startViewTransition(()=>{flushSyncSafe(()=>nt(Dt))});Bt.finished.finally(()=>{flushSyncSafe(()=>{ft(void 0),bt(void 0),ht(void 0),gt({isTransitioning:!1})})}),flushSyncSafe(()=>bt(Bt));return}st?(yt&&yt.resolve(),st.skipTransition(),xt({state:Dt,currentLocation:qt.currentLocation,nextLocation:qt.nextLocation})):(ht(Dt),gt({isTransitioning:!0,flushSync:!1,currentLocation:qt.currentLocation,nextLocation:qt.nextLocation}))},[d.window,st,yt,wt,_t]);reactExports.useLayoutEffect(()=>d.subscribe(Tt),[d,Tt]),reactExports.useEffect(()=>{mt.isTransitioning&&!mt.flushSync&&ft(new Deferred)},[mt]),reactExports.useEffect(()=>{if(yt&&ot&&d.window){let Dt=ot,At=yt.promise,It=d.window.document.startViewTransition(async()=>{_t(()=>nt(Dt)),await At});It.finished.finally(()=>{ft(void 0),bt(void 0),ht(void 0),gt({isTransitioning:!1})}),bt(It)}},[_t,ot,yt,d.window]),reactExports.useEffect(()=>{yt&&ot&&tt.location.key===ot.location.key&&yt.resolve()},[yt,st,tt.location,ot]),reactExports.useEffect(()=>{!mt.isTransitioning&&vt&&(ht(vt.state),gt({isTransitioning:!0,flushSync:!1,currentLocation:vt.currentLocation,nextLocation:vt.nextLocation}),xt(void 0))},[mt.isTransitioning,vt]),reactExports.useEffect(()=>{},[]);let Et=reactExports.useMemo(()=>({createHref:d.createHref,encodeLocation:d.encodeLocation,go:Dt=>d.navigate(Dt),push:(Dt,At,It)=>d.navigate(Dt,{state:At,preventScrollReset:It==null?void 0:It.preventScrollReset}),replace:(Dt,At,It)=>d.navigate(Dt,{replace:!0,state:At,preventScrollReset:It==null?void 0:It.preventScrollReset})}),[d]),kt=d.basename||"/",Mt=reactExports.useMemo(()=>({router:d,navigator:Et,static:!1,basename:kt}),[d,Et,kt]),Ot=reactExports.useMemo(()=>({v7_relativeSplatPath:d.future.v7_relativeSplatPath}),[d.future.v7_relativeSplatPath]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:Mt},reactExports.createElement(DataRouterStateContext.Provider,{value:tt},reactExports.createElement(FetchersContext.Provider,{value:wt.current},reactExports.createElement(ViewTransitionContext.Provider,{value:mt},reactExports.createElement(Router,{basename:kt,location:tt.location,navigationType:tt.historyAction,navigator:Et,future:Ot},tt.initialized||d.future.v7_partialHydration?reactExports.createElement(MemoizedDataRoutes,{routes:d.routes,future:d.future,state:tt}):e))))),null)}const MemoizedDataRoutes=reactExports.memo(DataRoutes);function DataRoutes(s){let{routes:e,future:d,state:b}=s;return useRoutesImpl(e,void 0,b,d)}var DataRouterHook;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function c(s,e,d){var b=this,tt=reactExports.useRef(null),nt=reactExports.useRef(0),ot=reactExports.useRef(null),ht=reactExports.useRef([]),mt=reactExports.useRef(),gt=reactExports.useRef(),yt=reactExports.useRef(s),ft=reactExports.useRef(!0);yt.current=s;var st=typeof window<"u",bt=!e&&e!==0&&st;if(typeof s!="function")throw new TypeError("Expected a function");e=+e||0;var vt=!!(d=d||{}).leading,xt=!("trailing"in d)||!!d.trailing,wt="maxWait"in d,St="debounceOnServer"in d&&!!d.debounceOnServer,_t=wt?Math.max(+d.maxWait||0,e):null;reactExports.useEffect(function(){return ft.current=!0,function(){ft.current=!1}},[]);var Tt=reactExports.useMemo(function(){var Et=function(It){var jt=ht.current,qt=mt.current;return ht.current=mt.current=null,nt.current=It,gt.current=yt.current.apply(qt,jt)},kt=function(It,jt){bt&&cancelAnimationFrame(ot.current),ot.current=bt?requestAnimationFrame(It):setTimeout(It,jt)},Mt=function(It){if(!ft.current)return!1;var jt=It-tt.current;return!tt.current||jt>=e||jt<0||wt&&It-nt.current>=_t},Ot=function(It){return ot.current=null,xt&&ht.current?Et(It):(ht.current=mt.current=null,gt.current)},Dt=function It(){var jt=Date.now();if(Mt(jt))return Ot(jt);if(ft.current){var qt=e-(jt-tt.current),Jt=wt?Math.min(qt,_t-(jt-nt.current)):qt;kt(It,Jt)}},At=function(){if(st||St){var It=Date.now(),jt=Mt(It);if(ht.current=[].slice.call(arguments),mt.current=b,tt.current=It,jt){if(!ot.current&&ft.current)return nt.current=tt.current,kt(Dt,e),vt?Et(tt.current):gt.current;if(wt)return kt(Dt,e),Et(tt.current)}return ot.current||kt(Dt,e),gt.current}};return At.cancel=function(){ot.current&&(bt?cancelAnimationFrame(ot.current):clearTimeout(ot.current)),nt.current=0,ht.current=tt.current=mt.current=ot.current=null},At.isPending=function(){return!!ot.current},At.flush=function(){return ot.current?Ot(Date.now()):gt.current},At},[vt,wt,e,_t,xt,bt,st,St]);return Tt}function i$3(s,e){return s===e}function a(s,e){return e}function o(s,e,d){var b=i$3,tt=reactExports.useReducer(a,s),nt=tt[0],ot=tt[1],ht=c(reactExports.useCallback(function(gt){return ot(gt)},[ot]),e,d),mt=reactExports.useRef(s);return b(mt.current,s)||(ht(s),mt.current=s),[nt,ht]}var sweetalert2_all={exports:{}};/*!
* sweetalert2 v11.12.3
* Released under the MIT License.
*/(function(s,e){(function(d,b){s.exports=b()})(commonjsGlobal,function(){function d($t,Ct){(Ct==null||Ct>$t.length)&&(Ct=$t.length);for(var Pt=0,Rt=Array(Ct);Pt<Ct;Pt++)Rt[Pt]=$t[Pt];return Rt}function b($t){if(Array.isArray($t))return $t}function tt($t){if(Array.isArray($t))return d($t)}function nt($t,Ct,Pt){if(typeof $t=="function"?$t===Ct:$t.has(Ct))return arguments.length<3?Ct:Pt;throw new TypeError("Private element is not present on this object")}function ot($t){if($t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t}function ht($t,Ct,Pt){return Ct=_t(Ct),At($t,Et()?Reflect.construct(Ct,Pt||[],_t($t).constructor):Ct.apply($t,Pt))}function mt($t,Ct){if(Ct.has($t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gt($t,Ct){if(!($t instanceof Ct))throw new TypeError("Cannot call a class as a function")}function yt($t,Ct){return $t.get(nt($t,Ct))}function ft($t,Ct,Pt){mt($t,Ct),Ct.set($t,Pt)}function st($t,Ct,Pt){return $t.set(nt($t,Ct),Pt),Pt}function bt($t,Ct,Pt){if(Et())return Reflect.construct.apply(null,arguments);var Rt=[null];Rt.push.apply(Rt,Ct);var Yt=new($t.bind.apply($t,Rt));return Yt}function vt($t,Ct){for(var Pt=0;Pt<Ct.length;Pt++){var Rt=Ct[Pt];Rt.enumerable=Rt.enumerable||!1,Rt.configurable=!0,"value"in Rt&&(Rt.writable=!0),Object.defineProperty($t,Wt(Rt.key),Rt)}}function xt($t,Ct,Pt){return Ct&&vt($t.prototype,Ct),Object.defineProperty($t,"prototype",{writable:!1}),$t}function wt($t,Ct){var Pt=typeof Symbol<"u"&&$t[Symbol.iterator]||$t["@@iterator"];if(!Pt){if(Array.isArray($t)||(Pt=Ut($t))||Ct){Pt&&($t=Pt);var Rt=0,Yt=function(){};return{s:Yt,n:function(){return Rt>=$t.length?{done:!0}:{done:!1,value:$t[Rt++]}},e:function(Wn){throw Wn},f:Yt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pn,Tn=!0,Jn=!1;return{s:function(){Pt=Pt.call($t)},n:function(){var Wn=Pt.next();return Tn=Wn.done,Wn},e:function(Wn){Jn=!0,pn=Wn},f:function(){try{Tn||Pt.return==null||Pt.return()}finally{if(Jn)throw pn}}}}function St(){return St=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function($t,Ct,Pt){var Rt=qt($t,Ct);if(Rt){var Yt=Object.getOwnPropertyDescriptor(Rt,Ct);return Yt.get?Yt.get.call(arguments.length<3?$t:Pt):Yt.value}},St.apply(null,arguments)}function _t($t){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ct){return Ct.__proto__||Object.getPrototypeOf(Ct)},_t($t)}function Tt($t,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");$t.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:$t,writable:!0,configurable:!0}}),Object.defineProperty($t,"prototype",{writable:!1}),Ct&&It($t,Ct)}function Et(){try{var $t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Et=function(){return!!$t})()}function kt($t){if(typeof Symbol<"u"&&$t[Symbol.iterator]!=null||$t["@@iterator"]!=null)return Array.from($t)}function Mt($t,Ct){var Pt=$t==null?null:typeof Symbol<"u"&&$t[Symbol.iterator]||$t["@@iterator"];if(Pt!=null){var Rt,Yt,pn,Tn,Jn=[],Wn=!0,Tr=!1;try{if(pn=(Pt=Pt.call($t)).next,Ct!==0)for(;!(Wn=(Rt=pn.call(Pt)).done)&&(Jn.push(Rt.value),Jn.length!==Ct);Wn=!0);}catch(_o){Tr=!0,Yt=_o}finally{try{if(!Wn&&Pt.return!=null&&(Tn=Pt.return(),Object(Tn)!==Tn))return}finally{if(Tr)throw Yt}}return Jn}}function Ot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function At($t,Ct){if(Ct&&(typeof Ct=="object"||typeof Ct=="function"))return Ct;if(Ct!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ot($t)}function It($t,Ct){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Pt,Rt){return Pt.__proto__=Rt,Pt},It($t,Ct)}function jt($t,Ct){return b($t)||Mt($t,Ct)||Ut($t,Ct)||Ot()}function qt($t,Ct){for(;!{}.hasOwnProperty.call($t,Ct)&&($t=_t($t))!==null;);return $t}function Jt($t){return tt($t)||kt($t)||Ut($t)||Dt()}function Bt($t,Ct){if(typeof $t!="object"||!$t)return $t;var Pt=$t[Symbol.toPrimitive];if(Pt!==void 0){var Rt=Pt.call($t,Ct);if(typeof Rt!="object")return Rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($t)}function Wt($t){var Ct=Bt($t,"string");return typeof Ct=="symbol"?Ct:Ct+""}function Lt($t){"@babel/helpers - typeof";return Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},Lt($t)}function Ut($t,Ct){if($t){if(typeof $t=="string")return d($t,Ct);var Pt={}.toString.call($t).slice(8,-1);return Pt==="Object"&&$t.constructor&&(Pt=$t.constructor.name),Pt==="Map"||Pt==="Set"?Array.from($t):Pt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pt)?d($t,Ct):void 0}}var tn=100,Kt={},an=function(){Kt.previousActiveElement instanceof HTMLElement?(Kt.previousActiveElement.focus(),Kt.previousActiveElement=null):document.body&&document.body.focus()},ln=function(Ct){return new Promise(function(Pt){if(!Ct)return Pt();var Rt=window.scrollX,Yt=window.scrollY;Kt.restoreFocusTimeout=setTimeout(function(){an(),Pt()},tn),window.scrollTo(Rt,Yt)})},hn="swal2-",kn=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],Zt=kn.reduce(function($t,Ct){return $t[Ct]=hn+Ct,$t},{}),xn=["success","warning","info","question","error"],En=xn.reduce(function($t,Ct){return $t[Ct]=hn+Ct,$t},{}),Cn="SweetAlert2:",Fn=function(Ct){return Ct.charAt(0).toUpperCase()+Ct.slice(1)},Vn=function(Ct){console.warn("".concat(Cn," ").concat(Lt(Ct)==="object"?Ct.join(" "):Ct))},qn=function(Ct){console.error("".concat(Cn," ").concat(Ct))},cr=[],Bn=function(Ct){cr.includes(Ct)||(cr.push(Ct),Vn(Ct))},ir=function(Ct){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Bn('"'.concat(Ct,'" is deprecated and will be removed in the next major release.').concat(Pt?' Use "'.concat(Pt,'" instead.'):""))},tr=function(Ct){return typeof Ct=="function"?Ct():Ct},wr=function(Ct){return Ct&&typeof Ct.toPromise=="function"},dr=function(Ct){return wr(Ct)?Ct.toPromise():Promise.resolve(Ct)},Sr=function(Ct){return Ct&&Promise.resolve(Ct)===Ct},ar=function(){return document.body.querySelector(".".concat(Zt.container))},vr=function(Ct){var Pt=ar();return Pt?Pt.querySelector(Ct):null},hr=function(Ct){return vr(".".concat(Ct))},Hn=function(){return hr(Zt.popup)},or=function(){return hr(Zt.icon)},Pr=function(){return hr(Zt["icon-content"])},Cr=function(){return hr(Zt.title)},zn=function(){return hr(Zt["html-container"])},Yr=function(){return hr(Zt.image)},Fr=function(){return hr(Zt["progress-steps"])},Dr=function(){return hr(Zt["validation-message"])},lr=function(){return vr(".".concat(Zt.actions," .").concat(Zt.confirm))},Nr=function(){return vr(".".concat(Zt.actions," .").concat(Zt.cancel))},Or=function(){return vr(".".concat(Zt.actions," .").concat(Zt.deny))},kr=function(){return hr(Zt["input-label"])},xr=function(){return vr(".".concat(Zt.loader))},In=function(){return hr(Zt.actions)},Br=function(){return hr(Zt.footer)},Wr=function(){return hr(Zt["timer-progress-bar"])},Jr=function(){return hr(Zt.close)},zr=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Kn=function(){var Ct=Hn();if(!Ct)return[];var Pt=Ct.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),Rt=Array.from(Pt).sort(function(Tn,Jn){var Wn=parseInt(Tn.getAttribute("tabindex")||"0"),Tr=parseInt(Jn.getAttribute("tabindex")||"0");return Wn>Tr?1:Wn<Tr?-1:0}),Yt=Ct.querySelectorAll(zr),pn=Array.from(Yt).filter(function(Tn){return Tn.getAttribute("tabindex")!=="-1"});return Jt(new Set(Rt.concat(pn))).filter(function(Tn){return bn(Tn)})},jr=function(){return Dn(document.body,Zt.shown)&&!Dn(document.body,Zt["toast-shown"])&&!Dn(document.body,Zt["no-backdrop"])},Vr=function(){var Ct=Hn();return Ct?Dn(Ct,Zt.toast):!1},Hr=function(){var Ct=Hn();return Ct?Ct.hasAttribute("data-loading"):!1},On=function(Ct,Pt){if(Ct.textContent="",Pt){var Rt=new DOMParser,Yt=Rt.parseFromString(Pt,"text/html"),pn=Yt.querySelector("head");pn&&Array.from(pn.childNodes).forEach(function(Jn){Ct.appendChild(Jn)});var Tn=Yt.querySelector("body");Tn&&Array.from(Tn.childNodes).forEach(function(Jn){Jn instanceof HTMLVideoElement||Jn instanceof HTMLAudioElement?Ct.appendChild(Jn.cloneNode(!0)):Ct.appendChild(Jn)})}},Dn=function(Ct,Pt){if(!Pt)return!1;for(var Rt=Pt.split(/\s+/),Yt=0;Yt<Rt.length;Yt++)if(!Ct.classList.contains(Rt[Yt]))return!1;return!0},$n=function(Ct,Pt){Array.from(Ct.classList).forEach(function(Rt){!Object.values(Zt).includes(Rt)&&!Object.values(En).includes(Rt)&&!Object.values(Pt.showClass||{}).includes(Rt)&&Ct.classList.remove(Rt)})},Er=function(Ct,Pt,Rt){if($n(Ct,Pt),!!Pt.customClass){var Yt=Pt.customClass[Rt];if(Yt){if(typeof Yt!="string"&&!Yt.forEach){Vn("Invalid type of customClass.".concat(Rt,'! Expected string or iterable object, got "').concat(Lt(Yt),'"'));return}Qn(Ct,Yt)}}},Lr=function(Ct,Pt){if(!Pt)return null;switch(Pt){case"select":case"textarea":case"file":return Ct.querySelector(".".concat(Zt.popup," > .").concat(Zt[Pt]));case"checkbox":return Ct.querySelector(".".concat(Zt.popup," > .").concat(Zt.checkbox," input"));case"radio":return Ct.querySelector(".".concat(Zt.popup," > .").concat(Zt.radio," input:checked"))||Ct.querySelector(".".concat(Zt.popup," > .").concat(Zt.radio," input:first-child"));case"range":return Ct.querySelector(".".concat(Zt.popup," > .").concat(Zt.range," input"));default:return Ct.querySelector(".".concat(Zt.popup," > .").concat(Zt.input))}},qr=function(Ct){if(Ct.focus(),Ct.type!=="file"){var Pt=Ct.value;Ct.value="",Ct.value=Pt}},Gr=function(Ct,Pt,Rt){!Ct||!Pt||(typeof Pt=="string"&&(Pt=Pt.split(/\s+/).filter(Boolean)),Pt.forEach(function(Yt){Array.isArray(Ct)?Ct.forEach(function(pn){Rt?pn.classList.add(Yt):pn.classList.remove(Yt)}):Rt?Ct.classList.add(Yt):Ct.classList.remove(Yt)}))},Qn=function(Ct,Pt){Gr(Ct,Pt,!0)},Ir=function(Ct,Pt){Gr(Ct,Pt,!1)},en=function(Ct,Pt){for(var Rt=Array.from(Ct.children),Yt=0;Yt<Rt.length;Yt++){var pn=Rt[Yt];if(pn instanceof HTMLElement&&Dn(pn,Pt))return pn}},rn=function(Ct,Pt,Rt){Rt==="".concat(parseInt(Rt))&&(Rt=parseInt(Rt)),Rt||parseInt(Rt)===0?Ct.style.setProperty(Pt,typeof Rt=="number"?"".concat(Rt,"px"):Rt):Ct.style.removeProperty(Pt)},un=function(Ct){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";Ct&&(Ct.style.display=Pt)},mn=function(Ct){Ct&&(Ct.style.display="none")},Sn=function(Ct){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";Ct&&new MutationObserver(function(){Pn(Ct,Ct.innerHTML,Pt)}).observe(Ct,{childList:!0,subtree:!0})},Mn=function(Ct,Pt,Rt,Yt){var pn=Ct.querySelector(Pt);pn&&pn.style.setProperty(Rt,Yt)},Pn=function(Ct,Pt){var Rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";Pt?un(Ct,Rt):mn(Ct)},bn=function(Ct){return!!(Ct&&(Ct.offsetWidth||Ct.offsetHeight||Ct.getClientRects().length))},zt=function(){return!bn(lr())&&!bn(Or())&&!bn(Nr())},Ht=function(Ct){return Ct.scrollHeight>Ct.clientHeight},Xt=function(Ct){var Pt=window.getComputedStyle(Ct),Rt=parseFloat(Pt.getPropertyValue("animation-duration")||"0"),Yt=parseFloat(Pt.getPropertyValue("transition-duration")||"0");return Rt>0||Yt>0},nn=function(Ct){var Pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Rt=Wr();Rt&&bn(Rt)&&(Pt&&(Rt.style.transition="none",Rt.style.width="100%"),setTimeout(function(){Rt.style.transition="width ".concat(Ct/1e3,"s linear"),Rt.style.width="0%"},10))},on=function(){var Ct=Wr();if(Ct){var Pt=parseInt(window.getComputedStyle(Ct).width);Ct.style.removeProperty("transition"),Ct.style.width="100%";var Rt=parseInt(window.getComputedStyle(Ct).width),Yt=Pt/Rt*100;Ct.style.width="".concat(Yt,"%")}},cn=function(){return typeof window>"u"||typeof document>"u"},yn=`
 <div aria-labelledby="`.concat(Zt.title,'" aria-describedby="').concat(Zt["html-container"],'" class="').concat(Zt.popup,`" tabindex="-1">
   <button type="button" class="`).concat(Zt.close,`"></button>
   <ul class="`).concat(Zt["progress-steps"],`"></ul>
   <div class="`).concat(Zt.icon,`"></div>
   <img class="`).concat(Zt.image,`" />
   <h2 class="`).concat(Zt.title,'" id="').concat(Zt.title,`"></h2>
   <div class="`).concat(Zt["html-container"],'" id="').concat(Zt["html-container"],`"></div>
   <input class="`).concat(Zt.input,'" id="').concat(Zt.input,`" />
   <input type="file" class="`).concat(Zt.file,`" />
   <div class="`).concat(Zt.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(Zt.select,'" id="').concat(Zt.select,`"></select>
   <div class="`).concat(Zt.radio,`"></div>
   <label class="`).concat(Zt.checkbox,`">
     <input type="checkbox" id="`).concat(Zt.checkbox,`" />
     <span class="`).concat(Zt.label,`"></span>
   </label>
   <textarea class="`).concat(Zt.textarea,'" id="').concat(Zt.textarea,`"></textarea>
   <div class="`).concat(Zt["validation-message"],'" id="').concat(Zt["validation-message"],`"></div>
   <div class="`).concat(Zt.actions,`">
     <div class="`).concat(Zt.loader,`"></div>
     <button type="button" class="`).concat(Zt.confirm,`"></button>
     <button type="button" class="`).concat(Zt.deny,`"></button>
     <button type="button" class="`).concat(Zt.cancel,`"></button>
   </div>
   <div class="`).concat(Zt.footer,`"></div>
   <div class="`).concat(Zt["timer-progress-bar-container"],`">
     <div class="`).concat(Zt["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),_n=function(){var Ct=ar();return Ct?(Ct.remove(),Ir([document.documentElement,document.body],[Zt["no-backdrop"],Zt["toast-shown"],Zt["has-column"]]),!0):!1},vn=function(){Kt.currentInstance.resetValidationMessage()},Ln=function(){var Ct=Hn(),Pt=en(Ct,Zt.input),Rt=en(Ct,Zt.file),Yt=Ct.querySelector(".".concat(Zt.range," input")),pn=Ct.querySelector(".".concat(Zt.range," output")),Tn=en(Ct,Zt.select),Jn=Ct.querySelector(".".concat(Zt.checkbox," input")),Wn=en(Ct,Zt.textarea);Pt.oninput=vn,Rt.onchange=vn,Tn.onchange=vn,Jn.onchange=vn,Wn.oninput=vn,Yt.oninput=function(){vn(),pn.value=Yt.value},Yt.onchange=function(){vn(),pn.value=Yt.value}},Zn=function(Ct){return typeof Ct=="string"?document.querySelector(Ct):Ct},gr=function(Ct){var Pt=Hn();Pt.setAttribute("role",Ct.toast?"alert":"dialog"),Pt.setAttribute("aria-live",Ct.toast?"polite":"assertive"),Ct.toast||Pt.setAttribute("aria-modal","true")},fr=function(Ct){window.getComputedStyle(Ct).direction==="rtl"&&Qn(ar(),Zt.rtl)},dn=function(Ct){var Pt=_n();if(cn()){qn("SweetAlert2 requires document to initialize");return}var Rt=document.createElement("div");Rt.className=Zt.container,Pt&&Qn(Rt,Zt["no-transition"]),On(Rt,yn);var Yt=Zn(Ct.target);Yt.appendChild(Rt),gr(Ct),fr(Yt),Ln()},Nn=function(Ct,Pt){Ct instanceof HTMLElement?Pt.appendChild(Ct):Lt(Ct)==="object"?sr(Ct,Pt):Ct&&On(Pt,Ct)},sr=function(Ct,Pt){Ct.jquery?Ar(Pt,Ct):On(Pt,Ct.toString())},Ar=function(Ct,Pt){if(Ct.textContent="",0 in Pt)for(var Rt=0;Rt in Pt;Rt++)Ct.appendChild(Pt[Rt].cloneNode(!0));else Ct.appendChild(Pt.cloneNode(!0))},_r=function(){if(cn())return!1;var $t=document.createElement("div");return typeof $t.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof $t.style.animation<"u"?"animationend":!1}(),jn=function(Ct,Pt){var Rt=In(),Yt=xr();!Rt||!Yt||(!Pt.showConfirmButton&&!Pt.showDenyButton&&!Pt.showCancelButton?mn(Rt):un(Rt),Er(Rt,Pt,"actions"),pr(Rt,Yt,Pt),On(Yt,Pt.loaderHtml||""),Er(Yt,Pt,"loader"))};function pr($t,Ct,Pt){var Rt=lr(),Yt=Or(),pn=Nr();!Rt||!Yt||!pn||(Un(Rt,"confirm",Pt),Un(Yt,"deny",Pt),Un(pn,"cancel",Pt),Rr(Rt,Yt,pn,Pt),Pt.reverseButtons&&(Pt.toast?($t.insertBefore(pn,Rt),$t.insertBefore(Yt,Rt)):($t.insertBefore(pn,Ct),$t.insertBefore(Yt,Ct),$t.insertBefore(Rt,Ct))))}function Rr($t,Ct,Pt,Rt){if(!Rt.buttonsStyling){Ir([$t,Ct,Pt],Zt.styled);return}Qn([$t,Ct,Pt],Zt.styled),Rt.confirmButtonColor&&($t.style.backgroundColor=Rt.confirmButtonColor,Qn($t,Zt["default-outline"])),Rt.denyButtonColor&&(Ct.style.backgroundColor=Rt.denyButtonColor,Qn(Ct,Zt["default-outline"])),Rt.cancelButtonColor&&(Pt.style.backgroundColor=Rt.cancelButtonColor,Qn(Pt,Zt["default-outline"]))}function Un($t,Ct,Pt){var Rt=Fn(Ct);Pn($t,Pt["show".concat(Rt,"Button")],"inline-block"),On($t,Pt["".concat(Ct,"ButtonText")]||""),$t.setAttribute("aria-label",Pt["".concat(Ct,"ButtonAriaLabel")]||""),$t.className=Zt[Ct],Er($t,Pt,"".concat(Ct,"Button"))}var $r=function(Ct,Pt){var Rt=Jr();Rt&&(On(Rt,Pt.closeButtonHtml||""),Er(Rt,Pt,"closeButton"),Pn(Rt,Pt.showCloseButton),Rt.setAttribute("aria-label",Pt.closeButtonAriaLabel||""))},so=function(Ct,Pt){var Rt=ar();Rt&&(uo(Rt,Pt.backdrop),To(Rt,Pt.position),Go(Rt,Pt.grow),Er(Rt,Pt,"container"))};function uo($t,Ct){typeof Ct=="string"?$t.style.background=Ct:Ct||Qn([document.documentElement,document.body],Zt["no-backdrop"])}function To($t,Ct){Ct&&(Ct in Zt?Qn($t,Zt[Ct]):(Vn('The "position" parameter is not valid, defaulting to "center"'),Qn($t,Zt.center)))}function Go($t,Ct){Ct&&Qn($t,Zt["grow-".concat(Ct)])}var mr={innerParams:new WeakMap,domCache:new WeakMap},co=["input","file","range","select","radio","checkbox","textarea"],go=function(Ct,Pt){var Rt=Hn();if(Rt){var Yt=mr.innerParams.get(Ct),pn=!Yt||Pt.input!==Yt.input;co.forEach(function(Tn){var Jn=en(Rt,Zt[Tn]);Jn&&(Mo(Tn,Pt.inputAttributes),Jn.className=Zt[Tn],pn&&mn(Jn))}),Pt.input&&(pn&&ko(Pt),Co(Pt))}},ko=function(Ct){if(Ct.input){if(!yr[Ct.input]){qn("Unexpected type of input! Expected ".concat(Object.keys(yr).join(" | "),', got "').concat(Ct.input,'"'));return}var Pt=yo(Ct.input);if(Pt){var Rt=yr[Ct.input](Pt,Ct);un(Pt),Ct.inputAutoFocus&&setTimeout(function(){qr(Rt)})}}},Eo=function(Ct){for(var Pt=0;Pt<Ct.attributes.length;Pt++){var Rt=Ct.attributes[Pt].name;["id","type","value","style"].includes(Rt)||Ct.removeAttribute(Rt)}},Mo=function(Ct,Pt){var Rt=Hn();if(Rt){var Yt=Lr(Rt,Ct);if(Yt){Eo(Yt);for(var pn in Pt)Yt.setAttribute(pn,Pt[pn])}}},Co=function(Ct){if(Ct.input){var Pt=yo(Ct.input);Pt&&Er(Pt,Ct,"input")}},eo=function(Ct,Pt){!Ct.placeholder&&Pt.inputPlaceholder&&(Ct.placeholder=Pt.inputPlaceholder)},no=function(Ct,Pt,Rt){if(Rt.inputLabel){var Yt=document.createElement("label"),pn=Zt["input-label"];Yt.setAttribute("for",Ct.id),Yt.className=pn,Lt(Rt.customClass)==="object"&&Qn(Yt,Rt.customClass.inputLabel),Yt.innerText=Rt.inputLabel,Pt.insertAdjacentElement("beforebegin",Yt)}},yo=function(Ct){var Pt=Hn();if(Pt)return en(Pt,Zt[Ct]||Zt.input)},ro=function(Ct,Pt){["string","number"].includes(Lt(Pt))?Ct.value="".concat(Pt):Sr(Pt)||Vn('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(Lt(Pt),'"'))},yr={};yr.text=yr.email=yr.password=yr.number=yr.tel=yr.url=yr.search=yr.date=yr["datetime-local"]=yr.time=yr.week=yr.month=function($t,Ct){return ro($t,Ct.inputValue),no($t,$t,Ct),eo($t,Ct),$t.type=Ct.input,$t},yr.file=function($t,Ct){return no($t,$t,Ct),eo($t,Ct),$t},yr.range=function($t,Ct){var Pt=$t.querySelector("input"),Rt=$t.querySelector("output");return ro(Pt,Ct.inputValue),Pt.type=Ct.input,ro(Rt,Ct.inputValue),no(Pt,$t,Ct),$t},yr.select=function($t,Ct){if($t.textContent="",Ct.inputPlaceholder){var Pt=document.createElement("option");On(Pt,Ct.inputPlaceholder),Pt.value="",Pt.disabled=!0,Pt.selected=!0,$t.appendChild(Pt)}return no($t,$t,Ct),$t},yr.radio=function($t){return $t.textContent="",$t},yr.checkbox=function($t,Ct){var Pt=Lr(Hn(),"checkbox");Pt.value="1",Pt.checked=!!Ct.inputValue;var Rt=$t.querySelector("span");return On(Rt,Ct.inputPlaceholder),Pt},yr.textarea=function($t,Ct){ro($t,Ct.inputValue),eo($t,Ct),no($t,$t,Ct);var Pt=function(Yt){return parseInt(window.getComputedStyle(Yt).marginLeft)+parseInt(window.getComputedStyle(Yt).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var Rt=parseInt(window.getComputedStyle(Hn()).width),Yt=function(){if(document.body.contains($t)){var Tn=$t.offsetWidth+Pt($t);Tn>Rt?Hn().style.width="".concat(Tn,"px"):rn(Hn(),"width",Ct.width)}};new MutationObserver(Yt).observe($t,{attributes:!0,attributeFilter:["style"]})}}),$t};var er=function(Ct,Pt){var Rt=zn();Rt&&(Sn(Rt),Er(Rt,Pt,"htmlContainer"),Pt.html?(Nn(Pt.html,Rt),un(Rt,"block")):Pt.text?(Rt.textContent=Pt.text,un(Rt,"block")):mn(Rt),go(Ct,Pt))},Oo=function(Ct,Pt){var Rt=Br();Rt&&(Sn(Rt),Pn(Rt,Pt.footer,"block"),Pt.footer&&Nn(Pt.footer,Rt),Er(Rt,Pt,"footer"))},Yn=function(Ct,Pt){var Rt=mr.innerParams.get(Ct),Yt=or();if(Yt){if(Rt&&Pt.icon===Rt.icon){vo(Yt,Pt),Gn(Yt,Pt);return}if(!Pt.icon&&!Pt.iconHtml){mn(Yt);return}if(Pt.icon&&Object.keys(En).indexOf(Pt.icon)===-1){qn('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(Pt.icon,'"')),mn(Yt);return}un(Yt),vo(Yt,Pt),Gn(Yt,Pt),Qn(Yt,Pt.showClass&&Pt.showClass.icon)}},Gn=function(Ct,Pt){for(var Rt=0,Yt=Object.entries(En);Rt<Yt.length;Rt++){var pn=jt(Yt[Rt],2),Tn=pn[0],Jn=pn[1];Pt.icon!==Tn&&Ir(Ct,Jn)}Qn(Ct,Pt.icon&&En[Pt.icon]),Po(Ct,Pt),bo(),Er(Ct,Pt,"icon")},bo=function(){var Ct=Hn();if(Ct)for(var Pt=window.getComputedStyle(Ct).getPropertyValue("background-color"),Rt=Ct.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Yt=0;Yt<Rt.length;Yt++)Rt[Yt].style.backgroundColor=Pt},ho=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Ao=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,vo=function(Ct,Pt){if(!(!Pt.icon&&!Pt.iconHtml)){var Rt=Ct.innerHTML,Yt="";if(Pt.iconHtml)Yt=xo(Pt.iconHtml);else if(Pt.icon==="success")Yt=ho,Rt=Rt.replace(/ style=".*?"/g,"");else if(Pt.icon==="error")Yt=Ao;else if(Pt.icon){var pn={question:"?",warning:"!",info:"i"};Yt=xo(pn[Pt.icon])}Rt.trim()!==Yt.trim()&&On(Ct,Yt)}},Po=function(Ct,Pt){if(Pt.iconColor){Ct.style.color=Pt.iconColor,Ct.style.borderColor=Pt.iconColor;for(var Rt=0,Yt=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];Rt<Yt.length;Rt++){var pn=Yt[Rt];Mn(Ct,pn,"background-color",Pt.iconColor)}Mn(Ct,".swal2-success-ring","border-color",Pt.iconColor)}},xo=function(Ct){return'<div class="'.concat(Zt["icon-content"],'">').concat(Ct,"</div>")},Do=function(Ct,Pt){var Rt=Yr();if(Rt){if(!Pt.imageUrl){mn(Rt);return}un(Rt,""),Rt.setAttribute("src",Pt.imageUrl),Rt.setAttribute("alt",Pt.imageAlt||""),rn(Rt,"width",Pt.imageWidth),rn(Rt,"height",Pt.imageHeight),Rt.className=Zt.image,Er(Rt,Pt,"image")}},Io=function(Ct,Pt){var Rt=ar(),Yt=Hn();if(!(!Rt||!Yt)){if(Pt.toast){rn(Rt,"width",Pt.width),Yt.style.width="100%";var pn=xr();pn&&Yt.insertBefore(pn,or())}else rn(Yt,"width",Pt.width);rn(Yt,"padding",Pt.padding),Pt.color&&(Yt.style.color=Pt.color),Pt.background&&(Yt.style.background=Pt.background),mn(Dr()),Ro(Yt,Pt)}},Ro=function(Ct,Pt){var Rt=Pt.showClass||{};Ct.className="".concat(Zt.popup," ").concat(bn(Ct)?Rt.popup:""),Pt.toast?(Qn([document.documentElement,document.body],Zt["toast-shown"]),Qn(Ct,Zt.toast)):Qn(Ct,Zt.modal),Er(Ct,Pt,"popup"),typeof Pt.customClass=="string"&&Qn(Ct,Pt.customClass),Pt.icon&&Qn(Ct,Zt["icon-".concat(Pt.icon)])},No=function(Ct,Pt){var Rt=Fr();if(Rt){var Yt=Pt.progressSteps,pn=Pt.currentProgressStep;if(!Yt||Yt.length===0||pn===void 0){mn(Rt);return}un(Rt),Rt.textContent="",pn>=Yt.length&&Vn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Yt.forEach(function(Tn,Jn){var Wn=$o(Tn);if(Rt.appendChild(Wn),Jn===pn&&Qn(Wn,Zt["active-progress-step"]),Jn!==Yt.length-1){var Tr=Lo(Pt);Rt.appendChild(Tr)}})}},$o=function(Ct){var Pt=document.createElement("li");return Qn(Pt,Zt["progress-step"]),On(Pt,Ct),Pt},Lo=function(Ct){var Pt=document.createElement("li");return Qn(Pt,Zt["progress-step-line"]),Ct.progressStepsDistance&&rn(Pt,"width",Ct.progressStepsDistance),Pt},Fo=function(Ct,Pt){var Rt=Cr();Rt&&(Sn(Rt),Pn(Rt,Pt.title||Pt.titleText,"block"),Pt.title&&Nn(Pt.title,Rt),Pt.titleText&&(Rt.innerText=Pt.titleText),Er(Rt,Pt,"title"))},wo=function(Ct,Pt){Io(Ct,Pt),so(Ct,Pt),No(Ct,Pt),Yn(Ct,Pt),Do(Ct,Pt),Fo(Ct,Pt),$r(Ct,Pt),er(Ct,Pt),jn(Ct,Pt),Oo(Ct,Pt);var Rt=Hn();typeof Pt.didRender=="function"&&Rt&&Pt.didRender(Rt)},Nt=function(){return bn(Hn())},Vt=function(){var Ct;return(Ct=lr())===null||Ct===void 0?void 0:Ct.click()},Gt=function(){var Ct;return(Ct=Or())===null||Ct===void 0?void 0:Ct.click()},Qt=function(){var Ct;return(Ct=Nr())===null||Ct===void 0?void 0:Ct.click()},sn=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),fn=function(Ct){Ct.keydownTarget&&Ct.keydownHandlerAdded&&(Ct.keydownTarget.removeEventListener("keydown",Ct.keydownHandler,{capture:Ct.keydownListenerCapture}),Ct.keydownHandlerAdded=!1)},wn=function(Ct,Pt,Rt){fn(Ct),Pt.toast||(Ct.keydownHandler=function(Yt){return br(Pt,Yt,Rt)},Ct.keydownTarget=Pt.keydownListenerCapture?window:Hn(),Ct.keydownListenerCapture=Pt.keydownListenerCapture,Ct.keydownTarget.addEventListener("keydown",Ct.keydownHandler,{capture:Ct.keydownListenerCapture}),Ct.keydownHandlerAdded=!0)},An=function(Ct,Pt){var Rt,Yt=Kn();if(Yt.length){Ct=Ct+Pt,Ct===Yt.length?Ct=0:Ct===-1&&(Ct=Yt.length-1),Yt[Ct].focus();return}(Rt=Hn())===null||Rt===void 0||Rt.focus()},Xn=["ArrowRight","ArrowDown"],nr=["ArrowLeft","ArrowUp"],br=function(Ct,Pt,Rt){Ct&&(Pt.isComposing||Pt.keyCode===229||(Ct.stopKeydownPropagation&&Pt.stopPropagation(),Pt.key==="Enter"?Kr(Pt,Ct):Pt.key==="Tab"?Ur(Pt):[].concat(Xn,nr).includes(Pt.key)?gn(Pt.key):Pt.key==="Escape"&&rr(Pt,Ct,Rt)))},Kr=function(Ct,Pt){if(tr(Pt.allowEnterKey)){var Rt=Lr(Hn(),Pt.input);if(Ct.target&&Rt&&Ct.target instanceof HTMLElement&&Ct.target.outerHTML===Rt.outerHTML){if(["textarea","file"].includes(Pt.input))return;Vt(),Ct.preventDefault()}}},Ur=function(Ct){for(var Pt=Ct.target,Rt=Kn(),Yt=-1,pn=0;pn<Rt.length;pn++)if(Pt===Rt[pn]){Yt=pn;break}Ct.shiftKey?An(Yt,-1):An(Yt,1),Ct.stopPropagation(),Ct.preventDefault()},gn=function(Ct){var Pt=In(),Rt=lr(),Yt=Or(),pn=Nr();if(!(!Pt||!Rt||!Yt||!pn)){var Tn=[Rt,Yt,pn];if(!(document.activeElement instanceof HTMLElement&&!Tn.includes(document.activeElement))){var Jn=Xn.includes(Ct)?"nextElementSibling":"previousElementSibling",Wn=document.activeElement;if(Wn){for(var Tr=0;Tr<Pt.children.length;Tr++){if(Wn=Wn[Jn],!Wn)return;if(Wn instanceof HTMLButtonElement&&bn(Wn))break}Wn instanceof HTMLButtonElement&&Wn.focus()}}}},rr=function(Ct,Pt,Rt){tr(Pt.allowEscapeKey)&&(Ct.preventDefault(),Rt(sn.esc))},ur={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Xr=function(){var Ct=ar(),Pt=Array.from(document.body.children);Pt.forEach(function(Rt){Rt.contains(Ct)||(Rt.hasAttribute("aria-hidden")&&Rt.setAttribute("data-previous-aria-hidden",Rt.getAttribute("aria-hidden")||""),Rt.setAttribute("aria-hidden","true"))})},Zr=function(){var Ct=Array.from(document.body.children);Ct.forEach(function(Pt){Pt.hasAttribute("data-previous-aria-hidden")?(Pt.setAttribute("aria-hidden",Pt.getAttribute("data-previous-aria-hidden")||""),Pt.removeAttribute("data-previous-aria-hidden")):Pt.removeAttribute("aria-hidden")})},ns=typeof window<"u"&&!!window.GestureEvent,Bs=function(){if(ns&&!Dn(document.body,Zt.iosfix)){var Ct=document.body.scrollTop;document.body.style.top="".concat(Ct*-1,"px"),Qn(document.body,Zt.iosfix),zs()}},zs=function(){var Ct=ar();if(Ct){var Pt;Ct.ontouchstart=function(Rt){Pt=js(Rt)},Ct.ontouchmove=function(Rt){Pt&&(Rt.preventDefault(),Rt.stopPropagation())}}},js=function(Ct){var Pt=Ct.target,Rt=ar(),Yt=zn();return!Rt||!Yt||Vs(Ct)||Hs(Ct)?!1:Pt===Rt||!Ht(Rt)&&Pt instanceof HTMLElement&&Pt.tagName!=="INPUT"&&Pt.tagName!=="TEXTAREA"&&!(Ht(Yt)&&Yt.contains(Pt))},Vs=function(Ct){return Ct.touches&&Ct.touches.length&&Ct.touches[0].touchType==="stylus"},Hs=function(Ct){return Ct.touches&&Ct.touches.length>1},Us=function(){if(Dn(document.body,Zt.iosfix)){var Ct=parseInt(document.body.style.top,10);Ir(document.body,Zt.iosfix),document.body.style.top="",document.body.scrollTop=Ct*-1}},Gs=function(){var Ct=document.createElement("div");Ct.className=Zt["scrollbar-measure"],document.body.appendChild(Ct);var Pt=Ct.getBoundingClientRect().width-Ct.clientWidth;return document.body.removeChild(Ct),Pt},fo=null,Ws=function(Ct){fo===null&&(document.body.scrollHeight>window.innerHeight||Ct==="scroll")&&(fo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(fo+Gs(),"px"))},qs=function(){fo!==null&&(document.body.style.paddingRight="".concat(fo,"px"),fo=null)};function rs($t,Ct,Pt,Rt){Vr()?ss($t,Rt):(ln(Pt).then(function(){return ss($t,Rt)}),fn(Kt)),ns?(Ct.setAttribute("style","display:none !important"),Ct.removeAttribute("class"),Ct.innerHTML=""):Ct.remove(),jr()&&(qs(),Us(),Zr()),Ks()}function Ks(){Ir([document.documentElement,document.body],[Zt.shown,Zt["height-auto"],Zt["no-backdrop"],Zt["toast-shown"]])}function io($t){$t=Xs($t);var Ct=ur.swalPromiseResolve.get(this),Pt=Ys(this);this.isAwaitingPromise?$t.isDismissed||(So(this),Ct($t)):Pt&&Ct($t)}var Ys=function(Ct){var Pt=Hn();if(!Pt)return!1;var Rt=mr.innerParams.get(Ct);if(!Rt||Dn(Pt,Rt.hideClass.popup))return!1;Ir(Pt,Rt.showClass.popup),Qn(Pt,Rt.hideClass.popup);var Yt=ar();return Ir(Yt,Rt.showClass.backdrop),Qn(Yt,Rt.hideClass.backdrop),Js(Ct,Pt,Rt),!0};function is($t){var Ct=ur.swalPromiseReject.get(this);So(this),Ct&&Ct($t)}var So=function(Ct){Ct.isAwaitingPromise&&(delete Ct.isAwaitingPromise,mr.innerParams.get(Ct)||Ct._destroy())},Xs=function(Ct){return typeof Ct>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},Ct)},Js=function(Ct,Pt,Rt){var Yt=ar(),pn=_r&&Xt(Pt);typeof Rt.willClose=="function"&&Rt.willClose(Pt),pn?Qs(Ct,Pt,Yt,Rt.returnFocus,Rt.didClose):rs(Ct,Yt,Rt.returnFocus,Rt.didClose)},Qs=function(Ct,Pt,Rt,Yt,pn){_r&&(Kt.swalCloseEventFinishedCallback=rs.bind(null,Ct,Rt,Yt,pn),Pt.addEventListener(_r,function(Tn){Tn.target===Pt&&(Kt.swalCloseEventFinishedCallback(),delete Kt.swalCloseEventFinishedCallback)}))},ss=function(Ct,Pt){setTimeout(function(){typeof Pt=="function"&&Pt.bind(Ct.params)(),Ct._destroy&&Ct._destroy()})},po=function(Ct){var Pt=Hn();if(Pt||new Ho,Pt=Hn(),!!Pt){var Rt=xr();Vr()?mn(or()):Zs(Pt,Ct),un(Rt),Pt.setAttribute("data-loading","true"),Pt.setAttribute("aria-busy","true"),Pt.focus()}},Zs=function(Ct,Pt){var Rt=In(),Yt=xr();!Rt||!Yt||(!Pt&&bn(lr())&&(Pt=lr()),un(Rt),Pt&&(mn(Pt),Yt.setAttribute("data-button-to-replace",Pt.className),Rt.insertBefore(Yt,Pt)),Qn([Ct,Rt],Zt.loading))},na=function(Ct,Pt){Pt.input==="select"||Pt.input==="radio"?$a(Ct,Pt):["text","email","number","tel","textarea"].some(function(Rt){return Rt===Pt.input})&&(wr(Pt.inputValue)||Sr(Pt.inputValue))&&(po(lr()),yl(Ct,Pt))},ga=function(Ct,Pt){var Rt=Ct.getInput();if(!Rt)return null;switch(Pt.input){case"checkbox":return ba(Rt);case"radio":return xa(Rt);case"file":return _a(Rt);default:return Pt.inputAutoTrim?Rt.value.trim():Rt.value}},ba=function(Ct){return Ct.checked?1:0},xa=function(Ct){return Ct.checked?Ct.value:null},_a=function(Ct){return Ct.files&&Ct.files.length?Ct.getAttribute("multiple")!==null?Ct.files:Ct.files[0]:null},$a=function(Ct,Pt){var Rt=Hn();if(Rt){var Yt=function(Tn){Pt.input==="select"?xl(Rt,as(Tn),Pt):Pt.input==="radio"&&wl(Rt,as(Tn),Pt)};wr(Pt.inputOptions)||Sr(Pt.inputOptions)?(po(lr()),dr(Pt.inputOptions).then(function(pn){Ct.hideLoading(),Yt(pn)})):Lt(Pt.inputOptions)==="object"?Yt(Pt.inputOptions):qn("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(Lt(Pt.inputOptions)))}},yl=function(Ct,Pt){var Rt=Ct.getInput();Rt&&(mn(Rt),dr(Pt.inputValue).then(function(Yt){Rt.value=Pt.input==="number"?"".concat(parseFloat(Yt)||0):"".concat(Yt),un(Rt),Rt.focus(),Ct.hideLoading()}).catch(function(Yt){qn("Error in inputValue promise: ".concat(Yt)),Rt.value="",un(Rt),Rt.focus(),Ct.hideLoading()}))};function xl($t,Ct,Pt){var Rt=en($t,Zt.select);if(Rt){var Yt=function(Tn,Jn,Wn){var Tr=document.createElement("option");Tr.value=Wn,On(Tr,Jn),Tr.selected=ls(Wn,Pt.inputValue),Tn.appendChild(Tr)};Ct.forEach(function(pn){var Tn=pn[0],Jn=pn[1];if(Array.isArray(Jn)){var Wn=document.createElement("optgroup");Wn.label=Tn,Wn.disabled=!1,Rt.appendChild(Wn),Jn.forEach(function(Tr){return Yt(Wn,Tr[1],Tr[0])})}else Yt(Rt,Jn,Tn)}),Rt.focus()}}function wl($t,Ct,Pt){var Rt=en($t,Zt.radio);if(Rt){Ct.forEach(function(pn){var Tn=pn[0],Jn=pn[1],Wn=document.createElement("input"),Tr=document.createElement("label");Wn.type="radio",Wn.name=Zt.radio,Wn.value=Tn,ls(Tn,Pt.inputValue)&&(Wn.checked=!0);var _o=document.createElement("span");On(_o,Jn),_o.className=Zt.label,Tr.appendChild(Wn),Tr.appendChild(_o),Rt.appendChild(Tr)});var Yt=Rt.querySelectorAll("input");Yt.length&&Yt[0].focus()}}var as=function $t(Ct){var Pt=[];return Ct instanceof Map?Ct.forEach(function(Rt,Yt){var pn=Rt;Lt(pn)==="object"&&(pn=$t(pn)),Pt.push([Yt,pn])}):Object.keys(Ct).forEach(function(Rt){var Yt=Ct[Rt];Lt(Yt)==="object"&&(Yt=$t(Yt)),Pt.push([Rt,Yt])}),Pt},ls=function(Ct,Pt){return!!Pt&&Pt.toString()===Ct.toString()},Bo=void 0,Sl=function(Ct){var Pt=mr.innerParams.get(Ct);Ct.disableButtons(),Pt.input?us(Ct,"confirm"):qo(Ct,!0)},_l=function(Ct){var Pt=mr.innerParams.get(Ct);Ct.disableButtons(),Pt.returnInputValueOnDeny?us(Ct,"deny"):Wo(Ct,!1)},Tl=function(Ct,Pt){Ct.disableButtons(),Pt(sn.cancel)},us=function(Ct,Pt){var Rt=mr.innerParams.get(Ct);if(!Rt.input){qn('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Fn(Pt)));return}var Yt=Ct.getInput(),pn=ga(Ct,Rt);Rt.inputValidator?El(Ct,pn,Pt):Yt&&!Yt.checkValidity()?(Ct.enableButtons(),Ct.showValidationMessage(Rt.validationMessage||Yt.validationMessage)):Pt==="deny"?Wo(Ct,pn):qo(Ct,pn)},El=function(Ct,Pt,Rt){var Yt=mr.innerParams.get(Ct);Ct.disableInput();var pn=Promise.resolve().then(function(){return dr(Yt.inputValidator(Pt,Yt.validationMessage))});pn.then(function(Tn){Ct.enableButtons(),Ct.enableInput(),Tn?Ct.showValidationMessage(Tn):Rt==="deny"?Wo(Ct,Pt):qo(Ct,Pt)})},Wo=function(Ct,Pt){var Rt=mr.innerParams.get(Ct||Bo);if(Rt.showLoaderOnDeny&&po(Or()),Rt.preDeny){Ct.isAwaitingPromise=!0;var Yt=Promise.resolve().then(function(){return dr(Rt.preDeny(Pt,Rt.validationMessage))});Yt.then(function(pn){pn===!1?(Ct.hideLoading(),So(Ct)):Ct.close({isDenied:!0,value:typeof pn>"u"?Pt:pn})}).catch(function(pn){return ds(Ct||Bo,pn)})}else Ct.close({isDenied:!0,value:Pt})},cs=function(Ct,Pt){Ct.close({isConfirmed:!0,value:Pt})},ds=function(Ct,Pt){Ct.rejectPromise(Pt)},qo=function(Ct,Pt){var Rt=mr.innerParams.get(Ct||Bo);if(Rt.showLoaderOnConfirm&&po(),Rt.preConfirm){Ct.resetValidationMessage(),Ct.isAwaitingPromise=!0;var Yt=Promise.resolve().then(function(){return dr(Rt.preConfirm(Pt,Rt.validationMessage))});Yt.then(function(pn){bn(Dr())||pn===!1?(Ct.hideLoading(),So(Ct)):cs(Ct,typeof pn>"u"?Pt:pn)}).catch(function(pn){return ds(Ct||Bo,pn)})}else cs(Ct,Pt)};function zo(){var $t=mr.innerParams.get(this);if($t){var Ct=mr.domCache.get(this);mn(Ct.loader),Vr()?$t.icon&&un(or()):Ml(Ct),Ir([Ct.popup,Ct.actions],Zt.loading),Ct.popup.removeAttribute("aria-busy"),Ct.popup.removeAttribute("data-loading"),Ct.confirmButton.disabled=!1,Ct.denyButton.disabled=!1,Ct.cancelButton.disabled=!1}}var Ml=function(Ct){var Pt=Ct.popup.getElementsByClassName(Ct.loader.getAttribute("data-button-to-replace"));Pt.length?un(Pt[0],"inline-block"):zt()&&mn(Ct.actions)};function hs(){var $t=mr.innerParams.get(this),Ct=mr.domCache.get(this);return Ct?Lr(Ct.popup,$t.input):null}function fs($t,Ct,Pt){var Rt=mr.domCache.get($t);Ct.forEach(function(Yt){Rt[Yt].disabled=Pt})}function ps($t,Ct){var Pt=Hn();if(!(!Pt||!$t))if($t.type==="radio")for(var Rt=Pt.querySelectorAll('[name="'.concat(Zt.radio,'"]')),Yt=0;Yt<Rt.length;Yt++)Rt[Yt].disabled=Ct;else $t.disabled=Ct}function ms(){fs(this,["confirmButton","denyButton","cancelButton"],!1)}function gs(){fs(this,["confirmButton","denyButton","cancelButton"],!0)}function ys(){ps(this.getInput(),!1)}function bs(){ps(this.getInput(),!0)}function vs($t){var Ct=mr.domCache.get(this),Pt=mr.innerParams.get(this);On(Ct.validationMessage,$t),Ct.validationMessage.className=Zt["validation-message"],Pt.customClass&&Pt.customClass.validationMessage&&Qn(Ct.validationMessage,Pt.customClass.validationMessage),un(Ct.validationMessage);var Rt=this.getInput();Rt&&(Rt.setAttribute("aria-invalid","true"),Rt.setAttribute("aria-describedby",Zt["validation-message"]),qr(Rt),Qn(Rt,Zt.inputerror))}function xs(){var $t=mr.domCache.get(this);$t.validationMessage&&mn($t.validationMessage);var Ct=this.getInput();Ct&&(Ct.removeAttribute("aria-invalid"),Ct.removeAttribute("aria-describedby"),Ir(Ct,Zt.inputerror))}var mo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Cl=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Ol={allowEnterKey:void 0},Al=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ws=function(Ct){return Object.prototype.hasOwnProperty.call(mo,Ct)},Ss=function(Ct){return Cl.indexOf(Ct)!==-1},_s=function(Ct){return Ol[Ct]},Pl=function(Ct){ws(Ct)||Vn('Unknown parameter "'.concat(Ct,'"'))},Dl=function(Ct){Al.includes(Ct)&&Vn('The parameter "'.concat(Ct,'" is incompatible with toasts'))},Il=function(Ct){var Pt=_s(Ct);Pt&&ir(Ct,Pt)},Rl=function(Ct){Ct.backdrop===!1&&Ct.allowOutsideClick&&Vn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var Pt in Ct)Pl(Pt),Ct.toast&&Dl(Pt),Il(Pt)};function Ts($t){var Ct=Hn(),Pt=mr.innerParams.get(this);if(!Ct||Dn(Ct,Pt.hideClass.popup)){Vn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var Rt=Nl($t),Yt=Object.assign({},Pt,Rt);wo(this,Yt),mr.innerParams.set(this,Yt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,$t),writable:!1,enumerable:!0}})}var Nl=function(Ct){var Pt={};return Object.keys(Ct).forEach(function(Rt){Ss(Rt)?Pt[Rt]=Ct[Rt]:Vn("Invalid parameter to update: ".concat(Rt))}),Pt};function ks(){var $t=mr.domCache.get(this),Ct=mr.innerParams.get(this);if(!Ct){Es(this);return}$t.popup&&Kt.swalCloseEventFinishedCallback&&(Kt.swalCloseEventFinishedCallback(),delete Kt.swalCloseEventFinishedCallback),typeof Ct.didDestroy=="function"&&Ct.didDestroy(),$l(this)}var $l=function(Ct){Es(Ct),delete Ct.params,delete Kt.keydownHandler,delete Kt.keydownTarget,delete Kt.currentInstance},Es=function(Ct){Ct.isAwaitingPromise?(Ko(mr,Ct),Ct.isAwaitingPromise=!0):(Ko(ur,Ct),Ko(mr,Ct),delete Ct.isAwaitingPromise,delete Ct.disableButtons,delete Ct.enableButtons,delete Ct.getInput,delete Ct.disableInput,delete Ct.enableInput,delete Ct.hideLoading,delete Ct.disableLoading,delete Ct.showValidationMessage,delete Ct.resetValidationMessage,delete Ct.close,delete Ct.closePopup,delete Ct.closeModal,delete Ct.closeToast,delete Ct.rejectPromise,delete Ct.update,delete Ct._destroy)},Ko=function(Ct,Pt){for(var Rt in Ct)Ct[Rt].delete(Pt)},Ll=Object.freeze({__proto__:null,_destroy:ks,close:io,closeModal:io,closePopup:io,closeToast:io,disableButtons:gs,disableInput:bs,disableLoading:zo,enableButtons:ms,enableInput:ys,getInput:hs,handleAwaitingPromise:So,hideLoading:zo,rejectPromise:is,resetValidationMessage:xs,showValidationMessage:vs,update:Ts}),Fl=function(Ct,Pt,Rt){Ct.toast?Bl(Ct,Pt,Rt):(Vl(Pt),Hl(Pt),Ul(Ct,Pt,Rt))},Bl=function(Ct,Pt,Rt){Pt.popup.onclick=function(){Ct&&(zl(Ct)||Ct.timer||Ct.input)||Rt(sn.close)}},zl=function(Ct){return!!(Ct.showConfirmButton||Ct.showDenyButton||Ct.showCancelButton||Ct.showCloseButton)},jo=!1,Vl=function(Ct){Ct.popup.onmousedown=function(){Ct.container.onmouseup=function(Pt){Ct.container.onmouseup=function(){},Pt.target===Ct.container&&(jo=!0)}}},Hl=function(Ct){Ct.container.onmousedown=function(Pt){Pt.target===Ct.container&&Pt.preventDefault(),Ct.popup.onmouseup=function(Rt){Ct.popup.onmouseup=function(){},(Rt.target===Ct.popup||Rt.target instanceof HTMLElement&&Ct.popup.contains(Rt.target))&&(jo=!0)}}},Ul=function(Ct,Pt,Rt){Pt.container.onclick=function(Yt){if(jo){jo=!1;return}Yt.target===Pt.container&&tr(Ct.allowOutsideClick)&&Rt(sn.backdrop)}},Gl=function(Ct){return Lt(Ct)==="object"&&Ct.jquery},Ms=function(Ct){return Ct instanceof Element||Gl(Ct)},Wl=function(Ct){var Pt={};return Lt(Ct[0])==="object"&&!Ms(Ct[0])?Object.assign(Pt,Ct[0]):["title","html","icon"].forEach(function(Rt,Yt){var pn=Ct[Yt];typeof pn=="string"||Ms(pn)?Pt[Rt]=pn:pn!==void 0&&qn("Unexpected type of ".concat(Rt,'! Expected "string" or "Element", got ').concat(Lt(pn)))}),Pt};function Kl(){for(var $t=this,Ct=arguments.length,Pt=new Array(Ct),Rt=0;Rt<Ct;Rt++)Pt[Rt]=arguments[Rt];return bt($t,Pt)}function Yl($t){var Ct=function(Pt){function Rt(){return gt(this,Rt),ht(this,Rt,arguments)}return Tt(Rt,Pt),xt(Rt,[{key:"_main",value:function(pn,Tn){return St(_t(Rt.prototype),"_main",this).call(this,pn,Object.assign({},$t,Tn))}}])}(this);return Ct}var Xl=function(){return Kt.timeout&&Kt.timeout.getTimerLeft()},Cs=function(){if(Kt.timeout)return on(),Kt.timeout.stop()},Os=function(){if(Kt.timeout){var Ct=Kt.timeout.start();return nn(Ct),Ct}},Jl=function(){var Ct=Kt.timeout;return Ct&&(Ct.running?Cs():Os())},Ql=function(Ct){if(Kt.timeout){var Pt=Kt.timeout.increase(Ct);return nn(Pt,!0),Pt}},Zl=function(){return!!(Kt.timeout&&Kt.timeout.isRunning())},As=!1,Yo={};function eu(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Yo[$t]=this,As||(document.body.addEventListener("click",tu),As=!0)}var tu=function(Ct){for(var Pt=Ct.target;Pt&&Pt!==document;Pt=Pt.parentNode)for(var Rt in Yo){var Yt=Pt.getAttribute(Rt);if(Yt){Yo[Rt].fire({template:Yt});return}}},nu=Object.freeze({__proto__:null,argsToParams:Wl,bindClickHandler:eu,clickCancel:Qt,clickConfirm:Vt,clickDeny:Gt,enableLoading:po,fire:Kl,getActions:In,getCancelButton:Nr,getCloseButton:Jr,getConfirmButton:lr,getContainer:ar,getDenyButton:Or,getFocusableElements:Kn,getFooter:Br,getHtmlContainer:zn,getIcon:or,getIconContent:Pr,getImage:Yr,getInputLabel:kr,getLoader:xr,getPopup:Hn,getProgressSteps:Fr,getTimerLeft:Xl,getTimerProgressBar:Wr,getTitle:Cr,getValidationMessage:Dr,increaseTimer:Ql,isDeprecatedParameter:_s,isLoading:Hr,isTimerRunning:Zl,isUpdatableParameter:Ss,isValidParameter:ws,isVisible:Nt,mixin:Yl,resumeTimer:Os,showLoading:po,stopTimer:Cs,toggleTimer:Jl}),ru=function(){function $t(Ct,Pt){gt(this,$t),this.callback=Ct,this.remaining=Pt,this.running=!1,this.start()}return xt($t,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(Pt){var Rt=this.running;return Rt&&this.stop(),this.remaining+=Pt,Rt&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),Ps=["swal-title","swal-html","swal-footer"],iu=function(Ct){var Pt=typeof Ct.template=="string"?document.querySelector(Ct.template):Ct.template;if(!Pt)return{};var Rt=Pt.content;hu(Rt);var Yt=Object.assign(ou(Rt),su(Rt),au(Rt),lu(Rt),uu(Rt),cu(Rt),du(Rt,Ps));return Yt},ou=function(Ct){var Pt={},Rt=Array.from(Ct.querySelectorAll("swal-param"));return Rt.forEach(function(Yt){ao(Yt,["name","value"]);var pn=Yt.getAttribute("name"),Tn=Yt.getAttribute("value");!pn||!Tn||(typeof mo[pn]=="boolean"?Pt[pn]=Tn!=="false":Lt(mo[pn])==="object"?Pt[pn]=JSON.parse(Tn):Pt[pn]=Tn)}),Pt},su=function(Ct){var Pt={},Rt=Array.from(Ct.querySelectorAll("swal-function-param"));return Rt.forEach(function(Yt){var pn=Yt.getAttribute("name"),Tn=Yt.getAttribute("value");!pn||!Tn||(Pt[pn]=new Function("return ".concat(Tn))())}),Pt},au=function(Ct){var Pt={},Rt=Array.from(Ct.querySelectorAll("swal-button"));return Rt.forEach(function(Yt){ao(Yt,["type","color","aria-label"]);var pn=Yt.getAttribute("type");!pn||!["confirm","cancel","deny"].includes(pn)||(Pt["".concat(pn,"ButtonText")]=Yt.innerHTML,Pt["show".concat(Fn(pn),"Button")]=!0,Yt.hasAttribute("color")&&(Pt["".concat(pn,"ButtonColor")]=Yt.getAttribute("color")),Yt.hasAttribute("aria-label")&&(Pt["".concat(pn,"ButtonAriaLabel")]=Yt.getAttribute("aria-label")))}),Pt},lu=function(Ct){var Pt={},Rt=Ct.querySelector("swal-image");return Rt&&(ao(Rt,["src","width","height","alt"]),Rt.hasAttribute("src")&&(Pt.imageUrl=Rt.getAttribute("src")||void 0),Rt.hasAttribute("width")&&(Pt.imageWidth=Rt.getAttribute("width")||void 0),Rt.hasAttribute("height")&&(Pt.imageHeight=Rt.getAttribute("height")||void 0),Rt.hasAttribute("alt")&&(Pt.imageAlt=Rt.getAttribute("alt")||void 0)),Pt},uu=function(Ct){var Pt={},Rt=Ct.querySelector("swal-icon");return Rt&&(ao(Rt,["type","color"]),Rt.hasAttribute("type")&&(Pt.icon=Rt.getAttribute("type")),Rt.hasAttribute("color")&&(Pt.iconColor=Rt.getAttribute("color")),Pt.iconHtml=Rt.innerHTML),Pt},cu=function(Ct){var Pt={},Rt=Ct.querySelector("swal-input");Rt&&(ao(Rt,["type","label","placeholder","value"]),Pt.input=Rt.getAttribute("type")||"text",Rt.hasAttribute("label")&&(Pt.inputLabel=Rt.getAttribute("label")),Rt.hasAttribute("placeholder")&&(Pt.inputPlaceholder=Rt.getAttribute("placeholder")),Rt.hasAttribute("value")&&(Pt.inputValue=Rt.getAttribute("value")));var Yt=Array.from(Ct.querySelectorAll("swal-input-option"));return Yt.length&&(Pt.inputOptions={},Yt.forEach(function(pn){ao(pn,["value"]);var Tn=pn.getAttribute("value");if(Tn){var Jn=pn.innerHTML;Pt.inputOptions[Tn]=Jn}})),Pt},du=function(Ct,Pt){var Rt={};for(var Yt in Pt){var pn=Pt[Yt],Tn=Ct.querySelector(pn);Tn&&(ao(Tn,[]),Rt[pn.replace(/^swal-/,"")]=Tn.innerHTML.trim())}return Rt},hu=function(Ct){var Pt=Ps.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(Ct.children).forEach(function(Rt){var Yt=Rt.tagName.toLowerCase();Pt.includes(Yt)||Vn("Unrecognized element <".concat(Yt,">"))})},ao=function(Ct,Pt){Array.from(Ct.attributes).forEach(function(Rt){Pt.indexOf(Rt.name)===-1&&Vn(['Unrecognized attribute "'.concat(Rt.name,'" on <').concat(Ct.tagName.toLowerCase(),">."),"".concat(Pt.length?"Allowed attributes are: ".concat(Pt.join(", ")):"To set the value, use HTML within the element.")])})},Ds=10,fu=function(Ct){var Pt=ar(),Rt=Hn();typeof Ct.willOpen=="function"&&Ct.willOpen(Rt);var Yt=window.getComputedStyle(document.body),pn=Yt.overflowY;yu(Pt,Rt,Ct),setTimeout(function(){mu(Pt,Rt)},Ds),jr()&&(gu(Pt,Ct.scrollbarPadding,pn),Xr()),!Vr()&&!Kt.previousActiveElement&&(Kt.previousActiveElement=document.activeElement),typeof Ct.didOpen=="function"&&setTimeout(function(){return Ct.didOpen(Rt)}),Ir(Pt,Zt["no-transition"])},pu=function $t(Ct){var Pt=Hn();if(!(Ct.target!==Pt||!_r)){var Rt=ar();Pt.removeEventListener(_r,$t),Rt.style.overflowY="auto"}},mu=function(Ct,Pt){_r&&Xt(Pt)?(Ct.style.overflowY="hidden",Pt.addEventListener(_r,pu)):Ct.style.overflowY="auto"},gu=function(Ct,Pt,Rt){Bs(),Pt&&Rt!=="hidden"&&Ws(Rt),setTimeout(function(){Ct.scrollTop=0})},yu=function(Ct,Pt,Rt){Qn(Ct,Rt.showClass.backdrop),Rt.animation?(Pt.style.setProperty("opacity","0","important"),un(Pt,"grid"),setTimeout(function(){Qn(Pt,Rt.showClass.popup),Pt.style.removeProperty("opacity")},Ds)):un(Pt,"grid"),Qn([document.documentElement,document.body],Zt.shown),Rt.heightAuto&&Rt.backdrop&&!Rt.toast&&Qn([document.documentElement,document.body],Zt["height-auto"])},Is={email:function(Ct,Pt){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(Ct)?Promise.resolve():Promise.resolve(Pt||"Invalid email address")},url:function(Ct,Pt){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(Ct)?Promise.resolve():Promise.resolve(Pt||"Invalid URL")}};function bu($t){$t.inputValidator||($t.input==="email"&&($t.inputValidator=Is.email),$t.input==="url"&&($t.inputValidator=Is.url))}function vu($t){(!$t.target||typeof $t.target=="string"&&!document.querySelector($t.target)||typeof $t.target!="string"&&!$t.target.appendChild)&&(Vn('Target parameter is not valid, defaulting to "body"'),$t.target="body")}function xu($t){bu($t),$t.showLoaderOnConfirm&&!$t.preConfirm&&Vn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),vu($t),typeof $t.title=="string"&&($t.title=$t.title.split(`
`).join("<br />")),dn($t)}var Qr,Vo=new WeakMap,Mr=function(){function $t(){if(gt(this,$t),ft(this,Vo,void 0),!(typeof window>"u")){Qr=this;for(var Ct=arguments.length,Pt=new Array(Ct),Rt=0;Rt<Ct;Rt++)Pt[Rt]=arguments[Rt];var Yt=Object.freeze(this.constructor.argsToParams(Pt));this.params=Yt,this.isAwaitingPromise=!1,st(Vo,this,this._main(Qr.params))}}return xt($t,[{key:"_main",value:function(Pt){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Rl(Object.assign({},Rt,Pt)),Kt.currentInstance){var Yt=ur.swalPromiseResolve.get(Kt.currentInstance),pn=Kt.currentInstance.isAwaitingPromise;Kt.currentInstance._destroy(),pn||Yt({isDismissed:!0}),jr()&&Zr()}Kt.currentInstance=Qr;var Tn=Su(Pt,Rt);xu(Tn),Object.freeze(Tn),Kt.timeout&&(Kt.timeout.stop(),delete Kt.timeout),clearTimeout(Kt.restoreFocusTimeout);var Jn=_u(Qr);return wo(Qr,Tn),mr.innerParams.set(Qr,Tn),wu(Qr,Jn,Tn)}},{key:"then",value:function(Pt){return yt(Vo,this).then(Pt)}},{key:"finally",value:function(Pt){return yt(Vo,this).finally(Pt)}}])}(),wu=function(Ct,Pt,Rt){return new Promise(function(Yt,pn){var Tn=function(Wn){Ct.close({isDismissed:!0,dismiss:Wn})};ur.swalPromiseResolve.set(Ct,Yt),ur.swalPromiseReject.set(Ct,pn),Pt.confirmButton.onclick=function(){Sl(Ct)},Pt.denyButton.onclick=function(){_l(Ct)},Pt.cancelButton.onclick=function(){Tl(Ct,Tn)},Pt.closeButton.onclick=function(){Tn(sn.close)},Fl(Rt,Pt,Tn),wn(Kt,Rt,Tn),na(Ct,Rt),fu(Rt),Tu(Kt,Rt,Tn),ku(Pt,Rt),setTimeout(function(){Pt.container.scrollTop=0})})},Su=function(Ct,Pt){var Rt=iu(Ct),Yt=Object.assign({},mo,Pt,Rt,Ct);return Yt.showClass=Object.assign({},mo.showClass,Yt.showClass),Yt.hideClass=Object.assign({},mo.hideClass,Yt.hideClass),Yt.animation===!1&&(Yt.showClass={backdrop:"swal2-noanimation"},Yt.hideClass={}),Yt},_u=function(Ct){var Pt={popup:Hn(),container:ar(),actions:In(),confirmButton:lr(),denyButton:Or(),cancelButton:Nr(),loader:xr(),closeButton:Jr(),validationMessage:Dr(),progressSteps:Fr()};return mr.domCache.set(Ct,Pt),Pt},Tu=function(Ct,Pt,Rt){var Yt=Wr();mn(Yt),Pt.timer&&(Ct.timeout=new ru(function(){Rt("timer"),delete Ct.timeout},Pt.timer),Pt.timerProgressBar&&(un(Yt),Er(Yt,Pt,"timerProgressBar"),setTimeout(function(){Ct.timeout&&Ct.timeout.running&&nn(Pt.timer)})))},ku=function(Ct,Pt){if(!Pt.toast){if(!tr(Pt.allowEnterKey)){ir("allowEnterKey"),Cu();return}Eu(Ct)||Mu(Ct,Pt)||An(-1,1)}},Eu=function(Ct){var Pt=Ct.popup.querySelectorAll("[autofocus]"),Rt=wt(Pt),Yt;try{for(Rt.s();!(Yt=Rt.n()).done;){var pn=Yt.value;if(pn instanceof HTMLElement&&bn(pn))return pn.focus(),!0}}catch(Tn){Rt.e(Tn)}finally{Rt.f()}return!1},Mu=function(Ct,Pt){return Pt.focusDeny&&bn(Ct.denyButton)?(Ct.denyButton.focus(),!0):Pt.focusCancel&&bn(Ct.cancelButton)?(Ct.cancelButton.focus(),!0):Pt.focusConfirm&&bn(Ct.confirmButton)?(Ct.confirmButton.focus(),!0):!1},Cu=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Rs=new Date,Ns=localStorage.getItem("swal-initiation");Ns?(Rs.getTime()-Date.parse(Ns))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var $t=document.createElement("audio");$t.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",$t.loop=!0,document.body.appendChild($t),setTimeout(function(){$t.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Rs))}Mr.prototype.disableButtons=gs,Mr.prototype.enableButtons=ms,Mr.prototype.getInput=hs,Mr.prototype.disableInput=bs,Mr.prototype.enableInput=ys,Mr.prototype.hideLoading=zo,Mr.prototype.disableLoading=zo,Mr.prototype.showValidationMessage=vs,Mr.prototype.resetValidationMessage=xs,Mr.prototype.close=io,Mr.prototype.closePopup=io,Mr.prototype.closeModal=io,Mr.prototype.closeToast=io,Mr.prototype.rejectPromise=is,Mr.prototype.update=Ts,Mr.prototype._destroy=ks,Object.assign(Mr,nu),Object.keys(Ll).forEach(function($t){Mr[$t]=function(){if(Qr&&Qr[$t]){var Ct;return(Ct=Qr)[$t].apply(Ct,arguments)}return null}}),Mr.DismissReason=sn,Mr.version="11.12.3";var Ho=Mr;return Ho.default=Ho,Ho}),typeof commonjsGlobal<"u"&&commonjsGlobal.Sweetalert2&&(commonjsGlobal.swal=commonjsGlobal.sweetAlert=commonjsGlobal.Swal=commonjsGlobal.SweetAlert=commonjsGlobal.Sweetalert2),typeof document<"u"&&function(d,b){var tt=d.createElement("style");if(d.getElementsByTagName("head")[0].appendChild(tt),tt.styleSheet)tt.styleSheet.disabled||(tt.styleSheet.cssText=b);else try{tt.innerHTML=b}catch{tt.innerText=b}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')})(sweetalert2_all);var sweetalert2_allExports=sweetalert2_all.exports;const Swal=getDefaultExportFromCjs(sweetalert2_allExports);function OrderedMap(s){this.content=s}OrderedMap.prototype={constructor:OrderedMap,find:function(s){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===s)return e;return-1},get:function(s){var e=this.find(s);return e==-1?void 0:this.content[e+1]},update:function(s,e,d){var b=d&&d!=s?this.remove(d):this,tt=b.find(s),nt=b.content.slice();return tt==-1?nt.push(d||s,e):(nt[tt+1]=e,d&&(nt[tt]=d)),new OrderedMap(nt)},remove:function(s){var e=this.find(s);if(e==-1)return this;var d=this.content.slice();return d.splice(e,2),new OrderedMap(d)},addToStart:function(s,e){return new OrderedMap([s,e].concat(this.remove(s).content))},addToEnd:function(s,e){var d=this.remove(s).content.slice();return d.push(s,e),new OrderedMap(d)},addBefore:function(s,e,d){var b=this.remove(e),tt=b.content.slice(),nt=b.find(s);return tt.splice(nt==-1?tt.length:nt,0,e,d),new OrderedMap(tt)},forEach:function(s){for(var e=0;e<this.content.length;e+=2)s(this.content[e],this.content[e+1])},prepend:function(s){return s=OrderedMap.from(s),s.size?new OrderedMap(s.content.concat(this.subtract(s).content)):this},append:function(s){return s=OrderedMap.from(s),s.size?new OrderedMap(this.subtract(s).content.concat(s.content)):this},subtract:function(s){var e=this;s=OrderedMap.from(s);for(var d=0;d<s.content.length;d+=2)e=e.remove(s.content[d]);return e},toObject:function(){var s={};return this.forEach(function(e,d){s[e]=d}),s},get size(){return this.content.length>>1}};OrderedMap.from=function(s){if(s instanceof OrderedMap)return s;var e=[];if(s)for(var d in s)e.push(d,s[d]);return new OrderedMap(e)};function findDiffStart(s,e,d){for(let b=0;;b++){if(b==s.childCount||b==e.childCount)return s.childCount==e.childCount?null:d;let tt=s.child(b),nt=e.child(b);if(tt==nt){d+=tt.nodeSize;continue}if(!tt.sameMarkup(nt))return d;if(tt.isText&&tt.text!=nt.text){for(let ot=0;tt.text[ot]==nt.text[ot];ot++)d++;return d}if(tt.content.size||nt.content.size){let ot=findDiffStart(tt.content,nt.content,d+1);if(ot!=null)return ot}d+=tt.nodeSize}}function findDiffEnd(s,e,d,b){for(let tt=s.childCount,nt=e.childCount;;){if(tt==0||nt==0)return tt==nt?null:{a:d,b};let ot=s.child(--tt),ht=e.child(--nt),mt=ot.nodeSize;if(ot==ht){d-=mt,b-=mt;continue}if(!ot.sameMarkup(ht))return{a:d,b};if(ot.isText&&ot.text!=ht.text){let gt=0,yt=Math.min(ot.text.length,ht.text.length);for(;gt<yt&&ot.text[ot.text.length-gt-1]==ht.text[ht.text.length-gt-1];)gt++,d--,b--;return{a:d,b}}if(ot.content.size||ht.content.size){let gt=findDiffEnd(ot.content,ht.content,d-1,b-1);if(gt)return gt}d-=mt,b-=mt}}class Fragment{constructor(e,d){if(this.content=e,this.size=d||0,d==null)for(let b=0;b<e.length;b++)this.size+=e[b].nodeSize}nodesBetween(e,d,b,tt=0,nt){for(let ot=0,ht=0;ht<d;ot++){let mt=this.content[ot],gt=ht+mt.nodeSize;if(gt>e&&b(mt,tt+ht,nt||null,ot)!==!1&&mt.content.size){let yt=ht+1;mt.nodesBetween(Math.max(0,e-yt),Math.min(mt.content.size,d-yt),b,tt+yt)}ht=gt}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,d,b,tt){let nt="",ot=!0;return this.nodesBetween(e,d,(ht,mt)=>{let gt=ht.isText?ht.text.slice(Math.max(e,mt)-mt,d-mt):ht.isLeaf?tt?typeof tt=="function"?tt(ht):tt:ht.type.spec.leafText?ht.type.spec.leafText(ht):"":"";ht.isBlock&&(ht.isLeaf&&gt||ht.isTextblock)&&b&&(ot?ot=!1:nt+=b),nt+=gt},0),nt}append(e){if(!e.size)return this;if(!this.size)return e;let d=this.lastChild,b=e.firstChild,tt=this.content.slice(),nt=0;for(d.isText&&d.sameMarkup(b)&&(tt[tt.length-1]=d.withText(d.text+b.text),nt=1);nt<e.content.length;nt++)tt.push(e.content[nt]);return new Fragment(tt,this.size+e.size)}cut(e,d=this.size){if(e==0&&d==this.size)return this;let b=[],tt=0;if(d>e)for(let nt=0,ot=0;ot<d;nt++){let ht=this.content[nt],mt=ot+ht.nodeSize;mt>e&&((ot<e||mt>d)&&(ht.isText?ht=ht.cut(Math.max(0,e-ot),Math.min(ht.text.length,d-ot)):ht=ht.cut(Math.max(0,e-ot-1),Math.min(ht.content.size,d-ot-1))),b.push(ht),tt+=ht.nodeSize),ot=mt}return new Fragment(b,tt)}cutByIndex(e,d){return e==d?Fragment.empty:e==0&&d==this.content.length?this:new Fragment(this.content.slice(e,d))}replaceChild(e,d){let b=this.content[e];if(b==d)return this;let tt=this.content.slice(),nt=this.size+d.nodeSize-b.nodeSize;return tt[e]=d,new Fragment(tt,nt)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let d=0;d<this.content.length;d++)if(!this.content[d].eq(e.content[d]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let d=this.content[e];if(!d)throw new RangeError("Index "+e+" out of range for "+this);return d}maybeChild(e){return this.content[e]||null}forEach(e){for(let d=0,b=0;d<this.content.length;d++){let tt=this.content[d];e(tt,b,d),b+=tt.nodeSize}}findDiffStart(e,d=0){return findDiffStart(this,e,d)}findDiffEnd(e,d=this.size,b=e.size){return findDiffEnd(this,e,d,b)}findIndex(e,d=-1){if(e==0)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let b=0,tt=0;;b++){let nt=this.child(b),ot=tt+nt.nodeSize;if(ot>=e)return ot==e||d>0?retIndex(b+1,ot):retIndex(b,tt);tt=ot}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,d){if(!d)return Fragment.empty;if(!Array.isArray(d))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(d.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let d,b=0;for(let tt=0;tt<e.length;tt++){let nt=e[tt];b+=nt.nodeSize,tt&&nt.isText&&e[tt-1].sameMarkup(nt)?(d||(d=e.slice(0,tt)),d[d.length-1]=nt.withText(d[d.length-1].text+nt.text)):d&&d.push(nt)}return new Fragment(d||e,b)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(s,e){return found.index=s,found.offset=e,found}function compareDeep(s,e){if(s===e)return!0;if(!(s&&typeof s=="object")||!(e&&typeof e=="object"))return!1;let d=Array.isArray(s);if(Array.isArray(e)!=d)return!1;if(d){if(s.length!=e.length)return!1;for(let b=0;b<s.length;b++)if(!compareDeep(s[b],e[b]))return!1}else{for(let b in s)if(!(b in e)||!compareDeep(s[b],e[b]))return!1;for(let b in e)if(!(b in s))return!1}return!0}let Mark$1=class Xo{constructor(e,d){this.type=e,this.attrs=d}addToSet(e){let d,b=!1;for(let tt=0;tt<e.length;tt++){let nt=e[tt];if(this.eq(nt))return e;if(this.type.excludes(nt.type))d||(d=e.slice(0,tt));else{if(nt.type.excludes(this.type))return e;!b&&nt.type.rank>this.type.rank&&(d||(d=e.slice(0,tt)),d.push(this),b=!0),d&&d.push(nt)}}return d||(d=e.slice()),b||d.push(this),d}removeFromSet(e){for(let d=0;d<e.length;d++)if(this.eq(e[d]))return e.slice(0,d).concat(e.slice(d+1));return e}isInSet(e){for(let d=0;d<e.length;d++)if(this.eq(e[d]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let d in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,d){if(!d)throw new RangeError("Invalid input for Mark.fromJSON");let b=e.marks[d.type];if(!b)throw new RangeError(`There is no mark type ${d.type} in this schema`);let tt=b.create(d.attrs);return b.checkAttrs(tt.attrs),tt}static sameSet(e,d){if(e==d)return!0;if(e.length!=d.length)return!1;for(let b=0;b<e.length;b++)if(!e[b].eq(d[b]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Xo.none;if(e instanceof Xo)return[e];let d=e.slice();return d.sort((b,tt)=>b.type.rank-tt.type.rank),d}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(e,d,b){this.content=e,this.openStart=d,this.openEnd=b}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,d){let b=insertInto(this.content,e+this.openStart,d);return b&&new Slice(b,this.openStart,this.openEnd)}removeBetween(e,d){return new Slice(removeRange(this.content,e+this.openStart,d+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,d){if(!d)return Slice.empty;let b=d.openStart||0,tt=d.openEnd||0;if(typeof b!="number"||typeof tt!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,d.content),b,tt)}static maxOpen(e,d=!0){let b=0,tt=0;for(let nt=e.firstChild;nt&&!nt.isLeaf&&(d||!nt.type.spec.isolating);nt=nt.firstChild)b++;for(let nt=e.lastChild;nt&&!nt.isLeaf&&(d||!nt.type.spec.isolating);nt=nt.lastChild)tt++;return new Slice(e,b,tt)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(s,e,d){let{index:b,offset:tt}=s.findIndex(e),nt=s.maybeChild(b),{index:ot,offset:ht}=s.findIndex(d);if(tt==e||nt.isText){if(ht!=d&&!s.child(ot).isText)throw new RangeError("Removing non-flat range");return s.cut(0,e).append(s.cut(d))}if(b!=ot)throw new RangeError("Removing non-flat range");return s.replaceChild(b,nt.copy(removeRange(nt.content,e-tt-1,d-tt-1)))}function insertInto(s,e,d,b){let{index:tt,offset:nt}=s.findIndex(e),ot=s.maybeChild(tt);if(nt==e||ot.isText)return s.cut(0,e).append(d).append(s.cut(e));let ht=insertInto(ot.content,e-nt-1,d);return ht&&s.replaceChild(tt,ot.copy(ht))}function replace$1(s,e,d){if(d.openStart>s.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(s.depth-d.openStart!=e.depth-d.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(s,e,d,0)}function replaceOuter(s,e,d,b){let tt=s.index(b),nt=s.node(b);if(tt==e.index(b)&&b<s.depth-d.openStart){let ot=replaceOuter(s,e,d,b+1);return nt.copy(nt.content.replaceChild(tt,ot))}else if(d.content.size)if(!d.openStart&&!d.openEnd&&s.depth==b&&e.depth==b){let ot=s.parent,ht=ot.content;return close$1(ot,ht.cut(0,s.parentOffset).append(d.content).append(ht.cut(e.parentOffset)))}else{let{start:ot,end:ht}=prepareSliceForReplace(d,s);return close$1(nt,replaceThreeWay(s,ot,ht,e,b))}else return close$1(nt,replaceTwoWay(s,e,b))}function checkJoin(s,e){if(!e.type.compatibleContent(s.type))throw new ReplaceError("Cannot join "+e.type.name+" onto "+s.type.name)}function joinable$1(s,e,d){let b=s.node(d);return checkJoin(b,e.node(d)),b}function addNode(s,e){let d=e.length-1;d>=0&&s.isText&&s.sameMarkup(e[d])?e[d]=s.withText(e[d].text+s.text):e.push(s)}function addRange(s,e,d,b){let tt=(e||s).node(d),nt=0,ot=e?e.index(d):tt.childCount;s&&(nt=s.index(d),s.depth>d?nt++:s.textOffset&&(addNode(s.nodeAfter,b),nt++));for(let ht=nt;ht<ot;ht++)addNode(tt.child(ht),b);e&&e.depth==d&&e.textOffset&&addNode(e.nodeBefore,b)}function close$1(s,e){return s.type.checkContent(e),s.copy(e)}function replaceThreeWay(s,e,d,b,tt){let nt=s.depth>tt&&joinable$1(s,e,tt+1),ot=b.depth>tt&&joinable$1(d,b,tt+1),ht=[];return addRange(null,s,tt,ht),nt&&ot&&e.index(tt)==d.index(tt)?(checkJoin(nt,ot),addNode(close$1(nt,replaceThreeWay(s,e,d,b,tt+1)),ht)):(nt&&addNode(close$1(nt,replaceTwoWay(s,e,tt+1)),ht),addRange(e,d,tt,ht),ot&&addNode(close$1(ot,replaceTwoWay(d,b,tt+1)),ht)),addRange(b,null,tt,ht),new Fragment(ht)}function replaceTwoWay(s,e,d){let b=[];if(addRange(null,s,d,b),s.depth>d){let tt=joinable$1(s,e,d+1);addNode(close$1(tt,replaceTwoWay(s,e,d+1)),b)}return addRange(e,null,d,b),new Fragment(b)}function prepareSliceForReplace(s,e){let d=e.depth-s.openStart,tt=e.node(d).copy(s.content);for(let nt=d-1;nt>=0;nt--)tt=e.node(nt).copy(Fragment.from(tt));return{start:tt.resolveNoCache(s.openStart+d),end:tt.resolveNoCache(tt.content.size-s.openEnd-d)}}class ResolvedPos{constructor(e,d,b){this.pos=e,this.path=d,this.parentOffset=b,this.depth=d.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,d=this.index(this.depth);if(d==e.childCount)return null;let b=this.pos-this.path[this.path.length-1],tt=e.child(d);return b?e.child(d).cut(b):tt}get nodeBefore(){let e=this.index(this.depth),d=this.pos-this.path[this.path.length-1];return d?this.parent.child(e).cut(0,d):e==0?null:this.parent.child(e-1)}posAtIndex(e,d){d=this.resolveDepth(d);let b=this.path[d*3],tt=d==0?0:this.path[d*3-1]+1;for(let nt=0;nt<e;nt++)tt+=b.child(nt).nodeSize;return tt}marks(){let e=this.parent,d=this.index();if(e.content.size==0)return Mark$1.none;if(this.textOffset)return e.child(d).marks;let b=e.maybeChild(d-1),tt=e.maybeChild(d);if(!b){let ht=b;b=tt,tt=ht}let nt=b.marks;for(var ot=0;ot<nt.length;ot++)nt[ot].type.spec.inclusive===!1&&(!tt||!nt[ot].isInSet(tt.marks))&&(nt=nt[ot--].removeFromSet(nt));return nt}marksAcross(e){let d=this.parent.maybeChild(this.index());if(!d||!d.isInline)return null;let b=d.marks,tt=e.parent.maybeChild(e.index());for(var nt=0;nt<b.length;nt++)b[nt].type.spec.inclusive===!1&&(!tt||!b[nt].isInSet(tt.marks))&&(b=b[nt--].removeFromSet(b));return b}sharedDepth(e){for(let d=this.depth;d>0;d--)if(this.start(d)<=e&&this.end(d)>=e)return d;return 0}blockRange(e=this,d){if(e.pos<this.pos)return e.blockRange(this);for(let b=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);b>=0;b--)if(e.pos<=this.end(b)&&(!d||d(this.node(b))))return new NodeRange(this,e,b);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let d=1;d<=this.depth;d++)e+=(e?"/":"")+this.node(d).type.name+"_"+this.index(d-1);return e+":"+this.parentOffset}static resolve(e,d){if(!(d>=0&&d<=e.content.size))throw new RangeError("Position "+d+" out of range");let b=[],tt=0,nt=d;for(let ot=e;;){let{index:ht,offset:mt}=ot.content.findIndex(nt),gt=nt-mt;if(b.push(ot,ht,tt+mt),!gt||(ot=ot.child(ht),ot.isText))break;nt=gt-1,tt+=mt+1}return new ResolvedPos(d,b,nt)}static resolveCached(e,d){let b=resolveCache.get(e);if(b)for(let nt=0;nt<b.elts.length;nt++){let ot=b.elts[nt];if(ot.pos==d)return ot}else resolveCache.set(e,b=new ResolveCache);let tt=b.elts[b.i]=ResolvedPos.resolve(e,d);return b.i=(b.i+1)%resolveCacheSize,tt}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(e,d,b){this.$from=e,this.$to=d,this.depth=b}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$3=class Jo{constructor(e,d,b,tt=Mark$1.none){this.type=e,this.attrs=d,this.marks=tt,this.content=b||Fragment.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,d,b,tt=0){this.content.nodesBetween(e,d,b,tt,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,d,b,tt){return this.content.textBetween(e,d,b,tt)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,d,b){return this.type==e&&compareDeep(this.attrs,d||e.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,b||Mark$1.none)}copy(e=null){return e==this.content?this:new Jo(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Jo(this.type,this.attrs,this.content,e)}cut(e,d=this.content.size){return e==0&&d==this.content.size?this:this.copy(this.content.cut(e,d))}slice(e,d=this.content.size,b=!1){if(e==d)return Slice.empty;let tt=this.resolve(e),nt=this.resolve(d),ot=b?0:tt.sharedDepth(d),ht=tt.start(ot),gt=tt.node(ot).content.cut(tt.pos-ht,nt.pos-ht);return new Slice(gt,tt.depth-ot,nt.depth-ot)}replace(e,d,b){return replace$1(this.resolve(e),this.resolve(d),b)}nodeAt(e){for(let d=this;;){let{index:b,offset:tt}=d.content.findIndex(e);if(d=d.maybeChild(b),!d)return null;if(tt==e||d.isText)return d;e-=tt+1}}childAfter(e){let{index:d,offset:b}=this.content.findIndex(e);return{node:this.content.maybeChild(d),index:d,offset:b}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:d,offset:b}=this.content.findIndex(e);if(b<e)return{node:this.content.child(d),index:d,offset:b};let tt=this.content.child(d-1);return{node:tt,index:d-1,offset:b-tt.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,d,b){let tt=!1;return d>e&&this.nodesBetween(e,d,nt=>(b.isInSet(nt.marks)&&(tt=!0),!tt)),tt}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,e)}contentMatchAt(e){let d=this.type.contentMatch.matchFragment(this.content,0,e);if(!d)throw new Error("Called contentMatchAt on a node with invalid content");return d}canReplace(e,d,b=Fragment.empty,tt=0,nt=b.childCount){let ot=this.contentMatchAt(e).matchFragment(b,tt,nt),ht=ot&&ot.matchFragment(this.content,d);if(!ht||!ht.validEnd)return!1;for(let mt=tt;mt<nt;mt++)if(!this.type.allowsMarks(b.child(mt).marks))return!1;return!0}canReplaceWith(e,d,b,tt){if(tt&&!this.type.allowsMarks(tt))return!1;let nt=this.contentMatchAt(e).matchType(b),ot=nt&&nt.matchFragment(this.content,d);return ot?ot.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark$1.none;for(let d=0;d<this.marks.length;d++){let b=this.marks[d];b.type.checkAttrs(b.attrs),e=b.addToSet(e)}if(!Mark$1.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(d=>d.type.name)}`);this.content.forEach(d=>d.check())}toJSON(){let e={type:this.type.name};for(let d in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(d=>d.toJSON())),e}static fromJSON(e,d){if(!d)throw new RangeError("Invalid input for Node.fromJSON");let b;if(d.marks){if(!Array.isArray(d.marks))throw new RangeError("Invalid mark data for Node.fromJSON");b=d.marks.map(e.markFromJSON)}if(d.type=="text"){if(typeof d.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(d.text,b)}let tt=Fragment.fromJSON(e,d.content),nt=e.nodeType(d.type).create(d.attrs,tt,b);return nt.type.checkAttrs(nt.attrs),nt}};Node$3.prototype.text=void 0;let TextNode$1=class Qo extends Node$3{constructor(e,d,b,tt){if(super(e,d,null,tt),!b)throw new RangeError("Empty text nodes are not allowed");this.text=b}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,d){return this.text.slice(e,d)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Qo(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Qo(this.type,this.attrs,e,this.marks)}cut(e=0,d=this.text.length){return e==0&&d==this.text.length?this:this.withText(this.text.slice(e,d))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function wrapMarks(s,e){for(let d=s.length-1;d>=0;d--)e=s[d].type.name+"("+e+")";return e}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,d){let b=new TokenStream(e,d);if(b.next==null)return ContentMatch.empty;let tt=parseExpr(b);b.next&&b.err("Unexpected trailing text");let nt=dfa(nfa(tt));return checkForDeadEnds(nt,b),nt}matchType(e){for(let d=0;d<this.next.length;d++)if(this.next[d].type==e)return this.next[d].next;return null}matchFragment(e,d=0,b=e.childCount){let tt=this;for(let nt=d;tt&&nt<b;nt++)tt=tt.matchType(e.child(nt).type);return tt}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:d}=this.next[e];if(!(d.isText||d.hasRequiredAttrs()))return d}return null}compatible(e){for(let d=0;d<this.next.length;d++)for(let b=0;b<e.next.length;b++)if(this.next[d].type==e.next[b].type)return!0;return!1}fillBefore(e,d=!1,b=0){let tt=[this];function nt(ot,ht){let mt=ot.matchFragment(e,b);if(mt&&(!d||mt.validEnd))return Fragment.from(ht.map(gt=>gt.createAndFill()));for(let gt=0;gt<ot.next.length;gt++){let{type:yt,next:ft}=ot.next[gt];if(!(yt.isText||yt.hasRequiredAttrs())&&tt.indexOf(ft)==-1){tt.push(ft);let st=nt(ft,ht.concat(yt));if(st)return st}}return null}return nt(this,[])}findWrapping(e){for(let b=0;b<this.wrapCache.length;b+=2)if(this.wrapCache[b]==e)return this.wrapCache[b+1];let d=this.computeWrapping(e);return this.wrapCache.push(e,d),d}computeWrapping(e){let d=Object.create(null),b=[{match:this,type:null,via:null}];for(;b.length;){let tt=b.shift(),nt=tt.match;if(nt.matchType(e)){let ot=[];for(let ht=tt;ht.type;ht=ht.via)ot.push(ht.type);return ot.reverse()}for(let ot=0;ot<nt.next.length;ot++){let{type:ht,next:mt}=nt.next[ot];!ht.isLeaf&&!ht.hasRequiredAttrs()&&!(ht.name in d)&&(!tt.type||mt.validEnd)&&(b.push({match:ht.contentMatch,type:ht,via:tt}),d[ht.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function d(b){e.push(b);for(let tt=0;tt<b.next.length;tt++)e.indexOf(b.next[tt].next)==-1&&d(b.next[tt].next)}return d(this),e.map((b,tt)=>{let nt=tt+(b.validEnd?"*":" ")+" ";for(let ot=0;ot<b.next.length;ot++)nt+=(ot?", ":"")+b.next[ot].type.name+"->"+e.indexOf(b.next[ot].next);return nt}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,d){this.string=e,this.nodeTypes=d,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(s){let e=[];do e.push(parseExprSeq(s));while(s.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function parseExprSeq(s){let e=[];do e.push(parseExprSubscript(s));while(s.next&&s.next!=")"&&s.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function parseExprSubscript(s){let e=parseExprAtom(s);for(;;)if(s.eat("+"))e={type:"plus",expr:e};else if(s.eat("*"))e={type:"star",expr:e};else if(s.eat("?"))e={type:"opt",expr:e};else if(s.eat("{"))e=parseExprRange(s,e);else break;return e}function parseNum(s){/\D/.test(s.next)&&s.err("Expected number, got '"+s.next+"'");let e=Number(s.next);return s.pos++,e}function parseExprRange(s,e){let d=parseNum(s),b=d;return s.eat(",")&&(s.next!="}"?b=parseNum(s):b=-1),s.eat("}")||s.err("Unclosed braced range"),{type:"range",min:d,max:b,expr:e}}function resolveName(s,e){let d=s.nodeTypes,b=d[e];if(b)return[b];let tt=[];for(let nt in d){let ot=d[nt];ot.groups.indexOf(e)>-1&&tt.push(ot)}return tt.length==0&&s.err("No node type or group '"+e+"' found"),tt}function parseExprAtom(s){if(s.eat("(")){let e=parseExpr(s);return s.eat(")")||s.err("Missing closing paren"),e}else if(/\W/.test(s.next))s.err("Unexpected token '"+s.next+"'");else{let e=resolveName(s,s.next).map(d=>(s.inline==null?s.inline=d.isInline:s.inline!=d.isInline&&s.err("Mixing inline and block content"),{type:"name",value:d}));return s.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function nfa(s){let e=[[]];return tt(nt(s,0),d()),e;function d(){return e.push([])-1}function b(ot,ht,mt){let gt={term:mt,to:ht};return e[ot].push(gt),gt}function tt(ot,ht){ot.forEach(mt=>mt.to=ht)}function nt(ot,ht){if(ot.type=="choice")return ot.exprs.reduce((mt,gt)=>mt.concat(nt(gt,ht)),[]);if(ot.type=="seq")for(let mt=0;;mt++){let gt=nt(ot.exprs[mt],ht);if(mt==ot.exprs.length-1)return gt;tt(gt,ht=d())}else if(ot.type=="star"){let mt=d();return b(ht,mt),tt(nt(ot.expr,mt),mt),[b(mt)]}else if(ot.type=="plus"){let mt=d();return tt(nt(ot.expr,ht),mt),tt(nt(ot.expr,mt),mt),[b(mt)]}else{if(ot.type=="opt")return[b(ht)].concat(nt(ot.expr,ht));if(ot.type=="range"){let mt=ht;for(let gt=0;gt<ot.min;gt++){let yt=d();tt(nt(ot.expr,mt),yt),mt=yt}if(ot.max==-1)tt(nt(ot.expr,mt),mt);else for(let gt=ot.min;gt<ot.max;gt++){let yt=d();b(mt,yt),tt(nt(ot.expr,mt),yt),mt=yt}return[b(mt)]}else{if(ot.type=="name")return[b(ht,void 0,ot.value)];throw new Error("Unknown expr type")}}}}function cmp(s,e){return e-s}function nullFrom(s,e){let d=[];return b(e),d.sort(cmp);function b(tt){let nt=s[tt];if(nt.length==1&&!nt[0].term)return b(nt[0].to);d.push(tt);for(let ot=0;ot<nt.length;ot++){let{term:ht,to:mt}=nt[ot];!ht&&d.indexOf(mt)==-1&&b(mt)}}}function dfa(s){let e=Object.create(null);return d(nullFrom(s,0));function d(b){let tt=[];b.forEach(ot=>{s[ot].forEach(({term:ht,to:mt})=>{if(!ht)return;let gt;for(let yt=0;yt<tt.length;yt++)tt[yt][0]==ht&&(gt=tt[yt][1]);nullFrom(s,mt).forEach(yt=>{gt||tt.push([ht,gt=[]]),gt.indexOf(yt)==-1&&gt.push(yt)})})});let nt=e[b.join(",")]=new ContentMatch(b.indexOf(s.length-1)>-1);for(let ot=0;ot<tt.length;ot++){let ht=tt[ot][1].sort(cmp);nt.next.push({type:tt[ot][0],next:e[ht.join(",")]||d(ht)})}return nt}}function checkForDeadEnds(s,e){for(let d=0,b=[s];d<b.length;d++){let tt=b[d],nt=!tt.validEnd,ot=[];for(let ht=0;ht<tt.next.length;ht++){let{type:mt,next:gt}=tt.next[ht];ot.push(mt.name),nt&&!(mt.isText||mt.hasRequiredAttrs())&&(nt=!1),b.indexOf(gt)==-1&&b.push(gt)}nt&&e.err("Only non-generatable nodes ("+ot.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(s){let e=Object.create(null);for(let d in s){let b=s[d];if(!b.hasDefault)return null;e[d]=b.default}return e}function computeAttrs(s,e){let d=Object.create(null);for(let b in s){let tt=e&&e[b];if(tt===void 0){let nt=s[b];if(nt.hasDefault)tt=nt.default;else throw new RangeError("No value supplied for attribute "+b)}d[b]=tt}return d}function checkAttrs(s,e,d,b){for(let tt in e)if(!(tt in s))throw new RangeError(`Unsupported attribute ${tt} for ${d} of type ${tt}`);for(let tt in s){let nt=s[tt];nt.validate&&nt.validate(e[tt])}}function initAttrs(s,e){let d=Object.create(null);if(e)for(let b in e)d[b]=new Attribute(s,b,e[b]);return d}let NodeType$1=class Ls{constructor(e,d,b){this.name=e,this.schema=d,this.spec=b,this.markSet=null,this.groups=b.group?b.group.split(" "):[],this.attrs=initAttrs(e,b.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(b.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,d,b){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$3(this,this.computeAttrs(e),Fragment.from(d),Mark$1.setFrom(b))}createChecked(e=null,d,b){return d=Fragment.from(d),this.checkContent(d),new Node$3(this,this.computeAttrs(e),d,Mark$1.setFrom(b))}createAndFill(e=null,d,b){if(e=this.computeAttrs(e),d=Fragment.from(d),d.size){let ot=this.contentMatch.fillBefore(d);if(!ot)return null;d=ot.append(d)}let tt=this.contentMatch.matchFragment(d),nt=tt&&tt.fillBefore(Fragment.empty,!0);return nt?new Node$3(this,e,d.append(nt),Mark$1.setFrom(b)):null}validContent(e){let d=this.contentMatch.matchFragment(e);if(!d||!d.validEnd)return!1;for(let b=0;b<e.childCount;b++)if(!this.allowsMarks(e.child(b).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let d=0;d<e.length;d++)if(!this.allowsMarkType(e[d].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let d;for(let b=0;b<e.length;b++)this.allowsMarkType(e[b].type)?d&&d.push(e[b]):d||(d=e.slice(0,b));return d?d.length?d:Mark$1.none:e}static compile(e,d){let b=Object.create(null);e.forEach((nt,ot)=>b[nt]=new Ls(nt,d,ot));let tt=d.spec.topNode||"doc";if(!b[tt])throw new RangeError("Schema is missing its top node type ('"+tt+"')");if(!b.text)throw new RangeError("Every schema needs a 'text' type");for(let nt in b.text.attrs)throw new RangeError("The text node type should not have attributes");return b}};function validateType(s,e,d){let b=d.split("|");return tt=>{let nt=tt===null?"null":typeof tt;if(b.indexOf(nt)<0)throw new RangeError(`Expected value of type ${b} for attribute ${e} on type ${s}, got ${nt}`)}}class Attribute{constructor(e,d,b){this.hasDefault=Object.prototype.hasOwnProperty.call(b,"default"),this.default=b.default,this.validate=typeof b.validate=="string"?validateType(e,d,b.validate):b.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(e,d,b,tt){this.name=e,this.rank=d,this.schema=b,this.spec=tt,this.attrs=initAttrs(e,tt.attrs),this.excluded=null;let nt=defaultAttrs(this.attrs);this.instance=nt?new Mark$1(this,nt):null}create(e=null){return!e&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,e))}static compile(e,d){let b=Object.create(null),tt=0;return e.forEach((nt,ot)=>b[nt]=new MarkType(nt,tt++,d,ot)),b}removeFromSet(e){for(var d=0;d<e.length;d++)e[d].type==this&&(e=e.slice(0,d).concat(e.slice(d+1)),d--);return e}isInSet(e){for(let d=0;d<e.length;d++)if(e[d].type==this)return e[d]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Schema{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let d=this.spec={};for(let tt in e)d[tt]=e[tt];d.nodes=OrderedMap.from(e.nodes),d.marks=OrderedMap.from(e.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let b=Object.create(null);for(let tt in this.nodes){if(tt in this.marks)throw new RangeError(tt+" can not be both a node and a mark");let nt=this.nodes[tt],ot=nt.spec.content||"",ht=nt.spec.marks;if(nt.contentMatch=b[ot]||(b[ot]=ContentMatch.parse(ot,this.nodes)),nt.inlineContent=nt.contentMatch.inlineContent,nt.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!nt.isInline||!nt.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=nt}nt.markSet=ht=="_"?null:ht?gatherMarks(this,ht.split(" ")):ht==""||!nt.inlineContent?[]:null}for(let tt in this.marks){let nt=this.marks[tt],ot=nt.spec.excludes;nt.excluded=ot==null?[nt]:ot==""?[]:gatherMarks(this,ot.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,d=null,b,tt){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof NodeType$1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(d,b,tt)}text(e,d){let b=this.nodes.text;return new TextNode$1(b,b.defaultAttrs,e,Mark$1.setFrom(d))}mark(e,d){return typeof e=="string"&&(e=this.marks[e]),e.create(d)}nodeFromJSON(e){return Node$3.fromJSON(this,e)}markFromJSON(e){return Mark$1.fromJSON(this,e)}nodeType(e){let d=this.nodes[e];if(!d)throw new RangeError("Unknown node type: "+e);return d}}function gatherMarks(s,e){let d=[];for(let b=0;b<e.length;b++){let tt=e[b],nt=s.marks[tt],ot=nt;if(nt)d.push(nt);else for(let ht in s.marks){let mt=s.marks[ht];(tt=="_"||mt.spec.group&&mt.spec.group.split(" ").indexOf(tt)>-1)&&d.push(ot=mt)}if(!ot)throw new SyntaxError("Unknown mark type: '"+e[b]+"'")}return d}function isTagRule(s){return s.tag!=null}function isStyleRule(s){return s.style!=null}let DOMParser$1=class Zo{constructor(e,d){this.schema=e,this.rules=d,this.tags=[],this.styles=[];let b=this.matchedStyles=[];d.forEach(tt=>{if(isTagRule(tt))this.tags.push(tt);else if(isStyleRule(tt)){let nt=/[^=]*/.exec(tt.style)[0];b.indexOf(nt)<0&&b.push(nt),this.styles.push(tt)}}),this.normalizeLists=!this.tags.some(tt=>{if(!/^(ul|ol)\b/.test(tt.tag)||!tt.node)return!1;let nt=e.nodes[tt.node];return nt.contentMatch.matchType(nt)})}parse(e,d={}){let b=new ParseContext(this,d,!1);return b.addAll(e,d.from,d.to),b.finish()}parseSlice(e,d={}){let b=new ParseContext(this,d,!0);return b.addAll(e,d.from,d.to),Slice.maxOpen(b.finish())}matchTag(e,d,b){for(let tt=b?this.tags.indexOf(b)+1:0;tt<this.tags.length;tt++){let nt=this.tags[tt];if(matches(e,nt.tag)&&(nt.namespace===void 0||e.namespaceURI==nt.namespace)&&(!nt.context||d.matchesContext(nt.context))){if(nt.getAttrs){let ot=nt.getAttrs(e);if(ot===!1)continue;nt.attrs=ot||void 0}return nt}}}matchStyle(e,d,b,tt){for(let nt=tt?this.styles.indexOf(tt)+1:0;nt<this.styles.length;nt++){let ot=this.styles[nt],ht=ot.style;if(!(ht.indexOf(e)!=0||ot.context&&!b.matchesContext(ot.context)||ht.length>e.length&&(ht.charCodeAt(e.length)!=61||ht.slice(e.length+1)!=d))){if(ot.getAttrs){let mt=ot.getAttrs(d);if(mt===!1)continue;ot.attrs=mt||void 0}return ot}}}static schemaRules(e){let d=[];function b(tt){let nt=tt.priority==null?50:tt.priority,ot=0;for(;ot<d.length;ot++){let ht=d[ot];if((ht.priority==null?50:ht.priority)<nt)break}d.splice(ot,0,tt)}for(let tt in e.marks){let nt=e.marks[tt].spec.parseDOM;nt&&nt.forEach(ot=>{b(ot=copy$1(ot)),ot.mark||ot.ignore||ot.clearMark||(ot.mark=tt)})}for(let tt in e.nodes){let nt=e.nodes[tt].spec.parseDOM;nt&&nt.forEach(ot=>{b(ot=copy$1(ot)),ot.node||ot.ignore||ot.mark||(ot.node=tt)})}return d}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Zo(e,Zo.schemaRules(e)))}};const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(s,e,d){return e!=null?(e?OPT_PRESERVE_WS:0)|(e==="full"?OPT_PRESERVE_WS_FULL:0):s&&s.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:d&~OPT_OPEN_LEFT}class NodeContext{constructor(e,d,b,tt,nt,ot,ht){this.type=e,this.attrs=d,this.marks=b,this.pendingMarks=tt,this.solid=nt,this.options=ht,this.content=[],this.activeMarks=Mark$1.none,this.stashMarks=[],this.match=ot||(ht&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let d=this.type.contentMatch.fillBefore(Fragment.from(e));if(d)this.match=this.type.contentMatch.matchFragment(d);else{let b=this.type.contentMatch,tt;return(tt=b.findWrapping(e.type))?(this.match=b,tt):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let b=this.content[this.content.length-1],tt;if(b&&b.isText&&(tt=/[ \t\r\n\u000c]+$/.exec(b.text))){let nt=b;b.text.length==tt[0].length?this.content.pop():this.content[this.content.length-1]=nt.withText(nt.text.slice(0,nt.text.length-tt[0].length))}}let d=Fragment.from(this.content);return!e&&this.match&&(d=d.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,d,this.marks):d}popFromStashMark(e){for(let d=this.stashMarks.length-1;d>=0;d--)if(e.eq(this.stashMarks[d]))return this.stashMarks.splice(d,1)[0]}applyPending(e){for(let d=0,b=this.pendingMarks;d<b.length;d++){let tt=b[d];(this.type?this.type.allowsMarkType(tt.type):markMayApply(tt.type,e))&&!tt.isInSet(this.activeMarks)&&(this.activeMarks=tt.addToSet(this.activeMarks),this.pendingMarks=tt.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(e,d,b){this.parser=e,this.options=d,this.isOpen=b,this.open=0;let tt=d.topNode,nt,ot=wsOptionsFor(null,d.preserveWhitespace,0)|(b?OPT_OPEN_LEFT:0);tt?nt=new NodeContext(tt.type,tt.attrs,Mark$1.none,Mark$1.none,!0,d.topMatch||tt.type.contentMatch,ot):b?nt=new NodeContext(null,null,Mark$1.none,Mark$1.none,!0,null,ot):nt=new NodeContext(e.schema.topNodeType,null,Mark$1.none,Mark$1.none,!0,null,ot),this.nodes=[nt],this.find=d.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,d){let b=e.style;if(!b||!b.length)return d();let tt=this.readStyles(e.style);if(!tt)return;let[nt,ot]=tt,ht=this.top;for(let mt=0;mt<ot.length;mt++)this.removePendingMark(ot[mt],ht);for(let mt=0;mt<nt.length;mt++)this.addPendingMark(nt[mt]);d();for(let mt=0;mt<nt.length;mt++)this.removePendingMark(nt[mt],ht);for(let mt=0;mt<ot.length;mt++)this.addPendingMark(ot[mt])}addTextNode(e){let d=e.nodeValue,b=this.top;if(b.options&OPT_PRESERVE_WS_FULL||b.inlineContext(e)||/[^ \t\r\n\u000c]/.test(d)){if(b.options&OPT_PRESERVE_WS)b.options&OPT_PRESERVE_WS_FULL?d=d.replace(/\r\n?/g,`
`):d=d.replace(/\r?\n|\r/g," ");else if(d=d.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(d)&&this.open==this.nodes.length-1){let tt=b.content[b.content.length-1],nt=e.previousSibling;(!tt||nt&&nt.nodeName=="BR"||tt.isText&&/[ \t\r\n\u000c]$/.test(tt.text))&&(d=d.slice(1))}d&&this.insertNode(this.parser.schema.text(d)),this.findInText(e)}else this.findInside(e)}addElement(e,d){let b=e.nodeName.toLowerCase(),tt;listTags.hasOwnProperty(b)&&this.parser.normalizeLists&&normalizeList(e);let nt=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(tt=this.parser.matchTag(e,this,d));if(nt?nt.ignore:ignoreTags.hasOwnProperty(b))this.findInside(e),this.ignoreFallback(e);else if(!nt||nt.skip||nt.closeParent){nt&&nt.closeParent?this.open=Math.max(0,this.open-1):nt&&nt.skip.nodeType&&(e=nt.skip);let ot,ht=this.top,mt=this.needsBlock;if(blockTags.hasOwnProperty(b))ht.content.length&&ht.content[0].isInline&&this.open&&(this.open--,ht=this.top),ot=!0,ht.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}nt&&nt.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),ot&&this.sync(ht),this.needsBlock=mt}else this.withStyleRules(e,()=>{this.addElementByRule(e,nt,nt.consuming===!1?tt:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let d=Mark$1.none,b=Mark$1.none;if(e.length)for(let tt=0;tt<this.parser.matchedStyles.length;tt++){let nt=this.parser.matchedStyles[tt],ot=e.getPropertyValue(nt);if(ot)for(let ht=void 0;;){let mt=this.parser.matchStyle(nt,ot,this,ht);if(!mt)break;if(mt.ignore)return null;if(mt.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(gt=>{mt.clearMark(gt)&&(b=gt.addToSet(b))}):d=this.parser.schema.marks[mt.mark].create(mt.attrs).addToSet(d),mt.consuming===!1)ht=mt;else break}}return[d,b]}addElementByRule(e,d,b){let tt,nt,ot;d.node?(nt=this.parser.schema.nodes[d.node],nt.isLeaf?this.insertNode(nt.create(d.attrs))||this.leafFallback(e):tt=this.enter(nt,d.attrs||null,d.preserveWhitespace)):(ot=this.parser.schema.marks[d.mark].create(d.attrs),this.addPendingMark(ot));let ht=this.top;if(nt&&nt.isLeaf)this.findInside(e);else if(b)this.addElement(e,b);else if(d.getContent)this.findInside(e),d.getContent(e,this.parser.schema).forEach(mt=>this.insertNode(mt));else{let mt=e;typeof d.contentElement=="string"?mt=e.querySelector(d.contentElement):typeof d.contentElement=="function"?mt=d.contentElement(e):d.contentElement&&(mt=d.contentElement),this.findAround(e,mt,!0),this.addAll(mt)}tt&&this.sync(ht)&&this.open--,ot&&this.removePendingMark(ot,ht)}addAll(e,d,b){let tt=d||0;for(let nt=d?e.childNodes[d]:e.firstChild,ot=b==null?null:e.childNodes[b];nt!=ot;nt=nt.nextSibling,++tt)this.findAtPoint(e,tt),this.addDOM(nt);this.findAtPoint(e,tt)}findPlace(e){let d,b;for(let tt=this.open;tt>=0;tt--){let nt=this.nodes[tt],ot=nt.findWrapping(e);if(ot&&(!d||d.length>ot.length)&&(d=ot,b=nt,!ot.length)||nt.solid)break}if(!d)return!1;this.sync(b);for(let tt=0;tt<d.length;tt++)this.enterInner(d[tt],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let d=this.textblockFromContext();d&&this.enterInner(d)}if(this.findPlace(e)){this.closeExtra();let d=this.top;d.applyPending(e.type),d.match&&(d.match=d.match.matchType(e.type));let b=d.activeMarks;for(let tt=0;tt<e.marks.length;tt++)(!d.type||d.type.allowsMarkType(e.marks[tt].type))&&(b=e.marks[tt].addToSet(b));return d.content.push(e.mark(b)),!0}return!1}enter(e,d,b){let tt=this.findPlace(e.create(d));return tt&&this.enterInner(e,d,!0,b),tt}enterInner(e,d=null,b=!1,tt){this.closeExtra();let nt=this.top;nt.applyPending(e),nt.match=nt.match&&nt.match.matchType(e);let ot=wsOptionsFor(e,tt,nt.options);nt.options&OPT_OPEN_LEFT&&nt.content.length==0&&(ot|=OPT_OPEN_LEFT),this.nodes.push(new NodeContext(e,d,nt.activeMarks,nt.pendingMarks,b,null,ot)),this.open++}closeExtra(e=!1){let d=this.nodes.length-1;if(d>this.open){for(;d>this.open;d--)this.nodes[d-1].content.push(this.nodes[d].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let d=this.open;d>=0;d--)if(this.nodes[d]==e)return this.open=d,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let d=this.open;d>=0;d--){let b=this.nodes[d].content;for(let tt=b.length-1;tt>=0;tt--)e+=b[tt].nodeSize;d&&e++}return e}findAtPoint(e,d){if(this.find)for(let b=0;b<this.find.length;b++)this.find[b].node==e&&this.find[b].offset==d&&(this.find[b].pos=this.currentPos)}findInside(e){if(this.find)for(let d=0;d<this.find.length;d++)this.find[d].pos==null&&e.nodeType==1&&e.contains(this.find[d].node)&&(this.find[d].pos=this.currentPos)}findAround(e,d,b){if(e!=d&&this.find)for(let tt=0;tt<this.find.length;tt++)this.find[tt].pos==null&&e.nodeType==1&&e.contains(this.find[tt].node)&&d.compareDocumentPosition(this.find[tt].node)&(b?2:4)&&(this.find[tt].pos=this.currentPos)}findInText(e){if(this.find)for(let d=0;d<this.find.length;d++)this.find[d].node==e&&(this.find[d].pos=this.currentPos-(e.nodeValue.length-this.find[d].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let d=e.split("/"),b=this.options.context,tt=!this.isOpen&&(!b||b.parent.type==this.nodes[0].type),nt=-(b?b.depth+1:0)+(tt?0:1),ot=(ht,mt)=>{for(;ht>=0;ht--){let gt=d[ht];if(gt==""){if(ht==d.length-1||ht==0)continue;for(;mt>=nt;mt--)if(ot(ht-1,mt))return!0;return!1}else{let yt=mt>0||mt==0&&tt?this.nodes[mt].type:b&&mt>=nt?b.node(mt-nt).type:null;if(!yt||yt.name!=gt&&yt.groups.indexOf(gt)==-1)return!1;mt--}}return!0};return ot(d.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let d=e.depth;d>=0;d--){let b=e.node(d).contentMatchAt(e.indexAfter(d)).defaultType;if(b&&b.isTextblock&&b.defaultAttrs)return b}for(let d in this.parser.schema.nodes){let b=this.parser.schema.nodes[d];if(b.isTextblock&&b.defaultAttrs)return b}}addPendingMark(e){let d=findSameMarkInSet(e,this.top.pendingMarks);d&&this.top.stashMarks.push(d),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,d){for(let b=this.open;b>=0;b--){let tt=this.nodes[b];if(tt.pendingMarks.lastIndexOf(e)>-1)tt.pendingMarks=e.removeFromSet(tt.pendingMarks);else{tt.activeMarks=e.removeFromSet(tt.activeMarks);let ot=tt.popFromStashMark(e);ot&&tt.type&&tt.type.allowsMarkType(ot.type)&&(tt.activeMarks=ot.addToSet(tt.activeMarks))}if(tt==d)break}}}function normalizeList(s){for(let e=s.firstChild,d=null;e;e=e.nextSibling){let b=e.nodeType==1?e.nodeName.toLowerCase():null;b&&listTags.hasOwnProperty(b)&&d?(d.appendChild(e),e=d):b=="li"?d=e:b&&(d=null)}}function matches(s,e){return(s.matches||s.msMatchesSelector||s.webkitMatchesSelector||s.mozMatchesSelector).call(s,e)}function copy$1(s){let e={};for(let d in s)e[d]=s[d];return e}function markMayApply(s,e){let d=e.schema.nodes;for(let b in d){let tt=d[b];if(!tt.allowsMarkType(s))continue;let nt=[],ot=ht=>{nt.push(ht);for(let mt=0;mt<ht.edgeCount;mt++){let{type:gt,next:yt}=ht.edge(mt);if(gt==e||nt.indexOf(yt)<0&&ot(yt))return!0}};if(ot(tt.contentMatch))return!0}}function findSameMarkInSet(s,e){for(let d=0;d<e.length;d++)if(s.eq(e[d]))return e[d]}class DOMSerializer{constructor(e,d){this.nodes=e,this.marks=d}serializeFragment(e,d={},b){b||(b=doc$1(d).createDocumentFragment());let tt=b,nt=[];return e.forEach(ot=>{if(nt.length||ot.marks.length){let ht=0,mt=0;for(;ht<nt.length&&mt<ot.marks.length;){let gt=ot.marks[mt];if(!this.marks[gt.type.name]){mt++;continue}if(!gt.eq(nt[ht][0])||gt.type.spec.spanning===!1)break;ht++,mt++}for(;ht<nt.length;)tt=nt.pop()[1];for(;mt<ot.marks.length;){let gt=ot.marks[mt++],yt=this.serializeMark(gt,ot.isInline,d);yt&&(nt.push([gt,tt]),tt.appendChild(yt.dom),tt=yt.contentDOM||yt.dom)}}tt.appendChild(this.serializeNodeInner(ot,d))}),b}serializeNodeInner(e,d){let{dom:b,contentDOM:tt}=renderSpec(doc$1(d),this.nodes[e.type.name](e),null,e.attrs);if(tt){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,d,tt)}return b}serializeNode(e,d={}){let b=this.serializeNodeInner(e,d);for(let tt=e.marks.length-1;tt>=0;tt--){let nt=this.serializeMark(e.marks[tt],e.isInline,d);nt&&((nt.contentDOM||nt.dom).appendChild(b),b=nt.dom)}return b}serializeMark(e,d,b={}){let tt=this.marks[e.type.name];return tt&&renderSpec(doc$1(b),tt(e,d),null,e.attrs)}static renderSpec(e,d,b=null,tt){return renderSpec(e,d,b,tt)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let d=gatherToDOM(e.nodes);return d.text||(d.text=b=>b.text),d}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(s){let e={};for(let d in s){let b=s[d].spec.toDOM;b&&(e[d]=b)}return e}function doc$1(s){return s.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(s){let e=suspiciousAttributeCache.get(s);return e===void 0&&suspiciousAttributeCache.set(s,e=suspiciousAttributesInner(s)),e}function suspiciousAttributesInner(s){let e=null;function d(b){if(b&&typeof b=="object")if(Array.isArray(b))if(typeof b[0]=="string")e||(e=[]),e.push(b);else for(let tt=0;tt<b.length;tt++)d(b[tt]);else for(let tt in b)d(b[tt])}return d(s),e}function renderSpec(s,e,d,b){if(typeof e=="string")return{dom:s.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let tt=e[0],nt;if(typeof tt!="string")throw new RangeError("Invalid array passed to renderSpec");if(b&&(nt=suspiciousAttributes(b))&&nt.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let ot=tt.indexOf(" ");ot>0&&(d=tt.slice(0,ot),tt=tt.slice(ot+1));let ht,mt=d?s.createElementNS(d,tt):s.createElement(tt),gt=e[1],yt=1;if(gt&&typeof gt=="object"&&gt.nodeType==null&&!Array.isArray(gt)){yt=2;for(let ft in gt)if(gt[ft]!=null){let st=ft.indexOf(" ");st>0?mt.setAttributeNS(ft.slice(0,st),ft.slice(st+1),gt[ft]):mt.setAttribute(ft,gt[ft])}}for(let ft=yt;ft<e.length;ft++){let st=e[ft];if(st===0){if(ft<e.length-1||ft>yt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:mt,contentDOM:mt}}else{let{dom:bt,contentDOM:vt}=renderSpec(s,st,d,b);if(mt.appendChild(bt),vt){if(ht)throw new RangeError("Multiple content holes");ht=vt}}}return{dom:mt,contentDOM:ht}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(s,e){return s+e*factor16}function recoverIndex(s){return s&lower16}function recoverOffset(s){return(s-(s&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,d,b){this.pos=e,this.delInfo=d,this.recover=b}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,d=!1){if(this.ranges=e,this.inverted=d,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let d=0,b=recoverIndex(e);if(!this.inverted)for(let tt=0;tt<b;tt++)d+=this.ranges[tt*3+2]-this.ranges[tt*3+1];return this.ranges[b*3]+d+recoverOffset(e)}mapResult(e,d=1){return this._map(e,d,!1)}map(e,d=1){return this._map(e,d,!0)}_map(e,d,b){let tt=0,nt=this.inverted?2:1,ot=this.inverted?1:2;for(let ht=0;ht<this.ranges.length;ht+=3){let mt=this.ranges[ht]-(this.inverted?tt:0);if(mt>e)break;let gt=this.ranges[ht+nt],yt=this.ranges[ht+ot],ft=mt+gt;if(e<=ft){let st=gt?e==mt?-1:e==ft?1:d:d,bt=mt+tt+(st<0?0:yt);if(b)return bt;let vt=e==(d<0?mt:ft)?null:makeRecover(ht/3,e-mt),xt=e==mt?DEL_AFTER:e==ft?DEL_BEFORE:DEL_ACROSS;return(d<0?e!=mt:e!=ft)&&(xt|=DEL_SIDE),new MapResult(bt,xt,vt)}tt+=yt-gt}return b?e+tt:new MapResult(e+tt,0,null)}touches(e,d){let b=0,tt=recoverIndex(d),nt=this.inverted?2:1,ot=this.inverted?1:2;for(let ht=0;ht<this.ranges.length;ht+=3){let mt=this.ranges[ht]-(this.inverted?b:0);if(mt>e)break;let gt=this.ranges[ht+nt],yt=mt+gt;if(e<=yt&&ht==tt*3)return!0;b+=this.ranges[ht+ot]-gt}return!1}forEach(e){let d=this.inverted?2:1,b=this.inverted?1:2;for(let tt=0,nt=0;tt<this.ranges.length;tt+=3){let ot=this.ranges[tt],ht=ot-(this.inverted?nt:0),mt=ot+(this.inverted?0:nt),gt=this.ranges[tt+d],yt=this.ranges[tt+b];e(ht,ht+gt,mt,mt+yt),nt+=yt-gt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e=[],d,b=0,tt=e.length){this.maps=e,this.mirror=d,this.from=b,this.to=tt}slice(e=0,d=this.maps.length){return new Mapping(this.maps,this.mirror,e,d)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,d){this.to=this.maps.push(e),d!=null&&this.setMirror(this.maps.length-1,d)}appendMapping(e){for(let d=0,b=this.maps.length;d<e.maps.length;d++){let tt=e.getMirror(d);this.appendMap(e.maps[d],tt!=null&&tt<d?b+tt:void 0)}}getMirror(e){if(this.mirror){for(let d=0;d<this.mirror.length;d++)if(this.mirror[d]==e)return this.mirror[d+(d%2?-1:1)]}}setMirror(e,d){this.mirror||(this.mirror=[]),this.mirror.push(e,d)}appendMappingInverted(e){for(let d=e.maps.length-1,b=this.maps.length+e.maps.length;d>=0;d--){let tt=e.getMirror(d);this.appendMap(e.maps[d].invert(),tt!=null&&tt>d?b-tt-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,d=1){if(this.mirror)return this._map(e,d,!0);for(let b=this.from;b<this.to;b++)e=this.maps[b].map(e,d);return e}mapResult(e,d=1){return this._map(e,d,!1)}_map(e,d,b){let tt=0;for(let nt=this.from;nt<this.to;nt++){let ot=this.maps[nt],ht=ot.mapResult(e,d);if(ht.recover!=null){let mt=this.getMirror(nt);if(mt!=null&&mt>nt&&mt<this.to){nt=mt,e=this.maps[mt].recover(ht.recover);continue}}tt|=ht.delInfo,e=ht.pos}return b?e:new MapResult(e,tt,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,d){if(!d||!d.stepType)throw new RangeError("Invalid input for Step.fromJSON");let b=stepsByID[d.stepType];if(!b)throw new RangeError(`No step type ${d.stepType} defined`);return b.fromJSON(e,d)}static jsonID(e,d){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=d,d.prototype.jsonID=e,d}}class StepResult{constructor(e,d){this.doc=e,this.failed=d}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,d,b,tt){try{return StepResult.ok(e.replace(d,b,tt))}catch(nt){if(nt instanceof ReplaceError)return StepResult.fail(nt.message);throw nt}}}function mapFragment(s,e,d){let b=[];for(let tt=0;tt<s.childCount;tt++){let nt=s.child(tt);nt.content.size&&(nt=nt.copy(mapFragment(nt.content,e,nt))),nt.isInline&&(nt=e(nt,d,tt)),b.push(nt)}return Fragment.fromArray(b)}class AddMarkStep extends Step{constructor(e,d,b){super(),this.from=e,this.to=d,this.mark=b}apply(e){let d=e.slice(this.from,this.to),b=e.resolve(this.from),tt=b.node(b.sharedDepth(this.to)),nt=new Slice(mapFragment(d.content,(ot,ht)=>!ot.isAtom||!ht.type.allowsMarkType(this.mark.type)?ot:ot.mark(this.mark.addToSet(ot.marks)),tt),d.openStart,d.openEnd);return StepResult.fromReplace(e,this.from,this.to,nt)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let d=e.mapResult(this.from,1),b=e.mapResult(this.to,-1);return d.deleted&&b.deleted||d.pos>=b.pos?null:new AddMarkStep(d.pos,b.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,d){if(typeof d.from!="number"||typeof d.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(d.from,d.to,e.markFromJSON(d.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,d,b){super(),this.from=e,this.to=d,this.mark=b}apply(e){let d=e.slice(this.from,this.to),b=new Slice(mapFragment(d.content,tt=>tt.mark(this.mark.removeFromSet(tt.marks)),e),d.openStart,d.openEnd);return StepResult.fromReplace(e,this.from,this.to,b)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let d=e.mapResult(this.from,1),b=e.mapResult(this.to,-1);return d.deleted&&b.deleted||d.pos>=b.pos?null:new RemoveMarkStep(d.pos,b.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,d){if(typeof d.from!="number"||typeof d.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(d.from,d.to,e.markFromJSON(d.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,d){super(),this.pos=e,this.mark=d}apply(e){let d=e.nodeAt(this.pos);if(!d)return StepResult.fail("No node at mark step's position");let b=d.type.create(d.attrs,null,this.mark.addToSet(d.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(b),0,d.isLeaf?0:1))}invert(e){let d=e.nodeAt(this.pos);if(d){let b=this.mark.addToSet(d.marks);if(b.length==d.marks.length){for(let tt=0;tt<d.marks.length;tt++)if(!d.marks[tt].isInSet(b))return new AddNodeMarkStep(this.pos,d.marks[tt]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let d=e.mapResult(this.pos,1);return d.deletedAfter?null:new AddNodeMarkStep(d.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,d){if(typeof d.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(d.pos,e.markFromJSON(d.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,d){super(),this.pos=e,this.mark=d}apply(e){let d=e.nodeAt(this.pos);if(!d)return StepResult.fail("No node at mark step's position");let b=d.type.create(d.attrs,null,this.mark.removeFromSet(d.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(b),0,d.isLeaf?0:1))}invert(e){let d=e.nodeAt(this.pos);return!d||!this.mark.isInSet(d.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(e){let d=e.mapResult(this.pos,1);return d.deletedAfter?null:new RemoveNodeMarkStep(d.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,d){if(typeof d.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(d.pos,e.markFromJSON(d.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,d,b,tt=!1){super(),this.from=e,this.to=d,this.slice=b,this.structure=tt}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let d=e.mapResult(this.from,1),b=e.mapResult(this.to,-1);return d.deletedAcross&&b.deletedAcross?null:new ReplaceStep(d.pos,Math.max(d.pos,b.pos),this.slice)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let d=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),d,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let d=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,d,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,d){if(typeof d.from!="number"||typeof d.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(d.from,d.to,Slice.fromJSON(e,d.slice),!!d.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,d,b,tt,nt,ot,ht=!1){super(),this.from=e,this.to=d,this.gapFrom=b,this.gapTo=tt,this.slice=nt,this.insert=ot,this.structure=ht}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let d=e.slice(this.gapFrom,this.gapTo);if(d.openStart||d.openEnd)return StepResult.fail("Gap is not a flat range");let b=this.slice.insertAt(this.insert,d.content);return b?StepResult.fromReplace(e,this.from,this.to,b):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let d=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+d,this.from+this.insert,this.from+this.insert+d,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let d=e.mapResult(this.from,1),b=e.mapResult(this.to,-1),tt=this.from==this.gapFrom?d.pos:e.map(this.gapFrom,-1),nt=this.to==this.gapTo?b.pos:e.map(this.gapTo,1);return d.deletedAcross&&b.deletedAcross||tt<d.pos||nt>b.pos?null:new ReplaceAroundStep(d.pos,b.pos,tt,nt,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,d){if(typeof d.from!="number"||typeof d.to!="number"||typeof d.gapFrom!="number"||typeof d.gapTo!="number"||typeof d.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(d.from,d.to,d.gapFrom,d.gapTo,Slice.fromJSON(e,d.slice),d.insert,!!d.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(s,e,d){let b=s.resolve(e),tt=d-e,nt=b.depth;for(;tt>0&&nt>0&&b.indexAfter(nt)==b.node(nt).childCount;)nt--,tt--;if(tt>0){let ot=b.node(nt).maybeChild(b.indexAfter(nt));for(;tt>0;){if(!ot||ot.isLeaf)return!0;ot=ot.firstChild,tt--}}return!1}function addMark(s,e,d,b){let tt=[],nt=[],ot,ht;s.doc.nodesBetween(e,d,(mt,gt,yt)=>{if(!mt.isInline)return;let ft=mt.marks;if(!b.isInSet(ft)&&yt.type.allowsMarkType(b.type)){let st=Math.max(gt,e),bt=Math.min(gt+mt.nodeSize,d),vt=b.addToSet(ft);for(let xt=0;xt<ft.length;xt++)ft[xt].isInSet(vt)||(ot&&ot.to==st&&ot.mark.eq(ft[xt])?ot.to=bt:tt.push(ot=new RemoveMarkStep(st,bt,ft[xt])));ht&&ht.to==st?ht.to=bt:nt.push(ht=new AddMarkStep(st,bt,b))}}),tt.forEach(mt=>s.step(mt)),nt.forEach(mt=>s.step(mt))}function removeMark(s,e,d,b){let tt=[],nt=0;s.doc.nodesBetween(e,d,(ot,ht)=>{if(!ot.isInline)return;nt++;let mt=null;if(b instanceof MarkType){let gt=ot.marks,yt;for(;yt=b.isInSet(gt);)(mt||(mt=[])).push(yt),gt=yt.removeFromSet(gt)}else b?b.isInSet(ot.marks)&&(mt=[b]):mt=ot.marks;if(mt&&mt.length){let gt=Math.min(ht+ot.nodeSize,d);for(let yt=0;yt<mt.length;yt++){let ft=mt[yt],st;for(let bt=0;bt<tt.length;bt++){let vt=tt[bt];vt.step==nt-1&&ft.eq(tt[bt].style)&&(st=vt)}st?(st.to=gt,st.step=nt):tt.push({style:ft,from:Math.max(ht,e),to:gt,step:nt})}}}),tt.forEach(ot=>s.step(new RemoveMarkStep(ot.from,ot.to,ot.style)))}function clearIncompatible(s,e,d,b=d.contentMatch,tt=!0){let nt=s.doc.nodeAt(e),ot=[],ht=e+1;for(let mt=0;mt<nt.childCount;mt++){let gt=nt.child(mt),yt=ht+gt.nodeSize,ft=b.matchType(gt.type);if(!ft)ot.push(new ReplaceStep(ht,yt,Slice.empty));else{b=ft;for(let st=0;st<gt.marks.length;st++)d.allowsMarkType(gt.marks[st].type)||s.step(new RemoveMarkStep(ht,yt,gt.marks[st]));if(tt&&gt.isText&&d.whitespace!="pre"){let st,bt=/\r?\n|\r/g,vt;for(;st=bt.exec(gt.text);)vt||(vt=new Slice(Fragment.from(d.schema.text(" ",d.allowedMarks(gt.marks))),0,0)),ot.push(new ReplaceStep(ht+st.index,ht+st.index+st[0].length,vt))}}ht=yt}if(!b.validEnd){let mt=b.fillBefore(Fragment.empty,!0);s.replace(ht,ht,new Slice(mt,0,0))}for(let mt=ot.length-1;mt>=0;mt--)s.step(ot[mt])}function canCut(s,e,d){return(e==0||s.canReplace(e,s.childCount))&&(d==s.childCount||s.canReplace(0,d))}function liftTarget(s){let d=s.parent.content.cutByIndex(s.startIndex,s.endIndex);for(let b=s.depth;;--b){let tt=s.$from.node(b),nt=s.$from.index(b),ot=s.$to.indexAfter(b);if(b<s.depth&&tt.canReplace(nt,ot,d))return b;if(b==0||tt.type.spec.isolating||!canCut(tt,nt,ot))break}return null}function lift$3(s,e,d){let{$from:b,$to:tt,depth:nt}=e,ot=b.before(nt+1),ht=tt.after(nt+1),mt=ot,gt=ht,yt=Fragment.empty,ft=0;for(let vt=nt,xt=!1;vt>d;vt--)xt||b.index(vt)>0?(xt=!0,yt=Fragment.from(b.node(vt).copy(yt)),ft++):mt--;let st=Fragment.empty,bt=0;for(let vt=nt,xt=!1;vt>d;vt--)xt||tt.after(vt+1)<tt.end(vt)?(xt=!0,st=Fragment.from(tt.node(vt).copy(st)),bt++):gt++;s.step(new ReplaceAroundStep(mt,gt,ot,ht,new Slice(yt.append(st),ft,bt),yt.size-ft,!0))}function findWrapping(s,e,d=null,b=s){let tt=findWrappingOutside(s,e),nt=tt&&findWrappingInside(b,e);return nt?tt.map(withAttrs).concat({type:e,attrs:d}).concat(nt.map(withAttrs)):null}function withAttrs(s){return{type:s,attrs:null}}function findWrappingOutside(s,e){let{parent:d,startIndex:b,endIndex:tt}=s,nt=d.contentMatchAt(b).findWrapping(e);if(!nt)return null;let ot=nt.length?nt[0]:e;return d.canReplaceWith(b,tt,ot)?nt:null}function findWrappingInside(s,e){let{parent:d,startIndex:b,endIndex:tt}=s,nt=d.child(b),ot=e.contentMatch.findWrapping(nt.type);if(!ot)return null;let mt=(ot.length?ot[ot.length-1]:e).contentMatch;for(let gt=b;mt&&gt<tt;gt++)mt=mt.matchType(d.child(gt).type);return!mt||!mt.validEnd?null:ot}function wrap(s,e,d){let b=Fragment.empty;for(let ot=d.length-1;ot>=0;ot--){if(b.size){let ht=d[ot].type.contentMatch.matchFragment(b);if(!ht||!ht.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}b=Fragment.from(d[ot].type.create(d[ot].attrs,b))}let tt=e.start,nt=e.end;s.step(new ReplaceAroundStep(tt,nt,tt,nt,new Slice(b,0,0),d.length,!0))}function setBlockType$1(s,e,d,b,tt){if(!b.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let nt=s.steps.length;s.doc.nodesBetween(e,d,(ot,ht)=>{if(ot.isTextblock&&!ot.hasMarkup(b,tt)&&canChangeType(s.doc,s.mapping.slice(nt).map(ht),b)){let mt=null;if(b.schema.linebreakReplacement){let st=b.whitespace=="pre",bt=!!b.contentMatch.matchType(b.schema.linebreakReplacement);st&&!bt?mt=!1:!st&&bt&&(mt=!0)}mt===!1&&replaceLinebreaks(s,ot,ht,nt),clearIncompatible(s,s.mapping.slice(nt).map(ht,1),b,void 0,mt===null);let gt=s.mapping.slice(nt),yt=gt.map(ht,1),ft=gt.map(ht+ot.nodeSize,1);return s.step(new ReplaceAroundStep(yt,ft,yt+1,ft-1,new Slice(Fragment.from(b.create(tt,null,ot.marks)),0,0),1,!0)),mt===!0&&replaceNewlines(s,ot,ht,nt),!1}})}function replaceNewlines(s,e,d,b){e.forEach((tt,nt)=>{if(tt.isText){let ot,ht=/\r?\n|\r/g;for(;ot=ht.exec(tt.text);){let mt=s.mapping.slice(b).map(d+1+nt+ot.index);s.replaceWith(mt,mt+1,e.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(s,e,d,b){e.forEach((tt,nt)=>{if(tt.type==tt.type.schema.linebreakReplacement){let ot=s.mapping.slice(b).map(d+1+nt);s.replaceWith(ot,ot+1,e.type.schema.text(`
`))}})}function canChangeType(s,e,d){let b=s.resolve(e),tt=b.index();return b.parent.canReplaceWith(tt,tt+1,d)}function setNodeMarkup(s,e,d,b,tt){let nt=s.doc.nodeAt(e);if(!nt)throw new RangeError("No node at given position");d||(d=nt.type);let ot=d.create(b,null,tt||nt.marks);if(nt.isLeaf)return s.replaceWith(e,e+nt.nodeSize,ot);if(!d.validContent(nt.content))throw new RangeError("Invalid content for node type "+d.name);s.step(new ReplaceAroundStep(e,e+nt.nodeSize,e+1,e+nt.nodeSize-1,new Slice(Fragment.from(ot),0,0),1,!0))}function canSplit(s,e,d=1,b){let tt=s.resolve(e),nt=tt.depth-d,ot=b&&b[b.length-1]||tt.parent;if(nt<0||tt.parent.type.spec.isolating||!tt.parent.canReplace(tt.index(),tt.parent.childCount)||!ot.type.validContent(tt.parent.content.cutByIndex(tt.index(),tt.parent.childCount)))return!1;for(let gt=tt.depth-1,yt=d-2;gt>nt;gt--,yt--){let ft=tt.node(gt),st=tt.index(gt);if(ft.type.spec.isolating)return!1;let bt=ft.content.cutByIndex(st,ft.childCount),vt=b&&b[yt+1];vt&&(bt=bt.replaceChild(0,vt.type.create(vt.attrs)));let xt=b&&b[yt]||ft;if(!ft.canReplace(st+1,ft.childCount)||!xt.type.validContent(bt))return!1}let ht=tt.indexAfter(nt),mt=b&&b[0];return tt.node(nt).canReplaceWith(ht,ht,mt?mt.type:tt.node(nt+1).type)}function split(s,e,d=1,b){let tt=s.doc.resolve(e),nt=Fragment.empty,ot=Fragment.empty;for(let ht=tt.depth,mt=tt.depth-d,gt=d-1;ht>mt;ht--,gt--){nt=Fragment.from(tt.node(ht).copy(nt));let yt=b&&b[gt];ot=Fragment.from(yt?yt.type.create(yt.attrs,ot):tt.node(ht).copy(ot))}s.step(new ReplaceStep(e,e,new Slice(nt.append(ot),d,d),!0))}function canJoin(s,e){let d=s.resolve(e),b=d.index();return joinable(d.nodeBefore,d.nodeAfter)&&d.parent.canReplace(b,b+1)}function joinable(s,e){return!!(s&&e&&!s.isLeaf&&s.canAppend(e))}function joinPoint(s,e,d=-1){let b=s.resolve(e);for(let tt=b.depth;;tt--){let nt,ot,ht=b.index(tt);if(tt==b.depth?(nt=b.nodeBefore,ot=b.nodeAfter):d>0?(nt=b.node(tt+1),ht++,ot=b.node(tt).maybeChild(ht)):(nt=b.node(tt).maybeChild(ht-1),ot=b.node(tt+1)),nt&&!nt.isTextblock&&joinable(nt,ot)&&b.node(tt).canReplace(ht,ht+1))return e;if(tt==0)break;e=d<0?b.before(tt):b.after(tt)}}function join(s,e,d){let b=new ReplaceStep(e-d,e+d,Slice.empty,!0);s.step(b)}function insertPoint(s,e,d){let b=s.resolve(e);if(b.parent.canReplaceWith(b.index(),b.index(),d))return e;if(b.parentOffset==0)for(let tt=b.depth-1;tt>=0;tt--){let nt=b.index(tt);if(b.node(tt).canReplaceWith(nt,nt,d))return b.before(tt+1);if(nt>0)return null}if(b.parentOffset==b.parent.content.size)for(let tt=b.depth-1;tt>=0;tt--){let nt=b.indexAfter(tt);if(b.node(tt).canReplaceWith(nt,nt,d))return b.after(tt+1);if(nt<b.node(tt).childCount)return null}return null}function dropPoint(s,e,d){let b=s.resolve(e);if(!d.content.size)return e;let tt=d.content;for(let nt=0;nt<d.openStart;nt++)tt=tt.firstChild.content;for(let nt=1;nt<=(d.openStart==0&&d.size?2:1);nt++)for(let ot=b.depth;ot>=0;ot--){let ht=ot==b.depth?0:b.pos<=(b.start(ot+1)+b.end(ot+1))/2?-1:1,mt=b.index(ot)+(ht>0?1:0),gt=b.node(ot),yt=!1;if(nt==1)yt=gt.canReplace(mt,mt,tt);else{let ft=gt.contentMatchAt(mt).findWrapping(tt.firstChild.type);yt=ft&&gt.canReplaceWith(mt,mt,ft[0])}if(yt)return ht==0?b.pos:ht<0?b.before(ot+1):b.after(ot+1)}return null}function replaceStep(s,e,d=e,b=Slice.empty){if(e==d&&!b.size)return null;let tt=s.resolve(e),nt=s.resolve(d);return fitsTrivially(tt,nt,b)?new ReplaceStep(e,d,b):new Fitter(tt,nt,b).fit()}function fitsTrivially(s,e,d){return!d.openStart&&!d.openEnd&&s.start()==e.start()&&s.parent.canReplace(s.index(),e.index(),d.content)}class Fitter{constructor(e,d,b){this.$from=e,this.$to=d,this.unplaced=b,this.frontier=[],this.placed=Fragment.empty;for(let tt=0;tt<=e.depth;tt++){let nt=e.node(tt);this.frontier.push({type:nt.type,match:nt.contentMatchAt(e.indexAfter(tt))})}for(let tt=e.depth;tt>0;tt--)this.placed=Fragment.from(e.node(tt).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let gt=this.findFittable();gt?this.placeNodes(gt):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),d=this.placed.size-this.depth-this.$from.depth,b=this.$from,tt=this.close(e<0?this.$to:b.doc.resolve(e));if(!tt)return null;let nt=this.placed,ot=b.depth,ht=tt.depth;for(;ot&&ht&&nt.childCount==1;)nt=nt.firstChild.content,ot--,ht--;let mt=new Slice(nt,ot,ht);return e>-1?new ReplaceAroundStep(b.pos,e,this.$to.pos,this.$to.end(),mt,d):mt.size||b.pos!=this.$to.pos?new ReplaceStep(b.pos,tt.pos,mt):null}findFittable(){let e=this.unplaced.openStart;for(let d=this.unplaced.content,b=0,tt=this.unplaced.openEnd;b<e;b++){let nt=d.firstChild;if(d.childCount>1&&(tt=0),nt.type.spec.isolating&&tt<=b){e=b;break}d=nt.content}for(let d=1;d<=2;d++)for(let b=d==1?e:this.unplaced.openStart;b>=0;b--){let tt,nt=null;b?(nt=contentAt(this.unplaced.content,b-1).firstChild,tt=nt.content):tt=this.unplaced.content;let ot=tt.firstChild;for(let ht=this.depth;ht>=0;ht--){let{type:mt,match:gt}=this.frontier[ht],yt,ft=null;if(d==1&&(ot?gt.matchType(ot.type)||(ft=gt.fillBefore(Fragment.from(ot),!1)):nt&&mt.compatibleContent(nt.type)))return{sliceDepth:b,frontierDepth:ht,parent:nt,inject:ft};if(d==2&&ot&&(yt=gt.findWrapping(ot.type)))return{sliceDepth:b,frontierDepth:ht,parent:nt,wrap:yt};if(nt&&gt.matchType(nt.type))break}}}openMore(){let{content:e,openStart:d,openEnd:b}=this.unplaced,tt=contentAt(e,d);return!tt.childCount||tt.firstChild.isLeaf?!1:(this.unplaced=new Slice(e,d+1,Math.max(b,tt.size+d>=e.size-b?d+1:0)),!0)}dropNode(){let{content:e,openStart:d,openEnd:b}=this.unplaced,tt=contentAt(e,d);if(tt.childCount<=1&&d>0){let nt=e.size-d<=d+tt.size;this.unplaced=new Slice(dropFromFragment(e,d-1,1),d-1,nt?d-1:b)}else this.unplaced=new Slice(dropFromFragment(e,d,1),d,b)}placeNodes({sliceDepth:e,frontierDepth:d,parent:b,inject:tt,wrap:nt}){for(;this.depth>d;)this.closeFrontierNode();if(nt)for(let xt=0;xt<nt.length;xt++)this.openFrontierNode(nt[xt]);let ot=this.unplaced,ht=b?b.content:ot.content,mt=ot.openStart-e,gt=0,yt=[],{match:ft,type:st}=this.frontier[d];if(tt){for(let xt=0;xt<tt.childCount;xt++)yt.push(tt.child(xt));ft=ft.matchFragment(tt)}let bt=ht.size+e-(ot.content.size-ot.openEnd);for(;gt<ht.childCount;){let xt=ht.child(gt),wt=ft.matchType(xt.type);if(!wt)break;gt++,(gt>1||mt==0||xt.content.size)&&(ft=wt,yt.push(closeNodeStart(xt.mark(st.allowedMarks(xt.marks)),gt==1?mt:0,gt==ht.childCount?bt:-1)))}let vt=gt==ht.childCount;vt||(bt=-1),this.placed=addToFragment(this.placed,d,Fragment.from(yt)),this.frontier[d].match=ft,vt&&bt<0&&b&&b.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let xt=0,wt=ht;xt<bt;xt++){let St=wt.lastChild;this.frontier.push({type:St.type,match:St.contentMatchAt(St.childCount)}),wt=St.content}this.unplaced=vt?e==0?Slice.empty:new Slice(dropFromFragment(ot.content,e-1,1),e-1,bt<0?ot.openEnd:e-1):new Slice(dropFromFragment(ot.content,e,gt),ot.openStart,ot.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],d;if(!e.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(d=this.findCloseLevel(this.$to))&&d.depth==this.depth)return-1;let{depth:b}=this.$to,tt=this.$to.after(b);for(;b>1&&tt==this.$to.end(--b);)++tt;return tt}findCloseLevel(e){e:for(let d=Math.min(this.depth,e.depth);d>=0;d--){let{match:b,type:tt}=this.frontier[d],nt=d<e.depth&&e.end(d+1)==e.pos+(e.depth-(d+1)),ot=contentAfterFits(e,d,tt,b,nt);if(ot){for(let ht=d-1;ht>=0;ht--){let{match:mt,type:gt}=this.frontier[ht],yt=contentAfterFits(e,ht,gt,mt,!0);if(!yt||yt.childCount)continue e}return{depth:d,fit:ot,move:nt?e.doc.resolve(e.after(d+1)):e}}}}close(e){let d=this.findCloseLevel(e);if(!d)return null;for(;this.depth>d.depth;)this.closeFrontierNode();d.fit.childCount&&(this.placed=addToFragment(this.placed,d.depth,d.fit)),e=d.move;for(let b=d.depth+1;b<=e.depth;b++){let tt=e.node(b),nt=tt.type.contentMatch.fillBefore(tt.content,!0,e.index(b));this.openFrontierNode(tt.type,tt.attrs,nt)}return e}openFrontierNode(e,d=null,b){let tt=this.frontier[this.depth];tt.match=tt.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment.from(e.create(d,b))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let d=this.frontier.pop().match.fillBefore(Fragment.empty,!0);d.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,d))}}function dropFromFragment(s,e,d){return e==0?s.cutByIndex(d,s.childCount):s.replaceChild(0,s.firstChild.copy(dropFromFragment(s.firstChild.content,e-1,d)))}function addToFragment(s,e,d){return e==0?s.append(d):s.replaceChild(s.childCount-1,s.lastChild.copy(addToFragment(s.lastChild.content,e-1,d)))}function contentAt(s,e){for(let d=0;d<e;d++)s=s.firstChild.content;return s}function closeNodeStart(s,e,d){if(e<=0)return s;let b=s.content;return e>1&&(b=b.replaceChild(0,closeNodeStart(b.firstChild,e-1,b.childCount==1?d-1:0))),e>0&&(b=s.type.contentMatch.fillBefore(b).append(b),d<=0&&(b=b.append(s.type.contentMatch.matchFragment(b).fillBefore(Fragment.empty,!0)))),s.copy(b)}function contentAfterFits(s,e,d,b,tt){let nt=s.node(e),ot=tt?s.indexAfter(e):s.index(e);if(ot==nt.childCount&&!d.compatibleContent(nt.type))return null;let ht=b.fillBefore(nt.content,!0,ot);return ht&&!invalidMarks(d,nt.content,ot)?ht:null}function invalidMarks(s,e,d){for(let b=d;b<e.childCount;b++)if(!s.allowsMarks(e.child(b).marks))return!0;return!1}function definesContent(s){return s.spec.defining||s.spec.definingForContent}function replaceRange(s,e,d,b){if(!b.size)return s.deleteRange(e,d);let tt=s.doc.resolve(e),nt=s.doc.resolve(d);if(fitsTrivially(tt,nt,b))return s.step(new ReplaceStep(e,d,b));let ot=coveredDepths(tt,s.doc.resolve(d));ot[ot.length-1]==0&&ot.pop();let ht=-(tt.depth+1);ot.unshift(ht);for(let st=tt.depth,bt=tt.pos-1;st>0;st--,bt--){let vt=tt.node(st).type.spec;if(vt.defining||vt.definingAsContext||vt.isolating)break;ot.indexOf(st)>-1?ht=st:tt.before(st)==bt&&ot.splice(1,0,-st)}let mt=ot.indexOf(ht),gt=[],yt=b.openStart;for(let st=b.content,bt=0;;bt++){let vt=st.firstChild;if(gt.push(vt),bt==b.openStart)break;st=vt.content}for(let st=yt-1;st>=0;st--){let bt=gt[st],vt=definesContent(bt.type);if(vt&&!bt.sameMarkup(tt.node(Math.abs(ht)-1)))yt=st;else if(vt||!bt.type.isTextblock)break}for(let st=b.openStart;st>=0;st--){let bt=(st+yt+1)%(b.openStart+1),vt=gt[bt];if(vt)for(let xt=0;xt<ot.length;xt++){let wt=ot[(xt+mt)%ot.length],St=!0;wt<0&&(St=!1,wt=-wt);let _t=tt.node(wt-1),Tt=tt.index(wt-1);if(_t.canReplaceWith(Tt,Tt,vt.type,vt.marks))return s.replace(tt.before(wt),St?nt.after(wt):d,new Slice(closeFragment(b.content,0,b.openStart,bt),bt,b.openEnd))}}let ft=s.steps.length;for(let st=ot.length-1;st>=0&&(s.replace(e,d,b),!(s.steps.length>ft));st--){let bt=ot[st];bt<0||(e=tt.before(bt),d=nt.after(bt))}}function closeFragment(s,e,d,b,tt){if(e<d){let nt=s.firstChild;s=s.replaceChild(0,nt.copy(closeFragment(nt.content,e+1,d,b,nt)))}if(e>b){let nt=tt.contentMatchAt(0),ot=nt.fillBefore(s).append(s);s=ot.append(nt.matchFragment(ot).fillBefore(Fragment.empty,!0))}return s}function replaceRangeWith(s,e,d,b){if(!b.isInline&&e==d&&s.doc.resolve(e).parent.content.size){let tt=insertPoint(s.doc,e,b.type);tt!=null&&(e=d=tt)}s.replaceRange(e,d,new Slice(Fragment.from(b),0,0))}function deleteRange$1(s,e,d){let b=s.doc.resolve(e),tt=s.doc.resolve(d),nt=coveredDepths(b,tt);for(let ot=0;ot<nt.length;ot++){let ht=nt[ot],mt=ot==nt.length-1;if(mt&&ht==0||b.node(ht).type.contentMatch.validEnd)return s.delete(b.start(ht),tt.end(ht));if(ht>0&&(mt||b.node(ht-1).canReplace(b.index(ht-1),tt.indexAfter(ht-1))))return s.delete(b.before(ht),tt.after(ht))}for(let ot=1;ot<=b.depth&&ot<=tt.depth;ot++)if(e-b.start(ot)==b.depth-ot&&d>b.end(ot)&&tt.end(ot)-d!=tt.depth-ot)return s.delete(b.before(ot),d);s.delete(e,d)}function coveredDepths(s,e){let d=[],b=Math.min(s.depth,e.depth);for(let tt=b;tt>=0;tt--){let nt=s.start(tt);if(nt<s.pos-(s.depth-tt)||e.end(tt)>e.pos+(e.depth-tt)||s.node(tt).type.spec.isolating||e.node(tt).type.spec.isolating)break;(nt==e.start(tt)||tt==s.depth&&tt==e.depth&&s.parent.inlineContent&&e.parent.inlineContent&&tt&&e.start(tt-1)==nt-1)&&d.push(tt)}return d}class AttrStep extends Step{constructor(e,d,b){super(),this.pos=e,this.attr=d,this.value=b}apply(e){let d=e.nodeAt(this.pos);if(!d)return StepResult.fail("No node at attribute step's position");let b=Object.create(null);for(let nt in d.attrs)b[nt]=d.attrs[nt];b[this.attr]=this.value;let tt=d.type.create(b,null,d.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(tt),0,d.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let d=e.mapResult(this.pos,1);return d.deletedAfter?null:new AttrStep(d.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,d){if(typeof d.pos!="number"||typeof d.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(d.pos,d.attr,d.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,d){super(),this.attr=e,this.value=d}apply(e){let d=Object.create(null);for(let tt in e.attrs)d[tt]=e.attrs[tt];d[this.attr]=this.value;let b=e.type.create(d,e.content,e.marks);return StepResult.ok(b)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,d){if(typeof d.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(d.attr,d.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function s(e){let d=Error.call(this,e);return d.__proto__=s.prototype,d};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";let Transform$1=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let d=this.maybeStep(e);if(d.failed)throw new TransformError(d.failed);return this}maybeStep(e){let d=e.apply(this.doc);return d.failed||this.addStep(e,d.doc),d}get docChanged(){return this.steps.length>0}addStep(e,d){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=d}replace(e,d=e,b=Slice.empty){let tt=replaceStep(this.doc,e,d,b);return tt&&this.step(tt),this}replaceWith(e,d,b){return this.replace(e,d,new Slice(Fragment.from(b),0,0))}delete(e,d){return this.replace(e,d,Slice.empty)}insert(e,d){return this.replaceWith(e,e,d)}replaceRange(e,d,b){return replaceRange(this,e,d,b),this}replaceRangeWith(e,d,b){return replaceRangeWith(this,e,d,b),this}deleteRange(e,d){return deleteRange$1(this,e,d),this}lift(e,d){return lift$3(this,e,d),this}join(e,d=1){return join(this,e,d),this}wrap(e,d){return wrap(this,e,d),this}setBlockType(e,d=e,b,tt=null){return setBlockType$1(this,e,d,b,tt),this}setNodeMarkup(e,d,b=null,tt){return setNodeMarkup(this,e,d,b,tt),this}setNodeAttribute(e,d,b){return this.step(new AttrStep(e,d,b)),this}setDocAttribute(e,d){return this.step(new DocAttrStep(e,d)),this}addNodeMark(e,d){return this.step(new AddNodeMarkStep(e,d)),this}removeNodeMark(e,d){if(!(d instanceof Mark$1)){let b=this.doc.nodeAt(e);if(!b)throw new RangeError("No node at position "+e);if(d=d.isInSet(b.marks),!d)return this}return this.step(new RemoveNodeMarkStep(e,d)),this}split(e,d=1,b){return split(this,e,d,b),this}addMark(e,d,b){return addMark(this,e,d,b),this}removeMark(e,d,b){return removeMark(this,e,d,b),this}clearIncompatible(e,d,b){return clearIncompatible(this,e,d,b),this}};const classesById=Object.create(null);let Selection$2=class{constructor(e,d,b){this.$anchor=e,this.$head=d,this.ranges=b||[new SelectionRange(e.min(d),e.max(d))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let d=0;d<e.length;d++)if(e[d].$from.pos!=e[d].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,d=Slice.empty){let b=d.content.lastChild,tt=null;for(let ht=0;ht<d.openEnd;ht++)tt=b,b=b.lastChild;let nt=e.steps.length,ot=this.ranges;for(let ht=0;ht<ot.length;ht++){let{$from:mt,$to:gt}=ot[ht],yt=e.mapping.slice(nt);e.replaceRange(yt.map(mt.pos),yt.map(gt.pos),ht?Slice.empty:d),ht==0&&selectionToInsertionEnd$1(e,nt,(b?b.isInline:tt&&tt.isTextblock)?-1:1)}}replaceWith(e,d){let b=e.steps.length,tt=this.ranges;for(let nt=0;nt<tt.length;nt++){let{$from:ot,$to:ht}=tt[nt],mt=e.mapping.slice(b),gt=mt.map(ot.pos),yt=mt.map(ht.pos);nt?e.deleteRange(gt,yt):(e.replaceRangeWith(gt,yt,d),selectionToInsertionEnd$1(e,b,d.isInline?-1:1))}}static findFrom(e,d,b=!1){let tt=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),d,b);if(tt)return tt;for(let nt=e.depth-1;nt>=0;nt--){let ot=d<0?findSelectionIn(e.node(0),e.node(nt),e.before(nt+1),e.index(nt),d,b):findSelectionIn(e.node(0),e.node(nt),e.after(nt+1),e.index(nt)+1,d,b);if(ot)return ot}return null}static near(e,d=1){return this.findFrom(e,d)||this.findFrom(e,-d)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,d){if(!d||!d.type)throw new RangeError("Invalid input for Selection.fromJSON");let b=classesById[d.type];if(!b)throw new RangeError(`No selection type ${d.type} defined`);return b.fromJSON(e,d)}static jsonID(e,d){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=d,d.prototype.jsonID=e,d}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}};Selection$2.prototype.visible=!0;class SelectionRange{constructor(e,d){this.$from=e,this.$to=d}}let warnedAboutTextSelection=!1;function checkTextSelection(s){!warnedAboutTextSelection&&!s.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+s.parent.type.name+")"))}class TextSelection extends Selection$2{constructor(e,d=e){checkTextSelection(e),checkTextSelection(d),super(e,d)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,d){let b=e.resolve(d.map(this.head));if(!b.parent.inlineContent)return Selection$2.near(b);let tt=e.resolve(d.map(this.anchor));return new TextSelection(tt.parent.inlineContent?tt:b,b)}replace(e,d=Slice.empty){if(super.replace(e,d),d==Slice.empty){let b=this.$from.marksAcross(this.$to);b&&e.ensureMarks(b)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,d){if(typeof d.anchor!="number"||typeof d.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(d.anchor),e.resolve(d.head))}static create(e,d,b=d){let tt=e.resolve(d);return new this(tt,b==d?tt:e.resolve(b))}static between(e,d,b){let tt=e.pos-d.pos;if((!b||tt)&&(b=tt>=0?1:-1),!d.parent.inlineContent){let nt=Selection$2.findFrom(d,b,!0)||Selection$2.findFrom(d,-b,!0);if(nt)d=nt.$head;else return Selection$2.near(d,b)}return e.parent.inlineContent||(tt==0?e=d:(e=(Selection$2.findFrom(e,-b,!0)||Selection$2.findFrom(e,b,!0)).$anchor,e.pos<d.pos!=tt<0&&(e=d))),new TextSelection(e,d)}}Selection$2.jsonID("text",TextSelection);class TextBookmark{constructor(e,d){this.anchor=e,this.head=d}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection$2{constructor(e){let d=e.nodeAfter,b=e.node(0).resolve(e.pos+d.nodeSize);super(e,b),this.node=d}map(e,d){let{deleted:b,pos:tt}=d.mapResult(this.anchor),nt=e.resolve(tt);return b?Selection$2.near(nt):new NodeSelection(nt)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,d){if(typeof d.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(d.anchor))}static create(e,d){return new NodeSelection(e.resolve(d))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection$2.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:d,pos:b}=e.mapResult(this.anchor);return d?new TextBookmark(b,b):new NodeBookmark(b)}resolve(e){let d=e.resolve(this.anchor),b=d.nodeAfter;return b&&NodeSelection.isSelectable(b)?new NodeSelection(d):Selection$2.near(d)}}class AllSelection extends Selection$2{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,d=Slice.empty){if(d==Slice.empty){e.delete(0,e.doc.content.size);let b=Selection$2.atStart(e.doc);b.eq(e.selection)||e.setSelection(b)}else super.replace(e,d)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection$2.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(s){return new AllSelection(s)}};function findSelectionIn(s,e,d,b,tt,nt=!1){if(e.inlineContent)return TextSelection.create(s,d);for(let ot=b-(tt>0?0:1);tt>0?ot<e.childCount:ot>=0;ot+=tt){let ht=e.child(ot);if(ht.isAtom){if(!nt&&NodeSelection.isSelectable(ht))return NodeSelection.create(s,d-(tt<0?ht.nodeSize:0))}else{let mt=findSelectionIn(s,ht,d+tt,tt<0?ht.childCount:0,tt,nt);if(mt)return mt}d+=ht.nodeSize*tt}return null}function selectionToInsertionEnd$1(s,e,d){let b=s.steps.length-1;if(b<e)return;let tt=s.steps[b];if(!(tt instanceof ReplaceStep||tt instanceof ReplaceAroundStep))return;let nt=s.mapping.maps[b],ot;nt.forEach((ht,mt,gt,yt)=>{ot==null&&(ot=yt)}),s.setSelection(Selection$2.near(s.doc.resolve(ot),d))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform$1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=UPDATED_MARKS,this}ensureMarks(e){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(e,d){super.addStep(e,d),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,d=!0){let b=this.selection;return d&&(e=e.mark(this.storedMarks||(b.empty?b.$from.marks():b.$from.marksAcross(b.$to)||Mark$1.none))),b.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,d,b){let tt=this.doc.type.schema;if(d==null)return e?this.replaceSelectionWith(tt.text(e),!0):this.deleteSelection();{if(b==null&&(b=d),b=b??d,!e)return this.deleteRange(d,b);let nt=this.storedMarks;if(!nt){let ot=this.doc.resolve(d);nt=b==d?ot.marks():ot.marksAcross(this.doc.resolve(b))}return this.replaceRangeWith(d,b,tt.text(e,nt)),this.selection.empty||this.setSelection(Selection$2.near(this.selection.$to)),this}}setMeta(e,d){return this.meta[typeof e=="string"?e:e.key]=d,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(s,e){return!e||!s?s:s.bind(e)}class FieldDesc{constructor(e,d,b){this.name=e,this.init=bind(d.init,b),this.apply=bind(d.apply,b)}}const baseFields=[new FieldDesc("doc",{init(s){return s.doc||s.schema.topNodeType.createAndFill()},apply(s){return s.doc}}),new FieldDesc("selection",{init(s,e){return s.selection||Selection$2.atStart(e.doc)},apply(s){return s.selection}}),new FieldDesc("storedMarks",{init(s){return s.storedMarks||null},apply(s,e,d,b){return b.selection.$cursor?s.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(s,e){return s.scrolledIntoView?e+1:e}})];class Configuration{constructor(e,d){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),d&&d.forEach(b=>{if(this.pluginsByKey[b.key])throw new RangeError("Adding different instances of a keyed plugin ("+b.key+")");this.plugins.push(b),this.pluginsByKey[b.key]=b,b.spec.state&&this.fields.push(new FieldDesc(b.key,b.spec.state,b))})}}class EditorState{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,d=-1){for(let b=0;b<this.config.plugins.length;b++)if(b!=d){let tt=this.config.plugins[b];if(tt.spec.filterTransaction&&!tt.spec.filterTransaction.call(tt,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let d=[e],b=this.applyInner(e),tt=null;for(;;){let nt=!1;for(let ot=0;ot<this.config.plugins.length;ot++){let ht=this.config.plugins[ot];if(ht.spec.appendTransaction){let mt=tt?tt[ot].n:0,gt=tt?tt[ot].state:this,yt=mt<d.length&&ht.spec.appendTransaction.call(ht,mt?d.slice(mt):d,gt,b);if(yt&&b.filterTransaction(yt,ot)){if(yt.setMeta("appendedTransaction",e),!tt){tt=[];for(let ft=0;ft<this.config.plugins.length;ft++)tt.push(ft<ot?{state:b,n:d.length}:{state:this,n:0})}d.push(yt),b=b.applyInner(yt),nt=!0}tt&&(tt[ot]={state:b,n:d.length})}}if(!nt)return{state:b,transactions:d}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let d=new EditorState(this.config),b=this.config.fields;for(let tt=0;tt<b.length;tt++){let nt=b[tt];d[nt.name]=nt.apply(e,this[nt.name],this,d)}return d}get tr(){return new Transaction(this)}static create(e){let d=new Configuration(e.doc?e.doc.type.schema:e.schema,e.plugins),b=new EditorState(d);for(let tt=0;tt<d.fields.length;tt++)b[d.fields[tt].name]=d.fields[tt].init(e,b);return b}reconfigure(e){let d=new Configuration(this.schema,e.plugins),b=d.fields,tt=new EditorState(d);for(let nt=0;nt<b.length;nt++){let ot=b[nt].name;tt[ot]=this.hasOwnProperty(ot)?this[ot]:b[nt].init(e,tt)}return tt}toJSON(e){let d={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(d.storedMarks=this.storedMarks.map(b=>b.toJSON())),e&&typeof e=="object")for(let b in e){if(b=="doc"||b=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let tt=e[b],nt=tt.spec.state;nt&&nt.toJSON&&(d[b]=nt.toJSON.call(tt,this[tt.key]))}return d}static fromJSON(e,d,b){if(!d)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let tt=new Configuration(e.schema,e.plugins),nt=new EditorState(tt);return tt.fields.forEach(ot=>{if(ot.name=="doc")nt.doc=Node$3.fromJSON(e.schema,d.doc);else if(ot.name=="selection")nt.selection=Selection$2.fromJSON(nt.doc,d.selection);else if(ot.name=="storedMarks")d.storedMarks&&(nt.storedMarks=d.storedMarks.map(e.schema.markFromJSON));else{if(b)for(let ht in b){let mt=b[ht],gt=mt.spec.state;if(mt.key==ot.name&&gt&&gt.fromJSON&&Object.prototype.hasOwnProperty.call(d,ht)){nt[ot.name]=gt.fromJSON.call(mt,e,d[ht],nt);return}}nt[ot.name]=ot.init(e,nt)}}),nt}}function bindProps(s,e,d){for(let b in s){let tt=s[b];tt instanceof Function?tt=tt.bind(e):b=="handleDOMEvents"&&(tt=bindProps(tt,e,{})),d[b]=tt}return d}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const keys=Object.create(null);function createKey(s){return s in keys?s+"$"+ ++keys[s]:(keys[s]=0,s+"$")}class PluginKey{constructor(e="key"){this.key=createKey(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const domIndex=function(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e},parentNode=function(s){let e=s.assignedSlot||s.parentNode;return e&&e.nodeType==11?e.host:e};let reusedRange=null;const textRange=function(s,e,d){let b=reusedRange||(reusedRange=document.createRange());return b.setEnd(s,d??s.nodeValue.length),b.setStart(s,e||0),b},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(s,e,d,b){return d&&(scanFor(s,e,d,b,-1)||scanFor(s,e,d,b,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(s,e,d,b,tt){for(;;){if(s==d&&e==b)return!0;if(e==(tt<0?0:nodeSize(s))){let nt=s.parentNode;if(!nt||nt.nodeType!=1||hasBlockDesc(s)||atomElements.test(s.nodeName)||s.contentEditable=="false")return!1;e=domIndex(s)+(tt<0?0:1),s=nt}else if(s.nodeType==1){if(s=s.childNodes[e+(tt<0?-1:0)],s.contentEditable=="false")return!1;e=tt<0?nodeSize(s):0}else return!1}}function nodeSize(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function textNodeBefore$1(s,e){for(;;){if(s.nodeType==3&&e)return s;if(s.nodeType==1&&e>0){if(s.contentEditable=="false")return null;s=s.childNodes[e-1],e=nodeSize(s)}else if(s.parentNode&&!hasBlockDesc(s))e=domIndex(s),s=s.parentNode;else return null}}function textNodeAfter$1(s,e){for(;;){if(s.nodeType==3&&e<s.nodeValue.length)return s;if(s.nodeType==1&&e<s.childNodes.length){if(s.contentEditable=="false")return null;s=s.childNodes[e],e=0}else if(s.parentNode&&!hasBlockDesc(s))e=domIndex(s)+1,s=s.parentNode;else return null}}function isOnEdge(s,e,d){for(let b=e==0,tt=e==nodeSize(s);b||tt;){if(s==d)return!0;let nt=domIndex(s);if(s=s.parentNode,!s)return!1;b=b&&nt==0,tt=tt&&nt==nodeSize(s)}}function hasBlockDesc(s){let e;for(let d=s;d&&!(e=d.pmViewDesc);d=d.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==s||e.contentDOM==s)}const selectionCollapsed=function(s){return s.focusNode&&isEquivalentPosition(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)};function keyEvent(s,e){let d=document.createEvent("Event");return d.initEvent("keydown",!0,!0),d.keyCode=s,d.key=d.code=e,d}function deepActiveElement(s){let e=s.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function caretFromPoint(s,e,d){if(s.caretPositionFromPoint)try{let b=s.caretPositionFromPoint(e,d);if(b)return{node:b.offsetNode,offset:b.offset}}catch{}if(s.caretRangeFromPoint){let b=s.caretRangeFromPoint(e,d);if(b)return{node:b.startContainer,offset:b.startOffset}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$3=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$3&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$3&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$3&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(s){let e=s.defaultView&&s.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.documentElement.clientWidth,top:0,bottom:s.documentElement.clientHeight}}function getSide(s,e){return typeof s=="number"?s:s[e]}function clientRect(s){let e=s.getBoundingClientRect(),d=e.width/s.offsetWidth||1,b=e.height/s.offsetHeight||1;return{left:e.left,right:e.left+s.clientWidth*d,top:e.top,bottom:e.top+s.clientHeight*b}}function scrollRectIntoView(s,e,d){let b=s.someProp("scrollThreshold")||0,tt=s.someProp("scrollMargin")||5,nt=s.dom.ownerDocument;for(let ot=d||s.dom;ot;ot=parentNode(ot)){if(ot.nodeType!=1)continue;let ht=ot,mt=ht==nt.body,gt=mt?windowRect(nt):clientRect(ht),yt=0,ft=0;if(e.top<gt.top+getSide(b,"top")?ft=-(gt.top-e.top+getSide(tt,"top")):e.bottom>gt.bottom-getSide(b,"bottom")&&(ft=e.bottom-e.top>gt.bottom-gt.top?e.top+getSide(tt,"top")-gt.top:e.bottom-gt.bottom+getSide(tt,"bottom")),e.left<gt.left+getSide(b,"left")?yt=-(gt.left-e.left+getSide(tt,"left")):e.right>gt.right-getSide(b,"right")&&(yt=e.right-gt.right+getSide(tt,"right")),yt||ft)if(mt)nt.defaultView.scrollBy(yt,ft);else{let st=ht.scrollLeft,bt=ht.scrollTop;ft&&(ht.scrollTop+=ft),yt&&(ht.scrollLeft+=yt);let vt=ht.scrollLeft-st,xt=ht.scrollTop-bt;e={left:e.left-vt,top:e.top-xt,right:e.right-vt,bottom:e.bottom-xt}}if(mt||/^(fixed|sticky)$/.test(getComputedStyle(ot).position))break}}function storeScrollPos(s){let e=s.dom.getBoundingClientRect(),d=Math.max(0,e.top),b,tt;for(let nt=(e.left+e.right)/2,ot=d+1;ot<Math.min(innerHeight,e.bottom);ot+=5){let ht=s.root.elementFromPoint(nt,ot);if(!ht||ht==s.dom||!s.dom.contains(ht))continue;let mt=ht.getBoundingClientRect();if(mt.top>=d-20){b=ht,tt=mt.top;break}}return{refDOM:b,refTop:tt,stack:scrollStack(s.dom)}}function scrollStack(s){let e=[],d=s.ownerDocument;for(let b=s;b&&(e.push({dom:b,top:b.scrollTop,left:b.scrollLeft}),s!=d);b=parentNode(b));return e}function resetScrollPos({refDOM:s,refTop:e,stack:d}){let b=s?s.getBoundingClientRect().top:0;restoreScrollStack(d,b==0?0:b-e)}function restoreScrollStack(s,e){for(let d=0;d<s.length;d++){let{dom:b,top:tt,left:nt}=s[d];b.scrollTop!=tt+e&&(b.scrollTop=tt+e),b.scrollLeft!=nt&&(b.scrollLeft=nt)}}let preventScrollSupported=null;function focusPreventScroll(s){if(s.setActive)return s.setActive();if(preventScrollSupported)return s.focus(preventScrollSupported);let e=scrollStack(s);s.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(e,0))}function findOffsetInNode(s,e){let d,b=2e8,tt,nt=0,ot=e.top,ht=e.top,mt,gt;for(let yt=s.firstChild,ft=0;yt;yt=yt.nextSibling,ft++){let st;if(yt.nodeType==1)st=yt.getClientRects();else if(yt.nodeType==3)st=textRange(yt).getClientRects();else continue;for(let bt=0;bt<st.length;bt++){let vt=st[bt];if(vt.top<=ot&&vt.bottom>=ht){ot=Math.max(vt.bottom,ot),ht=Math.min(vt.top,ht);let xt=vt.left>e.left?vt.left-e.left:vt.right<e.left?e.left-vt.right:0;if(xt<b){d=yt,b=xt,tt=xt&&d.nodeType==3?{left:vt.right<e.left?vt.right:vt.left,top:e.top}:e,yt.nodeType==1&&xt&&(nt=ft+(e.left>=(vt.left+vt.right)/2?1:0));continue}}else vt.top>e.top&&!mt&&vt.left<=e.left&&vt.right>=e.left&&(mt=yt,gt={left:Math.max(vt.left,Math.min(vt.right,e.left)),top:vt.top});!d&&(e.left>=vt.right&&e.top>=vt.top||e.left>=vt.left&&e.top>=vt.bottom)&&(nt=ft+1)}}return!d&&mt&&(d=mt,tt=gt,b=0),d&&d.nodeType==3?findOffsetInText(d,tt):!d||b&&d.nodeType==1?{node:s,offset:nt}:findOffsetInNode(d,tt)}function findOffsetInText(s,e){let d=s.nodeValue.length,b=document.createRange();for(let tt=0;tt<d;tt++){b.setEnd(s,tt+1),b.setStart(s,tt);let nt=singleRect(b,1);if(nt.top!=nt.bottom&&inRect(e,nt))return{node:s,offset:tt+(e.left>=(nt.left+nt.right)/2?1:0)}}return{node:s,offset:0}}function inRect(s,e){return s.left>=e.left-1&&s.left<=e.right+1&&s.top>=e.top-1&&s.top<=e.bottom+1}function targetKludge(s,e){let d=s.parentNode;return d&&/^li$/i.test(d.nodeName)&&e.left<s.getBoundingClientRect().left?d:s}function posFromElement(s,e,d){let{node:b,offset:tt}=findOffsetInNode(e,d),nt=-1;if(b.nodeType==1&&!b.firstChild){let ot=b.getBoundingClientRect();nt=ot.left!=ot.right&&d.left>(ot.left+ot.right)/2?1:-1}return s.docView.posFromDOM(b,tt,nt)}function posFromCaret(s,e,d,b){let tt=-1;for(let nt=e,ot=!1;nt!=s.dom;){let ht=s.docView.nearestDesc(nt,!0);if(!ht)return null;if(ht.dom.nodeType==1&&(ht.node.isBlock&&ht.parent||!ht.contentDOM)){let mt=ht.dom.getBoundingClientRect();if(ht.node.isBlock&&ht.parent&&(!ot&&mt.left>b.left||mt.top>b.top?tt=ht.posBefore:(!ot&&mt.right<b.left||mt.bottom<b.top)&&(tt=ht.posAfter),ot=!0),!ht.contentDOM&&tt<0&&!ht.node.isText)return(ht.node.isBlock?b.top<(mt.top+mt.bottom)/2:b.left<(mt.left+mt.right)/2)?ht.posBefore:ht.posAfter}nt=ht.dom.parentNode}return tt>-1?tt:s.docView.posFromDOM(e,d,-1)}function elementFromPoint(s,e,d){let b=s.childNodes.length;if(b&&d.top<d.bottom)for(let tt=Math.max(0,Math.min(b-1,Math.floor(b*(e.top-d.top)/(d.bottom-d.top))-2)),nt=tt;;){let ot=s.childNodes[nt];if(ot.nodeType==1){let ht=ot.getClientRects();for(let mt=0;mt<ht.length;mt++){let gt=ht[mt];if(inRect(e,gt))return elementFromPoint(ot,e,gt)}}if((nt=(nt+1)%b)==tt)break}return s}function posAtCoords(s,e){let d=s.dom.ownerDocument,b,tt=0,nt=caretFromPoint(d,e.left,e.top);nt&&({node:b,offset:tt}=nt);let ot=(s.root.elementFromPoint?s.root:d).elementFromPoint(e.left,e.top),ht;if(!ot||!s.dom.contains(ot.nodeType!=1?ot.parentNode:ot)){let gt=s.dom.getBoundingClientRect();if(!inRect(e,gt)||(ot=elementFromPoint(s.dom,e,gt),!ot))return null}if(safari)for(let gt=ot;b&&gt;gt=parentNode(gt))gt.draggable&&(b=void 0);if(ot=targetKludge(ot,e),b){if(gecko&&b.nodeType==1&&(tt=Math.min(tt,b.childNodes.length),tt<b.childNodes.length)){let yt=b.childNodes[tt],ft;yt.nodeName=="IMG"&&(ft=yt.getBoundingClientRect()).right<=e.left&&ft.bottom>e.top&&tt++}let gt;webkit&&tt&&b.nodeType==1&&(gt=b.childNodes[tt-1]).nodeType==1&&gt.contentEditable=="false"&&gt.getBoundingClientRect().top>=e.top&&tt--,b==s.dom&&tt==b.childNodes.length-1&&b.lastChild.nodeType==1&&e.top>b.lastChild.getBoundingClientRect().bottom?ht=s.state.doc.content.size:(tt==0||b.nodeType!=1||b.childNodes[tt-1].nodeName!="BR")&&(ht=posFromCaret(s,b,tt,e))}ht==null&&(ht=posFromElement(s,ot,e));let mt=s.docView.nearestDesc(ot,!0);return{pos:ht,inside:mt?mt.posAtStart-mt.border:-1}}function nonZero(s){return s.top<s.bottom||s.left<s.right}function singleRect(s,e){let d=s.getClientRects();if(d.length){let b=d[e<0?0:d.length-1];if(nonZero(b))return b}return Array.prototype.find.call(d,nonZero)||s.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(s,e,d){let{node:b,offset:tt,atom:nt}=s.docView.domFromPos(e,d<0?-1:1),ot=webkit||gecko;if(b.nodeType==3)if(ot&&(BIDI.test(b.nodeValue)||(d<0?!tt:tt==b.nodeValue.length))){let mt=singleRect(textRange(b,tt,tt),d);if(gecko&&tt&&/\s/.test(b.nodeValue[tt-1])&&tt<b.nodeValue.length){let gt=singleRect(textRange(b,tt-1,tt-1),-1);if(gt.top==mt.top){let yt=singleRect(textRange(b,tt,tt+1),-1);if(yt.top!=mt.top)return flattenV(yt,yt.left<gt.left)}}return mt}else{let mt=tt,gt=tt,yt=d<0?1:-1;return d<0&&!tt?(gt++,yt=-1):d>=0&&tt==b.nodeValue.length?(mt--,yt=1):d<0?mt--:gt++,flattenV(singleRect(textRange(b,mt,gt),yt),yt<0)}if(!s.state.doc.resolve(e-(nt||0)).parent.inlineContent){if(nt==null&&tt&&(d<0||tt==nodeSize(b))){let mt=b.childNodes[tt-1];if(mt.nodeType==1)return flattenH(mt.getBoundingClientRect(),!1)}if(nt==null&&tt<nodeSize(b)){let mt=b.childNodes[tt];if(mt.nodeType==1)return flattenH(mt.getBoundingClientRect(),!0)}return flattenH(b.getBoundingClientRect(),d>=0)}if(nt==null&&tt&&(d<0||tt==nodeSize(b))){let mt=b.childNodes[tt-1],gt=mt.nodeType==3?textRange(mt,nodeSize(mt)-(ot?0:1)):mt.nodeType==1&&(mt.nodeName!="BR"||!mt.nextSibling)?mt:null;if(gt)return flattenV(singleRect(gt,1),!1)}if(nt==null&&tt<nodeSize(b)){let mt=b.childNodes[tt];for(;mt.pmViewDesc&&mt.pmViewDesc.ignoreForCoords;)mt=mt.nextSibling;let gt=mt?mt.nodeType==3?textRange(mt,0,ot?0:1):mt.nodeType==1?mt:null:null;if(gt)return flattenV(singleRect(gt,-1),!0)}return flattenV(singleRect(b.nodeType==3?textRange(b):b,-d),d>=0)}function flattenV(s,e){if(s.width==0)return s;let d=e?s.left:s.right;return{top:s.top,bottom:s.bottom,left:d,right:d}}function flattenH(s,e){if(s.height==0)return s;let d=e?s.top:s.bottom;return{top:d,bottom:d,left:s.left,right:s.right}}function withFlushedState(s,e,d){let b=s.state,tt=s.root.activeElement;b!=e&&s.updateState(e),tt!=s.dom&&s.focus();try{return d()}finally{b!=e&&s.updateState(b),tt!=s.dom&&tt&&tt.focus()}}function endOfTextblockVertical(s,e,d){let b=e.selection,tt=d=="up"?b.$from:b.$to;return withFlushedState(s,e,()=>{let{node:nt}=s.docView.domFromPos(tt.pos,d=="up"?-1:1);for(;;){let ht=s.docView.nearestDesc(nt,!0);if(!ht)break;if(ht.node.isBlock){nt=ht.contentDOM||ht.dom;break}nt=ht.dom.parentNode}let ot=coordsAtPos(s,tt.pos,1);for(let ht=nt.firstChild;ht;ht=ht.nextSibling){let mt;if(ht.nodeType==1)mt=ht.getClientRects();else if(ht.nodeType==3)mt=textRange(ht,0,ht.nodeValue.length).getClientRects();else continue;for(let gt=0;gt<mt.length;gt++){let yt=mt[gt];if(yt.bottom>yt.top+1&&(d=="up"?ot.top-yt.top>(yt.bottom-ot.top)*2:yt.bottom-ot.bottom>(ot.bottom-yt.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(s,e,d){let{$head:b}=e.selection;if(!b.parent.isTextblock)return!1;let tt=b.parentOffset,nt=!tt,ot=tt==b.parent.content.size,ht=s.domSelection();return!maybeRTL.test(b.parent.textContent)||!ht.modify?d=="left"||d=="backward"?nt:ot:withFlushedState(s,e,()=>{let{focusNode:mt,focusOffset:gt,anchorNode:yt,anchorOffset:ft}=s.domSelectionRange(),st=ht.caretBidiLevel;ht.modify("move",d,"character");let bt=b.depth?s.docView.domAfterPos(b.before()):s.dom,{focusNode:vt,focusOffset:xt}=s.domSelectionRange(),wt=vt&&!bt.contains(vt.nodeType==1?vt:vt.parentNode)||mt==vt&&gt==xt;try{ht.collapse(yt,ft),mt&&(mt!=yt||gt!=ft)&&ht.extend&&ht.extend(mt,gt)}catch{}return st!=null&&(ht.caretBidiLevel=st),wt})}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(s,e,d){return cachedState==e&&cachedDir==d?cachedResult:(cachedState=e,cachedDir=d,cachedResult=d=="up"||d=="down"?endOfTextblockVertical(s,e,d):endOfTextblockHorizontal(s,e,d))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(e,d,b,tt){this.parent=e,this.children=d,this.dom=b,this.contentDOM=tt,this.dirty=NOT_DIRTY,b.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,d,b){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let d=0;d<this.children.length;d++)e+=this.children[d].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let d=0,b=this.posAtStart;;d++){let tt=this.children[d];if(tt==e)return b;b+=tt.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,d,b){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(b<0){let nt,ot;if(e==this.contentDOM)nt=e.childNodes[d-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;nt=e.previousSibling}for(;nt&&!((ot=nt.pmViewDesc)&&ot.parent==this);)nt=nt.previousSibling;return nt?this.posBeforeChild(ot)+ot.size:this.posAtStart}else{let nt,ot;if(e==this.contentDOM)nt=e.childNodes[d];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;nt=e.nextSibling}for(;nt&&!((ot=nt.pmViewDesc)&&ot.parent==this);)nt=nt.nextSibling;return nt?this.posBeforeChild(ot):this.posAtEnd}let tt;if(e==this.dom&&this.contentDOM)tt=d>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))tt=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(d==0)for(let nt=e;;nt=nt.parentNode){if(nt==this.dom){tt=!1;break}if(nt.previousSibling)break}if(tt==null&&d==e.childNodes.length)for(let nt=e;;nt=nt.parentNode){if(nt==this.dom){tt=!0;break}if(nt.nextSibling)break}}return tt??b>0?this.posAtEnd:this.posAtStart}nearestDesc(e,d=!1){for(let b=!0,tt=e;tt;tt=tt.parentNode){let nt=this.getDesc(tt),ot;if(nt&&(!d||nt.node))if(b&&(ot=nt.nodeDOM)&&!(ot.nodeType==1?ot.contains(e.nodeType==1?e:e.parentNode):ot==e))b=!1;else return nt}}getDesc(e){let d=e.pmViewDesc;for(let b=d;b;b=b.parent)if(b==this)return d}posFromDOM(e,d,b){for(let tt=e;tt;tt=tt.parentNode){let nt=this.getDesc(tt);if(nt)return nt.localPosFromDOM(e,d,b)}return-1}descAt(e){for(let d=0,b=0;d<this.children.length;d++){let tt=this.children[d],nt=b+tt.size;if(b==e&&nt!=b){for(;!tt.border&&tt.children.length;)tt=tt.children[0];return tt}if(e<nt)return tt.descAt(e-b-tt.border);b=nt}}domFromPos(e,d){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let b=0,tt=0;for(let nt=0;b<this.children.length;b++){let ot=this.children[b],ht=nt+ot.size;if(ht>e||ot instanceof TrailingHackViewDesc){tt=e-nt;break}nt=ht}if(tt)return this.children[b].domFromPos(tt-this.children[b].border,d);for(let nt;b&&!(nt=this.children[b-1]).size&&nt instanceof WidgetViewDesc&&nt.side>=0;b--);if(d<=0){let nt,ot=!0;for(;nt=b?this.children[b-1]:null,!(!nt||nt.dom.parentNode==this.contentDOM);b--,ot=!1);return nt&&d&&ot&&!nt.border&&!nt.domAtom?nt.domFromPos(nt.size,d):{node:this.contentDOM,offset:nt?domIndex(nt.dom)+1:0}}else{let nt,ot=!0;for(;nt=b<this.children.length?this.children[b]:null,!(!nt||nt.dom.parentNode==this.contentDOM);b++,ot=!1);return nt&&ot&&!nt.border&&!nt.domAtom?nt.domFromPos(0,d):{node:this.contentDOM,offset:nt?domIndex(nt.dom):this.contentDOM.childNodes.length}}}parseRange(e,d,b=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:d,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let tt=-1,nt=-1;for(let ot=b,ht=0;;ht++){let mt=this.children[ht],gt=ot+mt.size;if(tt==-1&&e<=gt){let yt=ot+mt.border;if(e>=yt&&d<=gt-mt.border&&mt.node&&mt.contentDOM&&this.contentDOM.contains(mt.contentDOM))return mt.parseRange(e,d,yt);e=ot;for(let ft=ht;ft>0;ft--){let st=this.children[ft-1];if(st.size&&st.dom.parentNode==this.contentDOM&&!st.emptyChildAt(1)){tt=domIndex(st.dom)+1;break}e-=st.size}tt==-1&&(tt=0)}if(tt>-1&&(gt>d||ht==this.children.length-1)){d=gt;for(let yt=ht+1;yt<this.children.length;yt++){let ft=this.children[yt];if(ft.size&&ft.dom.parentNode==this.contentDOM&&!ft.emptyChildAt(-1)){nt=domIndex(ft.dom);break}d+=ft.size}nt==-1&&(nt=this.contentDOM.childNodes.length);break}ot=gt}return{node:this.contentDOM,from:e,to:d,fromOffset:tt,toOffset:nt}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let d=this.children[e<0?0:this.children.length-1];return d.size==0||d.emptyChildAt(e)}domAfterPos(e){let{node:d,offset:b}=this.domFromPos(e,0);if(d.nodeType!=1||b==d.childNodes.length)throw new RangeError("No node after pos "+e);return d.childNodes[b]}setSelection(e,d,b,tt=!1){let nt=Math.min(e,d),ot=Math.max(e,d);for(let st=0,bt=0;st<this.children.length;st++){let vt=this.children[st],xt=bt+vt.size;if(nt>bt&&ot<xt)return vt.setSelection(e-bt-vt.border,d-bt-vt.border,b,tt);bt=xt}let ht=this.domFromPos(e,e?-1:1),mt=d==e?ht:this.domFromPos(d,d?-1:1),gt=b.getSelection(),yt=!1;if((gecko||safari)&&e==d){let{node:st,offset:bt}=ht;if(st.nodeType==3){if(yt=!!(bt&&st.nodeValue[bt-1]==`
`),yt&&bt==st.nodeValue.length)for(let vt=st,xt;vt;vt=vt.parentNode){if(xt=vt.nextSibling){xt.nodeName=="BR"&&(ht=mt={node:xt.parentNode,offset:domIndex(xt)+1});break}let wt=vt.pmViewDesc;if(wt&&wt.node&&wt.node.isBlock)break}}else{let vt=st.childNodes[bt-1];yt=vt&&(vt.nodeName=="BR"||vt.contentEditable=="false")}}if(gecko&&gt.focusNode&&gt.focusNode!=mt.node&&gt.focusNode.nodeType==1){let st=gt.focusNode.childNodes[gt.focusOffset];st&&st.contentEditable=="false"&&(tt=!0)}if(!(tt||yt&&safari)&&isEquivalentPosition(ht.node,ht.offset,gt.anchorNode,gt.anchorOffset)&&isEquivalentPosition(mt.node,mt.offset,gt.focusNode,gt.focusOffset))return;let ft=!1;if((gt.extend||e==d)&&!yt){gt.collapse(ht.node,ht.offset);try{e!=d&&gt.extend(mt.node,mt.offset),ft=!0}catch{}}if(!ft){if(e>d){let bt=ht;ht=mt,mt=bt}let st=document.createRange();st.setEnd(mt.node,mt.offset),st.setStart(ht.node,ht.offset),gt.removeAllRanges(),gt.addRange(st)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,d){for(let b=0,tt=0;tt<this.children.length;tt++){let nt=this.children[tt],ot=b+nt.size;if(b==ot?e<=ot&&d>=b:e<ot&&d>b){let ht=b+nt.border,mt=ot-nt.border;if(e>=ht&&d<=mt){this.dirty=e==b||d==ot?CONTENT_DIRTY:CHILD_DIRTY,e==ht&&d==mt&&(nt.contentLost||nt.dom.parentNode!=this.contentDOM)?nt.dirty=NODE_DIRTY:nt.markDirty(e-ht,d-ht);return}else nt.dirty=nt.dom==nt.contentDOM&&nt.dom.parentNode==this.contentDOM&&!nt.children.length?CONTENT_DIRTY:NODE_DIRTY}b=ot}this.dirty=CONTENT_DIRTY}markParentsDirty(){let e=1;for(let d=this.parent;d;d=d.parent,e++){let b=e==1?CONTENT_DIRTY:CHILD_DIRTY;d.dirty<b&&(d.dirty=b)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,d,b,tt){let nt,ot=d.type.toDOM;if(typeof ot=="function"&&(ot=ot(b,()=>{if(!nt)return tt;if(nt.parent)return nt.parent.posBeforeChild(nt)})),!d.type.spec.raw){if(ot.nodeType!=1){let ht=document.createElement("span");ht.appendChild(ot),ot=ht}ot.contentEditable="false",ot.classList.add("ProseMirror-widget")}super(e,[],ot,null),this.widget=d,this.widget=d,nt=this}matchesWidget(e){return this.dirty==NOT_DIRTY&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let d=this.widget.spec.stopEvent;return d?d(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,d,b,tt){super(e,[],d,null),this.textDOM=b,this.text=tt}get size(){return this.text.length}localPosFromDOM(e,d){return e!=this.textDOM?this.posAtStart+(d?this.size:0):this.posAtStart+d}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,d,b,tt){super(e,[],b,tt),this.mark=d}static create(e,d,b,tt){let nt=tt.nodeViews[d.type.name],ot=nt&&nt(d,tt,b);return(!ot||!ot.dom)&&(ot=DOMSerializer.renderSpec(document,d.type.spec.toDOM(d,b),null,d.attrs)),new MarkViewDesc(e,d,ot.dom,ot.contentDOM||ot.dom)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=NODE_DIRTY&&this.mark.eq(e)}markDirty(e,d){if(super.markDirty(e,d),this.dirty!=NOT_DIRTY){let b=this.parent;for(;!b.node;)b=b.parent;b.dirty<this.dirty&&(b.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(e,d,b){let tt=MarkViewDesc.create(this.parent,this.mark,!0,b),nt=this.children,ot=this.size;d<ot&&(nt=replaceNodes(nt,d,ot,b)),e>0&&(nt=replaceNodes(nt,0,e,b));for(let ht=0;ht<nt.length;ht++)nt[ht].parent=tt;return tt.children=nt,tt}}class NodeViewDesc extends ViewDesc{constructor(e,d,b,tt,nt,ot,ht,mt,gt){super(e,[],nt,ot),this.node=d,this.outerDeco=b,this.innerDeco=tt,this.nodeDOM=ht}static create(e,d,b,tt,nt,ot){let ht=nt.nodeViews[d.type.name],mt,gt=ht&&ht(d,nt,()=>{if(!mt)return ot;if(mt.parent)return mt.parent.posBeforeChild(mt)},b,tt),yt=gt&&gt.dom,ft=gt&&gt.contentDOM;if(d.isText){if(!yt)yt=document.createTextNode(d.text);else if(yt.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else yt||({dom:yt,contentDOM:ft}=DOMSerializer.renderSpec(document,d.type.spec.toDOM(d),null,d.attrs));!ft&&!d.isText&&yt.nodeName!="BR"&&(yt.hasAttribute("contenteditable")||(yt.contentEditable="false"),d.type.spec.draggable&&(yt.draggable=!0));let st=yt;return yt=applyOuterDeco(yt,b,d),gt?mt=new CustomNodeViewDesc(e,d,b,tt,yt,ft||null,st,gt,nt,ot+1):d.isText?new TextViewDesc(e,d,b,tt,yt,st,nt):new NodeViewDesc(e,d,b,tt,yt,ft||null,st,nt,ot+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let d=this.children.length-1;d>=0;d--){let b=this.children[d];if(this.dom.contains(b.dom.parentNode)){e.contentElement=b.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fragment.empty)}return e}matchesNode(e,d,b){return this.dirty==NOT_DIRTY&&e.eq(this.node)&&sameOuterDeco(d,this.outerDeco)&&b.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,d){let b=this.node.inlineContent,tt=d,nt=e.composing?this.localCompositionInfo(e,d):null,ot=nt&&nt.pos>-1?nt:null,ht=nt&&nt.pos<0,mt=new ViewTreeUpdater(this,ot&&ot.node,e);iterDeco(this.node,this.innerDeco,(gt,yt,ft)=>{gt.spec.marks?mt.syncToMarks(gt.spec.marks,b,e):gt.type.side>=0&&!ft&&mt.syncToMarks(yt==this.node.childCount?Mark$1.none:this.node.child(yt).marks,b,e),mt.placeWidget(gt,e,tt)},(gt,yt,ft,st)=>{mt.syncToMarks(gt.marks,b,e);let bt;mt.findNodeMatch(gt,yt,ft,st)||ht&&e.state.selection.from>tt&&e.state.selection.to<tt+gt.nodeSize&&(bt=mt.findIndexWithChild(nt.node))>-1&&mt.updateNodeAt(gt,yt,ft,bt,e)||mt.updateNextNode(gt,yt,ft,e,st,tt)||mt.addNode(gt,yt,ft,e,tt),tt+=gt.nodeSize}),mt.syncToMarks([],b,e),this.node.isTextblock&&mt.addTextblockHacks(),mt.destroyRest(),(mt.changed||this.dirty==CONTENT_DIRTY)&&(ot&&this.protectLocalComposition(e,ot),renderDescs(this.contentDOM,this.children,e),ios&&iosHacks(this.dom))}localCompositionInfo(e,d){let{from:b,to:tt}=e.state.selection;if(!(e.state.selection instanceof TextSelection)||b<d||tt>d+this.node.content.size)return null;let nt=e.input.compositionNode;if(!nt||!this.dom.contains(nt.parentNode))return null;if(this.node.inlineContent){let ot=nt.nodeValue,ht=findTextInFragment(this.node.content,ot,b-d,tt-d);return ht<0?null:{node:nt,pos:ht,text:ot}}else return{node:nt,pos:-1,text:""}}protectLocalComposition(e,{node:d,pos:b,text:tt}){if(this.getDesc(d))return;let nt=d;for(;nt.parentNode!=this.contentDOM;nt=nt.parentNode){for(;nt.previousSibling;)nt.parentNode.removeChild(nt.previousSibling);for(;nt.nextSibling;)nt.parentNode.removeChild(nt.nextSibling);nt.pmViewDesc&&(nt.pmViewDesc=void 0)}let ot=new CompositionViewDesc(this,nt,d,tt);e.input.compositionNodes.push(ot),this.children=replaceNodes(this.children,b,b+tt.length,e,ot)}update(e,d,b,tt){return this.dirty==NODE_DIRTY||!e.sameMarkup(this.node)?!1:(this.updateInner(e,d,b,tt),!0)}updateInner(e,d,b,tt){this.updateOuterDeco(d),this.node=e,this.innerDeco=b,this.contentDOM&&this.updateChildren(tt,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let d=this.nodeDOM.nodeType!=1,b=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,d),computeOuterDeco(e,this.node,d)),this.dom!=b&&(b.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(s,e,d,b,tt){applyOuterDeco(b,e,s);let nt=new NodeViewDesc(void 0,s,e,d,b,b,b,tt,0);return nt.contentDOM&&nt.updateChildren(tt,0),nt}class TextViewDesc extends NodeViewDesc{constructor(e,d,b,tt,nt,ot,ht){super(e,d,b,tt,nt,null,ot,ht,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,d,b,tt){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(d),(this.dirty!=NOT_DIRTY||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,tt.trackWrites==this.nodeDOM&&(tt.trackWrites=null)),this.node=e,this.dirty=NOT_DIRTY,!0)}inParent(){let e=this.parent.contentDOM;for(let d=this.nodeDOM;d;d=d.parentNode)if(d==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,d,b){return e==this.nodeDOM?this.posAtStart+Math.min(d,this.node.text.length):super.localPosFromDOM(e,d,b)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,d,b){let tt=this.node.cut(e,d),nt=document.createTextNode(tt.text);return new TextViewDesc(this.parent,tt,this.outerDeco,this.innerDeco,nt,nt,b)}markDirty(e,d){super.markDirty(e,d),this.dom!=this.nodeDOM&&(e==0||d==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==NOT_DIRTY&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,d,b,tt,nt,ot,ht,mt,gt,yt){super(e,d,b,tt,nt,ot,ht,gt,yt),this.spec=mt}update(e,d,b,tt){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update){let nt=this.spec.update(e,d,b);return nt&&this.updateInner(e,d,b,tt),nt}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,d,b,tt)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,d,b,tt){this.spec.setSelection?this.spec.setSelection(e,d,b):super.setSelection(e,d,b,tt)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(s,e,d){let b=s.firstChild,tt=!1;for(let nt=0;nt<e.length;nt++){let ot=e[nt],ht=ot.dom;if(ht.parentNode==s){for(;ht!=b;)b=rm(b),tt=!0;b=b.nextSibling}else tt=!0,s.insertBefore(ht,b);if(ot instanceof MarkViewDesc){let mt=b?b.previousSibling:s.lastChild;renderDescs(ot.contentDOM,ot.children,d),b=mt?mt.nextSibling:s.firstChild}}for(;b;)b=rm(b),tt=!0;tt&&d.trackWrites==s&&(d.trackWrites=null)}const OuterDecoLevel=function(s){s&&(this.nodeName=s)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(s,e,d){if(s.length==0)return noDeco;let b=d?noDeco[0]:new OuterDecoLevel,tt=[b];for(let nt=0;nt<s.length;nt++){let ot=s[nt].type.attrs;if(ot){ot.nodeName&&tt.push(b=new OuterDecoLevel(ot.nodeName));for(let ht in ot){let mt=ot[ht];mt!=null&&(d&&tt.length==1&&tt.push(b=new OuterDecoLevel(e.isInline?"span":"div")),ht=="class"?b.class=(b.class?b.class+" ":"")+mt:ht=="style"?b.style=(b.style?b.style+";":"")+mt:ht!="nodeName"&&(b[ht]=mt))}}}return tt}function patchOuterDeco(s,e,d,b){if(d==noDeco&&b==noDeco)return e;let tt=e;for(let nt=0;nt<b.length;nt++){let ot=b[nt],ht=d[nt];if(nt){let mt;ht&&ht.nodeName==ot.nodeName&&tt!=s&&(mt=tt.parentNode)&&mt.nodeName.toLowerCase()==ot.nodeName||(mt=document.createElement(ot.nodeName),mt.pmIsDeco=!0,mt.appendChild(tt),ht=noDeco[0]),tt=mt}patchAttributes(tt,ht||noDeco[0],ot)}return tt}function patchAttributes(s,e,d){for(let b in e)b!="class"&&b!="style"&&b!="nodeName"&&!(b in d)&&s.removeAttribute(b);for(let b in d)b!="class"&&b!="style"&&b!="nodeName"&&d[b]!=e[b]&&s.setAttribute(b,d[b]);if(e.class!=d.class){let b=e.class?e.class.split(" ").filter(Boolean):[],tt=d.class?d.class.split(" ").filter(Boolean):[];for(let nt=0;nt<b.length;nt++)tt.indexOf(b[nt])==-1&&s.classList.remove(b[nt]);for(let nt=0;nt<tt.length;nt++)b.indexOf(tt[nt])==-1&&s.classList.add(tt[nt]);s.classList.length==0&&s.removeAttribute("class")}if(e.style!=d.style){if(e.style){let b=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,tt;for(;tt=b.exec(e.style);)s.style.removeProperty(tt[1])}d.style&&(s.style.cssText+=d.style)}}function applyOuterDeco(s,e,d){return patchOuterDeco(s,s,noDeco,computeOuterDeco(e,d,s.nodeType!=1))}function sameOuterDeco(s,e){if(s.length!=e.length)return!1;for(let d=0;d<s.length;d++)if(!s[d].type.eq(e[d].type))return!1;return!0}function rm(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class ViewTreeUpdater{constructor(e,d,b){this.lock=d,this.view=b,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=preMatch(e.node.content,e)}destroyBetween(e,d){if(e!=d){for(let b=e;b<d;b++)this.top.children[b].destroy();this.top.children.splice(e,d-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,d,b){let tt=0,nt=this.stack.length>>1,ot=Math.min(nt,e.length);for(;tt<ot&&(tt==nt-1?this.top:this.stack[tt+1<<1]).matchesMark(e[tt])&&e[tt].type.spec.spanning!==!1;)tt++;for(;tt<nt;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),nt--;for(;nt<e.length;){this.stack.push(this.top,this.index+1);let ht=-1;for(let mt=this.index;mt<Math.min(this.index+3,this.top.children.length);mt++){let gt=this.top.children[mt];if(gt.matchesMark(e[nt])&&!this.isLocked(gt.dom)){ht=mt;break}}if(ht>-1)ht>this.index&&(this.changed=!0,this.destroyBetween(this.index,ht)),this.top=this.top.children[this.index];else{let mt=MarkViewDesc.create(this.top,e[nt],d,b);this.top.children.splice(this.index,0,mt),this.top=mt,this.changed=!0}this.index=0,nt++}}findNodeMatch(e,d,b,tt){let nt=-1,ot;if(tt>=this.preMatch.index&&(ot=this.preMatch.matches[tt-this.preMatch.index]).parent==this.top&&ot.matchesNode(e,d,b))nt=this.top.children.indexOf(ot,this.index);else for(let ht=this.index,mt=Math.min(this.top.children.length,ht+5);ht<mt;ht++){let gt=this.top.children[ht];if(gt.matchesNode(e,d,b)&&!this.preMatch.matched.has(gt)){nt=ht;break}}return nt<0?!1:(this.destroyBetween(this.index,nt),this.index++,!0)}updateNodeAt(e,d,b,tt,nt){let ot=this.top.children[tt];return ot.dirty==NODE_DIRTY&&ot.dom==ot.contentDOM&&(ot.dirty=CONTENT_DIRTY),ot.update(e,d,b,nt)?(this.destroyBetween(this.index,tt),this.index++,!0):!1}findIndexWithChild(e){for(;;){let d=e.parentNode;if(!d)return-1;if(d==this.top.contentDOM){let b=e.pmViewDesc;if(b){for(let tt=this.index;tt<this.top.children.length;tt++)if(this.top.children[tt]==b)return tt}return-1}e=d}}updateNextNode(e,d,b,tt,nt,ot){for(let ht=this.index;ht<this.top.children.length;ht++){let mt=this.top.children[ht];if(mt instanceof NodeViewDesc){let gt=this.preMatch.matched.get(mt);if(gt!=null&&gt!=nt)return!1;let yt=mt.dom,ft,st=this.isLocked(yt)&&!(e.isText&&mt.node&&mt.node.isText&&mt.nodeDOM.nodeValue==e.text&&mt.dirty!=NODE_DIRTY&&sameOuterDeco(d,mt.outerDeco));if(!st&&mt.update(e,d,b,tt))return this.destroyBetween(this.index,ht),mt.dom!=yt&&(this.changed=!0),this.index++,!0;if(!st&&(ft=this.recreateWrapper(mt,e,d,b,tt,ot)))return this.top.children[this.index]=ft,ft.contentDOM&&(ft.dirty=CONTENT_DIRTY,ft.updateChildren(tt,ot+1),ft.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,d,b,tt,nt,ot){if(e.dirty||d.isAtom||!e.children.length||!e.node.content.eq(d.content))return null;let ht=NodeViewDesc.create(this.top,d,b,tt,nt,ot);if(ht.contentDOM){ht.children=e.children,e.children=[];for(let mt of ht.children)mt.parent=ht}return e.destroy(),ht}addNode(e,d,b,tt,nt){let ot=NodeViewDesc.create(this.top,e,d,b,tt,nt);ot.contentDOM&&ot.updateChildren(tt,nt+1),this.top.children.splice(this.index++,0,ot),this.changed=!0}placeWidget(e,d,b){let tt=this.index<this.top.children.length?this.top.children[this.index]:null;if(tt&&tt.matchesWidget(e)&&(e==tt.widget||!tt.widget.type.toDOM.parentNode))this.index++;else{let nt=new WidgetViewDesc(this.top,e,d,b);this.top.children.splice(this.index++,0,nt),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],d=this.top;for(;e instanceof MarkViewDesc;)d=e,e=d.children[d.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((safari||chrome)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",d),this.addHackNode("BR",this.top))}addHackNode(e,d){if(d==this.top&&this.index<d.children.length&&d.children[this.index].matchesHack(e))this.index++;else{let b=document.createElement(e);e=="IMG"&&(b.className="ProseMirror-separator",b.alt=""),e=="BR"&&(b.className="ProseMirror-trailingBreak");let tt=new TrailingHackViewDesc(this.top,[],b,null);d!=this.top?d.children.push(tt):d.children.splice(this.index++,0,tt),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function preMatch(s,e){let d=e,b=d.children.length,tt=s.childCount,nt=new Map,ot=[];e:for(;tt>0;){let ht;for(;;)if(b){let gt=d.children[b-1];if(gt instanceof MarkViewDesc)d=gt,b=gt.children.length;else{ht=gt,b--;break}}else{if(d==e)break e;b=d.parent.children.indexOf(d),d=d.parent}let mt=ht.node;if(mt){if(mt!=s.child(tt-1))break;--tt,nt.set(ht,tt),ot.push(ht)}}return{index:tt,matched:nt,matches:ot.reverse()}}function compareSide(s,e){return s.type.side-e.type.side}function iterDeco(s,e,d,b){let tt=e.locals(s),nt=0;if(tt.length==0){for(let gt=0;gt<s.childCount;gt++){let yt=s.child(gt);b(yt,tt,e.forChild(nt,yt),gt),nt+=yt.nodeSize}return}let ot=0,ht=[],mt=null;for(let gt=0;;){let yt,ft;for(;ot<tt.length&&tt[ot].to==nt;){let wt=tt[ot++];wt.widget&&(yt?(ft||(ft=[yt])).push(wt):yt=wt)}if(yt)if(ft){ft.sort(compareSide);for(let wt=0;wt<ft.length;wt++)d(ft[wt],gt,!!mt)}else d(yt,gt,!!mt);let st,bt;if(mt)bt=-1,st=mt,mt=null;else if(gt<s.childCount)bt=gt,st=s.child(gt++);else break;for(let wt=0;wt<ht.length;wt++)ht[wt].to<=nt&&ht.splice(wt--,1);for(;ot<tt.length&&tt[ot].from<=nt&&tt[ot].to>nt;)ht.push(tt[ot++]);let vt=nt+st.nodeSize;if(st.isText){let wt=vt;ot<tt.length&&tt[ot].from<wt&&(wt=tt[ot].from);for(let St=0;St<ht.length;St++)ht[St].to<wt&&(wt=ht[St].to);wt<vt&&(mt=st.cut(wt-nt),st=st.cut(0,wt-nt),vt=wt,bt=-1)}else for(;ot<tt.length&&tt[ot].to<vt;)ot++;let xt=st.isInline&&!st.isLeaf?ht.filter(wt=>!wt.inline):ht.slice();b(st,xt,e.forChild(nt,st),bt),nt=vt}}function iosHacks(s){if(s.nodeName=="UL"||s.nodeName=="OL"){let e=s.style.cssText;s.style.cssText=e+"; list-style: square !important",window.getComputedStyle(s).listStyle,s.style.cssText=e}}function findTextInFragment(s,e,d,b){for(let tt=0,nt=0;tt<s.childCount&&nt<=b;){let ot=s.child(tt++),ht=nt;if(nt+=ot.nodeSize,!ot.isText)continue;let mt=ot.text;for(;tt<s.childCount;){let gt=s.child(tt++);if(nt+=gt.nodeSize,!gt.isText)break;mt+=gt.text}if(nt>=d){if(nt>=b&&mt.slice(b-e.length-ht,b-ht)==e)return b-e.length;let gt=ht<b?mt.lastIndexOf(e,b-ht-1):-1;if(gt>=0&&gt+e.length+ht>=d)return ht+gt;if(d==b&&mt.length>=b+e.length-ht&&mt.slice(b-ht,b-ht+e.length)==e)return b}}return-1}function replaceNodes(s,e,d,b,tt){let nt=[];for(let ot=0,ht=0;ot<s.length;ot++){let mt=s[ot],gt=ht,yt=ht+=mt.size;gt>=d||yt<=e?nt.push(mt):(gt<e&&nt.push(mt.slice(0,e-gt,b)),tt&&(nt.push(tt),tt=void 0),yt>d&&nt.push(mt.slice(d-gt,mt.size,b)))}return nt}function selectionFromDOM(s,e=null){let d=s.domSelectionRange(),b=s.state.doc;if(!d.focusNode)return null;let tt=s.docView.nearestDesc(d.focusNode),nt=tt&&tt.size==0,ot=s.docView.posFromDOM(d.focusNode,d.focusOffset,1);if(ot<0)return null;let ht=b.resolve(ot),mt,gt;if(selectionCollapsed(d)){for(mt=ht;tt&&!tt.node;)tt=tt.parent;let yt=tt.node;if(tt&&yt.isAtom&&NodeSelection.isSelectable(yt)&&tt.parent&&!(yt.isInline&&isOnEdge(d.focusNode,d.focusOffset,tt.dom))){let ft=tt.posBefore;gt=new NodeSelection(ot==ft?ht:b.resolve(ft))}}else{let yt=s.docView.posFromDOM(d.anchorNode,d.anchorOffset,1);if(yt<0)return null;mt=b.resolve(yt)}if(!gt){let yt=e=="pointer"||s.state.selection.head<ht.pos&&!nt?1:-1;gt=selectionBetween(s,mt,ht,yt)}return gt}function editorOwnsSelection(s){return s.editable?s.hasFocus():hasSelection(s)&&document.activeElement&&document.activeElement.contains(s.dom)}function selectionToDOM(s,e=!1){let d=s.state.selection;if(syncNodeSelection(s,d),!!editorOwnsSelection(s)){if(!e&&s.input.mouseDown&&s.input.mouseDown.allowDefault&&chrome){let b=s.domSelectionRange(),tt=s.domObserver.currentSelection;if(b.anchorNode&&tt.anchorNode&&isEquivalentPosition(b.anchorNode,b.anchorOffset,tt.anchorNode,tt.anchorOffset)){s.input.mouseDown.delayedSelectionSync=!0,s.domObserver.setCurSelection();return}}if(s.domObserver.disconnectSelection(),s.cursorWrapper)selectCursorWrapper(s);else{let{anchor:b,head:tt}=d,nt,ot;brokenSelectBetweenUneditable&&!(d instanceof TextSelection)&&(d.$from.parent.inlineContent||(nt=temporarilyEditableNear(s,d.from)),!d.empty&&!d.$from.parent.inlineContent&&(ot=temporarilyEditableNear(s,d.to))),s.docView.setSelection(b,tt,s.root,e),brokenSelectBetweenUneditable&&(nt&&resetEditable(nt),ot&&resetEditable(ot)),d.visible?s.dom.classList.remove("ProseMirror-hideselection"):(s.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(s))}s.domObserver.setCurSelection(),s.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(s,e){let{node:d,offset:b}=s.docView.domFromPos(e,0),tt=b<d.childNodes.length?d.childNodes[b]:null,nt=b?d.childNodes[b-1]:null;if(safari&&tt&&tt.contentEditable=="false")return setEditable(tt);if((!tt||tt.contentEditable=="false")&&(!nt||nt.contentEditable=="false")){if(tt)return setEditable(tt);if(nt)return setEditable(nt)}}function setEditable(s){return s.contentEditable="true",safari&&s.draggable&&(s.draggable=!1,s.wasDraggable=!0),s}function resetEditable(s){s.contentEditable="false",s.wasDraggable&&(s.draggable=!0,s.wasDraggable=null)}function removeClassOnSelectionChange(s){let e=s.dom.ownerDocument;e.removeEventListener("selectionchange",s.input.hideSelectionGuard);let d=s.domSelectionRange(),b=d.anchorNode,tt=d.anchorOffset;e.addEventListener("selectionchange",s.input.hideSelectionGuard=()=>{(d.anchorNode!=b||d.anchorOffset!=tt)&&(e.removeEventListener("selectionchange",s.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(s)||s.state.selection.visible)&&s.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(s){let e=s.domSelection(),d=document.createRange(),b=s.cursorWrapper.dom,tt=b.nodeName=="IMG";tt?d.setEnd(b.parentNode,domIndex(b)+1):d.setEnd(b,0),d.collapse(!1),e.removeAllRanges(),e.addRange(d),!tt&&!s.state.selection.visible&&ie$3&&ie_version<=11&&(b.disabled=!0,b.disabled=!1)}function syncNodeSelection(s,e){if(e instanceof NodeSelection){let d=s.docView.descAt(e.from);d!=s.lastSelectedViewDesc&&(clearNodeSelection(s),d&&d.selectNode(),s.lastSelectedViewDesc=d)}else clearNodeSelection(s)}function clearNodeSelection(s){s.lastSelectedViewDesc&&(s.lastSelectedViewDesc.parent&&s.lastSelectedViewDesc.deselectNode(),s.lastSelectedViewDesc=void 0)}function selectionBetween(s,e,d,b){return s.someProp("createSelectionBetween",tt=>tt(s,e,d))||TextSelection.between(e,d,b)}function hasFocusAndSelection(s){return s.editable&&!s.hasFocus()?!1:hasSelection(s)}function hasSelection(s){let e=s.domSelectionRange();if(!e.anchorNode)return!1;try{return s.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(s.editable||s.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function anchorInRightPlace(s){let e=s.docView.domFromPos(s.state.selection.anchor,0),d=s.domSelectionRange();return isEquivalentPosition(e.node,e.offset,d.anchorNode,d.anchorOffset)}function moveSelectionBlock(s,e){let{$anchor:d,$head:b}=s.selection,tt=e>0?d.max(b):d.min(b),nt=tt.parent.inlineContent?tt.depth?s.doc.resolve(e>0?tt.after():tt.before()):null:tt;return nt&&Selection$2.findFrom(nt,e)}function apply(s,e){return s.dispatch(s.state.tr.setSelection(e).scrollIntoView()),!0}function selectHorizontally(s,e,d){let b=s.state.selection;if(b instanceof TextSelection)if(d.indexOf("s")>-1){let{$head:tt}=b,nt=tt.textOffset?null:e<0?tt.nodeBefore:tt.nodeAfter;if(!nt||nt.isText||!nt.isLeaf)return!1;let ot=s.state.doc.resolve(tt.pos+nt.nodeSize*(e<0?-1:1));return apply(s,new TextSelection(b.$anchor,ot))}else if(b.empty){if(s.endOfTextblock(e>0?"forward":"backward")){let tt=moveSelectionBlock(s.state,e);return tt&&tt instanceof NodeSelection?apply(s,tt):!1}else if(!(mac$2&&d.indexOf("m")>-1)){let tt=b.$head,nt=tt.textOffset?null:e<0?tt.nodeBefore:tt.nodeAfter,ot;if(!nt||nt.isText)return!1;let ht=e<0?tt.pos-nt.nodeSize:tt.pos;return nt.isAtom||(ot=s.docView.descAt(ht))&&!ot.contentDOM?NodeSelection.isSelectable(nt)?apply(s,new NodeSelection(e<0?s.state.doc.resolve(tt.pos-nt.nodeSize):tt)):webkit?apply(s,new TextSelection(s.state.doc.resolve(e<0?ht:ht+nt.nodeSize))):!1:!1}}else return!1;else{if(b instanceof NodeSelection&&b.node.isInline)return apply(s,new TextSelection(e>0?b.$to:b.$from));{let tt=moveSelectionBlock(s.state,e);return tt?apply(s,tt):!1}}}function nodeLen(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function isIgnorable(s,e){let d=s.pmViewDesc;return d&&d.size==0&&(e<0||s.nextSibling||s.nodeName!="BR")}function skipIgnoredNodes(s,e){return e<0?skipIgnoredNodesBefore(s):skipIgnoredNodesAfter(s)}function skipIgnoredNodesBefore(s){let e=s.domSelectionRange(),d=e.focusNode,b=e.focusOffset;if(!d)return;let tt,nt,ot=!1;for(gecko&&d.nodeType==1&&b<nodeLen(d)&&isIgnorable(d.childNodes[b],-1)&&(ot=!0);;)if(b>0){if(d.nodeType!=1)break;{let ht=d.childNodes[b-1];if(isIgnorable(ht,-1))tt=d,nt=--b;else if(ht.nodeType==3)d=ht,b=d.nodeValue.length;else break}}else{if(isBlockNode(d))break;{let ht=d.previousSibling;for(;ht&&isIgnorable(ht,-1);)tt=d.parentNode,nt=domIndex(ht),ht=ht.previousSibling;if(ht)d=ht,b=nodeLen(d);else{if(d=d.parentNode,d==s.dom)break;b=0}}}ot?setSelFocus(s,d,b):tt&&setSelFocus(s,tt,nt)}function skipIgnoredNodesAfter(s){let e=s.domSelectionRange(),d=e.focusNode,b=e.focusOffset;if(!d)return;let tt=nodeLen(d),nt,ot;for(;;)if(b<tt){if(d.nodeType!=1)break;let ht=d.childNodes[b];if(isIgnorable(ht,1))nt=d,ot=++b;else break}else{if(isBlockNode(d))break;{let ht=d.nextSibling;for(;ht&&isIgnorable(ht,1);)nt=ht.parentNode,ot=domIndex(ht)+1,ht=ht.nextSibling;if(ht)d=ht,b=0,tt=nodeLen(d);else{if(d=d.parentNode,d==s.dom)break;b=tt=0}}}nt&&setSelFocus(s,nt,ot)}function isBlockNode(s){let e=s.pmViewDesc;return e&&e.node&&e.node.isBlock}function textNodeAfter(s,e){for(;s&&e==s.childNodes.length&&!hasBlockDesc(s);)e=domIndex(s)+1,s=s.parentNode;for(;s&&e<s.childNodes.length;){let d=s.childNodes[e];if(d.nodeType==3)return d;if(d.nodeType==1&&d.contentEditable=="false")break;s=d,e=0}}function textNodeBefore(s,e){for(;s&&!e&&!hasBlockDesc(s);)e=domIndex(s),s=s.parentNode;for(;s&&e;){let d=s.childNodes[e-1];if(d.nodeType==3)return d;if(d.nodeType==1&&d.contentEditable=="false")break;s=d,e=s.childNodes.length}}function setSelFocus(s,e,d){if(e.nodeType!=3){let nt,ot;(ot=textNodeAfter(e,d))?(e=ot,d=0):(nt=textNodeBefore(e,d))&&(e=nt,d=nt.nodeValue.length)}let b=s.domSelection();if(selectionCollapsed(b)){let nt=document.createRange();nt.setEnd(e,d),nt.setStart(e,d),b.removeAllRanges(),b.addRange(nt)}else b.extend&&b.extend(e,d);s.domObserver.setCurSelection();let{state:tt}=s;setTimeout(()=>{s.state==tt&&selectionToDOM(s)},50)}function findDirection(s,e){let d=s.state.doc.resolve(e);if(!(chrome||windows)&&d.parent.inlineContent){let tt=s.coordsAtPos(e);if(e>d.start()){let nt=s.coordsAtPos(e-1),ot=(nt.top+nt.bottom)/2;if(ot>tt.top&&ot<tt.bottom&&Math.abs(nt.left-tt.left)>1)return nt.left<tt.left?"ltr":"rtl"}if(e<d.end()){let nt=s.coordsAtPos(e+1),ot=(nt.top+nt.bottom)/2;if(ot>tt.top&&ot<tt.bottom&&Math.abs(nt.left-tt.left)>1)return nt.left>tt.left?"ltr":"rtl"}}return getComputedStyle(s.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(s,e,d){let b=s.state.selection;if(b instanceof TextSelection&&!b.empty||d.indexOf("s")>-1||mac$2&&d.indexOf("m")>-1)return!1;let{$from:tt,$to:nt}=b;if(!tt.parent.inlineContent||s.endOfTextblock(e<0?"up":"down")){let ot=moveSelectionBlock(s.state,e);if(ot&&ot instanceof NodeSelection)return apply(s,ot)}if(!tt.parent.inlineContent){let ot=e<0?tt:nt,ht=b instanceof AllSelection?Selection$2.near(ot,e):Selection$2.findFrom(ot,e);return ht?apply(s,ht):!1}return!1}function stopNativeHorizontalDelete(s,e){if(!(s.state.selection instanceof TextSelection))return!0;let{$head:d,$anchor:b,empty:tt}=s.state.selection;if(!d.sameParent(b))return!0;if(!tt)return!1;if(s.endOfTextblock(e>0?"forward":"backward"))return!0;let nt=!d.textOffset&&(e<0?d.nodeBefore:d.nodeAfter);if(nt&&!nt.isText){let ot=s.state.tr;return e<0?ot.delete(d.pos-nt.nodeSize,d.pos):ot.delete(d.pos,d.pos+nt.nodeSize),s.dispatch(ot),!0}return!1}function switchEditable(s,e,d){s.domObserver.stop(),e.contentEditable=d,s.domObserver.start()}function safariDownArrowBug(s){if(!safari||s.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:d}=s.domSelectionRange();if(e&&e.nodeType==1&&d==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let b=e.firstChild;switchEditable(s,b,"true"),setTimeout(()=>switchEditable(s,b,"false"),20)}return!1}function getMods(s){let e="";return s.ctrlKey&&(e+="c"),s.metaKey&&(e+="m"),s.altKey&&(e+="a"),s.shiftKey&&(e+="s"),e}function captureKeyDown(s,e){let d=e.keyCode,b=getMods(e);if(d==8||mac$2&&d==72&&b=="c")return stopNativeHorizontalDelete(s,-1)||skipIgnoredNodes(s,-1);if(d==46&&!e.shiftKey||mac$2&&d==68&&b=="c")return stopNativeHorizontalDelete(s,1)||skipIgnoredNodes(s,1);if(d==13||d==27)return!0;if(d==37||mac$2&&d==66&&b=="c"){let tt=d==37?findDirection(s,s.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(s,tt,b)||skipIgnoredNodes(s,tt)}else if(d==39||mac$2&&d==70&&b=="c"){let tt=d==39?findDirection(s,s.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(s,tt,b)||skipIgnoredNodes(s,tt)}else{if(d==38||mac$2&&d==80&&b=="c")return selectVertically(s,-1,b)||skipIgnoredNodes(s,-1);if(d==40||mac$2&&d==78&&b=="c")return safariDownArrowBug(s)||selectVertically(s,1,b)||skipIgnoredNodes(s,1);if(b==(mac$2?"m":"c")&&(d==66||d==73||d==89||d==90))return!0}return!1}function serializeForClipboard(s,e){s.someProp("transformCopied",bt=>{e=bt(e,s)});let d=[],{content:b,openStart:tt,openEnd:nt}=e;for(;tt>1&&nt>1&&b.childCount==1&&b.firstChild.childCount==1;){tt--,nt--;let bt=b.firstChild;d.push(bt.type.name,bt.attrs!=bt.type.defaultAttrs?bt.attrs:null),b=bt.content}let ot=s.someProp("clipboardSerializer")||DOMSerializer.fromSchema(s.state.schema),ht=detachedDoc(),mt=ht.createElement("div");mt.appendChild(ot.serializeFragment(b,{document:ht}));let gt=mt.firstChild,yt,ft=0;for(;gt&&gt.nodeType==1&&(yt=wrapMap[gt.nodeName.toLowerCase()]);){for(let bt=yt.length-1;bt>=0;bt--){let vt=ht.createElement(yt[bt]);for(;mt.firstChild;)vt.appendChild(mt.firstChild);mt.appendChild(vt),ft++}gt=mt.firstChild}gt&&gt.nodeType==1&&gt.setAttribute("data-pm-slice",`${tt} ${nt}${ft?` -${ft}`:""} ${JSON.stringify(d)}`);let st=s.someProp("clipboardTextSerializer",bt=>bt(e,s))||e.content.textBetween(0,e.content.size,`

`);return{dom:mt,text:st,slice:e}}function parseFromClipboard(s,e,d,b,tt){let nt=tt.parent.type.spec.code,ot,ht;if(!d&&!e)return null;let mt=e&&(b||nt||!d);if(mt){if(s.someProp("transformPastedText",st=>{e=st(e,nt||b,s)}),nt)return e?new Slice(Fragment.from(s.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let ft=s.someProp("clipboardTextParser",st=>st(e,tt,b,s));if(ft)ht=ft;else{let st=tt.marks(),{schema:bt}=s.state,vt=DOMSerializer.fromSchema(bt);ot=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(xt=>{let wt=ot.appendChild(document.createElement("p"));xt&&wt.appendChild(vt.serializeNode(bt.text(xt,st)))})}}else s.someProp("transformPastedHTML",ft=>{d=ft(d,s)}),ot=readHTML(d),webkit&&restoreReplacedSpaces(ot);let gt=ot&&ot.querySelector("[data-pm-slice]"),yt=gt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(gt.getAttribute("data-pm-slice")||"");if(yt&&yt[3])for(let ft=+yt[3];ft>0;ft--){let st=ot.firstChild;for(;st&&st.nodeType!=1;)st=st.nextSibling;if(!st)break;ot=st}if(ht||(ht=(s.someProp("clipboardParser")||s.someProp("domParser")||DOMParser$1.fromSchema(s.state.schema)).parseSlice(ot,{preserveWhitespace:!!(mt||yt),context:tt,ruleFromNode(st){return st.nodeName=="BR"&&!st.nextSibling&&st.parentNode&&!inlineParents.test(st.parentNode.nodeName)?{ignore:!0}:null}})),yt)ht=addContext(closeSlice(ht,+yt[1],+yt[2]),yt[4]);else if(ht=Slice.maxOpen(normalizeSiblings(ht.content,tt),!0),ht.openStart||ht.openEnd){let ft=0,st=0;for(let bt=ht.content.firstChild;ft<ht.openStart&&!bt.type.spec.isolating;ft++,bt=bt.firstChild);for(let bt=ht.content.lastChild;st<ht.openEnd&&!bt.type.spec.isolating;st++,bt=bt.lastChild);ht=closeSlice(ht,ft,st)}return s.someProp("transformPasted",ft=>{ht=ft(ht,s)}),ht}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(s,e){if(s.childCount<2)return s;for(let d=e.depth;d>=0;d--){let tt=e.node(d).contentMatchAt(e.index(d)),nt,ot=[];if(s.forEach(ht=>{if(!ot)return;let mt=tt.findWrapping(ht.type),gt;if(!mt)return ot=null;if(gt=ot.length&&nt.length&&addToSibling(mt,nt,ht,ot[ot.length-1],0))ot[ot.length-1]=gt;else{ot.length&&(ot[ot.length-1]=closeRight(ot[ot.length-1],nt.length));let yt=withWrappers(ht,mt);ot.push(yt),tt=tt.matchType(yt.type),nt=mt}}),ot)return Fragment.from(ot)}return s}function withWrappers(s,e,d=0){for(let b=e.length-1;b>=d;b--)s=e[b].create(null,Fragment.from(s));return s}function addToSibling(s,e,d,b,tt){if(tt<s.length&&tt<e.length&&s[tt]==e[tt]){let nt=addToSibling(s,e,d,b.lastChild,tt+1);if(nt)return b.copy(b.content.replaceChild(b.childCount-1,nt));if(b.contentMatchAt(b.childCount).matchType(tt==s.length-1?d.type:s[tt+1]))return b.copy(b.content.append(Fragment.from(withWrappers(d,s,tt+1))))}}function closeRight(s,e){if(e==0)return s;let d=s.content.replaceChild(s.childCount-1,closeRight(s.lastChild,e-1)),b=s.contentMatchAt(s.childCount).fillBefore(Fragment.empty,!0);return s.copy(d.append(b))}function closeRange(s,e,d,b,tt,nt){let ot=e<0?s.firstChild:s.lastChild,ht=ot.content;return s.childCount>1&&(nt=0),tt<b-1&&(ht=closeRange(ht,e,d,b,tt+1,nt)),tt>=d&&(ht=e<0?ot.contentMatchAt(0).fillBefore(ht,nt<=tt).append(ht):ht.append(ot.contentMatchAt(ot.childCount).fillBefore(Fragment.empty,!0))),s.replaceChild(e<0?0:s.childCount-1,ot.copy(ht))}function closeSlice(s,e,d){return e<s.openStart&&(s=new Slice(closeRange(s.content,-1,e,s.openStart,0,s.openEnd),e,s.openEnd)),d<s.openEnd&&(s=new Slice(closeRange(s.content,1,d,s.openEnd,0,0),s.openStart,d)),s}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}function readHTML(s){let e=/^(\s*<meta [^>]*>)*/.exec(s);e&&(s=s.slice(e[0].length));let d=detachedDoc().createElement("div"),b=/<([a-z][^>\s]+)/i.exec(s),tt;if((tt=b&&wrapMap[b[1].toLowerCase()])&&(s=tt.map(nt=>"<"+nt+">").join("")+s+tt.map(nt=>"</"+nt+">").reverse().join("")),d.innerHTML=s,tt)for(let nt=0;nt<tt.length;nt++)d=d.querySelector(tt[nt])||d;return d}function restoreReplacedSpaces(s){let e=s.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let d=0;d<e.length;d++){let b=e[d];b.childNodes.length==1&&b.textContent==""&&b.parentNode&&b.parentNode.replaceChild(s.ownerDocument.createTextNode(" "),b)}}function addContext(s,e){if(!s.size)return s;let d=s.content.firstChild.type.schema,b;try{b=JSON.parse(e)}catch{return s}let{content:tt,openStart:nt,openEnd:ot}=s;for(let ht=b.length-2;ht>=0;ht-=2){let mt=d.nodes[b[ht]];if(!mt||mt.hasRequiredAttrs())break;tt=Fragment.from(mt.create(b[ht+1],tt)),nt++,ot++}return new Slice(tt,nt,ot)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(s){for(let e in handlers){let d=handlers[e];s.dom.addEventListener(e,s.input.eventHandlers[e]=b=>{eventBelongsToView(s,b)&&!runCustomHandler(s,b)&&(s.editable||!(b.type in editHandlers))&&d(s,b)},passiveHandlers[e]?{passive:!0}:void 0)}safari&&s.dom.addEventListener("input",()=>null),ensureListeners(s)}function setSelectionOrigin(s,e){s.input.lastSelectionOrigin=e,s.input.lastSelectionTime=Date.now()}function destroyInput(s){s.domObserver.stop();for(let e in s.input.eventHandlers)s.dom.removeEventListener(e,s.input.eventHandlers[e]);clearTimeout(s.input.composingTimeout),clearTimeout(s.input.lastIOSEnterFallbackTimeout)}function ensureListeners(s){s.someProp("handleDOMEvents",e=>{for(let d in e)s.input.eventHandlers[d]||s.dom.addEventListener(d,s.input.eventHandlers[d]=b=>runCustomHandler(s,b))})}function runCustomHandler(s,e){return s.someProp("handleDOMEvents",d=>{let b=d[e.type];return b?b(s,e)||e.defaultPrevented:!1})}function eventBelongsToView(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let d=e.target;d!=s.dom;d=d.parentNode)if(!d||d.nodeType==11||d.pmViewDesc&&d.pmViewDesc.stopEvent(e))return!1;return!0}function dispatchEvent$1(s,e){!runCustomHandler(s,e)&&handlers[e.type]&&(s.editable||!(e.type in editHandlers))&&handlers[e.type](s,e)}editHandlers.keydown=(s,e)=>{let d=e;if(s.input.shiftKey=d.keyCode==16||d.shiftKey,!inOrNearComposition(s,d)&&(s.input.lastKeyCode=d.keyCode,s.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&d.keyCode==13)))if(d.keyCode!=229&&s.domObserver.forceFlush(),ios&&d.keyCode==13&&!d.ctrlKey&&!d.altKey&&!d.metaKey){let b=Date.now();s.input.lastIOSEnter=b,s.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{s.input.lastIOSEnter==b&&(s.someProp("handleKeyDown",tt=>tt(s,keyEvent(13,"Enter"))),s.input.lastIOSEnter=0)},200)}else s.someProp("handleKeyDown",b=>b(s,d))||captureKeyDown(s,d)?d.preventDefault():setSelectionOrigin(s,"key")};editHandlers.keyup=(s,e)=>{e.keyCode==16&&(s.input.shiftKey=!1)};editHandlers.keypress=(s,e)=>{let d=e;if(inOrNearComposition(s,d)||!d.charCode||d.ctrlKey&&!d.altKey||mac$2&&d.metaKey)return;if(s.someProp("handleKeyPress",tt=>tt(s,d))){d.preventDefault();return}let b=s.state.selection;if(!(b instanceof TextSelection)||!b.$from.sameParent(b.$to)){let tt=String.fromCharCode(d.charCode);!/[\r\n]/.test(tt)&&!s.someProp("handleTextInput",nt=>nt(s,b.$from.pos,b.$to.pos,tt))&&s.dispatch(s.state.tr.insertText(tt).scrollIntoView()),d.preventDefault()}};function eventCoords(s){return{left:s.clientX,top:s.clientY}}function isNear(s,e){let d=e.x-s.clientX,b=e.y-s.clientY;return d*d+b*b<100}function runHandlerOnContext(s,e,d,b,tt){if(b==-1)return!1;let nt=s.state.doc.resolve(b);for(let ot=nt.depth+1;ot>0;ot--)if(s.someProp(e,ht=>ot>nt.depth?ht(s,d,nt.nodeAfter,nt.before(ot),tt,!0):ht(s,d,nt.node(ot),nt.before(ot),tt,!1)))return!0;return!1}function updateSelection(s,e,d){s.focused||s.focus();let b=s.state.tr.setSelection(e);b.setMeta("pointer",!0),s.dispatch(b)}function selectClickedLeaf(s,e){if(e==-1)return!1;let d=s.state.doc.resolve(e),b=d.nodeAfter;return b&&b.isAtom&&NodeSelection.isSelectable(b)?(updateSelection(s,new NodeSelection(d)),!0):!1}function selectClickedNode(s,e){if(e==-1)return!1;let d=s.state.selection,b,tt;d instanceof NodeSelection&&(b=d.node);let nt=s.state.doc.resolve(e);for(let ot=nt.depth+1;ot>0;ot--){let ht=ot>nt.depth?nt.nodeAfter:nt.node(ot);if(NodeSelection.isSelectable(ht)){b&&d.$from.depth>0&&ot>=d.$from.depth&&nt.before(d.$from.depth+1)==d.$from.pos?tt=nt.before(d.$from.depth):tt=nt.before(ot);break}}return tt!=null?(updateSelection(s,NodeSelection.create(s.state.doc,tt)),!0):!1}function handleSingleClick(s,e,d,b,tt){return runHandlerOnContext(s,"handleClickOn",e,d,b)||s.someProp("handleClick",nt=>nt(s,e,b))||(tt?selectClickedNode(s,d):selectClickedLeaf(s,d))}function handleDoubleClick(s,e,d,b){return runHandlerOnContext(s,"handleDoubleClickOn",e,d,b)||s.someProp("handleDoubleClick",tt=>tt(s,e,b))}function handleTripleClick(s,e,d,b){return runHandlerOnContext(s,"handleTripleClickOn",e,d,b)||s.someProp("handleTripleClick",tt=>tt(s,e,b))||defaultTripleClick(s,d,b)}function defaultTripleClick(s,e,d){if(d.button!=0)return!1;let b=s.state.doc;if(e==-1)return b.inlineContent?(updateSelection(s,TextSelection.create(b,0,b.content.size)),!0):!1;let tt=b.resolve(e);for(let nt=tt.depth+1;nt>0;nt--){let ot=nt>tt.depth?tt.nodeAfter:tt.node(nt),ht=tt.before(nt);if(ot.inlineContent)updateSelection(s,TextSelection.create(b,ht+1,ht+1+ot.content.size));else if(NodeSelection.isSelectable(ot))updateSelection(s,NodeSelection.create(b,ht));else continue;return!0}}function forceDOMFlush(s){return endComposition(s)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(s,e)=>{let d=e;s.input.shiftKey=d.shiftKey;let b=forceDOMFlush(s),tt=Date.now(),nt="singleClick";tt-s.input.lastClick.time<500&&isNear(d,s.input.lastClick)&&!d[selectNodeModifier]&&(s.input.lastClick.type=="singleClick"?nt="doubleClick":s.input.lastClick.type=="doubleClick"&&(nt="tripleClick")),s.input.lastClick={time:tt,x:d.clientX,y:d.clientY,type:nt};let ot=s.posAtCoords(eventCoords(d));ot&&(nt=="singleClick"?(s.input.mouseDown&&s.input.mouseDown.done(),s.input.mouseDown=new MouseDown(s,ot,d,!!b)):(nt=="doubleClick"?handleDoubleClick:handleTripleClick)(s,ot.pos,ot.inside,d)?d.preventDefault():setSelectionOrigin(s,"pointer"))};class MouseDown{constructor(e,d,b,tt){this.view=e,this.pos=d,this.event=b,this.flushed=tt,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!b[selectNodeModifier],this.allowDefault=b.shiftKey;let nt,ot;if(d.inside>-1)nt=e.state.doc.nodeAt(d.inside),ot=d.inside;else{let yt=e.state.doc.resolve(d.pos);nt=yt.parent,ot=yt.depth?yt.before():0}const ht=tt?null:b.target,mt=ht?e.docView.nearestDesc(ht,!0):null;this.target=mt&&mt.dom.nodeType==1?mt.dom:null;let{selection:gt}=e.state;(b.button==0&&nt.type.spec.draggable&&nt.type.spec.selectable!==!1||gt instanceof NodeSelection&&gt.from<=ot&&gt.to>ot)&&(this.mightDrag={node:nt,pos:ot,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let d=this.pos;this.view.state.doc!=this.startDoc&&(d=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!d?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,d.pos,d.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(d.pos-this.view.state.selection.from),Math.abs(d.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection$2.near(this.view.state.doc.resolve(d.pos))),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=s=>{s.input.lastTouch=Date.now(),forceDOMFlush(s),setSelectionOrigin(s,"pointer")};handlers.touchmove=s=>{s.input.lastTouch=Date.now(),setSelectionOrigin(s,"pointer")};handlers.contextmenu=s=>forceDOMFlush(s);function inOrNearComposition(s,e){return s.composing?!0:safari&&Math.abs(e.timeStamp-s.input.compositionEndedAt)<500?(s.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=s=>{if(!s.composing){s.domObserver.flush();let{state:e}=s,d=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!d.textOffset&&d.parentOffset&&d.nodeBefore.marks.some(b=>b.type.spec.inclusive===!1)))s.markCursor=s.state.storedMarks||d.marks(),endComposition(s,!0),s.markCursor=null;else if(endComposition(s),gecko&&e.selection.empty&&d.parentOffset&&!d.textOffset&&d.nodeBefore.marks.length){let b=s.domSelectionRange();for(let tt=b.focusNode,nt=b.focusOffset;tt&&tt.nodeType==1&&nt!=0;){let ot=nt<0?tt.lastChild:tt.childNodes[nt-1];if(!ot)break;if(ot.nodeType==3){s.domSelection().collapse(ot,ot.nodeValue.length);break}else tt=ot,nt=-1}}s.input.composing=!0}scheduleComposeEnd(s,timeoutComposition)};editHandlers.compositionend=(s,e)=>{s.composing&&(s.input.composing=!1,s.input.compositionEndedAt=e.timeStamp,s.input.compositionPendingChanges=s.domObserver.pendingRecords().length?s.input.compositionID:0,s.input.compositionNode=null,s.input.compositionPendingChanges&&Promise.resolve().then(()=>s.domObserver.flush()),s.input.compositionID++,scheduleComposeEnd(s,20))};function scheduleComposeEnd(s,e){clearTimeout(s.input.composingTimeout),e>-1&&(s.input.composingTimeout=setTimeout(()=>endComposition(s),e))}function clearComposition(s){for(s.composing&&(s.input.composing=!1,s.input.compositionEndedAt=timestampFromCustomEvent());s.input.compositionNodes.length>0;)s.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(s){let e=s.domSelectionRange();if(!e.focusNode)return null;let d=textNodeBefore$1(e.focusNode,e.focusOffset),b=textNodeAfter$1(e.focusNode,e.focusOffset);if(d&&b&&d!=b){let tt=b.pmViewDesc,nt=s.domObserver.lastChangedTextNode;if(d==nt||b==nt)return nt;if(!tt||!tt.isText(b.nodeValue))return b;if(s.input.compositionNode==b){let ot=d.pmViewDesc;if(!(!ot||!ot.isText(d.nodeValue)))return b}}return d||b}function timestampFromCustomEvent(){let s=document.createEvent("Event");return s.initEvent("event",!0,!0),s.timeStamp}function endComposition(s,e=!1){if(!(android&&s.domObserver.flushingSoon>=0)){if(s.domObserver.forceFlush(),clearComposition(s),e||s.docView&&s.docView.dirty){let d=selectionFromDOM(s);return d&&!d.eq(s.state.selection)?s.dispatch(s.state.tr.setSelection(d)):s.updateState(s.state),!0}return!1}}function captureCopy(s,e){if(!s.dom.parentNode)return;let d=s.dom.parentNode.appendChild(document.createElement("div"));d.appendChild(e),d.style.cssText="position: fixed; left: -10000px; top: 10px";let b=getSelection(),tt=document.createRange();tt.selectNodeContents(e),s.dom.blur(),b.removeAllRanges(),b.addRange(tt),setTimeout(()=>{d.parentNode&&d.parentNode.removeChild(d),s.focus()},50)}const brokenClipboardAPI=ie$3&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(s,e)=>{let d=e,b=s.state.selection,tt=d.type=="cut";if(b.empty)return;let nt=brokenClipboardAPI?null:d.clipboardData,ot=b.content(),{dom:ht,text:mt}=serializeForClipboard(s,ot);nt?(d.preventDefault(),nt.clearData(),nt.setData("text/html",ht.innerHTML),nt.setData("text/plain",mt)):captureCopy(s,ht),tt&&s.dispatch(s.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(s){return s.openStart==0&&s.openEnd==0&&s.content.childCount==1?s.content.firstChild:null}function capturePaste(s,e){if(!s.dom.parentNode)return;let d=s.input.shiftKey||s.state.selection.$from.parent.type.spec.code,b=s.dom.parentNode.appendChild(document.createElement(d?"textarea":"div"));d||(b.contentEditable="true"),b.style.cssText="position: fixed; left: -10000px; top: 10px",b.focus();let tt=s.input.shiftKey&&s.input.lastKeyCode!=45;setTimeout(()=>{s.focus(),b.parentNode&&b.parentNode.removeChild(b),d?doPaste(s,b.value,null,tt,e):doPaste(s,b.textContent,b.innerHTML,tt,e)},50)}function doPaste(s,e,d,b,tt){let nt=parseFromClipboard(s,e,d,b,s.state.selection.$from);if(s.someProp("handlePaste",mt=>mt(s,tt,nt||Slice.empty)))return!0;if(!nt)return!1;let ot=sliceSingleNode(nt),ht=ot?s.state.tr.replaceSelectionWith(ot,b):s.state.tr.replaceSelection(nt);return s.dispatch(ht.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(s){let e=s.getData("text/plain")||s.getData("Text");if(e)return e;let d=s.getData("text/uri-list");return d?d.replace(/\r?\n/g," "):""}editHandlers.paste=(s,e)=>{let d=e;if(s.composing&&!android)return;let b=brokenClipboardAPI?null:d.clipboardData,tt=s.input.shiftKey&&s.input.lastKeyCode!=45;b&&doPaste(s,getText$1(b),b.getData("text/html"),tt,d)?d.preventDefault():capturePaste(s,d)};class Dragging{constructor(e,d,b){this.slice=e,this.move=d,this.node=b}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers.dragstart=(s,e)=>{let d=e,b=s.input.mouseDown;if(b&&b.done(),!d.dataTransfer)return;let tt=s.state.selection,nt=tt.empty?null:s.posAtCoords(eventCoords(d)),ot;if(!(nt&&nt.pos>=tt.from&&nt.pos<=(tt instanceof NodeSelection?tt.to-1:tt.to))){if(b&&b.mightDrag)ot=NodeSelection.create(s.state.doc,b.mightDrag.pos);else if(d.target&&d.target.nodeType==1){let ft=s.docView.nearestDesc(d.target,!0);ft&&ft.node.type.spec.draggable&&ft!=s.docView&&(ot=NodeSelection.create(s.state.doc,ft.posBefore))}}let ht=(ot||s.state.selection).content(),{dom:mt,text:gt,slice:yt}=serializeForClipboard(s,ht);(!d.dataTransfer.files.length||!chrome||chrome_version>120)&&d.dataTransfer.clearData(),d.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",mt.innerHTML),d.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||d.dataTransfer.setData("text/plain",gt),s.dragging=new Dragging(yt,!d[dragCopyModifier],ot)};handlers.dragend=s=>{let e=s.dragging;window.setTimeout(()=>{s.dragging==e&&(s.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(s,e)=>e.preventDefault();editHandlers.drop=(s,e)=>{let d=e,b=s.dragging;if(s.dragging=null,!d.dataTransfer)return;let tt=s.posAtCoords(eventCoords(d));if(!tt)return;let nt=s.state.doc.resolve(tt.pos),ot=b&&b.slice;ot?s.someProp("transformPasted",vt=>{ot=vt(ot,s)}):ot=parseFromClipboard(s,getText$1(d.dataTransfer),brokenClipboardAPI?null:d.dataTransfer.getData("text/html"),!1,nt);let ht=!!(b&&!d[dragCopyModifier]);if(s.someProp("handleDrop",vt=>vt(s,d,ot||Slice.empty,ht))){d.preventDefault();return}if(!ot)return;d.preventDefault();let mt=ot?dropPoint(s.state.doc,nt.pos,ot):nt.pos;mt==null&&(mt=nt.pos);let gt=s.state.tr;if(ht){let{node:vt}=b;vt?vt.replace(gt):gt.deleteSelection()}let yt=gt.mapping.map(mt),ft=ot.openStart==0&&ot.openEnd==0&&ot.content.childCount==1,st=gt.doc;if(ft?gt.replaceRangeWith(yt,yt,ot.content.firstChild):gt.replaceRange(yt,yt,ot),gt.doc.eq(st))return;let bt=gt.doc.resolve(yt);if(ft&&NodeSelection.isSelectable(ot.content.firstChild)&&bt.nodeAfter&&bt.nodeAfter.sameMarkup(ot.content.firstChild))gt.setSelection(new NodeSelection(bt));else{let vt=gt.mapping.map(mt);gt.mapping.maps[gt.mapping.maps.length-1].forEach((xt,wt,St,_t)=>vt=_t),gt.setSelection(selectionBetween(s,bt,gt.doc.resolve(vt)))}s.focus(),s.dispatch(gt.setMeta("uiEvent","drop"))};handlers.focus=s=>{s.input.lastFocus=Date.now(),s.focused||(s.domObserver.stop(),s.dom.classList.add("ProseMirror-focused"),s.domObserver.start(),s.focused=!0,setTimeout(()=>{s.docView&&s.hasFocus()&&!s.domObserver.currentSelection.eq(s.domSelectionRange())&&selectionToDOM(s)},20))};handlers.blur=(s,e)=>{let d=e;s.focused&&(s.domObserver.stop(),s.dom.classList.remove("ProseMirror-focused"),s.domObserver.start(),d.relatedTarget&&s.dom.contains(d.relatedTarget)&&s.domObserver.currentSelection.clear(),s.focused=!1)};handlers.beforeinput=(s,e)=>{if(chrome&&android&&e.inputType=="deleteContentBackward"){s.domObserver.flushSoon();let{domChangeCount:b}=s.input;setTimeout(()=>{if(s.input.domChangeCount!=b||(s.dom.blur(),s.focus(),s.someProp("handleKeyDown",nt=>nt(s,keyEvent(8,"Backspace")))))return;let{$cursor:tt}=s.state.selection;tt&&tt.pos>0&&s.dispatch(s.state.tr.delete(tt.pos-1,tt.pos).scrollIntoView())},50)}};for(let s in editHandlers)handlers[s]=editHandlers[s];function compareObjs(s,e){if(s==e)return!0;for(let d in s)if(s[d]!==e[d])return!1;for(let d in e)if(!(d in s))return!1;return!0}class WidgetType{constructor(e,d){this.toDOM=e,this.spec=d||noSpec,this.side=this.spec.side||0}map(e,d,b,tt){let{pos:nt,deleted:ot}=e.mapResult(d.from+tt,this.side<0?-1:1);return ot?null:new Decoration(nt-b,nt-b,this)}valid(){return!0}eq(e){return this==e||e instanceof WidgetType&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class InlineType{constructor(e,d){this.attrs=e,this.spec=d||noSpec}map(e,d,b,tt){let nt=e.map(d.from+tt,this.spec.inclusiveStart?-1:1)-b,ot=e.map(d.to+tt,this.spec.inclusiveEnd?1:-1)-b;return nt>=ot?null:new Decoration(nt,ot,this)}valid(e,d){return d.from<d.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}class NodeType{constructor(e,d){this.attrs=e,this.spec=d||noSpec}map(e,d,b,tt){let nt=e.mapResult(d.from+tt,1);if(nt.deleted)return null;let ot=e.mapResult(d.to+tt,-1);return ot.deleted||ot.pos<=nt.pos?null:new Decoration(nt.pos-b,ot.pos-b,this)}valid(e,d){let{index:b,offset:tt}=e.content.findIndex(d.from),nt;return tt==d.from&&!(nt=e.child(b)).isText&&tt+nt.nodeSize==d.to}eq(e){return this==e||e instanceof NodeType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}destroy(){}}class Decoration{constructor(e,d,b){this.from=e,this.to=d,this.type=b}copy(e,d){return new Decoration(e,d,this.type)}eq(e,d=0){return this.type.eq(e.type)&&this.from+d==e.from&&this.to+d==e.to}map(e,d,b){return this.type.map(e,this,d,b)}static widget(e,d,b){return new Decoration(e,e,new WidgetType(d,b))}static inline(e,d,b,tt){return new Decoration(e,d,new InlineType(b,tt))}static node(e,d,b,tt){return new Decoration(e,d,new NodeType(b,tt))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none$1=[],noSpec={};class DecorationSet{constructor(e,d){this.local=e.length?e:none$1,this.children=d.length?d:none$1}static create(e,d){return d.length?buildTree$1(d,e,0,noSpec):empty$1}find(e,d,b){let tt=[];return this.findInner(e??0,d??1e9,tt,0,b),tt}findInner(e,d,b,tt,nt){for(let ot=0;ot<this.local.length;ot++){let ht=this.local[ot];ht.from<=d&&ht.to>=e&&(!nt||nt(ht.spec))&&b.push(ht.copy(ht.from+tt,ht.to+tt))}for(let ot=0;ot<this.children.length;ot+=3)if(this.children[ot]<d&&this.children[ot+1]>e){let ht=this.children[ot]+1;this.children[ot+2].findInner(e-ht,d-ht,b,tt+ht,nt)}}map(e,d,b){return this==empty$1||e.maps.length==0?this:this.mapInner(e,d,0,0,b||noSpec)}mapInner(e,d,b,tt,nt){let ot;for(let ht=0;ht<this.local.length;ht++){let mt=this.local[ht].map(e,b,tt);mt&&mt.type.valid(d,mt)?(ot||(ot=[])).push(mt):nt.onRemove&&nt.onRemove(this.local[ht].spec)}return this.children.length?mapChildren(this.children,ot||[],e,d,b,tt,nt):ot?new DecorationSet(ot.sort(byPos),none$1):empty$1}add(e,d){return d.length?this==empty$1?DecorationSet.create(e,d):this.addInner(e,d,0):this}addInner(e,d,b){let tt,nt=0;e.forEach((ht,mt)=>{let gt=mt+b,yt;if(yt=takeSpansForNode(d,ht,gt)){for(tt||(tt=this.children.slice());nt<tt.length&&tt[nt]<mt;)nt+=3;tt[nt]==mt?tt[nt+2]=tt[nt+2].addInner(ht,yt,gt+1):tt.splice(nt,0,mt,mt+ht.nodeSize,buildTree$1(yt,ht,gt+1,noSpec)),nt+=3}});let ot=moveSpans(nt?withoutNulls(d):d,-b);for(let ht=0;ht<ot.length;ht++)ot[ht].type.valid(e,ot[ht])||ot.splice(ht--,1);return new DecorationSet(ot.length?this.local.concat(ot).sort(byPos):this.local,tt||this.children)}remove(e){return e.length==0||this==empty$1?this:this.removeInner(e,0)}removeInner(e,d){let b=this.children,tt=this.local;for(let nt=0;nt<b.length;nt+=3){let ot,ht=b[nt]+d,mt=b[nt+1]+d;for(let yt=0,ft;yt<e.length;yt++)(ft=e[yt])&&ft.from>ht&&ft.to<mt&&(e[yt]=null,(ot||(ot=[])).push(ft));if(!ot)continue;b==this.children&&(b=this.children.slice());let gt=b[nt+2].removeInner(ot,ht+1);gt!=empty$1?b[nt+2]=gt:(b.splice(nt,3),nt-=3)}if(tt.length){for(let nt=0,ot;nt<e.length;nt++)if(ot=e[nt])for(let ht=0;ht<tt.length;ht++)tt[ht].eq(ot,d)&&(tt==this.local&&(tt=this.local.slice()),tt.splice(ht--,1))}return b==this.children&&tt==this.local?this:tt.length||b.length?new DecorationSet(tt,b):empty$1}forChild(e,d){if(this==empty$1)return this;if(d.isLeaf)return DecorationSet.empty;let b,tt;for(let ht=0;ht<this.children.length;ht+=3)if(this.children[ht]>=e){this.children[ht]==e&&(b=this.children[ht+2]);break}let nt=e+1,ot=nt+d.content.size;for(let ht=0;ht<this.local.length;ht++){let mt=this.local[ht];if(mt.from<ot&&mt.to>nt&&mt.type instanceof InlineType){let gt=Math.max(nt,mt.from)-nt,yt=Math.min(ot,mt.to)-nt;gt<yt&&(tt||(tt=[])).push(mt.copy(gt,yt))}}if(tt){let ht=new DecorationSet(tt.sort(byPos),none$1);return b?new DecorationGroup([ht,b]):ht}return b||empty$1}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let d=0;d<this.local.length;d++)if(!this.local[d].eq(e.local[d]))return!1;for(let d=0;d<this.children.length;d+=3)if(this.children[d]!=e.children[d]||this.children[d+1]!=e.children[d+1]||!this.children[d+2].eq(e.children[d+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==empty$1)return none$1;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let d=[];for(let b=0;b<this.local.length;b++)this.local[b].type instanceof InlineType||d.push(this.local[b]);return d}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty$1=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,d){const b=this.members.map(tt=>tt.map(e,d,noSpec));return DecorationGroup.from(b)}forChild(e,d){if(d.isLeaf)return DecorationSet.empty;let b=[];for(let tt=0;tt<this.members.length;tt++){let nt=this.members[tt].forChild(e,d);nt!=empty$1&&(nt instanceof DecorationGroup?b=b.concat(nt.members):b.push(nt))}return DecorationGroup.from(b)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let d=0;d<this.members.length;d++)if(!this.members[d].eq(e.members[d]))return!1;return!0}locals(e){let d,b=!0;for(let tt=0;tt<this.members.length;tt++){let nt=this.members[tt].localsInner(e);if(nt.length)if(!d)d=nt;else{b&&(d=d.slice(),b=!1);for(let ot=0;ot<nt.length;ot++)d.push(nt[ot])}}return d?removeOverlap(b?d:d.sort(byPos)):none$1}static from(e){switch(e.length){case 0:return empty$1;case 1:return e[0];default:return new DecorationGroup(e.every(d=>d instanceof DecorationSet)?e:e.reduce((d,b)=>d.concat(b instanceof DecorationSet?b:b.members),[]))}}}function mapChildren(s,e,d,b,tt,nt,ot){let ht=s.slice();for(let gt=0,yt=nt;gt<d.maps.length;gt++){let ft=0;d.maps[gt].forEach((st,bt,vt,xt)=>{let wt=xt-vt-(bt-st);for(let St=0;St<ht.length;St+=3){let _t=ht[St+1];if(_t<0||st>_t+yt-ft)continue;let Tt=ht[St]+yt-ft;bt>=Tt?ht[St+1]=st<=Tt?-2:-1:st>=yt&&wt&&(ht[St]+=wt,ht[St+1]+=wt)}ft+=wt}),yt=d.maps[gt].map(yt,-1)}let mt=!1;for(let gt=0;gt<ht.length;gt+=3)if(ht[gt+1]<0){if(ht[gt+1]==-2){mt=!0,ht[gt+1]=-1;continue}let yt=d.map(s[gt]+nt),ft=yt-tt;if(ft<0||ft>=b.content.size){mt=!0;continue}let st=d.map(s[gt+1]+nt,-1),bt=st-tt,{index:vt,offset:xt}=b.content.findIndex(ft),wt=b.maybeChild(vt);if(wt&&xt==ft&&xt+wt.nodeSize==bt){let St=ht[gt+2].mapInner(d,wt,yt+1,s[gt]+nt+1,ot);St!=empty$1?(ht[gt]=ft,ht[gt+1]=bt,ht[gt+2]=St):(ht[gt+1]=-2,mt=!0)}else mt=!0}if(mt){let gt=mapAndGatherRemainingDecorations(ht,s,e,d,tt,nt,ot),yt=buildTree$1(gt,b,0,ot);e=yt.local;for(let ft=0;ft<ht.length;ft+=3)ht[ft+1]<0&&(ht.splice(ft,3),ft-=3);for(let ft=0,st=0;ft<yt.children.length;ft+=3){let bt=yt.children[ft];for(;st<ht.length&&ht[st]<bt;)st+=3;ht.splice(st,0,yt.children[ft],yt.children[ft+1],yt.children[ft+2])}}return new DecorationSet(e.sort(byPos),ht)}function moveSpans(s,e){if(!e||!s.length)return s;let d=[];for(let b=0;b<s.length;b++){let tt=s[b];d.push(new Decoration(tt.from+e,tt.to+e,tt.type))}return d}function mapAndGatherRemainingDecorations(s,e,d,b,tt,nt,ot){function ht(mt,gt){for(let yt=0;yt<mt.local.length;yt++){let ft=mt.local[yt].map(b,tt,gt);ft?d.push(ft):ot.onRemove&&ot.onRemove(mt.local[yt].spec)}for(let yt=0;yt<mt.children.length;yt+=3)ht(mt.children[yt+2],mt.children[yt]+gt+1)}for(let mt=0;mt<s.length;mt+=3)s[mt+1]==-1&&ht(s[mt+2],e[mt]+nt+1);return d}function takeSpansForNode(s,e,d){if(e.isLeaf)return null;let b=d+e.nodeSize,tt=null;for(let nt=0,ot;nt<s.length;nt++)(ot=s[nt])&&ot.from>d&&ot.to<b&&((tt||(tt=[])).push(ot),s[nt]=null);return tt}function withoutNulls(s){let e=[];for(let d=0;d<s.length;d++)s[d]!=null&&e.push(s[d]);return e}function buildTree$1(s,e,d,b){let tt=[],nt=!1;e.forEach((ht,mt)=>{let gt=takeSpansForNode(s,ht,mt+d);if(gt){nt=!0;let yt=buildTree$1(gt,ht,d+mt+1,b);yt!=empty$1&&tt.push(mt,mt+ht.nodeSize,yt)}});let ot=moveSpans(nt?withoutNulls(s):s,-d).sort(byPos);for(let ht=0;ht<ot.length;ht++)ot[ht].type.valid(e,ot[ht])||(b.onRemove&&b.onRemove(ot[ht].spec),ot.splice(ht--,1));return ot.length||tt.length?new DecorationSet(ot,tt):empty$1}function byPos(s,e){return s.from-e.from||s.to-e.to}function removeOverlap(s){let e=s;for(let d=0;d<e.length-1;d++){let b=e[d];if(b.from!=b.to)for(let tt=d+1;tt<e.length;tt++){let nt=e[tt];if(nt.from==b.from){nt.to!=b.to&&(e==s&&(e=s.slice()),e[tt]=nt.copy(nt.from,b.to),insertAhead(e,tt+1,nt.copy(b.to,nt.to)));continue}else{nt.from<b.to&&(e==s&&(e=s.slice()),e[d]=b.copy(b.from,nt.from),insertAhead(e,tt,b.copy(nt.from,b.to)));break}}}return e}function insertAhead(s,e,d){for(;e<s.length&&byPos(d,s[e])>0;)e++;s.splice(e,0,d)}function viewDecorations(s){let e=[];return s.someProp("decorations",d=>{let b=d(s.state);b&&b!=empty$1&&e.push(b)}),s.cursorWrapper&&e.push(DecorationSet.create(s.state.doc,[s.cursorWrapper.deco])),DecorationGroup.from(e)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$3&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class DOMObserver{constructor(e,d){this.view=e,this.handleDOMChange=d,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(b=>{for(let tt=0;tt<b.length;tt++)this.queue.push(b[tt]);ie$3&&ie_version<=11&&b.some(tt=>tt.type=="childList"&&tt.removedNodes.length||tt.type=="characterData"&&tt.oldValue.length>tt.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=b=>{this.queue.push({target:b.target,type:"characterData",oldValue:b.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let d=0;d<e.length;d++)this.queue.push(e[d]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$3&&ie_version<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let d=new Set,b;for(let nt=e.focusNode;nt;nt=parentNode(nt))d.add(nt);for(let nt=e.anchorNode;nt;nt=parentNode(nt))if(d.has(nt)){b=nt;break}let tt=b&&this.view.docView.nearestDesc(b);if(tt&&tt.ignoreMutation({type:"selection",target:b.nodeType==3?b.parentNode:b}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let d=this.pendingRecords();d.length&&(this.queue=[]);let b=e.domSelectionRange(),tt=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(b)&&hasFocusAndSelection(e)&&!this.ignoreSelectionChange(b),nt=-1,ot=-1,ht=!1,mt=[];if(e.editable)for(let yt=0;yt<d.length;yt++){let ft=this.registerMutation(d[yt],mt);ft&&(nt=nt<0?ft.from:Math.min(ft.from,nt),ot=ot<0?ft.to:Math.max(ft.to,ot),ft.typeOver&&(ht=!0))}if(gecko&&mt.length){let yt=mt.filter(ft=>ft.nodeName=="BR");if(yt.length==2){let[ft,st]=yt;ft.parentNode&&ft.parentNode.parentNode==st.parentNode?st.remove():ft.remove()}else{let{focusNode:ft}=this.currentSelection;for(let st of yt){let bt=st.parentNode;bt&&bt.nodeName=="LI"&&(!ft||blockParent(e,ft)!=bt)&&st.remove()}}}let gt=null;nt<0&&tt&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&selectionCollapsed(b)&&(gt=selectionFromDOM(e))&&gt.eq(Selection$2.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,selectionToDOM(e),this.currentSelection.set(b),e.scrollToSelection()):(nt>-1||tt)&&(nt>-1&&(e.docView.markDirty(nt,ot),checkCSS(e)),this.handleDOMChange(nt,ot,ht,mt),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(b)||selectionToDOM(e),this.currentSelection.set(b))}registerMutation(e,d){if(d.indexOf(e.target)>-1)return null;let b=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(b==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!b||b.ignoreMutation(e))return null;if(e.type=="childList"){for(let yt=0;yt<e.addedNodes.length;yt++){let ft=e.addedNodes[yt];d.push(ft),ft.nodeType==3&&(this.lastChangedTextNode=ft)}if(b.contentDOM&&b.contentDOM!=b.dom&&!b.contentDOM.contains(e.target))return{from:b.posBefore,to:b.posAfter};let tt=e.previousSibling,nt=e.nextSibling;if(ie$3&&ie_version<=11&&e.addedNodes.length)for(let yt=0;yt<e.addedNodes.length;yt++){let{previousSibling:ft,nextSibling:st}=e.addedNodes[yt];(!ft||Array.prototype.indexOf.call(e.addedNodes,ft)<0)&&(tt=ft),(!st||Array.prototype.indexOf.call(e.addedNodes,st)<0)&&(nt=st)}let ot=tt&&tt.parentNode==e.target?domIndex(tt)+1:0,ht=b.localPosFromDOM(e.target,ot,-1),mt=nt&&nt.parentNode==e.target?domIndex(nt):e.target.childNodes.length,gt=b.localPosFromDOM(e.target,mt,1);return{from:ht,to:gt}}else return e.type=="attributes"?{from:b.posAtStart-b.border,to:b.posAtEnd+b.border}:(this.lastChangedTextNode=e.target,{from:b.posAtStart,to:b.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(s){if(!cssChecked.has(s)&&(cssChecked.set(s,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(s.dom).whiteSpace)!==-1)){if(s.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(s,e){let d=e.startContainer,b=e.startOffset,tt=e.endContainer,nt=e.endOffset,ot=s.domAtPos(s.state.selection.anchor);return isEquivalentPosition(ot.node,ot.offset,tt,nt)&&([d,b,tt,nt]=[tt,nt,d,b]),{anchorNode:d,anchorOffset:b,focusNode:tt,focusOffset:nt}}function safariShadowSelectionRange(s,e){if(e.getComposedRanges){let tt=e.getComposedRanges(s.root)[0];if(tt)return rangeToSelectionRange(s,tt)}let d;function b(tt){tt.preventDefault(),tt.stopImmediatePropagation(),d=tt.getTargetRanges()[0]}return s.dom.addEventListener("beforeinput",b,!0),document.execCommand("indent"),s.dom.removeEventListener("beforeinput",b,!0),d?rangeToSelectionRange(s,d):null}function blockParent(s,e){for(let d=e.parentNode;d&&d!=s.dom;d=d.parentNode){let b=s.docView.nearestDesc(d,!0);if(b&&b.node.isBlock)return d}return null}function parseBetween(s,e,d){let{node:b,fromOffset:tt,toOffset:nt,from:ot,to:ht}=s.docView.parseRange(e,d),mt=s.domSelectionRange(),gt,yt=mt.anchorNode;if(yt&&s.dom.contains(yt.nodeType==1?yt:yt.parentNode)&&(gt=[{node:yt,offset:mt.anchorOffset}],selectionCollapsed(mt)||gt.push({node:mt.focusNode,offset:mt.focusOffset})),chrome&&s.input.lastKeyCode===8)for(let wt=nt;wt>tt;wt--){let St=b.childNodes[wt-1],_t=St.pmViewDesc;if(St.nodeName=="BR"&&!_t){nt=wt;break}if(!_t||_t.size)break}let ft=s.state.doc,st=s.someProp("domParser")||DOMParser$1.fromSchema(s.state.schema),bt=ft.resolve(ot),vt=null,xt=st.parse(b,{topNode:bt.parent,topMatch:bt.parent.contentMatchAt(bt.index()),topOpen:!0,from:tt,to:nt,preserveWhitespace:bt.parent.type.whitespace=="pre"?"full":!0,findPositions:gt,ruleFromNode,context:bt});if(gt&&gt[0].pos!=null){let wt=gt[0].pos,St=gt[1]&&gt[1].pos;St==null&&(St=wt),vt={anchor:wt+ot,head:St+ot}}return{doc:xt,sel:vt,from:ot,to:ht}}function ruleFromNode(s){let e=s.pmViewDesc;if(e)return e.parseRule();if(s.nodeName=="BR"&&s.parentNode){if(safari&&/^(ul|ol)$/i.test(s.parentNode.nodeName)){let d=document.createElement("div");return d.appendChild(document.createElement("li")),{skip:d}}else if(s.parentNode.lastChild==s||safari&&/^(tr|table)$/i.test(s.parentNode.nodeName))return{ignore:!0}}else if(s.nodeName=="IMG"&&s.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(s,e,d,b,tt){let nt=s.input.compositionPendingChanges||(s.composing?s.input.compositionID:0);if(s.input.compositionPendingChanges=0,e<0){let At=s.input.lastSelectionTime>Date.now()-50?s.input.lastSelectionOrigin:null,It=selectionFromDOM(s,At);if(It&&!s.state.selection.eq(It)){if(chrome&&android&&s.input.lastKeyCode===13&&Date.now()-100<s.input.lastKeyCodeTime&&s.someProp("handleKeyDown",qt=>qt(s,keyEvent(13,"Enter"))))return;let jt=s.state.tr.setSelection(It);At=="pointer"?jt.setMeta("pointer",!0):At=="key"&&jt.scrollIntoView(),nt&&jt.setMeta("composition",nt),s.dispatch(jt)}return}let ot=s.state.doc.resolve(e),ht=ot.sharedDepth(d);e=ot.before(ht+1),d=s.state.doc.resolve(d).after(ht+1);let mt=s.state.selection,gt=parseBetween(s,e,d),yt=s.state.doc,ft=yt.slice(gt.from,gt.to),st,bt;s.input.lastKeyCode===8&&Date.now()-100<s.input.lastKeyCodeTime?(st=s.state.selection.to,bt="end"):(st=s.state.selection.from,bt="start"),s.input.lastKeyCode=null;let vt=findDiff(ft.content,gt.doc.content,gt.from,st,bt);if((ios&&s.input.lastIOSEnter>Date.now()-225||android)&&tt.some(At=>At.nodeType==1&&!isInline.test(At.nodeName))&&(!vt||vt.endA>=vt.endB)&&s.someProp("handleKeyDown",At=>At(s,keyEvent(13,"Enter")))){s.input.lastIOSEnter=0;return}if(!vt)if(b&&mt instanceof TextSelection&&!mt.empty&&mt.$head.sameParent(mt.$anchor)&&!s.composing&&!(gt.sel&&gt.sel.anchor!=gt.sel.head))vt={start:mt.from,endA:mt.to,endB:mt.to};else{if(gt.sel){let At=resolveSelection(s,s.state.doc,gt.sel);if(At&&!At.eq(s.state.selection)){let It=s.state.tr.setSelection(At);nt&&It.setMeta("composition",nt),s.dispatch(It)}}return}s.input.domChangeCount++,s.state.selection.from<s.state.selection.to&&vt.start==vt.endB&&s.state.selection instanceof TextSelection&&(vt.start>s.state.selection.from&&vt.start<=s.state.selection.from+2&&s.state.selection.from>=gt.from?vt.start=s.state.selection.from:vt.endA<s.state.selection.to&&vt.endA>=s.state.selection.to-2&&s.state.selection.to<=gt.to&&(vt.endB+=s.state.selection.to-vt.endA,vt.endA=s.state.selection.to)),ie$3&&ie_version<=11&&vt.endB==vt.start+1&&vt.endA==vt.start&&vt.start>gt.from&&gt.doc.textBetween(vt.start-gt.from-1,vt.start-gt.from+1)==" "&&(vt.start--,vt.endA--,vt.endB--);let xt=gt.doc.resolveNoCache(vt.start-gt.from),wt=gt.doc.resolveNoCache(vt.endB-gt.from),St=yt.resolve(vt.start),_t=xt.sameParent(wt)&&xt.parent.inlineContent&&St.end()>=vt.endA,Tt;if((ios&&s.input.lastIOSEnter>Date.now()-225&&(!_t||tt.some(At=>At.nodeName=="DIV"||At.nodeName=="P"))||!_t&&xt.pos<gt.doc.content.size&&!xt.sameParent(wt)&&(Tt=Selection$2.findFrom(gt.doc.resolve(xt.pos+1),1,!0))&&Tt.head==wt.pos)&&s.someProp("handleKeyDown",At=>At(s,keyEvent(13,"Enter")))){s.input.lastIOSEnter=0;return}if(s.state.selection.anchor>vt.start&&looksLikeBackspace(yt,vt.start,vt.endA,xt,wt)&&s.someProp("handleKeyDown",At=>At(s,keyEvent(8,"Backspace")))){android&&chrome&&s.domObserver.suppressSelectionUpdates();return}chrome&&android&&vt.endB==vt.start&&(s.input.lastAndroidDelete=Date.now()),android&&!_t&&xt.start()!=wt.start()&&wt.parentOffset==0&&xt.depth==wt.depth&&gt.sel&&gt.sel.anchor==gt.sel.head&&gt.sel.head==vt.endA&&(vt.endB-=2,wt=gt.doc.resolveNoCache(vt.endB-gt.from),setTimeout(()=>{s.someProp("handleKeyDown",function(At){return At(s,keyEvent(13,"Enter"))})},20));let Et=vt.start,kt=vt.endA,Mt,Ot,Dt;if(_t){if(xt.pos==wt.pos)ie$3&&ie_version<=11&&xt.parentOffset==0&&(s.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(s),20)),Mt=s.state.tr.delete(Et,kt),Ot=yt.resolve(vt.start).marksAcross(yt.resolve(vt.endA));else if(vt.endA==vt.endB&&(Dt=isMarkChange(xt.parent.content.cut(xt.parentOffset,wt.parentOffset),St.parent.content.cut(St.parentOffset,vt.endA-St.start()))))Mt=s.state.tr,Dt.type=="add"?Mt.addMark(Et,kt,Dt.mark):Mt.removeMark(Et,kt,Dt.mark);else if(xt.parent.child(xt.index()).isText&&xt.index()==wt.index()-(wt.textOffset?0:1)){let At=xt.parent.textBetween(xt.parentOffset,wt.parentOffset);if(s.someProp("handleTextInput",It=>It(s,Et,kt,At)))return;Mt=s.state.tr.insertText(At,Et,kt)}}if(Mt||(Mt=s.state.tr.replace(Et,kt,gt.doc.slice(vt.start-gt.from,vt.endB-gt.from))),gt.sel){let At=resolveSelection(s,Mt.doc,gt.sel);At&&!(chrome&&android&&s.composing&&At.empty&&(vt.start!=vt.endB||s.input.lastAndroidDelete<Date.now()-100)&&(At.head==Et||At.head==Mt.mapping.map(kt)-1)||ie$3&&At.empty&&At.head==Et)&&Mt.setSelection(At)}Ot&&Mt.ensureMarks(Ot),nt&&Mt.setMeta("composition",nt),s.dispatch(Mt.scrollIntoView())}function resolveSelection(s,e,d){return Math.max(d.anchor,d.head)>e.content.size?null:selectionBetween(s,e.resolve(d.anchor),e.resolve(d.head))}function isMarkChange(s,e){let d=s.firstChild.marks,b=e.firstChild.marks,tt=d,nt=b,ot,ht,mt;for(let yt=0;yt<b.length;yt++)tt=b[yt].removeFromSet(tt);for(let yt=0;yt<d.length;yt++)nt=d[yt].removeFromSet(nt);if(tt.length==1&&nt.length==0)ht=tt[0],ot="add",mt=yt=>yt.mark(ht.addToSet(yt.marks));else if(tt.length==0&&nt.length==1)ht=nt[0],ot="remove",mt=yt=>yt.mark(ht.removeFromSet(yt.marks));else return null;let gt=[];for(let yt=0;yt<e.childCount;yt++)gt.push(mt(e.child(yt)));if(Fragment.from(gt).eq(s))return{mark:ht,type:ot}}function looksLikeBackspace(s,e,d,b,tt){if(d-e<=tt.pos-b.pos||skipClosingAndOpening(b,!0,!1)<tt.pos)return!1;let nt=s.resolve(e);if(!b.parent.isTextblock){let ht=nt.nodeAfter;return ht!=null&&d==e+ht.nodeSize}if(nt.parentOffset<nt.parent.content.size||!nt.parent.isTextblock)return!1;let ot=s.resolve(skipClosingAndOpening(nt,!0,!0));return!ot.parent.isTextblock||ot.pos>d||skipClosingAndOpening(ot,!0,!1)<d?!1:b.parent.content.cut(b.parentOffset).eq(ot.parent.content)}function skipClosingAndOpening(s,e,d){let b=s.depth,tt=e?s.end():s.pos;for(;b>0&&(e||s.indexAfter(b)==s.node(b).childCount);)b--,tt++,e=!1;if(d){let nt=s.node(b).maybeChild(s.indexAfter(b));for(;nt&&!nt.isLeaf;)nt=nt.firstChild,tt++}return tt}function findDiff(s,e,d,b,tt){let nt=s.findDiffStart(e,d);if(nt==null)return null;let{a:ot,b:ht}=s.findDiffEnd(e,d+s.size,d+e.size);if(tt=="end"){let mt=Math.max(0,nt-Math.min(ot,ht));b-=ot+mt-nt}if(ot<nt&&s.size<e.size){let mt=b<=nt&&b>=ot?nt-b:0;nt-=mt,nt&&nt<e.size&&isSurrogatePair(e.textBetween(nt-1,nt+1))&&(nt+=mt?1:-1),ht=nt+(ht-ot),ot=nt}else if(ht<nt){let mt=b<=nt&&b>=ht?nt-b:0;nt-=mt,nt&&nt<s.size&&isSurrogatePair(s.textBetween(nt-1,nt+1))&&(nt+=mt?1:-1),ot=nt+(ot-ht),ht=nt}return{start:nt,endA:ot,endB:ht}}function isSurrogatePair(s){if(s.length!=2)return!1;let e=s.charCodeAt(0),d=s.charCodeAt(1);return e>=56320&&e<=57343&&d>=55296&&d<=56319}class EditorView{constructor(e,d){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=d,this.state=d.state,this.directPlugins=d.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(b,tt,nt,ot)=>readDOMChange(this,b,tt,nt,ot)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let d in e)this._props[d]=e[d];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let d=this._props;this._props=e,e.plugins&&(e.plugins.forEach(checkStateComponent),this.directPlugins=e.plugins),this.updateStateInner(e.state,d)}setProps(e){let d={};for(let b in this._props)d[b]=this._props[b];d.state=this.state;for(let b in e)d[b]=e[b];this.update(d)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,d){var b;let tt=this.state,nt=!1,ot=!1;e.storedMarks&&this.composing&&(clearComposition(this),ot=!0),this.state=e;let ht=tt.plugins!=e.plugins||this._props.plugins!=d.plugins;if(ht||this._props.plugins!=d.plugins||this._props.nodeViews!=d.nodeViews){let bt=buildNodeViews(this);changedNodeViews(bt,this.nodeViews)&&(this.nodeViews=bt,nt=!0)}(ht||d.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let mt=viewDecorations(this),gt=computeDocDeco(this),yt=tt.plugins!=e.plugins&&!tt.doc.eq(e.doc)?"reset":e.scrollToSelection>tt.scrollToSelection?"to selection":"preserve",ft=nt||!this.docView.matchesNode(e.doc,gt,mt);(ft||!e.selection.eq(tt.selection))&&(ot=!0);let st=yt=="preserve"&&ot&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(ot){this.domObserver.stop();let bt=ft&&(ie$3||chrome)&&!this.composing&&!tt.selection.empty&&!e.selection.empty&&selectionContextChanged(tt.selection,e.selection);if(ft){let vt=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(nt||!this.docView.update(e.doc,gt,mt,this))&&(this.docView.updateOuterDeco(gt),this.docView.destroy(),this.docView=docViewDesc(e.doc,gt,mt,this.dom,this)),vt&&!this.trackWrites&&(bt=!0)}bt||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,bt):(syncNodeSelection(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(tt),!((b=this.dragging)===null||b===void 0)&&b.node&&!tt.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,tt),yt=="reset"?this.dom.scrollTop=0:yt=="to selection"?this.scrollToSelection():st&&resetScrollPos(st)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",d=>d(this)))if(this.state.selection instanceof NodeSelection){let d=this.docView.domAfterPos(this.state.selection.from);d.nodeType==1&&scrollRectIntoView(this,d.getBoundingClientRect(),e)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let d=0;d<this.directPlugins.length;d++){let b=this.directPlugins[d];b.spec.view&&this.pluginViews.push(b.spec.view(this))}for(let d=0;d<this.state.plugins.length;d++){let b=this.state.plugins[d];b.spec.view&&this.pluginViews.push(b.spec.view(this))}}else for(let d=0;d<this.pluginViews.length;d++){let b=this.pluginViews[d];b.update&&b.update(this,e)}}updateDraggedNode(e,d){let b=e.node,tt=-1;if(this.state.doc.nodeAt(b.from)==b.node)tt=b.from;else{let nt=b.from+(this.state.doc.content.size-d.doc.content.size);(nt>0&&this.state.doc.nodeAt(nt))==b.node&&(tt=nt)}this.dragging=new Dragging(e.slice,e.move,tt<0?void 0:NodeSelection.create(this.state.doc,tt))}someProp(e,d){let b=this._props&&this._props[e],tt;if(b!=null&&(tt=d?d(b):b))return tt;for(let ot=0;ot<this.directPlugins.length;ot++){let ht=this.directPlugins[ot].props[e];if(ht!=null&&(tt=d?d(ht):ht))return tt}let nt=this.state.plugins;if(nt)for(let ot=0;ot<nt.length;ot++){let ht=nt[ot].props[e];if(ht!=null&&(tt=d?d(ht):ht))return tt}}hasFocus(){if(ie$3){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let d=this.dom.parentNode;d;d=d.parentNode)if(d.nodeType==9||d.nodeType==11&&d.host)return d.getSelection||(Object.getPrototypeOf(d).getSelection=()=>d.ownerDocument.getSelection()),this._root=d}return e||document}updateRoot(){this._root=null}posAtCoords(e){return posAtCoords(this,e)}coordsAtPos(e,d=1){return coordsAtPos(this,e,d)}domAtPos(e,d=0){return this.docView.domFromPos(e,d)}nodeDOM(e){let d=this.docView.descAt(e);return d?d.nodeDOM:null}posAtDOM(e,d,b=-1){let tt=this.docView.posFromDOM(e,d,b);if(tt==null)throw new RangeError("DOM position not inside the editor");return tt}endOfTextblock(e,d){return endOfTextblock(this,d||this.state,e)}pasteHTML(e,d){return doPaste(this,"",e,!1,d||new ClipboardEvent("paste"))}pasteText(e,d){return doPaste(this,e,null,!0,d||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return dispatchEvent$1(this,e)}dispatch(e){let d=this._props.dispatchTransaction;d?d.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,e)||e}domSelection(){return this.root.getSelection()}}function computeDocDeco(s){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(s.editable),s.someProp("attributes",d=>{if(typeof d=="function"&&(d=d(s.state)),d)for(let b in d)b=="class"?e.class+=" "+d[b]:b=="style"?e.style=(e.style?e.style+";":"")+d[b]:!e[b]&&b!="contenteditable"&&b!="nodeName"&&(e[b]=String(d[b]))}),e.translate||(e.translate="no"),[Decoration.node(0,s.state.doc.content.size,e)]}function updateCursorWrapper(s){if(s.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),s.cursorWrapper={dom:e,deco:Decoration.widget(s.state.selection.head,e,{raw:!0,marks:s.markCursor})}}else s.cursorWrapper=null}function getEditable(s){return!s.someProp("editable",e=>e(s.state)===!1)}function selectionContextChanged(s,e){let d=Math.min(s.$anchor.sharedDepth(s.head),e.$anchor.sharedDepth(e.head));return s.$anchor.start(d)!=e.$anchor.start(d)}function buildNodeViews(s){let e=Object.create(null);function d(b){for(let tt in b)Object.prototype.hasOwnProperty.call(e,tt)||(e[tt]=b[tt])}return s.someProp("nodeViews",d),s.someProp("markViews",d),e}function changedNodeViews(s,e){let d=0,b=0;for(let tt in s){if(s[tt]!=e[tt])return!0;d++}for(let tt in e)b++;return d!=b}function checkStateComponent(s){if(s.spec.state||s.spec.filterTransaction||s.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$2=0;i$2<10;i$2++)base[48+i$2]=base[96+i$2]=String(i$2);for(var i$2=1;i$2<=24;i$2++)base[i$2+111]="F"+i$2;for(var i$2=65;i$2<=90;i$2++)base[i$2]=String.fromCharCode(i$2+32),shift[i$2]=String.fromCharCode(i$2);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(s){var e=mac$1&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||ie$2&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",d=!e&&s.key||(s.shiftKey?shift:base)[s.keyCode]||s.key||"Unidentified";return d=="Esc"&&(d="Escape"),d=="Del"&&(d="Delete"),d=="Left"&&(d="ArrowLeft"),d=="Up"&&(d="ArrowUp"),d=="Right"&&(d="ArrowRight"),d=="Down"&&(d="ArrowDown"),d}const mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName$1(s){let e=s.split(/-(?!$)/),d=e[e.length-1];d=="Space"&&(d=" ");let b,tt,nt,ot;for(let ht=0;ht<e.length-1;ht++){let mt=e[ht];if(/^(cmd|meta|m)$/i.test(mt))ot=!0;else if(/^a(lt)?$/i.test(mt))b=!0;else if(/^(c|ctrl|control)$/i.test(mt))tt=!0;else if(/^s(hift)?$/i.test(mt))nt=!0;else if(/^mod$/i.test(mt))mac?ot=!0:tt=!0;else throw new Error("Unrecognized modifier name: "+mt)}return b&&(d="Alt-"+d),tt&&(d="Ctrl-"+d),ot&&(d="Meta-"+d),nt&&(d="Shift-"+d),d}function normalize$1(s){let e=Object.create(null);for(let d in s)e[normalizeKeyName$1(d)]=s[d];return e}function modifiers(s,e,d=!0){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),d&&e.shiftKey&&(s="Shift-"+s),s}function keymap(s){return new Plugin({props:{handleKeyDown:keydownHandler(s)}})}function keydownHandler(s){let e=normalize$1(s);return function(d,b){let tt=keyName(b),nt,ot=e[modifiers(tt,b)];if(ot&&ot(d.state,d.dispatch,d))return!0;if(tt.length==1&&tt!=" "){if(b.shiftKey){let ht=e[modifiers(tt,b,!1)];if(ht&&ht(d.state,d.dispatch,d))return!0}if((b.shiftKey||b.altKey||b.metaKey||tt.charCodeAt(0)>127)&&(nt=base[b.keyCode])&&nt!=tt){let ht=e[modifiers(nt,b)];if(ht&&ht(d.state,d.dispatch,d))return!0}}return!1}}const deleteSelection$1=(s,e)=>s.selection.empty?!1:(e&&e(s.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(s,e){let{$cursor:d}=s.selection;return!d||(e?!e.endOfTextblock("backward",s):d.parentOffset>0)?null:d}const joinBackward$1=(s,e,d)=>{let b=atBlockStart(s,d);if(!b)return!1;let tt=findCutBefore(b);if(!tt){let ot=b.blockRange(),ht=ot&&liftTarget(ot);return ht==null?!1:(e&&e(s.tr.lift(ot,ht).scrollIntoView()),!0)}let nt=tt.nodeBefore;if(!nt.type.spec.isolating&&deleteBarrier(s,tt,e))return!0;if(b.parent.content.size==0&&(textblockAt(nt,"end")||NodeSelection.isSelectable(nt))){let ot=replaceStep(s.doc,b.before(),b.after(),Slice.empty);if(ot&&ot.slice.size<ot.to-ot.from){if(e){let ht=s.tr.step(ot);ht.setSelection(textblockAt(nt,"end")?Selection$2.findFrom(ht.doc.resolve(ht.mapping.map(tt.pos,-1)),-1):NodeSelection.create(ht.doc,tt.pos-nt.nodeSize)),e(ht.scrollIntoView())}return!0}}return nt.isAtom&&tt.depth==b.depth-1?(e&&e(s.tr.delete(tt.pos-nt.nodeSize,tt.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(s,e,d)=>{let b=atBlockStart(s,d);if(!b)return!1;let tt=findCutBefore(b);return tt?joinTextblocksAround(s,tt,e):!1},joinTextblockForward$1=(s,e,d)=>{let b=atBlockEnd(s,d);if(!b)return!1;let tt=findCutAfter(b);return tt?joinTextblocksAround(s,tt,e):!1};function joinTextblocksAround(s,e,d){let b=e.nodeBefore,tt=b,nt=e.pos-1;for(;!tt.isTextblock;nt--){if(tt.type.spec.isolating)return!1;let yt=tt.lastChild;if(!yt)return!1;tt=yt}let ot=e.nodeAfter,ht=ot,mt=e.pos+1;for(;!ht.isTextblock;mt++){if(ht.type.spec.isolating)return!1;let yt=ht.firstChild;if(!yt)return!1;ht=yt}let gt=replaceStep(s.doc,nt,mt,Slice.empty);if(!gt||gt.from!=nt||gt instanceof ReplaceStep&&gt.slice.size>=mt-nt)return!1;if(d){let yt=s.tr.step(gt);yt.setSelection(TextSelection.create(yt.doc,nt)),d(yt.scrollIntoView())}return!0}function textblockAt(s,e,d=!1){for(let b=s;b;b=e=="start"?b.firstChild:b.lastChild){if(b.isTextblock)return!0;if(d&&b.childCount!=1)return!1}return!1}const selectNodeBackward$1=(s,e,d)=>{let{$head:b,empty:tt}=s.selection,nt=b;if(!tt)return!1;if(b.parent.isTextblock){if(d?!d.endOfTextblock("backward",s):b.parentOffset>0)return!1;nt=findCutBefore(b)}let ot=nt&&nt.nodeBefore;return!ot||!NodeSelection.isSelectable(ot)?!1:(e&&e(s.tr.setSelection(NodeSelection.create(s.doc,nt.pos-ot.nodeSize)).scrollIntoView()),!0)};function findCutBefore(s){if(!s.parent.type.spec.isolating)for(let e=s.depth-1;e>=0;e--){if(s.index(e)>0)return s.doc.resolve(s.before(e+1));if(s.node(e).type.spec.isolating)break}return null}function atBlockEnd(s,e){let{$cursor:d}=s.selection;return!d||(e?!e.endOfTextblock("forward",s):d.parentOffset<d.parent.content.size)?null:d}const joinForward$1=(s,e,d)=>{let b=atBlockEnd(s,d);if(!b)return!1;let tt=findCutAfter(b);if(!tt)return!1;let nt=tt.nodeAfter;if(deleteBarrier(s,tt,e))return!0;if(b.parent.content.size==0&&(textblockAt(nt,"start")||NodeSelection.isSelectable(nt))){let ot=replaceStep(s.doc,b.before(),b.after(),Slice.empty);if(ot&&ot.slice.size<ot.to-ot.from){if(e){let ht=s.tr.step(ot);ht.setSelection(textblockAt(nt,"start")?Selection$2.findFrom(ht.doc.resolve(ht.mapping.map(tt.pos)),1):NodeSelection.create(ht.doc,ht.mapping.map(tt.pos))),e(ht.scrollIntoView())}return!0}}return nt.isAtom&&tt.depth==b.depth-1?(e&&e(s.tr.delete(tt.pos,tt.pos+nt.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(s,e,d)=>{let{$head:b,empty:tt}=s.selection,nt=b;if(!tt)return!1;if(b.parent.isTextblock){if(d?!d.endOfTextblock("forward",s):b.parentOffset<b.parent.content.size)return!1;nt=findCutAfter(b)}let ot=nt&&nt.nodeAfter;return!ot||!NodeSelection.isSelectable(ot)?!1:(e&&e(s.tr.setSelection(NodeSelection.create(s.doc,nt.pos)).scrollIntoView()),!0)};function findCutAfter(s){if(!s.parent.type.spec.isolating)for(let e=s.depth-1;e>=0;e--){let d=s.node(e);if(s.index(e)+1<d.childCount)return s.doc.resolve(s.after(e+1));if(d.type.spec.isolating)break}return null}const joinUp$1=(s,e)=>{let d=s.selection,b=d instanceof NodeSelection,tt;if(b){if(d.node.isTextblock||!canJoin(s.doc,d.from))return!1;tt=d.from}else if(tt=joinPoint(s.doc,d.from,-1),tt==null)return!1;if(e){let nt=s.tr.join(tt);b&&nt.setSelection(NodeSelection.create(nt.doc,tt-s.doc.resolve(tt).nodeBefore.nodeSize)),e(nt.scrollIntoView())}return!0},joinDown$1=(s,e)=>{let d=s.selection,b;if(d instanceof NodeSelection){if(d.node.isTextblock||!canJoin(s.doc,d.to))return!1;b=d.to}else if(b=joinPoint(s.doc,d.to,1),b==null)return!1;return e&&e(s.tr.join(b).scrollIntoView()),!0},lift$2=(s,e)=>{let{$from:d,$to:b}=s.selection,tt=d.blockRange(b),nt=tt&&liftTarget(tt);return nt==null?!1:(e&&e(s.tr.lift(tt,nt).scrollIntoView()),!0)},newlineInCode$1=(s,e)=>{let{$head:d,$anchor:b}=s.selection;return!d.parent.type.spec.code||!d.sameParent(b)?!1:(e&&e(s.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(s){for(let e=0;e<s.edgeCount;e++){let{type:d}=s.edge(e);if(d.isTextblock&&!d.hasRequiredAttrs())return d}return null}const exitCode$1=(s,e)=>{let{$head:d,$anchor:b}=s.selection;if(!d.parent.type.spec.code||!d.sameParent(b))return!1;let tt=d.node(-1),nt=d.indexAfter(-1),ot=defaultBlockAt$1(tt.contentMatchAt(nt));if(!ot||!tt.canReplaceWith(nt,nt,ot))return!1;if(e){let ht=d.after(),mt=s.tr.replaceWith(ht,ht,ot.createAndFill());mt.setSelection(Selection$2.near(mt.doc.resolve(ht),1)),e(mt.scrollIntoView())}return!0},createParagraphNear$1=(s,e)=>{let d=s.selection,{$from:b,$to:tt}=d;if(d instanceof AllSelection||b.parent.inlineContent||tt.parent.inlineContent)return!1;let nt=defaultBlockAt$1(tt.parent.contentMatchAt(tt.indexAfter()));if(!nt||!nt.isTextblock)return!1;if(e){let ot=(!b.parentOffset&&tt.index()<tt.parent.childCount?b:tt).pos,ht=s.tr.insert(ot,nt.createAndFill());ht.setSelection(TextSelection.create(ht.doc,ot+1)),e(ht.scrollIntoView())}return!0},liftEmptyBlock$1=(s,e)=>{let{$cursor:d}=s.selection;if(!d||d.parent.content.size)return!1;if(d.depth>1&&d.after()!=d.end(-1)){let nt=d.before();if(canSplit(s.doc,nt))return e&&e(s.tr.split(nt).scrollIntoView()),!0}let b=d.blockRange(),tt=b&&liftTarget(b);return tt==null?!1:(e&&e(s.tr.lift(b,tt).scrollIntoView()),!0)},selectParentNode$1=(s,e)=>{let{$from:d,to:b}=s.selection,tt,nt=d.sharedDepth(b);return nt==0?!1:(tt=d.before(nt),e&&e(s.tr.setSelection(NodeSelection.create(s.doc,tt))),!0)};function joinMaybeClear(s,e,d){let b=e.nodeBefore,tt=e.nodeAfter,nt=e.index();return!b||!tt||!b.type.compatibleContent(tt.type)?!1:!b.content.size&&e.parent.canReplace(nt-1,nt)?(d&&d(s.tr.delete(e.pos-b.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(nt,nt+1)||!(tt.isTextblock||canJoin(s.doc,e.pos))?!1:(d&&d(s.tr.clearIncompatible(e.pos,b.type,b.contentMatchAt(b.childCount)).join(e.pos).scrollIntoView()),!0)}function deleteBarrier(s,e,d){let b=e.nodeBefore,tt=e.nodeAfter,nt,ot;if(b.type.spec.isolating||tt.type.spec.isolating)return!1;if(joinMaybeClear(s,e,d))return!0;let ht=e.parent.canReplace(e.index(),e.index()+1);if(ht&&(nt=(ot=b.contentMatchAt(b.childCount)).findWrapping(tt.type))&&ot.matchType(nt[0]||tt.type).validEnd){if(d){let ft=e.pos+tt.nodeSize,st=Fragment.empty;for(let xt=nt.length-1;xt>=0;xt--)st=Fragment.from(nt[xt].create(null,st));st=Fragment.from(b.copy(st));let bt=s.tr.step(new ReplaceAroundStep(e.pos-1,ft,e.pos,ft,new Slice(st,1,0),nt.length,!0)),vt=ft+2*nt.length;canJoin(bt.doc,vt)&&bt.join(vt),d(bt.scrollIntoView())}return!0}let mt=Selection$2.findFrom(e,1),gt=mt&&mt.$from.blockRange(mt.$to),yt=gt&&liftTarget(gt);if(yt!=null&&yt>=e.depth)return d&&d(s.tr.lift(gt,yt).scrollIntoView()),!0;if(ht&&textblockAt(tt,"start",!0)&&textblockAt(b,"end")){let ft=b,st=[];for(;st.push(ft),!ft.isTextblock;)ft=ft.lastChild;let bt=tt,vt=1;for(;!bt.isTextblock;bt=bt.firstChild)vt++;if(ft.canReplace(ft.childCount,ft.childCount,bt.content)){if(d){let xt=Fragment.empty;for(let St=st.length-1;St>=0;St--)xt=Fragment.from(st[St].copy(xt));let wt=s.tr.step(new ReplaceAroundStep(e.pos-st.length,e.pos+tt.nodeSize,e.pos+vt,e.pos+tt.nodeSize-vt,new Slice(xt,st.length,0),0,!0));d(wt.scrollIntoView())}return!0}}return!1}function selectTextblockSide(s){return function(e,d){let b=e.selection,tt=s<0?b.$from:b.$to,nt=tt.depth;for(;tt.node(nt).isInline;){if(!nt)return!1;nt--}return tt.node(nt).isTextblock?(d&&d(e.tr.setSelection(TextSelection.create(e.doc,s<0?tt.start(nt):tt.end(nt)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(s,e=null){return function(d,b){let{$from:tt,$to:nt}=d.selection,ot=tt.blockRange(nt),ht=ot&&findWrapping(ot,s,e);return ht?(b&&b(d.tr.wrap(ot,ht).scrollIntoView()),!0):!1}}function setBlockType(s,e=null){return function(d,b){let tt=!1;for(let nt=0;nt<d.selection.ranges.length&&!tt;nt++){let{$from:{pos:ot},$to:{pos:ht}}=d.selection.ranges[nt];d.doc.nodesBetween(ot,ht,(mt,gt)=>{if(tt)return!1;if(!(!mt.isTextblock||mt.hasMarkup(s,e)))if(mt.type==s)tt=!0;else{let yt=d.doc.resolve(gt),ft=yt.index();tt=yt.parent.canReplaceWith(ft,ft+1,s)}})}if(!tt)return!1;if(b){let nt=d.tr;for(let ot=0;ot<d.selection.ranges.length;ot++){let{$from:{pos:ht},$to:{pos:mt}}=d.selection.ranges[ot];nt.setBlockType(ht,mt,s,e)}b(nt.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(s,e=null){return function(d,b){let{$from:tt,$to:nt}=d.selection,ot=tt.blockRange(nt),ht=!1,mt=ot;if(!ot)return!1;if(ot.depth>=2&&tt.node(ot.depth-1).type.compatibleContent(s)&&ot.startIndex==0){if(tt.index(ot.depth-1)==0)return!1;let yt=d.doc.resolve(ot.start-2);mt=new NodeRange(yt,yt,ot.depth),ot.endIndex<ot.parent.childCount&&(ot=new NodeRange(tt,d.doc.resolve(nt.end(ot.depth)),ot.depth)),ht=!0}let gt=findWrapping(mt,s,e,ot);return gt?(b&&b(doWrapInList(d.tr,ot,gt,ht,s).scrollIntoView()),!0):!1}}function doWrapInList(s,e,d,b,tt){let nt=Fragment.empty;for(let yt=d.length-1;yt>=0;yt--)nt=Fragment.from(d[yt].type.create(d[yt].attrs,nt));s.step(new ReplaceAroundStep(e.start-(b?2:0),e.end,e.start,e.end,new Slice(nt,0,0),d.length,!0));let ot=0;for(let yt=0;yt<d.length;yt++)d[yt].type==tt&&(ot=yt+1);let ht=d.length-ot,mt=e.start+d.length-(b?2:0),gt=e.parent;for(let yt=e.startIndex,ft=e.endIndex,st=!0;yt<ft;yt++,st=!1)!st&&canSplit(s.doc,mt,ht)&&(s.split(mt,ht),mt+=2*ht),mt+=gt.child(yt).nodeSize;return s}function liftListItem$1(s){return function(e,d){let{$from:b,$to:tt}=e.selection,nt=b.blockRange(tt,ot=>ot.childCount>0&&ot.firstChild.type==s);return nt?d?b.node(nt.depth-1).type==s?liftToOuterList(e,d,s,nt):liftOutOfList(e,d,nt):!0:!1}}function liftToOuterList(s,e,d,b){let tt=s.tr,nt=b.end,ot=b.$to.end(b.depth);nt<ot&&(tt.step(new ReplaceAroundStep(nt-1,ot,nt,ot,new Slice(Fragment.from(d.create(null,b.parent.copy())),1,0),1,!0)),b=new NodeRange(tt.doc.resolve(b.$from.pos),tt.doc.resolve(ot),b.depth));const ht=liftTarget(b);if(ht==null)return!1;tt.lift(b,ht);let mt=tt.mapping.map(nt,-1)-1;return canJoin(tt.doc,mt)&&tt.join(mt),e(tt.scrollIntoView()),!0}function liftOutOfList(s,e,d){let b=s.tr,tt=d.parent;for(let bt=d.end,vt=d.endIndex-1,xt=d.startIndex;vt>xt;vt--)bt-=tt.child(vt).nodeSize,b.delete(bt-1,bt+1);let nt=b.doc.resolve(d.start),ot=nt.nodeAfter;if(b.mapping.map(d.end)!=d.start+nt.nodeAfter.nodeSize)return!1;let ht=d.startIndex==0,mt=d.endIndex==tt.childCount,gt=nt.node(-1),yt=nt.index(-1);if(!gt.canReplace(yt+(ht?0:1),yt+1,ot.content.append(mt?Fragment.empty:Fragment.from(tt))))return!1;let ft=nt.pos,st=ft+ot.nodeSize;return b.step(new ReplaceAroundStep(ft-(ht?1:0),st+(mt?1:0),ft+1,st-1,new Slice((ht?Fragment.empty:Fragment.from(tt.copy(Fragment.empty))).append(mt?Fragment.empty:Fragment.from(tt.copy(Fragment.empty))),ht?0:1,mt?0:1),ht?0:1)),e(b.scrollIntoView()),!0}function sinkListItem$1(s){return function(e,d){let{$from:b,$to:tt}=e.selection,nt=b.blockRange(tt,gt=>gt.childCount>0&&gt.firstChild.type==s);if(!nt)return!1;let ot=nt.startIndex;if(ot==0)return!1;let ht=nt.parent,mt=ht.child(ot-1);if(mt.type!=s)return!1;if(d){let gt=mt.lastChild&&mt.lastChild.type==ht.type,yt=Fragment.from(gt?s.create():null),ft=new Slice(Fragment.from(s.create(null,Fragment.from(ht.type.create(null,yt)))),gt?3:1,0),st=nt.start,bt=nt.end;d(e.tr.step(new ReplaceAroundStep(st-(gt?3:1),bt,st,bt,ft,1,!0)).scrollIntoView())}return!0}}function createChainableState(s){const{state:e,transaction:d}=s;let{selection:b}=d,{doc:tt}=d,{storedMarks:nt}=d;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return nt},get selection(){return b},get doc(){return tt},get tr(){return b=d.selection,tt=d.doc,nt=d.storedMarks,d}}}class CommandManager{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:d,state:b}=this,{view:tt}=d,{tr:nt}=b,ot=this.buildProps(nt);return Object.fromEntries(Object.entries(e).map(([ht,mt])=>[ht,(...yt)=>{const ft=mt(...yt)(ot);return!nt.getMeta("preventDispatch")&&!this.hasCustomState&&tt.dispatch(nt),ft}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,d=!0){const{rawCommands:b,editor:tt,state:nt}=this,{view:ot}=tt,ht=[],mt=!!e,gt=e||nt.tr,yt=()=>(!mt&&d&&!gt.getMeta("preventDispatch")&&!this.hasCustomState&&ot.dispatch(gt),ht.every(st=>st===!0)),ft={...Object.fromEntries(Object.entries(b).map(([st,bt])=>[st,(...xt)=>{const wt=this.buildProps(gt,d),St=bt(...xt)(wt);return ht.push(St),ft}])),run:yt};return ft}createCan(e){const{rawCommands:d,state:b}=this,tt=!1,nt=e||b.tr,ot=this.buildProps(nt,tt);return{...Object.fromEntries(Object.entries(d).map(([mt,gt])=>[mt,(...yt)=>gt(...yt)({...ot,dispatch:void 0})])),chain:()=>this.createChain(nt,tt)}}buildProps(e,d=!0){const{rawCommands:b,editor:tt,state:nt}=this,{view:ot}=tt,ht={tr:e,editor:tt,view:ot,state:createChainableState({state:nt,transaction:e}),dispatch:d?()=>{}:void 0,chain:()=>this.createChain(e,d),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(b).map(([mt,gt])=>[mt,(...yt)=>gt(...yt)(ht)]))}};return ht}}class EventEmitter{constructor(){this.callbacks={}}on(e,d){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(d),this}emit(e,...d){const b=this.callbacks[e];return b&&b.forEach(tt=>tt.apply(this,d)),this}off(e,d){const b=this.callbacks[e];return b&&(d?this.callbacks[e]=b.filter(tt=>tt!==d):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function getExtensionField(s,e,d){return s.config[e]===void 0&&s.parent?getExtensionField(s.parent,e,d):typeof s.config[e]=="function"?s.config[e].bind({...d,parent:s.parent?getExtensionField(s.parent,e,d):null}):s.config[e]}function splitExtensions(s){const e=s.filter(tt=>tt.type==="extension"),d=s.filter(tt=>tt.type==="node"),b=s.filter(tt=>tt.type==="mark");return{baseExtensions:e,nodeExtensions:d,markExtensions:b}}function getAttributesFromExtensions(s){const e=[],{nodeExtensions:d,markExtensions:b}=splitExtensions(s),tt=[...d,...b],nt={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return s.forEach(ot=>{const ht={name:ot.name,options:ot.options,storage:ot.storage,extensions:tt},mt=getExtensionField(ot,"addGlobalAttributes",ht);if(!mt)return;mt().forEach(yt=>{yt.types.forEach(ft=>{Object.entries(yt.attributes).forEach(([st,bt])=>{e.push({type:ft,name:st,attribute:{...nt,...bt}})})})})}),tt.forEach(ot=>{const ht={name:ot.name,options:ot.options,storage:ot.storage},mt=getExtensionField(ot,"addAttributes",ht);if(!mt)return;const gt=mt();Object.entries(gt).forEach(([yt,ft])=>{const st={...nt,...ft};typeof(st==null?void 0:st.default)=="function"&&(st.default=st.default()),st!=null&&st.isRequired&&(st==null?void 0:st.default)===void 0&&delete st.default,e.push({type:ot.name,name:yt,attribute:st})})}),e}function getNodeType(s,e){if(typeof s=="string"){if(!e.nodes[s])throw Error(`There is no node type named '${s}'. Maybe you forgot to add the extension?`);return e.nodes[s]}return s}function mergeAttributes(...s){return s.filter(e=>!!e).reduce((e,d)=>{const b={...e};return Object.entries(d).forEach(([tt,nt])=>{if(!b[tt]){b[tt]=nt;return}if(tt==="class"){const ht=nt?nt.split(" "):[],mt=b[tt]?b[tt].split(" "):[],gt=ht.filter(yt=>!mt.includes(yt));b[tt]=[...mt,...gt].join(" ")}else tt==="style"?b[tt]=[b[tt],nt].join("; "):b[tt]=nt}),b},{})}function getRenderedAttributes(s,e){return e.filter(d=>d.attribute.rendered).map(d=>d.attribute.renderHTML?d.attribute.renderHTML(s.attrs)||{}:{[d.name]:s.attrs[d.name]}).reduce((d,b)=>mergeAttributes(d,b),{})}function isFunction$3(s){return typeof s=="function"}function callOrReturn(s,e=void 0,...d){return isFunction$3(s)?e?s.bind(e)(...d):s(...d):s}function isEmptyObject(s={}){return Object.keys(s).length===0&&s.constructor===Object}function fromString(s){return typeof s!="string"?s:s.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(s):s==="true"?!0:s==="false"?!1:s}function injectExtensionAttributesToParseRule(s,e){return"style"in s?s:{...s,getAttrs:d=>{const b=s.getAttrs?s.getAttrs(d):s.attrs;if(b===!1)return!1;const tt=e.reduce((nt,ot)=>{const ht=ot.attribute.parseHTML?ot.attribute.parseHTML(d):fromString(d.getAttribute(ot.name));return ht==null?nt:{...nt,[ot.name]:ht}},{});return{...b,...tt}}}}function cleanUpSchemaItem(s){return Object.fromEntries(Object.entries(s).filter(([e,d])=>e==="attrs"&&isEmptyObject(d)?!1:d!=null))}function getSchemaByResolvedExtensions(s,e){var d;const b=getAttributesFromExtensions(s),{nodeExtensions:tt,markExtensions:nt}=splitExtensions(s),ot=(d=tt.find(gt=>getExtensionField(gt,"topNode")))===null||d===void 0?void 0:d.name,ht=Object.fromEntries(tt.map(gt=>{const yt=b.filter(St=>St.type===gt.name),ft={name:gt.name,options:gt.options,storage:gt.storage,editor:e},st=s.reduce((St,_t)=>{const Tt=getExtensionField(_t,"extendNodeSchema",ft);return{...St,...Tt?Tt(gt):{}}},{}),bt=cleanUpSchemaItem({...st,content:callOrReturn(getExtensionField(gt,"content",ft)),marks:callOrReturn(getExtensionField(gt,"marks",ft)),group:callOrReturn(getExtensionField(gt,"group",ft)),inline:callOrReturn(getExtensionField(gt,"inline",ft)),atom:callOrReturn(getExtensionField(gt,"atom",ft)),selectable:callOrReturn(getExtensionField(gt,"selectable",ft)),draggable:callOrReturn(getExtensionField(gt,"draggable",ft)),code:callOrReturn(getExtensionField(gt,"code",ft)),whitespace:callOrReturn(getExtensionField(gt,"whitespace",ft)),defining:callOrReturn(getExtensionField(gt,"defining",ft)),isolating:callOrReturn(getExtensionField(gt,"isolating",ft)),attrs:Object.fromEntries(yt.map(St=>{var _t;return[St.name,{default:(_t=St==null?void 0:St.attribute)===null||_t===void 0?void 0:_t.default}]}))}),vt=callOrReturn(getExtensionField(gt,"parseHTML",ft));vt&&(bt.parseDOM=vt.map(St=>injectExtensionAttributesToParseRule(St,yt)));const xt=getExtensionField(gt,"renderHTML",ft);xt&&(bt.toDOM=St=>xt({node:St,HTMLAttributes:getRenderedAttributes(St,yt)}));const wt=getExtensionField(gt,"renderText",ft);return wt&&(bt.toText=wt),[gt.name,bt]})),mt=Object.fromEntries(nt.map(gt=>{const yt=b.filter(wt=>wt.type===gt.name),ft={name:gt.name,options:gt.options,storage:gt.storage,editor:e},st=s.reduce((wt,St)=>{const _t=getExtensionField(St,"extendMarkSchema",ft);return{...wt,..._t?_t(gt):{}}},{}),bt=cleanUpSchemaItem({...st,inclusive:callOrReturn(getExtensionField(gt,"inclusive",ft)),excludes:callOrReturn(getExtensionField(gt,"excludes",ft)),group:callOrReturn(getExtensionField(gt,"group",ft)),spanning:callOrReturn(getExtensionField(gt,"spanning",ft)),code:callOrReturn(getExtensionField(gt,"code",ft)),attrs:Object.fromEntries(yt.map(wt=>{var St;return[wt.name,{default:(St=wt==null?void 0:wt.attribute)===null||St===void 0?void 0:St.default}]}))}),vt=callOrReturn(getExtensionField(gt,"parseHTML",ft));vt&&(bt.parseDOM=vt.map(wt=>injectExtensionAttributesToParseRule(wt,yt)));const xt=getExtensionField(gt,"renderHTML",ft);return xt&&(bt.toDOM=wt=>xt({mark:wt,HTMLAttributes:getRenderedAttributes(wt,yt)})),[gt.name,bt]}));return new Schema({topNode:ot,nodes:ht,marks:mt})}function getSchemaTypeByName(s,e){return e.nodes[s]||e.marks[s]||null}function isExtensionRulesEnabled(s,e){return Array.isArray(e)?e.some(d=>(typeof d=="string"?d:d.name)===s.name):e}const getTextContentFromNodes=(s,e=500)=>{let d="";const b=s.parentOffset;return s.parent.nodesBetween(Math.max(0,b-e),b,(tt,nt,ot,ht)=>{var mt,gt;const yt=((gt=(mt=tt.type.spec).toText)===null||gt===void 0?void 0:gt.call(mt,{node:tt,pos:nt,parent:ot,index:ht}))||tt.textContent||"%leaf%";d+=tt.isAtom?yt:yt.slice(0,Math.max(0,b-nt))}),d};function isRegExp(s){return Object.prototype.toString.call(s)==="[object RegExp]"}class InputRule{constructor(e){this.find=e.find,this.handler=e.handler}}const inputRuleMatcherHandler=(s,e)=>{if(isRegExp(e))return e.exec(s);const d=e(s);if(!d)return null;const b=[d.text];return b.index=d.index,b.input=s,b.data=d.data,d.replaceWith&&(d.text.includes(d.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),b.push(d.replaceWith)),b};function run$1(s){var e;const{editor:d,from:b,to:tt,text:nt,rules:ot,plugin:ht}=s,{view:mt}=d;if(mt.composing)return!1;const gt=mt.state.doc.resolve(b);if(gt.parent.type.spec.code||!((e=gt.nodeBefore||gt.nodeAfter)===null||e===void 0)&&e.marks.find(st=>st.type.spec.code))return!1;let yt=!1;const ft=getTextContentFromNodes(gt)+nt;return ot.forEach(st=>{if(yt)return;const bt=inputRuleMatcherHandler(ft,st.find);if(!bt)return;const vt=mt.state.tr,xt=createChainableState({state:mt.state,transaction:vt}),wt={from:b-(bt[0].length-nt.length),to:tt},{commands:St,chain:_t,can:Tt}=new CommandManager({editor:d,state:xt});st.handler({state:xt,range:wt,match:bt,commands:St,chain:_t,can:Tt})===null||!vt.steps.length||(vt.setMeta(ht,{transform:vt,from:b,to:tt,text:nt}),mt.dispatch(vt),yt=!0)}),yt}function inputRulesPlugin(s){const{editor:e,rules:d}=s,b=new Plugin({state:{init(){return null},apply(tt,nt){const ot=tt.getMeta(b);if(ot)return ot;const ht=tt.getMeta("applyInputRules");return!!ht&&setTimeout(()=>{const{from:gt,text:yt}=ht,ft=gt+yt.length;run$1({editor:e,from:gt,to:ft,text:yt,rules:d,plugin:b})}),tt.selectionSet||tt.docChanged?null:nt}},props:{handleTextInput(tt,nt,ot,ht){return run$1({editor:e,from:nt,to:ot,text:ht,rules:d,plugin:b})},handleDOMEvents:{compositionend:tt=>(setTimeout(()=>{const{$cursor:nt}=tt.state.selection;nt&&run$1({editor:e,from:nt.pos,to:nt.pos,text:"",rules:d,plugin:b})}),!1)},handleKeyDown(tt,nt){if(nt.key!=="Enter")return!1;const{$cursor:ot}=tt.state.selection;return ot?run$1({editor:e,from:ot.pos,to:ot.pos,text:`
`,rules:d,plugin:b}):!1}},isInputRules:!0});return b}function isNumber$1(s){return typeof s=="number"}class PasteRule{constructor(e){this.find=e.find,this.handler=e.handler}}const pasteRuleMatcherHandler=(s,e,d)=>{if(isRegExp(e))return[...s.matchAll(e)];const b=e(s,d);return b?b.map(tt=>{const nt=[tt.text];return nt.index=tt.index,nt.input=s,nt.data=tt.data,tt.replaceWith&&(tt.text.includes(tt.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),nt.push(tt.replaceWith)),nt}):[]};function run(s){const{editor:e,state:d,from:b,to:tt,rule:nt,pasteEvent:ot,dropEvent:ht}=s,{commands:mt,chain:gt,can:yt}=new CommandManager({editor:e,state:d}),ft=[];return d.doc.nodesBetween(b,tt,(bt,vt)=>{if(!bt.isTextblock||bt.type.spec.code)return;const xt=Math.max(b,vt),wt=Math.min(tt,vt+bt.content.size),St=bt.textBetween(xt-vt,wt-vt,void 0,"");pasteRuleMatcherHandler(St,nt.find,ot).forEach(Tt=>{if(Tt.index===void 0)return;const Et=xt+Tt.index+1,kt=Et+Tt[0].length,Mt={from:d.tr.mapping.map(Et),to:d.tr.mapping.map(kt)},Ot=nt.handler({state:d,range:Mt,match:Tt,commands:mt,chain:gt,can:yt,pasteEvent:ot,dropEvent:ht});ft.push(Ot)})}),ft.every(bt=>bt!==null)}const createClipboardPasteEvent=s=>{var e;const d=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=d.clipboardData)===null||e===void 0||e.setData("text/html",s),d};function pasteRulesPlugin(s){const{editor:e,rules:d}=s;let b=null,tt=!1,nt=!1,ot=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,ht=typeof DragEvent<"u"?new DragEvent("drop"):null;const mt=({state:yt,from:ft,to:st,rule:bt,pasteEvt:vt})=>{const xt=yt.tr,wt=createChainableState({state:yt,transaction:xt});if(!(!run({editor:e,state:wt,from:Math.max(ft-1,0),to:st.b-1,rule:bt,pasteEvent:vt,dropEvent:ht})||!xt.steps.length))return ht=typeof DragEvent<"u"?new DragEvent("drop"):null,ot=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,xt};return d.map(yt=>new Plugin({view(ft){const st=bt=>{var vt;b=!((vt=ft.dom.parentElement)===null||vt===void 0)&&vt.contains(bt.target)?ft.dom.parentElement:null};return window.addEventListener("dragstart",st),{destroy(){window.removeEventListener("dragstart",st)}}},props:{handleDOMEvents:{drop:(ft,st)=>(nt=b===ft.dom.parentElement,ht=st,!1),paste:(ft,st)=>{var bt;const vt=(bt=st.clipboardData)===null||bt===void 0?void 0:bt.getData("text/html");return ot=st,tt=!!(vt!=null&&vt.includes("data-pm-slice")),!1}}},appendTransaction:(ft,st,bt)=>{const vt=ft[0],xt=vt.getMeta("uiEvent")==="paste"&&!tt,wt=vt.getMeta("uiEvent")==="drop"&&!nt,St=vt.getMeta("applyPasteRules"),_t=!!St;if(!xt&&!wt&&!_t)return;if(_t){const{from:kt,text:Mt}=St,Ot=kt+Mt.length,Dt=createClipboardPasteEvent(Mt);return mt({rule:yt,state:bt,from:kt,to:{b:Ot},pasteEvt:Dt})}const Tt=st.doc.content.findDiffStart(bt.doc.content),Et=st.doc.content.findDiffEnd(bt.doc.content);if(!(!isNumber$1(Tt)||!Et||Tt===Et.b))return mt({rule:yt,state:bt,from:Tt,to:Et,pasteEvt:ot})}}))}function findDuplicates(s){const e=s.filter((d,b)=>s.indexOf(d)!==b);return[...new Set(e)]}class ExtensionManager{constructor(e,d){this.splittableMarks=[],this.editor=d,this.extensions=ExtensionManager.resolve(e),this.schema=getSchemaByResolvedExtensions(this.extensions,d),this.setupExtensions()}static resolve(e){const d=ExtensionManager.sort(ExtensionManager.flatten(e)),b=findDuplicates(d.map(tt=>tt.name));return b.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${b.map(tt=>`'${tt}'`).join(", ")}]. This can lead to issues.`),d}static flatten(e){return e.map(d=>{const b={name:d.name,options:d.options,storage:d.storage},tt=getExtensionField(d,"addExtensions",b);return tt?[d,...this.flatten(tt())]:d}).flat(10)}static sort(e){return e.sort((b,tt)=>{const nt=getExtensionField(b,"priority")||100,ot=getExtensionField(tt,"priority")||100;return nt>ot?-1:nt<ot?1:0})}get commands(){return this.extensions.reduce((e,d)=>{const b={name:d.name,options:d.options,storage:d.storage,editor:this.editor,type:getSchemaTypeByName(d.name,this.schema)},tt=getExtensionField(d,"addCommands",b);return tt?{...e,...tt()}:e},{})}get plugins(){const{editor:e}=this,d=ExtensionManager.sort([...this.extensions].reverse()),b=[],tt=[],nt=d.map(ot=>{const ht={name:ot.name,options:ot.options,storage:ot.storage,editor:e,type:getSchemaTypeByName(ot.name,this.schema)},mt=[],gt=getExtensionField(ot,"addKeyboardShortcuts",ht);let yt={};if(ot.type==="mark"&&getExtensionField(ot,"exitable",ht)&&(yt.ArrowRight=()=>Mark.handleExit({editor:e,mark:ot})),gt){const xt=Object.fromEntries(Object.entries(gt()).map(([wt,St])=>[wt,()=>St({editor:e})]));yt={...yt,...xt}}const ft=keymap(yt);mt.push(ft);const st=getExtensionField(ot,"addInputRules",ht);isExtensionRulesEnabled(ot,e.options.enableInputRules)&&st&&b.push(...st());const bt=getExtensionField(ot,"addPasteRules",ht);isExtensionRulesEnabled(ot,e.options.enablePasteRules)&&bt&&tt.push(...bt());const vt=getExtensionField(ot,"addProseMirrorPlugins",ht);if(vt){const xt=vt();mt.push(...xt)}return mt}).flat();return[inputRulesPlugin({editor:e,rules:b}),...pasteRulesPlugin({editor:e,rules:tt}),...nt]}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:d}=splitExtensions(this.extensions);return Object.fromEntries(d.filter(b=>!!getExtensionField(b,"addNodeView")).map(b=>{const tt=this.attributes.filter(mt=>mt.type===b.name),nt={name:b.name,options:b.options,storage:b.storage,editor:e,type:getNodeType(b.name,this.schema)},ot=getExtensionField(b,"addNodeView",nt);if(!ot)return[];const ht=(mt,gt,yt,ft)=>{const st=getRenderedAttributes(mt,tt);return ot()({editor:e,node:mt,getPos:yt,decorations:ft,HTMLAttributes:st,extension:b})};return[b.name,ht]}))}setupExtensions(){this.extensions.forEach(e=>{var d;this.editor.extensionStorage[e.name]=e.storage;const b={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:getSchemaTypeByName(e.name,this.schema)};e.type==="mark"&&(!((d=callOrReturn(getExtensionField(e,"keepOnSplit",b)))!==null&&d!==void 0)||d)&&this.splittableMarks.push(e.name);const tt=getExtensionField(e,"onBeforeCreate",b),nt=getExtensionField(e,"onCreate",b),ot=getExtensionField(e,"onUpdate",b),ht=getExtensionField(e,"onSelectionUpdate",b),mt=getExtensionField(e,"onTransaction",b),gt=getExtensionField(e,"onFocus",b),yt=getExtensionField(e,"onBlur",b),ft=getExtensionField(e,"onDestroy",b);tt&&this.editor.on("beforeCreate",tt),nt&&this.editor.on("create",nt),ot&&this.editor.on("update",ot),ht&&this.editor.on("selectionUpdate",ht),mt&&this.editor.on("transaction",mt),gt&&this.editor.on("focus",gt),yt&&this.editor.on("blur",yt),ft&&this.editor.on("destroy",ft)})}}function getType(s){return Object.prototype.toString.call(s).slice(8,-1)}function isPlainObject(s){return getType(s)!=="Object"?!1:s.constructor===Object&&Object.getPrototypeOf(s)===Object.prototype}function mergeDeep(s,e){const d={...s};return isPlainObject(s)&&isPlainObject(e)&&Object.keys(e).forEach(b=>{isPlainObject(e[b])&&isPlainObject(s[b])?d[b]=mergeDeep(s[b],e[b]):d[b]=e[b]}),d}class Extension{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Extension(e)}configure(e={}){const d=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return d.name=this.name,d.parent=this.parent,d}extend(e={}){const d=new Extension({...this.config,...e});return d.parent=this,this.child=d,d.name=e.name?e.name:d.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${d.name}".`),d.options=callOrReturn(getExtensionField(d,"addOptions",{name:d.name})),d.storage=callOrReturn(getExtensionField(d,"addStorage",{name:d.name,options:d.options})),d}}function getTextBetween(s,e,d){const{from:b,to:tt}=e,{blockSeparator:nt=`

`,textSerializers:ot={}}=d||{};let ht="";return s.nodesBetween(b,tt,(mt,gt,yt,ft)=>{var st;mt.isBlock&&gt>b&&(ht+=nt);const bt=ot==null?void 0:ot[mt.type.name];if(bt)return yt&&(ht+=bt({node:mt,pos:gt,parent:yt,index:ft,range:e})),!1;mt.isText&&(ht+=(st=mt==null?void 0:mt.text)===null||st===void 0?void 0:st.slice(Math.max(b,gt)-gt,tt-gt))}),ht}function getTextSerializersFromSchema(s){return Object.fromEntries(Object.entries(s.nodes).filter(([,e])=>e.spec.toText).map(([e,d])=>[e,d.spec.toText]))}const ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:s}=this,{state:e,schema:d}=s,{doc:b,selection:tt}=e,{ranges:nt}=tt,ot=Math.min(...nt.map(yt=>yt.$from.pos)),ht=Math.max(...nt.map(yt=>yt.$to.pos)),mt=getTextSerializersFromSchema(d);return getTextBetween(b,{from:ot,to:ht},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:mt})}}})]}}),blur=()=>({editor:s,view:e})=>(requestAnimationFrame(()=>{var d;s.isDestroyed||(e.dom.blur(),(d=window==null?void 0:window.getSelection())===null||d===void 0||d.removeAllRanges())}),!0),clearContent=(s=!1)=>({commands:e})=>e.setContent("",s),clearNodes=()=>({state:s,tr:e,dispatch:d})=>{const{selection:b}=e,{ranges:tt}=b;return d&&tt.forEach(({$from:nt,$to:ot})=>{s.doc.nodesBetween(nt.pos,ot.pos,(ht,mt)=>{if(ht.type.isText)return;const{doc:gt,mapping:yt}=e,ft=gt.resolve(yt.map(mt)),st=gt.resolve(yt.map(mt+ht.nodeSize)),bt=ft.blockRange(st);if(!bt)return;const vt=liftTarget(bt);if(ht.type.isTextblock){const{defaultType:xt}=ft.parent.contentMatchAt(ft.index());e.setNodeMarkup(bt.start,xt)}(vt||vt===0)&&e.lift(bt,vt)})}),!0},command=s=>e=>s(e),createParagraphNear=()=>({state:s,dispatch:e})=>createParagraphNear$1(s,e),cut=(s,e)=>({editor:d,tr:b})=>{const{state:tt}=d,nt=tt.doc.slice(s.from,s.to);b.deleteRange(s.from,s.to);const ot=b.mapping.map(e);return b.insert(ot,nt.content),b.setSelection(new TextSelection(b.doc.resolve(ot-1))),!0},deleteCurrentNode=()=>({tr:s,dispatch:e})=>{const{selection:d}=s,b=d.$anchor.node();if(b.content.size>0)return!1;const tt=s.selection.$anchor;for(let nt=tt.depth;nt>0;nt-=1)if(tt.node(nt).type===b.type){if(e){const ht=tt.before(nt),mt=tt.after(nt);s.delete(ht,mt).scrollIntoView()}return!0}return!1},deleteNode=s=>({tr:e,state:d,dispatch:b})=>{const tt=getNodeType(s,d.schema),nt=e.selection.$anchor;for(let ot=nt.depth;ot>0;ot-=1)if(nt.node(ot).type===tt){if(b){const mt=nt.before(ot),gt=nt.after(ot);e.delete(mt,gt).scrollIntoView()}return!0}return!1},deleteRange=s=>({tr:e,dispatch:d})=>{const{from:b,to:tt}=s;return d&&e.delete(b,tt),!0},deleteSelection=()=>({state:s,dispatch:e})=>deleteSelection$1(s,e),enter=()=>({commands:s})=>s.keyboardShortcut("Enter"),exitCode=()=>({state:s,dispatch:e})=>exitCode$1(s,e);function objectIncludes(s,e,d={strict:!0}){const b=Object.keys(e);return b.length?b.every(tt=>d.strict?e[tt]===s[tt]:isRegExp(e[tt])?e[tt].test(s[tt]):e[tt]===s[tt]):!0}function findMarkInSet(s,e,d={}){return s.find(b=>b.type===e&&objectIncludes(b.attrs,d))}function isMarkInSet(s,e,d={}){return!!findMarkInSet(s,e,d)}function getMarkRange(s,e,d={}){if(!s||!e)return;let b=s.parent.childAfter(s.parentOffset);if(s.parentOffset===b.offset&&b.offset!==0&&(b=s.parent.childBefore(s.parentOffset)),!b.node)return;const tt=findMarkInSet([...b.node.marks],e,d);if(!tt)return;let nt=b.index,ot=s.start()+b.offset,ht=nt+1,mt=ot+b.node.nodeSize;for(findMarkInSet([...b.node.marks],e,d);nt>0&&tt.isInSet(s.parent.child(nt-1).marks);)nt-=1,ot-=s.parent.child(nt).nodeSize;for(;ht<s.parent.childCount&&isMarkInSet([...s.parent.child(ht).marks],e,d);)mt+=s.parent.child(ht).nodeSize,ht+=1;return{from:ot,to:mt}}function getMarkType(s,e){if(typeof s=="string"){if(!e.marks[s])throw Error(`There is no mark type named '${s}'. Maybe you forgot to add the extension?`);return e.marks[s]}return s}const extendMarkRange=(s,e={})=>({tr:d,state:b,dispatch:tt})=>{const nt=getMarkType(s,b.schema),{doc:ot,selection:ht}=d,{$from:mt,from:gt,to:yt}=ht;if(tt){const ft=getMarkRange(mt,nt,e);if(ft&&ft.from<=gt&&ft.to>=yt){const st=TextSelection.create(ot,ft.from,ft.to);d.setSelection(st)}}return!0},first=s=>e=>{const d=typeof s=="function"?s(e):s;for(let b=0;b<d.length;b+=1)if(d[b](e))return!0;return!1};function isTextSelection(s){return s instanceof TextSelection}function minMax(s=0,e=0,d=0){return Math.min(Math.max(s,e),d)}function resolveFocusPosition(s,e=null){if(!e)return null;const d=Selection$2.atStart(s),b=Selection$2.atEnd(s);if(e==="start"||e===!0)return d;if(e==="end")return b;const tt=d.from,nt=b.to;return e==="all"?TextSelection.create(s,minMax(0,tt,nt),minMax(s.content.size,tt,nt)):TextSelection.create(s,minMax(e,tt,nt),minMax(e,tt,nt))}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const focus=(s=null,e={})=>({editor:d,view:b,tr:tt,dispatch:nt})=>{e={scrollIntoView:!0,...e};const ot=()=>{isiOS()&&b.dom.focus(),requestAnimationFrame(()=>{d.isDestroyed||(b.focus(),e!=null&&e.scrollIntoView&&d.commands.scrollIntoView())})};if(b.hasFocus()&&s===null||s===!1)return!0;if(nt&&s===null&&!isTextSelection(d.state.selection))return ot(),!0;const ht=resolveFocusPosition(tt.doc,s)||d.state.selection,mt=d.state.selection.eq(ht);return nt&&(mt||tt.setSelection(ht),mt&&tt.storedMarks&&tt.setStoredMarks(tt.storedMarks),ot()),!0},forEach=(s,e)=>d=>s.every((b,tt)=>e(b,{...d,index:tt})),insertContent=(s,e)=>({tr:d,commands:b})=>b.insertContentAt({from:d.selection.from,to:d.selection.to},s,e),removeWhitespaces=s=>{const e=s.childNodes;for(let d=e.length-1;d>=0;d-=1){const b=e[d];b.nodeType===3&&b.nodeValue&&/^(\n\s\s|\n)$/.test(b.nodeValue)?s.removeChild(b):b.nodeType===1&&removeWhitespaces(b)}return s};function elementFromString(s){const e=`<body>${s}</body>`,d=new window.DOMParser().parseFromString(e,"text/html").body;return removeWhitespaces(d)}function createNodeFromContent(s,e,d){d={slice:!0,parseOptions:{},...d};const b=typeof s=="object"&&s!==null,tt=typeof s=="string";if(b)try{return Array.isArray(s)&&s.length>0?Fragment.fromArray(s.map(ot=>e.nodeFromJSON(ot))):e.nodeFromJSON(s)}catch(nt){if(d.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:nt});return console.warn("[tiptap warn]: Invalid content.","Passed value:",s,"Error:",nt),createNodeFromContent("",e,d)}if(tt){let nt=e,ot=!1,ht="";d.errorOnInvalidContent&&(nt=new Schema({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:yt=>(ot=!0,ht=typeof yt=="string"?yt:yt.outerHTML,null)}]}})}));const mt=DOMParser$1.fromSchema(nt),gt=d.slice?mt.parseSlice(elementFromString(s),d.parseOptions).content:mt.parse(elementFromString(s),d.parseOptions);if(d.errorOnInvalidContent&&ot)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${ht}`)});return gt}return createNodeFromContent("",e,d)}function selectionToInsertionEnd(s,e,d){const b=s.steps.length-1;if(b<e)return;const tt=s.steps[b];if(!(tt instanceof ReplaceStep||tt instanceof ReplaceAroundStep))return;const nt=s.mapping.maps[b];let ot=0;nt.forEach((ht,mt,gt,yt)=>{ot===0&&(ot=yt)}),s.setSelection(Selection$2.near(s.doc.resolve(ot),d))}const isFragment=s=>!("type"in s),insertContentAt=(s,e,d)=>({tr:b,dispatch:tt,editor:nt})=>{var ot;if(tt){d={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...d};let ht;try{ht=createNodeFromContent(e,nt.schema,{parseOptions:{preserveWhitespace:"full",...d.parseOptions},errorOnInvalidContent:(ot=d.errorOnInvalidContent)!==null&&ot!==void 0?ot:nt.options.enableContentCheck})}catch{return!1}let{from:mt,to:gt}=typeof s=="number"?{from:s,to:s}:{from:s.from,to:s.to},yt=!0,ft=!0;if((isFragment(ht)?ht:[ht]).forEach(vt=>{vt.check(),yt=yt?vt.isText&&vt.marks.length===0:!1,ft=ft?vt.isBlock:!1}),mt===gt&&ft){const{parent:vt}=b.doc.resolve(mt);vt.isTextblock&&!vt.type.spec.code&&!vt.childCount&&(mt-=1,gt+=1)}let bt;yt?(Array.isArray(e)?bt=e.map(vt=>vt.text||"").join(""):typeof e=="object"&&e&&e.text?bt=e.text:bt=e,b.insertText(bt,mt,gt)):(bt=ht,b.replaceWith(mt,gt,bt)),d.updateSelection&&selectionToInsertionEnd(b,b.steps.length-1,-1),d.applyInputRules&&b.setMeta("applyInputRules",{from:mt,text:bt}),d.applyPasteRules&&b.setMeta("applyPasteRules",{from:mt,text:bt})}return!0},joinUp=()=>({state:s,dispatch:e})=>joinUp$1(s,e),joinDown=()=>({state:s,dispatch:e})=>joinDown$1(s,e),joinBackward=()=>({state:s,dispatch:e})=>joinBackward$1(s,e),joinForward=()=>({state:s,dispatch:e})=>joinForward$1(s,e),joinItemBackward=()=>({state:s,dispatch:e,tr:d})=>{try{const b=joinPoint(s.doc,s.selection.$from.pos,-1);return b==null?!1:(d.join(b,2),e&&e(d),!0)}catch{return!1}},joinItemForward=()=>({state:s,dispatch:e,tr:d})=>{try{const b=joinPoint(s.doc,s.selection.$from.pos,1);return b==null?!1:(d.join(b,2),e&&e(d),!0)}catch{return!1}},joinTextblockBackward=()=>({state:s,dispatch:e})=>joinTextblockBackward$1(s,e),joinTextblockForward=()=>({state:s,dispatch:e})=>joinTextblockForward$1(s,e);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(s){const e=s.split(/-(?!$)/);let d=e[e.length-1];d==="Space"&&(d=" ");let b,tt,nt,ot;for(let ht=0;ht<e.length-1;ht+=1){const mt=e[ht];if(/^(cmd|meta|m)$/i.test(mt))ot=!0;else if(/^a(lt)?$/i.test(mt))b=!0;else if(/^(c|ctrl|control)$/i.test(mt))tt=!0;else if(/^s(hift)?$/i.test(mt))nt=!0;else if(/^mod$/i.test(mt))isiOS()||isMacOS()?ot=!0:tt=!0;else throw new Error(`Unrecognized modifier name: ${mt}`)}return b&&(d=`Alt-${d}`),tt&&(d=`Ctrl-${d}`),ot&&(d=`Meta-${d}`),nt&&(d=`Shift-${d}`),d}const keyboardShortcut=s=>({editor:e,view:d,tr:b,dispatch:tt})=>{const nt=normalizeKeyName(s).split(/-(?!$)/),ot=nt.find(gt=>!["Alt","Ctrl","Meta","Shift"].includes(gt)),ht=new KeyboardEvent("keydown",{key:ot==="Space"?" ":ot,altKey:nt.includes("Alt"),ctrlKey:nt.includes("Ctrl"),metaKey:nt.includes("Meta"),shiftKey:nt.includes("Shift"),bubbles:!0,cancelable:!0}),mt=e.captureTransaction(()=>{d.someProp("handleKeyDown",gt=>gt(d,ht))});return mt==null||mt.steps.forEach(gt=>{const yt=gt.map(b.mapping);yt&&tt&&b.maybeStep(yt)}),!0};function isNodeActive(s,e,d={}){const{from:b,to:tt,empty:nt}=s.selection,ot=e?getNodeType(e,s.schema):null,ht=[];s.doc.nodesBetween(b,tt,(ft,st)=>{if(ft.isText)return;const bt=Math.max(b,st),vt=Math.min(tt,st+ft.nodeSize);ht.push({node:ft,from:bt,to:vt})});const mt=tt-b,gt=ht.filter(ft=>ot?ot.name===ft.node.type.name:!0).filter(ft=>objectIncludes(ft.node.attrs,d,{strict:!1}));return nt?!!gt.length:gt.reduce((ft,st)=>ft+st.to-st.from,0)>=mt}const lift$1=(s,e={})=>({state:d,dispatch:b})=>{const tt=getNodeType(s,d.schema);return isNodeActive(d,tt,e)?lift$2(d,b):!1},liftEmptyBlock=()=>({state:s,dispatch:e})=>liftEmptyBlock$1(s,e),liftListItem=s=>({state:e,dispatch:d})=>{const b=getNodeType(s,e.schema);return liftListItem$1(b)(e,d)},newlineInCode=()=>({state:s,dispatch:e})=>newlineInCode$1(s,e);function getSchemaTypeNameByName(s,e){return e.nodes[s]?"node":e.marks[s]?"mark":null}function deleteProps(s,e){const d=typeof e=="string"?[e]:e;return Object.keys(s).reduce((b,tt)=>(d.includes(tt)||(b[tt]=s[tt]),b),{})}const resetAttributes=(s,e)=>({tr:d,state:b,dispatch:tt})=>{let nt=null,ot=null;const ht=getSchemaTypeNameByName(typeof s=="string"?s:s.name,b.schema);return ht?(ht==="node"&&(nt=getNodeType(s,b.schema)),ht==="mark"&&(ot=getMarkType(s,b.schema)),tt&&d.selection.ranges.forEach(mt=>{b.doc.nodesBetween(mt.$from.pos,mt.$to.pos,(gt,yt)=>{nt&&nt===gt.type&&d.setNodeMarkup(yt,void 0,deleteProps(gt.attrs,e)),ot&&gt.marks.length&&gt.marks.forEach(ft=>{ot===ft.type&&d.addMark(yt,yt+gt.nodeSize,ot.create(deleteProps(ft.attrs,e)))})})}),!0):!1},scrollIntoView=()=>({tr:s,dispatch:e})=>(e&&s.scrollIntoView(),!0),selectAll=()=>({tr:s,commands:e})=>e.setTextSelection({from:0,to:s.doc.content.size}),selectNodeBackward=()=>({state:s,dispatch:e})=>selectNodeBackward$1(s,e),selectNodeForward=()=>({state:s,dispatch:e})=>selectNodeForward$1(s,e),selectParentNode=()=>({state:s,dispatch:e})=>selectParentNode$1(s,e),selectTextblockEnd=()=>({state:s,dispatch:e})=>selectTextblockEnd$1(s,e),selectTextblockStart=()=>({state:s,dispatch:e})=>selectTextblockStart$1(s,e);function createDocument(s,e,d={},b={}){return createNodeFromContent(s,e,{slice:!1,parseOptions:d,errorOnInvalidContent:b.errorOnInvalidContent})}const setContent=(s,e=!1,d={},b={})=>({editor:tt,tr:nt,dispatch:ot,commands:ht})=>{var mt,gt;const{doc:yt}=nt;if(d.preserveWhitespace!=="full"){const ft=createDocument(s,tt.schema,d,{errorOnInvalidContent:(mt=b.errorOnInvalidContent)!==null&&mt!==void 0?mt:tt.options.enableContentCheck});return ot&&nt.replaceWith(0,yt.content.size,ft).setMeta("preventUpdate",!e),!0}return ot&&nt.setMeta("preventUpdate",!e),ht.insertContentAt({from:0,to:yt.content.size},s,{parseOptions:d,errorOnInvalidContent:(gt=b.errorOnInvalidContent)!==null&&gt!==void 0?gt:tt.options.enableContentCheck})};function getMarkAttributes(s,e){const d=getMarkType(e,s.schema),{from:b,to:tt,empty:nt}=s.selection,ot=[];nt?(s.storedMarks&&ot.push(...s.storedMarks),ot.push(...s.selection.$head.marks())):s.doc.nodesBetween(b,tt,mt=>{ot.push(...mt.marks)});const ht=ot.find(mt=>mt.type.name===d.name);return ht?{...ht.attrs}:{}}function defaultBlockAt(s){for(let e=0;e<s.edgeCount;e+=1){const{type:d}=s.edge(e);if(d.isTextblock&&!d.hasRequiredAttrs())return d}return null}function findParentNodeClosestToPos(s,e){for(let d=s.depth;d>0;d-=1){const b=s.node(d);if(e(b))return{pos:d>0?s.before(d):0,start:s.start(d),depth:d,node:b}}}function findParentNode(s){return e=>findParentNodeClosestToPos(e.$from,s)}function getHTMLFromFragment(s,e){const d=DOMSerializer.fromSchema(e).serializeFragment(s),tt=document.implementation.createHTMLDocument().createElement("div");return tt.appendChild(d),tt.innerHTML}function getText(s,e){const d={from:0,to:s.content.size};return getTextBetween(s,d,e)}function getNodeAttributes(s,e){const d=getNodeType(e,s.schema),{from:b,to:tt}=s.selection,nt=[];s.doc.nodesBetween(b,tt,ht=>{nt.push(ht)});const ot=nt.reverse().find(ht=>ht.type.name===d.name);return ot?{...ot.attrs}:{}}function getAttributes(s,e){const d=getSchemaTypeNameByName(typeof e=="string"?e:e.name,s.schema);return d==="node"?getNodeAttributes(s,e):d==="mark"?getMarkAttributes(s,e):{}}function getMarksBetween(s,e,d){const b=[];return s===e?d.resolve(s).marks().forEach(tt=>{const nt=d.resolve(s-1),ot=getMarkRange(nt,tt.type);ot&&b.push({mark:tt,...ot})}):d.nodesBetween(s,e,(tt,nt)=>{!tt||(tt==null?void 0:tt.nodeSize)===void 0||b.push(...tt.marks.map(ot=>({from:nt,to:nt+tt.nodeSize,mark:ot})))}),b}function getSplittedAttributes(s,e,d){return Object.fromEntries(Object.entries(d).filter(([b])=>{const tt=s.find(nt=>nt.type===e&&nt.name===b);return tt?tt.attribute.keepOnSplit:!1}))}function isMarkActive(s,e,d={}){const{empty:b,ranges:tt}=s.selection,nt=e?getMarkType(e,s.schema):null;if(b)return!!(s.storedMarks||s.selection.$from.marks()).filter(ft=>nt?nt.name===ft.type.name:!0).find(ft=>objectIncludes(ft.attrs,d,{strict:!1}));let ot=0;const ht=[];if(tt.forEach(({$from:ft,$to:st})=>{const bt=ft.pos,vt=st.pos;s.doc.nodesBetween(bt,vt,(xt,wt)=>{if(!xt.isText&&!xt.marks.length)return;const St=Math.max(bt,wt),_t=Math.min(vt,wt+xt.nodeSize),Tt=_t-St;ot+=Tt,ht.push(...xt.marks.map(Et=>({mark:Et,from:St,to:_t})))})}),ot===0)return!1;const mt=ht.filter(ft=>nt?nt.name===ft.mark.type.name:!0).filter(ft=>objectIncludes(ft.mark.attrs,d,{strict:!1})).reduce((ft,st)=>ft+st.to-st.from,0),gt=ht.filter(ft=>nt?ft.mark.type!==nt&&ft.mark.type.excludes(nt):!0).reduce((ft,st)=>ft+st.to-st.from,0);return(mt>0?mt+gt:mt)>=ot}function isActive(s,e,d={}){if(!e)return isNodeActive(s,null,d)||isMarkActive(s,null,d);const b=getSchemaTypeNameByName(e,s.schema);return b==="node"?isNodeActive(s,e,d):b==="mark"?isMarkActive(s,e,d):!1}function isList(s,e){const{nodeExtensions:d}=splitExtensions(e),b=d.find(ot=>ot.name===s);if(!b)return!1;const tt={name:b.name,options:b.options,storage:b.storage},nt=callOrReturn(getExtensionField(b,"group",tt));return typeof nt!="string"?!1:nt.split(" ").includes("list")}function isNodeEmpty(s){const e=s.type.createAndFill(s.attrs);return e?s.eq(e):!1}function isNodeSelection(s){return s instanceof NodeSelection}function canSetMark(s,e,d){var b;const{selection:tt}=e;let nt=null;if(isTextSelection(tt)&&(nt=tt.$cursor),nt){const ht=(b=s.storedMarks)!==null&&b!==void 0?b:nt.marks();return!!d.isInSet(ht)||!ht.some(mt=>mt.type.excludes(d))}const{ranges:ot}=tt;return ot.some(({$from:ht,$to:mt})=>{let gt=ht.depth===0?s.doc.inlineContent&&s.doc.type.allowsMarkType(d):!1;return s.doc.nodesBetween(ht.pos,mt.pos,(yt,ft,st)=>{if(gt)return!1;if(yt.isInline){const bt=!st||st.type.allowsMarkType(d),vt=!!d.isInSet(yt.marks)||!yt.marks.some(xt=>xt.type.excludes(d));gt=bt&&vt}return!gt}),gt})}const setMark=(s,e={})=>({tr:d,state:b,dispatch:tt})=>{const{selection:nt}=d,{empty:ot,ranges:ht}=nt,mt=getMarkType(s,b.schema);if(tt)if(ot){const gt=getMarkAttributes(b,mt);d.addStoredMark(mt.create({...gt,...e}))}else ht.forEach(gt=>{const yt=gt.$from.pos,ft=gt.$to.pos;b.doc.nodesBetween(yt,ft,(st,bt)=>{const vt=Math.max(bt,yt),xt=Math.min(bt+st.nodeSize,ft);st.marks.find(St=>St.type===mt)?st.marks.forEach(St=>{mt===St.type&&d.addMark(vt,xt,mt.create({...St.attrs,...e}))}):d.addMark(vt,xt,mt.create(e))})});return canSetMark(b,d,mt)},setMeta=(s,e)=>({tr:d})=>(d.setMeta(s,e),!0),setNode=(s,e={})=>({state:d,dispatch:b,chain:tt})=>{const nt=getNodeType(s,d.schema);return nt.isTextblock?tt().command(({commands:ot})=>setBlockType(nt,e)(d)?!0:ot.clearNodes()).command(({state:ot})=>setBlockType(nt,e)(ot,b)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=s=>({tr:e,dispatch:d})=>{if(d){const{doc:b}=e,tt=minMax(s,0,b.content.size),nt=NodeSelection.create(b,tt);e.setSelection(nt)}return!0},setTextSelection=s=>({tr:e,dispatch:d})=>{if(d){const{doc:b}=e,{from:tt,to:nt}=typeof s=="number"?{from:s,to:s}:s,ot=TextSelection.atStart(b).from,ht=TextSelection.atEnd(b).to,mt=minMax(tt,ot,ht),gt=minMax(nt,ot,ht),yt=TextSelection.create(b,mt,gt);e.setSelection(yt)}return!0},sinkListItem=s=>({state:e,dispatch:d})=>{const b=getNodeType(s,e.schema);return sinkListItem$1(b)(e,d)};function ensureMarks(s,e){const d=s.storedMarks||s.selection.$to.parentOffset&&s.selection.$from.marks();if(d){const b=d.filter(tt=>e==null?void 0:e.includes(tt.type.name));s.tr.ensureMarks(b)}}const splitBlock=({keepMarks:s=!0}={})=>({tr:e,state:d,dispatch:b,editor:tt})=>{const{selection:nt,doc:ot}=e,{$from:ht,$to:mt}=nt,gt=tt.extensionManager.attributes,yt=getSplittedAttributes(gt,ht.node().type.name,ht.node().attrs);if(nt instanceof NodeSelection&&nt.node.isBlock)return!ht.parentOffset||!canSplit(ot,ht.pos)?!1:(b&&(s&&ensureMarks(d,tt.extensionManager.splittableMarks),e.split(ht.pos).scrollIntoView()),!0);if(!ht.parent.isBlock)return!1;const ft=mt.parentOffset===mt.parent.content.size,st=ht.depth===0?void 0:defaultBlockAt(ht.node(-1).contentMatchAt(ht.indexAfter(-1)));let bt=ft&&st?[{type:st,attrs:yt}]:void 0,vt=canSplit(e.doc,e.mapping.map(ht.pos),1,bt);if(!bt&&!vt&&canSplit(e.doc,e.mapping.map(ht.pos),1,st?[{type:st}]:void 0)&&(vt=!0,bt=st?[{type:st,attrs:yt}]:void 0),b){if(vt&&(nt instanceof TextSelection&&e.deleteSelection(),e.split(e.mapping.map(ht.pos),1,bt),st&&!ft&&!ht.parentOffset&&ht.parent.type!==st)){const xt=e.mapping.map(ht.before()),wt=e.doc.resolve(xt);ht.node(-1).canReplaceWith(wt.index(),wt.index()+1,st)&&e.setNodeMarkup(e.mapping.map(ht.before()),st)}s&&ensureMarks(d,tt.extensionManager.splittableMarks),e.scrollIntoView()}return vt},splitListItem=s=>({tr:e,state:d,dispatch:b,editor:tt})=>{var nt;const ot=getNodeType(s,d.schema),{$from:ht,$to:mt}=d.selection,gt=d.selection.node;if(gt&&gt.isBlock||ht.depth<2||!ht.sameParent(mt))return!1;const yt=ht.node(-1);if(yt.type!==ot)return!1;const ft=tt.extensionManager.attributes;if(ht.parent.content.size===0&&ht.node(-1).childCount===ht.indexAfter(-1)){if(ht.depth===2||ht.node(-3).type!==ot||ht.index(-2)!==ht.node(-2).childCount-1)return!1;if(b){let wt=Fragment.empty;const St=ht.index(-1)?1:ht.index(-2)?2:3;for(let Ot=ht.depth-St;Ot>=ht.depth-3;Ot-=1)wt=Fragment.from(ht.node(Ot).copy(wt));const _t=ht.indexAfter(-1)<ht.node(-2).childCount?1:ht.indexAfter(-2)<ht.node(-3).childCount?2:3,Tt=getSplittedAttributes(ft,ht.node().type.name,ht.node().attrs),Et=((nt=ot.contentMatch.defaultType)===null||nt===void 0?void 0:nt.createAndFill(Tt))||void 0;wt=wt.append(Fragment.from(ot.createAndFill(null,Et)||void 0));const kt=ht.before(ht.depth-(St-1));e.replace(kt,ht.after(-_t),new Slice(wt,4-St,0));let Mt=-1;e.doc.nodesBetween(kt,e.doc.content.size,(Ot,Dt)=>{if(Mt>-1)return!1;Ot.isTextblock&&Ot.content.size===0&&(Mt=Dt+1)}),Mt>-1&&e.setSelection(TextSelection.near(e.doc.resolve(Mt))),e.scrollIntoView()}return!0}const st=mt.pos===ht.end()?yt.contentMatchAt(0).defaultType:null,bt=getSplittedAttributes(ft,yt.type.name,yt.attrs),vt=getSplittedAttributes(ft,ht.node().type.name,ht.node().attrs);e.delete(ht.pos,mt.pos);const xt=st?[{type:ot,attrs:bt},{type:st,attrs:vt}]:[{type:ot,attrs:bt}];if(!canSplit(e.doc,ht.pos,2))return!1;if(b){const{selection:wt,storedMarks:St}=d,{splittableMarks:_t}=tt.extensionManager,Tt=St||wt.$to.parentOffset&&wt.$from.marks();if(e.split(ht.pos,2,xt).scrollIntoView(),!Tt||!b)return!0;const Et=Tt.filter(kt=>_t.includes(kt.type.name));e.ensureMarks(Et)}return!0},joinListBackwards=(s,e)=>{const d=findParentNode(ot=>ot.type===e)(s.selection);if(!d)return!0;const b=s.doc.resolve(Math.max(0,d.pos-1)).before(d.depth);if(b===void 0)return!0;const tt=s.doc.nodeAt(b);return d.node.type===(tt==null?void 0:tt.type)&&canJoin(s.doc,d.pos)&&s.join(d.pos),!0},joinListForwards=(s,e)=>{const d=findParentNode(ot=>ot.type===e)(s.selection);if(!d)return!0;const b=s.doc.resolve(d.start).after(d.depth);if(b===void 0)return!0;const tt=s.doc.nodeAt(b);return d.node.type===(tt==null?void 0:tt.type)&&canJoin(s.doc,b)&&s.join(b),!0},toggleList=(s,e,d,b={})=>({editor:tt,tr:nt,state:ot,dispatch:ht,chain:mt,commands:gt,can:yt})=>{const{extensions:ft,splittableMarks:st}=tt.extensionManager,bt=getNodeType(s,ot.schema),vt=getNodeType(e,ot.schema),{selection:xt,storedMarks:wt}=ot,{$from:St,$to:_t}=xt,Tt=St.blockRange(_t),Et=wt||xt.$to.parentOffset&&xt.$from.marks();if(!Tt)return!1;const kt=findParentNode(Mt=>isList(Mt.type.name,ft))(xt);if(Tt.depth>=1&&kt&&Tt.depth-kt.depth<=1){if(kt.node.type===bt)return gt.liftListItem(vt);if(isList(kt.node.type.name,ft)&&bt.validContent(kt.node.content)&&ht)return mt().command(()=>(nt.setNodeMarkup(kt.pos,bt),!0)).command(()=>joinListBackwards(nt,bt)).command(()=>joinListForwards(nt,bt)).run()}return!d||!Et||!ht?mt().command(()=>yt().wrapInList(bt,b)?!0:gt.clearNodes()).wrapInList(bt,b).command(()=>joinListBackwards(nt,bt)).command(()=>joinListForwards(nt,bt)).run():mt().command(()=>{const Mt=yt().wrapInList(bt,b),Ot=Et.filter(Dt=>st.includes(Dt.type.name));return nt.ensureMarks(Ot),Mt?!0:gt.clearNodes()}).wrapInList(bt,b).command(()=>joinListBackwards(nt,bt)).command(()=>joinListForwards(nt,bt)).run()},toggleMark=(s,e={},d={})=>({state:b,commands:tt})=>{const{extendEmptyMarkRange:nt=!1}=d,ot=getMarkType(s,b.schema);return isMarkActive(b,ot,e)?tt.unsetMark(ot,{extendEmptyMarkRange:nt}):tt.setMark(ot,e)},toggleNode=(s,e,d={})=>({state:b,commands:tt})=>{const nt=getNodeType(s,b.schema),ot=getNodeType(e,b.schema);return isNodeActive(b,nt,d)?tt.setNode(ot):tt.setNode(nt,d)},toggleWrap=(s,e={})=>({state:d,commands:b})=>{const tt=getNodeType(s,d.schema);return isNodeActive(d,tt,e)?b.lift(tt):b.wrapIn(tt,e)},undoInputRule=()=>({state:s,dispatch:e})=>{const d=s.plugins;for(let b=0;b<d.length;b+=1){const tt=d[b];let nt;if(tt.spec.isInputRules&&(nt=tt.getState(s))){if(e){const ot=s.tr,ht=nt.transform;for(let mt=ht.steps.length-1;mt>=0;mt-=1)ot.step(ht.steps[mt].invert(ht.docs[mt]));if(nt.text){const mt=ot.doc.resolve(nt.from).marks();ot.replaceWith(nt.from,nt.to,s.schema.text(nt.text,mt))}else ot.delete(nt.from,nt.to)}return!0}}return!1},unsetAllMarks=()=>({tr:s,dispatch:e})=>{const{selection:d}=s,{empty:b,ranges:tt}=d;return b||e&&tt.forEach(nt=>{s.removeMark(nt.$from.pos,nt.$to.pos)}),!0},unsetMark=(s,e={})=>({tr:d,state:b,dispatch:tt})=>{var nt;const{extendEmptyMarkRange:ot=!1}=e,{selection:ht}=d,mt=getMarkType(s,b.schema),{$from:gt,empty:yt,ranges:ft}=ht;if(!tt)return!0;if(yt&&ot){let{from:st,to:bt}=ht;const vt=(nt=gt.marks().find(wt=>wt.type===mt))===null||nt===void 0?void 0:nt.attrs,xt=getMarkRange(gt,mt,vt);xt&&(st=xt.from,bt=xt.to),d.removeMark(st,bt,mt)}else ft.forEach(st=>{d.removeMark(st.$from.pos,st.$to.pos,mt)});return d.removeStoredMark(mt),!0},updateAttributes=(s,e={})=>({tr:d,state:b,dispatch:tt})=>{let nt=null,ot=null;const ht=getSchemaTypeNameByName(typeof s=="string"?s:s.name,b.schema);return ht?(ht==="node"&&(nt=getNodeType(s,b.schema)),ht==="mark"&&(ot=getMarkType(s,b.schema)),tt&&d.selection.ranges.forEach(mt=>{const gt=mt.$from.pos,yt=mt.$to.pos;b.doc.nodesBetween(gt,yt,(ft,st)=>{nt&&nt===ft.type&&d.setNodeMarkup(st,void 0,{...ft.attrs,...e}),ot&&ft.marks.length&&ft.marks.forEach(bt=>{if(ot===bt.type){const vt=Math.max(st,gt),xt=Math.min(st+ft.nodeSize,yt);d.addMark(vt,xt,ot.create({...bt.attrs,...e}))}})})}),!0):!1},wrapIn=(s,e={})=>({state:d,dispatch:b})=>{const tt=getNodeType(s,d.schema);return wrapIn$1(tt,e)(d,b)},wrapInList=(s,e={})=>({state:d,dispatch:b})=>{const tt=getNodeType(s,d.schema);return wrapInList$1(tt,e)(d,b)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,cut,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter,exitCode,extendMarkRange,first,focus,forEach,insertContent,insertContentAt,joinBackward,joinDown,joinForward,joinItemBackward,joinItemForward,joinTextblockBackward,joinTextblockForward,joinUp,keyboardShortcut,lift:lift$1,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});const Commands=Extension.create({name:"commands",addCommands(){return{...commands}}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:s}=this;return[new Plugin({key:new PluginKey("focusEvents"),props:{handleDOMEvents:{focus:(e,d)=>{s.isFocused=!0;const b=s.state.tr.setMeta("focus",{event:d}).setMeta("addToHistory",!1);return e.dispatch(b),!1},blur:(e,d)=>{s.isFocused=!1;const b=s.state.tr.setMeta("blur",{event:d}).setMeta("addToHistory",!1);return e.dispatch(b),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const s=()=>this.editor.commands.first(({commands:ot})=>[()=>ot.undoInputRule(),()=>ot.command(({tr:ht})=>{const{selection:mt,doc:gt}=ht,{empty:yt,$anchor:ft}=mt,{pos:st,parent:bt}=ft,vt=ft.parent.isTextblock&&st>0?ht.doc.resolve(st-1):ft,xt=vt.parent.type.spec.isolating,wt=ft.pos-ft.parentOffset,St=xt&&vt.parent.childCount===1?wt===ft.pos:Selection$2.atStart(gt).from===st;return!yt||!bt.type.isTextblock||bt.textContent.length||!St||St&&ft.parent.type.name==="paragraph"?!1:ot.clearNodes()}),()=>ot.deleteSelection(),()=>ot.joinBackward(),()=>ot.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:ot})=>[()=>ot.deleteSelection(),()=>ot.deleteCurrentNode(),()=>ot.joinForward(),()=>ot.selectNodeForward()]),b={Enter:()=>this.editor.commands.first(({commands:ot})=>[()=>ot.newlineInCode(),()=>ot.createParagraphNear(),()=>ot.liftEmptyBlock(),()=>ot.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:s,"Mod-Backspace":s,"Shift-Backspace":s,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},tt={...b},nt={...b,"Ctrl-h":s,"Alt-Backspace":s,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?nt:tt},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(s,e,d)=>{if(!(s.some(vt=>vt.docChanged)&&!e.doc.eq(d.doc)))return;const{empty:tt,from:nt,to:ot}=e.selection,ht=Selection$2.atStart(e.doc).from,mt=Selection$2.atEnd(e.doc).to;if(tt||!(nt===ht&&ot===mt)||!(d.doc.textBetween(0,d.doc.content.size," "," ").length===0))return;const ft=d.tr,st=createChainableState({state:d,transaction:ft}),{commands:bt}=new CommandManager({editor:this.editor,state:st});if(bt.clearNodes(),!!ft.steps.length)return ft}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class NodePos{get name(){return this.node.type.name}constructor(e,d,b=!1,tt=null){this.currentNode=null,this.actualDepth=null,this.isBlock=b,this.resolvedPos=e,this.editor=d,this.currentNode=tt}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let d=this.from,b=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}d=this.from+1,b=this.to-1}this.editor.commands.insertContentAt({from:d,to:b},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),d=this.resolvedPos.doc.resolve(e);return new NodePos(d,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new NodePos(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new NodePos(e,this.editor)}get children(){const e=[];return this.node.content.forEach((d,b)=>{const tt=d.isBlock&&!d.isTextblock,nt=this.pos+b+1,ot=this.resolvedPos.doc.resolve(nt);if(!tt&&ot.depth<=this.depth)return;const ht=new NodePos(ot,this.editor,tt,tt?d:null);tt&&(ht.actualDepth=this.depth+1),e.push(new NodePos(ot,this.editor,tt,tt?d:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,d={}){let b=null,tt=this.parent;for(;tt&&!b;){if(tt.node.type.name===e)if(Object.keys(d).length>0){const nt=tt.node.attrs,ot=Object.keys(d);for(let ht=0;ht<ot.length;ht+=1){const mt=ot[ht];if(nt[mt]!==d[mt])break}}else b=tt;tt=tt.parent}return b}querySelector(e,d={}){return this.querySelectorAll(e,d,!0)[0]||null}querySelectorAll(e,d={},b=!1){let tt=[];if(!this.children||this.children.length===0)return tt;const nt=Object.keys(d);return this.children.forEach(ot=>{b&&tt.length>0||(ot.node.type.name===e&&nt.every(mt=>d[mt]===ot.node.attrs[mt])&&tt.push(ot),!(b&&tt.length>0)&&(tt=tt.concat(ot.querySelectorAll(e,d,b))))}),tt}setAttribute(e){const d=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(d.from).run()}}const style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function createStyleTag(s,e,d){const b=document.querySelector("style[data-tiptap-style]");if(b!==null)return b;const tt=document.createElement("style");return e&&tt.setAttribute("nonce",e),tt.setAttribute("data-tiptap-style",""),tt.innerHTML=s,document.getElementsByTagName("head")[0].appendChild(tt),tt}let Editor$1=class extends EventEmitter{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:d})=>{throw d}},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,d=!0){this.setOptions({editable:e}),d&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,d){const b=isFunction$3(d)?d(e,[...this.state.plugins]):[...this.state.plugins,e],tt=this.state.reconfigure({plugins:b});this.view.updateState(tt)}unregisterPlugin(e){if(this.isDestroyed)return;const d=typeof e=="string"?`${e}$`:e.key,b=this.state.reconfigure({plugins:this.state.plugins.filter(tt=>!tt.key.startsWith(d))});this.view.updateState(b)}createExtensionManager(){var e,d;const tt=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(d=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||d===void 0?void 0:d.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex]:[],...this.options.extensions].filter(nt=>["extension","node","mark"].includes(nt==null?void 0:nt.type));this.extensionManager=new ExtensionManager(tt,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(nt){if(!(nt instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(nt.message))throw nt;this.emit("contentError",{editor:this,error:nt,disableCollaboration:()=>{this.options.extensions=this.options.extensions.filter(ot=>ot.name!=="collaboration"),this.createExtensionManager()}}),e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const d=resolveFocusPosition(e,this.options.autofocus);this.view=new EditorView(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:e,selection:d||void 0})});const b=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(b),this.createNodeViews(),this.prependClass();const tt=this.view.dom;tt.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const d=this.capturedTransaction;return this.capturedTransaction=null,d}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(ot=>{var ht;return(ht=this.capturedTransaction)===null||ht===void 0?void 0:ht.step(ot)});return}const d=this.state.apply(e),b=!this.state.selection.eq(d.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:d}),this.view.updateState(d),this.emit("transaction",{editor:this,transaction:e}),b&&this.emit("selectionUpdate",{editor:this,transaction:e});const tt=e.getMeta("focus"),nt=e.getMeta("blur");tt&&this.emit("focus",{editor:this,event:tt.event,transaction:e}),nt&&this.emit("blur",{editor:this,event:nt.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return getAttributes(this.state,e)}isActive(e,d){const b=typeof e=="string"?e:null,tt=typeof e=="string"?d:e;return isActive(this.state,b,tt)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:d=`

`,textSerializers:b={}}=e||{};return getText(this.state.doc,{blockSeparator:d,textSerializers:{...getTextSerializersFromSchema(this.schema),...b}})}get isEmpty(){return isNodeEmpty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,d){var b;return((b=this.$doc)===null||b===void 0?void 0:b.querySelector(e,d))||null}$nodes(e,d){var b;return((b=this.$doc)===null||b===void 0?void 0:b.querySelectorAll(e,d))||null}$pos(e){const d=this.state.doc.resolve(e);return new NodePos(d,this)}get $doc(){return this.$pos(0)}};function markInputRule(s){return new InputRule({find:s.find,handler:({state:e,range:d,match:b})=>{const tt=callOrReturn(s.getAttributes,void 0,b);if(tt===!1||tt===null)return null;const{tr:nt}=e,ot=b[b.length-1],ht=b[0];if(ot){const mt=ht.search(/\S/),gt=d.from+ht.indexOf(ot),yt=gt+ot.length;if(getMarksBetween(d.from,d.to,e.doc).filter(bt=>bt.mark.type.excluded.find(xt=>xt===s.type&&xt!==bt.mark.type)).filter(bt=>bt.to>gt).length)return null;yt<d.to&&nt.delete(yt,d.to),gt>d.from&&nt.delete(d.from+mt,gt);const st=d.from+mt+ot.length;nt.addMark(d.from+mt,st,s.type.create(tt||{})),nt.removeStoredMark(s.type)}}})}function nodeInputRule(s){return new InputRule({find:s.find,handler:({state:e,range:d,match:b})=>{const tt=callOrReturn(s.getAttributes,void 0,b)||{},{tr:nt}=e,ot=d.from;let ht=d.to;const mt=s.type.create(tt);if(b[1]){const gt=b[0].lastIndexOf(b[1]);let yt=ot+gt;yt>ht?yt=ht:ht=yt+b[1].length;const ft=b[0][b[0].length-1];nt.insertText(ft,ot+b[0].length-1),nt.replaceWith(yt,ht,mt)}else if(b[0]){const gt=s.type.isInline?ot:ot-1;nt.insert(gt,s.type.create(tt)).delete(nt.mapping.map(ot),nt.mapping.map(ht))}nt.scrollIntoView()}})}function textblockTypeInputRule(s){return new InputRule({find:s.find,handler:({state:e,range:d,match:b})=>{const tt=e.doc.resolve(d.from),nt=callOrReturn(s.getAttributes,void 0,b)||{};if(!tt.node(-1).canReplaceWith(tt.index(-1),tt.indexAfter(-1),s.type))return null;e.tr.delete(d.from,d.to).setBlockType(d.from,d.from,s.type,nt)}})}function wrappingInputRule(s){return new InputRule({find:s.find,handler:({state:e,range:d,match:b,chain:tt})=>{const nt=callOrReturn(s.getAttributes,void 0,b)||{},ot=e.tr.delete(d.from,d.to),mt=ot.doc.resolve(d.from).blockRange(),gt=mt&&findWrapping(mt,s.type,nt);if(!gt)return null;if(ot.wrap(mt,gt),s.keepMarks&&s.editor){const{selection:ft,storedMarks:st}=e,{splittableMarks:bt}=s.editor.extensionManager,vt=st||ft.$to.parentOffset&&ft.$from.marks();if(vt){const xt=vt.filter(wt=>bt.includes(wt.type.name));ot.ensureMarks(xt)}}if(s.keepAttributes){const ft=s.type.name==="bulletList"||s.type.name==="orderedList"?"listItem":"taskList";tt().updateAttributes(ft,nt).run()}const yt=ot.doc.resolve(d.from-1).nodeBefore;yt&&yt.type===s.type&&canJoin(ot.doc,d.from-1)&&(!s.joinPredicate||s.joinPredicate(b,yt))&&ot.join(d.from-1)}})}class Mark{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mark(e)}configure(e={}){const d=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return d.name=this.name,d.parent=this.parent,d}extend(e={}){const d=new Mark(e);return d.parent=this,this.child=d,d.name=e.name?e.name:d.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${d.name}".`),d.options=callOrReturn(getExtensionField(d,"addOptions",{name:d.name})),d.storage=callOrReturn(getExtensionField(d,"addStorage",{name:d.name,options:d.options})),d}static handleExit({editor:e,mark:d}){const{tr:b}=e.state,tt=e.state.selection.$from;if(tt.pos===tt.end()){const ot=tt.marks();if(!!!ot.find(gt=>(gt==null?void 0:gt.type.name)===d.name))return!1;const mt=ot.find(gt=>(gt==null?void 0:gt.type.name)===d.name);return mt&&b.removeStoredMark(mt),b.insertText(" ",tt.pos),e.view.dispatch(b),!0}return!1}}let Node$2=class es{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new es(e)}configure(e={}){const d=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return d.name=this.name,d.parent=this.parent,d}extend(e={}){const d=new es(e);return d.parent=this,this.child=d,d.name=e.name?e.name:d.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${d.name}".`),d.options=callOrReturn(getExtensionField(d,"addOptions",{name:d.name})),d.storage=callOrReturn(getExtensionField(d,"addStorage",{name:d.name,options:d.options})),d}};function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}class NodeView{constructor(e,d,b){this.isDragging=!1,this.component=e,this.editor=d.editor,this.options={stopEvent:null,ignoreMutation:null,...b},this.extension=d.extension,this.node=d.node,this.decorations=d.decorations,this.getPos=d.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var d,b,tt,nt,ot,ht,mt;const{view:gt}=this.editor,yt=e.target,ft=yt.nodeType===3?(d=yt.parentElement)===null||d===void 0?void 0:d.closest("[data-drag-handle]"):yt.closest("[data-drag-handle]");if(!this.dom||!((b=this.contentDOM)===null||b===void 0)&&b.contains(yt)||!ft)return;let st=0,bt=0;if(this.dom!==ft){const wt=this.dom.getBoundingClientRect(),St=ft.getBoundingClientRect(),_t=(tt=e.offsetX)!==null&&tt!==void 0?tt:(nt=e.nativeEvent)===null||nt===void 0?void 0:nt.offsetX,Tt=(ot=e.offsetY)!==null&&ot!==void 0?ot:(ht=e.nativeEvent)===null||ht===void 0?void 0:ht.offsetY;st=St.x-wt.x+_t,bt=St.y-wt.y+Tt}(mt=e.dataTransfer)===null||mt===void 0||mt.setDragImage(this.dom,st,bt);const vt=NodeSelection.create(gt.state.doc,this.getPos()),xt=gt.state.tr.setSelection(vt);gt.dispatch(xt)}stopEvent(e){var d;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const b=e.target;if(!(this.dom.contains(b)&&!(!((d=this.contentDOM)===null||d===void 0)&&d.contains(b))))return!1;const nt=e.type.startsWith("drag"),ot=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(b.tagName)||b.isContentEditable)&&!ot&&!nt)return!0;const{isEditable:mt}=this.editor,{isDragging:gt}=this,yt=!!this.node.type.spec.draggable,ft=NodeSelection.isSelectable(this.node),st=e.type==="copy",bt=e.type==="paste",vt=e.type==="cut",xt=e.type==="mousedown";if(!yt&&ft&&nt&&e.preventDefault(),yt&&nt&&!gt)return e.preventDefault(),!1;if(yt&&mt&&!gt&&xt){const wt=b.closest("[data-drag-handle]");wt&&(this.dom===wt||this.dom.contains(wt))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(gt||ot||st||bt||vt||xt&&ft)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(isiOS()||isAndroid())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(b=>b.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:d})=>{const b=this.getPos();return d.setNodeMarkup(b,void 0,{...this.node.attrs,...e}),!0})}deleteNode(){const e=this.getPos(),d=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:d})}}function markPasteRule(s){return new PasteRule({find:s.find,handler:({state:e,range:d,match:b,pasteEvent:tt})=>{const nt=callOrReturn(s.getAttributes,void 0,b,tt);if(nt===!1||nt===null)return null;const{tr:ot}=e,ht=b[b.length-1],mt=b[0];let gt=d.to;if(ht){const yt=mt.search(/\S/),ft=d.from+mt.indexOf(ht),st=ft+ht.length;if(getMarksBetween(d.from,d.to,e.doc).filter(vt=>vt.mark.type.excluded.find(wt=>wt===s.type&&wt!==vt.mark.type)).filter(vt=>vt.to>ft).length)return null;st<d.to&&ot.delete(st,d.to),ft>d.from&&ot.delete(d.from+yt,ft),gt=d.from+yt+ht.length,ot.addMark(d.from+yt,gt,s.type.create(nt||{})),ot.removeStoredMark(s.type)}}})}const mergeRefs=(...s)=>e=>{s.forEach(d=>{typeof d=="function"?d(e):d&&(d.current=e)})},Portals=({renderers:s})=>React.createElement(React.Fragment,null,Object.entries(s).map(([e,d])=>ReactDOM.createPortal(d.reactElement,d.element,e)));class PureEditorContent extends React.Component{constructor(e){super(e),this.editorContentRef=React.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const d=this.editorContentRef.current;d.append(...e.options.element.childNodes),e.setOptions({element:d}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?reactDomExports.flushSync(e):e()}setRenderer(e,d){this.maybeFlushSync(()=>{this.setState(({renderers:b})=>({renderers:{...b,[e]:d}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:d})=>{const b={...d};return delete b[e],{renderers:b}})})}componentWillUnmount(){const{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const d=document.createElement("div");d.append(...e.options.element.childNodes),e.setOptions({element:d})}render(){const{editor:e,innerRef:d,...b}=this.props;return React.createElement(React.Fragment,null,React.createElement("div",{ref:mergeRefs(d,this.editorContentRef),...b}),React.createElement(Portals,{renderers:this.state.renderers}))}}const EditorContentWithKey=reactExports.forwardRef((s,e)=>{const d=React.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[s.editor]);return React.createElement(PureEditorContent,{key:d,innerRef:e,...s})}),EditorContent=React.memo(EditorContentWithKey);class Editor extends Editor$1{constructor(){super(...arguments),this.contentComponent=null}}var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production_min;function requireUseSyncExternalStoreShim_production_min(){if(hasRequiredUseSyncExternalStoreShim_production_min)return useSyncExternalStoreShim_production_min;hasRequiredUseSyncExternalStoreShim_production_min=1;var s=React;function e(ft,st){return ft===st&&(ft!==0||1/ft===1/st)||ft!==ft&&st!==st}var d=typeof Object.is=="function"?Object.is:e,b=s.useState,tt=s.useEffect,nt=s.useLayoutEffect,ot=s.useDebugValue;function ht(ft,st){var bt=st(),vt=b({inst:{value:bt,getSnapshot:st}}),xt=vt[0].inst,wt=vt[1];return nt(function(){xt.value=bt,xt.getSnapshot=st,mt(xt)&&wt({inst:xt})},[ft,bt,st]),tt(function(){return mt(xt)&&wt({inst:xt}),ft(function(){mt(xt)&&wt({inst:xt})})},[ft]),ot(bt),bt}function mt(ft){var st=ft.getSnapshot;ft=ft.value;try{var bt=st();return!d(ft,bt)}catch{return!0}}function gt(ft,st){return st()}var yt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gt:ht;return useSyncExternalStoreShim_production_min.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:yt,useSyncExternalStoreShim_production_min}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production_min()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production_min;function requireWithSelector_production_min(){if(hasRequiredWithSelector_production_min)return withSelector_production_min;hasRequiredWithSelector_production_min=1;var s=React,e=requireShim();function d(gt,yt){return gt===yt&&(gt!==0||1/gt===1/yt)||gt!==gt&&yt!==yt}var b=typeof Object.is=="function"?Object.is:d,tt=e.useSyncExternalStore,nt=s.useRef,ot=s.useEffect,ht=s.useMemo,mt=s.useDebugValue;return withSelector_production_min.useSyncExternalStoreWithSelector=function(gt,yt,ft,st,bt){var vt=nt(null);if(vt.current===null){var xt={hasValue:!1,value:null};vt.current=xt}else xt=vt.current;vt=ht(function(){function St(Mt){if(!_t){if(_t=!0,Tt=Mt,Mt=st(Mt),bt!==void 0&&xt.hasValue){var Ot=xt.value;if(bt(Ot,Mt))return Et=Ot}return Et=Mt}if(Ot=Et,b(Tt,Mt))return Ot;var Dt=st(Mt);return bt!==void 0&&bt(Ot,Dt)?Ot:(Tt=Mt,Et=Dt)}var _t=!1,Tt,Et,kt=ft===void 0?null:ft;return[function(){return St(yt())},kt===null?void 0:function(){return St(kt())}]},[yt,ft,st,bt]);var wt=tt(gt,vt[0],vt[1]);return ot(function(){xt.hasValue=!0,xt.value=wt},[wt]),mt(wt),wt},withSelector_production_min}withSelector.exports=requireWithSelector_production_min();var withSelectorExports=withSelector.exports;function makeEditorStateInstance(s){let e=0,d=0,b={editor:s,transactionNumber:0},tt=s;const nt=new Set;return{getSnapshot(){return e===d||(d=e,b={editor:tt,transactionNumber:e}),b},getServerSnapshot(){return{editor:null,transactionNumber:0}},subscribe(ht){return nt.add(ht),()=>{nt.delete(ht)}},watch(ht){if(tt=ht,tt){const mt=()=>{e+=1,nt.forEach(yt=>yt())},gt=tt;return gt.on("transaction",mt),()=>{gt.off("transaction",mt)}}}}}function useEditorState(s){const[e]=reactExports.useState(()=>makeEditorStateInstance(s.editor)),d=withSelectorExports.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getServerSnapshot,s.selector,s.equalityFn);return reactExports.useEffect(()=>e.watch(s.editor),[s.editor]),reactExports.useDebugValue(d),d}const isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next);function useEditor(s={},e=[]){const d=reactExports.useRef(!1),[b,tt]=reactExports.useState(()=>{if(s.immediatelyRender===void 0)return isSSR||isNext?null:new Editor(s);if(s.immediatelyRender&&isSSR&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return s.immediatelyRender?new Editor(s):null});reactExports.useDebugValue(b),reactExports.useEffect(()=>{let Ot=b;Ot?Array.isArray(e)&&e.length?(Ot=new Editor(s),tt(Ot)):Ot.setOptions(s):(Ot=new Editor(s),tt(Ot))},e);const{onBeforeCreate:nt,onBlur:ot,onCreate:ht,onDestroy:mt,onFocus:gt,onSelectionUpdate:yt,onTransaction:ft,onUpdate:st,onContentError:bt}=s,vt=reactExports.useRef(nt),xt=reactExports.useRef(ot),wt=reactExports.useRef(ht),St=reactExports.useRef(mt),_t=reactExports.useRef(gt),Tt=reactExports.useRef(yt),Et=reactExports.useRef(ft),kt=reactExports.useRef(st),Mt=reactExports.useRef(bt);return reactExports.useEffect(()=>{b&&(nt&&(b.off("beforeCreate",vt.current),b.on("beforeCreate",nt),vt.current=nt),ot&&(b.off("blur",xt.current),b.on("blur",ot),xt.current=ot),ht&&(b.off("create",wt.current),b.on("create",ht),wt.current=ht),mt&&(b.off("destroy",St.current),b.on("destroy",mt),St.current=mt),gt&&(b.off("focus",_t.current),b.on("focus",gt),_t.current=gt),yt&&(b.off("selectionUpdate",Tt.current),b.on("selectionUpdate",yt),Tt.current=yt),ft&&(b.off("transaction",Et.current),b.on("transaction",ft),Et.current=ft),st&&(b.off("update",kt.current),b.on("update",st),kt.current=st),bt&&(b.off("contentError",Mt.current),b.on("contentError",bt),Mt.current=bt))},[nt,ot,ht,mt,gt,yt,ft,st,bt,b]),reactExports.useEffect(()=>(d.current=!0,()=>{d.current=!1,b&&setTimeout(()=>{!d.current&&!b.isDestroyed&&b.destroy()})}),[]),useEditorState({editor:b,selector:({transactionNumber:Ot})=>s.shouldRerenderOnTransaction===!1?null:s.immediatelyRender&&Ot===0?0:Ot+1}),b}const EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;const ReactNodeViewContext=reactExports.createContext({onDragStart:void 0}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext),NodeViewWrapper=React.forwardRef((s,e)=>{const{onDragStart:d}=useReactNodeView(),b=s.as||"div";return React.createElement(b,{...s,ref:e,"data-node-view-wrapper":"",onDragStart:d,style:{whiteSpace:"normal",...s.style}})});function isClassComponent(s){return!!(typeof s=="function"&&s.prototype&&s.prototype.isReactComponent)}function isForwardRefComponent(s){var e;return typeof s=="object"&&((e=s.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class ReactRenderer{constructor(e,{editor:d,props:b={},as:tt="div",className:nt="",attrs:ot}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=d,this.props=b,this.element=document.createElement(tt),this.element.classList.add("react-renderer"),nt&&this.element.classList.add(...nt.split(" ")),ot&&Object.keys(ot).forEach(ht=>{this.element.setAttribute(ht,ot[ht])}),this.render()}render(){var e,d;const b=this.component,tt=this.props;(isClassComponent(b)||isForwardRefComponent(b))&&(tt.ref=nt=>{this.ref=nt}),this.reactElement=React.createElement(b,{...tt}),(d=(e=this.editor)===null||e===void 0?void 0:e.contentComponent)===null||d===void 0||d.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e,d;(d=(e=this.editor)===null||e===void 0?void 0:e.contentComponent)===null||d===void 0||d.removeRenderer(this.id)}}class ReactNodeView extends NodeView{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(nt={})=>this.updateAttributes(nt),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const nt=ot=>ot.charAt(0).toUpperCase()+ot.substring(1);this.component.displayName=nt(this.extension.name)}const d=nt=>{const ot=this.component,ht=this.onDragStart.bind(this),mt=gt=>{gt&&this.contentDOMElement&&gt.firstChild!==this.contentDOMElement&&gt.appendChild(this.contentDOMElement)};return React.createElement(React.Fragment,null,React.createElement(ReactNodeViewContext.Provider,{value:{onDragStart:ht,nodeViewContentRef:mt}},React.createElement(ot,{...nt})))};d.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit");let b=this.node.isInline?"span":"div";this.options.as&&(b=this.options.as);const{className:tt=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new ReactRenderer(d,{editor:this.editor,props:e,as:b,className:`node-${this.node.type.name} ${tt}`.trim(),attrs:this.options.attrs})}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:d}=this.editor.state.selection;if(e<=this.getPos()&&d>=this.getPos()+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,d){const b=tt=>{this.renderer.updateProps(tt)};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const tt=this.node,nt=this.decorations;return this.node=e,this.decorations=d,this.options.update({oldNode:tt,oldDecorations:nt,newNode:e,newDecorations:d,updateProps:()=>b({node:e,decorations:d})})}return e===this.node&&this.decorations===d||(this.node=e,this.decorations=d,b({node:e,decorations:d})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}}function ReactNodeViewRenderer(s,e){return d=>d.editor.contentComponent?new ReactNodeView(s,d,e):{}}const inputRegex$5=/^\s*>\s$/,Blockquote=Node$2.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:s}){return["blockquote",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setBlockquote:()=>({commands:s})=>s.wrapIn(this.name),toggleBlockquote:()=>({commands:s})=>s.toggleWrap(this.name),unsetBlockquote:()=>({commands:s})=>s.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$5,type:this.type})]}}),starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:s=>s.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:s=>/^(bold(er)?|[5-9]\d{2,})$/.test(s)&&null}]},renderHTML({HTMLAttributes:s}){return["strong",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setBold:()=>({commands:s})=>s.setMark(this.name),toggleBold:()=>({commands:s})=>s.toggleMark(this.name),unsetBold:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),ListItem$2=Node$2.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:s}){return["li",mergeAttributes(this.options.HTMLAttributes,s),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TextStyle$1=Mark.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:s=>s.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:s}){return["span",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:s,commands:e})=>{const d=getMarkAttributes(s,this.type);return Object.entries(d).some(([,tt])=>!!tt)?!0:e.unsetMark(this.name)}}}}),inputRegex$4=/^\s*([-+*])\s$/,BulletList=Node$2.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:s}){return["ul",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{toggleBulletList:()=>({commands:s,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem$2.name,this.editor.getAttributes(TextStyle$1.name)).run():s.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let s=wrappingInputRule({find:inputRegex$4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(s=wrappingInputRule({find:inputRegex$4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyle$1.name),editor:this.editor})),[s]}}),inputRegex$3=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,pasteRegex$1=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:s}){return["code",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setCode:()=>({commands:s})=>s.setMark(this.name),toggleCode:()=>({commands:s})=>s.toggleMark(this.name),unsetCode:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$3,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node$2.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:s=>{var e;const{languageClassPrefix:d}=this.options,nt=[...((e=s.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(ot=>ot.startsWith(d)).map(ot=>ot.replace(d,""))[0];return nt||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:s,HTMLAttributes:e}){return["pre",mergeAttributes(this.options.HTMLAttributes,e),["code",{class:s.attrs.language?this.options.languageClassPrefix+s.attrs.language:null},0]]},addCommands(){return{setCodeBlock:s=>({commands:e})=>e.setNode(this.name,s),toggleCodeBlock:s=>({commands:e})=>e.toggleNode(this.name,"paragraph",s)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:s,$anchor:e}=this.editor.state.selection,d=e.pos===1;return!s||e.parent.type.name!==this.name?!1:d||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:s})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=s,{selection:d}=e,{$from:b,empty:tt}=d;if(!tt||b.parent.type!==this.type)return!1;const nt=b.parentOffset===b.parent.nodeSize-2,ot=b.parent.textContent.endsWith(`

`);return!nt||!ot?!1:s.chain().command(({tr:ht})=>(ht.delete(b.pos-2,b.pos),!0)).exitCode().run()},ArrowDown:({editor:s})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=s,{selection:d,doc:b}=e,{$from:tt,empty:nt}=d;if(!nt||tt.parent.type!==this.type||!(tt.parentOffset===tt.parent.nodeSize-2))return!1;const ht=tt.after();return ht===void 0?!1:b.nodeAt(ht)?s.commands.command(({tr:gt})=>(gt.setSelection(Selection$2.near(b.resolve(ht))),!0)):s.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:s=>({language:s[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:s=>({language:s[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(s,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const d=e.clipboardData.getData("text/plain"),b=e.clipboardData.getData("vscode-editor-data"),tt=b?JSON.parse(b):void 0,nt=tt==null?void 0:tt.mode;if(!d||!nt)return!1;const{tr:ot,schema:ht}=s.state,mt=ht.text(d.replace(/\r\n?/g,`
`));return ot.replaceSelectionWith(this.type.create({language:nt},mt)),ot.selection.$from.parent.type!==this.type&&ot.setSelection(TextSelection.near(ot.doc.resolve(Math.max(0,ot.selection.from-2)))),ot.setMeta("paste",!0),s.dispatch(ot),!0}}})]}}),Document=Node$2.create({name:"doc",topNode:!0,content:"block+"});function dropCursor(s={}){return new Plugin({view(e){return new DropCursorView(e,s)}})}class DropCursorView{constructor(e,d){var b;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(b=d.width)!==null&&b!==void 0?b:1,this.color=d.color===!1?void 0:d.color||"black",this.class=d.class,this.handlers=["dragover","dragend","drop","dragleave"].map(tt=>{let nt=ot=>{this[tt](ot)};return e.dom.addEventListener(tt,nt),{name:tt,handler:nt}})}destroy(){this.handlers.forEach(({name:e,handler:d})=>this.editorView.dom.removeEventListener(e,d))}update(e,d){this.cursorPos!=null&&d.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),d=!e.parent.inlineContent,b;if(d){let ht=e.nodeBefore,mt=e.nodeAfter;if(ht||mt){let gt=this.editorView.nodeDOM(this.cursorPos-(ht?ht.nodeSize:0));if(gt){let yt=gt.getBoundingClientRect(),ft=ht?yt.bottom:yt.top;ht&&mt&&(ft=(ft+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),b={left:yt.left,right:yt.right,top:ft-this.width/2,bottom:ft+this.width/2}}}}if(!b){let ht=this.editorView.coordsAtPos(this.cursorPos);b={left:ht.left-this.width/2,right:ht.left+this.width/2,top:ht.top,bottom:ht.bottom}}let tt=this.editorView.dom.offsetParent;this.element||(this.element=tt.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",d),this.element.classList.toggle("prosemirror-dropcursor-inline",!d);let nt,ot;if(!tt||tt==document.body&&getComputedStyle(tt).position=="static")nt=-pageXOffset,ot=-pageYOffset;else{let ht=tt.getBoundingClientRect();nt=ht.left-tt.scrollLeft,ot=ht.top-tt.scrollTop}this.element.style.left=b.left-nt+"px",this.element.style.top=b.top-ot+"px",this.element.style.width=b.right-b.left+"px",this.element.style.height=b.bottom-b.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let d=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),b=d&&d.inside>=0&&this.editorView.state.doc.nodeAt(d.inside),tt=b&&b.type.spec.disableDropCursor,nt=typeof tt=="function"?tt(this.editorView,d,e):tt;if(d&&!nt){let ot=d.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let ht=dropPoint(this.editorView.state.doc,ot,this.editorView.dragging.slice);ht!=null&&(ot=ht)}this.setCursor(ot),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});class GapCursor extends Selection$2{constructor(e){super(e,e)}map(e,d){let b=e.resolve(d.map(this.head));return GapCursor.valid(b)?new GapCursor(b):Selection$2.near(b)}content(){return Slice.empty}eq(e){return e instanceof GapCursor&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,d){if(typeof d.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(e.resolve(d.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(e){let d=e.parent;if(d.isTextblock||!closedBefore(e)||!closedAfter(e))return!1;let b=d.type.spec.allowGapCursor;if(b!=null)return b;let tt=d.contentMatchAt(e.index()).defaultType;return tt&&tt.isTextblock}static findGapCursorFrom(e,d,b=!1){e:for(;;){if(!b&&GapCursor.valid(e))return e;let tt=e.pos,nt=null;for(let ot=e.depth;;ot--){let ht=e.node(ot);if(d>0?e.indexAfter(ot)<ht.childCount:e.index(ot)>0){nt=ht.child(d>0?e.indexAfter(ot):e.index(ot)-1);break}else if(ot==0)return null;tt+=d;let mt=e.doc.resolve(tt);if(GapCursor.valid(mt))return mt}for(;;){let ot=d>0?nt.firstChild:nt.lastChild;if(!ot){if(nt.isAtom&&!nt.isText&&!NodeSelection.isSelectable(nt)){e=e.doc.resolve(tt+nt.nodeSize*d),b=!1;continue e}break}nt=ot,tt+=d;let ht=e.doc.resolve(tt);if(GapCursor.valid(ht))return ht}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection$2.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(e){this.pos=e}map(e){return new GapBookmark(e.map(this.pos))}resolve(e){let d=e.resolve(this.pos);return GapCursor.valid(d)?new GapCursor(d):Selection$2.near(d)}}function closedBefore(s){for(let e=s.depth;e>=0;e--){let d=s.index(e),b=s.node(e);if(d==0){if(b.type.spec.isolating)return!0;continue}for(let tt=b.child(d-1);;tt=tt.lastChild){if(tt.childCount==0&&!tt.inlineContent||tt.isAtom||tt.type.spec.isolating)return!0;if(tt.inlineContent)return!1}}return!0}function closedAfter(s){for(let e=s.depth;e>=0;e--){let d=s.indexAfter(e),b=s.node(e);if(d==b.childCount){if(b.type.spec.isolating)return!0;continue}for(let tt=b.child(d);;tt=tt.firstChild){if(tt.childCount==0&&!tt.inlineContent||tt.isAtom||tt.type.spec.isolating)return!0;if(tt.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(s,e,d){return e.pos==d.pos&&GapCursor.valid(d)?new GapCursor(d):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(s,e){const d=s=="vert"?e>0?"down":"up":e>0?"right":"left";return function(b,tt,nt){let ot=b.selection,ht=e>0?ot.$to:ot.$from,mt=ot.empty;if(ot instanceof TextSelection){if(!nt.endOfTextblock(d)||ht.depth==0)return!1;mt=!1,ht=b.doc.resolve(e>0?ht.after():ht.before())}let gt=GapCursor.findGapCursorFrom(ht,e,mt);return gt?(tt&&tt(b.tr.setSelection(new GapCursor(gt))),!0):!1}}function handleClick(s,e,d){if(!s||!s.editable)return!1;let b=s.state.doc.resolve(e);if(!GapCursor.valid(b))return!1;let tt=s.posAtCoords({left:d.clientX,top:d.clientY});return tt&&tt.inside>-1&&NodeSelection.isSelectable(s.state.doc.nodeAt(tt.inside))?!1:(s.dispatch(s.state.tr.setSelection(new GapCursor(b))),!0)}function beforeinput(s,e){if(e.inputType!="insertCompositionText"||!(s.state.selection instanceof GapCursor))return!1;let{$from:d}=s.state.selection,b=d.parent.contentMatchAt(d.index()).findWrapping(s.state.schema.nodes.text);if(!b)return!1;let tt=Fragment.empty;for(let ot=b.length-1;ot>=0;ot--)tt=Fragment.from(b[ot].createAndFill(null,tt));let nt=s.state.tr.replace(d.pos,d.pos,new Slice(tt,0,0));return nt.setSelection(TextSelection.near(nt.doc.resolve(d.pos+1))),s.dispatch(nt),!1}function drawGapCursor(s){if(!(s.selection instanceof GapCursor))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",DecorationSet.create(s.doc,[Decoration.widget(s.selection.head,e,{key:"gapcursor"})])}const Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(s){var e;const d={name:s.name,options:s.options,storage:s.storage};return{allowGapCursor:(e=callOrReturn(getExtensionField(s,"allowGapCursor",d)))!==null&&e!==void 0?e:null}}}),HardBreak=Node$2.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:s}){return["br",mergeAttributes(this.options.HTMLAttributes,s)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:s,chain:e,state:d,editor:b})=>s.first([()=>s.exitCode(),()=>s.command(()=>{const{selection:tt,storedMarks:nt}=d;if(tt.$from.parent.type.spec.isolating)return!1;const{keepMarks:ot}=this.options,{splittableMarks:ht}=b.extensionManager,mt=nt||tt.$to.parentOffset&&tt.$from.marks();return e().insertContent({type:this.name}).command(({tr:gt,dispatch:yt})=>{if(yt&&mt&&ot){const ft=mt.filter(st=>ht.includes(st.type.name));gt.ensureMarks(ft)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node$2.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(s=>({tag:`h${s}`,attrs:{level:s}}))},renderHTML({node:s,HTMLAttributes:e}){return[`h${this.options.levels.includes(s.attrs.level)?s.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:s=>({commands:e})=>this.options.levels.includes(s.level)?e.setNode(this.name,s):!1,toggleHeading:s=>({commands:e})=>this.options.levels.includes(s.level)?e.toggleNode(this.name,"paragraph",s):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((s,e)=>({...s,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(s=>textblockTypeInputRule({find:new RegExp(`^(#{1,${s}})\\s$`),type:this.type,getAttributes:{level:s}}))}});var GOOD_LEAF_SIZE=200,RopeSequence=function(){};RopeSequence.prototype.append=function(e){return e.length?(e=RopeSequence.from(e),!this.length&&e||e.length<GOOD_LEAF_SIZE&&this.leafAppend(e)||this.length<GOOD_LEAF_SIZE&&e.leafPrepend(this)||this.appendInner(e)):this};RopeSequence.prototype.prepend=function(e){return e.length?RopeSequence.from(e).append(this):this};RopeSequence.prototype.appendInner=function(e){return new Append(this,e)};RopeSequence.prototype.slice=function(e,d){return e===void 0&&(e=0),d===void 0&&(d=this.length),e>=d?RopeSequence.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,d))};RopeSequence.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};RopeSequence.prototype.forEach=function(e,d,b){d===void 0&&(d=0),b===void 0&&(b=this.length),d<=b?this.forEachInner(e,d,b,0):this.forEachInvertedInner(e,d,b,0)};RopeSequence.prototype.map=function(e,d,b){d===void 0&&(d=0),b===void 0&&(b=this.length);var tt=[];return this.forEach(function(nt,ot){return tt.push(e(nt,ot))},d,b),tt};RopeSequence.from=function(e){return e instanceof RopeSequence?e:e&&e.length?new Leaf(e):RopeSequence.empty};var Leaf=function(s){function e(b){s.call(this),this.values=b}s&&(e.__proto__=s),e.prototype=Object.create(s&&s.prototype),e.prototype.constructor=e;var d={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(tt,nt){return tt==0&&nt==this.length?this:new e(this.values.slice(tt,nt))},e.prototype.getInner=function(tt){return this.values[tt]},e.prototype.forEachInner=function(tt,nt,ot,ht){for(var mt=nt;mt<ot;mt++)if(tt(this.values[mt],ht+mt)===!1)return!1},e.prototype.forEachInvertedInner=function(tt,nt,ot,ht){for(var mt=nt-1;mt>=ot;mt--)if(tt(this.values[mt],ht+mt)===!1)return!1},e.prototype.leafAppend=function(tt){if(this.length+tt.length<=GOOD_LEAF_SIZE)return new e(this.values.concat(tt.flatten()))},e.prototype.leafPrepend=function(tt){if(this.length+tt.length<=GOOD_LEAF_SIZE)return new e(tt.flatten().concat(this.values))},d.length.get=function(){return this.values.length},d.depth.get=function(){return 0},Object.defineProperties(e.prototype,d),e}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(s){function e(d,b){s.call(this),this.left=d,this.right=b,this.length=d.length+b.length,this.depth=Math.max(d.depth,b.depth)+1}return s&&(e.__proto__=s),e.prototype=Object.create(s&&s.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(b){return b<this.left.length?this.left.get(b):this.right.get(b-this.left.length)},e.prototype.forEachInner=function(b,tt,nt,ot){var ht=this.left.length;if(tt<ht&&this.left.forEachInner(b,tt,Math.min(nt,ht),ot)===!1||nt>ht&&this.right.forEachInner(b,Math.max(tt-ht,0),Math.min(this.length,nt)-ht,ot+ht)===!1)return!1},e.prototype.forEachInvertedInner=function(b,tt,nt,ot){var ht=this.left.length;if(tt>ht&&this.right.forEachInvertedInner(b,tt-ht,Math.max(nt,ht)-ht,ot+ht)===!1||nt<ht&&this.left.forEachInvertedInner(b,Math.min(tt,ht),nt,ot)===!1)return!1},e.prototype.sliceInner=function(b,tt){if(b==0&&tt==this.length)return this;var nt=this.left.length;return tt<=nt?this.left.slice(b,tt):b>=nt?this.right.slice(b-nt,tt-nt):this.left.slice(b,nt).append(this.right.slice(0,tt-nt))},e.prototype.leafAppend=function(b){var tt=this.right.leafAppend(b);if(tt)return new e(this.left,tt)},e.prototype.leafPrepend=function(b){var tt=this.left.leafPrepend(b);if(tt)return new e(tt,this.right)},e.prototype.appendInner=function(b){return this.left.depth>=Math.max(this.right.depth,b.depth)+1?new e(this.left,new e(this.right,b)):new e(this,b)},e}(RopeSequence);const max_empty_items=500;class Branch{constructor(e,d){this.items=e,this.eventCount=d}popEvent(e,d){if(this.eventCount==0)return null;let b=this.items.length;for(;;b--)if(this.items.get(b-1).selection){--b;break}let tt,nt;d&&(tt=this.remapping(b,this.items.length),nt=tt.maps.length);let ot=e.tr,ht,mt,gt=[],yt=[];return this.items.forEach((ft,st)=>{if(!ft.step){tt||(tt=this.remapping(b,st+1),nt=tt.maps.length),nt--,yt.push(ft);return}if(tt){yt.push(new Item(ft.map));let bt=ft.step.map(tt.slice(nt)),vt;bt&&ot.maybeStep(bt).doc&&(vt=ot.mapping.maps[ot.mapping.maps.length-1],gt.push(new Item(vt,void 0,void 0,gt.length+yt.length))),nt--,vt&&tt.appendMap(vt,nt)}else ot.maybeStep(ft.step);if(ft.selection)return ht=tt?ft.selection.map(tt.slice(nt)):ft.selection,mt=new Branch(this.items.slice(0,b).append(yt.reverse().concat(gt)),this.eventCount-1),!1},this.items.length,0),{remaining:mt,transform:ot,selection:ht}}addTransform(e,d,b,tt){let nt=[],ot=this.eventCount,ht=this.items,mt=!tt&&ht.length?ht.get(ht.length-1):null;for(let yt=0;yt<e.steps.length;yt++){let ft=e.steps[yt].invert(e.docs[yt]),st=new Item(e.mapping.maps[yt],ft,d),bt;(bt=mt&&mt.merge(st))&&(st=bt,yt?nt.pop():ht=ht.slice(0,ht.length-1)),nt.push(st),d&&(ot++,d=void 0),tt||(mt=st)}let gt=ot-b.depth;return gt>DEPTH_OVERFLOW&&(ht=cutOffEvents(ht,gt),ot-=gt),new Branch(ht.append(nt),ot)}remapping(e,d){let b=new Mapping;return this.items.forEach((tt,nt)=>{let ot=tt.mirrorOffset!=null&&nt-tt.mirrorOffset>=e?b.maps.length-tt.mirrorOffset:void 0;b.appendMap(tt.map,ot)},e,d),b}addMaps(e){return this.eventCount==0?this:new Branch(this.items.append(e.map(d=>new Item(d))),this.eventCount)}rebased(e,d){if(!this.eventCount)return this;let b=[],tt=Math.max(0,this.items.length-d),nt=e.mapping,ot=e.steps.length,ht=this.eventCount;this.items.forEach(st=>{st.selection&&ht--},tt);let mt=d;this.items.forEach(st=>{let bt=nt.getMirror(--mt);if(bt==null)return;ot=Math.min(ot,bt);let vt=nt.maps[bt];if(st.step){let xt=e.steps[bt].invert(e.docs[bt]),wt=st.selection&&st.selection.map(nt.slice(mt+1,bt));wt&&ht++,b.push(new Item(vt,xt,wt))}else b.push(new Item(vt))},tt);let gt=[];for(let st=d;st<ot;st++)gt.push(new Item(nt.maps[st]));let yt=this.items.slice(0,tt).append(gt).append(b),ft=new Branch(yt,ht);return ft.emptyItemCount()>max_empty_items&&(ft=ft.compress(this.items.length-b.length)),ft}emptyItemCount(){let e=0;return this.items.forEach(d=>{d.step||e++}),e}compress(e=this.items.length){let d=this.remapping(0,e),b=d.maps.length,tt=[],nt=0;return this.items.forEach((ot,ht)=>{if(ht>=e)tt.push(ot),ot.selection&&nt++;else if(ot.step){let mt=ot.step.map(d.slice(b)),gt=mt&&mt.getMap();if(b--,gt&&d.appendMap(gt,b),mt){let yt=ot.selection&&ot.selection.map(d.slice(b));yt&&nt++;let ft=new Item(gt.invert(),mt,yt),st,bt=tt.length-1;(st=tt.length&&tt[bt].merge(ft))?tt[bt]=st:tt.push(ft)}}else ot.map&&b--},this.items.length,0),new Branch(RopeSequence.from(tt.reverse()),nt)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(s,e){let d;return s.forEach((b,tt)=>{if(b.selection&&e--==0)return d=tt,!1}),s.slice(d)}class Item{constructor(e,d,b,tt){this.map=e,this.step=d,this.selection=b,this.mirrorOffset=tt}merge(e){if(this.step&&e.step&&!e.selection){let d=e.step.merge(this.step);if(d)return new Item(d.getMap().invert(),d,this.selection)}}}class HistoryState{constructor(e,d,b,tt,nt){this.done=e,this.undone=d,this.prevRanges=b,this.prevTime=tt,this.prevComposition=nt}}const DEPTH_OVERFLOW=20;function applyTransaction(s,e,d,b){let tt=d.getMeta(historyKey),nt;if(tt)return tt.historyState;d.getMeta(closeHistoryKey)&&(s=new HistoryState(s.done,s.undone,null,0,-1));let ot=d.getMeta("appendedTransaction");if(d.steps.length==0)return s;if(ot&&ot.getMeta(historyKey))return ot.getMeta(historyKey).redo?new HistoryState(s.done.addTransform(d,void 0,b,mustPreserveItems(e)),s.undone,rangesFor(d.mapping.maps),s.prevTime,s.prevComposition):new HistoryState(s.done,s.undone.addTransform(d,void 0,b,mustPreserveItems(e)),null,s.prevTime,s.prevComposition);if(d.getMeta("addToHistory")!==!1&&!(ot&&ot.getMeta("addToHistory")===!1)){let ht=d.getMeta("composition"),mt=s.prevTime==0||!ot&&s.prevComposition!=ht&&(s.prevTime<(d.time||0)-b.newGroupDelay||!isAdjacentTo(d,s.prevRanges)),gt=ot?mapRanges(s.prevRanges,d.mapping):rangesFor(d.mapping.maps);return new HistoryState(s.done.addTransform(d,mt?e.selection.getBookmark():void 0,b,mustPreserveItems(e)),Branch.empty,gt,d.time,ht??s.prevComposition)}else return(nt=d.getMeta("rebased"))?new HistoryState(s.done.rebased(d,nt),s.undone.rebased(d,nt),mapRanges(s.prevRanges,d.mapping),s.prevTime,s.prevComposition):new HistoryState(s.done.addMaps(d.mapping.maps),s.undone.addMaps(d.mapping.maps),mapRanges(s.prevRanges,d.mapping),s.prevTime,s.prevComposition)}function isAdjacentTo(s,e){if(!e)return!1;if(!s.docChanged)return!0;let d=!1;return s.mapping.maps[0].forEach((b,tt)=>{for(let nt=0;nt<e.length;nt+=2)b<=e[nt+1]&&tt>=e[nt]&&(d=!0)}),d}function rangesFor(s){let e=[];for(let d=s.length-1;d>=0&&e.length==0;d--)s[d].forEach((b,tt,nt,ot)=>e.push(nt,ot));return e}function mapRanges(s,e){if(!s)return null;let d=[];for(let b=0;b<s.length;b+=2){let tt=e.map(s[b],1),nt=e.map(s[b+1],-1);tt<=nt&&d.push(tt,nt)}return d}function histTransaction(s,e,d){let b=mustPreserveItems(e),tt=historyKey.get(e).spec.config,nt=(d?s.undone:s.done).popEvent(e,b);if(!nt)return null;let ot=nt.selection.resolve(nt.transform.doc),ht=(d?s.done:s.undone).addTransform(nt.transform,e.selection.getBookmark(),tt,b),mt=new HistoryState(d?ht:nt.remaining,d?nt.remaining:ht,null,0,-1);return nt.transform.setSelection(ot).setMeta(historyKey,{redo:d,historyState:mt})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(s){let e=s.plugins;if(cachedPreserveItemsPlugins!=e){cachedPreserveItems=!1,cachedPreserveItemsPlugins=e;for(let d=0;d<e.length;d++)if(e[d].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(s={}){return s={depth:s.depth||100,newGroupDelay:s.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(e,d,b){return applyTransaction(d,b,e,s)}},config:s,props:{handleDOMEvents:{beforeinput(e,d){let b=d.inputType,tt=b=="historyUndo"?undo:b=="historyRedo"?redo:null;return tt?(d.preventDefault(),tt(e.state,e.dispatch)):!1}}}})}function buildCommand(s,e){return(d,b)=>{let tt=historyKey.getState(d);if(!tt||(s?tt.undone:tt.done).eventCount==0)return!1;if(b){let nt=histTransaction(tt,d,s);nt&&b(e?nt.scrollIntoView():nt)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0),History=Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:s,dispatch:e})=>undo(s,e),redo:()=>({state:s,dispatch:e})=>redo(s,e)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),HorizontalRule=Node$2.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:s}){return["hr",mergeAttributes(this.options.HTMLAttributes,s)]},addCommands(){return{setHorizontalRule:()=>({chain:s,state:e})=>{const{selection:d}=e,{$from:b,$to:tt}=d,nt=s();return b.parentOffset===0?nt.insertContentAt({from:Math.max(b.pos-1,0),to:tt.pos},{type:this.name}):isNodeSelection(d)?nt.insertContentAt(tt.pos,{type:this.name}):nt.insertContent({type:this.name}),nt.command(({tr:ot,dispatch:ht})=>{var mt;if(ht){const{$to:gt}=ot.selection,yt=gt.end();if(gt.nodeAfter)gt.nodeAfter.isTextblock?ot.setSelection(TextSelection.create(ot.doc,gt.pos+1)):gt.nodeAfter.isBlock?ot.setSelection(NodeSelection.create(ot.doc,gt.pos)):ot.setSelection(TextSelection.create(ot.doc,gt.pos));else{const ft=(mt=gt.parent.type.contentMatch.defaultType)===null||mt===void 0?void 0:mt.create();ft&&(ot.insert(yt,ft),ot.setSelection(TextSelection.create(ot.doc,yt+1)))}ot.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:s=>s.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:s}){return["em",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setItalic:()=>({commands:s})=>s.setMark(this.name),toggleItalic:()=>({commands:s})=>s.toggleMark(this.name),unsetItalic:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),ListItem$1=Node$2.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:s}){return["li",mergeAttributes(this.options.HTMLAttributes,s),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ListItem=Node$2.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:s}){return["li",mergeAttributes(this.options.HTMLAttributes,s),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TextStyle=Mark.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:s=>s.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:s}){return["span",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:s,commands:e})=>{const d=getMarkAttributes(s,this.type);return Object.entries(d).some(([,tt])=>!!tt)?!0:e.unsetMark(this.name)}}}}),inputRegex$2=/^(\d+)\.\s$/,OrderedList=Node$2.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:s=>s.hasAttribute("start")?parseInt(s.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:s}){const{start:e,...d}=s;return e===1?["ol",mergeAttributes(this.options.HTMLAttributes,d),0]:["ol",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{toggleOrderedList:()=>({commands:s,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem.name,this.editor.getAttributes(TextStyle.name)).run():s.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let s=wrappingInputRule({find:inputRegex$2,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,d)=>d.childCount+d.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(s=wrappingInputRule({find:inputRegex$2,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(TextStyle.name)}),joinPredicate:(e,d)=>d.childCount+d.attrs.start===+e[1],editor:this.editor})),[s]}}),Paragraph=Node$2.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:s}){return["p",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setParagraph:()=>({commands:s})=>s.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:s=>s.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:s}){return["s",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setStrike:()=>({commands:s})=>s.setMark(this.name),toggleStrike:()=>({commands:s})=>s.toggleMark(this.name),unsetStrike:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),Text=Node$2.create({name:"text",group:"inline"}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var s,e,d,b,tt,nt,ot,ht,mt,gt,yt,ft,st,bt,vt,xt,wt,St;const _t=[];return this.options.bold!==!1&&_t.push(Bold.configure((s=this.options)===null||s===void 0?void 0:s.bold)),this.options.blockquote!==!1&&_t.push(Blockquote.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&_t.push(BulletList.configure((d=this.options)===null||d===void 0?void 0:d.bulletList)),this.options.code!==!1&&_t.push(Code.configure((b=this.options)===null||b===void 0?void 0:b.code)),this.options.codeBlock!==!1&&_t.push(CodeBlock.configure((tt=this.options)===null||tt===void 0?void 0:tt.codeBlock)),this.options.document!==!1&&_t.push(Document.configure((nt=this.options)===null||nt===void 0?void 0:nt.document)),this.options.dropcursor!==!1&&_t.push(Dropcursor.configure((ot=this.options)===null||ot===void 0?void 0:ot.dropcursor)),this.options.gapcursor!==!1&&_t.push(Gapcursor.configure((ht=this.options)===null||ht===void 0?void 0:ht.gapcursor)),this.options.hardBreak!==!1&&_t.push(HardBreak.configure((mt=this.options)===null||mt===void 0?void 0:mt.hardBreak)),this.options.heading!==!1&&_t.push(Heading.configure((gt=this.options)===null||gt===void 0?void 0:gt.heading)),this.options.history!==!1&&_t.push(History.configure((yt=this.options)===null||yt===void 0?void 0:yt.history)),this.options.horizontalRule!==!1&&_t.push(HorizontalRule.configure((ft=this.options)===null||ft===void 0?void 0:ft.horizontalRule)),this.options.italic!==!1&&_t.push(Italic.configure((st=this.options)===null||st===void 0?void 0:st.italic)),this.options.listItem!==!1&&_t.push(ListItem$1.configure((bt=this.options)===null||bt===void 0?void 0:bt.listItem)),this.options.orderedList!==!1&&_t.push(OrderedList.configure((vt=this.options)===null||vt===void 0?void 0:vt.orderedList)),this.options.paragraph!==!1&&_t.push(Paragraph.configure((xt=this.options)===null||xt===void 0?void 0:xt.paragraph)),this.options.strike!==!1&&_t.push(Strike.configure((wt=this.options)===null||wt===void 0?void 0:wt.strike)),this.options.text!==!1&&_t.push(Text.configure((St=this.options)===null||St===void 0?void 0:St.text)),_t}}),inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$1=Node$2.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:s}){return["img",mergeAttributes(this.options.HTMLAttributes,s)]},addCommands(){return{setImage:s=>({commands:e})=>e.insertContent({type:this.name,attrs:s})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:s=>{const[,,e,d,b]=s;return{src:d,alt:e,title:b}}})]}}),Placeholder=Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:s,selection:e})=>{const d=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:b}=e,tt=[];if(!d)return null;const nt=this.editor.isEmpty;return s.descendants((ot,ht)=>{const mt=b>=ht&&b<=ht+ot.nodeSize,gt=!ot.isLeaf&&isNodeEmpty(ot);if((mt||!this.options.showOnlyCurrent)&&gt){const yt=[this.options.emptyNodeClass];nt&&yt.push(this.options.emptyEditorClass);const ft=Decoration.node(ht,ht+ot.nodeSize,{class:yt.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:ot,pos:ht,hasAnchor:mt}):this.options.placeholder});tt.push(ft)}return this.options.includeChildren}),DecorationSet.create(s,tt)}}})]}});function _defineProperty$2(s,e,d){return e in s?Object.defineProperty(s,e,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[e]=d,s}function ownKeys$2(s,e){var d=Object.keys(s);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(s);e&&(b=b.filter(function(tt){return Object.getOwnPropertyDescriptor(s,tt).enumerable})),d.push.apply(d,b)}return d}function _objectSpread2$1(s){for(var e=1;e<arguments.length;e++){var d=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$2(Object(d),!0).forEach(function(b){_defineProperty$2(s,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(d)):ownKeys$2(Object(d)).forEach(function(b){Object.defineProperty(s,b,Object.getOwnPropertyDescriptor(d,b))})}return s}function _objectWithoutPropertiesLoose$2(s,e){if(s==null)return{};var d={},b=Object.keys(s),tt,nt;for(nt=0;nt<b.length;nt++)tt=b[nt],!(e.indexOf(tt)>=0)&&(d[tt]=s[tt]);return d}function _objectWithoutProperties$1(s,e){if(s==null)return{};var d=_objectWithoutPropertiesLoose$2(s,e),b,tt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(s);for(tt=0;tt<nt.length;tt++)b=nt[tt],!(e.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(s,b)&&(d[b]=s[b])}return d}function _slicedToArray(s,e){return _arrayWithHoles(s)||_iterableToArrayLimit(s,e)||_unsupportedIterableToArray(s,e)||_nonIterableRest()}function _arrayWithHoles(s){if(Array.isArray(s))return s}function _iterableToArrayLimit(s,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(s)))){var d=[],b=!0,tt=!1,nt=void 0;try{for(var ot=s[Symbol.iterator](),ht;!(b=(ht=ot.next()).done)&&(d.push(ht.value),!(e&&d.length===e));b=!0);}catch(mt){tt=!0,nt=mt}finally{try{!b&&ot.return!=null&&ot.return()}finally{if(tt)throw nt}}return d}}function _unsupportedIterableToArray(s,e){if(s){if(typeof s=="string")return _arrayLikeToArray(s,e);var d=Object.prototype.toString.call(s).slice(8,-1);if(d==="Object"&&s.constructor&&(d=s.constructor.name),d==="Map"||d==="Set")return Array.from(s);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return _arrayLikeToArray(s,e)}}function _arrayLikeToArray(s,e){(e==null||e>s.length)&&(e=s.length);for(var d=0,b=new Array(e);d<e;d++)b[d]=s[d];return b}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _defineProperty$1(s,e,d){return e in s?Object.defineProperty(s,e,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[e]=d,s}function ownKeys$1(s,e){var d=Object.keys(s);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(s);e&&(b=b.filter(function(tt){return Object.getOwnPropertyDescriptor(s,tt).enumerable})),d.push.apply(d,b)}return d}function _objectSpread2(s){for(var e=1;e<arguments.length;e++){var d=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(d),!0).forEach(function(b){_defineProperty$1(s,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(d)):ownKeys$1(Object(d)).forEach(function(b){Object.defineProperty(s,b,Object.getOwnPropertyDescriptor(d,b))})}return s}function compose$1(){for(var s=arguments.length,e=new Array(s),d=0;d<s;d++)e[d]=arguments[d];return function(b){return e.reduceRight(function(tt,nt){return nt(tt)},b)}}function curry$1(s){return function e(){for(var d=this,b=arguments.length,tt=new Array(b),nt=0;nt<b;nt++)tt[nt]=arguments[nt];return tt.length>=s.length?s.apply(this,tt):function(){for(var ot=arguments.length,ht=new Array(ot),mt=0;mt<ot;mt++)ht[mt]=arguments[mt];return e.apply(d,[].concat(tt,ht))}}}function isObject$2(s){return{}.toString.call(s).includes("Object")}function isEmpty$1(s){return!Object.keys(s).length}function isFunction$2(s){return typeof s=="function"}function hasOwnProperty(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function validateChanges(s,e){return isObject$2(e)||errorHandler$1("changeType"),Object.keys(e).some(function(d){return!hasOwnProperty(s,d)})&&errorHandler$1("changeField"),e}function validateSelector(s){isFunction$2(s)||errorHandler$1("selectorType")}function validateHandler(s){isFunction$2(s)||isObject$2(s)||errorHandler$1("handlerType"),isObject$2(s)&&Object.values(s).some(function(e){return!isFunction$2(e)})&&errorHandler$1("handlersType")}function validateInitial(s){s||errorHandler$1("initialIsRequired"),isObject$2(s)||errorHandler$1("initialType"),isEmpty$1(s)&&errorHandler$1("initialContent")}function throwError$1(s,e){throw new Error(s[e]||s.default)}var errorMessages$1={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},errorHandler$1=curry$1(throwError$1)(errorMessages$1),validators$1={changes:validateChanges,selector:validateSelector,handler:validateHandler,initial:validateInitial};function create$1(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};validators$1.initial(s),validators$1.handler(e);var d={current:s},b=curry$1(didStateUpdate)(d,e),tt=curry$1(updateState)(d),nt=curry$1(validators$1.changes)(s),ot=curry$1(extractChanges)(d);function ht(){var gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(yt){return yt};return validators$1.selector(gt),gt(d.current)}function mt(gt){compose$1(b,tt,nt,ot)(gt)}return[ht,mt]}function extractChanges(s,e){return isFunction$2(e)?e(s.current):e}function updateState(s,e){return s.current=_objectSpread2(_objectSpread2({},s.current),e),e}function didStateUpdate(s,e,d){return isFunction$2(e)?e(s.current):Object.keys(d).forEach(function(b){var tt;return(tt=e[b])===null||tt===void 0?void 0:tt.call(e,s.current[b])}),d}var index={create:create$1},config$1={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function curry(s){return function e(){for(var d=this,b=arguments.length,tt=new Array(b),nt=0;nt<b;nt++)tt[nt]=arguments[nt];return tt.length>=s.length?s.apply(this,tt):function(){for(var ot=arguments.length,ht=new Array(ot),mt=0;mt<ot;mt++)ht[mt]=arguments[mt];return e.apply(d,[].concat(tt,ht))}}}function isObject$1(s){return{}.toString.call(s).includes("Object")}function validateConfig(s){return s||errorHandler("configIsRequired"),isObject$1(s)||errorHandler("configType"),s.urls?(informAboutDeprecation(),{paths:{vs:s.urls.monacoBase}}):s}function informAboutDeprecation(){console.warn(errorMessages.deprecation)}function throwError(s,e){throw new Error(s[e]||s.default)}var errorMessages={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},errorHandler=curry(throwError)(errorMessages),validators={config:validateConfig},compose=function(){for(var e=arguments.length,d=new Array(e),b=0;b<e;b++)d[b]=arguments[b];return function(tt){return d.reduceRight(function(nt,ot){return ot(nt)},tt)}};function merge$1(s,e){return Object.keys(e).forEach(function(d){e[d]instanceof Object&&s[d]&&Object.assign(e[d],merge$1(s[d],e[d]))}),_objectSpread2$1(_objectSpread2$1({},s),e)}var CANCELATION_MESSAGE={type:"cancelation",msg:"operation is manually canceled"};function makeCancelable(s){var e=!1,d=new Promise(function(b,tt){s.then(function(nt){return e?tt(CANCELATION_MESSAGE):b(nt)}),s.catch(tt)});return d.cancel=function(){return e=!0},d}var _state$create=index.create({config:config$1,isInitialized:!1,resolve:null,reject:null,monaco:null}),_state$create2=_slicedToArray(_state$create,2),getState=_state$create2[0],setState=_state$create2[1];function config(s){var e=validators.config(s),d=e.monaco,b=_objectWithoutProperties$1(e,["monaco"]);setState(function(tt){return{config:merge$1(tt.config,b),monaco:d}})}function init$1(){var s=getState(function(e){var d=e.monaco,b=e.isInitialized,tt=e.resolve;return{monaco:d,isInitialized:b,resolve:tt}});if(!s.isInitialized){if(setState({isInitialized:!0}),s.monaco)return s.resolve(s.monaco),makeCancelable(wrapperPromise);if(window.monaco&&window.monaco.editor)return storeMonacoInstance(window.monaco),s.resolve(window.monaco),makeCancelable(wrapperPromise);compose(injectScripts,getMonacoLoaderScript)(configureLoader)}return makeCancelable(wrapperPromise)}function injectScripts(s){return document.body.appendChild(s)}function createScript(s){var e=document.createElement("script");return s&&(e.src=s),e}function getMonacoLoaderScript(s){var e=getState(function(b){var tt=b.config,nt=b.reject;return{config:tt,reject:nt}}),d=createScript("".concat(e.config.paths.vs,"/loader.js"));return d.onload=function(){return s()},d.onerror=e.reject,d}function configureLoader(){var s=getState(function(d){var b=d.config,tt=d.resolve,nt=d.reject;return{config:b,resolve:tt,reject:nt}}),e=window.require;e.config(s.config),e(["vs/editor/editor.main"],function(d){storeMonacoInstance(d),s.resolve(d)},function(d){s.reject(d)})}function storeMonacoInstance(s){getState().monaco||setState({monaco:s})}function __getMonacoInstance(){return getState(function(s){var e=s.monaco;return e})}var wrapperPromise=new Promise(function(s,e){return setState({resolve:s,reject:e})}),loader={config,init:init$1,__getMonacoInstance},le$1={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},v$1=le$1,ae$1={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Y$1=ae$1;function Me$1({children:s}){return React.createElement("div",{style:Y$1.container},s)}var Z$1=Me$1,$$1=Z$1;function Ee$1({width:s,height:e,isEditorReady:d,loading:b,_ref:tt,className:nt,wrapperProps:ot}){return React.createElement("section",{style:{...v$1.wrapper,width:s,height:e},...ot},!d&&React.createElement($$1,null,b),React.createElement("div",{ref:tt,style:{...v$1.fullWidth,...!d&&v$1.hide},className:nt}))}var ee$1=Ee$1,H$1=reactExports.memo(ee$1);function Ce$1(s){reactExports.useEffect(s,[])}var k$1=Ce$1;function he$1(s,e,d=!0){let b=reactExports.useRef(!0);reactExports.useEffect(b.current||!d?()=>{b.current=!1}:s,e)}var l=he$1;function D$2(){}function h(s,e,d,b){return De$1(s,b)||be$1(s,e,d,b)}function De$1(s,e){return s.editor.getModel(te$1(s,e))}function be$1(s,e,d,b){return s.editor.createModel(e,d,b?te$1(s,b):void 0)}function te$1(s,e){return s.Uri.parse(e)}function Oe$1({original:s,modified:e,language:d,originalLanguage:b,modifiedLanguage:tt,originalModelPath:nt,modifiedModelPath:ot,keepCurrentOriginalModel:ht=!1,keepCurrentModifiedModel:mt=!1,theme:gt="light",loading:yt="Loading...",options:ft={},height:st="100%",width:bt="100%",className:vt,wrapperProps:xt={},beforeMount:wt=D$2,onMount:St=D$2}){let[_t,Tt]=reactExports.useState(!1),[Et,kt]=reactExports.useState(!0),Mt=reactExports.useRef(null),Ot=reactExports.useRef(null),Dt=reactExports.useRef(null),At=reactExports.useRef(St),It=reactExports.useRef(wt),jt=reactExports.useRef(!1);k$1(()=>{let Wt=loader.init();return Wt.then(Lt=>(Ot.current=Lt)&&kt(!1)).catch(Lt=>(Lt==null?void 0:Lt.type)!=="cancelation"&&console.error("Monaco initialization: error:",Lt)),()=>Mt.current?Bt():Wt.cancel()}),l(()=>{if(Mt.current&&Ot.current){let Wt=Mt.current.getOriginalEditor(),Lt=h(Ot.current,s||"",b||d||"text",nt||"");Lt!==Wt.getModel()&&Wt.setModel(Lt)}},[nt],_t),l(()=>{if(Mt.current&&Ot.current){let Wt=Mt.current.getModifiedEditor(),Lt=h(Ot.current,e||"",tt||d||"text",ot||"");Lt!==Wt.getModel()&&Wt.setModel(Lt)}},[ot],_t),l(()=>{let Wt=Mt.current.getModifiedEditor();Wt.getOption(Ot.current.editor.EditorOption.readOnly)?Wt.setValue(e||""):e!==Wt.getValue()&&(Wt.executeEdits("",[{range:Wt.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),Wt.pushUndoStop())},[e],_t),l(()=>{var Wt,Lt;(Lt=(Wt=Mt.current)==null?void 0:Wt.getModel())==null||Lt.original.setValue(s||"")},[s],_t),l(()=>{let{original:Wt,modified:Lt}=Mt.current.getModel();Ot.current.editor.setModelLanguage(Wt,b||d||"text"),Ot.current.editor.setModelLanguage(Lt,tt||d||"text")},[d,b,tt],_t),l(()=>{var Wt;(Wt=Ot.current)==null||Wt.editor.setTheme(gt)},[gt],_t),l(()=>{var Wt;(Wt=Mt.current)==null||Wt.updateOptions(ft)},[ft],_t);let qt=reactExports.useCallback(()=>{var Ut;if(!Ot.current)return;It.current(Ot.current);let Wt=h(Ot.current,s||"",b||d||"text",nt||""),Lt=h(Ot.current,e||"",tt||d||"text",ot||"");(Ut=Mt.current)==null||Ut.setModel({original:Wt,modified:Lt})},[d,e,tt,s,b,nt,ot]),Jt=reactExports.useCallback(()=>{var Wt;!jt.current&&Dt.current&&(Mt.current=Ot.current.editor.createDiffEditor(Dt.current,{automaticLayout:!0,...ft}),qt(),(Wt=Ot.current)==null||Wt.editor.setTheme(gt),Tt(!0),jt.current=!0)},[ft,gt,qt]);reactExports.useEffect(()=>{_t&&At.current(Mt.current,Ot.current)},[_t]),reactExports.useEffect(()=>{!Et&&!_t&&Jt()},[Et,_t,Jt]);function Bt(){var Lt,Ut,tn,Kt;let Wt=(Lt=Mt.current)==null?void 0:Lt.getModel();ht||((Ut=Wt==null?void 0:Wt.original)==null||Ut.dispose()),mt||((tn=Wt==null?void 0:Wt.modified)==null||tn.dispose()),(Kt=Mt.current)==null||Kt.dispose()}return React.createElement(H$1,{width:bt,height:st,isEditorReady:_t,loading:yt,_ref:Dt,className:vt,wrapperProps:xt})}var ie$1=Oe$1;reactExports.memo(ie$1);function He$1(s){let e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=s},[s]),e.current}var se$1=He$1,_$1=new Map;function Ve$1({defaultValue:s,defaultLanguage:e,defaultPath:d,value:b,language:tt,path:nt,theme:ot="light",line:ht,loading:mt="Loading...",options:gt={},overrideServices:yt={},saveViewState:ft=!0,keepCurrentModel:st=!1,width:bt="100%",height:vt="100%",className:xt,wrapperProps:wt={},beforeMount:St=D$2,onMount:_t=D$2,onChange:Tt,onValidate:Et=D$2}){let[kt,Mt]=reactExports.useState(!1),[Ot,Dt]=reactExports.useState(!0),At=reactExports.useRef(null),It=reactExports.useRef(null),jt=reactExports.useRef(null),qt=reactExports.useRef(_t),Jt=reactExports.useRef(St),Bt=reactExports.useRef(),Wt=reactExports.useRef(b),Lt=se$1(nt),Ut=reactExports.useRef(!1),tn=reactExports.useRef(!1);k$1(()=>{let ln=loader.init();return ln.then(hn=>(At.current=hn)&&Dt(!1)).catch(hn=>(hn==null?void 0:hn.type)!=="cancelation"&&console.error("Monaco initialization: error:",hn)),()=>It.current?an():ln.cancel()}),l(()=>{var hn,kn,Zt,xn;let ln=h(At.current,s||b||"",e||tt||"",nt||d||"");ln!==((hn=It.current)==null?void 0:hn.getModel())&&(ft&&_$1.set(Lt,(kn=It.current)==null?void 0:kn.saveViewState()),(Zt=It.current)==null||Zt.setModel(ln),ft&&((xn=It.current)==null||xn.restoreViewState(_$1.get(nt))))},[nt],kt),l(()=>{var ln;(ln=It.current)==null||ln.updateOptions(gt)},[gt],kt),l(()=>{!It.current||b===void 0||(It.current.getOption(At.current.editor.EditorOption.readOnly)?It.current.setValue(b):b!==It.current.getValue()&&(tn.current=!0,It.current.executeEdits("",[{range:It.current.getModel().getFullModelRange(),text:b,forceMoveMarkers:!0}]),It.current.pushUndoStop(),tn.current=!1))},[b],kt),l(()=>{var hn,kn;let ln=(hn=It.current)==null?void 0:hn.getModel();ln&&tt&&((kn=At.current)==null||kn.editor.setModelLanguage(ln,tt))},[tt],kt),l(()=>{var ln;ht!==void 0&&((ln=It.current)==null||ln.revealLine(ht))},[ht],kt),l(()=>{var ln;(ln=At.current)==null||ln.editor.setTheme(ot)},[ot],kt);let Kt=reactExports.useCallback(()=>{var ln;if(!(!jt.current||!At.current)&&!Ut.current){Jt.current(At.current);let hn=nt||d,kn=h(At.current,b||s||"",e||tt||"",hn||"");It.current=(ln=At.current)==null?void 0:ln.editor.create(jt.current,{model:kn,automaticLayout:!0,...gt},yt),ft&&It.current.restoreViewState(_$1.get(hn)),At.current.editor.setTheme(ot),ht!==void 0&&It.current.revealLine(ht),Mt(!0),Ut.current=!0}},[s,e,d,b,tt,nt,gt,yt,ft,ot,ht]);reactExports.useEffect(()=>{kt&&qt.current(It.current,At.current)},[kt]),reactExports.useEffect(()=>{!Ot&&!kt&&Kt()},[Ot,kt,Kt]),Wt.current=b,reactExports.useEffect(()=>{var ln,hn;kt&&Tt&&((ln=Bt.current)==null||ln.dispose(),Bt.current=(hn=It.current)==null?void 0:hn.onDidChangeModelContent(kn=>{tn.current||Tt(It.current.getValue(),kn)}))},[kt,Tt]),reactExports.useEffect(()=>{if(kt){let ln=At.current.editor.onDidChangeMarkers(hn=>{var Zt;let kn=(Zt=It.current.getModel())==null?void 0:Zt.uri;if(kn&&hn.find(xn=>xn.path===kn.path)){let xn=At.current.editor.getModelMarkers({resource:kn});Et==null||Et(xn)}});return()=>{ln==null||ln.dispose()}}return()=>{}},[kt,Et]);function an(){var ln,hn;(ln=Bt.current)==null||ln.dispose(),st?ft&&_$1.set(nt,It.current.saveViewState()):(hn=It.current.getModel())==null||hn.dispose(),It.current.dispose()}return React.createElement(H$1,{width:bt,height:vt,isEditorReady:kt,loading:mt,_ref:jt,className:xt,wrapperProps:wt})}var fe$1=Ve$1,de=reactExports.memo(fe$1),Ft=de;const latexMonarchDefinition={displayName:"Latex",name:"latex",mimeTypes:["text/latex","text/tex"],fileExtensions:["tex","sty","cls"],lineComment:"% ",builtin:["addcontentsline","addtocontents","addtocounter","address","addtolength","addvspace","alph","appendix","arabic","author","backslash","baselineskip","baselinestretch","bf","bibitem","bigskipamount","bigskip","boldmath","boldsymbol","cal","caption","cdots","centering","chapter","circle","cite","cleardoublepage","clearpage","cline","closing","color","copyright","dashbox","date","ddots","documentclass","dotfill","em","emph","ensuremath","epigraph","euro","fbox","flushbottom","fnsymbol","footnote","footnotemark","footnotesize","footnotetext","frac","frame","framebox","frenchspacing","hfill","hline","href","hrulefill","hspace","huge","Huge","hyphenation","include","includegraphics","includeonly","indent","input","it","item","kill","label","large","Large","LARGE","LaTeX","LaTeXe","ldots","left","lefteqn","line","linebreak","linethickness","linewidth","listoffigures","listoftables","location","makebox","maketitle","markboth","mathcal","mathop","mbox","medskip","multicolumn","multiput","newcommand","newcolumntype","newcounter","newenvironment","newfont","newlength","newline","newpage","newsavebox","newtheorem","nocite","noindent","nolinebreak","nonfrenchspacing","normalsize","nopagebreak","not","onecolumn","opening","oval","overbrace","overline","pagebreak","pagenumbering","pageref","pagestyle","par","paragraph","parbox","parindent","parskip","part","protect","providecommand","put","raggedbottom","raggedleft","raggedright","raisebox","ref","renewcommand","right","rm","roman","rule","savebox","sbox","sc","scriptsize","section","setcounter","setlength","settowidth","sf","shortstack","signature","sl","slash","small","smallskip","sout","space","sqrt","stackrel","stepcounter","subparagraph","subsection","subsubsection","tableofcontents","telephone","TeX","textbf","textcolor","textit","textmd","textnormal","textrm","textsc","textsf","textsl","texttt","textup","textwidth","textheight","thanks","thispagestyle","tiny","title","today","tt","twocolumn","typeout","typein","uline","underbrace","underline","unitlength","usebox","usecounter","uwave","value","vbox","vcenter","vdots","vector","verb","vfill","vline","vphantom","vspace","RequirePackage","NeedsTeXFormat","usepackage","input","include","documentclass","documentstyle","def","edef","defcommand","if","ifdim","ifnum","ifx","fi","else","begingroup","endgroup","definecolor","textcolor","color","eifstrequal","eeifstrequal"],tokenizer:{root:[["(\\\\begin)(\\s*)(\\{)([\\w\\-\\*\\@]+)(\\})",["keyword.predefined","white","@brackets",{token:"tag.env-$4",bracket:"@open"},"@brackets"]],["(\\\\end)(\\s*)(\\{)([\\w\\-\\*\\@]+)(\\})",["keyword.predefined","white","@brackets",{token:"tag.env-$4",bracket:"@close"},"@brackets"]],["\\\\[^a-zA-Z@]","keyword"],["\\@[a-zA-Z@]+","keyword.at"],["\\\\([a-zA-Z@]+)",{cases:{"$1@builtin":"keyword.predefined","@default":"keyword"}}],{include:"@whitespace"},["[{}()\\[\\]]","@brackets"],["#+\\d","number.arg"],["\\-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\s*(?:em|ex|pt|pc|sp|cm|mm|in)","number.len"]],whitespace:[["[ \\t\\r\\n]+","white"],["%.*$","comment"]]}},MonacoTipTap=({value:s,onChange:e,readOnly:d,mode:b="python"})=>{const[tt,nt]=reactExports.useState(getDefaultHeight(s)),ot=reactExports.useRef(null),ht=reactExports.useRef(null),mt=(ft,st)=>{ot.current=st,ht.current=ft,yt(ft,st),st.languages.register({id:"latex"}),st.languages.setMonarchTokensProvider("latex",latexMonarchDefinition)},gt=ft=>{e(ft),yt(ht.current,ot.current)},yt=(ft,st)=>{var wt;const bt=((wt=ft.getModel())==null?void 0:wt.getLineCount())||1,vt=ft.getOption(st.editor.EditorOption.lineHeight),xt=bt*vt;nt(`${xt+5}px`)};return jsxRuntimeExports.jsx(Ft,{width:"100%",height:tt,value:s,onChange:gt,defaultLanguage:b,options:{readOnly:d,fontSize:14,padding:"0",scrollBeyondLastColomn:!1,scrollBeyondLastLine:!1,lineNumbersMinChars:2,scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1},minimap:{enabled:!1}},onMount:mt})};function getDefaultHeight(s){return`${s.split(`
`).length*20+5}px`}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$1=["attr","size","title"];function _objectWithoutProperties(s,e){if(s==null)return{};var d=_objectWithoutPropertiesLoose$1(s,e),b,tt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(s);for(tt=0;tt<nt.length;tt++)b=nt[tt],!(e.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(s,b)&&(d[b]=s[b])}return d}function _objectWithoutPropertiesLoose$1(s,e){if(s==null)return{};var d={};for(var b in s)if(Object.prototype.hasOwnProperty.call(s,b)){if(e.indexOf(b)>=0)continue;d[b]=s[b]}return d}function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var d=arguments[e];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(s[b]=d[b])}return s},_extends.apply(this,arguments)}function ownKeys(s,e){var d=Object.keys(s);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(s);e&&(b=b.filter(function(tt){return Object.getOwnPropertyDescriptor(s,tt).enumerable})),d.push.apply(d,b)}return d}function _objectSpread(s){for(var e=1;e<arguments.length;e++){var d=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(d),!0).forEach(function(b){_defineProperty(s,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(d)):ownKeys(Object(d)).forEach(function(b){Object.defineProperty(s,b,Object.getOwnPropertyDescriptor(d,b))})}return s}function _defineProperty(s,e,d){return e=_toPropertyKey(e),e in s?Object.defineProperty(s,e,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[e]=d,s}function _toPropertyKey(s){var e=_toPrimitive(s,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(s,e){if(typeof s!="object"||!s)return s;var d=s[Symbol.toPrimitive];if(d!==void 0){var b=d.call(s,e||"default");if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function Tree2Element(s){return s&&s.map((e,d)=>React.createElement(e.tag,_objectSpread({key:d},e.attr),Tree2Element(e.child)))}function GenIcon(s){return e=>React.createElement(IconBase,_extends({attr:_objectSpread({},s.attr)},e),Tree2Element(s.child))}function IconBase(s){var e=d=>{var{attr:b,size:tt,title:nt}=s,ot=_objectWithoutProperties(s,_excluded$1),ht=tt||d.size||"1em",mt;return d.className&&(mt=d.className),s.className&&(mt=(mt?mt+" ":"")+s.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},d.attr,b,ot,{className:mt,style:_objectSpread(_objectSpread({color:s.color||d.color},d.style),s.style),height:ht,width:ht,xmlns:"http://www.w3.org/2000/svg"}),nt&&React.createElement("title",null,nt),s.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,d=>e(d)):e(DefaultContext)}function FaPython(s){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"},child:[]}]})(s)}function FaAlignCenter(s){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM108.1 96h231.81A12.09 12.09 0 0 0 352 83.9V44.09A12.09 12.09 0 0 0 339.91 32H108.1A12.09 12.09 0 0 0 96 44.09V83.9A12.1 12.1 0 0 0 108.1 96zm231.81 256A12.09 12.09 0 0 0 352 339.9v-39.81A12.09 12.09 0 0 0 339.91 288H108.1A12.09 12.09 0 0 0 96 300.09v39.81a12.1 12.1 0 0 0 12.1 12.1z"},child:[]}]})(s)}function FaHeading(s){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 96v320h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H320a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V288H160v128h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V96H32a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16h-32v128h192V96h-32a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16z"},child:[]}]})(s)}function FaImage(s){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"},child:[]}]})(s)}function FaPlay(s){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(s)}function FaSquareRootAlt(s){return GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M571.31 251.31l-22.62-22.62c-6.25-6.25-16.38-6.25-22.63 0L480 274.75l-46.06-46.06c-6.25-6.25-16.38-6.25-22.63 0l-22.62 22.62c-6.25 6.25-6.25 16.38 0 22.63L434.75 320l-46.06 46.06c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L480 365.25l46.06 46.06c6.25 6.25 16.38 6.25 22.63 0l22.62-22.62c6.25-6.25 6.25-16.38 0-22.63L525.25 320l46.06-46.06c6.25-6.25 6.25-16.38 0-22.63zM552 0H307.65c-14.54 0-27.26 9.8-30.95 23.87l-84.79 322.8-58.41-106.1A32.008 32.008 0 0 0 105.47 224H24c-13.25 0-24 10.74-24 24v48c0 13.25 10.75 24 24 24h43.62l88.88 163.73C168.99 503.5 186.3 512 204.94 512c17.27 0 44.44-9 54.28-41.48L357.03 96H552c13.25 0 24-10.75 24-24V24c0-13.26-10.75-24-24-24z"},child:[]}]})(s)}function FaStop(s){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"},child:[]}]})(s)}function FaTerminal(s){return GenIcon({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M257.981 272.971L63.638 467.314c-9.373 9.373-24.569 9.373-33.941 0L7.029 444.647c-9.357-9.357-9.375-24.522-.04-33.901L161.011 256 6.99 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L257.981 239.03c9.373 9.372 9.373 24.568 0 33.941zM640 456v-32c0-13.255-10.745-24-24-24H312c-13.255 0-24 10.745-24 24v32c0 13.255 10.745 24 24 24h304c13.255 0 24-10.745 24-24z"},child:[]}]})(s)}function FaTimes(s){return GenIcon({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}var __assign$1=function(){return __assign$1=Object.assign||function(e){for(var d,b=1,tt=arguments.length;b<tt;b++){d=arguments[b];for(var nt in d)Object.prototype.hasOwnProperty.call(d,nt)&&(e[nt]=d[nt])}return e},__assign$1.apply(this,arguments)};function __spreadArray(s,e,d){if(d||arguments.length===2)for(var b=0,tt=e.length,nt;b<tt;b++)(nt||!(b in e))&&(nt||(nt=Array.prototype.slice.call(e,0,b)),nt[b]=e[b]);return s.concat(nt||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from$1=String.fromCharCode,assign=Object.assign;function hash(s,e){return charat(s,0)^45?(((e<<2^charat(s,0))<<2^charat(s,1))<<2^charat(s,2))<<2^charat(s,3):0}function trim(s){return s.trim()}function match(s,e){return(s=e.exec(s))?s[0]:s}function replace(s,e,d){return s.replace(e,d)}function indexof(s,e,d){return s.indexOf(e,d)}function charat(s,e){return s.charCodeAt(e)|0}function substr(s,e,d){return s.slice(e,d)}function strlen(s){return s.length}function sizeof(s){return s.length}function append(s,e){return e.push(s),s}function combine(s,e){return s.map(e).join("")}function filter$1(s,e){return s.filter(function(d){return!match(d,e)})}var line=1,column=1,length=0,position=0,character=0,characters="";function node(s,e,d,b,tt,nt,ot,ht){return{value:s,root:e,parent:d,type:b,props:tt,children:nt,line,column,length:ot,return:"",siblings:ht}}function copy(s,e){return assign(node("",null,null,"",null,null,0,s.siblings),s,{length:-s.length},e)}function lift(s){for(;s.root;)s=copy(s.root,{children:[s]});append(s,s.siblings)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice$1(s,e){return substr(characters,s,e)}function token(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(s){return line=column=1,length=strlen(characters=s),position=0,[]}function dealloc(s){return characters="",s}function delimit(s){return trim(slice$1(position-1,delimiter$1(s===91?s+2:s===40?s+1:s)))}function whitespace(s){for(;(character=peek())&&character<33;)next();return token(s)>2||token(character)>3?"":" "}function escaping(s,e){for(;--e&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(s,caret()+(e<6&&peek()==32&&next()==32))}function delimiter$1(s){for(;next();)switch(character){case s:return position;case 34:case 39:s!==34&&s!==39&&delimiter$1(character);break;case 40:s===41&&delimiter$1(s);break;case 92:next();break}return position}function commenter(s,e){for(;next()&&s+character!==57;)if(s+character===84&&peek()===47)break;return"/*"+slice$1(e,position-1)+"*"+from$1(s===47?s:next())}function identifier(s){for(;!token(peek());)next();return slice$1(s,position)}function compile(s){return dealloc(parse$1("",null,null,null,[""],s=alloc(s),0,[0],s))}function parse$1(s,e,d,b,tt,nt,ot,ht,mt){for(var gt=0,yt=0,ft=ot,st=0,bt=0,vt=0,xt=1,wt=1,St=1,_t=0,Tt="",Et=tt,kt=nt,Mt=b,Ot=Tt;wt;)switch(vt=_t,_t=next()){case 40:if(vt!=108&&charat(Ot,ft-1)==58){indexof(Ot+=replace(delimit(_t),"&","&\f"),"&\f",abs(gt?ht[gt-1]:0))!=-1&&(St=-1);break}case 34:case 39:case 91:Ot+=delimit(_t);break;case 9:case 10:case 13:case 32:Ot+=whitespace(vt);break;case 92:Ot+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),e,d,mt),mt);break;default:Ot+="/"}break;case 123*xt:ht[gt++]=strlen(Ot)*St;case 125*xt:case 59:case 0:switch(_t){case 0:case 125:wt=0;case 59+yt:St==-1&&(Ot=replace(Ot,/\f/g,"")),bt>0&&strlen(Ot)-ft&&append(bt>32?declaration(Ot+";",b,d,ft-1,mt):declaration(replace(Ot," ","")+";",b,d,ft-2,mt),mt);break;case 59:Ot+=";";default:if(append(Mt=ruleset(Ot,e,d,gt,yt,tt,ht,Tt,Et=[],kt=[],ft,nt),nt),_t===123)if(yt===0)parse$1(Ot,e,Mt,Mt,Et,nt,ft,ht,kt);else switch(st===99&&charat(Ot,3)===110?100:st){case 100:case 108:case 109:case 115:parse$1(s,Mt,Mt,b&&append(ruleset(s,Mt,Mt,0,0,tt,ht,Tt,tt,Et=[],ft,kt),kt),tt,kt,ft,ht,b?Et:kt);break;default:parse$1(Ot,Mt,Mt,Mt,[""],kt,0,ht,kt)}}gt=yt=bt=0,xt=St=1,Tt=Ot="",ft=ot;break;case 58:ft=1+strlen(Ot),bt=vt;default:if(xt<1){if(_t==123)--xt;else if(_t==125&&xt++==0&&prev()==125)continue}switch(Ot+=from$1(_t),_t*xt){case 38:St=yt>0?1:(Ot+="\f",-1);break;case 44:ht[gt++]=(strlen(Ot)-1)*St,St=1;break;case 64:peek()===45&&(Ot+=delimit(next())),st=peek(),yt=ft=strlen(Tt=Ot+=identifier(caret())),_t++;break;case 45:vt===45&&strlen(Ot)==2&&(xt=0)}}return nt}function ruleset(s,e,d,b,tt,nt,ot,ht,mt,gt,yt,ft){for(var st=tt-1,bt=tt===0?nt:[""],vt=sizeof(bt),xt=0,wt=0,St=0;xt<b;++xt)for(var _t=0,Tt=substr(s,st+1,st=abs(wt=ot[xt])),Et=s;_t<vt;++_t)(Et=trim(wt>0?bt[_t]+" "+Tt:replace(Tt,/&\f/g,bt[_t])))&&(mt[St++]=Et);return node(s,e,d,tt===0?RULESET:ht,mt,gt,yt,ft)}function comment(s,e,d,b){return node(s,e,d,COMMENT,from$1(char()),substr(s,2,-2),0,b)}function declaration(s,e,d,b,tt){return node(s,e,d,DECLARATION,substr(s,0,b),substr(s,b+1,-1),b,tt)}function prefix$1(s,e,d){switch(hash(s,e)){case 5103:return WEBKIT+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+s+s;case 4789:return MOZ+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+s+MOZ+s+MS+s+s;case 5936:switch(charat(s,e+11)){case 114:return WEBKIT+s+MS+replace(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return WEBKIT+s+MS+replace(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return WEBKIT+s+MS+replace(s,/[svh]\w+-[tblr]{2}/,"lr")+s}case 6828:case 4268:case 2903:return WEBKIT+s+MS+s+s;case 6165:return WEBKIT+s+MS+"flex-"+s+s;case 5187:return WEBKIT+s+replace(s,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+s;case 5443:return WEBKIT+s+MS+"flex-item-"+replace(s,/flex-|-self/g,"")+(match(s,/flex-|baseline/)?"":MS+"grid-row-"+replace(s,/flex-|-self/g,""))+s;case 4675:return WEBKIT+s+MS+"flex-line-pack"+replace(s,/align-content|flex-|-self/g,"")+s;case 5548:return WEBKIT+s+MS+replace(s,"shrink","negative")+s;case 5292:return WEBKIT+s+MS+replace(s,"basis","preferred-size")+s;case 6060:return WEBKIT+"box-"+replace(s,"-grow","")+WEBKIT+s+MS+replace(s,"grow","positive")+s;case 4554:return WEBKIT+replace(s,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+s;case 6187:return replace(replace(replace(s,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),s,"")+s;case 5495:case 3959:return replace(s,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(s,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+s+s;case 4200:if(!match(s,/flex-|baseline/))return MS+"grid-column-align"+substr(s,e)+s;break;case 2592:case 3360:return MS+replace(s,"template-","")+s;case 4384:case 3616:return d&&d.some(function(b,tt){return e=tt,match(b.props,/grid-\w+-end/)})?~indexof(s+(d=d[e].value),"span",0)?s:MS+replace(s,"-start","")+s+MS+"grid-row-span:"+(~indexof(d,"span",0)?match(d,/\d+/):+match(d,/\d+/)-+match(s,/\d+/))+";":MS+replace(s,"-start","")+s;case 4896:case 4128:return d&&d.some(function(b){return match(b.props,/grid-\w+-start/)})?s:MS+replace(replace(s,"-end","-span"),"span ","")+s;case 4095:case 3583:case 4068:case 2532:return replace(s,/(.+)-inline(.+)/,WEBKIT+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(s)-1-e>6)switch(charat(s,e+1)){case 109:if(charat(s,e+4)!==45)break;case 102:return replace(s,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(s,e+3)==108?"$3":"$2-$3"))+s;case 115:return~indexof(s,"stretch",0)?prefix$1(replace(s,"stretch","fill-available"),e,d)+s:s}break;case 5152:case 5920:return replace(s,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(b,tt,nt,ot,ht,mt,gt){return MS+tt+":"+nt+gt+(ot?MS+tt+"-span:"+(ht?mt:+mt-+nt)+gt:"")+s});case 4949:if(charat(s,e+6)===121)return replace(s,":",":"+WEBKIT)+s;break;case 6444:switch(charat(s,charat(s,14)===45?18:11)){case 120:return replace(s,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(s,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+s;case 100:return replace(s,":",":"+MS)+s}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(s,"scroll-","scroll-snap-")+s}return s}function serialize(s,e){for(var d="",b=0;b<s.length;b++)d+=e(s[b],b,s,e)||"";return d}function stringify$1(s,e,d,b){switch(s.type){case LAYER:if(s.children.length)break;case IMPORT:case DECLARATION:return s.return=s.return||s.value;case COMMENT:return"";case KEYFRAMES:return s.return=s.value+"{"+serialize(s.children,b)+"}";case RULESET:if(!strlen(s.value=s.props.join(",")))return""}return strlen(d=serialize(s.children,b))?s.return=s.value+"{"+d+"}":""}function middleware(s){var e=sizeof(s);return function(d,b,tt,nt){for(var ot="",ht=0;ht<e;ht++)ot+=s[ht](d,b,tt,nt)||"";return ot}}function rulesheet(s){return function(e){e.root||(e=e.return)&&s(e)}}function prefixer(s,e,d,b){if(s.length>-1&&!s.return)switch(s.type){case DECLARATION:s.return=prefix$1(s.value,s.length,d);return;case KEYFRAMES:return serialize([copy(s,{value:replace(s.value,"@","@"+WEBKIT)})],b);case RULESET:if(s.length)return combine(d=s.props,function(tt){switch(match(tt,b=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy(s,{props:[replace(tt,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy(s,{props:[tt]})),assign(s,{props:filter$1(d,b)});break;case"::placeholder":lift(copy(s,{props:[replace(tt,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy(s,{props:[replace(tt,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy(s,{props:[replace(tt,/:(plac\w+)/,MS+"input-$1")]})),lift(copy(s,{props:[tt]})),assign(s,{props:filter$1(d,b)});break}return""})}}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},define_process_env_default$1={},f=typeof process<"u"&&define_process_env_default$1!==void 0&&(define_process_env_default$1.REACT_APP_SC_ATTR||define_process_env_default$1.SC_ATTR)||"data-styled",m="active",y$1="data-styled-version",v="6.1.12",g=`/*!sc*/
`,S$1=typeof window<"u"&&"HTMLElement"in window,w=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default$1!==void 0&&define_process_env_default$1.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default$1.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default$1.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default$1.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default$1!==void 0&&define_process_env_default$1.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default$1.SC_DISABLE_SPEEDY!==""&&define_process_env_default$1.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default$1.SC_DISABLE_SPEEDY),_=Object.freeze([]),C=Object.freeze({});function I(s,e,d){return d===void 0&&(d=C),s.theme!==d.theme&&s.theme||e||d.theme}var A=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),O=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D$1=/(^-|-$)/g;function R(s){return s.replace(O,"-").replace(D$1,"")}var T$1=/(a)(d)/gi,k=52,j=function(s){return String.fromCharCode(s+(s>25?39:97))};function x$1(s){var e,d="";for(e=Math.abs(s);e>k;e=e/k|0)d=j(e%k)+d;return(j(e%k)+d).replace(T$1,"$1-$2")}var V,F=5381,M=function(s,e){for(var d=e.length;d;)s=33*s^e.charCodeAt(--d);return s},z=function(s){return M(F,s)};function $(s){return x$1(z(s)>>>0)}function B(s){return s.displayName||s.name||"Component"}function L(s){return typeof s=="string"&&!0}var G=typeof Symbol=="function"&&Symbol.for,Y=G?Symbol.for("react.memo"):60115,W=G?Symbol.for("react.forward_ref"):60112,q={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},H={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J=((V={})[W]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},V[Y]=U,V);function X(s){return("type"in(e=s)&&e.type.$$typeof)===Y?U:"$$typeof"in s?J[s.$$typeof]:q;var e}var Z=Object.defineProperty,K=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,ee=Object.getOwnPropertyDescriptor,te=Object.getPrototypeOf,ne=Object.prototype;function oe(s,e,d){if(typeof e!="string"){if(ne){var b=te(e);b&&b!==ne&&oe(s,b,d)}var tt=K(e);Q&&(tt=tt.concat(Q(e)));for(var nt=X(s),ot=X(e),ht=0;ht<tt.length;++ht){var mt=tt[ht];if(!(mt in H||d&&d[mt]||ot&&mt in ot||nt&&mt in nt)){var gt=ee(e,mt);try{Z(s,mt,gt)}catch{}}}}return s}function re(s){return typeof s=="function"}function se(s){return typeof s=="object"&&"styledComponentId"in s}function ie(s,e){return s&&e?"".concat(s," ").concat(e):s||e||""}function ae(s,e){if(s.length===0)return"";for(var d=s[0],b=1;b<s.length;b++)d+=s[b];return d}function ce(s){return s!==null&&typeof s=="object"&&s.constructor.name===Object.name&&!("props"in s&&s.$$typeof)}function le(s,e,d){if(d===void 0&&(d=!1),!d&&!ce(s)&&!Array.isArray(s))return e;if(Array.isArray(e))for(var b=0;b<e.length;b++)s[b]=le(s[b],e[b]);else if(ce(e))for(var b in e)s[b]=le(s[b],e[b]);return s}function ue(s,e){Object.defineProperty(s,"toString",{value:e})}function he(s){for(var e=[],d=1;d<arguments.length;d++)e[d-1]=arguments[d];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(s," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var fe=function(){function s(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return s.prototype.indexOfGroup=function(e){for(var d=0,b=0;b<e;b++)d+=this.groupSizes[b];return d},s.prototype.insertRules=function(e,d){if(e>=this.groupSizes.length){for(var b=this.groupSizes,tt=b.length,nt=tt;e>=nt;)if((nt<<=1)<0)throw he(16,"".concat(e));this.groupSizes=new Uint32Array(nt),this.groupSizes.set(b),this.length=nt;for(var ot=tt;ot<nt;ot++)this.groupSizes[ot]=0}for(var ht=this.indexOfGroup(e+1),mt=(ot=0,d.length);ot<mt;ot++)this.tag.insertRule(ht,d[ot])&&(this.groupSizes[e]++,ht++)},s.prototype.clearGroup=function(e){if(e<this.length){var d=this.groupSizes[e],b=this.indexOfGroup(e),tt=b+d;this.groupSizes[e]=0;for(var nt=b;nt<tt;nt++)this.tag.deleteRule(b)}},s.prototype.getGroup=function(e){var d="";if(e>=this.length||this.groupSizes[e]===0)return d;for(var b=this.groupSizes[e],tt=this.indexOfGroup(e),nt=tt+b,ot=tt;ot<nt;ot++)d+="".concat(this.tag.getRule(ot)).concat(g);return d},s}(),ye=new Map,ve=new Map,ge=1,Se=function(s){if(ye.has(s))return ye.get(s);for(;ve.has(ge);)ge++;var e=ge++;return ye.set(s,e),ve.set(e,s),e},we=function(s,e){ge=e+1,ye.set(s,e),ve.set(e,s)},be="style[".concat(f,"][").concat(y$1,'="').concat(v,'"]'),Ee=new RegExp("^".concat(f,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ne=function(s,e,d){for(var b,tt=d.split(","),nt=0,ot=tt.length;nt<ot;nt++)(b=tt[nt])&&s.registerName(e,b)},Pe=function(s,e){for(var d,b=((d=e.textContent)!==null&&d!==void 0?d:"").split(g),tt=[],nt=0,ot=b.length;nt<ot;nt++){var ht=b[nt].trim();if(ht){var mt=ht.match(Ee);if(mt){var gt=0|parseInt(mt[1],10),yt=mt[2];gt!==0&&(we(yt,gt),Ne(s,yt,mt[3]),s.getTag().insertRules(gt,tt)),tt.length=0}else tt.push(ht)}}},_e=function(s){for(var e=document.querySelectorAll(be),d=0,b=e.length;d<b;d++){var tt=e[d];tt&&tt.getAttribute(f)!==m&&(Pe(s,tt),tt.parentNode&&tt.parentNode.removeChild(tt))}};function Ce(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ie=function(s){var e=document.head,d=s||e,b=document.createElement("style"),tt=function(ht){var mt=Array.from(ht.querySelectorAll("style[".concat(f,"]")));return mt[mt.length-1]}(d),nt=tt!==void 0?tt.nextSibling:null;b.setAttribute(f,m),b.setAttribute(y$1,v);var ot=Ce();return ot&&b.setAttribute("nonce",ot),d.insertBefore(b,nt),b},Ae=function(){function s(e){this.element=Ie(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(d){if(d.sheet)return d.sheet;for(var b=document.styleSheets,tt=0,nt=b.length;tt<nt;tt++){var ot=b[tt];if(ot.ownerNode===d)return ot}throw he(17)}(this.element),this.length=0}return s.prototype.insertRule=function(e,d){try{return this.sheet.insertRule(d,e),this.length++,!0}catch{return!1}},s.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},s.prototype.getRule=function(e){var d=this.sheet.cssRules[e];return d&&d.cssText?d.cssText:""},s}(),Oe=function(){function s(e){this.element=Ie(e),this.nodes=this.element.childNodes,this.length=0}return s.prototype.insertRule=function(e,d){if(e<=this.length&&e>=0){var b=document.createTextNode(d);return this.element.insertBefore(b,this.nodes[e]||null),this.length++,!0}return!1},s.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},s.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},s}(),De=function(){function s(e){this.rules=[],this.length=0}return s.prototype.insertRule=function(e,d){return e<=this.length&&(this.rules.splice(e,0,d),this.length++,!0)},s.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},s.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},s}(),Re=S$1,Te={isServer:!S$1,useCSSOMInjection:!w},ke=function(){function s(e,d,b){e===void 0&&(e=C),d===void 0&&(d={});var tt=this;this.options=__assign$1(__assign$1({},Te),e),this.gs=d,this.names=new Map(b),this.server=!!e.isServer,!this.server&&S$1&&Re&&(Re=!1,_e(this)),ue(this,function(){return function(nt){for(var ot=nt.getTag(),ht=ot.length,mt="",gt=function(ft){var st=function(St){return ve.get(St)}(ft);if(st===void 0)return"continue";var bt=nt.names.get(st),vt=ot.getGroup(ft);if(bt===void 0||!bt.size||vt.length===0)return"continue";var xt="".concat(f,".g").concat(ft,'[id="').concat(st,'"]'),wt="";bt!==void 0&&bt.forEach(function(St){St.length>0&&(wt+="".concat(St,","))}),mt+="".concat(vt).concat(xt,'{content:"').concat(wt,'"}').concat(g)},yt=0;yt<ht;yt++)gt(yt);return mt}(tt)})}return s.registerId=function(e){return Se(e)},s.prototype.rehydrate=function(){!this.server&&S$1&&_e(this)},s.prototype.reconstructWithOptions=function(e,d){return d===void 0&&(d=!0),new s(__assign$1(__assign$1({},this.options),e),this.gs,d&&this.names||void 0)},s.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},s.prototype.getTag=function(){return this.tag||(this.tag=(e=function(d){var b=d.useCSSOMInjection,tt=d.target;return d.isServer?new De(tt):b?new Ae(tt):new Oe(tt)}(this.options),new fe(e)));var e},s.prototype.hasNameForId=function(e,d){return this.names.has(e)&&this.names.get(e).has(d)},s.prototype.registerName=function(e,d){if(Se(e),this.names.has(e))this.names.get(e).add(d);else{var b=new Set;b.add(d),this.names.set(e,b)}},s.prototype.insertRules=function(e,d,b){this.registerName(e,d),this.getTag().insertRules(Se(e),b)},s.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},s.prototype.clearRules=function(e){this.getTag().clearGroup(Se(e)),this.clearNames(e)},s.prototype.clearTag=function(){this.tag=void 0},s}(),je=/&/g,xe=/^\s*\/\/.*$/gm;function Ve(s,e){return s.map(function(d){return d.type==="rule"&&(d.value="".concat(e," ").concat(d.value),d.value=d.value.replaceAll(",",",".concat(e," ")),d.props=d.props.map(function(b){return"".concat(e," ").concat(b)})),Array.isArray(d.children)&&d.type!=="@keyframes"&&(d.children=Ve(d.children,e)),d})}function Fe(s){var e,d,b,tt=C,nt=tt.options,ot=nt===void 0?C:nt,ht=tt.plugins,mt=ht===void 0?_:ht,gt=function(st,bt,vt){return vt.startsWith(d)&&vt.endsWith(d)&&vt.replaceAll(d,"").length>0?".".concat(e):st},yt=mt.slice();yt.push(function(st){st.type===RULESET&&st.value.includes("&")&&(st.props[0]=st.props[0].replace(je,d).replace(b,gt))}),ot.prefix&&yt.push(prefixer),yt.push(stringify$1);var ft=function(st,bt,vt,xt){bt===void 0&&(bt=""),vt===void 0&&(vt=""),xt===void 0&&(xt="&"),e=xt,d=bt,b=new RegExp("\\".concat(d,"\\b"),"g");var wt=st.replace(xe,""),St=compile(vt||bt?"".concat(vt," ").concat(bt," { ").concat(wt," }"):wt);ot.namespace&&(St=Ve(St,ot.namespace));var _t=[];return serialize(St,middleware(yt.concat(rulesheet(function(Tt){return _t.push(Tt)})))),_t};return ft.hash=mt.length?mt.reduce(function(st,bt){return bt.name||he(15),M(st,bt.name)},F).toString():"",ft}var Me=new ke,ze=Fe(),$e=React.createContext({shouldForwardProp:void 0,styleSheet:Me,stylis:ze});$e.Consumer;React.createContext(void 0);function Ge(){return reactExports.useContext($e)}var We=function(){function s(e,d){var b=this;this.inject=function(tt,nt){nt===void 0&&(nt=ze);var ot=b.name+nt.hash;tt.hasNameForId(b.id,ot)||tt.insertRules(b.id,ot,nt(b.rules,ot,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=d,ue(this,function(){throw he(12,String(b.name))})}return s.prototype.getName=function(e){return e===void 0&&(e=ze),this.name+e.hash},s}(),qe=function(s){return s>="A"&&s<="Z"};function He(s){for(var e="",d=0;d<s.length;d++){var b=s[d];if(d===1&&b==="-"&&s[0]==="-")return s;qe(b)?e+="-"+b.toLowerCase():e+=b}return e.startsWith("ms-")?"-"+e:e}var Ue=function(s){return s==null||s===!1||s===""},Je=function(s){var e,d,b=[];for(var tt in s){var nt=s[tt];s.hasOwnProperty(tt)&&!Ue(nt)&&(Array.isArray(nt)&&nt.isCss||re(nt)?b.push("".concat(He(tt),":"),nt,";"):ce(nt)?b.push.apply(b,__spreadArray(__spreadArray(["".concat(tt," {")],Je(nt),!1),["}"],!1)):b.push("".concat(He(tt),": ").concat((e=tt,(d=nt)==null||typeof d=="boolean"||d===""?"":typeof d!="number"||d===0||e in unitlessKeys||e.startsWith("--")?String(d).trim():"".concat(d,"px")),";")))}return b};function Xe(s,e,d,b){if(Ue(s))return[];if(se(s))return[".".concat(s.styledComponentId)];if(re(s)){if(!re(nt=s)||nt.prototype&&nt.prototype.isReactComponent||!e)return[s];var tt=s(e);return Xe(tt,e,d,b)}var nt;return s instanceof We?d?(s.inject(d,b),[s.getName(b)]):[s]:ce(s)?Je(s):Array.isArray(s)?Array.prototype.concat.apply(_,s.map(function(ot){return Xe(ot,e,d,b)})):[s.toString()]}function Ze(s){for(var e=0;e<s.length;e+=1){var d=s[e];if(re(d)&&!se(d))return!1}return!0}var Ke=z(v),Qe=function(){function s(e,d,b){this.rules=e,this.staticRulesId="",this.isStatic=(b===void 0||b.isStatic)&&Ze(e),this.componentId=d,this.baseHash=M(Ke,d),this.baseStyle=b,ke.registerId(d)}return s.prototype.generateAndInjectStyles=function(e,d,b){var tt=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,d,b):"";if(this.isStatic&&!b.hash)if(this.staticRulesId&&d.hasNameForId(this.componentId,this.staticRulesId))tt=ie(tt,this.staticRulesId);else{var nt=ae(Xe(this.rules,e,d,b)),ot=x$1(M(this.baseHash,nt)>>>0);if(!d.hasNameForId(this.componentId,ot)){var ht=b(nt,".".concat(ot),void 0,this.componentId);d.insertRules(this.componentId,ot,ht)}tt=ie(tt,ot),this.staticRulesId=ot}else{for(var mt=M(this.baseHash,b.hash),gt="",yt=0;yt<this.rules.length;yt++){var ft=this.rules[yt];if(typeof ft=="string")gt+=ft;else if(ft){var st=ae(Xe(ft,e,d,b));mt=M(mt,st+yt),gt+=st}}if(gt){var bt=x$1(mt>>>0);d.hasNameForId(this.componentId,bt)||d.insertRules(this.componentId,bt,b(gt,".".concat(bt),void 0,this.componentId)),tt=ie(tt,bt)}}return tt},s}(),et=React.createContext(void 0);et.Consumer;var rt={};function it(s,e,d){var b=se(s),tt=s,nt=!L(s),ot=e.attrs,ht=ot===void 0?_:ot,mt=e.componentId,gt=mt===void 0?function(Et,kt){var Mt=typeof Et!="string"?"sc":R(Et);rt[Mt]=(rt[Mt]||0)+1;var Ot="".concat(Mt,"-").concat($(v+Mt+rt[Mt]));return kt?"".concat(kt,"-").concat(Ot):Ot}(e.displayName,e.parentComponentId):mt,yt=e.displayName,ft=yt===void 0?function(Et){return L(Et)?"styled.".concat(Et):"Styled(".concat(B(Et),")")}(s):yt,st=e.displayName&&e.componentId?"".concat(R(e.displayName),"-").concat(e.componentId):e.componentId||gt,bt=b&&tt.attrs?tt.attrs.concat(ht).filter(Boolean):ht,vt=e.shouldForwardProp;if(b&&tt.shouldForwardProp){var xt=tt.shouldForwardProp;if(e.shouldForwardProp){var wt=e.shouldForwardProp;vt=function(Et,kt){return xt(Et,kt)&&wt(Et,kt)}}else vt=xt}var St=new Qe(d,st,b?tt.componentStyle:void 0);function _t(Et,kt){return function(Mt,Ot,Dt){var At=Mt.attrs,It=Mt.componentStyle,jt=Mt.defaultProps,qt=Mt.foldedComponentIds,Jt=Mt.styledComponentId,Bt=Mt.target,Wt=React.useContext(et),Lt=Ge(),Ut=Mt.shouldForwardProp||Lt.shouldForwardProp,tn=I(Ot,Wt,jt)||C,Kt=function(xn,En,Cn){for(var Fn,Vn=__assign$1(__assign$1({},En),{className:void 0,theme:Cn}),qn=0;qn<xn.length;qn+=1){var cr=re(Fn=xn[qn])?Fn(Vn):Fn;for(var Bn in cr)Vn[Bn]=Bn==="className"?ie(Vn[Bn],cr[Bn]):Bn==="style"?__assign$1(__assign$1({},Vn[Bn]),cr[Bn]):cr[Bn]}return En.className&&(Vn.className=ie(Vn.className,En.className)),Vn}(At,Ot,tn),an=Kt.as||Bt,ln={};for(var hn in Kt)Kt[hn]===void 0||hn[0]==="$"||hn==="as"||hn==="theme"&&Kt.theme===tn||(hn==="forwardedAs"?ln.as=Kt.forwardedAs:Ut&&!Ut(hn,an)||(ln[hn]=Kt[hn]));var kn=function(xn,En){var Cn=Ge(),Fn=xn.generateAndInjectStyles(En,Cn.styleSheet,Cn.stylis);return Fn}(It,Kt),Zt=ie(qt,Jt);return kn&&(Zt+=" "+kn),Kt.className&&(Zt+=" "+Kt.className),ln[L(an)&&!A.has(an)?"class":"className"]=Zt,ln.ref=Dt,reactExports.createElement(an,ln)}(Tt,Et,kt)}_t.displayName=ft;var Tt=React.forwardRef(_t);return Tt.attrs=bt,Tt.componentStyle=St,Tt.displayName=ft,Tt.shouldForwardProp=vt,Tt.foldedComponentIds=b?ie(tt.foldedComponentIds,tt.styledComponentId):"",Tt.styledComponentId=st,Tt.target=b?tt.target:s,Object.defineProperty(Tt,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Et){this._foldedDefaultProps=b?function(kt){for(var Mt=[],Ot=1;Ot<arguments.length;Ot++)Mt[Ot-1]=arguments[Ot];for(var Dt=0,At=Mt;Dt<At.length;Dt++)le(kt,At[Dt],!0);return kt}({},tt.defaultProps,Et):Et}}),ue(Tt,function(){return".".concat(Tt.styledComponentId)}),nt&&oe(Tt,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),Tt}function at(s,e){for(var d=[s[0]],b=0,tt=e.length;b<tt;b+=1)d.push(e[b],s[b+1]);return d}var ct=function(s){return Object.assign(s,{isCss:!0})};function lt(s){for(var e=[],d=1;d<arguments.length;d++)e[d-1]=arguments[d];if(re(s)||ce(s))return ct(Xe(at(_,__spreadArray([s],e,!0))));var b=s;return e.length===0&&b.length===1&&typeof b[0]=="string"?Xe(b):ct(Xe(at(b,e)))}function ut(s,e,d){if(d===void 0&&(d=C),!e)throw he(1,e);var b=function(tt){for(var nt=[],ot=1;ot<arguments.length;ot++)nt[ot-1]=arguments[ot];return s(e,d,lt.apply(void 0,__spreadArray([tt],nt,!1)))};return b.attrs=function(tt){return ut(s,e,__assign$1(__assign$1({},d),{attrs:Array.prototype.concat(d.attrs,tt).filter(Boolean)}))},b.withConfig=function(tt){return ut(s,e,__assign$1(__assign$1({},d),tt))},b}var pt=function(s){return ut(it,s)},dt=pt;A.forEach(function(s){dt[s]=pt(s)});const MAX_OUTPUT_HEIGHT_LINES=10,OutputPre=({output:s,inputActive:e})=>{const d=reactExports.useRef(),b=reactExports.useRef(),[tt,nt]=reactExports.useState(getOutputHeight(s,d));reactExports.useEffect(()=>{nt(getOutputHeight(s,d))},[s]);const ot=ht=>{};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("pre",{ref:d,spellCheck:"false",style:{backgroundColor:"black",color:"white",height:tt,marginBottom:"0px",padding:"5px"},children:[s,e&&jsxRuntimeExports.jsx(ConsoleInput,{autoFocus:!0,type:"text",id:"input",name:"input",ref:b,onKeyDown:ht=>{ht.key==="Enter"&&ot(ht.target.value)}})]})})};function getOutputHeight(s,e){const d=s.split(`
`).length,b=Math.min(MAX_OUTPUT_HEIGHT_LINES,d),tt=getLineHeight(e.current);return`${b*tt+5}px`}function getLineHeight(s){if(!s)return 18;try{const d=window.getComputedStyle(s).getPropertyValue("line-height");return parseInt(d)}catch(d){return console.log("Error getting line height",d),18}}const ConsoleInput=dt.input`
  background-color: black;
  color: white;
  border: none;
  width: 100%;
  min-width: 50px;
  width: fit-content;
  margin: 0;
  font-size: 1em;
  &:focus {
    outline: none;
  }
`,MAX_OUTPUT_LINES=200,RunnableCode=Node$2.create({name:"runnable-code",group:"block",selectable:!0,code:!0,atom:!0,draggable:!1,addAttributes(){return{code:{default:`# your code here!
`}}},parseHTML(){return[{tag:"runnable-code"}]},renderHTML({HTMLAttributes:s}){return["runnable-code",mergeAttributes(s)]},addNodeView(){return ReactNodeViewRenderer(RenderRunableCode)}}),RenderRunableCode=s=>{const e=reactExports.useRef(),[d,b]=reactExports.useState(!1),[tt,nt]=reactExports.useState(s.editor.isEditable),[ot,ht]=reactExports.useState(""),[mt,gt]=reactExports.useState(!1);reactExports.useEffect(()=>{if(e.current){let wt=e.current.editor;console.log(ot.length),wt.resize(!0),wt.scrollToLine(ot.length,!0,!0,()=>{})}},[ot]),s.editor.on("transaction",()=>{nt(s.editor.isEditable)}),reactExports.useEffect(()=>{const wt=setInterval(()=>{St()},100),St=function(){if(d)try{const _t=window.pyodide.runPython("sys.stdout.getvalue()");st(_t)}catch{}};return()=>clearInterval(wt)},[d]);const yt=wt=>{},ft=()=>s.node.attrs.code,st=wt=>{let St=wt.split(`
`);if(St.length-1>MAX_OUTPUT_LINES){let Tt=St.slice(-(MAX_OUTPUT_LINES+1));wt=`last ${MAX_OUTPUT_LINES} lines...
`+Tt.join(`
`)}ht(wt)},bt=wt=>{s.updateAttributes({code:wt})};async function vt(){ht("");const wt=ft();b(!0),await window.pyodide.runPythonAsync(getInitCode()),window.pyodide.runPythonAsync(wt).then(St=>{const _t=window.pyodide.runPython("sys.stdout.getvalue()");gt(!0),st(_t),b(!1)}).catch(St=>{ht(ot+`
`+String(St)),b(!1),gt(!0)})}const xt=ft();return jsxRuntimeExports.jsx(NodeViewWrapper,{"data-drag-handle":!0,children:jsxRuntimeExports.jsxs("div",{style:{border:"lightgrey",borderStyle:"solid",borderWidth:"1px"},onClick:wt=>yt(),spellCheck:"false",draggable:"true",children:[jsxRuntimeExports.jsx(MonacoTipTap,{value:xt,onChange:wt=>bt(wt),readOnly:!tt}),mt&&jsxRuntimeExports.jsx(OutputPre,{output:ot,inputActive:!1}),jsxRuntimeExports.jsx(RunButtonRow,{isRunning:d,runCode:()=>vt(),showOutput:mt,setShowOutput:gt})]})})},RunButtonRow=s=>{const{pyodideLoadingState:e}=reactExports.useContext(PyodideContext);let d=e!="ready",b=jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx(FaPlay,{})," ","Run"]});s.isRunning&&(b=jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx(FaStop,{})," ","Stop"]}));let tt=jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx(FaTerminal,{})," Show"]});s.showOutput&&(tt=jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx(FaTerminal,{})," Hide"]}));const nt=()=>{s.isRunning||s.runCode()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>nt(),className:"btn btn-light btn-sm ",style:{width:"80px"},disabled:d,children:b}),jsxRuntimeExports.jsx("button",{onClick:()=>s.setShowOutput(!s.showOutput),style:{width:"80px"},className:"btn btn-light btn-sm ",disabled:d,children:tt})]})};function getInitCode(s){return`from js import document
import sys
import io
# capture standard output
sys.stdout = io.StringIO()
__name__ = "__main__"
`}var react_1=reactExports,isFunction$1=function(s){return typeof s=="function"},useStateRef=function(s){var e=react_1.useState(s),d=e[0],b=e[1],tt=react_1.useRef(d),nt=react_1.useCallback(function(ot){tt.current=isFunction$1(ot)?ot(tt.current):ot,b(tt.current)},[]);return[d,nt,tt]},dist=useStateRef;const useState=getDefaultExportFromCjs(dist);class SourceLocation{constructor(e,d,b){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=d,this.end=b}static range(e,d){return d?!e||!e.loc||!d.loc||e.loc.lexer!==d.loc.lexer?null:new SourceLocation(e.loc.lexer,e.loc.start,d.loc.end):e&&e.loc}}class Token{constructor(e,d){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=d}range(e,d){return new Token(d,SourceLocation.range(this,e))}}class ParseError{constructor(e,d){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var b="KaTeX parse error: "+e,tt,nt,ot=d&&d.loc;if(ot&&ot.start<=ot.end){var ht=ot.lexer.input;tt=ot.start,nt=ot.end,tt===ht.length?b+=" at end of input: ":b+=" at position "+(tt+1)+": ";var mt=ht.slice(tt,nt).replace(/[^]/g,"$&"),gt;tt>15?gt=""+ht.slice(tt-15,tt):gt=ht.slice(0,tt);var yt;nt+15<ht.length?yt=ht.slice(nt,nt+15)+"":yt=ht.slice(nt),b+=gt+mt+yt}var ft=new Error(b);return ft.name="ParseError",ft.__proto__=ParseError.prototype,ft.position=tt,tt!=null&&nt!=null&&(ft.length=nt-tt),ft.rawMessage=e,ft}}ParseError.prototype.__proto__=Error.prototype;var contains=function(e,d){return e.indexOf(d)!==-1},deflt=function(e,d){return e===void 0?d:e},uppercase=/([A-Z])/g,hyphenate=function(e){return e.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape(s){return String(s).replace(ESCAPE_REGEX,e=>ESCAPE_LOOKUP[e])}var getBaseElem=function s(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?s(e.body[0]):e:e.type==="font"?s(e.body):e},isCharacterBox=function(e){var d=getBaseElem(e);return d.type==="mathord"||d.type==="textord"||d.type==="atom"},assert=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},protocolFromUrl=function(e){var d=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return d?d[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(d[1])?null:d[1].toLowerCase():"_relative"},utils={contains,deflt,escape,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:s=>"#"+s},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(s,e)=>(e.push(s),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:s=>Math.max(0,s),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:s=>Math.max(0,s),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:s=>Math.max(0,s),cli:"-e, --max-expand <n>",cliProcessor:s=>s==="Infinity"?1/0:parseInt(s)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(s){if(s.default)return s.default;var e=s.type,d=Array.isArray(e)?e[0]:e;if(typeof d!="string")return d.enum[0];switch(d){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Settings{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var d in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(d)){var b=SETTINGS_SCHEMA[d];this[d]=e[d]!==void 0?b.processor?b.processor(e[d]):e[d]:getDefaultValue(b)}}reportNonstrict(e,d,b){var tt=this.strict;if(typeof tt=="function"&&(tt=tt(e,d,b)),!(!tt||tt==="ignore")){if(tt===!0||tt==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(d+" ["+e+"]"),b);tt==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(d+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+tt+"': "+d+" ["+e+"]"))}}useStrictBehavior(e,d,b){var tt=this.strict;if(typeof tt=="function")try{tt=tt(e,d,b)}catch{tt="error"}return!tt||tt==="ignore"?!1:tt===!0||tt==="error"?!0:tt==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(d+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+tt+"': "+d+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var d=utils.protocolFromUrl(e.url);if(d==null)return!1;e.protocol=d}var b=typeof this.trust=="function"?this.trust(e):this.trust;return!!b}}class Style{constructor(e,d,b){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=d,this.cramped=b}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D=0,Dc=1,T=2,Tc=3,S=4,Sc=5,SS=6,SSc=7,styles=[new Style(D,0,!1),new Style(Dc,0,!0),new Style(T,1,!1),new Style(Tc,1,!0),new Style(S,2,!1),new Style(Sc,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S,Sc,S,Sc,SS,SSc,SS,SSc],sub=[Sc,Sc,Sc,Sc,SSc,SSc,SSc,SSc],fracNum=[T,Tc,S,Sc,SS,SSc,SS,SSc],fracDen=[Tc,Tc,Sc,Sc,SSc,SSc,SSc,SSc],cramp=[Dc,Dc,Tc,Tc,Sc,Sc,SSc,SSc],text$1=[D,Dc,T,Tc,T,Tc,T,Tc],Style$1={DISPLAY:styles[D],TEXT:styles[T],SCRIPT:styles[S],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(s){for(var e=0;e<scriptData.length;e++)for(var d=scriptData[e],b=0;b<d.blocks.length;b++){var tt=d.blocks[b];if(s>=tt[0]&&s<=tt[1])return d.name}return null}var allBlocks=[];scriptData.forEach(s=>s.blocks.forEach(e=>allBlocks.push(...e)));function supportedCodepoint(s){for(var e=0;e<allBlocks.length;e+=2)if(s>=allBlocks[e]&&s<=allBlocks[e+1])return!0;return!1}var hLinePad=80,sqrtMain=function(e,d){return"M95,"+(622+e+d)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+d+"h400000v"+(40+e)+"h-400000z"},sqrtSize1=function(e,d){return"M263,"+(601+e+d)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+d+"h400000v"+(40+e)+"h-400000z"},sqrtSize2=function(e,d){return"M983 "+(10+e+d)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+d+"h400000v"+(40+e)+"h-400000z"},sqrtSize3=function(e,d){return"M424,"+(2398+e+d)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+d+`
h400000v`+(40+e)+"h-400000z"},sqrtSize4=function(e,d){return"M473,"+(2713+e+d)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+d+"h400000v"+(40+e)+"H1017.7z"},phasePath=function(e){var d=e/2;return"M400000 "+e+" H0 L"+d+" 0 l65 45 L145 "+(e-80)+" H400000z"},sqrtTall=function(e,d,b){var tt=b-54-d-e;return"M702 "+(e+d)+"H400000"+(40+e)+`
H742v`+tt+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+d+"H400000v"+(40+e)+"H742z"},sqrtPath=function(e,d,b){d=1e3*d;var tt="";switch(e){case"sqrtMain":tt=sqrtMain(d,hLinePad);break;case"sqrtSize1":tt=sqrtSize1(d,hLinePad);break;case"sqrtSize2":tt=sqrtSize2(d,hLinePad);break;case"sqrtSize3":tt=sqrtSize3(d,hLinePad);break;case"sqrtSize4":tt=sqrtSize4(d,hLinePad);break;case"sqrtTall":tt=sqrtTall(d,hLinePad,b)}return tt},innerPath=function(e,d){switch(e){case"":return"M291 0 H417 V"+d+" H291z M291 0 H417 V"+d+" H291z";case"":return"M145 0 H188 V"+d+" H145z M145 0 H188 V"+d+" H145z";case"":return"M145 0 H188 V"+d+" H145z M145 0 H188 V"+d+" H145z"+("M367 0 H410 V"+d+" H367z M367 0 H410 V"+d+" H367z");case"":return"M457 0 H583 V"+d+" H457z M457 0 H583 V"+d+" H457z";case"":return"M319 0 H403 V"+d+" H319z M319 0 H403 V"+d+" H319z";case"":return"M263 0 H347 V"+d+" H263z M263 0 H347 V"+d+" H263z";case"":return"M384 0 H504 V"+d+" H384z M384 0 H504 V"+d+" H384z";case"":return"M312 0 H355 V"+d+" H312z M312 0 H355 V"+d+" H312z";case"":return"M257 0 H300 V"+d+" H257z M257 0 H300 V"+d+" H257z"+("M478 0 H521 V"+d+" H478z M478 0 H521 V"+d+" H478z");default:return""}},path$1={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function(e,d){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+d+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+d+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+d+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+d+" v1759 h84z";case"vert":return"M145 15 v585 v"+d+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-d+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+d+" v585 h43z";case"doublevert":return"M145 15 v585 v"+d+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-d+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+d+` v585 h43z
M367 15 v585 v`+d+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-d+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+d+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+d+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+d+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+d+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+d+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+d+` v602 h84z
M403 1759 V0 H319 V1759 v`+d+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+d+` v602 h84z
M347 1759 V0 h-84 V1759 v`+d+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(d+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(d+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(d+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(d+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class DocumentFragment{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return utils.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),d=0;d<this.children.length;d++)e.appendChild(this.children[d].toNode());return e}toMarkup(){for(var e="",d=0;d<this.children.length;d++)e+=this.children[d].toMarkup();return e}toText(){var e=d=>d.toText();return this.children.map(e).join("")}}var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function setFontMetrics(s,e){fontMetricsData[s]=e}function getCharacterMetrics(s,e,d){if(!fontMetricsData[e])throw new Error("Font metrics not found for font: "+e+".");var b=s.charCodeAt(0),tt=fontMetricsData[e][b];if(!tt&&s[0]in extraCharacterMap&&(b=extraCharacterMap[s[0]].charCodeAt(0),tt=fontMetricsData[e][b]),!tt&&d==="text"&&supportedCodepoint(b)&&(tt=fontMetricsData[e][77]),tt)return{depth:tt[0],height:tt[1],italic:tt[2],skew:tt[3],width:tt[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(s){var e;if(s>=5?e=0:s>=3?e=1:e=2,!fontMetricsBySizeIndex[e]){var d=fontMetricsBySizeIndex[e]={cssEmPerMu:sigmasAndXis.quad[e]/18};for(var b in sigmasAndXis)sigmasAndXis.hasOwnProperty(b)&&(d[b]=sigmasAndXis[b][e])}return fontMetricsBySizeIndex[e]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function(e,d){return d.size<2?e:sizeStyleMap[e-1][d.size-1]};class Options{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Options.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var d={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var b in e)e.hasOwnProperty(b)&&(d[b]=e[b]);return new Options(d)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:sizeAtStyle(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:sizeMultipliers[e-1]})}havingBaseStyle(e){e=e||this.style.text();var d=sizeAtStyle(Options.BASESIZE,e);return this.size===d&&this.textSize===Options.BASESIZE&&this.style===e?this:this.extend({style:e,size:d})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function(e){return typeof e!="string"&&(e=e.unit),e in ptPerUnit||e in relativeUnit||e==="ex"},calculateSize$1=function(e,d){var b;if(e.unit in ptPerUnit)b=ptPerUnit[e.unit]/d.fontMetrics().ptPerEm/d.sizeMultiplier;else if(e.unit==="mu")b=d.fontMetrics().cssEmPerMu;else{var tt;if(d.style.isTight()?tt=d.havingStyle(d.style.text()):tt=d,e.unit==="ex")b=tt.fontMetrics().xHeight;else if(e.unit==="em")b=tt.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+e.unit+"'");tt!==d&&(b*=tt.sizeMultiplier/d.sizeMultiplier)}return Math.min(e.number*b,d.maxSize)},makeEm=function(e){return+e.toFixed(4)+"em"},createClass=function(e){return e.filter(d=>d).join(" ")},initNode=function(e,d,b){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=b||{},d){d.style.isTight()&&this.classes.push("mtight");var tt=d.getColor();tt&&(this.style.color=tt)}},toNode=function(e){var d=document.createElement(e);d.className=createClass(this.classes);for(var b in this.style)this.style.hasOwnProperty(b)&&(d.style[b]=this.style[b]);for(var tt in this.attributes)this.attributes.hasOwnProperty(tt)&&d.setAttribute(tt,this.attributes[tt]);for(var nt=0;nt<this.children.length;nt++)d.appendChild(this.children[nt].toNode());return d},toMarkup=function(e){var d="<"+e;this.classes.length&&(d+=' class="'+utils.escape(createClass(this.classes))+'"');var b="";for(var tt in this.style)this.style.hasOwnProperty(tt)&&(b+=utils.hyphenate(tt)+":"+this.style[tt]+";");b&&(d+=' style="'+utils.escape(b)+'"');for(var nt in this.attributes)this.attributes.hasOwnProperty(nt)&&(d+=" "+nt+'="'+utils.escape(this.attributes[nt])+'"');d+=">";for(var ot=0;ot<this.children.length;ot++)d+=this.children[ot].toMarkup();return d+="</"+e+">",d};class Span{constructor(e,d,b,tt){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,e,b,tt),this.children=d||[]}setAttribute(e,d){this.attributes[e]=d}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(e,d,b,tt){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,d,tt),this.children=b||[],this.setAttribute("href",e)}setAttribute(e,d){this.attributes[e]=d}hasClass(e){return utils.contains(this.classes,e)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(e,d,b){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=d,this.src=e,this.classes=["mord"],this.style=b}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var d in this.style)this.style.hasOwnProperty(d)&&(e.style[d]=this.style[d]);return e}toMarkup(){var e='<img src="'+utils.escape(this.src)+'"'+(' alt="'+utils.escape(this.alt)+'"'),d="";for(var b in this.style)this.style.hasOwnProperty(b)&&(d+=utils.hyphenate(b)+":"+this.style[b]+";");return d&&(e+=' style="'+utils.escape(d)+'"'),e+="'/>",e}}var iCombinations={:"",:"",:"",:""};class SymbolNode{constructor(e,d,b,tt,nt,ot,ht,mt){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=d||0,this.depth=b||0,this.italic=tt||0,this.skew=nt||0,this.width=ot||0,this.classes=ht||[],this.style=mt||{},this.maxFontSize=0;var gt=scriptFromCodepoint(this.text.charCodeAt(0));gt&&this.classes.push(gt+"_fallback"),/[]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(e){return utils.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),d=null;this.italic>0&&(d=document.createElement("span"),d.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(d=d||document.createElement("span"),d.className=createClass(this.classes));for(var b in this.style)this.style.hasOwnProperty(b)&&(d=d||document.createElement("span"),d.style[b]=this.style[b]);return d?(d.appendChild(e),d):e}toMarkup(){var e=!1,d="<span";this.classes.length&&(e=!0,d+=' class="',d+=utils.escape(createClass(this.classes)),d+='"');var b="";this.italic>0&&(b+="margin-right:"+this.italic+"em;");for(var tt in this.style)this.style.hasOwnProperty(tt)&&(b+=utils.hyphenate(tt)+":"+this.style[tt]+";");b&&(e=!0,d+=' style="'+utils.escape(b)+'"');var nt=utils.escape(this.text);return e?(d+=">",d+=nt,d+="</span>",d):nt}}class SvgNode{constructor(e,d){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=d||{}}toNode(){var e="http://www.w3.org/2000/svg",d=document.createElementNS(e,"svg");for(var b in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,b)&&d.setAttribute(b,this.attributes[b]);for(var tt=0;tt<this.children.length;tt++)d.appendChild(this.children[tt].toNode());return d}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&(e+=" "+d+'="'+utils.escape(this.attributes[d])+'"');e+=">";for(var b=0;b<this.children.length;b++)e+=this.children[b].toMarkup();return e+="</svg>",e}}class PathNode{constructor(e,d){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=d}toNode(){var e="http://www.w3.org/2000/svg",d=document.createElementNS(e,"path");return this.alternate?d.setAttribute("d",this.alternate):d.setAttribute("d",path$1[this.pathName]),d}toMarkup(){return this.alternate?'<path d="'+utils.escape(this.alternate)+'"/>':'<path d="'+utils.escape(path$1[this.pathName])+'"/>'}}class LineNode{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",d=document.createElementNS(e,"line");for(var b in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,b)&&d.setAttribute(b,this.attributes[b]);return d}toMarkup(){var e="<line";for(var d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&(e+=" "+d+'="'+utils.escape(this.attributes[d])+'"');return e+="/>",e}}function assertSymbolDomNode(s){if(s instanceof SymbolNode)return s;throw new Error("Expected symbolNode but got "+String(s)+".")}function assertSpan(s){if(s instanceof Span)return s;throw new Error("Expected span<HtmlDomNode> but got "+String(s)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(s,e,d,b,tt,nt){symbols[s][tt]={font:e,group:d,replace:b},nt&&b&&(symbols[s][b]=symbols[s][tt])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op="op-token",open="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"","\\equiv",!0);defineSymbol(math,main,rel,"","\\prec",!0);defineSymbol(math,main,rel,"","\\succ",!0);defineSymbol(math,main,rel,"","\\sim",!0);defineSymbol(math,main,rel,"","\\perp");defineSymbol(math,main,rel,"","\\preceq",!0);defineSymbol(math,main,rel,"","\\succeq",!0);defineSymbol(math,main,rel,"","\\simeq",!0);defineSymbol(math,main,rel,"","\\mid",!0);defineSymbol(math,main,rel,"","\\ll",!0);defineSymbol(math,main,rel,"","\\gg",!0);defineSymbol(math,main,rel,"","\\asymp",!0);defineSymbol(math,main,rel,"","\\parallel");defineSymbol(math,main,rel,"","\\bowtie",!0);defineSymbol(math,main,rel,"","\\smile",!0);defineSymbol(math,main,rel,"","\\sqsubseteq",!0);defineSymbol(math,main,rel,"","\\sqsupseteq",!0);defineSymbol(math,main,rel,"","\\doteq",!0);defineSymbol(math,main,rel,"","\\frown",!0);defineSymbol(math,main,rel,"","\\ni",!0);defineSymbol(math,main,rel,"","\\propto",!0);defineSymbol(math,main,rel,"","\\vdash",!0);defineSymbol(math,main,rel,"","\\dashv",!0);defineSymbol(math,main,rel,"","\\owns");defineSymbol(math,main,punct,".","\\ldotp");defineSymbol(math,main,punct,"","\\cdotp");defineSymbol(math,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math,main,textord,"","\\aleph",!0);defineSymbol(math,main,textord,"","\\forall",!0);defineSymbol(math,main,textord,"","\\hbar",!0);defineSymbol(math,main,textord,"","\\exists",!0);defineSymbol(math,main,textord,"","\\nabla",!0);defineSymbol(math,main,textord,"","\\flat",!0);defineSymbol(math,main,textord,"","\\ell",!0);defineSymbol(math,main,textord,"","\\natural",!0);defineSymbol(math,main,textord,"","\\clubsuit",!0);defineSymbol(math,main,textord,"","\\wp",!0);defineSymbol(math,main,textord,"","\\sharp",!0);defineSymbol(math,main,textord,"","\\diamondsuit",!0);defineSymbol(math,main,textord,"","\\Re",!0);defineSymbol(math,main,textord,"","\\heartsuit",!0);defineSymbol(math,main,textord,"","\\Im",!0);defineSymbol(math,main,textord,"","\\spadesuit",!0);defineSymbol(math,main,textord,"","\\S",!0);defineSymbol(text,main,textord,"","\\S");defineSymbol(math,main,textord,"","\\P",!0);defineSymbol(text,main,textord,"","\\P");defineSymbol(math,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\textdagger");defineSymbol(math,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\textdaggerdbl");defineSymbol(math,main,close,"","\\rmoustache",!0);defineSymbol(math,main,open,"","\\lmoustache",!0);defineSymbol(math,main,close,"","\\rgroup",!0);defineSymbol(math,main,open,"","\\lgroup",!0);defineSymbol(math,main,bin,"","\\mp",!0);defineSymbol(math,main,bin,"","\\ominus",!0);defineSymbol(math,main,bin,"","\\uplus",!0);defineSymbol(math,main,bin,"","\\sqcap",!0);defineSymbol(math,main,bin,"","\\ast");defineSymbol(math,main,bin,"","\\sqcup",!0);defineSymbol(math,main,bin,"","\\bigcirc",!0);defineSymbol(math,main,bin,"","\\bullet",!0);defineSymbol(math,main,bin,"","\\ddagger");defineSymbol(math,main,bin,"","\\wr",!0);defineSymbol(math,main,bin,"","\\amalg");defineSymbol(math,main,bin,"&","\\And");defineSymbol(math,main,rel,"","\\longleftarrow",!0);defineSymbol(math,main,rel,"","\\Leftarrow",!0);defineSymbol(math,main,rel,"","\\Longleftarrow",!0);defineSymbol(math,main,rel,"","\\longrightarrow",!0);defineSymbol(math,main,rel,"","\\Rightarrow",!0);defineSymbol(math,main,rel,"","\\Longrightarrow",!0);defineSymbol(math,main,rel,"","\\leftrightarrow",!0);defineSymbol(math,main,rel,"","\\longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\Leftrightarrow",!0);defineSymbol(math,main,rel,"","\\Longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\mapsto",!0);defineSymbol(math,main,rel,"","\\longmapsto",!0);defineSymbol(math,main,rel,"","\\nearrow",!0);defineSymbol(math,main,rel,"","\\hookleftarrow",!0);defineSymbol(math,main,rel,"","\\hookrightarrow",!0);defineSymbol(math,main,rel,"","\\searrow",!0);defineSymbol(math,main,rel,"","\\leftharpoonup",!0);defineSymbol(math,main,rel,"","\\rightharpoonup",!0);defineSymbol(math,main,rel,"","\\swarrow",!0);defineSymbol(math,main,rel,"","\\leftharpoondown",!0);defineSymbol(math,main,rel,"","\\rightharpoondown",!0);defineSymbol(math,main,rel,"","\\nwarrow",!0);defineSymbol(math,main,rel,"","\\rightleftharpoons",!0);defineSymbol(math,ams,rel,"","\\nless",!0);defineSymbol(math,ams,rel,"","\\@nleqslant");defineSymbol(math,ams,rel,"","\\@nleqq");defineSymbol(math,ams,rel,"","\\lneq",!0);defineSymbol(math,ams,rel,"","\\lneqq",!0);defineSymbol(math,ams,rel,"","\\@lvertneqq");defineSymbol(math,ams,rel,"","\\lnsim",!0);defineSymbol(math,ams,rel,"","\\lnapprox",!0);defineSymbol(math,ams,rel,"","\\nprec",!0);defineSymbol(math,ams,rel,"","\\npreceq",!0);defineSymbol(math,ams,rel,"","\\precnsim",!0);defineSymbol(math,ams,rel,"","\\precnapprox",!0);defineSymbol(math,ams,rel,"","\\nsim",!0);defineSymbol(math,ams,rel,"","\\@nshortmid");defineSymbol(math,ams,rel,"","\\nmid",!0);defineSymbol(math,ams,rel,"","\\nvdash",!0);defineSymbol(math,ams,rel,"","\\nvDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleleft");defineSymbol(math,ams,rel,"","\\ntrianglelefteq",!0);defineSymbol(math,ams,rel,"","\\subsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneq");defineSymbol(math,ams,rel,"","\\subsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneqq");defineSymbol(math,ams,rel,"","\\ngtr",!0);defineSymbol(math,ams,rel,"","\\@ngeqslant");defineSymbol(math,ams,rel,"","\\@ngeqq");defineSymbol(math,ams,rel,"","\\gneq",!0);defineSymbol(math,ams,rel,"","\\gneqq",!0);defineSymbol(math,ams,rel,"","\\@gvertneqq");defineSymbol(math,ams,rel,"","\\gnsim",!0);defineSymbol(math,ams,rel,"","\\gnapprox",!0);defineSymbol(math,ams,rel,"","\\nsucc",!0);defineSymbol(math,ams,rel,"","\\nsucceq",!0);defineSymbol(math,ams,rel,"","\\succnsim",!0);defineSymbol(math,ams,rel,"","\\succnapprox",!0);defineSymbol(math,ams,rel,"","\\ncong",!0);defineSymbol(math,ams,rel,"","\\@nshortparallel");defineSymbol(math,ams,rel,"","\\nparallel",!0);defineSymbol(math,ams,rel,"","\\nVDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleright");defineSymbol(math,ams,rel,"","\\ntrianglerighteq",!0);defineSymbol(math,ams,rel,"","\\@nsupseteqq");defineSymbol(math,ams,rel,"","\\supsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneq");defineSymbol(math,ams,rel,"","\\supsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneqq");defineSymbol(math,ams,rel,"","\\nVdash",!0);defineSymbol(math,ams,rel,"","\\precneqq",!0);defineSymbol(math,ams,rel,"","\\succneqq",!0);defineSymbol(math,ams,rel,"","\\@nsubseteqq");defineSymbol(math,ams,bin,"","\\unlhd");defineSymbol(math,ams,bin,"","\\unrhd");defineSymbol(math,ams,rel,"","\\nleftarrow",!0);defineSymbol(math,ams,rel,"","\\nrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftarrow",!0);defineSymbol(math,ams,rel,"","\\nRightarrow",!0);defineSymbol(math,ams,rel,"","\\nleftrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftrightarrow",!0);defineSymbol(math,ams,rel,"","\\vartriangle");defineSymbol(math,ams,textord,"","\\hslash");defineSymbol(math,ams,textord,"","\\triangledown");defineSymbol(math,ams,textord,"","\\lozenge");defineSymbol(math,ams,textord,"","\\circledS");defineSymbol(math,ams,textord,"","\\circledR");defineSymbol(text,ams,textord,"","\\circledR");defineSymbol(math,ams,textord,"","\\measuredangle",!0);defineSymbol(math,ams,textord,"","\\nexists");defineSymbol(math,ams,textord,"","\\mho");defineSymbol(math,ams,textord,"","\\Finv",!0);defineSymbol(math,ams,textord,"","\\Game",!0);defineSymbol(math,ams,textord,"","\\backprime");defineSymbol(math,ams,textord,"","\\blacktriangle");defineSymbol(math,ams,textord,"","\\blacktriangledown");defineSymbol(math,ams,textord,"","\\blacksquare");defineSymbol(math,ams,textord,"","\\blacklozenge");defineSymbol(math,ams,textord,"","\\bigstar");defineSymbol(math,ams,textord,"","\\sphericalangle",!0);defineSymbol(math,ams,textord,"","\\complement",!0);defineSymbol(math,ams,textord,"","\\eth",!0);defineSymbol(text,main,textord,"","");defineSymbol(math,ams,textord,"","\\diagup");defineSymbol(math,ams,textord,"","\\diagdown");defineSymbol(math,ams,textord,"","\\square");defineSymbol(math,ams,textord,"","\\Box");defineSymbol(math,ams,textord,"","\\Diamond");defineSymbol(math,ams,textord,"","\\yen",!0);defineSymbol(text,ams,textord,"","\\yen",!0);defineSymbol(math,ams,textord,"","\\checkmark",!0);defineSymbol(text,ams,textord,"","\\checkmark");defineSymbol(math,ams,textord,"","\\beth",!0);defineSymbol(math,ams,textord,"","\\daleth",!0);defineSymbol(math,ams,textord,"","\\gimel",!0);defineSymbol(math,ams,textord,"","\\digamma",!0);defineSymbol(math,ams,textord,"","\\varkappa");defineSymbol(math,ams,open,"","\\@ulcorner",!0);defineSymbol(math,ams,close,"","\\@urcorner",!0);defineSymbol(math,ams,open,"","\\@llcorner",!0);defineSymbol(math,ams,close,"","\\@lrcorner",!0);defineSymbol(math,ams,rel,"","\\leqq",!0);defineSymbol(math,ams,rel,"","\\leqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantless",!0);defineSymbol(math,ams,rel,"","\\lesssim",!0);defineSymbol(math,ams,rel,"","\\lessapprox",!0);defineSymbol(math,ams,rel,"","\\approxeq",!0);defineSymbol(math,ams,bin,"","\\lessdot");defineSymbol(math,ams,rel,"","\\lll",!0);defineSymbol(math,ams,rel,"","\\lessgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqqgtr",!0);defineSymbol(math,ams,rel,"","\\doteqdot");defineSymbol(math,ams,rel,"","\\risingdotseq",!0);defineSymbol(math,ams,rel,"","\\fallingdotseq",!0);defineSymbol(math,ams,rel,"","\\backsim",!0);defineSymbol(math,ams,rel,"","\\backsimeq",!0);defineSymbol(math,ams,rel,"","\\subseteqq",!0);defineSymbol(math,ams,rel,"","\\Subset",!0);defineSymbol(math,ams,rel,"","\\sqsubset",!0);defineSymbol(math,ams,rel,"","\\preccurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqprec",!0);defineSymbol(math,ams,rel,"","\\precsim",!0);defineSymbol(math,ams,rel,"","\\precapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleleft");defineSymbol(math,ams,rel,"","\\trianglelefteq");defineSymbol(math,ams,rel,"","\\vDash",!0);defineSymbol(math,ams,rel,"","\\Vvdash",!0);defineSymbol(math,ams,rel,"","\\smallsmile");defineSymbol(math,ams,rel,"","\\smallfrown");defineSymbol(math,ams,rel,"","\\bumpeq",!0);defineSymbol(math,ams,rel,"","\\Bumpeq",!0);defineSymbol(math,ams,rel,"","\\geqq",!0);defineSymbol(math,ams,rel,"","\\geqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantgtr",!0);defineSymbol(math,ams,rel,"","\\gtrsim",!0);defineSymbol(math,ams,rel,"","\\gtrapprox",!0);defineSymbol(math,ams,bin,"","\\gtrdot");defineSymbol(math,ams,rel,"","\\ggg",!0);defineSymbol(math,ams,rel,"","\\gtrless",!0);defineSymbol(math,ams,rel,"","\\gtreqless",!0);defineSymbol(math,ams,rel,"","\\gtreqqless",!0);defineSymbol(math,ams,rel,"","\\eqcirc",!0);defineSymbol(math,ams,rel,"","\\circeq",!0);defineSymbol(math,ams,rel,"","\\triangleq",!0);defineSymbol(math,ams,rel,"","\\thicksim");defineSymbol(math,ams,rel,"","\\thickapprox");defineSymbol(math,ams,rel,"","\\supseteqq",!0);defineSymbol(math,ams,rel,"","\\Supset",!0);defineSymbol(math,ams,rel,"","\\sqsupset",!0);defineSymbol(math,ams,rel,"","\\succcurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqsucc",!0);defineSymbol(math,ams,rel,"","\\succsim",!0);defineSymbol(math,ams,rel,"","\\succapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleright");defineSymbol(math,ams,rel,"","\\trianglerighteq");defineSymbol(math,ams,rel,"","\\Vdash",!0);defineSymbol(math,ams,rel,"","\\shortmid");defineSymbol(math,ams,rel,"","\\shortparallel");defineSymbol(math,ams,rel,"","\\between",!0);defineSymbol(math,ams,rel,"","\\pitchfork",!0);defineSymbol(math,ams,rel,"","\\varpropto");defineSymbol(math,ams,rel,"","\\blacktriangleleft");defineSymbol(math,ams,rel,"","\\therefore",!0);defineSymbol(math,ams,rel,"","\\backepsilon");defineSymbol(math,ams,rel,"","\\blacktriangleright");defineSymbol(math,ams,rel,"","\\because",!0);defineSymbol(math,ams,rel,"","\\llless");defineSymbol(math,ams,rel,"","\\gggtr");defineSymbol(math,ams,bin,"","\\lhd");defineSymbol(math,ams,bin,"","\\rhd");defineSymbol(math,ams,rel,"","\\eqsim",!0);defineSymbol(math,main,rel,"","\\Join");defineSymbol(math,ams,rel,"","\\Doteq",!0);defineSymbol(math,ams,bin,"","\\dotplus",!0);defineSymbol(math,ams,bin,"","\\smallsetminus");defineSymbol(math,ams,bin,"","\\Cap",!0);defineSymbol(math,ams,bin,"","\\Cup",!0);defineSymbol(math,ams,bin,"","\\doublebarwedge",!0);defineSymbol(math,ams,bin,"","\\boxminus",!0);defineSymbol(math,ams,bin,"","\\boxplus",!0);defineSymbol(math,ams,bin,"","\\divideontimes",!0);defineSymbol(math,ams,bin,"","\\ltimes",!0);defineSymbol(math,ams,bin,"","\\rtimes",!0);defineSymbol(math,ams,bin,"","\\leftthreetimes",!0);defineSymbol(math,ams,bin,"","\\rightthreetimes",!0);defineSymbol(math,ams,bin,"","\\curlywedge",!0);defineSymbol(math,ams,bin,"","\\curlyvee",!0);defineSymbol(math,ams,bin,"","\\circleddash",!0);defineSymbol(math,ams,bin,"","\\circledast",!0);defineSymbol(math,ams,bin,"","\\centerdot");defineSymbol(math,ams,bin,"","\\intercal",!0);defineSymbol(math,ams,bin,"","\\doublecap");defineSymbol(math,ams,bin,"","\\doublecup");defineSymbol(math,ams,bin,"","\\boxtimes",!0);defineSymbol(math,ams,rel,"","\\dashrightarrow",!0);defineSymbol(math,ams,rel,"","\\dashleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftleftarrows",!0);defineSymbol(math,ams,rel,"","\\leftrightarrows",!0);defineSymbol(math,ams,rel,"","\\Lleftarrow",!0);defineSymbol(math,ams,rel,"","\\twoheadleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowleft",!0);defineSymbol(math,ams,rel,"","\\leftrightharpoons",!0);defineSymbol(math,ams,rel,"","\\curvearrowleft",!0);defineSymbol(math,ams,rel,"","\\circlearrowleft",!0);defineSymbol(math,ams,rel,"","\\Lsh",!0);defineSymbol(math,ams,rel,"","\\upuparrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonleft",!0);defineSymbol(math,ams,rel,"","\\downharpoonleft",!0);defineSymbol(math,main,rel,"","\\origof",!0);defineSymbol(math,main,rel,"","\\imageof",!0);defineSymbol(math,ams,rel,"","\\multimap",!0);defineSymbol(math,ams,rel,"","\\leftrightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\rightrightarrows",!0);defineSymbol(math,ams,rel,"","\\rightleftarrows",!0);defineSymbol(math,ams,rel,"","\\twoheadrightarrow",!0);defineSymbol(math,ams,rel,"","\\rightarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowright",!0);defineSymbol(math,ams,rel,"","\\curvearrowright",!0);defineSymbol(math,ams,rel,"","\\circlearrowright",!0);defineSymbol(math,ams,rel,"","\\Rsh",!0);defineSymbol(math,ams,rel,"","\\downdownarrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonright",!0);defineSymbol(math,ams,rel,"","\\downharpoonright",!0);defineSymbol(math,ams,rel,"","\\rightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\leadsto");defineSymbol(math,ams,rel,"","\\Rrightarrow",!0);defineSymbol(math,ams,rel,"","\\restriction");defineSymbol(math,main,textord,"","`");defineSymbol(math,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math,main,textord,"","\\angle",!0);defineSymbol(math,main,textord,"","\\infty",!0);defineSymbol(math,main,textord,"","\\prime");defineSymbol(math,main,textord,"","\\triangle");defineSymbol(math,main,textord,"","\\Gamma",!0);defineSymbol(math,main,textord,"","\\Delta",!0);defineSymbol(math,main,textord,"","\\Theta",!0);defineSymbol(math,main,textord,"","\\Lambda",!0);defineSymbol(math,main,textord,"","\\Xi",!0);defineSymbol(math,main,textord,"","\\Pi",!0);defineSymbol(math,main,textord,"","\\Sigma",!0);defineSymbol(math,main,textord,"","\\Upsilon",!0);defineSymbol(math,main,textord,"","\\Phi",!0);defineSymbol(math,main,textord,"","\\Psi",!0);defineSymbol(math,main,textord,"","\\Omega",!0);defineSymbol(math,main,textord,"A","");defineSymbol(math,main,textord,"B","");defineSymbol(math,main,textord,"E","");defineSymbol(math,main,textord,"Z","");defineSymbol(math,main,textord,"H","");defineSymbol(math,main,textord,"I","");defineSymbol(math,main,textord,"K","");defineSymbol(math,main,textord,"M","");defineSymbol(math,main,textord,"N","");defineSymbol(math,main,textord,"O","");defineSymbol(math,main,textord,"P","");defineSymbol(math,main,textord,"T","");defineSymbol(math,main,textord,"X","");defineSymbol(math,main,textord,"","\\neg",!0);defineSymbol(math,main,textord,"","\\lnot");defineSymbol(math,main,textord,"","\\top");defineSymbol(math,main,textord,"","\\bot");defineSymbol(math,main,textord,"","\\emptyset");defineSymbol(math,ams,textord,"","\\varnothing");defineSymbol(math,main,mathord,"","\\alpha",!0);defineSymbol(math,main,mathord,"","\\beta",!0);defineSymbol(math,main,mathord,"","\\gamma",!0);defineSymbol(math,main,mathord,"","\\delta",!0);defineSymbol(math,main,mathord,"","\\epsilon",!0);defineSymbol(math,main,mathord,"","\\zeta",!0);defineSymbol(math,main,mathord,"","\\eta",!0);defineSymbol(math,main,mathord,"","\\theta",!0);defineSymbol(math,main,mathord,"","\\iota",!0);defineSymbol(math,main,mathord,"","\\kappa",!0);defineSymbol(math,main,mathord,"","\\lambda",!0);defineSymbol(math,main,mathord,"","\\mu",!0);defineSymbol(math,main,mathord,"","\\nu",!0);defineSymbol(math,main,mathord,"","\\xi",!0);defineSymbol(math,main,mathord,"","\\omicron",!0);defineSymbol(math,main,mathord,"","\\pi",!0);defineSymbol(math,main,mathord,"","\\rho",!0);defineSymbol(math,main,mathord,"","\\sigma",!0);defineSymbol(math,main,mathord,"","\\tau",!0);defineSymbol(math,main,mathord,"","\\upsilon",!0);defineSymbol(math,main,mathord,"","\\phi",!0);defineSymbol(math,main,mathord,"","\\chi",!0);defineSymbol(math,main,mathord,"","\\psi",!0);defineSymbol(math,main,mathord,"","\\omega",!0);defineSymbol(math,main,mathord,"","\\varepsilon",!0);defineSymbol(math,main,mathord,"","\\vartheta",!0);defineSymbol(math,main,mathord,"","\\varpi",!0);defineSymbol(math,main,mathord,"","\\varrho",!0);defineSymbol(math,main,mathord,"","\\varsigma",!0);defineSymbol(math,main,mathord,"","\\varphi",!0);defineSymbol(math,main,bin,"","*",!0);defineSymbol(math,main,bin,"+","+");defineSymbol(math,main,bin,"","-",!0);defineSymbol(math,main,bin,"","\\cdot",!0);defineSymbol(math,main,bin,"","\\circ",!0);defineSymbol(math,main,bin,"","\\div",!0);defineSymbol(math,main,bin,"","\\pm",!0);defineSymbol(math,main,bin,"","\\times",!0);defineSymbol(math,main,bin,"","\\cap",!0);defineSymbol(math,main,bin,"","\\cup",!0);defineSymbol(math,main,bin,"","\\setminus",!0);defineSymbol(math,main,bin,"","\\land");defineSymbol(math,main,bin,"","\\lor");defineSymbol(math,main,bin,"","\\wedge",!0);defineSymbol(math,main,bin,"","\\vee",!0);defineSymbol(math,main,textord,"","\\surd");defineSymbol(math,main,open,"","\\langle",!0);defineSymbol(math,main,open,"","\\lvert");defineSymbol(math,main,open,"","\\lVert");defineSymbol(math,main,close,"?","?");defineSymbol(math,main,close,"!","!");defineSymbol(math,main,close,"","\\rangle",!0);defineSymbol(math,main,close,"","\\rvert");defineSymbol(math,main,close,"","\\rVert");defineSymbol(math,main,rel,"=","=");defineSymbol(math,main,rel,":",":");defineSymbol(math,main,rel,"","\\approx",!0);defineSymbol(math,main,rel,"","\\cong",!0);defineSymbol(math,main,rel,"","\\ge");defineSymbol(math,main,rel,"","\\geq",!0);defineSymbol(math,main,rel,"","\\gets");defineSymbol(math,main,rel,">","\\gt",!0);defineSymbol(math,main,rel,"","\\in",!0);defineSymbol(math,main,rel,"","\\@not");defineSymbol(math,main,rel,"","\\subset",!0);defineSymbol(math,main,rel,"","\\supset",!0);defineSymbol(math,main,rel,"","\\subseteq",!0);defineSymbol(math,main,rel,"","\\supseteq",!0);defineSymbol(math,ams,rel,"","\\nsubseteq",!0);defineSymbol(math,ams,rel,"","\\nsupseteq",!0);defineSymbol(math,main,rel,"","\\models");defineSymbol(math,main,rel,"","\\leftarrow",!0);defineSymbol(math,main,rel,"","\\le");defineSymbol(math,main,rel,"","\\leq",!0);defineSymbol(math,main,rel,"<","\\lt",!0);defineSymbol(math,main,rel,"","\\rightarrow",!0);defineSymbol(math,main,rel,"","\\to");defineSymbol(math,ams,rel,"","\\ngeq",!0);defineSymbol(math,ams,rel,"","\\nleq",!0);defineSymbol(math,main,spacing,"","\\ ");defineSymbol(math,main,spacing,"","\\space");defineSymbol(math,main,spacing,"","\\nobreakspace");defineSymbol(text,main,spacing,"","\\ ");defineSymbol(text,main,spacing,""," ");defineSymbol(text,main,spacing,"","\\space");defineSymbol(text,main,spacing,"","\\nobreakspace");defineSymbol(math,main,spacing,null,"\\nobreak");defineSymbol(math,main,spacing,null,"\\allowbreak");defineSymbol(math,main,punct,",",",");defineSymbol(math,main,punct,";",";");defineSymbol(math,ams,bin,"","\\barwedge",!0);defineSymbol(math,ams,bin,"","\\veebar",!0);defineSymbol(math,main,bin,"","\\odot",!0);defineSymbol(math,main,bin,"","\\oplus",!0);defineSymbol(math,main,bin,"","\\otimes",!0);defineSymbol(math,main,textord,"","\\partial",!0);defineSymbol(math,main,bin,"","\\oslash",!0);defineSymbol(math,ams,bin,"","\\circledcirc",!0);defineSymbol(math,ams,bin,"","\\boxdot",!0);defineSymbol(math,main,bin,"","\\bigtriangleup");defineSymbol(math,main,bin,"","\\bigtriangledown");defineSymbol(math,main,bin,"","\\dagger");defineSymbol(math,main,bin,"","\\diamond");defineSymbol(math,main,bin,"","\\star");defineSymbol(math,main,bin,"","\\triangleleft");defineSymbol(math,main,bin,"","\\triangleright");defineSymbol(math,main,open,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math,main,open,"{","\\lbrace");defineSymbol(math,main,close,"}","\\rbrace");defineSymbol(math,main,open,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math,main,open,"(","\\lparen",!0);defineSymbol(math,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math,main,open,"","\\lfloor",!0);defineSymbol(math,main,close,"","\\rfloor",!0);defineSymbol(math,main,open,"","\\lceil",!0);defineSymbol(math,main,close,"","\\rceil",!0);defineSymbol(math,main,textord,"\\","\\backslash");defineSymbol(math,main,textord,"","|");defineSymbol(math,main,textord,"","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math,main,textord,"","\\|");defineSymbol(math,main,textord,"","\\Vert");defineSymbol(text,main,textord,"","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math,main,rel,"","\\uparrow",!0);defineSymbol(math,main,rel,"","\\Uparrow",!0);defineSymbol(math,main,rel,"","\\downarrow",!0);defineSymbol(math,main,rel,"","\\Downarrow",!0);defineSymbol(math,main,rel,"","\\updownarrow",!0);defineSymbol(math,main,rel,"","\\Updownarrow",!0);defineSymbol(math,main,op,"","\\coprod");defineSymbol(math,main,op,"","\\bigvee");defineSymbol(math,main,op,"","\\bigwedge");defineSymbol(math,main,op,"","\\biguplus");defineSymbol(math,main,op,"","\\bigcap");defineSymbol(math,main,op,"","\\bigcup");defineSymbol(math,main,op,"","\\int");defineSymbol(math,main,op,"","\\intop");defineSymbol(math,main,op,"","\\iint");defineSymbol(math,main,op,"","\\iiint");defineSymbol(math,main,op,"","\\prod");defineSymbol(math,main,op,"","\\sum");defineSymbol(math,main,op,"","\\bigotimes");defineSymbol(math,main,op,"","\\bigoplus");defineSymbol(math,main,op,"","\\bigodot");defineSymbol(math,main,op,"","\\oint");defineSymbol(math,main,op,"","\\oiint");defineSymbol(math,main,op,"","\\oiiint");defineSymbol(math,main,op,"","\\bigsqcup");defineSymbol(math,main,op,"","\\smallint");defineSymbol(text,main,inner,"","\\textellipsis");defineSymbol(math,main,inner,"","\\mathellipsis");defineSymbol(text,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\@cdots",!0);defineSymbol(math,main,inner,"","\\ddots",!0);defineSymbol(math,main,textord,"","\\varvdots");defineSymbol(math,main,accent,"","\\acute");defineSymbol(math,main,accent,"","\\grave");defineSymbol(math,main,accent,"","\\ddot");defineSymbol(math,main,accent,"~","\\tilde");defineSymbol(math,main,accent,"","\\bar");defineSymbol(math,main,accent,"","\\breve");defineSymbol(math,main,accent,"","\\check");defineSymbol(math,main,accent,"^","\\hat");defineSymbol(math,main,accent,"","\\vec");defineSymbol(math,main,accent,"","\\dot");defineSymbol(math,main,accent,"","\\mathring");defineSymbol(math,main,mathord,"","\\@imath");defineSymbol(math,main,mathord,"","\\@jmath");defineSymbol(math,main,textord,"","");defineSymbol(math,main,textord,"","");defineSymbol(text,main,textord,"","\\i",!0);defineSymbol(text,main,textord,"","\\j",!0);defineSymbol(text,main,textord,"","\\ss",!0);defineSymbol(text,main,textord,"","\\ae",!0);defineSymbol(text,main,textord,"","\\oe",!0);defineSymbol(text,main,textord,"","\\o",!0);defineSymbol(text,main,textord,"","\\AE",!0);defineSymbol(text,main,textord,"","\\OE",!0);defineSymbol(text,main,textord,"","\\O",!0);defineSymbol(text,main,accent,"","\\'");defineSymbol(text,main,accent,"","\\`");defineSymbol(text,main,accent,"","\\^");defineSymbol(text,main,accent,"","\\~");defineSymbol(text,main,accent,"","\\=");defineSymbol(text,main,accent,"","\\u");defineSymbol(text,main,accent,"","\\.");defineSymbol(text,main,accent,"","\\c");defineSymbol(text,main,accent,"","\\r");defineSymbol(text,main,accent,"","\\v");defineSymbol(text,main,accent,"",'\\"');defineSymbol(text,main,accent,"","\\H");defineSymbol(text,main,accent,"","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"","--",!0);defineSymbol(text,main,textord,"","\\textendash");defineSymbol(text,main,textord,"","---",!0);defineSymbol(text,main,textord,"","\\textemdash");defineSymbol(text,main,textord,"","`",!0);defineSymbol(text,main,textord,"","\\textquoteleft");defineSymbol(text,main,textord,"","'",!0);defineSymbol(text,main,textord,"","\\textquoteright");defineSymbol(text,main,textord,"","``",!0);defineSymbol(text,main,textord,"","\\textquotedblleft");defineSymbol(text,main,textord,"","''",!0);defineSymbol(text,main,textord,"","\\textquotedblright");defineSymbol(math,main,textord,"","\\degree",!0);defineSymbol(text,main,textord,"","\\degree");defineSymbol(text,main,textord,"","\\textdegree",!0);defineSymbol(math,main,textord,"","\\pounds");defineSymbol(math,main,textord,"","\\mathsterling",!0);defineSymbol(text,main,textord,"","\\pounds");defineSymbol(text,main,textord,"","\\textsterling",!0);defineSymbol(math,ams,textord,"","\\maltese");defineSymbol(text,ams,textord,"","\\maltese");var mathTextSymbols='0123456789/@."';for(var i$1=0;i$1<mathTextSymbols.length;i$1++){var ch=mathTextSymbols.charAt(i$1);defineSymbol(math,main,textord,ch,ch)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i=0;_i<textSymbols.length;_i++){var _ch=textSymbols.charAt(_i);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","");defineSymbol(text,ams,textord,"C","");defineSymbol(math,ams,textord,"H","");defineSymbol(text,ams,textord,"H","");defineSymbol(math,ams,textord,"N","");defineSymbol(text,ams,textord,"N","");defineSymbol(math,ams,textord,"P","");defineSymbol(text,ams,textord,"P","");defineSymbol(math,ams,textord,"Q","");defineSymbol(text,ams,textord,"Q","");defineSymbol(math,ams,textord,"R","");defineSymbol(text,ams,textord,"R","");defineSymbol(math,ams,textord,"Z","");defineSymbol(text,ams,textord,"Z","");defineSymbol(math,main,mathord,"h","");defineSymbol(text,main,mathord,"h","");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="";defineSymbol(math,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function(e,d){var b=e.charCodeAt(0),tt=e.charCodeAt(1),nt=(b-55296)*1024+(tt-56320)+65536,ot=d==="math"?0:1;if(119808<=nt&&nt<120484){var ht=Math.floor((nt-119808)/26);return[wideLatinLetterData[ht][2],wideLatinLetterData[ht][ot]]}else if(120782<=nt&&nt<=120831){var mt=Math.floor((nt-120782)/10);return[wideNumeralData[mt][2],wideNumeralData[mt][ot]]}else{if(nt===120485||nt===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][ot]];if(120486<nt&&nt<120782)return["",""];throw new ParseError("Unsupported character: "+e)}},lookupSymbol=function(e,d,b){return symbols[b][e]&&symbols[b][e].replace&&(e=symbols[b][e].replace),{value:e,metrics:getCharacterMetrics(e,d,b)}},makeSymbol=function(e,d,b,tt,nt){var ot=lookupSymbol(e,d,b),ht=ot.metrics;e=ot.value;var mt;if(ht){var gt=ht.italic;(b==="text"||tt&&tt.font==="mathit")&&(gt=0),mt=new SymbolNode(e,ht.height,ht.depth,gt,ht.skew,ht.width,nt)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+d+"' and mode '"+b+"'")),mt=new SymbolNode(e,0,0,0,0,0,nt);if(tt){mt.maxFontSize=tt.sizeMultiplier,tt.style.isTight()&&mt.classes.push("mtight");var yt=tt.getColor();yt&&(mt.style.color=yt)}return mt},mathsym=function(e,d,b,tt){return tt===void 0&&(tt=[]),b.font==="boldsymbol"&&lookupSymbol(e,"Main-Bold",d).metrics?makeSymbol(e,"Main-Bold",d,b,tt.concat(["mathbf"])):e==="\\"||symbols[d][e].font==="main"?makeSymbol(e,"Main-Regular",d,b,tt):makeSymbol(e,"AMS-Regular",d,b,tt.concat(["amsrm"]))},boldsymbol=function(e,d,b,tt,nt){return nt!=="textord"&&lookupSymbol(e,"Math-BoldItalic",d).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function(e,d,b){var tt=e.mode,nt=e.text,ot=["mord"],ht=tt==="math"||tt==="text"&&d.font,mt=ht?d.font:d.fontFamily,gt="",yt="";if(nt.charCodeAt(0)===55349&&([gt,yt]=wideCharacterFont(nt,tt)),gt.length>0)return makeSymbol(nt,gt,tt,d,ot.concat(yt));if(mt){var ft,st;if(mt==="boldsymbol"){var bt=boldsymbol(nt,tt,d,ot,b);ft=bt.fontName,st=[bt.fontClass]}else ht?(ft=fontMap[mt].fontName,st=[mt]):(ft=retrieveTextFontName(mt,d.fontWeight,d.fontShape),st=[mt,d.fontWeight,d.fontShape]);if(lookupSymbol(nt,ft,tt).metrics)return makeSymbol(nt,ft,tt,d,ot.concat(st));if(ligatures.hasOwnProperty(nt)&&ft.slice(0,10)==="Typewriter"){for(var vt=[],xt=0;xt<nt.length;xt++)vt.push(makeSymbol(nt[xt],ft,tt,d,ot.concat(st)));return makeFragment(vt)}}if(b==="mathord")return makeSymbol(nt,"Math-Italic",tt,d,ot.concat(["mathnormal"]));if(b==="textord"){var wt=symbols[tt][nt]&&symbols[tt][nt].font;if(wt==="ams"){var St=retrieveTextFontName("amsrm",d.fontWeight,d.fontShape);return makeSymbol(nt,St,tt,d,ot.concat("amsrm",d.fontWeight,d.fontShape))}else if(wt==="main"||!wt){var _t=retrieveTextFontName("textrm",d.fontWeight,d.fontShape);return makeSymbol(nt,_t,tt,d,ot.concat(d.fontWeight,d.fontShape))}else{var Tt=retrieveTextFontName(wt,d.fontWeight,d.fontShape);return makeSymbol(nt,Tt,tt,d,ot.concat(Tt,d.fontWeight,d.fontShape))}}else throw new Error("unexpected type: "+b+" in makeOrd")},canCombine=(s,e)=>{if(createClass(s.classes)!==createClass(e.classes)||s.skew!==e.skew||s.maxFontSize!==e.maxFontSize)return!1;if(s.classes.length===1){var d=s.classes[0];if(d==="mbin"||d==="mord")return!1}for(var b in s.style)if(s.style.hasOwnProperty(b)&&s.style[b]!==e.style[b])return!1;for(var tt in e.style)if(e.style.hasOwnProperty(tt)&&s.style[tt]!==e.style[tt])return!1;return!0},tryCombineChars=s=>{for(var e=0;e<s.length-1;e++){var d=s[e],b=s[e+1];d instanceof SymbolNode&&b instanceof SymbolNode&&canCombine(d,b)&&(d.text+=b.text,d.height=Math.max(d.height,b.height),d.depth=Math.max(d.depth,b.depth),d.italic=b.italic,s.splice(e+1,1),e--)}return s},sizeElementFromChildren=function(e){for(var d=0,b=0,tt=0,nt=0;nt<e.children.length;nt++){var ot=e.children[nt];ot.height>d&&(d=ot.height),ot.depth>b&&(b=ot.depth),ot.maxFontSize>tt&&(tt=ot.maxFontSize)}e.height=d,e.depth=b,e.maxFontSize=tt},makeSpan$2=function(e,d,b,tt){var nt=new Span(e,d,b,tt);return sizeElementFromChildren(nt),nt},makeSvgSpan=(s,e,d,b)=>new Span(s,e,d,b),makeLineSpan=function(e,d,b){var tt=makeSpan$2([e],[],d);return tt.height=Math.max(b||d.fontMetrics().defaultRuleThickness,d.minRuleThickness),tt.style.borderBottomWidth=makeEm(tt.height),tt.maxFontSize=1,tt},makeAnchor=function(e,d,b,tt){var nt=new Anchor(e,d,b,tt);return sizeElementFromChildren(nt),nt},makeFragment=function(e){var d=new DocumentFragment(e);return sizeElementFromChildren(d),d},wrapFragment=function(e,d){return e instanceof DocumentFragment?makeSpan$2([],[e],d):e},getVListChildrenAndDepth=function(e){if(e.positionType==="individualShift"){for(var d=e.children,b=[d[0]],tt=-d[0].shift-d[0].elem.depth,nt=tt,ot=1;ot<d.length;ot++){var ht=-d[ot].shift-nt-d[ot].elem.depth,mt=ht-(d[ot-1].elem.height+d[ot-1].elem.depth);nt=nt+ht,b.push({type:"kern",size:mt}),b.push(d[ot])}return{children:b,depth:tt}}var gt;if(e.positionType==="top"){for(var yt=e.positionData,ft=0;ft<e.children.length;ft++){var st=e.children[ft];yt-=st.type==="kern"?st.size:st.elem.height+st.elem.depth}gt=yt}else if(e.positionType==="bottom")gt=-e.positionData;else{var bt=e.children[0];if(bt.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")gt=-bt.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")gt=-bt.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:gt}},makeVList=function(e,d){for(var{children:b,depth:tt}=getVListChildrenAndDepth(e),nt=0,ot=0;ot<b.length;ot++){var ht=b[ot];if(ht.type==="elem"){var mt=ht.elem;nt=Math.max(nt,mt.maxFontSize,mt.height)}}nt+=2;var gt=makeSpan$2(["pstrut"],[]);gt.style.height=makeEm(nt);for(var yt=[],ft=tt,st=tt,bt=tt,vt=0;vt<b.length;vt++){var xt=b[vt];if(xt.type==="kern")bt+=xt.size;else{var wt=xt.elem,St=xt.wrapperClasses||[],_t=xt.wrapperStyle||{},Tt=makeSpan$2(St,[gt,wt],void 0,_t);Tt.style.top=makeEm(-nt-bt-wt.depth),xt.marginLeft&&(Tt.style.marginLeft=xt.marginLeft),xt.marginRight&&(Tt.style.marginRight=xt.marginRight),yt.push(Tt),bt+=wt.height+wt.depth}ft=Math.min(ft,bt),st=Math.max(st,bt)}var Et=makeSpan$2(["vlist"],yt);Et.style.height=makeEm(st);var kt;if(ft<0){var Mt=makeSpan$2([],[]),Ot=makeSpan$2(["vlist"],[Mt]);Ot.style.height=makeEm(-ft);var Dt=makeSpan$2(["vlist-s"],[new SymbolNode("")]);kt=[makeSpan$2(["vlist-r"],[Et,Dt]),makeSpan$2(["vlist-r"],[Ot])]}else kt=[makeSpan$2(["vlist-r"],[Et])];var At=makeSpan$2(["vlist-t"],kt);return kt.length===2&&At.classes.push("vlist-t2"),At.height=st,At.depth=-ft,At},makeGlue=(s,e)=>{var d=makeSpan$2(["mspace"],[],e),b=calculateSize$1(s,e);return d.style.marginRight=makeEm(b),d},retrieveTextFontName=function(e,d,b){var tt="";switch(e){case"amsrm":tt="AMS";break;case"textrm":tt="Main";break;case"textsf":tt="SansSerif";break;case"texttt":tt="Typewriter";break;default:tt=e}var nt;return d==="textbf"&&b==="textit"?nt="BoldItalic":d==="textbf"?nt="Bold":d==="textit"?nt="Italic":nt="Regular",tt+"-"+nt},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function(e,d){var[b,tt,nt]=svgData[e],ot=new PathNode(b),ht=new SvgNode([ot],{width:makeEm(tt),height:makeEm(nt),style:"width:"+makeEm(tt),viewBox:"0 0 "+1e3*tt+" "+1e3*nt,preserveAspectRatio:"xMinYMin"}),mt=makeSvgSpan(["overlay"],[ht],d);return mt.height=nt,mt.style.height=makeEm(nt),mt.style.width=makeEm(tt),mt},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(s){for(var{type:e,names:d,props:b,handler:tt,htmlBuilder:nt,mathmlBuilder:ot}=s,ht={type:e,numArgs:b.numArgs,argTypes:b.argTypes,allowedInArgument:!!b.allowedInArgument,allowedInText:!!b.allowedInText,allowedInMath:b.allowedInMath===void 0?!0:b.allowedInMath,numOptionalArgs:b.numOptionalArgs||0,infix:!!b.infix,primitive:!!b.primitive,handler:tt},mt=0;mt<d.length;++mt)_functions[d[mt]]=ht;e&&(nt&&(_htmlGroupBuilders[e]=nt),ot&&(_mathmlGroupBuilders[e]=ot))}function defineFunctionBuilders(s){var{type:e,htmlBuilder:d,mathmlBuilder:b}=s;defineFunction({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:d,mathmlBuilder:b})}var normalizeArgument=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ordargument=function(e){return e.type==="ordgroup"?e.body:[e]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function(e,d,b,tt){tt===void 0&&(tt=[null,null]);for(var nt=[],ot=0;ot<e.length;ot++){var ht=buildGroup$1(e[ot],d);if(ht instanceof DocumentFragment){var mt=ht.children;nt.push(...mt)}else nt.push(ht)}if(buildCommon.tryCombineChars(nt),!b)return nt;var gt=d;if(e.length===1){var yt=e[0];yt.type==="sizing"?gt=d.havingSize(yt.size):yt.type==="styling"&&(gt=d.havingStyle(styleMap$1[yt.style]))}var ft=makeSpan$1([tt[0]||"leftmost"],[],d),st=makeSpan$1([tt[1]||"rightmost"],[],d),bt=b==="root";return traverseNonSpaceNodes(nt,(vt,xt)=>{var wt=xt.classes[0],St=vt.classes[0];wt==="mbin"&&utils.contains(binRightCanceller,St)?xt.classes[0]="mord":St==="mbin"&&utils.contains(binLeftCanceller,wt)&&(vt.classes[0]="mord")},{node:ft},st,bt),traverseNonSpaceNodes(nt,(vt,xt)=>{var wt=getTypeOfDomTree(xt),St=getTypeOfDomTree(vt),_t=wt&&St?vt.hasClass("mtight")?tightSpacings[wt][St]:spacings[wt][St]:null;if(_t)return buildCommon.makeGlue(_t,gt)},{node:ft},st,bt),nt},traverseNonSpaceNodes=function s(e,d,b,tt,nt){tt&&e.push(tt);for(var ot=0;ot<e.length;ot++){var ht=e[ot],mt=checkPartialGroup(ht);if(mt){s(mt.children,d,b,null,nt);continue}var gt=!ht.hasClass("mspace");if(gt){var yt=d(ht,b.node);yt&&(b.insertAfter?b.insertAfter(yt):(e.unshift(yt),ot++))}gt?b.node=ht:nt&&ht.hasClass("newline")&&(b.node=makeSpan$1(["leftmost"])),b.insertAfter=(ft=>st=>{e.splice(ft+1,0,st),ot++})(ot)}tt&&e.pop()},checkPartialGroup=function(e){return e instanceof DocumentFragment||e instanceof Anchor||e instanceof Span&&e.hasClass("enclosing")?e:null},getOutermostNode=function s(e,d){var b=checkPartialGroup(e);if(b){var tt=b.children;if(tt.length){if(d==="right")return s(tt[tt.length-1],"right");if(d==="left")return s(tt[0],"left")}}return e},getTypeOfDomTree=function(e,d){return e?(d&&(e=getOutermostNode(e,d)),DomEnum[e.classes[0]]||null):null},makeNullDelimiter=function(e,d){var b=["nulldelimiter"].concat(e.baseSizingClasses());return makeSpan$1(d.concat(b))},buildGroup$1=function(e,d,b){if(!e)return makeSpan$1();if(_htmlGroupBuilders[e.type]){var tt=_htmlGroupBuilders[e.type](e,d);if(b&&d.size!==b.size){tt=makeSpan$1(d.sizingClasses(b),[tt],d);var nt=d.sizeMultiplier/b.sizeMultiplier;tt.height*=nt,tt.depth*=nt}return tt}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildHTMLUnbreakable(s,e){var d=makeSpan$1(["base"],s,e),b=makeSpan$1(["strut"]);return b.style.height=makeEm(d.height+d.depth),d.depth&&(b.style.verticalAlign=makeEm(-d.depth)),d.children.unshift(b),d}function buildHTML(s,e){var d=null;s.length===1&&s[0].type==="tag"&&(d=s[0].tag,s=s[0].body);var b=buildExpression$1(s,e,"root"),tt;b.length===2&&b[1].hasClass("tag")&&(tt=b.pop());for(var nt=[],ot=[],ht=0;ht<b.length;ht++)if(ot.push(b[ht]),b[ht].hasClass("mbin")||b[ht].hasClass("mrel")||b[ht].hasClass("allowbreak")){for(var mt=!1;ht<b.length-1&&b[ht+1].hasClass("mspace")&&!b[ht+1].hasClass("newline");)ht++,ot.push(b[ht]),b[ht].hasClass("nobreak")&&(mt=!0);mt||(nt.push(buildHTMLUnbreakable(ot,e)),ot=[])}else b[ht].hasClass("newline")&&(ot.pop(),ot.length>0&&(nt.push(buildHTMLUnbreakable(ot,e)),ot=[]),nt.push(b[ht]));ot.length>0&&nt.push(buildHTMLUnbreakable(ot,e));var gt;d?(gt=buildHTMLUnbreakable(buildExpression$1(d,e,!0)),gt.classes=["tag"],nt.push(gt)):tt&&nt.push(tt);var yt=makeSpan$1(["katex-html"],nt);if(yt.setAttribute("aria-hidden","true"),gt){var ft=gt.children[0];ft.style.height=makeEm(yt.height+yt.depth),yt.depth&&(ft.style.verticalAlign=makeEm(-yt.depth))}return yt}function newDocumentFragment(s){return new DocumentFragment(s)}class MathNode{constructor(e,d,b){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=d||[],this.classes=b||[]}setAttribute(e,d){this.attributes[e]=d}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&e.setAttribute(d,this.attributes[d]);this.classes.length>0&&(e.className=createClass(this.classes));for(var b=0;b<this.children.length;b++)e.appendChild(this.children[b].toNode());return e}toMarkup(){var e="<"+this.type;for(var d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&(e+=" "+d+'="',e+=utils.escape(this.attributes[d]),e+='"');this.classes.length>0&&(e+=' class ="'+utils.escape(createClass(this.classes))+'"'),e+=">";for(var b=0;b<this.children.length;b++)e+=this.children[b].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class TextNode{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",makeEm(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function(e,d,b){return symbols[d][e]&&symbols[d][e].replace&&e.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(e)&&b&&(b.fontFamily&&b.fontFamily.slice(4,6)==="tt"||b.font&&b.font.slice(4,6)==="tt"))&&(e=symbols[d][e].replace),new mathMLTree.TextNode(e)},makeRow=function(e){return e.length===1?e[0]:new mathMLTree.MathNode("mrow",e)},getVariant=function(e,d){if(d.fontFamily==="texttt")return"monospace";if(d.fontFamily==="textsf")return d.fontShape==="textit"&&d.fontWeight==="textbf"?"sans-serif-bold-italic":d.fontShape==="textit"?"sans-serif-italic":d.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(d.fontShape==="textit"&&d.fontWeight==="textbf")return"bold-italic";if(d.fontShape==="textit")return"italic";if(d.fontWeight==="textbf")return"bold";var b=d.font;if(!b||b==="mathnormal")return null;var tt=e.mode;if(b==="mathit")return"italic";if(b==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(b==="mathbf")return"bold";if(b==="mathbb")return"double-struck";if(b==="mathfrak")return"fraktur";if(b==="mathscr"||b==="mathcal")return"script";if(b==="mathsf")return"sans-serif";if(b==="mathtt")return"monospace";var nt=e.text;if(utils.contains(["\\imath","\\jmath"],nt))return null;symbols[tt][nt]&&symbols[tt][nt].replace&&(nt=symbols[tt][nt].replace);var ot=buildCommon.fontMap[b].fontName;return getCharacterMetrics(nt,ot,tt)?buildCommon.fontMap[b].variant:null},buildExpression=function(e,d,b){if(e.length===1){var tt=buildGroup(e[0],d);return b&&tt instanceof MathNode&&tt.type==="mo"&&(tt.setAttribute("lspace","0em"),tt.setAttribute("rspace","0em")),[tt]}for(var nt=[],ot,ht=0;ht<e.length;ht++){var mt=buildGroup(e[ht],d);if(mt instanceof MathNode&&ot instanceof MathNode){if(mt.type==="mtext"&&ot.type==="mtext"&&mt.getAttribute("mathvariant")===ot.getAttribute("mathvariant")){ot.children.push(...mt.children);continue}else if(mt.type==="mn"&&ot.type==="mn"){ot.children.push(...mt.children);continue}else if(mt.type==="mi"&&mt.children.length===1&&ot.type==="mn"){var gt=mt.children[0];if(gt instanceof TextNode&&gt.text==="."){ot.children.push(...mt.children);continue}}else if(ot.type==="mi"&&ot.children.length===1){var yt=ot.children[0];if(yt instanceof TextNode&&yt.text===""&&(mt.type==="mo"||mt.type==="mi"||mt.type==="mn")){var ft=mt.children[0];ft instanceof TextNode&&ft.text.length>0&&(ft.text=ft.text.slice(0,1)+""+ft.text.slice(1),nt.pop())}}}nt.push(mt),ot=mt}return nt},buildExpressionRow=function(e,d,b){return makeRow(buildExpression(e,d,b))},buildGroup=function(e,d){if(!e)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[e.type]){var b=_mathmlGroupBuilders[e.type](e,d);return b}else throw new ParseError("Got group of unknown type: '"+e.type+"'")};function buildMathML(s,e,d,b,tt){var nt=buildExpression(s,d),ot;nt.length===1&&nt[0]instanceof MathNode&&utils.contains(["mrow","mtable"],nt[0].type)?ot=nt[0]:ot=new mathMLTree.MathNode("mrow",nt);var ht=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(e)]);ht.setAttribute("encoding","application/x-tex");var mt=new mathMLTree.MathNode("semantics",[ot,ht]),gt=new mathMLTree.MathNode("math",[mt]);gt.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),b&&gt.setAttribute("display","block");var yt=tt?"katex":"katex-mathml";return buildCommon.makeSpan([yt],[gt])}var optionsFromSettings=function(e){return new Options({style:e.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},displayWrap=function(e,d){if(d.displayMode){var b=["katex-display"];d.leqno&&b.push("leqno"),d.fleqn&&b.push("fleqn"),e=buildCommon.makeSpan(b,[e])}return e},buildTree=function(e,d,b){var tt=optionsFromSettings(b),nt;if(b.output==="mathml")return buildMathML(e,d,tt,b.displayMode,!0);if(b.output==="html"){var ot=buildHTML(e,tt);nt=buildCommon.makeSpan(["katex"],[ot])}else{var ht=buildMathML(e,d,tt,b.displayMode,!1),mt=buildHTML(e,tt);nt=buildCommon.makeSpan(["katex"],[ht,mt])}return displayWrap(nt,b)},buildHTMLTree=function(e,d,b){var tt=optionsFromSettings(b),nt=buildHTML(e,tt),ot=buildCommon.makeSpan(["katex"],[nt]);return displayWrap(ot,b)},stretchyCodePoint={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mathMLnode=function(e){var d=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[e.replace(/^\\/,"")])]);return d.setAttribute("stretchy","true"),d},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function(e){return e.type==="ordgroup"?e.body.length:1},svgSpan=function(e,d){function b(){var ht=4e5,mt=e.label.slice(1);if(utils.contains(["widehat","widecheck","widetilde","utilde"],mt)){var gt=e,yt=groupLength(gt.base),ft,st,bt;if(yt>5)mt==="widehat"||mt==="widecheck"?(ft=420,ht=2364,bt=.42,st=mt+"4"):(ft=312,ht=2340,bt=.34,st="tilde4");else{var vt=[1,1,2,2,3,3][yt];mt==="widehat"||mt==="widecheck"?(ht=[0,1062,2364,2364,2364][vt],ft=[0,239,300,360,420][vt],bt=[0,.24,.3,.3,.36,.42][vt],st=mt+vt):(ht=[0,600,1033,2339,2340][vt],ft=[0,260,286,306,312][vt],bt=[0,.26,.286,.3,.306,.34][vt],st="tilde"+vt)}var xt=new PathNode(st),wt=new SvgNode([xt],{width:"100%",height:makeEm(bt),viewBox:"0 0 "+ht+" "+ft,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[wt],d),minWidth:0,height:bt}}else{var St=[],_t=katexImagesData[mt],[Tt,Et,kt]=_t,Mt=kt/1e3,Ot=Tt.length,Dt,At;if(Ot===1){var It=_t[3];Dt=["hide-tail"],At=[It]}else if(Ot===2)Dt=["halfarrow-left","halfarrow-right"],At=["xMinYMin","xMaxYMin"];else if(Ot===3)Dt=["brace-left","brace-center","brace-right"],At=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Ot+" children.");for(var jt=0;jt<Ot;jt++){var qt=new PathNode(Tt[jt]),Jt=new SvgNode([qt],{width:"400em",height:makeEm(Mt),viewBox:"0 0 "+ht+" "+kt,preserveAspectRatio:At[jt]+" slice"}),Bt=buildCommon.makeSvgSpan([Dt[jt]],[Jt],d);if(Ot===1)return{span:Bt,minWidth:Et,height:Mt};Bt.style.height=makeEm(Mt),St.push(Bt)}return{span:buildCommon.makeSpan(["stretchy"],St,d),minWidth:Et,height:Mt}}}var{span:tt,minWidth:nt,height:ot}=b();return tt.height=ot,tt.style.height=makeEm(ot),nt>0&&(tt.style.minWidth=makeEm(nt)),tt},encloseSpan=function(e,d,b,tt,nt){var ot,ht=e.height+e.depth+b+tt;if(/fbox|color|angl/.test(d)){if(ot=buildCommon.makeSpan(["stretchy",d],[],nt),d==="fbox"){var mt=nt.color&&nt.getColor();mt&&(ot.style.borderColor=mt)}}else{var gt=[];/^[bx]cancel$/.test(d)&&gt.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(d)&&gt.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var yt=new SvgNode(gt,{width:"100%",height:makeEm(ht)});ot=buildCommon.makeSvgSpan([],[yt],nt)}return ot.height=ht,ot.style.height=makeEm(ht),ot},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(s,e){if(!s||s.type!==e)throw new Error("Expected node of type "+e+", but got "+(s?"node of type "+s.type:String(s)));return s}function assertSymbolNodeType(s){var e=checkSymbolNodeType(s);if(!e)throw new Error("Expected node of symbol group type, but got "+(s?"node of type "+s.type:String(s)));return e}function checkSymbolNodeType(s){return s&&(s.type==="atom"||NON_ATOMS.hasOwnProperty(s.type))?s:null}var htmlBuilder$a=(s,e)=>{var d,b,tt;s&&s.type==="supsub"?(b=assertNodeType(s.base,"accent"),d=b.base,s.base=d,tt=assertSpan(buildGroup$1(s,e)),s.base=b):(b=assertNodeType(s,"accent"),d=b.base);var nt=buildGroup$1(d,e.havingCrampedStyle()),ot=b.isShifty&&utils.isCharacterBox(d),ht=0;if(ot){var mt=utils.getBaseElem(d),gt=buildGroup$1(mt,e.havingCrampedStyle());ht=assertSymbolDomNode(gt).skew}var yt=b.label==="\\c",ft=yt?nt.height+nt.depth:Math.min(nt.height,e.fontMetrics().xHeight),st;if(b.isStretchy)st=stretchy.svgSpan(b,e),st=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:nt},{type:"elem",elem:st,wrapperClasses:["svg-align"],wrapperStyle:ht>0?{width:"calc(100% - "+makeEm(2*ht)+")",marginLeft:makeEm(2*ht)}:void 0}]},e);else{var bt,vt;b.label==="\\vec"?(bt=buildCommon.staticSvg("vec",e),vt=buildCommon.svgData.vec[1]):(bt=buildCommon.makeOrd({mode:b.mode,text:b.label},e,"textord"),bt=assertSymbolDomNode(bt),bt.italic=0,vt=bt.width,yt&&(ft+=bt.depth)),st=buildCommon.makeSpan(["accent-body"],[bt]);var xt=b.label==="\\textcircled";xt&&(st.classes.push("accent-full"),ft=nt.height);var wt=ht;xt||(wt-=vt/2),st.style.left=makeEm(wt),b.label==="\\textcircled"&&(st.style.top=".2em"),st=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:nt},{type:"kern",size:-ft},{type:"elem",elem:st}]},e)}var St=buildCommon.makeSpan(["mord","accent"],[st],e);return tt?(tt.children[0]=St,tt.height=Math.max(St.height,tt.height),tt.classes[0]="mord",tt):St},mathmlBuilder$9=(s,e)=>{var d=s.isStretchy?stretchy.mathMLnode(s.label):new mathMLTree.MathNode("mo",[makeText(s.label,s.mode)]),b=new mathMLTree.MathNode("mover",[buildGroup(s.base,e),d]);return b.setAttribute("accent","true"),b},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(s=>"\\"+s).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(s,e)=>{var d=normalizeArgument(e[0]),b=!NON_STRETCHY_ACCENT_REGEX.test(s.funcName),tt=!b||s.funcName==="\\widehat"||s.funcName==="\\widetilde"||s.funcName==="\\widecheck";return{type:"accent",mode:s.parser.mode,label:s.funcName,isStretchy:b,isShifty:tt,base:d}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(s,e)=>{var d=e[0],b=s.parser.mode;return b==="math"&&(s.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+s.funcName+" works only in text mode"),b="text"),{type:"accent",mode:b,label:s.funcName,isStretchy:!1,isShifty:!0,base:d}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(s,e)=>{var{parser:d,funcName:b}=s,tt=e[0];return{type:"accentUnder",mode:d.mode,label:b,base:tt}},htmlBuilder:(s,e)=>{var d=buildGroup$1(s.base,e),b=stretchy.svgSpan(s,e),tt=s.label==="\\utilde"?.12:0,nt=buildCommon.makeVList({positionType:"top",positionData:d.height,children:[{type:"elem",elem:b,wrapperClasses:["svg-align"]},{type:"kern",size:tt},{type:"elem",elem:d}]},e);return buildCommon.makeSpan(["mord","accentunder"],[nt],e)},mathmlBuilder:(s,e)=>{var d=stretchy.mathMLnode(s.label),b=new mathMLTree.MathNode("munder",[buildGroup(s.base,e),d]);return b.setAttribute("accentunder","true"),b}});var paddedNode=s=>{var e=new mathMLTree.MathNode("mpadded",s?[s]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(s,e,d){var{parser:b,funcName:tt}=s;return{type:"xArrow",mode:b.mode,label:tt,body:e[0],below:d[0]}},htmlBuilder(s,e){var d=e.style,b=e.havingStyle(d.sup()),tt=buildCommon.wrapFragment(buildGroup$1(s.body,b,e),e),nt=s.label.slice(0,2)==="\\x"?"x":"cd";tt.classes.push(nt+"-arrow-pad");var ot;s.below&&(b=e.havingStyle(d.sub()),ot=buildCommon.wrapFragment(buildGroup$1(s.below,b,e),e),ot.classes.push(nt+"-arrow-pad"));var ht=stretchy.svgSpan(s,e),mt=-e.fontMetrics().axisHeight+.5*ht.height,gt=-e.fontMetrics().axisHeight-.5*ht.height-.111;(tt.depth>.25||s.label==="\\xleftequilibrium")&&(gt-=tt.depth);var yt;if(ot){var ft=-e.fontMetrics().axisHeight+ot.height+.5*ht.height+.111;yt=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:tt,shift:gt},{type:"elem",elem:ht,shift:mt},{type:"elem",elem:ot,shift:ft}]},e)}else yt=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:tt,shift:gt},{type:"elem",elem:ht,shift:mt}]},e);return yt.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[yt],e)},mathmlBuilder(s,e){var d=stretchy.mathMLnode(s.label);d.setAttribute("minsize",s.label.charAt(0)==="x"?"1.75em":"3.0em");var b;if(s.body){var tt=paddedNode(buildGroup(s.body,e));if(s.below){var nt=paddedNode(buildGroup(s.below,e));b=new mathMLTree.MathNode("munderover",[d,nt,tt])}else b=new mathMLTree.MathNode("mover",[d,tt])}else if(s.below){var ot=paddedNode(buildGroup(s.below,e));b=new mathMLTree.MathNode("munder",[d,ot])}else b=paddedNode(),b=new mathMLTree.MathNode("mover",[d,b]);return b}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(s,e){var d=buildExpression$1(s.body,e,!0);return makeSpan([s.mclass],d,e)}function mathmlBuilder$8(s,e){var d,b=buildExpression(s.body,e);return s.mclass==="minner"?d=new mathMLTree.MathNode("mpadded",b):s.mclass==="mord"?s.isCharacterBox?(d=b[0],d.type="mi"):d=new mathMLTree.MathNode("mi",b):(s.isCharacterBox?(d=b[0],d.type="mo"):d=new mathMLTree.MathNode("mo",b),s.mclass==="mbin"?(d.attributes.lspace="0.22em",d.attributes.rspace="0.22em"):s.mclass==="mpunct"?(d.attributes.lspace="0em",d.attributes.rspace="0.17em"):s.mclass==="mopen"||s.mclass==="mclose"?(d.attributes.lspace="0em",d.attributes.rspace="0em"):s.mclass==="minner"&&(d.attributes.lspace="0.0556em",d.attributes.width="+0.1111em")),d}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(s,e){var{parser:d,funcName:b}=s,tt=e[0];return{type:"mclass",mode:d.mode,mclass:"m"+b.slice(5),body:ordargument(tt),isCharacterBox:utils.isCharacterBox(tt)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=s=>{var e=s.type==="ordgroup"&&s.body.length?s.body[0]:s;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(s,e){var{parser:d}=s;return{type:"mclass",mode:d.mode,mclass:binrelClass(e[0]),body:ordargument(e[1]),isCharacterBox:utils.isCharacterBox(e[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(s,e){var{parser:d,funcName:b}=s,tt=e[1],nt=e[0],ot;b!=="\\stackrel"?ot=binrelClass(tt):ot="mrel";var ht={type:"op",mode:tt.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:b!=="\\stackrel",body:ordargument(tt)},mt={type:"supsub",mode:nt.mode,base:ht,sup:b==="\\underset"?null:nt,sub:b==="\\underset"?nt:null};return{type:"mclass",mode:d.mode,mclass:ot,body:[mt],isCharacterBox:utils.isCharacterBox(mt)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(s,e){var{parser:d}=s;return{type:"pmb",mode:d.mode,mclass:binrelClass(e[0]),body:ordargument(e[0])}},htmlBuilder(s,e){var d=buildExpression$1(s.body,e,!0),b=buildCommon.makeSpan([s.mclass],d,e);return b.style.textShadow="0.02em 0.01em 0.04px",b},mathmlBuilder(s,e){var d=buildExpression(s.body,e),b=new mathMLTree.MathNode("mstyle",d);return b.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),b}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=s=>s.type==="textord"&&s.text==="@",isLabelEnd=(s,e)=>(s.type==="mathord"||s.type==="atom")&&s.text===e;function cdArrow(s,e,d){var b=cdArrowFunctionName[s];switch(b){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return d.callFunction(b,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var tt=d.callFunction("\\\\cdleft",[e[0]],[]),nt={type:"atom",text:b,mode:"math",family:"rel"},ot=d.callFunction("\\Big",[nt],[]),ht=d.callFunction("\\\\cdright",[e[1]],[]),mt={type:"ordgroup",mode:"math",body:[tt,ot,ht]};return d.callFunction("\\\\cdparent",[mt],[])}case"\\\\cdlongequal":return d.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var gt={type:"textord",text:"\\Vert",mode:"math"};return d.callFunction("\\Big",[gt],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(s){var e=[];for(s.gullet.beginGroup(),s.gullet.macros.set("\\cr","\\\\\\relax"),s.gullet.beginGroup();;){e.push(s.parseExpression(!1,"\\\\")),s.gullet.endGroup(),s.gullet.beginGroup();var d=s.fetch().text;if(d==="&"||d==="\\\\")s.consume();else if(d==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",s.nextToken)}for(var b=[],tt=[b],nt=0;nt<e.length;nt++){for(var ot=e[nt],ht=newCell(),mt=0;mt<ot.length;mt++)if(!isStartOfArrow(ot[mt]))ht.body.push(ot[mt]);else{b.push(ht),mt+=1;var gt=assertSymbolNodeType(ot[mt]).text,yt=new Array(2);if(yt[0]={type:"ordgroup",mode:"math",body:[]},yt[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(gt)>-1))if("<>AV".indexOf(gt)>-1)for(var ft=0;ft<2;ft++){for(var st=!0,bt=mt+1;bt<ot.length;bt++){if(isLabelEnd(ot[bt],gt)){st=!1,mt=bt;break}if(isStartOfArrow(ot[bt]))throw new ParseError("Missing a "+gt+" character to complete a CD arrow.",ot[bt]);yt[ft].body.push(ot[bt])}if(st)throw new ParseError("Missing a "+gt+" character to complete a CD arrow.",ot[mt])}else throw new ParseError('Expected one of "<>AV=|." after @',ot[mt]);var vt=cdArrow(gt,yt,s),xt={type:"styling",body:[vt],mode:"math",style:"display"};b.push(xt),ht=newCell()}nt%2===0?b.push(ht):b.shift(),b=[],tt.push(b)}s.gullet.endGroup(),s.gullet.endGroup();var wt=new Array(tt[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:tt,arraystretch:1,addJot:!0,rowGaps:[null],cols:wt,colSeparationType:"CD",hLinesBeforeRow:new Array(tt.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(s,e){var{parser:d,funcName:b}=s;return{type:"cdlabel",mode:d.mode,side:b.slice(4),label:e[0]}},htmlBuilder(s,e){var d=e.havingStyle(e.style.sup()),b=buildCommon.wrapFragment(buildGroup$1(s.label,d,e),e);return b.classes.push("cd-label-"+s.side),b.style.bottom=makeEm(.8-b.depth),b.height=0,b.depth=0,b},mathmlBuilder(s,e){var d=new mathMLTree.MathNode("mrow",[buildGroup(s.label,e)]);return d=new mathMLTree.MathNode("mpadded",[d]),d.setAttribute("width","0"),s.side==="left"&&d.setAttribute("lspace","-1width"),d.setAttribute("voffset","0.7em"),d=new mathMLTree.MathNode("mstyle",[d]),d.setAttribute("displaystyle","false"),d.setAttribute("scriptlevel","1"),d}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(s,e){var{parser:d}=s;return{type:"cdlabelparent",mode:d.mode,fragment:e[0]}},htmlBuilder(s,e){var d=buildCommon.wrapFragment(buildGroup$1(s.fragment,e),e);return d.classes.push("cd-vert-arrow"),d},mathmlBuilder(s,e){return new mathMLTree.MathNode("mrow",[buildGroup(s.fragment,e)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(s,e){for(var{parser:d}=s,b=assertNodeType(e[0],"ordgroup"),tt=b.body,nt="",ot=0;ot<tt.length;ot++){var ht=assertNodeType(tt[ot],"textord");nt+=ht.text}var mt=parseInt(nt),gt;if(isNaN(mt))throw new ParseError("\\@char has non-numeric argument "+nt);if(mt<0||mt>=1114111)throw new ParseError("\\@char with invalid code point "+nt);return mt<=65535?gt=String.fromCharCode(mt):(mt-=65536,gt=String.fromCharCode((mt>>10)+55296,(mt&1023)+56320)),{type:"textord",mode:d.mode,text:gt}}});var htmlBuilder$8=(s,e)=>{var d=buildExpression$1(s.body,e.withColor(s.color),!1);return buildCommon.makeFragment(d)},mathmlBuilder$7=(s,e)=>{var d=buildExpression(s.body,e.withColor(s.color)),b=new mathMLTree.MathNode("mstyle",d);return b.setAttribute("mathcolor",s.color),b};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(s,e){var{parser:d}=s,b=assertNodeType(e[0],"color-token").color,tt=e[1];return{type:"color",mode:d.mode,color:b,body:ordargument(tt)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(s,e){var{parser:d,breakOnTokenText:b}=s,tt=assertNodeType(e[0],"color-token").color;d.gullet.macros.set("\\current@color",tt);var nt=d.parseExpression(!0,b);return{type:"color",mode:d.mode,color:tt,body:nt}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(s,e,d){var{parser:b}=s,tt=b.gullet.future().text==="["?b.parseSizeGroup(!0):null,nt=!b.settings.displayMode||!b.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:b.mode,newLine:nt,size:tt&&assertNodeType(tt,"size").value}},htmlBuilder(s,e){var d=buildCommon.makeSpan(["mspace"],[],e);return s.newLine&&(d.classes.push("newline"),s.size&&(d.style.marginTop=makeEm(calculateSize$1(s.size,e)))),d},mathmlBuilder(s,e){var d=new mathMLTree.MathNode("mspace");return s.newLine&&(d.setAttribute("linebreak","newline"),s.size&&d.setAttribute("height",makeEm(calculateSize$1(s.size,e)))),d}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=s=>{var e=s.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ParseError("Expected a control sequence",s);return e},getRHS=s=>{var e=s.gullet.popToken();return e.text==="="&&(e=s.gullet.popToken(),e.text===" "&&(e=s.gullet.popToken())),e},letCommand=(s,e,d,b)=>{var tt=s.gullet.macros.get(d.text);tt==null&&(d.noexpand=!0,tt={tokens:[d],numArgs:0,unexpandable:!s.gullet.isExpandable(d.text)}),s.gullet.macros.set(e,tt,b)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(s){var{parser:e,funcName:d}=s;e.consumeSpaces();var b=e.fetch();if(globalMap[b.text])return(d==="\\global"||d==="\\\\globallong")&&(b.text=globalMap[b.text]),assertNodeType(e.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",b)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s){var{parser:e,funcName:d}=s,b=e.gullet.popToken(),tt=b.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(tt))throw new ParseError("Expected a control sequence",b);for(var nt=0,ot,ht=[[]];e.gullet.future().text!=="{";)if(b=e.gullet.popToken(),b.text==="#"){if(e.gullet.future().text==="{"){ot=e.gullet.future(),ht[nt].push("{");break}if(b=e.gullet.popToken(),!/^[1-9]$/.test(b.text))throw new ParseError('Invalid argument number "'+b.text+'"');if(parseInt(b.text)!==nt+1)throw new ParseError('Argument number "'+b.text+'" out of order');nt++,ht.push([])}else{if(b.text==="EOF")throw new ParseError("Expected a macro definition");ht[nt].push(b.text)}var{tokens:mt}=e.gullet.consumeArg();return ot&&mt.unshift(ot),(d==="\\edef"||d==="\\xdef")&&(mt=e.gullet.expandTokens(mt),mt.reverse()),e.gullet.macros.set(tt,{tokens:mt,numArgs:nt,delimiters:ht},d===globalMap[d]),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s){var{parser:e,funcName:d}=s,b=checkControlSequence(e.gullet.popToken());e.gullet.consumeSpaces();var tt=getRHS(e);return letCommand(e,b,tt,d==="\\\\globallet"),{type:"internal",mode:e.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s){var{parser:e,funcName:d}=s,b=checkControlSequence(e.gullet.popToken()),tt=e.gullet.popToken(),nt=e.gullet.popToken();return letCommand(e,b,nt,d==="\\\\globalfuture"),e.gullet.pushToken(nt),e.gullet.pushToken(tt),{type:"internal",mode:e.mode}}});var getMetrics=function(e,d,b){var tt=symbols.math[e]&&symbols.math[e].replace,nt=getCharacterMetrics(tt||e,d,b);if(!nt)throw new Error("Unsupported symbol "+e+" and font size "+d+".");return nt},styleWrap=function(e,d,b,tt){var nt=b.havingBaseStyle(d),ot=buildCommon.makeSpan(tt.concat(nt.sizingClasses(b)),[e],b),ht=nt.sizeMultiplier/b.sizeMultiplier;return ot.height*=ht,ot.depth*=ht,ot.maxFontSize=nt.sizeMultiplier,ot},centerSpan=function(e,d,b){var tt=d.havingBaseStyle(b),nt=(1-d.sizeMultiplier/tt.sizeMultiplier)*d.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=makeEm(nt),e.height-=nt,e.depth+=nt},makeSmallDelim=function(e,d,b,tt,nt,ot){var ht=buildCommon.makeSymbol(e,"Main-Regular",nt,tt),mt=styleWrap(ht,d,tt,ot);return b&&centerSpan(mt,tt,d),mt},mathrmSize=function(e,d,b,tt){return buildCommon.makeSymbol(e,"Size"+d+"-Regular",b,tt)},makeLargeDelim=function(e,d,b,tt,nt,ot){var ht=mathrmSize(e,d,nt,tt),mt=styleWrap(buildCommon.makeSpan(["delimsizing","size"+d],[ht],tt),Style$1.TEXT,tt,ot);return b&&centerSpan(mt,tt,Style$1.TEXT),mt},makeGlyphSpan=function(e,d,b){var tt;d==="Size1-Regular"?tt="delim-size1":tt="delim-size4";var nt=buildCommon.makeSpan(["delimsizinginner",tt],[buildCommon.makeSpan([],[buildCommon.makeSymbol(e,d,b)])]);return{type:"elem",elem:nt}},makeInner=function(e,d,b){var tt=fontMetricsData["Size4-Regular"][e.charCodeAt(0)]?fontMetricsData["Size4-Regular"][e.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][e.charCodeAt(0)][4],nt=new PathNode("inner",innerPath(e,Math.round(1e3*d))),ot=new SvgNode([nt],{width:makeEm(tt),height:makeEm(d),style:"width:"+makeEm(tt),viewBox:"0 0 "+1e3*tt+" "+Math.round(1e3*d),preserveAspectRatio:"xMinYMin"}),ht=buildCommon.makeSvgSpan([],[ot],b);return ht.height=d,ht.style.height=makeEm(d),ht.style.width=makeEm(tt),{type:"elem",elem:ht}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function(e,d,b,tt,nt,ot){var ht,mt,gt,yt,ft="",st=0;ht=gt=yt=e,mt=null;var bt="Size1-Regular";e==="\\uparrow"?gt=yt="":e==="\\Uparrow"?gt=yt="":e==="\\downarrow"?ht=gt="":e==="\\Downarrow"?ht=gt="":e==="\\updownarrow"?(ht="\\uparrow",gt="",yt="\\downarrow"):e==="\\Updownarrow"?(ht="\\Uparrow",gt="",yt="\\Downarrow"):utils.contains(verts,e)?(gt="",ft="vert",st=333):utils.contains(doubleVerts,e)?(gt="",ft="doublevert",st=556):e==="["||e==="\\lbrack"?(ht="",gt="",yt="",bt="Size4-Regular",ft="lbrack",st=667):e==="]"||e==="\\rbrack"?(ht="",gt="",yt="",bt="Size4-Regular",ft="rbrack",st=667):e==="\\lfloor"||e===""?(gt=ht="",yt="",bt="Size4-Regular",ft="lfloor",st=667):e==="\\lceil"||e===""?(ht="",gt=yt="",bt="Size4-Regular",ft="lceil",st=667):e==="\\rfloor"||e===""?(gt=ht="",yt="",bt="Size4-Regular",ft="rfloor",st=667):e==="\\rceil"||e===""?(ht="",gt=yt="",bt="Size4-Regular",ft="rceil",st=667):e==="("||e==="\\lparen"?(ht="",gt="",yt="",bt="Size4-Regular",ft="lparen",st=875):e===")"||e==="\\rparen"?(ht="",gt="",yt="",bt="Size4-Regular",ft="rparen",st=875):e==="\\{"||e==="\\lbrace"?(ht="",mt="",yt="",gt="",bt="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(ht="",mt="",yt="",gt="",bt="Size4-Regular"):e==="\\lgroup"||e===""?(ht="",yt="",gt="",bt="Size4-Regular"):e==="\\rgroup"||e===""?(ht="",yt="",gt="",bt="Size4-Regular"):e==="\\lmoustache"||e===""?(ht="",yt="",gt="",bt="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(ht="",yt="",gt="",bt="Size4-Regular");var vt=getMetrics(ht,bt,nt),xt=vt.height+vt.depth,wt=getMetrics(gt,bt,nt),St=wt.height+wt.depth,_t=getMetrics(yt,bt,nt),Tt=_t.height+_t.depth,Et=0,kt=1;if(mt!==null){var Mt=getMetrics(mt,bt,nt);Et=Mt.height+Mt.depth,kt=2}var Ot=xt+Tt+Et,Dt=Math.max(0,Math.ceil((d-Ot)/(kt*St))),At=Ot+Dt*kt*St,It=tt.fontMetrics().axisHeight;b&&(It*=tt.sizeMultiplier);var jt=At/2-It,qt=[];if(ft.length>0){var Jt=At-xt-Tt,Bt=Math.round(At*1e3),Wt=tallDelim(ft,Math.round(Jt*1e3)),Lt=new PathNode(ft,Wt),Ut=(st/1e3).toFixed(3)+"em",tn=(Bt/1e3).toFixed(3)+"em",Kt=new SvgNode([Lt],{width:Ut,height:tn,viewBox:"0 0 "+st+" "+Bt}),an=buildCommon.makeSvgSpan([],[Kt],tt);an.height=Bt/1e3,an.style.width=Ut,an.style.height=tn,qt.push({type:"elem",elem:an})}else{if(qt.push(makeGlyphSpan(yt,bt,nt)),qt.push(lap),mt===null){var ln=At-xt-Tt+2*lapInEms;qt.push(makeInner(gt,ln,tt))}else{var hn=(At-xt-Tt-Et)/2+2*lapInEms;qt.push(makeInner(gt,hn,tt)),qt.push(lap),qt.push(makeGlyphSpan(mt,bt,nt)),qt.push(lap),qt.push(makeInner(gt,hn,tt))}qt.push(lap),qt.push(makeGlyphSpan(ht,bt,nt))}var kn=tt.havingBaseStyle(Style$1.TEXT),Zt=buildCommon.makeVList({positionType:"bottom",positionData:jt,children:qt},kn);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[Zt],kn),Style$1.TEXT,tt,ot)},vbPad=80,emPad=.08,sqrtSvg=function(e,d,b,tt,nt){var ot=sqrtPath(e,tt,b),ht=new PathNode(e,ot),mt=new SvgNode([ht],{width:"400em",height:makeEm(d),viewBox:"0 0 400000 "+b,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[mt],nt)},makeSqrtImage=function(e,d){var b=d.havingBaseSizing(),tt=traverseSequence("\\surd",e*b.sizeMultiplier,stackLargeDelimiterSequence,b),nt=b.sizeMultiplier,ot=Math.max(0,d.minRuleThickness-d.fontMetrics().sqrtRuleThickness),ht,mt=0,gt=0,yt=0,ft;return tt.type==="small"?(yt=1e3+1e3*ot+vbPad,e<1?nt=1:e<1.4&&(nt=.7),mt=(1+ot+emPad)/nt,gt=(1+ot)/nt,ht=sqrtSvg("sqrtMain",mt,yt,ot,d),ht.style.minWidth="0.853em",ft=.833/nt):tt.type==="large"?(yt=(1e3+vbPad)*sizeToMaxHeight[tt.size],gt=(sizeToMaxHeight[tt.size]+ot)/nt,mt=(sizeToMaxHeight[tt.size]+ot+emPad)/nt,ht=sqrtSvg("sqrtSize"+tt.size,mt,yt,ot,d),ht.style.minWidth="1.02em",ft=1/nt):(mt=e+ot+emPad,gt=e+ot,yt=Math.floor(1e3*e+ot)+vbPad,ht=sqrtSvg("sqrtTall",mt,yt,ot,d),ht.style.minWidth="0.742em",ft=1.056),ht.height=gt,ht.style.height=makeEm(mt),{span:ht,advanceWidth:ft,ruleWidth:(d.fontMetrics().sqrtRuleThickness+ot)*nt}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function(e,d,b,tt,nt){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),utils.contains(stackLargeDelimiters,e)||utils.contains(stackNeverDelimiters,e))return makeLargeDelim(e,d,!1,b,tt,nt);if(utils.contains(stackAlwaysDelimiters,e))return makeStackedDelim(e,sizeToMaxHeight[d],!1,b,tt,nt);throw new ParseError("Illegal delimiter: '"+e+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},traverseSequence=function(e,d,b,tt){for(var nt=Math.min(2,3-tt.style.size),ot=nt;ot<b.length&&b[ot].type!=="stack";ot++){var ht=getMetrics(e,delimTypeToFont(b[ot]),"math"),mt=ht.height+ht.depth;if(b[ot].type==="small"){var gt=tt.havingBaseStyle(b[ot].style);mt*=gt.sizeMultiplier}if(mt>d)return b[ot]}return b[b.length-1]},makeCustomSizedDelim=function(e,d,b,tt,nt,ot){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var ht;utils.contains(stackNeverDelimiters,e)?ht=stackNeverDelimiterSequence:utils.contains(stackLargeDelimiters,e)?ht=stackLargeDelimiterSequence:ht=stackAlwaysDelimiterSequence;var mt=traverseSequence(e,d,ht,tt);return mt.type==="small"?makeSmallDelim(e,mt.style,b,tt,nt,ot):mt.type==="large"?makeLargeDelim(e,mt.size,b,tt,nt,ot):makeStackedDelim(e,d,b,tt,nt,ot)},makeLeftRightDelim=function(e,d,b,tt,nt,ot){var ht=tt.fontMetrics().axisHeight*tt.sizeMultiplier,mt=901,gt=5/tt.fontMetrics().ptPerEm,yt=Math.max(d-ht,b+ht),ft=Math.max(yt/500*mt,2*yt-gt);return makeCustomSizedDelim(e,ft,!0,tt,nt,ot)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(s,e){var d=checkSymbolNodeType(s);if(d&&utils.contains(delimiters,d.text))return d;throw d?new ParseError("Invalid delimiter '"+d.text+"' after '"+e.funcName+"'",s):new ParseError("Invalid delimiter type '"+s.type+"'",s)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(s,e)=>{var d=checkDelimiter(e[0],s);return{type:"delimsizing",mode:s.parser.mode,size:delimiterSizes[s.funcName].size,mclass:delimiterSizes[s.funcName].mclass,delim:d.text}},htmlBuilder:(s,e)=>s.delim==="."?buildCommon.makeSpan([s.mclass]):delimiter.sizedDelim(s.delim,s.size,e,s.mode,[s.mclass]),mathmlBuilder:s=>{var e=[];s.delim!=="."&&e.push(makeText(s.delim,s.mode));var d=new mathMLTree.MathNode("mo",e);s.mclass==="mopen"||s.mclass==="mclose"?d.setAttribute("fence","true"):d.setAttribute("fence","false"),d.setAttribute("stretchy","true");var b=makeEm(delimiter.sizeToMaxHeight[s.size]);return d.setAttribute("minsize",b),d.setAttribute("maxsize",b),d}});function assertParsed(s){if(!s.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(s,e)=>{var d=s.parser.gullet.macros.get("\\current@color");if(d&&typeof d!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:s.parser.mode,delim:checkDelimiter(e[0],s).text,color:d}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(s,e)=>{var d=checkDelimiter(e[0],s),b=s.parser;++b.leftrightDepth;var tt=b.parseExpression(!1);--b.leftrightDepth,b.expect("\\right",!1);var nt=assertNodeType(b.parseFunction(),"leftright-right");return{type:"leftright",mode:b.mode,body:tt,left:d.text,right:nt.delim,rightColor:nt.color}},htmlBuilder:(s,e)=>{assertParsed(s);for(var d=buildExpression$1(s.body,e,!0,["mopen","mclose"]),b=0,tt=0,nt=!1,ot=0;ot<d.length;ot++)d[ot].isMiddle?nt=!0:(b=Math.max(d[ot].height,b),tt=Math.max(d[ot].depth,tt));b*=e.sizeMultiplier,tt*=e.sizeMultiplier;var ht;if(s.left==="."?ht=makeNullDelimiter(e,["mopen"]):ht=delimiter.leftRightDelim(s.left,b,tt,e,s.mode,["mopen"]),d.unshift(ht),nt)for(var mt=1;mt<d.length;mt++){var gt=d[mt],yt=gt.isMiddle;yt&&(d[mt]=delimiter.leftRightDelim(yt.delim,b,tt,yt.options,s.mode,[]))}var ft;if(s.right===".")ft=makeNullDelimiter(e,["mclose"]);else{var st=s.rightColor?e.withColor(s.rightColor):e;ft=delimiter.leftRightDelim(s.right,b,tt,st,s.mode,["mclose"])}return d.push(ft),buildCommon.makeSpan(["minner"],d,e)},mathmlBuilder:(s,e)=>{assertParsed(s);var d=buildExpression(s.body,e);if(s.left!=="."){var b=new mathMLTree.MathNode("mo",[makeText(s.left,s.mode)]);b.setAttribute("fence","true"),d.unshift(b)}if(s.right!=="."){var tt=new mathMLTree.MathNode("mo",[makeText(s.right,s.mode)]);tt.setAttribute("fence","true"),s.rightColor&&tt.setAttribute("mathcolor",s.rightColor),d.push(tt)}return makeRow(d)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(s,e)=>{var d=checkDelimiter(e[0],s);if(!s.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",d);return{type:"middle",mode:s.parser.mode,delim:d.text}},htmlBuilder:(s,e)=>{var d;if(s.delim===".")d=makeNullDelimiter(e,[]);else{d=delimiter.sizedDelim(s.delim,1,e,s.mode,[]);var b={delim:s.delim,options:e};d.isMiddle=b}return d},mathmlBuilder:(s,e)=>{var d=s.delim==="\\vert"||s.delim==="|"?makeText("|","text"):makeText(s.delim,s.mode),b=new mathMLTree.MathNode("mo",[d]);return b.setAttribute("fence","true"),b.setAttribute("lspace","0.05em"),b.setAttribute("rspace","0.05em"),b}});var htmlBuilder$7=(s,e)=>{var d=buildCommon.wrapFragment(buildGroup$1(s.body,e),e),b=s.label.slice(1),tt=e.sizeMultiplier,nt,ot=0,ht=utils.isCharacterBox(s.body);if(b==="sout")nt=buildCommon.makeSpan(["stretchy","sout"]),nt.height=e.fontMetrics().defaultRuleThickness/tt,ot=-.5*e.fontMetrics().xHeight;else if(b==="phase"){var mt=calculateSize$1({number:.6,unit:"pt"},e),gt=calculateSize$1({number:.35,unit:"ex"},e),yt=e.havingBaseSizing();tt=tt/yt.sizeMultiplier;var ft=d.height+d.depth+mt+gt;d.style.paddingLeft=makeEm(ft/2+mt);var st=Math.floor(1e3*ft*tt),bt=phasePath(st),vt=new SvgNode([new PathNode("phase",bt)],{width:"400em",height:makeEm(st/1e3),viewBox:"0 0 400000 "+st,preserveAspectRatio:"xMinYMin slice"});nt=buildCommon.makeSvgSpan(["hide-tail"],[vt],e),nt.style.height=makeEm(ft),ot=d.depth+mt+gt}else{/cancel/.test(b)?ht||d.classes.push("cancel-pad"):b==="angl"?d.classes.push("anglpad"):d.classes.push("boxpad");var xt=0,wt=0,St=0;/box/.test(b)?(St=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),xt=e.fontMetrics().fboxsep+(b==="colorbox"?0:St),wt=xt):b==="angl"?(St=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),xt=4*St,wt=Math.max(0,.25-d.depth)):(xt=ht?.2:0,wt=xt),nt=stretchy.encloseSpan(d,b,xt,wt,e),/fbox|boxed|fcolorbox/.test(b)?(nt.style.borderStyle="solid",nt.style.borderWidth=makeEm(St)):b==="angl"&&St!==.049&&(nt.style.borderTopWidth=makeEm(St),nt.style.borderRightWidth=makeEm(St)),ot=d.depth+wt,s.backgroundColor&&(nt.style.backgroundColor=s.backgroundColor,s.borderColor&&(nt.style.borderColor=s.borderColor))}var _t;if(s.backgroundColor)_t=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:nt,shift:ot},{type:"elem",elem:d,shift:0}]},e);else{var Tt=/cancel|phase/.test(b)?["svg-align"]:[];_t=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:nt,shift:ot,wrapperClasses:Tt}]},e)}return/cancel/.test(b)&&(_t.height=d.height,_t.depth=d.depth),/cancel/.test(b)&&!ht?buildCommon.makeSpan(["mord","cancel-lap"],[_t],e):buildCommon.makeSpan(["mord"],[_t],e)},mathmlBuilder$6=(s,e)=>{var d=0,b=new mathMLTree.MathNode(s.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(s.body,e)]);switch(s.label){case"\\cancel":b.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":b.setAttribute("notation","downdiagonalstrike");break;case"\\phase":b.setAttribute("notation","phasorangle");break;case"\\sout":b.setAttribute("notation","horizontalstrike");break;case"\\fbox":b.setAttribute("notation","box");break;case"\\angl":b.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(d=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,b.setAttribute("width","+"+2*d+"pt"),b.setAttribute("height","+"+2*d+"pt"),b.setAttribute("lspace",d+"pt"),b.setAttribute("voffset",d+"pt"),s.label==="\\fcolorbox"){var tt=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);b.setAttribute("style","border: "+tt+"em solid "+String(s.borderColor))}break;case"\\xcancel":b.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return s.backgroundColor&&b.setAttribute("mathbackground",s.backgroundColor),b};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(s,e,d){var{parser:b,funcName:tt}=s,nt=assertNodeType(e[0],"color-token").color,ot=e[1];return{type:"enclose",mode:b.mode,label:tt,backgroundColor:nt,body:ot}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(s,e,d){var{parser:b,funcName:tt}=s,nt=assertNodeType(e[0],"color-token").color,ot=assertNodeType(e[1],"color-token").color,ht=e[2];return{type:"enclose",mode:b.mode,label:tt,backgroundColor:ot,borderColor:nt,body:ht}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(s,e){var{parser:d}=s;return{type:"enclose",mode:d.mode,label:"\\fbox",body:e[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(s,e){var{parser:d,funcName:b}=s,tt=e[0];return{type:"enclose",mode:d.mode,label:b,body:tt}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(s,e){var{parser:d}=s;return{type:"enclose",mode:d.mode,label:"\\angl",body:e[0]}}});var _environments={};function defineEnvironment(s){for(var{type:e,names:d,props:b,handler:tt,htmlBuilder:nt,mathmlBuilder:ot}=s,ht={type:e,numArgs:b.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:tt},mt=0;mt<d.length;++mt)_environments[d[mt]]=ht;nt&&(_htmlGroupBuilders[e]=nt),ot&&(_mathmlGroupBuilders[e]=ot)}var _macros={};function defineMacro(s,e){_macros[s]=e}function getHLines(s){var e=[];s.consumeSpaces();var d=s.fetch().text;for(d==="\\relax"&&(s.consume(),s.consumeSpaces(),d=s.fetch().text);d==="\\hline"||d==="\\hdashline";)s.consume(),e.push(d==="\\hdashline"),s.consumeSpaces(),d=s.fetch().text;return e}var validateAmsEnvironmentContext=s=>{var e=s.parser.settings;if(!e.displayMode)throw new ParseError("{"+s.envName+"} can be used only in display mode.")};function getAutoTag(s){if(s.indexOf("ed")===-1)return s.indexOf("*")===-1}function parseArray(s,e,d){var{hskipBeforeAndAfter:b,addJot:tt,cols:nt,arraystretch:ot,colSeparationType:ht,autoTag:mt,singleRow:gt,emptySingleRow:yt,maxNumCols:ft,leqno:st}=e;if(s.gullet.beginGroup(),gt||s.gullet.macros.set("\\cr","\\\\\\relax"),!ot){var bt=s.gullet.expandMacroAsText("\\arraystretch");if(bt==null)ot=1;else if(ot=parseFloat(bt),!ot||ot<0)throw new ParseError("Invalid \\arraystretch: "+bt)}s.gullet.beginGroup();var vt=[],xt=[vt],wt=[],St=[],_t=mt!=null?[]:void 0;function Tt(){mt&&s.gullet.macros.set("\\@eqnsw","1",!0)}function Et(){_t&&(s.gullet.macros.get("\\df@tag")?(_t.push(s.subparse([new Token("\\df@tag")])),s.gullet.macros.set("\\df@tag",void 0,!0)):_t.push(!!mt&&s.gullet.macros.get("\\@eqnsw")==="1"))}for(Tt(),St.push(getHLines(s));;){var kt=s.parseExpression(!1,gt?"\\end":"\\\\");s.gullet.endGroup(),s.gullet.beginGroup(),kt={type:"ordgroup",mode:s.mode,body:kt},d&&(kt={type:"styling",mode:s.mode,style:d,body:[kt]}),vt.push(kt);var Mt=s.fetch().text;if(Mt==="&"){if(ft&&vt.length===ft){if(gt||ht)throw new ParseError("Too many tab characters: &",s.nextToken);s.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}s.consume()}else if(Mt==="\\end"){Et(),vt.length===1&&kt.type==="styling"&&kt.body[0].body.length===0&&(xt.length>1||!yt)&&xt.pop(),St.length<xt.length+1&&St.push([]);break}else if(Mt==="\\\\"){s.consume();var Ot=void 0;s.gullet.future().text!==" "&&(Ot=s.parseSizeGroup(!0)),wt.push(Ot?Ot.value:null),Et(),St.push(getHLines(s)),vt=[],xt.push(vt),Tt()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",s.nextToken)}return s.gullet.endGroup(),s.gullet.endGroup(),{type:"array",mode:s.mode,addJot:tt,arraystretch:ot,body:xt,cols:nt,rowGaps:wt,hskipBeforeAndAfter:b,hLinesBeforeRow:St,colSeparationType:ht,tags:_t,leqno:st}}function dCellStyle(s){return s.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function(e,d){var b,tt,nt=e.body.length,ot=e.hLinesBeforeRow,ht=0,mt=new Array(nt),gt=[],yt=Math.max(d.fontMetrics().arrayRuleWidth,d.minRuleThickness),ft=1/d.fontMetrics().ptPerEm,st=5*ft;if(e.colSeparationType&&e.colSeparationType==="small"){var bt=d.havingStyle(Style$1.SCRIPT).sizeMultiplier;st=.2778*(bt/d.sizeMultiplier)}var vt=e.colSeparationType==="CD"?calculateSize$1({number:3,unit:"ex"},d):12*ft,xt=3*ft,wt=e.arraystretch*vt,St=.7*wt,_t=.3*wt,Tt=0;function Et(ar){for(var vr=0;vr<ar.length;++vr)vr>0&&(Tt+=.25),gt.push({pos:Tt,isDashed:ar[vr]})}for(Et(ot[0]),b=0;b<e.body.length;++b){var kt=e.body[b],Mt=St,Ot=_t;ht<kt.length&&(ht=kt.length);var Dt=new Array(kt.length);for(tt=0;tt<kt.length;++tt){var At=buildGroup$1(kt[tt],d);Ot<At.depth&&(Ot=At.depth),Mt<At.height&&(Mt=At.height),Dt[tt]=At}var It=e.rowGaps[b],jt=0;It&&(jt=calculateSize$1(It,d),jt>0&&(jt+=_t,Ot<jt&&(Ot=jt),jt=0)),e.addJot&&(Ot+=xt),Dt.height=Mt,Dt.depth=Ot,Tt+=Mt,Dt.pos=Tt,Tt+=Ot+jt,mt[b]=Dt,Et(ot[b+1])}var qt=Tt/2+d.fontMetrics().axisHeight,Jt=e.cols||[],Bt=[],Wt,Lt,Ut=[];if(e.tags&&e.tags.some(ar=>ar))for(b=0;b<nt;++b){var tn=mt[b],Kt=tn.pos-qt,an=e.tags[b],ln=void 0;an===!0?ln=buildCommon.makeSpan(["eqn-num"],[],d):an===!1?ln=buildCommon.makeSpan([],[],d):ln=buildCommon.makeSpan([],buildExpression$1(an,d,!0),d),ln.depth=tn.depth,ln.height=tn.height,Ut.push({type:"elem",elem:ln,shift:Kt})}for(tt=0,Lt=0;tt<ht||Lt<Jt.length;++tt,++Lt){for(var hn=Jt[Lt]||{},kn=!0;hn.type==="separator";){if(kn||(Wt=buildCommon.makeSpan(["arraycolsep"],[]),Wt.style.width=makeEm(d.fontMetrics().doubleRuleSep),Bt.push(Wt)),hn.separator==="|"||hn.separator===":"){var Zt=hn.separator==="|"?"solid":"dashed",xn=buildCommon.makeSpan(["vertical-separator"],[],d);xn.style.height=makeEm(Tt),xn.style.borderRightWidth=makeEm(yt),xn.style.borderRightStyle=Zt,xn.style.margin="0 "+makeEm(-yt/2);var En=Tt-qt;En&&(xn.style.verticalAlign=makeEm(-En)),Bt.push(xn)}else throw new ParseError("Invalid separator type: "+hn.separator);Lt++,hn=Jt[Lt]||{},kn=!1}if(!(tt>=ht)){var Cn=void 0;(tt>0||e.hskipBeforeAndAfter)&&(Cn=utils.deflt(hn.pregap,st),Cn!==0&&(Wt=buildCommon.makeSpan(["arraycolsep"],[]),Wt.style.width=makeEm(Cn),Bt.push(Wt)));var Fn=[];for(b=0;b<nt;++b){var Vn=mt[b],qn=Vn[tt];if(qn){var cr=Vn.pos-qt;qn.depth=Vn.depth,qn.height=Vn.height,Fn.push({type:"elem",elem:qn,shift:cr})}}Fn=buildCommon.makeVList({positionType:"individualShift",children:Fn},d),Fn=buildCommon.makeSpan(["col-align-"+(hn.align||"c")],[Fn]),Bt.push(Fn),(tt<ht-1||e.hskipBeforeAndAfter)&&(Cn=utils.deflt(hn.postgap,st),Cn!==0&&(Wt=buildCommon.makeSpan(["arraycolsep"],[]),Wt.style.width=makeEm(Cn),Bt.push(Wt)))}}if(mt=buildCommon.makeSpan(["mtable"],Bt),gt.length>0){for(var Bn=buildCommon.makeLineSpan("hline",d,yt),ir=buildCommon.makeLineSpan("hdashline",d,yt),tr=[{type:"elem",elem:mt,shift:0}];gt.length>0;){var wr=gt.pop(),dr=wr.pos-qt;wr.isDashed?tr.push({type:"elem",elem:ir,shift:dr}):tr.push({type:"elem",elem:Bn,shift:dr})}mt=buildCommon.makeVList({positionType:"individualShift",children:tr},d)}if(Ut.length===0)return buildCommon.makeSpan(["mord"],[mt],d);var Sr=buildCommon.makeVList({positionType:"individualShift",children:Ut},d);return Sr=buildCommon.makeSpan(["tag"],[Sr],d),buildCommon.makeFragment([mt,Sr])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function(e,d){for(var b=[],tt=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),nt=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),ot=0;ot<e.body.length;ot++){for(var ht=e.body[ot],mt=[],gt=0;gt<ht.length;gt++)mt.push(new mathMLTree.MathNode("mtd",[buildGroup(ht[gt],d)]));e.tags&&e.tags[ot]&&(mt.unshift(tt),mt.push(tt),e.leqno?mt.unshift(nt):mt.push(nt)),b.push(new mathMLTree.MathNode("mtr",mt))}var yt=new mathMLTree.MathNode("mtable",b),ft=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);yt.setAttribute("rowspacing",makeEm(ft));var st="",bt="";if(e.cols&&e.cols.length>0){var vt=e.cols,xt="",wt=!1,St=0,_t=vt.length;vt[0].type==="separator"&&(st+="top ",St=1),vt[vt.length-1].type==="separator"&&(st+="bottom ",_t-=1);for(var Tt=St;Tt<_t;Tt++)vt[Tt].type==="align"?(bt+=alignMap[vt[Tt].align],wt&&(xt+="none "),wt=!0):vt[Tt].type==="separator"&&wt&&(xt+=vt[Tt].separator==="|"?"solid ":"dashed ",wt=!1);yt.setAttribute("columnalign",bt.trim()),/[sd]/.test(xt)&&yt.setAttribute("columnlines",xt.trim())}if(e.colSeparationType==="align"){for(var Et=e.cols||[],kt="",Mt=1;Mt<Et.length;Mt++)kt+=Mt%2?"0em ":"1em ";yt.setAttribute("columnspacing",kt.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?yt.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?yt.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?yt.setAttribute("columnspacing","0.5em"):yt.setAttribute("columnspacing","1em");var Ot="",Dt=e.hLinesBeforeRow;st+=Dt[0].length>0?"left ":"",st+=Dt[Dt.length-1].length>0?"right ":"";for(var At=1;At<Dt.length-1;At++)Ot+=Dt[At].length===0?"none ":Dt[At][0]?"dashed ":"solid ";return/[sd]/.test(Ot)&&yt.setAttribute("rowlines",Ot.trim()),st!==""&&(yt=new mathMLTree.MathNode("menclose",[yt]),yt.setAttribute("notation",st.trim())),e.arraystretch&&e.arraystretch<1&&(yt=new mathMLTree.MathNode("mstyle",[yt]),yt.setAttribute("scriptlevel","1")),yt},alignedHandler=function(e,d){e.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(e);var b=[],tt=e.envName.indexOf("at")>-1?"alignat":"align",nt=e.envName==="split",ot=parseArray(e.parser,{cols:b,addJot:!0,autoTag:nt?void 0:getAutoTag(e.envName),emptySingleRow:!0,colSeparationType:tt,maxNumCols:nt?2:void 0,leqno:e.parser.settings.leqno},"display"),ht,mt=0,gt={type:"ordgroup",mode:e.mode,body:[]};if(d[0]&&d[0].type==="ordgroup"){for(var yt="",ft=0;ft<d[0].body.length;ft++){var st=assertNodeType(d[0].body[ft],"textord");yt+=st.text}ht=Number(yt),mt=ht*2}var bt=!mt;ot.body.forEach(function(St){for(var _t=1;_t<St.length;_t+=2){var Tt=assertNodeType(St[_t],"styling"),Et=assertNodeType(Tt.body[0],"ordgroup");Et.body.unshift(gt)}if(bt)mt<St.length&&(mt=St.length);else{var kt=St.length/2;if(ht<kt)throw new ParseError("Too many math in a row: "+("expected "+ht+", but got "+kt),St[0])}});for(var vt=0;vt<mt;++vt){var xt="r",wt=0;vt%2===1?xt="l":vt>0&&bt&&(wt=1),b[vt]={type:"align",align:xt,pregap:wt,postgap:0}}return ot.colSeparationType=bt?"align":"alignat",ot};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(s,e){var d=checkSymbolNodeType(e[0]),b=d?[e[0]]:assertNodeType(e[0],"ordgroup").body,tt=b.map(function(ot){var ht=assertSymbolNodeType(ot),mt=ht.text;if("lcr".indexOf(mt)!==-1)return{type:"align",align:mt};if(mt==="|")return{type:"separator",separator:"|"};if(mt===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+mt,ot)}),nt={cols:tt,hskipBeforeAndAfter:!0,maxNumCols:tt.length};return parseArray(s.parser,nt,dCellStyle(s.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(s){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[s.envName.replace("*","")],d="c",b={hskipBeforeAndAfter:!1,cols:[{type:"align",align:d}]};if(s.envName.charAt(s.envName.length-1)==="*"){var tt=s.parser;if(tt.consumeSpaces(),tt.fetch().text==="["){if(tt.consume(),tt.consumeSpaces(),d=tt.fetch().text,"lcr".indexOf(d)===-1)throw new ParseError("Expected l or c or r",tt.nextToken);tt.consume(),tt.consumeSpaces(),tt.expect("]"),tt.consume(),b.cols=[{type:"align",align:d}]}}var nt=parseArray(s.parser,b,dCellStyle(s.envName)),ot=Math.max(0,...nt.body.map(ht=>ht.length));return nt.cols=new Array(ot).fill({type:"align",align:d}),e?{type:"leftright",mode:s.mode,body:[nt],left:e[0],right:e[1],rightColor:void 0}:nt},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(s){var e={arraystretch:.5},d=parseArray(s.parser,e,"script");return d.colSeparationType="small",d},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(s,e){var d=checkSymbolNodeType(e[0]),b=d?[e[0]]:assertNodeType(e[0],"ordgroup").body,tt=b.map(function(ot){var ht=assertSymbolNodeType(ot),mt=ht.text;if("lc".indexOf(mt)!==-1)return{type:"align",align:mt};throw new ParseError("Unknown column alignment: "+mt,ot)});if(tt.length>1)throw new ParseError("{subarray} can contain only one column");var nt={cols:tt,hskipBeforeAndAfter:!1,arraystretch:.5};if(nt=parseArray(s.parser,nt,"script"),nt.body.length>0&&nt.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return nt},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(s){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},d=parseArray(s.parser,e,dCellStyle(s.envName));return{type:"leftright",mode:s.mode,body:[d],left:s.envName.indexOf("r")>-1?".":"\\{",right:s.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(s){utils.contains(["gather","gather*"],s.envName)&&validateAmsEnvironmentContext(s);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(s.envName),emptySingleRow:!0,leqno:s.parser.settings.leqno};return parseArray(s.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(s){validateAmsEnvironmentContext(s);var e={autoTag:getAutoTag(s.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:s.parser.settings.leqno};return parseArray(s.parser,e,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(s){return validateAmsEnvironmentContext(s),parseCD(s.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(s,e){throw new ParseError(s.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(s,e){var{parser:d,funcName:b}=s,tt=e[0];if(tt.type!=="ordgroup")throw new ParseError("Invalid environment name",tt);for(var nt="",ot=0;ot<tt.body.length;++ot)nt+=assertNodeType(tt.body[ot],"textord").text;if(b==="\\begin"){if(!environments.hasOwnProperty(nt))throw new ParseError("No such environment: "+nt,tt);var ht=environments[nt],{args:mt,optArgs:gt}=d.parseArguments("\\begin{"+nt+"}",ht),yt={mode:d.mode,envName:nt,parser:d},ft=ht.handler(yt,mt,gt);d.expect("\\end",!1);var st=d.nextToken,bt=assertNodeType(d.parseFunction(),"environment");if(bt.name!==nt)throw new ParseError("Mismatch: \\begin{"+nt+"} matched by \\end{"+bt.name+"}",st);return ft}return{type:"environment",mode:d.mode,name:nt,nameGroup:tt}}});var htmlBuilder$5=(s,e)=>{var d=s.font,b=e.withFont(d);return buildGroup$1(s.body,b)},mathmlBuilder$4=(s,e)=>{var d=s.font,b=e.withFont(d);return buildGroup(s.body,b)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(s,e)=>{var{parser:d,funcName:b}=s,tt=normalizeArgument(e[0]),nt=b;return nt in fontAliases&&(nt=fontAliases[nt]),{type:"font",mode:d.mode,font:nt.slice(1),body:tt}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(s,e)=>{var{parser:d}=s,b=e[0],tt=utils.isCharacterBox(b);return{type:"mclass",mode:d.mode,mclass:binrelClass(b),body:[{type:"font",mode:d.mode,font:"boldsymbol",body:b}],isCharacterBox:tt}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(s,e)=>{var{parser:d,funcName:b,breakOnTokenText:tt}=s,{mode:nt}=d,ot=d.parseExpression(!0,tt),ht="math"+b.slice(1);return{type:"font",mode:nt,font:ht,body:{type:"ordgroup",mode:d.mode,body:ot}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(s,e)=>{var d=e;return s==="display"?d=d.id>=Style$1.SCRIPT.id?d.text():Style$1.DISPLAY:s==="text"&&d.size===Style$1.DISPLAY.size?d=Style$1.TEXT:s==="script"?d=Style$1.SCRIPT:s==="scriptscript"&&(d=Style$1.SCRIPTSCRIPT),d},htmlBuilder$4=(s,e)=>{var d=adjustStyle(s.size,e.style),b=d.fracNum(),tt=d.fracDen(),nt;nt=e.havingStyle(b);var ot=buildGroup$1(s.numer,nt,e);if(s.continued){var ht=8.5/e.fontMetrics().ptPerEm,mt=3.5/e.fontMetrics().ptPerEm;ot.height=ot.height<ht?ht:ot.height,ot.depth=ot.depth<mt?mt:ot.depth}nt=e.havingStyle(tt);var gt=buildGroup$1(s.denom,nt,e),yt,ft,st;s.hasBarLine?(s.barSize?(ft=calculateSize$1(s.barSize,e),yt=buildCommon.makeLineSpan("frac-line",e,ft)):yt=buildCommon.makeLineSpan("frac-line",e),ft=yt.height,st=yt.height):(yt=null,ft=0,st=e.fontMetrics().defaultRuleThickness);var bt,vt,xt;d.size===Style$1.DISPLAY.size||s.size==="display"?(bt=e.fontMetrics().num1,ft>0?vt=3*st:vt=7*st,xt=e.fontMetrics().denom1):(ft>0?(bt=e.fontMetrics().num2,vt=st):(bt=e.fontMetrics().num3,vt=3*st),xt=e.fontMetrics().denom2);var wt;if(yt){var _t=e.fontMetrics().axisHeight;bt-ot.depth-(_t+.5*ft)<vt&&(bt+=vt-(bt-ot.depth-(_t+.5*ft))),_t-.5*ft-(gt.height-xt)<vt&&(xt+=vt-(_t-.5*ft-(gt.height-xt)));var Tt=-(_t-.5*ft);wt=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:gt,shift:xt},{type:"elem",elem:yt,shift:Tt},{type:"elem",elem:ot,shift:-bt}]},e)}else{var St=bt-ot.depth-(gt.height-xt);St<vt&&(bt+=.5*(vt-St),xt+=.5*(vt-St)),wt=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:gt,shift:xt},{type:"elem",elem:ot,shift:-bt}]},e)}nt=e.havingStyle(d),wt.height*=nt.sizeMultiplier/e.sizeMultiplier,wt.depth*=nt.sizeMultiplier/e.sizeMultiplier;var Et;d.size===Style$1.DISPLAY.size?Et=e.fontMetrics().delim1:d.size===Style$1.SCRIPTSCRIPT.size?Et=e.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:Et=e.fontMetrics().delim2;var kt,Mt;return s.leftDelim==null?kt=makeNullDelimiter(e,["mopen"]):kt=delimiter.customSizedDelim(s.leftDelim,Et,!0,e.havingStyle(d),s.mode,["mopen"]),s.continued?Mt=buildCommon.makeSpan([]):s.rightDelim==null?Mt=makeNullDelimiter(e,["mclose"]):Mt=delimiter.customSizedDelim(s.rightDelim,Et,!0,e.havingStyle(d),s.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(nt.sizingClasses(e)),[kt,buildCommon.makeSpan(["mfrac"],[wt]),Mt],e)},mathmlBuilder$3=(s,e)=>{var d=new mathMLTree.MathNode("mfrac",[buildGroup(s.numer,e),buildGroup(s.denom,e)]);if(!s.hasBarLine)d.setAttribute("linethickness","0px");else if(s.barSize){var b=calculateSize$1(s.barSize,e);d.setAttribute("linethickness",makeEm(b))}var tt=adjustStyle(s.size,e.style);if(tt.size!==e.style.size){d=new mathMLTree.MathNode("mstyle",[d]);var nt=tt.size===Style$1.DISPLAY.size?"true":"false";d.setAttribute("displaystyle",nt),d.setAttribute("scriptlevel","0")}if(s.leftDelim!=null||s.rightDelim!=null){var ot=[];if(s.leftDelim!=null){var ht=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(s.leftDelim.replace("\\",""))]);ht.setAttribute("fence","true"),ot.push(ht)}if(ot.push(d),s.rightDelim!=null){var mt=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(s.rightDelim.replace("\\",""))]);mt.setAttribute("fence","true"),ot.push(mt)}return makeRow(ot)}return d};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(s,e)=>{var{parser:d,funcName:b}=s,tt=e[0],nt=e[1],ot,ht=null,mt=null,gt="auto";switch(b){case"\\dfrac":case"\\frac":case"\\tfrac":ot=!0;break;case"\\\\atopfrac":ot=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":ot=!1,ht="(",mt=")";break;case"\\\\bracefrac":ot=!1,ht="\\{",mt="\\}";break;case"\\\\brackfrac":ot=!1,ht="[",mt="]";break;default:throw new Error("Unrecognized genfrac command")}switch(b){case"\\dfrac":case"\\dbinom":gt="display";break;case"\\tfrac":case"\\tbinom":gt="text";break}return{type:"genfrac",mode:d.mode,continued:!1,numer:tt,denom:nt,hasBarLine:ot,leftDelim:ht,rightDelim:mt,size:gt,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(s,e)=>{var{parser:d,funcName:b}=s,tt=e[0],nt=e[1];return{type:"genfrac",mode:d.mode,continued:!0,numer:tt,denom:nt,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(s){var{parser:e,funcName:d,token:b}=s,tt;switch(d){case"\\over":tt="\\frac";break;case"\\choose":tt="\\binom";break;case"\\atop":tt="\\\\atopfrac";break;case"\\brace":tt="\\\\bracefrac";break;case"\\brack":tt="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:tt,token:b}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function(e){var d=null;return e.length>0&&(d=e,d=d==="."?null:d),d};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(s,e){var{parser:d}=s,b=e[4],tt=e[5],nt=normalizeArgument(e[0]),ot=nt.type==="atom"&&nt.family==="open"?delimFromValue(nt.text):null,ht=normalizeArgument(e[1]),mt=ht.type==="atom"&&ht.family==="close"?delimFromValue(ht.text):null,gt=assertNodeType(e[2],"size"),yt,ft=null;gt.isBlank?yt=!0:(ft=gt.value,yt=ft.number>0);var st="auto",bt=e[3];if(bt.type==="ordgroup"){if(bt.body.length>0){var vt=assertNodeType(bt.body[0],"textord");st=stylArray[Number(vt.text)]}}else bt=assertNodeType(bt,"textord"),st=stylArray[Number(bt.text)];return{type:"genfrac",mode:d.mode,numer:b,denom:tt,continued:!1,hasBarLine:yt,barSize:ft,leftDelim:ot,rightDelim:mt,size:st}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(s,e){var{parser:d,funcName:b,token:tt}=s;return{type:"infix",mode:d.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(e[0],"size").value,token:tt}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(s,e)=>{var{parser:d,funcName:b}=s,tt=e[0],nt=assert(assertNodeType(e[1],"infix").size),ot=e[2],ht=nt.number>0;return{type:"genfrac",mode:d.mode,numer:tt,denom:ot,continued:!1,hasBarLine:ht,barSize:nt,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(s,e)=>{var d=e.style,b,tt;s.type==="supsub"?(b=s.sup?buildGroup$1(s.sup,e.havingStyle(d.sup()),e):buildGroup$1(s.sub,e.havingStyle(d.sub()),e),tt=assertNodeType(s.base,"horizBrace")):tt=assertNodeType(s,"horizBrace");var nt=buildGroup$1(tt.base,e.havingBaseStyle(Style$1.DISPLAY)),ot=stretchy.svgSpan(tt,e),ht;if(tt.isOver?(ht=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:nt},{type:"kern",size:.1},{type:"elem",elem:ot}]},e),ht.children[0].children[0].children[1].classes.push("svg-align")):(ht=buildCommon.makeVList({positionType:"bottom",positionData:nt.depth+.1+ot.height,children:[{type:"elem",elem:ot},{type:"kern",size:.1},{type:"elem",elem:nt}]},e),ht.children[0].children[0].children[0].classes.push("svg-align")),b){var mt=buildCommon.makeSpan(["mord",tt.isOver?"mover":"munder"],[ht],e);tt.isOver?ht=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:mt},{type:"kern",size:.2},{type:"elem",elem:b}]},e):ht=buildCommon.makeVList({positionType:"bottom",positionData:mt.depth+.2+b.height+b.depth,children:[{type:"elem",elem:b},{type:"kern",size:.2},{type:"elem",elem:mt}]},e)}return buildCommon.makeSpan(["mord",tt.isOver?"mover":"munder"],[ht],e)},mathmlBuilder$2=(s,e)=>{var d=stretchy.mathMLnode(s.label);return new mathMLTree.MathNode(s.isOver?"mover":"munder",[buildGroup(s.base,e),d])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(s,e){var{parser:d,funcName:b}=s;return{type:"horizBrace",mode:d.mode,label:b,isOver:/^\\over/.test(b),base:e[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(s,e)=>{var{parser:d}=s,b=e[1],tt=assertNodeType(e[0],"url").url;return d.settings.isTrusted({command:"\\href",url:tt})?{type:"href",mode:d.mode,href:tt,body:ordargument(b)}:d.formatUnsupportedCmd("\\href")},htmlBuilder:(s,e)=>{var d=buildExpression$1(s.body,e,!1);return buildCommon.makeAnchor(s.href,[],d,e)},mathmlBuilder:(s,e)=>{var d=buildExpressionRow(s.body,e);return d instanceof MathNode||(d=new MathNode("mrow",[d])),d.setAttribute("href",s.href),d}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(s,e)=>{var{parser:d}=s,b=assertNodeType(e[0],"url").url;if(!d.settings.isTrusted({command:"\\url",url:b}))return d.formatUnsupportedCmd("\\url");for(var tt=[],nt=0;nt<b.length;nt++){var ot=b[nt];ot==="~"&&(ot="\\textasciitilde"),tt.push({type:"textord",mode:"text",text:ot})}var ht={type:"text",mode:d.mode,font:"\\texttt",body:tt};return{type:"href",mode:d.mode,href:b,body:ordargument(ht)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(s,e){var{parser:d}=s;return{type:"hbox",mode:d.mode,body:ordargument(e[0])}},htmlBuilder(s,e){var d=buildExpression$1(s.body,e,!1);return buildCommon.makeFragment(d)},mathmlBuilder(s,e){return new mathMLTree.MathNode("mrow",buildExpression(s.body,e))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(s,e)=>{var{parser:d,funcName:b,token:tt}=s,nt=assertNodeType(e[0],"raw").string,ot=e[1];d.settings.strict&&d.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var ht,mt={};switch(b){case"\\htmlClass":mt.class=nt,ht={command:"\\htmlClass",class:nt};break;case"\\htmlId":mt.id=nt,ht={command:"\\htmlId",id:nt};break;case"\\htmlStyle":mt.style=nt,ht={command:"\\htmlStyle",style:nt};break;case"\\htmlData":{for(var gt=nt.split(","),yt=0;yt<gt.length;yt++){var ft=gt[yt].split("=");if(ft.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");mt["data-"+ft[0].trim()]=ft[1].trim()}ht={command:"\\htmlData",attributes:mt};break}default:throw new Error("Unrecognized html command")}return d.settings.isTrusted(ht)?{type:"html",mode:d.mode,attributes:mt,body:ordargument(ot)}:d.formatUnsupportedCmd(b)},htmlBuilder:(s,e)=>{var d=buildExpression$1(s.body,e,!1),b=["enclosing"];s.attributes.class&&b.push(...s.attributes.class.trim().split(/\s+/));var tt=buildCommon.makeSpan(b,d,e);for(var nt in s.attributes)nt!=="class"&&s.attributes.hasOwnProperty(nt)&&tt.setAttribute(nt,s.attributes[nt]);return tt},mathmlBuilder:(s,e)=>buildExpressionRow(s.body,e)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(s,e)=>{var{parser:d}=s;return{type:"htmlmathml",mode:d.mode,html:ordargument(e[0]),mathml:ordargument(e[1])}},htmlBuilder:(s,e)=>{var d=buildExpression$1(s.html,e,!1);return buildCommon.makeFragment(d)},mathmlBuilder:(s,e)=>buildExpressionRow(s.mathml,e)});var sizeData=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var d=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!d)throw new ParseError("Invalid size: '"+e+"' in \\includegraphics");var b={number:+(d[1]+d[2]),unit:d[3]};if(!validUnit(b))throw new ParseError("Invalid unit: '"+b.unit+"' in \\includegraphics.");return b};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(s,e,d)=>{var{parser:b}=s,tt={number:0,unit:"em"},nt={number:.9,unit:"em"},ot={number:0,unit:"em"},ht="";if(d[0])for(var mt=assertNodeType(d[0],"raw").string,gt=mt.split(","),yt=0;yt<gt.length;yt++){var ft=gt[yt].split("=");if(ft.length===2){var st=ft[1].trim();switch(ft[0].trim()){case"alt":ht=st;break;case"width":tt=sizeData(st);break;case"height":nt=sizeData(st);break;case"totalheight":ot=sizeData(st);break;default:throw new ParseError("Invalid key: '"+ft[0]+"' in \\includegraphics.")}}}var bt=assertNodeType(e[0],"url").url;return ht===""&&(ht=bt,ht=ht.replace(/^.*[\\/]/,""),ht=ht.substring(0,ht.lastIndexOf("."))),b.settings.isTrusted({command:"\\includegraphics",url:bt})?{type:"includegraphics",mode:b.mode,alt:ht,width:tt,height:nt,totalheight:ot,src:bt}:b.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(s,e)=>{var d=calculateSize$1(s.height,e),b=0;s.totalheight.number>0&&(b=calculateSize$1(s.totalheight,e)-d);var tt=0;s.width.number>0&&(tt=calculateSize$1(s.width,e));var nt={height:makeEm(d+b)};tt>0&&(nt.width=makeEm(tt)),b>0&&(nt.verticalAlign=makeEm(-b));var ot=new Img(s.src,s.alt,nt);return ot.height=d,ot.depth=b,ot},mathmlBuilder:(s,e)=>{var d=new mathMLTree.MathNode("mglyph",[]);d.setAttribute("alt",s.alt);var b=calculateSize$1(s.height,e),tt=0;if(s.totalheight.number>0&&(tt=calculateSize$1(s.totalheight,e)-b,d.setAttribute("valign",makeEm(-tt))),d.setAttribute("height",makeEm(b+tt)),s.width.number>0){var nt=calculateSize$1(s.width,e);d.setAttribute("width",makeEm(nt))}return d.setAttribute("src",s.src),d}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(s,e){var{parser:d,funcName:b}=s,tt=assertNodeType(e[0],"size");if(d.settings.strict){var nt=b[1]==="m",ot=tt.value.unit==="mu";nt?(ot||d.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+b+" supports only mu units, "+("not "+tt.value.unit+" units")),d.mode!=="math"&&d.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+b+" works only in math mode")):ot&&d.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+b+" doesn't support mu units")}return{type:"kern",mode:d.mode,dimension:tt.value}},htmlBuilder(s,e){return buildCommon.makeGlue(s.dimension,e)},mathmlBuilder(s,e){var d=calculateSize$1(s.dimension,e);return new mathMLTree.SpaceNode(d)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(s,e)=>{var{parser:d,funcName:b}=s,tt=e[0];return{type:"lap",mode:d.mode,alignment:b.slice(5),body:tt}},htmlBuilder:(s,e)=>{var d;s.alignment==="clap"?(d=buildCommon.makeSpan([],[buildGroup$1(s.body,e)]),d=buildCommon.makeSpan(["inner"],[d],e)):d=buildCommon.makeSpan(["inner"],[buildGroup$1(s.body,e)]);var b=buildCommon.makeSpan(["fix"],[]),tt=buildCommon.makeSpan([s.alignment],[d,b],e),nt=buildCommon.makeSpan(["strut"]);return nt.style.height=makeEm(tt.height+tt.depth),tt.depth&&(nt.style.verticalAlign=makeEm(-tt.depth)),tt.children.unshift(nt),tt=buildCommon.makeSpan(["thinbox"],[tt],e),buildCommon.makeSpan(["mord","vbox"],[tt],e)},mathmlBuilder:(s,e)=>{var d=new mathMLTree.MathNode("mpadded",[buildGroup(s.body,e)]);if(s.alignment!=="rlap"){var b=s.alignment==="llap"?"-1":"-0.5";d.setAttribute("lspace",b+"width")}return d.setAttribute("width","0px"),d}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(s,e){var{funcName:d,parser:b}=s,tt=b.mode;b.switchMode("math");var nt=d==="\\("?"\\)":"$",ot=b.parseExpression(!1,nt);return b.expect(nt),b.switchMode(tt),{type:"styling",mode:b.mode,style:"text",body:ot}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(s,e){throw new ParseError("Mismatched "+s.funcName)}});var chooseMathStyle=(s,e)=>{switch(e.style.size){case Style$1.DISPLAY.size:return s.display;case Style$1.TEXT.size:return s.text;case Style$1.SCRIPT.size:return s.script;case Style$1.SCRIPTSCRIPT.size:return s.scriptscript;default:return s.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(s,e)=>{var{parser:d}=s;return{type:"mathchoice",mode:d.mode,display:ordargument(e[0]),text:ordargument(e[1]),script:ordargument(e[2]),scriptscript:ordargument(e[3])}},htmlBuilder:(s,e)=>{var d=chooseMathStyle(s,e),b=buildExpression$1(d,e,!1);return buildCommon.makeFragment(b)},mathmlBuilder:(s,e)=>{var d=chooseMathStyle(s,e);return buildExpressionRow(d,e)}});var assembleSupSub=(s,e,d,b,tt,nt,ot)=>{s=buildCommon.makeSpan([],[s]);var ht=d&&utils.isCharacterBox(d),mt,gt;if(e){var yt=buildGroup$1(e,b.havingStyle(tt.sup()),b);gt={elem:yt,kern:Math.max(b.fontMetrics().bigOpSpacing1,b.fontMetrics().bigOpSpacing3-yt.depth)}}if(d){var ft=buildGroup$1(d,b.havingStyle(tt.sub()),b);mt={elem:ft,kern:Math.max(b.fontMetrics().bigOpSpacing2,b.fontMetrics().bigOpSpacing4-ft.height)}}var st;if(gt&&mt){var bt=b.fontMetrics().bigOpSpacing5+mt.elem.height+mt.elem.depth+mt.kern+s.depth+ot;st=buildCommon.makeVList({positionType:"bottom",positionData:bt,children:[{type:"kern",size:b.fontMetrics().bigOpSpacing5},{type:"elem",elem:mt.elem,marginLeft:makeEm(-nt)},{type:"kern",size:mt.kern},{type:"elem",elem:s},{type:"kern",size:gt.kern},{type:"elem",elem:gt.elem,marginLeft:makeEm(nt)},{type:"kern",size:b.fontMetrics().bigOpSpacing5}]},b)}else if(mt){var vt=s.height-ot;st=buildCommon.makeVList({positionType:"top",positionData:vt,children:[{type:"kern",size:b.fontMetrics().bigOpSpacing5},{type:"elem",elem:mt.elem,marginLeft:makeEm(-nt)},{type:"kern",size:mt.kern},{type:"elem",elem:s}]},b)}else if(gt){var xt=s.depth+ot;st=buildCommon.makeVList({positionType:"bottom",positionData:xt,children:[{type:"elem",elem:s},{type:"kern",size:gt.kern},{type:"elem",elem:gt.elem,marginLeft:makeEm(nt)},{type:"kern",size:b.fontMetrics().bigOpSpacing5}]},b)}else return s;var wt=[st];if(mt&&nt!==0&&!ht){var St=buildCommon.makeSpan(["mspace"],[],b);St.style.marginRight=makeEm(nt),wt.unshift(St)}return buildCommon.makeSpan(["mop","op-limits"],wt,b)},noSuccessor=["\\smallint"],htmlBuilder$2=(s,e)=>{var d,b,tt=!1,nt;s.type==="supsub"?(d=s.sup,b=s.sub,nt=assertNodeType(s.base,"op"),tt=!0):nt=assertNodeType(s,"op");var ot=e.style,ht=!1;ot.size===Style$1.DISPLAY.size&&nt.symbol&&!utils.contains(noSuccessor,nt.name)&&(ht=!0);var mt;if(nt.symbol){var gt=ht?"Size2-Regular":"Size1-Regular",yt="";if((nt.name==="\\oiint"||nt.name==="\\oiiint")&&(yt=nt.name.slice(1),nt.name=yt==="oiint"?"\\iint":"\\iiint"),mt=buildCommon.makeSymbol(nt.name,gt,"math",e,["mop","op-symbol",ht?"large-op":"small-op"]),yt.length>0){var ft=mt.italic,st=buildCommon.staticSvg(yt+"Size"+(ht?"2":"1"),e);mt=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:mt,shift:0},{type:"elem",elem:st,shift:ht?.08:0}]},e),nt.name="\\"+yt,mt.classes.unshift("mop"),mt.italic=ft}}else if(nt.body){var bt=buildExpression$1(nt.body,e,!0);bt.length===1&&bt[0]instanceof SymbolNode?(mt=bt[0],mt.classes[0]="mop"):mt=buildCommon.makeSpan(["mop"],bt,e)}else{for(var vt=[],xt=1;xt<nt.name.length;xt++)vt.push(buildCommon.mathsym(nt.name[xt],nt.mode,e));mt=buildCommon.makeSpan(["mop"],vt,e)}var wt=0,St=0;return(mt instanceof SymbolNode||nt.name==="\\oiint"||nt.name==="\\oiiint")&&!nt.suppressBaseShift&&(wt=(mt.height-mt.depth)/2-e.fontMetrics().axisHeight,St=mt.italic),tt?assembleSupSub(mt,d,b,e,ot,St,wt):(wt&&(mt.style.position="relative",mt.style.top=makeEm(wt)),mt)},mathmlBuilder$1=(s,e)=>{var d;if(s.symbol)d=new MathNode("mo",[makeText(s.name,s.mode)]),utils.contains(noSuccessor,s.name)&&d.setAttribute("largeop","false");else if(s.body)d=new MathNode("mo",buildExpression(s.body,e));else{d=new MathNode("mi",[new TextNode(s.name.slice(1))]);var b=new MathNode("mo",[makeText("","text")]);s.parentIsSupSub?d=new MathNode("mrow",[d,b]):d=newDocumentFragment([d,b])}return d},singleCharBigOps={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(s,e)=>{var{parser:d,funcName:b}=s,tt=b;return tt.length===1&&(tt=singleCharBigOps[tt]),{type:"op",mode:d.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:tt}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(s,e)=>{var{parser:d}=s,b=e[0];return{type:"op",mode:d.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(b)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(s){var{parser:e,funcName:d}=s;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:d}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(s){var{parser:e,funcName:d}=s;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:d}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(s){var{parser:e,funcName:d}=s,b=d;return b.length===1&&(b=singleCharIntegrals[b]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:b}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(s,e)=>{var d,b,tt=!1,nt;s.type==="supsub"?(d=s.sup,b=s.sub,nt=assertNodeType(s.base,"operatorname"),tt=!0):nt=assertNodeType(s,"operatorname");var ot;if(nt.body.length>0){for(var ht=nt.body.map(ft=>{var st=ft.text;return typeof st=="string"?{type:"textord",mode:ft.mode,text:st}:ft}),mt=buildExpression$1(ht,e.withFont("mathrm"),!0),gt=0;gt<mt.length;gt++){var yt=mt[gt];yt instanceof SymbolNode&&(yt.text=yt.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}ot=buildCommon.makeSpan(["mop"],mt,e)}else ot=buildCommon.makeSpan(["mop"],[],e);return tt?assembleSupSub(ot,d,b,e,e.style,0,0):ot},mathmlBuilder=(s,e)=>{for(var d=buildExpression(s.body,e.withFont("mathrm")),b=!0,tt=0;tt<d.length;tt++){var nt=d[tt];if(!(nt instanceof mathMLTree.SpaceNode))if(nt instanceof mathMLTree.MathNode)switch(nt.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var ot=nt.children[0];nt.children.length===1&&ot instanceof mathMLTree.TextNode?ot.text=ot.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):b=!1;break}default:b=!1}else b=!1}if(b){var ht=d.map(yt=>yt.toText()).join("");d=[new mathMLTree.TextNode(ht)]}var mt=new mathMLTree.MathNode("mi",d);mt.setAttribute("mathvariant","normal");var gt=new mathMLTree.MathNode("mo",[makeText("","text")]);return s.parentIsSupSub?new mathMLTree.MathNode("mrow",[mt,gt]):mathMLTree.newDocumentFragment([mt,gt])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(s,e)=>{var{parser:d,funcName:b}=s,tt=e[0];return{type:"operatorname",mode:d.mode,body:ordargument(tt),alwaysHandleSupSub:b==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(s,e){return s.semisimple?buildCommon.makeFragment(buildExpression$1(s.body,e,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(s.body,e,!0),e)},mathmlBuilder(s,e){return buildExpressionRow(s.body,e,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(s,e){var{parser:d}=s,b=e[0];return{type:"overline",mode:d.mode,body:b}},htmlBuilder(s,e){var d=buildGroup$1(s.body,e.havingCrampedStyle()),b=buildCommon.makeLineSpan("overline-line",e),tt=e.fontMetrics().defaultRuleThickness,nt=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:3*tt},{type:"elem",elem:b},{type:"kern",size:tt}]},e);return buildCommon.makeSpan(["mord","overline"],[nt],e)},mathmlBuilder(s,e){var d=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);d.setAttribute("stretchy","true");var b=new mathMLTree.MathNode("mover",[buildGroup(s.body,e),d]);return b.setAttribute("accent","true"),b}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(s,e)=>{var{parser:d}=s,b=e[0];return{type:"phantom",mode:d.mode,body:ordargument(b)}},htmlBuilder:(s,e)=>{var d=buildExpression$1(s.body,e.withPhantom(),!1);return buildCommon.makeFragment(d)},mathmlBuilder:(s,e)=>{var d=buildExpression(s.body,e);return new mathMLTree.MathNode("mphantom",d)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(s,e)=>{var{parser:d}=s,b=e[0];return{type:"hphantom",mode:d.mode,body:b}},htmlBuilder:(s,e)=>{var d=buildCommon.makeSpan([],[buildGroup$1(s.body,e.withPhantom())]);if(d.height=0,d.depth=0,d.children)for(var b=0;b<d.children.length;b++)d.children[b].height=0,d.children[b].depth=0;return d=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d}]},e),buildCommon.makeSpan(["mord"],[d],e)},mathmlBuilder:(s,e)=>{var d=buildExpression(ordargument(s.body),e),b=new mathMLTree.MathNode("mphantom",d),tt=new mathMLTree.MathNode("mpadded",[b]);return tt.setAttribute("height","0px"),tt.setAttribute("depth","0px"),tt}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(s,e)=>{var{parser:d}=s,b=e[0];return{type:"vphantom",mode:d.mode,body:b}},htmlBuilder:(s,e)=>{var d=buildCommon.makeSpan(["inner"],[buildGroup$1(s.body,e.withPhantom())]),b=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[d,b],e)},mathmlBuilder:(s,e)=>{var d=buildExpression(ordargument(s.body),e),b=new mathMLTree.MathNode("mphantom",d),tt=new mathMLTree.MathNode("mpadded",[b]);return tt.setAttribute("width","0px"),tt}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(s,e){var{parser:d}=s,b=assertNodeType(e[0],"size").value,tt=e[1];return{type:"raisebox",mode:d.mode,dy:b,body:tt}},htmlBuilder(s,e){var d=buildGroup$1(s.body,e),b=calculateSize$1(s.dy,e);return buildCommon.makeVList({positionType:"shift",positionData:-b,children:[{type:"elem",elem:d}]},e)},mathmlBuilder(s,e){var d=new mathMLTree.MathNode("mpadded",[buildGroup(s.body,e)]),b=s.dy.number+s.dy.unit;return d.setAttribute("voffset",b),d}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(s){var{parser:e}=s;return{type:"internal",mode:e.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(s,e,d){var{parser:b}=s,tt=d[0],nt=assertNodeType(e[0],"size"),ot=assertNodeType(e[1],"size");return{type:"rule",mode:b.mode,shift:tt&&assertNodeType(tt,"size").value,width:nt.value,height:ot.value}},htmlBuilder(s,e){var d=buildCommon.makeSpan(["mord","rule"],[],e),b=calculateSize$1(s.width,e),tt=calculateSize$1(s.height,e),nt=s.shift?calculateSize$1(s.shift,e):0;return d.style.borderRightWidth=makeEm(b),d.style.borderTopWidth=makeEm(tt),d.style.bottom=makeEm(nt),d.width=b,d.height=tt+nt,d.depth=-nt,d.maxFontSize=tt*1.125*e.sizeMultiplier,d},mathmlBuilder(s,e){var d=calculateSize$1(s.width,e),b=calculateSize$1(s.height,e),tt=s.shift?calculateSize$1(s.shift,e):0,nt=e.color&&e.getColor()||"black",ot=new mathMLTree.MathNode("mspace");ot.setAttribute("mathbackground",nt),ot.setAttribute("width",makeEm(d)),ot.setAttribute("height",makeEm(b));var ht=new mathMLTree.MathNode("mpadded",[ot]);return tt>=0?ht.setAttribute("height",makeEm(tt)):(ht.setAttribute("height",makeEm(tt)),ht.setAttribute("depth",makeEm(-tt))),ht.setAttribute("voffset",makeEm(tt)),ht}});function sizingGroup(s,e,d){for(var b=buildExpression$1(s,e,!1),tt=e.sizeMultiplier/d.sizeMultiplier,nt=0;nt<b.length;nt++){var ot=b[nt].classes.indexOf("sizing");ot<0?Array.prototype.push.apply(b[nt].classes,e.sizingClasses(d)):b[nt].classes[ot+1]==="reset-size"+e.size&&(b[nt].classes[ot+1]="reset-size"+d.size),b[nt].height*=tt,b[nt].depth*=tt}return buildCommon.makeFragment(b)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(s,e)=>{var d=e.havingSize(s.size);return sizingGroup(s.body,d,e)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(s,e)=>{var{breakOnTokenText:d,funcName:b,parser:tt}=s,nt=tt.parseExpression(!1,d);return{type:"sizing",mode:tt.mode,size:sizeFuncs.indexOf(b)+1,body:nt}},htmlBuilder,mathmlBuilder:(s,e)=>{var d=e.havingSize(s.size),b=buildExpression(s.body,d),tt=new mathMLTree.MathNode("mstyle",b);return tt.setAttribute("mathsize",makeEm(d.sizeMultiplier)),tt}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(s,e,d)=>{var{parser:b}=s,tt=!1,nt=!1,ot=d[0]&&assertNodeType(d[0],"ordgroup");if(ot)for(var ht="",mt=0;mt<ot.body.length;++mt){var gt=ot.body[mt];if(ht=gt.text,ht==="t")tt=!0;else if(ht==="b")nt=!0;else{tt=!1,nt=!1;break}}else tt=!0,nt=!0;var yt=e[0];return{type:"smash",mode:b.mode,body:yt,smashHeight:tt,smashDepth:nt}},htmlBuilder:(s,e)=>{var d=buildCommon.makeSpan([],[buildGroup$1(s.body,e)]);if(!s.smashHeight&&!s.smashDepth)return d;if(s.smashHeight&&(d.height=0,d.children))for(var b=0;b<d.children.length;b++)d.children[b].height=0;if(s.smashDepth&&(d.depth=0,d.children))for(var tt=0;tt<d.children.length;tt++)d.children[tt].depth=0;var nt=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d}]},e);return buildCommon.makeSpan(["mord"],[nt],e)},mathmlBuilder:(s,e)=>{var d=new mathMLTree.MathNode("mpadded",[buildGroup(s.body,e)]);return s.smashHeight&&d.setAttribute("height","0px"),s.smashDepth&&d.setAttribute("depth","0px"),d}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(s,e,d){var{parser:b}=s,tt=d[0],nt=e[0];return{type:"sqrt",mode:b.mode,body:nt,index:tt}},htmlBuilder(s,e){var d=buildGroup$1(s.body,e.havingCrampedStyle());d.height===0&&(d.height=e.fontMetrics().xHeight),d=buildCommon.wrapFragment(d,e);var b=e.fontMetrics(),tt=b.defaultRuleThickness,nt=tt;e.style.id<Style$1.TEXT.id&&(nt=e.fontMetrics().xHeight);var ot=tt+nt/4,ht=d.height+d.depth+ot+tt,{span:mt,ruleWidth:gt,advanceWidth:yt}=delimiter.sqrtImage(ht,e),ft=mt.height-gt;ft>d.height+d.depth+ot&&(ot=(ot+ft-d.height-d.depth)/2);var st=mt.height-d.height-ot-gt;d.style.paddingLeft=makeEm(yt);var bt=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d,wrapperClasses:["svg-align"]},{type:"kern",size:-(d.height+st)},{type:"elem",elem:mt},{type:"kern",size:gt}]},e);if(s.index){var vt=e.havingStyle(Style$1.SCRIPTSCRIPT),xt=buildGroup$1(s.index,vt,e),wt=.6*(bt.height-bt.depth),St=buildCommon.makeVList({positionType:"shift",positionData:-wt,children:[{type:"elem",elem:xt}]},e),_t=buildCommon.makeSpan(["root"],[St]);return buildCommon.makeSpan(["mord","sqrt"],[_t,bt],e)}else return buildCommon.makeSpan(["mord","sqrt"],[bt],e)},mathmlBuilder(s,e){var{body:d,index:b}=s;return b?new mathMLTree.MathNode("mroot",[buildGroup(d,e),buildGroup(b,e)]):new mathMLTree.MathNode("msqrt",[buildGroup(d,e)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s,e){var{breakOnTokenText:d,funcName:b,parser:tt}=s,nt=tt.parseExpression(!0,d),ot=b.slice(1,b.length-5);return{type:"styling",mode:tt.mode,style:ot,body:nt}},htmlBuilder(s,e){var d=styleMap[s.style],b=e.havingStyle(d).withFont("");return sizingGroup(s.body,b,e)},mathmlBuilder(s,e){var d=styleMap[s.style],b=e.havingStyle(d),tt=buildExpression(s.body,b),nt=new mathMLTree.MathNode("mstyle",tt),ot={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},ht=ot[s.style];return nt.setAttribute("scriptlevel",ht[0]),nt.setAttribute("displaystyle",ht[1]),nt}});var htmlBuilderDelegate=function(e,d){var b=e.base;if(b)if(b.type==="op"){var tt=b.limits&&(d.style.size===Style$1.DISPLAY.size||b.alwaysHandleSupSub);return tt?htmlBuilder$2:null}else if(b.type==="operatorname"){var nt=b.alwaysHandleSupSub&&(d.style.size===Style$1.DISPLAY.size||b.limits);return nt?htmlBuilder$1:null}else{if(b.type==="accent")return utils.isCharacterBox(b.base)?htmlBuilder$a:null;if(b.type==="horizBrace"){var ot=!e.sub;return ot===b.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(s,e){var d=htmlBuilderDelegate(s,e);if(d)return d(s,e);var{base:b,sup:tt,sub:nt}=s,ot=buildGroup$1(b,e),ht,mt,gt=e.fontMetrics(),yt=0,ft=0,st=b&&utils.isCharacterBox(b);if(tt){var bt=e.havingStyle(e.style.sup());ht=buildGroup$1(tt,bt,e),st||(yt=ot.height-bt.fontMetrics().supDrop*bt.sizeMultiplier/e.sizeMultiplier)}if(nt){var vt=e.havingStyle(e.style.sub());mt=buildGroup$1(nt,vt,e),st||(ft=ot.depth+vt.fontMetrics().subDrop*vt.sizeMultiplier/e.sizeMultiplier)}var xt;e.style===Style$1.DISPLAY?xt=gt.sup1:e.style.cramped?xt=gt.sup3:xt=gt.sup2;var wt=e.sizeMultiplier,St=makeEm(.5/gt.ptPerEm/wt),_t=null;if(mt){var Tt=s.base&&s.base.type==="op"&&s.base.name&&(s.base.name==="\\oiint"||s.base.name==="\\oiiint");(ot instanceof SymbolNode||Tt)&&(_t=makeEm(-ot.italic))}var Et;if(ht&&mt){yt=Math.max(yt,xt,ht.depth+.25*gt.xHeight),ft=Math.max(ft,gt.sub2);var kt=gt.defaultRuleThickness,Mt=4*kt;if(yt-ht.depth-(mt.height-ft)<Mt){ft=Mt-(yt-ht.depth)+mt.height;var Ot=.8*gt.xHeight-(yt-ht.depth);Ot>0&&(yt+=Ot,ft-=Ot)}var Dt=[{type:"elem",elem:mt,shift:ft,marginRight:St,marginLeft:_t},{type:"elem",elem:ht,shift:-yt,marginRight:St}];Et=buildCommon.makeVList({positionType:"individualShift",children:Dt},e)}else if(mt){ft=Math.max(ft,gt.sub1,mt.height-.8*gt.xHeight);var At=[{type:"elem",elem:mt,marginLeft:_t,marginRight:St}];Et=buildCommon.makeVList({positionType:"shift",positionData:ft,children:At},e)}else if(ht)yt=Math.max(yt,xt,ht.depth+.25*gt.xHeight),Et=buildCommon.makeVList({positionType:"shift",positionData:-yt,children:[{type:"elem",elem:ht,marginRight:St}]},e);else throw new Error("supsub must have either sup or sub.");var It=getTypeOfDomTree(ot,"right")||"mord";return buildCommon.makeSpan([It],[ot,buildCommon.makeSpan(["msupsub"],[Et])],e)},mathmlBuilder(s,e){var d=!1,b,tt;s.base&&s.base.type==="horizBrace"&&(tt=!!s.sup,tt===s.base.isOver&&(d=!0,b=s.base.isOver)),s.base&&(s.base.type==="op"||s.base.type==="operatorname")&&(s.base.parentIsSupSub=!0);var nt=[buildGroup(s.base,e)];s.sub&&nt.push(buildGroup(s.sub,e)),s.sup&&nt.push(buildGroup(s.sup,e));var ot;if(d)ot=b?"mover":"munder";else if(s.sub)if(s.sup){var gt=s.base;gt&&gt.type==="op"&&gt.limits&&e.style===Style$1.DISPLAY||gt&&gt.type==="operatorname"&&gt.alwaysHandleSupSub&&(e.style===Style$1.DISPLAY||gt.limits)?ot="munderover":ot="msubsup"}else{var mt=s.base;mt&&mt.type==="op"&&mt.limits&&(e.style===Style$1.DISPLAY||mt.alwaysHandleSupSub)||mt&&mt.type==="operatorname"&&mt.alwaysHandleSupSub&&(mt.limits||e.style===Style$1.DISPLAY)?ot="munder":ot="msub"}else{var ht=s.base;ht&&ht.type==="op"&&ht.limits&&(e.style===Style$1.DISPLAY||ht.alwaysHandleSupSub)||ht&&ht.type==="operatorname"&&ht.alwaysHandleSupSub&&(ht.limits||e.style===Style$1.DISPLAY)?ot="mover":ot="msup"}return new mathMLTree.MathNode(ot,nt)}});defineFunctionBuilders({type:"atom",htmlBuilder(s,e){return buildCommon.mathsym(s.text,s.mode,e,["m"+s.family])},mathmlBuilder(s,e){var d=new mathMLTree.MathNode("mo",[makeText(s.text,s.mode)]);if(s.family==="bin"){var b=getVariant(s,e);b==="bold-italic"&&d.setAttribute("mathvariant",b)}else s.family==="punct"?d.setAttribute("separator","true"):(s.family==="open"||s.family==="close")&&d.setAttribute("stretchy","false");return d}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(s,e){return buildCommon.makeOrd(s,e,"mathord")},mathmlBuilder(s,e){var d=new mathMLTree.MathNode("mi",[makeText(s.text,s.mode,e)]),b=getVariant(s,e)||"italic";return b!==defaultVariant[d.type]&&d.setAttribute("mathvariant",b),d}});defineFunctionBuilders({type:"textord",htmlBuilder(s,e){return buildCommon.makeOrd(s,e,"textord")},mathmlBuilder(s,e){var d=makeText(s.text,s.mode,e),b=getVariant(s,e)||"normal",tt;return s.mode==="text"?tt=new mathMLTree.MathNode("mtext",[d]):/[0-9]/.test(s.text)?tt=new mathMLTree.MathNode("mn",[d]):s.text==="\\prime"?tt=new mathMLTree.MathNode("mo",[d]):tt=new mathMLTree.MathNode("mi",[d]),b!==defaultVariant[tt.type]&&tt.setAttribute("mathvariant",b),tt}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(s,e){if(regularSpace.hasOwnProperty(s.text)){var d=regularSpace[s.text].className||"";if(s.mode==="text"){var b=buildCommon.makeOrd(s,e,"textord");return b.classes.push(d),b}else return buildCommon.makeSpan(["mspace",d],[buildCommon.mathsym(s.text,s.mode,e)],e)}else{if(cssSpace.hasOwnProperty(s.text))return buildCommon.makeSpan(["mspace",cssSpace[s.text]],[],e);throw new ParseError('Unknown type of space "'+s.text+'"')}},mathmlBuilder(s,e){var d;if(regularSpace.hasOwnProperty(s.text))d=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("")]);else{if(cssSpace.hasOwnProperty(s.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+s.text+'"')}return d}});var pad=()=>{var s=new mathMLTree.MathNode("mtd",[]);return s.setAttribute("width","50%"),s};defineFunctionBuilders({type:"tag",mathmlBuilder(s,e){var d=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(s.body,e)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(s.tag,e)])])]);return d.setAttribute("width","100%"),d}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(s,e)=>{var d=s.font;if(d){if(textFontFamilies[d])return e.withTextFontFamily(textFontFamilies[d]);if(textFontWeights[d])return e.withTextFontWeight(textFontWeights[d]);if(d==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(textFontShapes[d])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(s,e){var{parser:d,funcName:b}=s,tt=e[0];return{type:"text",mode:d.mode,body:ordargument(tt),font:b}},htmlBuilder(s,e){var d=optionsWithFont(s,e),b=buildExpression$1(s.body,d,!0);return buildCommon.makeSpan(["mord","text"],b,d)},mathmlBuilder(s,e){var d=optionsWithFont(s,e);return buildExpressionRow(s.body,d)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(s,e){var{parser:d}=s;return{type:"underline",mode:d.mode,body:e[0]}},htmlBuilder(s,e){var d=buildGroup$1(s.body,e),b=buildCommon.makeLineSpan("underline-line",e),tt=e.fontMetrics().defaultRuleThickness,nt=buildCommon.makeVList({positionType:"top",positionData:d.height,children:[{type:"kern",size:tt},{type:"elem",elem:b},{type:"kern",size:3*tt},{type:"elem",elem:d}]},e);return buildCommon.makeSpan(["mord","underline"],[nt],e)},mathmlBuilder(s,e){var d=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);d.setAttribute("stretchy","true");var b=new mathMLTree.MathNode("munder",[buildGroup(s.body,e),d]);return b.setAttribute("accentunder","true"),b}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(s,e){var{parser:d}=s;return{type:"vcenter",mode:d.mode,body:e[0]}},htmlBuilder(s,e){var d=buildGroup$1(s.body,e),b=e.fontMetrics().axisHeight,tt=.5*(d.height-b-(d.depth+b));return buildCommon.makeVList({positionType:"shift",positionData:tt,children:[{type:"elem",elem:d}]},e)},mathmlBuilder(s,e){return new mathMLTree.MathNode("mpadded",[buildGroup(s.body,e)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(s,e,d){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(s,e){for(var d=makeVerb(s),b=[],tt=e.havingStyle(e.style.text()),nt=0;nt<d.length;nt++){var ot=d[nt];ot==="~"&&(ot="\\textasciitilde"),b.push(buildCommon.makeSymbol(ot,"Typewriter-Regular",s.mode,tt,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(tt.sizingClasses(e)),buildCommon.tryCombineChars(b),tt)},mathmlBuilder(s,e){var d=new mathMLTree.TextNode(makeVerb(s)),b=new mathMLTree.MathNode("mtext",[d]);return b.setAttribute("mathvariant","monospace"),b}});var makeVerb=s=>s.body.replace(/ /g,s.star?"":""),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[-]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]---]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(e,d){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=d,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,d){this.catcodes[e]=d}lex(){var e=this.input,d=this.tokenRegex.lastIndex;if(d===e.length)return new Token("EOF",new SourceLocation(this,d,d));var b=this.tokenRegex.exec(e);if(b===null||b.index!==d)throw new ParseError("Unexpected character: '"+e[d]+"'",new Token(e[d],new SourceLocation(this,d,d+1)));var tt=b[6]||b[3]||(b[2]?"\\ ":" ");if(this.catcodes[tt]===14){var nt=e.indexOf(`
`,this.tokenRegex.lastIndex);return nt===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=nt+1,this.lex()}return new Token(tt,new SourceLocation(this,d,this.tokenRegex.lastIndex))}}class Namespace{constructor(e,d){e===void 0&&(e={}),d===void 0&&(d={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=d,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var d in e)e.hasOwnProperty(d)&&(e[d]==null?delete this.current[d]:this.current[d]=e[d])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,d,b){if(b===void 0&&(b=!1),b){for(var tt=0;tt<this.undefStack.length;tt++)delete this.undefStack[tt][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=d)}else{var nt=this.undefStack[this.undefStack.length-1];nt&&!nt.hasOwnProperty(e)&&(nt[e]=this.current[e])}d==null?delete this.current[e]:this.current[e]=d}}var macros=_macros;defineMacro("\\noexpand",function(s){var e=s.popToken();return s.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});defineMacro("\\expandafter",function(s){var e=s.popToken();return s.expandOnce(!0),{tokens:[e],numArgs:0}});defineMacro("\\@firstoftwo",function(s){var e=s.consumeArgs(2);return{tokens:e[0],numArgs:0}});defineMacro("\\@secondoftwo",function(s){var e=s.consumeArgs(2);return{tokens:e[1],numArgs:0}});defineMacro("\\@ifnextchar",function(s){var e=s.consumeArgs(3);s.consumeSpaces();var d=s.future();return e[0].length===1&&e[0][0].text===d.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(s){var e=s.consumeArgs(2);return s.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(s){var e=s.popToken(),d,b="";if(e.text==="'")d=8,e=s.popToken();else if(e.text==='"')d=16,e=s.popToken();else if(e.text==="`")if(e=s.popToken(),e.text[0]==="\\")b=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ParseError("\\char` missing argument");b=e.text.charCodeAt(0)}else d=10;if(d){if(b=digitToNumber[e.text],b==null||b>=d)throw new ParseError("Invalid base-"+d+" digit "+e.text);for(var tt;(tt=digitToNumber[s.future().text])!=null&&tt<d;)b*=d,b+=tt,s.popToken()}return"\\@char{"+b+"}"});var newcommand=(s,e,d)=>{var b=s.consumeArg().tokens;if(b.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var tt=b[0].text,nt=s.isDefined(tt);if(nt&&!e)throw new ParseError("\\newcommand{"+tt+"} attempting to redefine "+(tt+"; use \\renewcommand"));if(!nt&&!d)throw new ParseError("\\renewcommand{"+tt+"} when command "+tt+" does not yet exist; use \\newcommand");var ot=0;if(b=s.consumeArg().tokens,b.length===1&&b[0].text==="["){for(var ht="",mt=s.expandNextToken();mt.text!=="]"&&mt.text!=="EOF";)ht+=mt.text,mt=s.expandNextToken();if(!ht.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+ht);ot=parseInt(ht),b=s.consumeArg().tokens}return s.macros.set(tt,{tokens:b,numArgs:ot}),""};defineMacro("\\newcommand",s=>newcommand(s,!1,!0));defineMacro("\\renewcommand",s=>newcommand(s,!0,!1));defineMacro("\\providecommand",s=>newcommand(s,!0,!0));defineMacro("\\message",s=>{var e=s.consumeArgs(1)[0];return console.log(e.reverse().map(d=>d.text).join("")),""});defineMacro("\\errmessage",s=>{var e=s.consumeArgs(1)[0];return console.error(e.reverse().map(d=>d.text).join("")),""});defineMacro("\\show",s=>{var e=s.popToken(),d=e.text;return console.log(e,s.macros.get(d),functions[d],symbols.math[d],symbols.text[d]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");defineMacro("","\\mathscr{B}");defineMacro("","\\mathscr{E}");defineMacro("","\\mathscr{F}");defineMacro("","\\mathscr{H}");defineMacro("","\\mathscr{I}");defineMacro("","\\mathscr{L}");defineMacro("","\\mathscr{M}");defineMacro("","\\mathscr{R}");defineMacro("","\\mathfrak{C}");defineMacro("","\\mathfrak{H}");defineMacro("","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");defineMacro("\\ne","\\neq");defineMacro("","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");defineMacro("","\\notin");defineMacro("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");defineMacro("","\\perp");defineMacro("","\\mathclose{!\\mkern-0.8mu!}");defineMacro("","\\notni");defineMacro("","\\ulcorner");defineMacro("","\\urcorner");defineMacro("","\\llcorner");defineMacro("","\\lrcorner");defineMacro("","\\copyright");defineMacro("","\\textregistered");defineMacro("","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}");defineMacro("","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(s){var e="\\dotso",d=s.expandAfterFuture().text;return d in dotsByToken?e=dotsByToken[d]:(d.slice(0,4)==="\\not"||d in symbols.math&&utils.contains(["bin","rel"],symbols.math[d].group))&&(e="\\dotsb"),e});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(s){var e=s.future().text;return e in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(s){var e=s.future().text;return e in spaceAfterDots&&e!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(s){var e=s.future().text;return e in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",s=>{if(s.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("","\\dblcolon");defineMacro("","\\eqcolon");defineMacro("","\\coloneqq");defineMacro("","\\eqqcolon");defineMacro("","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");defineMacro("\\imath","\\html@mathml{\\@imath}{}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");defineMacro("","\\llbracket");defineMacro("","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");defineMacro("","\\lBrace");defineMacro("","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");defineMacro("","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=s=>e=>{var d=e.consumeArg().tokens,b=e.consumeArg().tokens,tt=e.consumeArg().tokens,nt=e.consumeArg().tokens,ot=e.macros.get("|"),ht=e.macros.get("\\|");e.macros.beginGroup();var mt=ft=>st=>{s&&(st.macros.set("|",ot),tt.length&&st.macros.set("\\|",ht));var bt=ft;if(!ft&&tt.length){var vt=st.future();vt.text==="|"&&(st.popToken(),bt=!0)}return{tokens:bt?tt:b,numArgs:0}};e.macros.set("|",mt(!1)),tt.length&&e.macros.set("\\|",mt(!0));var gt=e.consumeArg().tokens,yt=e.expandTokens([...nt,...gt,...d]);return e.macros.endGroup(),{tokens:yt.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(e,d,b){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=d,this.expansionCount=0,this.feed(e),this.macros=new Namespace(macros,d.macros),this.mode=b,this.stack=[]}feed(e){this.lexer=new Lexer(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var d,b,tt;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;d=this.popToken(),{tokens:tt,end:b}=this.consumeArg(["]"])}else({tokens:tt,start:d,end:b}=this.consumeArg());return this.pushToken(new Token("EOF",b.loc)),this.pushTokens(tt),d.range(b,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var d=[],b=e&&e.length>0;b||this.consumeSpaces();var tt=this.future(),nt,ot=0,ht=0;do{if(nt=this.popToken(),d.push(nt),nt.text==="{")++ot;else if(nt.text==="}"){if(--ot,ot===-1)throw new ParseError("Extra }",nt)}else if(nt.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(e&&b?e[ht]:"}")+"'",nt);if(e&&b)if((ot===0||ot===1&&e[ht]==="{")&&nt.text===e[ht]){if(++ht,ht===e.length){d.splice(-ht,ht);break}}else ht=0}while(ot!==0||b);return tt.text==="{"&&d[d.length-1].text==="}"&&(d.pop(),d.shift()),d.reverse(),{tokens:d,start:tt,end:nt}}consumeArgs(e,d){if(d){if(d.length!==e+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var b=d[0],tt=0;tt<b.length;tt++){var nt=this.popToken();if(b[tt]!==nt.text)throw new ParseError("Use of the macro doesn't match its definition",nt)}}for(var ot=[],ht=0;ht<e;ht++)ot.push(this.consumeArg(d&&d[ht+1]).tokens);return ot}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var d=this.popToken(),b=d.text,tt=d.noexpand?null:this._getExpansion(b);if(tt==null||e&&tt.unexpandable){if(e&&tt==null&&b[0]==="\\"&&!this.isDefined(b))throw new ParseError("Undefined control sequence: "+b);return this.pushToken(d),!1}this.countExpansion(1);var nt=tt.tokens,ot=this.consumeArgs(tt.numArgs,tt.delimiters);if(tt.numArgs){nt=nt.slice();for(var ht=nt.length-1;ht>=0;--ht){var mt=nt[ht];if(mt.text==="#"){if(ht===0)throw new ParseError("Incomplete placeholder at end of macro body",mt);if(mt=nt[--ht],mt.text==="#")nt.splice(ht+1,1);else if(/^[1-9]$/.test(mt.text))nt.splice(ht,2,...ot[+mt.text-1]);else throw new ParseError("Not a valid argument number",mt)}}}return this.pushTokens(nt),nt.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Token(e)]):void 0}expandTokens(e){var d=[],b=this.stack.length;for(this.pushTokens(e);this.stack.length>b;)if(this.expandOnce(!0)===!1){var tt=this.stack.pop();tt.treatAsRelax&&(tt.noexpand=!1,tt.treatAsRelax=!1),d.push(tt)}return this.countExpansion(d.length),d}expandMacroAsText(e){var d=this.expandMacro(e);return d&&d.map(b=>b.text).join("")}_getExpansion(e){var d=this.macros.get(e);if(d==null)return d;if(e.length===1){var b=this.lexer.catcodes[e];if(b!=null&&b!==13)return}var tt=typeof d=="function"?d(this):d;if(typeof tt=="string"){var nt=0;if(tt.indexOf("#")!==-1)for(var ot=tt.replace(/##/g,"");ot.indexOf("#"+(nt+1))!==-1;)++nt;for(var ht=new Lexer(tt,this.settings),mt=[],gt=ht.lex();gt.text!=="EOF";)mt.push(gt),gt=ht.lex();mt.reverse();var yt={tokens:mt,numArgs:nt};return yt}return tt}isDefined(e){return this.macros.has(e)||functions.hasOwnProperty(e)||symbols.math.hasOwnProperty(e)||symbols.text.hasOwnProperty(e)||implicitCommands.hasOwnProperty(e)}isExpandable(e){var d=this.macros.get(e);return d!=null?typeof d=="string"||typeof d=="function"||!d.unexpandable:functions.hasOwnProperty(e)&&!functions[e].primitive}}var unicodeSubRegEx=/^[]/,uSubsAndSups=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),unicodeAccents={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},unicodeSymbols={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Parser{constructor(e,d){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(e,d,this.mode),this.settings=d,this.leftrightDepth=0}expect(e,d){if(d===void 0&&(d=!0),this.fetch().text!==e)throw new ParseError("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());d&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var d=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(e);var b=this.parseExpression(!1);return this.expect("}"),this.nextToken=d,b}parseExpression(e,d){for(var b=[];;){this.mode==="math"&&this.consumeSpaces();var tt=this.fetch();if(Parser.endOfExpression.indexOf(tt.text)!==-1||d&&tt.text===d||e&&functions[tt.text]&&functions[tt.text].infix)break;var nt=this.parseAtom(d);if(nt){if(nt.type==="internal")continue}else break;b.push(nt)}return this.mode==="text"&&this.formLigatures(b),this.handleInfixNodes(b)}handleInfixNodes(e){for(var d=-1,b,tt=0;tt<e.length;tt++)if(e[tt].type==="infix"){if(d!==-1)throw new ParseError("only one infix operator per group",e[tt].token);d=tt,b=e[tt].replaceWith}if(d!==-1&&b){var nt,ot,ht=e.slice(0,d),mt=e.slice(d+1);ht.length===1&&ht[0].type==="ordgroup"?nt=ht[0]:nt={type:"ordgroup",mode:this.mode,body:ht},mt.length===1&&mt[0].type==="ordgroup"?ot=mt[0]:ot={type:"ordgroup",mode:this.mode,body:mt};var gt;return b==="\\\\abovefrac"?gt=this.callFunction(b,[nt,e[d],ot],[]):gt=this.callFunction(b,[nt,ot],[]),[gt]}else return e}handleSupSubscript(e){var d=this.fetch(),b=d.text;this.consume(),this.consumeSpaces();var tt=this.parseGroup(e);if(!tt)throw new ParseError("Expected group after '"+b+"'",d);return tt}formatUnsupportedCmd(e){for(var d=[],b=0;b<e.length;b++)d.push({type:"textord",mode:"text",text:e[b]});var tt={type:"text",mode:this.mode,body:d},nt={type:"color",mode:this.mode,color:this.settings.errorColor,body:[tt]};return nt}parseAtom(e){var d=this.parseGroup("atom",e);if(this.mode==="text")return d;for(var b,tt;;){this.consumeSpaces();var nt=this.fetch();if(nt.text==="\\limits"||nt.text==="\\nolimits"){if(d&&d.type==="op"){var ot=nt.text==="\\limits";d.limits=ot,d.alwaysHandleSupSub=!0}else if(d&&d.type==="operatorname")d.alwaysHandleSupSub&&(d.limits=nt.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",nt);this.consume()}else if(nt.text==="^"){if(b)throw new ParseError("Double superscript",nt);b=this.handleSupSubscript("superscript")}else if(nt.text==="_"){if(tt)throw new ParseError("Double subscript",nt);tt=this.handleSupSubscript("subscript")}else if(nt.text==="'"){if(b)throw new ParseError("Double superscript",nt);var ht={type:"textord",mode:this.mode,text:"\\prime"},mt=[ht];for(this.consume();this.fetch().text==="'";)mt.push(ht),this.consume();this.fetch().text==="^"&&mt.push(this.handleSupSubscript("superscript")),b={type:"ordgroup",mode:this.mode,body:mt}}else if(uSubsAndSups[nt.text]){var gt=unicodeSubRegEx.test(nt.text),yt=[];for(yt.push(new Token(uSubsAndSups[nt.text])),this.consume();;){var ft=this.fetch().text;if(!uSubsAndSups[ft]||unicodeSubRegEx.test(ft)!==gt)break;yt.unshift(new Token(uSubsAndSups[ft])),this.consume()}var st=this.subparse(yt);gt?tt={type:"ordgroup",mode:"math",body:st}:b={type:"ordgroup",mode:"math",body:st}}else break}return b||tt?{type:"supsub",mode:this.mode,base:d,sup:b,sub:tt}:d}parseFunction(e,d){var b=this.fetch(),tt=b.text,nt=functions[tt];if(!nt)return null;if(this.consume(),d&&d!=="atom"&&!nt.allowedInArgument)throw new ParseError("Got function '"+tt+"' with no arguments"+(d?" as "+d:""),b);if(this.mode==="text"&&!nt.allowedInText)throw new ParseError("Can't use function '"+tt+"' in text mode",b);if(this.mode==="math"&&nt.allowedInMath===!1)throw new ParseError("Can't use function '"+tt+"' in math mode",b);var{args:ot,optArgs:ht}=this.parseArguments(tt,nt);return this.callFunction(tt,ot,ht,b,e)}callFunction(e,d,b,tt,nt){var ot={funcName:e,parser:this,token:tt,breakOnTokenText:nt},ht=functions[e];if(ht&&ht.handler)return ht.handler(ot,d,b);throw new ParseError("No function handler for "+e)}parseArguments(e,d){var b=d.numArgs+d.numOptionalArgs;if(b===0)return{args:[],optArgs:[]};for(var tt=[],nt=[],ot=0;ot<b;ot++){var ht=d.argTypes&&d.argTypes[ot],mt=ot<d.numOptionalArgs;(d.primitive&&ht==null||d.type==="sqrt"&&ot===1&&nt[0]==null)&&(ht="primitive");var gt=this.parseGroupOfType("argument to '"+e+"'",ht,mt);if(mt)nt.push(gt);else if(gt!=null)tt.push(gt);else throw new ParseError("Null argument, please report this as a bug")}return{args:tt,optArgs:nt}}parseGroupOfType(e,d,b){switch(d){case"color":return this.parseColorGroup(b);case"size":return this.parseSizeGroup(b);case"url":return this.parseUrlGroup(b);case"math":case"text":return this.parseArgumentGroup(b,d);case"hbox":{var tt=this.parseArgumentGroup(b,"text");return tt!=null?{type:"styling",mode:tt.mode,body:[tt],style:"text"}:null}case"raw":{var nt=this.parseStringGroup("raw",b);return nt!=null?{type:"raw",mode:"text",string:nt.text}:null}case"primitive":{if(b)throw new ParseError("A primitive argument cannot be optional");var ot=this.parseGroup(e);if(ot==null)throw new ParseError("Expected group as "+e,this.fetch());return ot}case"original":case null:case void 0:return this.parseArgumentGroup(b);default:throw new ParseError("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,d){var b=this.gullet.scanArgument(d);if(b==null)return null;for(var tt="",nt;(nt=this.fetch()).text!=="EOF";)tt+=nt.text,this.consume();return this.consume(),b.text=tt,b}parseRegexGroup(e,d){for(var b=this.fetch(),tt=b,nt="",ot;(ot=this.fetch()).text!=="EOF"&&e.test(nt+ot.text);)tt=ot,nt+=tt.text,this.consume();if(nt==="")throw new ParseError("Invalid "+d+": '"+b.text+"'",b);return b.range(tt,nt)}parseColorGroup(e){var d=this.parseStringGroup("color",e);if(d==null)return null;var b=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(d.text);if(!b)throw new ParseError("Invalid color: '"+d.text+"'",d);var tt=b[0];return/^[0-9a-f]{6}$/i.test(tt)&&(tt="#"+tt),{type:"color-token",mode:this.mode,color:tt}}parseSizeGroup(e){var d,b=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?d=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):d=this.parseStringGroup("size",e),!d)return null;!e&&d.text.length===0&&(d.text="0pt",b=!0);var tt=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(d.text);if(!tt)throw new ParseError("Invalid size: '"+d.text+"'",d);var nt={number:+(tt[1]+tt[2]),unit:tt[3]};if(!validUnit(nt))throw new ParseError("Invalid unit: '"+nt.unit+"'",d);return{type:"size",mode:this.mode,value:nt,isBlank:b}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var d=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),d==null)return null;var b=d.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:b}}parseArgumentGroup(e,d){var b=this.gullet.scanArgument(e);if(b==null)return null;var tt=this.mode;d&&this.switchMode(d),this.gullet.beginGroup();var nt=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var ot={type:"ordgroup",mode:this.mode,loc:b.loc,body:nt};return d&&this.switchMode(tt),ot}parseGroup(e,d){var b=this.fetch(),tt=b.text,nt;if(tt==="{"||tt==="\\begingroup"){this.consume();var ot=tt==="{"?"}":"\\endgroup";this.gullet.beginGroup();var ht=this.parseExpression(!1,ot),mt=this.fetch();this.expect(ot),this.gullet.endGroup(),nt={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(b,mt),body:ht,semisimple:tt==="\\begingroup"||void 0}}else if(nt=this.parseFunction(d,e)||this.parseSymbol(),nt==null&&tt[0]==="\\"&&!implicitCommands.hasOwnProperty(tt)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+tt,b);nt=this.formatUnsupportedCmd(tt),this.consume()}return nt}formLigatures(e){for(var d=e.length-1,b=0;b<d;++b){var tt=e[b],nt=tt.text;nt==="-"&&e[b+1].text==="-"&&(b+1<d&&e[b+2].text==="-"?(e.splice(b,3,{type:"textord",mode:"text",loc:SourceLocation.range(tt,e[b+2]),text:"---"}),d-=2):(e.splice(b,2,{type:"textord",mode:"text",loc:SourceLocation.range(tt,e[b+1]),text:"--"}),d-=1)),(nt==="'"||nt==="`")&&e[b+1].text===nt&&(e.splice(b,2,{type:"textord",mode:"text",loc:SourceLocation.range(tt,e[b+1]),text:nt+nt}),d-=1)}}parseSymbol(){var e=this.fetch(),d=e.text;if(/^\\verb[^a-zA-Z]/.test(d)){this.consume();var b=d.slice(5),tt=b.charAt(0)==="*";if(tt&&(b=b.slice(1)),b.length<2||b.charAt(0)!==b.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return b=b.slice(1,-1),{type:"verb",mode:"text",body:b,star:tt}}unicodeSymbols.hasOwnProperty(d[0])&&!symbols[this.mode][d[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+d[0]+'" used in math mode',e),d=unicodeSymbols[d[0]]+d.slice(1));var nt=combiningDiacriticalMarksEndRegex.exec(d);nt&&(d=d.substring(0,nt.index),d==="i"?d="":d==="j"&&(d=""));var ot;if(symbols[this.mode][d]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(d)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+d[0]+'" used in math mode',e);var ht=symbols[this.mode][d].group,mt=SourceLocation.range(e),gt;if(ATOMS.hasOwnProperty(ht)){var yt=ht;gt={type:"atom",mode:this.mode,family:yt,loc:mt,text:d}}else gt={type:ht,mode:this.mode,loc:mt,text:d};ot=gt}else if(d.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(d.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+d[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+d[0]+'"'+(" ("+d.charCodeAt(0)+")"),e)),ot={type:"textord",mode:"text",loc:SourceLocation.range(e),text:d};else return null;if(this.consume(),nt)for(var ft=0;ft<nt[0].length;ft++){var st=nt[0][ft];if(!unicodeAccents[st])throw new ParseError("Unknown accent ' "+st+"'",e);var bt=unicodeAccents[st][this.mode]||unicodeAccents[st].text;if(!bt)throw new ParseError("Accent "+st+" unsupported in "+this.mode+" mode",e);ot={type:"accent",mode:this.mode,loc:SourceLocation.range(e),label:bt,isStretchy:!1,isShifty:!0,base:ot}}return ot}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function(e,d){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var b=new Parser(e,d);delete b.gullet.macros.current["\\df@tag"];var tt=b.parse();if(delete b.gullet.macros.current["\\current@color"],delete b.gullet.macros.current["\\color"],b.gullet.macros.get("\\df@tag")){if(!d.displayMode)throw new ParseError("\\tag works only in display equations");tt=[{type:"tag",mode:"text",body:tt,tag:b.subparse([new Token("\\df@tag")])}]}return tt},render=function(e,d,b){d.textContent="";var tt=renderToDomTree(e,b).toNode();d.appendChild(tt)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function(e,d){var b=renderToDomTree(e,d).toMarkup();return b},generateParseTree=function(e,d){var b=new Settings(d);return parseTree(e,b)},renderError=function(e,d,b){if(b.throwOnError||!(e instanceof ParseError))throw e;var tt=buildCommon.makeSpan(["katex-error"],[new SymbolNode(d)]);return tt.setAttribute("title",e.toString()),tt.setAttribute("style","color:"+b.errorColor),tt},renderToDomTree=function(e,d){var b=new Settings(d);try{var tt=parseTree(e,b);return buildTree(tt,e,b)}catch(nt){return renderError(nt,e,b)}},renderToHTMLTree=function(e,d){var b=new Settings(d);try{var tt=parseTree(e,b);return buildHTMLTree(tt,e,b)}catch(nt){return renderError(nt,e,b)}},katex={version:"0.16.11",render,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree:{Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode}};const InlineTex=Node$2.create({name:"inline-tex",inline:!0,group:"inline",atom:!0,selectable:!1,addAttributes(){return{rawTex:{default:""},editing:{default:!0}}},parseHTML(){return[{tag:"inline-tex"}]},renderHTML({HTMLAttributes:s}){return["inline-tex",mergeAttributes(s)]},addNodeView(){return ReactNodeViewRenderer(RenderInlineTex)}}),RenderInlineTex=s=>{let e=s.node.attrs.rawTex,d=s.node.attrs.editing;const[b,tt,nt]=useState(s.editor.isEditable);reactExports.useEffect(()=>{s.editor.on("transaction",()=>{s.editor.isEditable!=nt.current&&tt(s.editor.isEditable)})},[]);const ot=yt=>{!b&&yt||(yt||e.trim()!="")&&s.updateAttributes({editing:yt})},ht=yt=>{const ft=yt.target.value;s.updateAttributes({rawTex:ft})},mt=()=>{ot(!1),s.editor.commands.focus()},gt=yt=>{yt.key==="Enter"&&mt(),yt.key==="Tab"&&mt()};if(d&&b){let yt=e.length>0?e.length:3;return jsxRuntimeExports.jsx(NodeViewWrapper,{as:"span",children:jsxRuntimeExports.jsx(ControlledInput$1,{style:INPUT_STYLE$1,value:e,onChange:ft=>ht(ft),autoFocus:!0,size:yt,onKeyDown:ft=>gt(ft),onBlur:()=>mt()})})}return jsxRuntimeExports.jsx(NodeViewWrapper,{as:"span",children:jsxRuntimeExports.jsx(RenderedInlineKatex,{content:e,onClick:()=>ot(!0)})})},RenderedInlineKatex=s=>{const[e,d]=useState(!1),b=reactExports.createRef();reactExports.useEffect(()=>{if(b.current&&s.content)try{katex.render(s.content,b.current,{displayMode:!1})}catch{d(!0)}},[s.content]);let tt="";return e?jsxRuntimeExports.jsx("span",{className:"badge bg-danger",onClick:s.onClick,children:"tex error"}):s.content.trim&&s.content.trim()==""?jsxRuntimeExports.jsx("span",{className:"badge bg-info",onClick:s.onClick,children:"empty tex"}):jsxRuntimeExports.jsx("span",{className:tt,ref:b,onClick:s.onClick})},INPUT_STYLE$1={fontFamily:"monospace"},ControlledInput$1=s=>{const{value:e,onChange:d,...b}=s,[tt,nt]=useState(null),ot=reactExports.useRef(null);reactExports.useEffect(()=>{const mt=ot.current;mt&&mt.setSelectionRange(tt,tt)},[ot,tt,e]);const ht=mt=>{nt(mt.target.selectionStart),d&&d(mt)};return jsxRuntimeExports.jsx("input",{ref:ot,autoFocus:!0,value:e,onChange:ht,...b})},BlockTex=Node$2.create({name:"block-tex",inline:!1,group:"block",atom:!0,draggable:!0,selectable:!0,code:!0,addAttributes(){return{rawTex:{default:`\\begin{aligned}

\\end{aligned}`},showEditor:{default:!0}}},parseHTML(){return[{tag:"block-tex"}]},renderHTML({HTMLAttributes:s}){return["block-tex",mergeAttributes(s)]},addNodeView(){return ReactNodeViewRenderer(RenderBlockTex)}}),RenderBlockTex=s=>{let e=s.node.attrs.rawTex,d=s.node.attrs.showEditor;const[b,tt,nt]=useState(s.editor.isEditable);reactExports.useEffect(()=>{s.editor.on("transaction",()=>{s.editor.isEditable!=nt.current&&tt(s.editor.isEditable)})},[]);const ot=gt=>{!b&&gt||(gt||e.trim()!="")&&s.updateAttributes({showEditor:gt})},ht=gt=>{s.updateAttributes({rawTex:gt})},mt=()=>{d||ot(!0)};return jsxRuntimeExports.jsxs(NodeViewWrapper,{onClick:gt=>mt(),spellCheck:"false",children:[jsxRuntimeExports.jsx(CodeSnippet,{showEditor:d&&b,value:e,onChange:gt=>ht(gt),editable:b}),jsxRuntimeExports.jsx(CompiledLatex,{latexValue:e,showEditor:d&&b}),d&&b&&jsxRuntimeExports.jsx(ButtonRow,{showEditor:d,setShowEditor:gt=>ot(gt)})]})},CompiledLatex=s=>{let e=s.latexValue,d=!0,b="";try{katex.__parse(s.latexValue),d=!1}catch(tt){const nt=tt.message.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace("KaTeX","LaTeX");e="",b=nt}if(!s.showEditor){if(d)return jsxRuntimeExports.jsx("div",{className:"purpleBox",children:jsxRuntimeExports.jsx("i",{children:"Invalid Latex Block. Click to edit"})});if(isBlockEmpty(s.latexValue))return jsxRuntimeExports.jsx("div",{className:"purpleBox",children:jsxRuntimeExports.jsx("i",{children:"Empty LaTeX Block. Click to edit"})})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(KatexOutput,{content:e,editMode:s.showEditor}),d&&jsxRuntimeExports.jsx("div",{style:{color:"orchid",width:"100%"},children:jsxRuntimeExports.jsxs("i",{children:[b,jsxRuntimeExports.jsx("br",{}),"Rendering last valid compile"]})})]})},CodeSnippet=s=>s.showEditor?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(MonacoTipTap,{mode:"latex",value:s.value,onChange:e=>s.onChange(e),readOnly:!s.editable})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),KatexOutput=s=>{const e=reactExports.createRef();reactExports.useEffect(()=>{e.current&&s.content&&katex.render(s.content,e.current,{displayMode:!0,throwOnError:!1})},[s.content]);let d="";return s.editMode&&(d="purpleBox"),jsxRuntimeExports.jsx("div",{className:d,ref:e,onClick:s.onClick})},ButtonRow=s=>{const e=d=>{d.stopPropagation(),s.setShowEditor(!1)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("button",{onClick:d=>e(d),className:"btn btn-light btn-sm",disabled:s.disabled,children:[jsxRuntimeExports.jsx(FaTimes,{})," Close Block Editor"]})})};function isBlockEmpty(s){if(!s)return!0;let e=s.replace("\\begin{aligned}","");return e=e.replace("\\end{aligned}",""),e=e.trim(),e===""}const parseMathJax=s=>{if(!s)return s;const e=/\$\$([^$]+)\$\$|\$(.+?)\$|\\begin\{([a-z*]+)\}[\s\S]+?\\end\{\3\}/g;function d(nt){return nt.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replaceAll("$","").replaceAll("align*","aligned").toString()}let b=[],tt=0;return s=s.replace(e,nt=>{let ht=nt.startsWith("\\begin")?"block-tex":"inline-tex";const mt=`REPLACEMENT_${tt++}`;return b.push({placeholder:mt,latexCode:`<${ht} rawTex="${d(nt)}">${d(nt)}</${ht}>`}),mt}),b.forEach(nt=>{s=s.replace(nt.placeholder,nt.latexCode)}),s};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function round(s){return s+.5|0}const lim=(s,e,d)=>Math.max(Math.min(s,d),e);function p2b(s){return lim(round(s*2.55),0,255)}function n2b(s){return lim(round(s*255),0,255)}function b2n(s){return lim(round(s/2.55)/100,0,1)}function n2p(s){return lim(round(s*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex$1=[..."0123456789ABCDEF"],h1=s=>hex$1[s&15],h2=s=>hex$1[(s&240)>>4]+hex$1[s&15],eq=s=>(s&240)>>4===(s&15),isShort=s=>eq(s.r)&&eq(s.g)&&eq(s.b)&&eq(s.a);function hexParse(s){var e=s.length,d;return s[0]==="#"&&(e===4||e===5?d={r:255&map$1[s[1]]*17,g:255&map$1[s[2]]*17,b:255&map$1[s[3]]*17,a:e===5?map$1[s[4]]*17:255}:(e===7||e===9)&&(d={r:map$1[s[1]]<<4|map$1[s[2]],g:map$1[s[3]]<<4|map$1[s[4]],b:map$1[s[5]]<<4|map$1[s[6]],a:e===9?map$1[s[7]]<<4|map$1[s[8]]:255})),d}const alpha=(s,e)=>s<255?e(s):"";function hexString(s){var e=isShort(s)?h1:h2;return s?"#"+e(s.r)+e(s.g)+e(s.b)+alpha(s.a,e):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(s,e,d){const b=e*Math.min(d,1-d),tt=(nt,ot=(nt+s/30)%12)=>d-b*Math.max(Math.min(ot-3,9-ot,1),-1);return[tt(0),tt(8),tt(4)]}function hsv2rgbn(s,e,d){const b=(tt,nt=(tt+s/60)%6)=>d-d*e*Math.max(Math.min(nt,4-nt,1),0);return[b(5),b(3),b(1)]}function hwb2rgbn(s,e,d){const b=hsl2rgbn(s,1,.5);let tt;for(e+d>1&&(tt=1/(e+d),e*=tt,d*=tt),tt=0;tt<3;tt++)b[tt]*=1-e-d,b[tt]+=e;return b}function hueValue(s,e,d,b,tt){return s===tt?(e-d)/b+(e<d?6:0):e===tt?(d-s)/b+2:(s-e)/b+4}function rgb2hsl(s){const d=s.r/255,b=s.g/255,tt=s.b/255,nt=Math.max(d,b,tt),ot=Math.min(d,b,tt),ht=(nt+ot)/2;let mt,gt,yt;return nt!==ot&&(yt=nt-ot,gt=ht>.5?yt/(2-nt-ot):yt/(nt+ot),mt=hueValue(d,b,tt,yt,nt),mt=mt*60+.5),[mt|0,gt||0,ht]}function calln(s,e,d,b){return(Array.isArray(e)?s(e[0],e[1],e[2]):s(e,d,b)).map(n2b)}function hsl2rgb$1(s,e,d){return calln(hsl2rgbn,s,e,d)}function hwb2rgb(s,e,d){return calln(hwb2rgbn,s,e,d)}function hsv2rgb(s,e,d){return calln(hsv2rgbn,s,e,d)}function hue(s){return(s%360+360)%360}function hueParse(s){const e=HUE_RE.exec(s);let d=255,b;if(!e)return;e[5]!==b&&(d=e[6]?p2b(+e[5]):n2b(+e[5]));const tt=hue(+e[2]),nt=+e[3]/100,ot=+e[4]/100;return e[1]==="hwb"?b=hwb2rgb(tt,nt,ot):e[1]==="hsv"?b=hsv2rgb(tt,nt,ot):b=hsl2rgb$1(tt,nt,ot),{r:b[0],g:b[1],b:b[2],a:d}}function rotate(s,e){var d=rgb2hsl(s);d[0]=hue(d[0]+e),d=hsl2rgb$1(d),s.r=d[0],s.g=d[1],s.b=d[2]}function hslString(s){if(!s)return;const e=rgb2hsl(s),d=e[0],b=n2p(e[1]),tt=n2p(e[2]);return s.a<255?`hsla(${d}, ${b}%, ${tt}%, ${b2n(s.a)})`:`hsl(${d}, ${b}%, ${tt}%)`}const map={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const s={},e=Object.keys(names$1),d=Object.keys(map);let b,tt,nt,ot,ht;for(b=0;b<e.length;b++){for(ot=ht=e[b],tt=0;tt<d.length;tt++)nt=d[tt],ht=ht.replace(nt,map[nt]);nt=parseInt(names$1[ot],16),s[ht]=[nt>>16&255,nt>>8&255,nt&255]}return s}let names;function nameParse(s){names||(names=unpack(),names.transparent=[0,0,0,0]);const e=names[s.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(s){const e=RGB_RE.exec(s);let d=255,b,tt,nt;if(e){if(e[7]!==b){const ot=+e[7];d=e[8]?p2b(ot):lim(ot*255,0,255)}return b=+e[1],tt=+e[3],nt=+e[5],b=255&(e[2]?p2b(b):lim(b,0,255)),tt=255&(e[4]?p2b(tt):lim(tt,0,255)),nt=255&(e[6]?p2b(nt):lim(nt,0,255)),{r:b,g:tt,b:nt,a:d}}}function rgbString(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${b2n(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const to=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,from=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function interpolate$2(s,e,d){const b=from(b2n(s.r)),tt=from(b2n(s.g)),nt=from(b2n(s.b));return{r:n2b(to(b+d*(from(b2n(e.r))-b))),g:n2b(to(tt+d*(from(b2n(e.g))-tt))),b:n2b(to(nt+d*(from(b2n(e.b))-nt))),a:s.a+d*(e.a-s.a)}}function modHSL(s,e,d){if(s){let b=rgb2hsl(s);b[e]=Math.max(0,Math.min(b[e]+b[e]*d,e===0?360:1)),b=hsl2rgb$1(b),s.r=b[0],s.g=b[1],s.b=b[2]}}function clone$3(s,e){return s&&Object.assign(e||{},s)}function fromObject(s){var e={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(e={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(e.a=n2b(s[3]))):(e=clone$3(s,{r:0,g:0,b:0,a:1}),e.a=n2b(e.a)),e}function functionParse(s){return s.charAt(0)==="r"?rgbParse(s):hueParse(s)}let Color$1=class ts{constructor(e){if(e instanceof ts)return e;const d=typeof e;let b;d==="object"?b=fromObject(e):d==="string"&&(b=hexParse(e)||nameParse(e)||functionParse(e)),this._rgb=b,this._valid=!!b}get valid(){return this._valid}get rgb(){var e=clone$3(this._rgb);return e&&(e.a=b2n(e.a)),e}set rgb(e){this._rgb=fromObject(e)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(e,d){if(e){const b=this.rgb,tt=e.rgb;let nt;const ot=d===nt?.5:d,ht=2*ot-1,mt=b.a-tt.a,gt=((ht*mt===-1?ht:(ht+mt)/(1+ht*mt))+1)/2;nt=1-gt,b.r=255&gt*b.r+nt*tt.r+.5,b.g=255&gt*b.g+nt*tt.g+.5,b.b=255&gt*b.b+nt*tt.b+.5,b.a=ot*b.a+(1-ot)*tt.a,this.rgb=b}return this}interpolate(e,d){return e&&(this._rgb=interpolate$2(this._rgb,e._rgb,d)),this}clone(){return new ts(this.rgb)}alpha(e){return this._rgb.a=n2b(e),this}clearer(e){const d=this._rgb;return d.a*=1-e,this}greyscale(){const e=this._rgb,d=round(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=d,this}opaquer(e){const d=this._rgb;return d.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return modHSL(this._rgb,2,e),this}darken(e){return modHSL(this._rgb,2,-e),this}saturate(e){return modHSL(this._rgb,1,e),this}desaturate(e){return modHSL(this._rgb,1,-e),this}rotate(e){return rotate(this._rgb,e),this}};/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function noop$1(){}const uid=(()=>{let s=0;return()=>s++})();function isNullOrUndef(s){return s===null||typeof s>"u"}function isArray(s){if(Array.isArray&&Array.isArray(s))return!0;const e=Object.prototype.toString.call(s);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function isObject(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function isNumberFinite(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function finiteOrDefault(s,e){return isNumberFinite(s)?s:e}function valueOrDefault(s,e){return typeof s>"u"?e:s}const toDimension=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*e:+s;function callback(s,e,d){if(s&&typeof s.call=="function")return s.apply(d,e)}function each(s,e,d,b){let tt,nt,ot;if(isArray(s))for(nt=s.length,tt=0;tt<nt;tt++)e.call(d,s[tt],tt);else if(isObject(s))for(ot=Object.keys(s),nt=ot.length,tt=0;tt<nt;tt++)e.call(d,s[ot[tt]],ot[tt])}function _elementsEqual(s,e){let d,b,tt,nt;if(!s||!e||s.length!==e.length)return!1;for(d=0,b=s.length;d<b;++d)if(tt=s[d],nt=e[d],tt.datasetIndex!==nt.datasetIndex||tt.index!==nt.index)return!1;return!0}function clone$2(s){if(isArray(s))return s.map(clone$2);if(isObject(s)){const e=Object.create(null),d=Object.keys(s),b=d.length;let tt=0;for(;tt<b;++tt)e[d[tt]]=clone$2(s[d[tt]]);return e}return s}function isValidKey(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function _merger(s,e,d,b){if(!isValidKey(s))return;const tt=e[s],nt=d[s];isObject(tt)&&isObject(nt)?merge(tt,nt,b):e[s]=clone$2(nt)}function merge(s,e,d){const b=isArray(e)?e:[e],tt=b.length;if(!isObject(s))return s;d=d||{};const nt=d.merger||_merger;let ot;for(let ht=0;ht<tt;++ht){if(ot=b[ht],!isObject(ot))continue;const mt=Object.keys(ot);for(let gt=0,yt=mt.length;gt<yt;++gt)nt(mt[gt],s,ot,d)}return s}function mergeIf(s,e){return merge(s,e,{merger:_mergerIf})}function _mergerIf(s,e,d){if(!isValidKey(s))return;const b=e[s],tt=d[s];isObject(b)&&isObject(tt)?mergeIf(b,tt):Object.prototype.hasOwnProperty.call(e,s)||(e[s]=clone$2(tt))}const keyResolvers={"":s=>s,x:s=>s.x,y:s=>s.y};function _splitKey(s){const e=s.split("."),d=[];let b="";for(const tt of e)b+=tt,b.endsWith("\\")?b=b.slice(0,-1)+".":(d.push(b),b="");return d}function _getKeyResolver(s){const e=_splitKey(s);return d=>{for(const b of e){if(b==="")break;d=d&&d[b]}return d}}function resolveObjectKey(s,e){return(keyResolvers[e]||(keyResolvers[e]=_getKeyResolver(e)))(s)}function _capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)}const defined=s=>typeof s<"u",isFunction=s=>typeof s=="function",setsEqual=(s,e)=>{if(s.size!==e.size)return!1;for(const d of s)if(!e.has(d))return!1;return!0};function _isClickEvent(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function almostEquals(s,e,d){return Math.abs(s-e)<d}function niceNum(s){const e=Math.round(s);s=almostEquals(s,e,s/1e3)?e:s;const d=Math.pow(10,Math.floor(log10(s))),b=s/d;return(b<=1?1:b<=2?2:b<=5?5:10)*d}function _factorize(s){const e=[],d=Math.sqrt(s);let b;for(b=1;b<d;b++)s%b===0&&(e.push(b),e.push(s/b));return d===(d|0)&&e.push(d),e.sort((tt,nt)=>tt-nt).pop(),e}function isNumber(s){return!isNaN(parseFloat(s))&&isFinite(s)}function almostWhole(s,e){const d=Math.round(s);return d-e<=s&&d+e>=s}function _setMinAndMaxByKey(s,e,d){let b,tt,nt;for(b=0,tt=s.length;b<tt;b++)nt=s[b][d],isNaN(nt)||(e.min=Math.min(e.min,nt),e.max=Math.max(e.max,nt))}function toRadians(s){return s*(PI/180)}function toDegrees(s){return s*(180/PI)}function _decimalPlaces(s){if(!isNumberFinite(s))return;let e=1,d=0;for(;Math.round(s*e)/e!==s;)e*=10,d++;return d}function getAngleFromPoint(s,e){const d=e.x-s.x,b=e.y-s.y,tt=Math.sqrt(d*d+b*b);let nt=Math.atan2(b,d);return nt<-.5*PI&&(nt+=TAU),{angle:nt,distance:tt}}function distanceBetweenPoints(s,e){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function _normalizeAngle(s){return(s%TAU+TAU)%TAU}function _angleBetween(s,e,d,b){const tt=_normalizeAngle(s),nt=_normalizeAngle(e),ot=_normalizeAngle(d),ht=_normalizeAngle(nt-tt),mt=_normalizeAngle(ot-tt),gt=_normalizeAngle(tt-nt),yt=_normalizeAngle(tt-ot);return tt===nt||tt===ot||b&&nt===ot||ht>mt&&gt<yt}function _limitValue(s,e,d){return Math.max(e,Math.min(d,s))}function _int16Range(s){return _limitValue(s,-32768,32767)}function _isBetween(s,e,d,b=1e-6){return s>=Math.min(e,d)-b&&s<=Math.max(e,d)+b}function _lookup(s,e,d){d=d||(ot=>s[ot]<e);let b=s.length-1,tt=0,nt;for(;b-tt>1;)nt=tt+b>>1,d(nt)?tt=nt:b=nt;return{lo:tt,hi:b}}const _lookupByKey=(s,e,d,b)=>_lookup(s,d,b?tt=>{const nt=s[tt][e];return nt<d||nt===d&&s[tt+1][e]===d}:tt=>s[tt][e]<d),_rlookupByKey=(s,e,d)=>_lookup(s,d,b=>s[b][e]>=d);function _filterBetween(s,e,d){let b=0,tt=s.length;for(;b<tt&&s[b]<e;)b++;for(;tt>b&&s[tt-1]>d;)tt--;return b>0||tt<s.length?s.slice(b,tt):s}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(s,e){if(s._chartjs){s._chartjs.listeners.push(e);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),arrayEvents.forEach(d=>{const b="_onData"+_capitalize(d),tt=s[d];Object.defineProperty(s,d,{configurable:!0,enumerable:!1,value(...nt){const ot=tt.apply(this,nt);return s._chartjs.listeners.forEach(ht=>{typeof ht[b]=="function"&&ht[b](...nt)}),ot}})})}function unlistenArrayEvents(s,e){const d=s._chartjs;if(!d)return;const b=d.listeners,tt=b.indexOf(e);tt!==-1&&b.splice(tt,1),!(b.length>0)&&(arrayEvents.forEach(nt=>{delete s[nt]}),delete s._chartjs)}function _arrayUnique(s){const e=new Set(s);return e.size===s.length?s:Array.from(e)}const requestAnimFrame=function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame}();function throttled(s,e){let d=[],b=!1;return function(...tt){d=tt,b||(b=!0,requestAnimFrame.call(window,()=>{b=!1,s.apply(e,d)}))}}function debounce(s,e){let d;return function(...b){return e?(clearTimeout(d),d=setTimeout(s,e,b)):s.apply(this,b),e}}const _toLeftRightCenter=s=>s==="start"?"left":s==="end"?"right":"center",_alignStartEnd=(s,e,d)=>s==="start"?e:s==="end"?d:(e+d)/2,_textX=(s,e,d,b)=>s===(b?"left":"right")?d:s==="center"?(e+d)/2:e,atEdge=s=>s===0||s===1,elasticIn=(s,e,d)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-e)*TAU/d)),elasticOut=(s,e,d)=>Math.pow(2,-10*s)*Math.sin((s-e)*TAU/d)+1,effects={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*HALF_PI)+1,easeOutSine:s=>Math.sin(s*HALF_PI),easeInOutSine:s=>-.5*(Math.cos(PI*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>atEdge(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>atEdge(s)?s:elasticIn(s,.075,.3),easeOutElastic:s=>atEdge(s)?s:elasticOut(s,.075,.3),easeInOutElastic(s){return atEdge(s)?s:s<.5?.5*elasticIn(s*2,.1125,.45):.5+.5*elasticOut(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let e=1.70158;return(s/=.5)<1?.5*(s*s*(((e*=1.525)+1)*s-e)):.5*((s-=2)*s*(((e*=1.525)+1)*s+e)+2)},easeInBounce:s=>1-effects.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?effects.easeInBounce(s*2)*.5:effects.easeOutBounce(s*2-1)*.5+.5};function isPatternOrGradient(s){if(s&&typeof s=="object"){const e=s.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function color$1(s){return isPatternOrGradient(s)?s:new Color$1(s)}function getHoverColor(s){return isPatternOrGradient(s)?s:new Color$1(s).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];function applyAnimationsDefaults(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),s.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function applyLayoutsDefaults(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const intlCache=new Map;function getNumberFormat(s,e){e=e||{};const d=s+JSON.stringify(e);let b=intlCache.get(d);return b||(b=new Intl.NumberFormat(s,e),intlCache.set(d,b)),b}function formatNumber(s,e,d){return getNumberFormat(e,d).format(s)}const formatters={values(s){return isArray(s)?s:""+s},numeric(s,e,d){if(s===0)return"0";const b=this.chart.options.locale;let tt,nt=s;if(d.length>1){const gt=Math.max(Math.abs(d[0].value),Math.abs(d[d.length-1].value));(gt<1e-4||gt>1e15)&&(tt="scientific"),nt=calculateDelta(s,d)}const ot=log10(Math.abs(nt)),ht=isNaN(ot)?1:Math.max(Math.min(-1*Math.floor(ot),20),0),mt={notation:tt,minimumFractionDigits:ht,maximumFractionDigits:ht};return Object.assign(mt,this.options.ticks.format),formatNumber(s,b,mt)},logarithmic(s,e,d){if(s===0)return"0";const b=d[e].significand||s/Math.pow(10,Math.floor(log10(s)));return[1,2,3,5,10,15].includes(b)||e>.8*d.length?formatters.numeric.call(this,s,e,d):""}};function calculateDelta(s,e){let d=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(d)>=1&&s!==Math.floor(s)&&(d=s-Math.floor(s)),d}var Ticks={formatters};function applyScaleDefaults(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,d)=>d.lineWidth,tickColor:(e,d)=>d.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(s,e){if(!e)return s;const d=e.split(".");for(let b=0,tt=d.length;b<tt;++b){const nt=d[b];s=s[nt]||(s[nt]=Object.create(null))}return s}function set$2(s,e,d){return typeof e=="string"?merge(getScope$1(s,e),d):merge(getScope$1(s,""),e)}class Defaults{constructor(e,d){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=b=>b.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(b,tt)=>getHoverColor(tt.backgroundColor),this.hoverBorderColor=(b,tt)=>getHoverColor(tt.borderColor),this.hoverColor=(b,tt)=>getHoverColor(tt.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(d)}set(e,d){return set$2(this,e,d)}get(e){return getScope$1(this,e)}describe(e,d){return set$2(descriptors,e,d)}override(e,d){return set$2(overrides,e,d)}route(e,d,b,tt){const nt=getScope$1(this,e),ot=getScope$1(this,b),ht="_"+d;Object.defineProperties(nt,{[ht]:{value:nt[d],writable:!0},[d]:{enumerable:!0,get(){const mt=this[ht],gt=ot[tt];return isObject(mt)?Object.assign({},gt,mt):valueOrDefault(mt,gt)},set(mt){this[ht]=mt}}})}apply(e){e.forEach(d=>d(this))}}var defaults=new Defaults({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[applyAnimationsDefaults,applyLayoutsDefaults,applyScaleDefaults]);function toFontString(s){return!s||isNullOrUndef(s.size)||isNullOrUndef(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function _measureText(s,e,d,b,tt){let nt=e[tt];return nt||(nt=e[tt]=s.measureText(tt).width,d.push(tt)),nt>b&&(b=nt),b}function _longestText(s,e,d,b){b=b||{};let tt=b.data=b.data||{},nt=b.garbageCollect=b.garbageCollect||[];b.font!==e&&(tt=b.data={},nt=b.garbageCollect=[],b.font=e),s.save(),s.font=e;let ot=0;const ht=d.length;let mt,gt,yt,ft,st;for(mt=0;mt<ht;mt++)if(ft=d[mt],ft!=null&&!isArray(ft))ot=_measureText(s,tt,nt,ot,ft);else if(isArray(ft))for(gt=0,yt=ft.length;gt<yt;gt++)st=ft[gt],st!=null&&!isArray(st)&&(ot=_measureText(s,tt,nt,ot,st));s.restore();const bt=nt.length/2;if(bt>d.length){for(mt=0;mt<bt;mt++)delete tt[nt[mt]];nt.splice(0,bt)}return ot}function _alignPixel(s,e,d){const b=s.currentDevicePixelRatio,tt=d!==0?Math.max(d/2,.5):0;return Math.round((e-tt)*b)/b+tt}function clearCanvas(s,e){!e&&!s||(e=e||s.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,s.width,s.height),e.restore())}function drawPoint(s,e,d,b){drawPointLegend(s,e,d,b,null)}function drawPointLegend(s,e,d,b,tt){let nt,ot,ht,mt,gt,yt,ft,st;const bt=e.pointStyle,vt=e.rotation,xt=e.radius;let wt=(vt||0)*RAD_PER_DEG;if(bt&&typeof bt=="object"&&(nt=bt.toString(),nt==="[object HTMLImageElement]"||nt==="[object HTMLCanvasElement]")){s.save(),s.translate(d,b),s.rotate(wt),s.drawImage(bt,-bt.width/2,-bt.height/2,bt.width,bt.height),s.restore();return}if(!(isNaN(xt)||xt<=0)){switch(s.beginPath(),bt){default:tt?s.ellipse(d,b,tt/2,xt,0,0,TAU):s.arc(d,b,xt,0,TAU),s.closePath();break;case"triangle":yt=tt?tt/2:xt,s.moveTo(d+Math.sin(wt)*yt,b-Math.cos(wt)*xt),wt+=TWO_THIRDS_PI,s.lineTo(d+Math.sin(wt)*yt,b-Math.cos(wt)*xt),wt+=TWO_THIRDS_PI,s.lineTo(d+Math.sin(wt)*yt,b-Math.cos(wt)*xt),s.closePath();break;case"rectRounded":gt=xt*.516,mt=xt-gt,ot=Math.cos(wt+QUARTER_PI)*mt,ft=Math.cos(wt+QUARTER_PI)*(tt?tt/2-gt:mt),ht=Math.sin(wt+QUARTER_PI)*mt,st=Math.sin(wt+QUARTER_PI)*(tt?tt/2-gt:mt),s.arc(d-ft,b-ht,gt,wt-PI,wt-HALF_PI),s.arc(d+st,b-ot,gt,wt-HALF_PI,wt),s.arc(d+ft,b+ht,gt,wt,wt+HALF_PI),s.arc(d-st,b+ot,gt,wt+HALF_PI,wt+PI),s.closePath();break;case"rect":if(!vt){mt=Math.SQRT1_2*xt,yt=tt?tt/2:mt,s.rect(d-yt,b-mt,2*yt,2*mt);break}wt+=QUARTER_PI;case"rectRot":ft=Math.cos(wt)*(tt?tt/2:xt),ot=Math.cos(wt)*xt,ht=Math.sin(wt)*xt,st=Math.sin(wt)*(tt?tt/2:xt),s.moveTo(d-ft,b-ht),s.lineTo(d+st,b-ot),s.lineTo(d+ft,b+ht),s.lineTo(d-st,b+ot),s.closePath();break;case"crossRot":wt+=QUARTER_PI;case"cross":ft=Math.cos(wt)*(tt?tt/2:xt),ot=Math.cos(wt)*xt,ht=Math.sin(wt)*xt,st=Math.sin(wt)*(tt?tt/2:xt),s.moveTo(d-ft,b-ht),s.lineTo(d+ft,b+ht),s.moveTo(d+st,b-ot),s.lineTo(d-st,b+ot);break;case"star":ft=Math.cos(wt)*(tt?tt/2:xt),ot=Math.cos(wt)*xt,ht=Math.sin(wt)*xt,st=Math.sin(wt)*(tt?tt/2:xt),s.moveTo(d-ft,b-ht),s.lineTo(d+ft,b+ht),s.moveTo(d+st,b-ot),s.lineTo(d-st,b+ot),wt+=QUARTER_PI,ft=Math.cos(wt)*(tt?tt/2:xt),ot=Math.cos(wt)*xt,ht=Math.sin(wt)*xt,st=Math.sin(wt)*(tt?tt/2:xt),s.moveTo(d-ft,b-ht),s.lineTo(d+ft,b+ht),s.moveTo(d+st,b-ot),s.lineTo(d-st,b+ot);break;case"line":ot=tt?tt/2:Math.cos(wt)*xt,ht=Math.sin(wt)*xt,s.moveTo(d-ot,b-ht),s.lineTo(d+ot,b+ht);break;case"dash":s.moveTo(d,b),s.lineTo(d+Math.cos(wt)*(tt?tt/2:xt),b+Math.sin(wt)*xt);break;case!1:s.closePath();break}s.fill(),e.borderWidth>0&&s.stroke()}}function _isPointInArea(s,e,d){return d=d||.5,!e||s&&s.x>e.left-d&&s.x<e.right+d&&s.y>e.top-d&&s.y<e.bottom+d}function clipArea(s,e){s.save(),s.beginPath(),s.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),s.clip()}function unclipArea(s){s.restore()}function setRenderOpts(s,e){e.translation&&s.translate(e.translation[0],e.translation[1]),isNullOrUndef(e.rotation)||s.rotate(e.rotation),e.color&&(s.fillStyle=e.color),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline)}function decorateText(s,e,d,b,tt){if(tt.strikethrough||tt.underline){const nt=s.measureText(b),ot=e-nt.actualBoundingBoxLeft,ht=e+nt.actualBoundingBoxRight,mt=d-nt.actualBoundingBoxAscent,gt=d+nt.actualBoundingBoxDescent,yt=tt.strikethrough?(mt+gt)/2:gt;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=tt.decorationWidth||2,s.moveTo(ot,yt),s.lineTo(ht,yt),s.stroke()}}function drawBackdrop(s,e){const d=s.fillStyle;s.fillStyle=e.color,s.fillRect(e.left,e.top,e.width,e.height),s.fillStyle=d}function renderText(s,e,d,b,tt,nt={}){const ot=isArray(e)?e:[e],ht=nt.strokeWidth>0&&nt.strokeColor!=="";let mt,gt;for(s.save(),s.font=tt.string,setRenderOpts(s,nt),mt=0;mt<ot.length;++mt)gt=ot[mt],nt.backdrop&&drawBackdrop(s,nt.backdrop),ht&&(nt.strokeColor&&(s.strokeStyle=nt.strokeColor),isNullOrUndef(nt.strokeWidth)||(s.lineWidth=nt.strokeWidth),s.strokeText(gt,d,b,nt.maxWidth)),s.fillText(gt,d,b,nt.maxWidth),decorateText(s,d,b,gt,nt),b+=Number(tt.lineHeight);s.restore()}function addRoundedRectPath(s,e){const{x:d,y:b,w:tt,h:nt,radius:ot}=e;s.arc(d+ot.topLeft,b+ot.topLeft,ot.topLeft,1.5*PI,PI,!0),s.lineTo(d,b+nt-ot.bottomLeft),s.arc(d+ot.bottomLeft,b+nt-ot.bottomLeft,ot.bottomLeft,PI,HALF_PI,!0),s.lineTo(d+tt-ot.bottomRight,b+nt),s.arc(d+tt-ot.bottomRight,b+nt-ot.bottomRight,ot.bottomRight,HALF_PI,0,!0),s.lineTo(d+tt,b+ot.topRight),s.arc(d+tt-ot.topRight,b+ot.topRight,ot.topRight,0,-HALF_PI,!0),s.lineTo(d+ot.topLeft,b)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(s,e){const d=(""+s).match(LINE_HEIGHT);if(!d||d[1]==="normal")return e*1.2;switch(s=+d[2],d[3]){case"px":return s;case"%":s/=100;break}return e*s}const numberOrZero=s=>+s||0;function _readValueToProps(s,e){const d={},b=isObject(e),tt=b?Object.keys(e):e,nt=isObject(s)?b?ot=>valueOrDefault(s[ot],s[e[ot]]):ot=>s[ot]:()=>s;for(const ot of tt)d[ot]=numberOrZero(nt(ot));return d}function toTRBL(s){return _readValueToProps(s,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(s){return _readValueToProps(s,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(s){const e=toTRBL(s);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function toFont(s,e){s=s||{},e=e||defaults.font;let d=valueOrDefault(s.size,e.size);typeof d=="string"&&(d=parseInt(d,10));let b=valueOrDefault(s.style,e.style);b&&!(""+b).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+b+'"'),b=void 0);const tt={family:valueOrDefault(s.family,e.family),lineHeight:toLineHeight(valueOrDefault(s.lineHeight,e.lineHeight),d),size:d,style:b,weight:valueOrDefault(s.weight,e.weight),string:""};return tt.string=toFontString(tt),tt}function resolve(s,e,d,b){let tt,nt,ot;for(tt=0,nt=s.length;tt<nt;++tt)if(ot=s[tt],ot!==void 0&&ot!==void 0)return ot}function _addGrace(s,e,d){const{min:b,max:tt}=s,nt=toDimension(e,(tt-b)/2),ot=(ht,mt)=>d&&ht===0?0:ht+mt;return{min:ot(b,-Math.abs(nt)),max:ot(tt,nt)}}function createContext(s,e){return Object.assign(Object.create(s),e)}function _createResolver(s,e=[""],d,b,tt=()=>s[0]){const nt=d||s;typeof b>"u"&&(b=_resolve("_fallback",s));const ot={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:nt,_fallback:b,_getTarget:tt,override:ht=>_createResolver([ht,...s],e,nt,b)};return new Proxy(ot,{deleteProperty(ht,mt){return delete ht[mt],delete ht._keys,delete s[0][mt],!0},get(ht,mt){return _cached(ht,mt,()=>_resolveWithPrefixes(mt,e,s,ht))},getOwnPropertyDescriptor(ht,mt){return Reflect.getOwnPropertyDescriptor(ht._scopes[0],mt)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(ht,mt){return getKeysFromAllScopes(ht).includes(mt)},ownKeys(ht){return getKeysFromAllScopes(ht)},set(ht,mt,gt){const yt=ht._storage||(ht._storage=tt());return ht[mt]=yt[mt]=gt,delete ht._keys,!0}})}function _attachContext(s,e,d,b){const tt={_cacheable:!1,_proxy:s,_context:e,_subProxy:d,_stack:new Set,_descriptors:_descriptors(s,b),setContext:nt=>_attachContext(s,nt,d,b),override:nt=>_attachContext(s.override(nt),e,d,b)};return new Proxy(tt,{deleteProperty(nt,ot){return delete nt[ot],delete s[ot],!0},get(nt,ot,ht){return _cached(nt,ot,()=>_resolveWithContext(nt,ot,ht))},getOwnPropertyDescriptor(nt,ot){return nt._descriptors.allKeys?Reflect.has(s,ot)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,ot)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(nt,ot){return Reflect.has(s,ot)},ownKeys(){return Reflect.ownKeys(s)},set(nt,ot,ht){return s[ot]=ht,delete nt[ot],!0}})}function _descriptors(s,e={scriptable:!0,indexable:!0}){const{_scriptable:d=e.scriptable,_indexable:b=e.indexable,_allKeys:tt=e.allKeys}=s;return{allKeys:tt,scriptable:d,indexable:b,isScriptable:isFunction(d)?d:()=>d,isIndexable:isFunction(b)?b:()=>b}}const readKey=(s,e)=>s?s+_capitalize(e):e,needsSubResolver=(s,e)=>isObject(e)&&s!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function _cached(s,e,d){if(Object.prototype.hasOwnProperty.call(s,e)||e==="constructor")return s[e];const b=d();return s[e]=b,b}function _resolveWithContext(s,e,d){const{_proxy:b,_context:tt,_subProxy:nt,_descriptors:ot}=s;let ht=b[e];return isFunction(ht)&&ot.isScriptable(e)&&(ht=_resolveScriptable(e,ht,s,d)),isArray(ht)&&ht.length&&(ht=_resolveArray(e,ht,s,ot.isIndexable)),needsSubResolver(e,ht)&&(ht=_attachContext(ht,tt,nt&&nt[e],ot)),ht}function _resolveScriptable(s,e,d,b){const{_proxy:tt,_context:nt,_subProxy:ot,_stack:ht}=d;if(ht.has(s))throw new Error("Recursion detected: "+Array.from(ht).join("->")+"->"+s);ht.add(s);let mt=e(nt,ot||b);return ht.delete(s),needsSubResolver(s,mt)&&(mt=createSubResolver(tt._scopes,tt,s,mt)),mt}function _resolveArray(s,e,d,b){const{_proxy:tt,_context:nt,_subProxy:ot,_descriptors:ht}=d;if(typeof nt.index<"u"&&b(s))return e[nt.index%e.length];if(isObject(e[0])){const mt=e,gt=tt._scopes.filter(yt=>yt!==mt);e=[];for(const yt of mt){const ft=createSubResolver(gt,tt,s,yt);e.push(_attachContext(ft,nt,ot&&ot[s],ht))}}return e}function resolveFallback(s,e,d){return isFunction(s)?s(e,d):s}const getScope=(s,e)=>s===!0?e:typeof s=="string"?resolveObjectKey(e,s):void 0;function addScopes(s,e,d,b,tt){for(const nt of e){const ot=getScope(d,nt);if(ot){s.add(ot);const ht=resolveFallback(ot._fallback,d,tt);if(typeof ht<"u"&&ht!==d&&ht!==b)return ht}else if(ot===!1&&typeof b<"u"&&d!==b)return null}return!1}function createSubResolver(s,e,d,b){const tt=e._rootScopes,nt=resolveFallback(e._fallback,d,b),ot=[...s,...tt],ht=new Set;ht.add(b);let mt=addScopesFromKey(ht,ot,d,nt||d,b);return mt===null||typeof nt<"u"&&nt!==d&&(mt=addScopesFromKey(ht,ot,nt,mt,b),mt===null)?!1:_createResolver(Array.from(ht),[""],tt,nt,()=>subGetTarget(e,d,b))}function addScopesFromKey(s,e,d,b,tt){for(;d;)d=addScopes(s,e,d,b,tt);return d}function subGetTarget(s,e,d){const b=s._getTarget();e in b||(b[e]={});const tt=b[e];return isArray(tt)&&isObject(d)?d:tt||{}}function _resolveWithPrefixes(s,e,d,b){let tt;for(const nt of e)if(tt=_resolve(readKey(nt,s),d),typeof tt<"u")return needsSubResolver(s,tt)?createSubResolver(d,b,s,tt):tt}function _resolve(s,e){for(const d of e){if(!d)continue;const b=d[s];if(typeof b<"u")return b}}function getKeysFromAllScopes(s){let e=s._keys;return e||(e=s._keys=resolveKeysFromAllScopes(s._scopes)),e}function resolveKeysFromAllScopes(s){const e=new Set;for(const d of s)for(const b of Object.keys(d).filter(tt=>!tt.startsWith("_")))e.add(b);return Array.from(e)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(s){let e=s.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function parseMaxStyle(s,e,d){let b;return typeof s=="string"?(b=parseInt(s,10),s.indexOf("%")!==-1&&(b=b/100*e.parentNode[d])):b=s,b}const getComputedStyle$1=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function getStyle(s,e){return getComputedStyle$1(s).getPropertyValue(e)}const positions=["top","right","bottom","left"];function getPositionedStyle(s,e,d){const b={};d=d?"-"+d:"";for(let tt=0;tt<4;tt++){const nt=positions[tt];b[nt]=parseFloat(s[e+"-"+nt+d])||0}return b.width=b.left+b.right,b.height=b.top+b.bottom,b}const useOffsetPos=(s,e,d)=>(s>0||e>0)&&(!d||!d.shadowRoot);function getCanvasPosition(s,e){const d=s.touches,b=d&&d.length?d[0]:s,{offsetX:tt,offsetY:nt}=b;let ot=!1,ht,mt;if(useOffsetPos(tt,nt,s.target))ht=tt,mt=nt;else{const gt=e.getBoundingClientRect();ht=b.clientX-gt.left,mt=b.clientY-gt.top,ot=!0}return{x:ht,y:mt,box:ot}}function getRelativePosition(s,e){if("native"in s)return s;const{canvas:d,currentDevicePixelRatio:b}=e,tt=getComputedStyle$1(d),nt=tt.boxSizing==="border-box",ot=getPositionedStyle(tt,"padding"),ht=getPositionedStyle(tt,"border","width"),{x:mt,y:gt,box:yt}=getCanvasPosition(s,d),ft=ot.left+(yt&&ht.left),st=ot.top+(yt&&ht.top);let{width:bt,height:vt}=e;return nt&&(bt-=ot.width+ht.width,vt-=ot.height+ht.height),{x:Math.round((mt-ft)/bt*d.width/b),y:Math.round((gt-st)/vt*d.height/b)}}function getContainerSize(s,e,d){let b,tt;if(e===void 0||d===void 0){const nt=s&&_getParentNode(s);if(!nt)e=s.clientWidth,d=s.clientHeight;else{const ot=nt.getBoundingClientRect(),ht=getComputedStyle$1(nt),mt=getPositionedStyle(ht,"border","width"),gt=getPositionedStyle(ht,"padding");e=ot.width-gt.width-mt.width,d=ot.height-gt.height-mt.height,b=parseMaxStyle(ht.maxWidth,nt,"clientWidth"),tt=parseMaxStyle(ht.maxHeight,nt,"clientHeight")}}return{width:e,height:d,maxWidth:b||INFINITY,maxHeight:tt||INFINITY}}const round1=s=>Math.round(s*10)/10;function getMaximumSize(s,e,d,b){const tt=getComputedStyle$1(s),nt=getPositionedStyle(tt,"margin"),ot=parseMaxStyle(tt.maxWidth,s,"clientWidth")||INFINITY,ht=parseMaxStyle(tt.maxHeight,s,"clientHeight")||INFINITY,mt=getContainerSize(s,e,d);let{width:gt,height:yt}=mt;if(tt.boxSizing==="content-box"){const st=getPositionedStyle(tt,"border","width"),bt=getPositionedStyle(tt,"padding");gt-=bt.width+st.width,yt-=bt.height+st.height}return gt=Math.max(0,gt-nt.width),yt=Math.max(0,b?gt/b:yt-nt.height),gt=round1(Math.min(gt,ot,mt.maxWidth)),yt=round1(Math.min(yt,ht,mt.maxHeight)),gt&&!yt&&(yt=round1(gt/2)),(e!==void 0||d!==void 0)&&b&&mt.height&&yt>mt.height&&(yt=mt.height,gt=round1(Math.floor(yt*b))),{width:gt,height:yt}}function retinaScale(s,e,d){const b=e||1,tt=Math.floor(s.height*b),nt=Math.floor(s.width*b);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const ot=s.canvas;return ot.style&&(d||!ot.style.height&&!ot.style.width)&&(ot.style.height=`${s.height}px`,ot.style.width=`${s.width}px`),s.currentDevicePixelRatio!==b||ot.height!==tt||ot.width!==nt?(s.currentDevicePixelRatio=b,ot.height=tt,ot.width=nt,s.ctx.setTransform(b,0,0,b,0,0),!0):!1}const supportsEventListenerOptions=function(){let s=!1;try{const e={get passive(){return s=!0,!1}};_isDomSupported()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return s}();function readUsedSize(s,e){const d=getStyle(s,e),b=d&&d.match(/^(\d+)(\.\d+)?px$/);return b?+b[1]:void 0}const getRightToLeftAdapter=function(s,e){return{x(d){return s+s+e-d},setWidth(d){e=d},textAlign(d){return d==="center"?d:d==="right"?"left":"right"},xPlus(d,b){return d-b},leftForLtr(d,b){return d-b}}},getLeftToRightAdapter=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,e){return s+e},leftForLtr(s,e){return s}}};function getRtlAdapter(s,e,d){return s?getRightToLeftAdapter(e,d):getLeftToRightAdapter()}function overrideTextDirection(s,e){let d,b;(e==="ltr"||e==="rtl")&&(d=s.canvas.style,b=[d.getPropertyValue("direction"),d.getPropertyPriority("direction")],d.setProperty("direction",e,"important"),s.prevTextDirection=b)}function restoreTextDirection(s,e){e!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",e[0],e[1]))}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,d,b,tt){const nt=d.listeners[tt],ot=d.duration;nt.forEach(ht=>ht({chart:e,initial:d.initial,numSteps:ot,currentStep:Math.min(b-d.start,ot)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let d=0;this._charts.forEach((b,tt)=>{if(!b.running||!b.items.length)return;const nt=b.items;let ot=nt.length-1,ht=!1,mt;for(;ot>=0;--ot)mt=nt[ot],mt._active?(mt._total>b.duration&&(b.duration=mt._total),mt.tick(e),ht=!0):(nt[ot]=nt[nt.length-1],nt.pop());ht&&(tt.draw(),this._notify(tt,b,e,"progress")),nt.length||(b.running=!1,this._notify(tt,b,e,"complete"),b.initial=!1),d+=nt.length}),this._lastDate=e,d===0&&(this._running=!1)}_getAnims(e){const d=this._charts;let b=d.get(e);return b||(b={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},d.set(e,b)),b}listen(e,d,b){this._getAnims(e).listeners[d].push(b)}add(e,d){!d||!d.length||this._getAnims(e).items.push(...d)}has(e){return this._getAnims(e).items.length>0}start(e){const d=this._charts.get(e);d&&(d.running=!0,d.start=Date.now(),d.duration=d.items.reduce((b,tt)=>Math.max(b,tt._duration),0),this._refresh())}running(e){if(!this._running)return!1;const d=this._charts.get(e);return!(!d||!d.running||!d.items.length)}stop(e){const d=this._charts.get(e);if(!d||!d.items.length)return;const b=d.items;let tt=b.length-1;for(;tt>=0;--tt)b[tt].cancel();d.items=[],this._notify(e,d,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(s,e,d){return d>.5?e:s},color(s,e,d){const b=color$1(s||transparent),tt=b.valid&&color$1(e||transparent);return tt&&tt.valid?tt.mix(b,d).hexString():e},number(s,e,d){return s+(e-s)*d}};class Animation{constructor(e,d,b,tt){const nt=d[b];tt=resolve([e.to,tt,nt,e.from]);const ot=resolve([e.from,nt,tt]);this._active=!0,this._fn=e.fn||interpolators[e.type||typeof ot],this._easing=effects[e.easing]||effects.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=d,this._prop=b,this._from=ot,this._to=tt,this._promises=void 0}active(){return this._active}update(e,d,b){if(this._active){this._notify(!1);const tt=this._target[this._prop],nt=b-this._start,ot=this._duration-nt;this._start=b,this._duration=Math.floor(Math.max(ot,e.duration)),this._total+=nt,this._loop=!!e.loop,this._to=resolve([e.to,d,tt,e.from]),this._from=resolve([e.from,tt,d])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const d=e-this._start,b=this._duration,tt=this._prop,nt=this._from,ot=this._loop,ht=this._to;let mt;if(this._active=nt!==ht&&(ot||d<b),!this._active){this._target[tt]=ht,this._notify(!0);return}if(d<0){this._target[tt]=nt;return}mt=d/b%2,mt=ot&&mt>1?2-mt:mt,mt=this._easing(Math.min(1,Math.max(0,mt))),this._target[tt]=this._fn(nt,ht,mt)}wait(){const e=this._promises||(this._promises=[]);return new Promise((d,b)=>{e.push({res:d,rej:b})})}_notify(e){const d=e?"res":"rej",b=this._promises||[];for(let tt=0;tt<b.length;tt++)b[tt][d]()}}class Animations{constructor(e,d){this._chart=e,this._properties=new Map,this.configure(d)}configure(e){if(!isObject(e))return;const d=Object.keys(defaults.animation),b=this._properties;Object.getOwnPropertyNames(e).forEach(tt=>{const nt=e[tt];if(!isObject(nt))return;const ot={};for(const ht of d)ot[ht]=nt[ht];(isArray(nt.properties)&&nt.properties||[tt]).forEach(ht=>{(ht===tt||!b.has(ht))&&b.set(ht,ot)})})}_animateOptions(e,d){const b=d.options,tt=resolveTargetOptions(e,b);if(!tt)return[];const nt=this._createAnimations(tt,b);return b.$shared&&awaitAll(e.options.$animations,b).then(()=>{e.options=b},()=>{}),nt}_createAnimations(e,d){const b=this._properties,tt=[],nt=e.$animations||(e.$animations={}),ot=Object.keys(d),ht=Date.now();let mt;for(mt=ot.length-1;mt>=0;--mt){const gt=ot[mt];if(gt.charAt(0)==="$")continue;if(gt==="options"){tt.push(...this._animateOptions(e,d));continue}const yt=d[gt];let ft=nt[gt];const st=b.get(gt);if(ft)if(st&&ft.active()){ft.update(st,yt,ht);continue}else ft.cancel();if(!st||!st.duration){e[gt]=yt;continue}nt[gt]=ft=new Animation(st,e,gt,yt),tt.push(ft)}return tt}update(e,d){if(this._properties.size===0){Object.assign(e,d);return}const b=this._createAnimations(e,d);if(b.length)return animator.add(this._chart,b),!0}}function awaitAll(s,e){const d=[],b=Object.keys(e);for(let tt=0;tt<b.length;tt++){const nt=s[b[tt]];nt&&nt.active()&&d.push(nt.wait())}return Promise.all(d)}function resolveTargetOptions(s,e){if(!e)return;let d=s.options;if(!d){s.options=e;return}return d.$shared&&(s.options=d=Object.assign({},d,{$shared:!1,$animations:{}})),d}function scaleClip(s,e){const d=s&&s.options||{},b=d.reverse,tt=d.min===void 0?e:0,nt=d.max===void 0?e:0;return{start:b?nt:tt,end:b?tt:nt}}function defaultClip(s,e,d){if(d===!1)return!1;const b=scaleClip(s,d),tt=scaleClip(e,d);return{top:tt.end,right:b.end,bottom:tt.start,left:b.start}}function toClip(s){let e,d,b,tt;return isObject(s)?(e=s.top,d=s.right,b=s.bottom,tt=s.left):e=d=b=tt=s,{top:e,right:d,bottom:b,left:tt,disabled:s===!1}}function getSortedDatasetIndices(s,e){const d=[],b=s._getSortedDatasetMetas(e);let tt,nt;for(tt=0,nt=b.length;tt<nt;++tt)d.push(b[tt].index);return d}function applyStack(s,e,d,b={}){const tt=s.keys,nt=b.mode==="single";let ot,ht,mt,gt;if(e!==null){for(ot=0,ht=tt.length;ot<ht;++ot){if(mt=+tt[ot],mt===d){if(b.all)continue;break}gt=s.values[mt],isNumberFinite(gt)&&(nt||e===0||sign(e)===sign(gt))&&(e+=gt)}return e}}function convertObjectDataToArray(s,e){const{iScale:d,vScale:b}=e,tt=d.axis==="x"?"x":"y",nt=b.axis==="x"?"x":"y",ot=Object.keys(s),ht=new Array(ot.length);let mt,gt,yt;for(mt=0,gt=ot.length;mt<gt;++mt)yt=ot[mt],ht[mt]={[tt]:yt,[nt]:s[yt]};return ht}function isStacked(s,e){const d=s&&s.options.stacked;return d||d===void 0&&e.stack!==void 0}function getStackKey(s,e,d){return`${s.id}.${e.id}.${d.stack||d.type}`}function getUserBounds(s){const{min:e,max:d,minDefined:b,maxDefined:tt}=s.getUserBounds();return{min:b?e:Number.NEGATIVE_INFINITY,max:tt?d:Number.POSITIVE_INFINITY}}function getOrCreateStack(s,e,d){const b=s[e]||(s[e]={});return b[d]||(b[d]={})}function getLastIndexInStack(s,e,d,b){for(const tt of e.getMatchingVisibleMetas(b).reverse()){const nt=s[tt.index];if(d&&nt>0||!d&&nt<0)return tt.index}return null}function updateStacks(s,e){const{chart:d,_cachedMeta:b}=s,tt=d._stacks||(d._stacks={}),{iScale:nt,vScale:ot,index:ht}=b,mt=nt.axis,gt=ot.axis,yt=getStackKey(nt,ot,b),ft=e.length;let st;for(let bt=0;bt<ft;++bt){const vt=e[bt],{[mt]:xt,[gt]:wt}=vt,St=vt._stacks||(vt._stacks={});st=St[gt]=getOrCreateStack(tt,yt,xt),st[ht]=wt,st._top=getLastIndexInStack(st,ot,!0,b.type),st._bottom=getLastIndexInStack(st,ot,!1,b.type);const _t=st._visualValues||(st._visualValues={});_t[ht]=wt}}function getFirstScaleId(s,e){const d=s.scales;return Object.keys(d).filter(b=>d[b].axis===e).shift()}function createDatasetContext(s,e){return createContext(s,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function createDataContext(s,e,d){return createContext(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:d,index:e,mode:"default",type:"data"})}function clearStacks(s,e){const d=s.controller.index,b=s.vScale&&s.vScale.axis;if(b){e=e||s._parsed;for(const tt of e){const nt=tt._stacks;if(!nt||nt[b]===void 0||nt[b][d]===void 0)return;delete nt[b][d],nt[b]._visualValues!==void 0&&nt[b]._visualValues[d]!==void 0&&delete nt[b]._visualValues[d]}}}const isDirectUpdateMode=s=>s==="reset"||s==="none",cloneIfNotShared=(s,e)=>e?s:Object.assign({},s),createStack=(s,e,d)=>s&&!e.hidden&&e._stacked&&{keys:getSortedDatasetIndices(d,!0),values:null};class DatasetController{constructor(e,d){this.chart=e,this._ctx=e.ctx,this.index=d,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=isStacked(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&clearStacks(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,d=this._cachedMeta,b=this.getDataset(),tt=(ft,st,bt,vt)=>ft==="x"?st:ft==="r"?vt:bt,nt=d.xAxisID=valueOrDefault(b.xAxisID,getFirstScaleId(e,"x")),ot=d.yAxisID=valueOrDefault(b.yAxisID,getFirstScaleId(e,"y")),ht=d.rAxisID=valueOrDefault(b.rAxisID,getFirstScaleId(e,"r")),mt=d.indexAxis,gt=d.iAxisID=tt(mt,nt,ot,ht),yt=d.vAxisID=tt(mt,ot,nt,ht);d.xScale=this.getScaleForId(nt),d.yScale=this.getScaleForId(ot),d.rScale=this.getScaleForId(ht),d.iScale=this.getScaleForId(gt),d.vScale=this.getScaleForId(yt)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const d=this._cachedMeta;return e===d.iScale?d.vScale:d.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),e._stacked&&clearStacks(e)}_dataCheck(){const e=this.getDataset(),d=e.data||(e.data=[]),b=this._data;if(isObject(d)){const tt=this._cachedMeta;this._data=convertObjectDataToArray(d,tt)}else if(b!==d){if(b){unlistenArrayEvents(b,this);const tt=this._cachedMeta;clearStacks(tt),tt._parsed=[]}d&&Object.isExtensible(d)&&listenArrayEvents(d,this),this._syncList=[],this._data=d}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const d=this._cachedMeta,b=this.getDataset();let tt=!1;this._dataCheck();const nt=d._stacked;d._stacked=isStacked(d.vScale,d),d.stack!==b.stack&&(tt=!0,clearStacks(d),d.stack=b.stack),this._resyncElements(e),(tt||nt!==d._stacked)&&updateStacks(this,d._parsed)}configure(){const e=this.chart.config,d=e.datasetScopeKeys(this._type),b=e.getOptionScopes(this.getDataset(),d,!0);this.options=e.createResolver(b,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,d){const{_cachedMeta:b,_data:tt}=this,{iScale:nt,_stacked:ot}=b,ht=nt.axis;let mt=e===0&&d===tt.length?!0:b._sorted,gt=e>0&&b._parsed[e-1],yt,ft,st;if(this._parsing===!1)b._parsed=tt,b._sorted=!0,st=tt;else{isArray(tt[e])?st=this.parseArrayData(b,tt,e,d):isObject(tt[e])?st=this.parseObjectData(b,tt,e,d):st=this.parsePrimitiveData(b,tt,e,d);const bt=()=>ft[ht]===null||gt&&ft[ht]<gt[ht];for(yt=0;yt<d;++yt)b._parsed[yt+e]=ft=st[yt],mt&&(bt()&&(mt=!1),gt=ft);b._sorted=mt}ot&&updateStacks(this,st)}parsePrimitiveData(e,d,b,tt){const{iScale:nt,vScale:ot}=e,ht=nt.axis,mt=ot.axis,gt=nt.getLabels(),yt=nt===ot,ft=new Array(tt);let st,bt,vt;for(st=0,bt=tt;st<bt;++st)vt=st+b,ft[st]={[ht]:yt||nt.parse(gt[vt],vt),[mt]:ot.parse(d[vt],vt)};return ft}parseArrayData(e,d,b,tt){const{xScale:nt,yScale:ot}=e,ht=new Array(tt);let mt,gt,yt,ft;for(mt=0,gt=tt;mt<gt;++mt)yt=mt+b,ft=d[yt],ht[mt]={x:nt.parse(ft[0],yt),y:ot.parse(ft[1],yt)};return ht}parseObjectData(e,d,b,tt){const{xScale:nt,yScale:ot}=e,{xAxisKey:ht="x",yAxisKey:mt="y"}=this._parsing,gt=new Array(tt);let yt,ft,st,bt;for(yt=0,ft=tt;yt<ft;++yt)st=yt+b,bt=d[st],gt[yt]={x:nt.parse(resolveObjectKey(bt,ht),st),y:ot.parse(resolveObjectKey(bt,mt),st)};return gt}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,d,b){const tt=this.chart,nt=this._cachedMeta,ot=d[e.axis],ht={keys:getSortedDatasetIndices(tt,!0),values:d._stacks[e.axis]._visualValues};return applyStack(ht,ot,nt.index,{mode:b})}updateRangeFromParsed(e,d,b,tt){const nt=b[d.axis];let ot=nt===null?NaN:nt;const ht=tt&&b._stacks[d.axis];tt&&ht&&(tt.values=ht,ot=applyStack(tt,nt,this._cachedMeta.index)),e.min=Math.min(e.min,ot),e.max=Math.max(e.max,ot)}getMinMax(e,d){const b=this._cachedMeta,tt=b._parsed,nt=b._sorted&&e===b.iScale,ot=tt.length,ht=this._getOtherScale(e),mt=createStack(d,b,this.chart),gt={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:yt,max:ft}=getUserBounds(ht);let st,bt;function vt(){bt=tt[st];const xt=bt[ht.axis];return!isNumberFinite(bt[e.axis])||yt>xt||ft<xt}for(st=0;st<ot&&!(!vt()&&(this.updateRangeFromParsed(gt,e,bt,mt),nt));++st);if(nt){for(st=ot-1;st>=0;--st)if(!vt()){this.updateRangeFromParsed(gt,e,bt,mt);break}}return gt}getAllParsedValues(e){const d=this._cachedMeta._parsed,b=[];let tt,nt,ot;for(tt=0,nt=d.length;tt<nt;++tt)ot=d[tt][e.axis],isNumberFinite(ot)&&b.push(ot);return b}getMaxOverflow(){return!1}getLabelAndValue(e){const d=this._cachedMeta,b=d.iScale,tt=d.vScale,nt=this.getParsed(e);return{label:b?""+b.getLabelForValue(nt[b.axis]):"",value:tt?""+tt.getLabelForValue(nt[tt.axis]):""}}_update(e){const d=this._cachedMeta;this.update(e||"default"),d._clip=toClip(valueOrDefault(this.options.clip,defaultClip(d.xScale,d.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,d=this.chart,b=this._cachedMeta,tt=b.data||[],nt=d.chartArea,ot=[],ht=this._drawStart||0,mt=this._drawCount||tt.length-ht,gt=this.options.drawActiveElementsOnTop;let yt;for(b.dataset&&b.dataset.draw(e,nt,ht,mt),yt=ht;yt<ht+mt;++yt){const ft=tt[yt];ft.hidden||(ft.active&&gt?ot.push(ft):ft.draw(e,nt))}for(yt=0;yt<ot.length;++yt)ot[yt].draw(e,nt)}getStyle(e,d){const b=d?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(b):this.resolveDataElementOptions(e||0,b)}getContext(e,d,b){const tt=this.getDataset();let nt;if(e>=0&&e<this._cachedMeta.data.length){const ot=this._cachedMeta.data[e];nt=ot.$context||(ot.$context=createDataContext(this.getContext(),e,ot)),nt.parsed=this.getParsed(e),nt.raw=tt.data[e],nt.index=nt.dataIndex=e}else nt=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),nt.dataset=tt,nt.index=nt.datasetIndex=this.index;return nt.active=!!d,nt.mode=b,nt}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,d){return this._resolveElementOptions(this.dataElementType.id,d,e)}_resolveElementOptions(e,d="default",b){const tt=d==="active",nt=this._cachedDataOpts,ot=e+"-"+d,ht=nt[ot],mt=this.enableOptionSharing&&defined(b);if(ht)return cloneIfNotShared(ht,mt);const gt=this.chart.config,yt=gt.datasetElementScopeKeys(this._type,e),ft=tt?[`${e}Hover`,"hover",e,""]:[e,""],st=gt.getOptionScopes(this.getDataset(),yt),bt=Object.keys(defaults.elements[e]),vt=()=>this.getContext(b,tt,d),xt=gt.resolveNamedOptions(st,bt,vt,ft);return xt.$shared&&(xt.$shared=mt,nt[ot]=Object.freeze(cloneIfNotShared(xt,mt))),xt}_resolveAnimations(e,d,b){const tt=this.chart,nt=this._cachedDataOpts,ot=`animation-${d}`,ht=nt[ot];if(ht)return ht;let mt;if(tt.options.animation!==!1){const yt=this.chart.config,ft=yt.datasetAnimationScopeKeys(this._type,d),st=yt.getOptionScopes(this.getDataset(),ft);mt=yt.createResolver(st,this.getContext(e,b,d))}const gt=new Animations(tt,mt&&mt.animations);return mt&&mt._cacheable&&(nt[ot]=Object.freeze(gt)),gt}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,d){return!d||isDirectUpdateMode(e)||this.chart._animationsDisabled}_getSharedOptions(e,d){const b=this.resolveDataElementOptions(e,d),tt=this._sharedOptions,nt=this.getSharedOptions(b),ot=this.includeOptions(d,nt)||nt!==tt;return this.updateSharedOptions(nt,d,b),{sharedOptions:nt,includeOptions:ot}}updateElement(e,d,b,tt){isDirectUpdateMode(tt)?Object.assign(e,b):this._resolveAnimations(d,tt).update(e,b)}updateSharedOptions(e,d,b){e&&!isDirectUpdateMode(d)&&this._resolveAnimations(void 0,d).update(e,b)}_setStyle(e,d,b,tt){e.active=tt;const nt=this.getStyle(d,tt);this._resolveAnimations(d,b,tt).update(e,{options:!tt&&this.getSharedOptions(nt)||nt})}removeHoverStyle(e,d,b){this._setStyle(e,b,"active",!1)}setHoverStyle(e,d,b){this._setStyle(e,b,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const d=this._data,b=this._cachedMeta.data;for(const[ht,mt,gt]of this._syncList)this[ht](mt,gt);this._syncList=[];const tt=b.length,nt=d.length,ot=Math.min(nt,tt);ot&&this.parse(0,ot),nt>tt?this._insertElements(tt,nt-tt,e):nt<tt&&this._removeElements(nt,tt-nt)}_insertElements(e,d,b=!0){const tt=this._cachedMeta,nt=tt.data,ot=e+d;let ht;const mt=gt=>{for(gt.length+=d,ht=gt.length-1;ht>=ot;ht--)gt[ht]=gt[ht-d]};for(mt(nt),ht=e;ht<ot;++ht)nt[ht]=new this.dataElementType;this._parsing&&mt(tt._parsed),this.parse(e,d),b&&this.updateElements(nt,e,d,"reset")}updateElements(e,d,b,tt){}_removeElements(e,d){const b=this._cachedMeta;if(this._parsing){const tt=b._parsed.splice(e,d);b._stacked&&clearStacks(b,tt)}b.data.splice(e,d)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[d,b,tt]=e;this[d](b,tt)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,d){d&&this._sync(["_removeElements",e,d]);const b=arguments.length-2;b&&this._sync(["_insertElements",e,b])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Rn(DatasetController,"defaults",{}),Rn(DatasetController,"datasetElementType",null),Rn(DatasetController,"dataElementType",null);function getAllScaleValues(s,e){if(!s._cache.$bar){const d=s.getMatchingVisibleMetas(e);let b=[];for(let tt=0,nt=d.length;tt<nt;tt++)b=b.concat(d[tt].controller.getAllParsedValues(s));s._cache.$bar=_arrayUnique(b.sort((tt,nt)=>tt-nt))}return s._cache.$bar}function computeMinSampleSize(s){const e=s.iScale,d=getAllScaleValues(e,s.type);let b=e._length,tt,nt,ot,ht;const mt=()=>{ot===32767||ot===-32768||(defined(ht)&&(b=Math.min(b,Math.abs(ot-ht)||b)),ht=ot)};for(tt=0,nt=d.length;tt<nt;++tt)ot=e.getPixelForValue(d[tt]),mt();for(ht=void 0,tt=0,nt=e.ticks.length;tt<nt;++tt)ot=e.getPixelForTick(tt),mt();return b}function computeFitCategoryTraits(s,e,d,b){const tt=d.barThickness;let nt,ot;return isNullOrUndef(tt)?(nt=e.min*d.categoryPercentage,ot=d.barPercentage):(nt=tt*b,ot=1),{chunk:nt/b,ratio:ot,start:e.pixels[s]-nt/2}}function computeFlexCategoryTraits(s,e,d,b){const tt=e.pixels,nt=tt[s];let ot=s>0?tt[s-1]:null,ht=s<tt.length-1?tt[s+1]:null;const mt=d.categoryPercentage;ot===null&&(ot=nt-(ht===null?e.end-e.start:ht-nt)),ht===null&&(ht=nt+nt-ot);const gt=nt-(nt-Math.min(ot,ht))/2*mt;return{chunk:Math.abs(ht-ot)/2*mt/b,ratio:d.barPercentage,start:gt}}function parseFloatBar(s,e,d,b){const tt=d.parse(s[0],b),nt=d.parse(s[1],b),ot=Math.min(tt,nt),ht=Math.max(tt,nt);let mt=ot,gt=ht;Math.abs(ot)>Math.abs(ht)&&(mt=ht,gt=ot),e[d.axis]=gt,e._custom={barStart:mt,barEnd:gt,start:tt,end:nt,min:ot,max:ht}}function parseValue(s,e,d,b){return isArray(s)?parseFloatBar(s,e,d,b):e[d.axis]=d.parse(s,b),e}function parseArrayOrPrimitive(s,e,d,b){const tt=s.iScale,nt=s.vScale,ot=tt.getLabels(),ht=tt===nt,mt=[];let gt,yt,ft,st;for(gt=d,yt=d+b;gt<yt;++gt)st=e[gt],ft={},ft[tt.axis]=ht||tt.parse(ot[gt],gt),mt.push(parseValue(st,ft,nt,gt));return mt}function isFloatBar(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function barSign(s,e,d){return s!==0?sign(s):(e.isHorizontal()?1:-1)*(e.min>=d?1:-1)}function borderProps(s){let e,d,b,tt,nt;return s.horizontal?(e=s.base>s.x,d="left",b="right"):(e=s.base<s.y,d="bottom",b="top"),e?(tt="end",nt="start"):(tt="start",nt="end"),{start:d,end:b,reverse:e,top:tt,bottom:nt}}function setBorderSkipped(s,e,d,b){let tt=e.borderSkipped;const nt={};if(!tt){s.borderSkipped=nt;return}if(tt===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:ot,end:ht,reverse:mt,top:gt,bottom:yt}=borderProps(s);tt==="middle"&&d&&(s.enableBorderRadius=!0,(d._top||0)===b?tt=gt:(d._bottom||0)===b?tt=yt:(nt[parseEdge(yt,ot,ht,mt)]=!0,tt=gt)),nt[parseEdge(tt,ot,ht,mt)]=!0,s.borderSkipped=nt}function parseEdge(s,e,d,b){return b?(s=swap(s,e,d),s=startEnd(s,d,e)):s=startEnd(s,e,d),s}function swap(s,e,d){return s===e?d:s===d?e:s}function startEnd(s,e,d){return s==="start"?e:s==="end"?d:s}function setInflateAmount(s,{inflateAmount:e},d){s.inflateAmount=e==="auto"?d===1?.33:0:e}class BarController extends DatasetController{parsePrimitiveData(e,d,b,tt){return parseArrayOrPrimitive(e,d,b,tt)}parseArrayData(e,d,b,tt){return parseArrayOrPrimitive(e,d,b,tt)}parseObjectData(e,d,b,tt){const{iScale:nt,vScale:ot}=e,{xAxisKey:ht="x",yAxisKey:mt="y"}=this._parsing,gt=nt.axis==="x"?ht:mt,yt=ot.axis==="x"?ht:mt,ft=[];let st,bt,vt,xt;for(st=b,bt=b+tt;st<bt;++st)xt=d[st],vt={},vt[nt.axis]=nt.parse(resolveObjectKey(xt,gt),st),ft.push(parseValue(resolveObjectKey(xt,yt),vt,ot,st));return ft}updateRangeFromParsed(e,d,b,tt){super.updateRangeFromParsed(e,d,b,tt);const nt=b._custom;nt&&d===this._cachedMeta.vScale&&(e.min=Math.min(e.min,nt.min),e.max=Math.max(e.max,nt.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const d=this._cachedMeta,{iScale:b,vScale:tt}=d,nt=this.getParsed(e),ot=nt._custom,ht=isFloatBar(ot)?"["+ot.start+", "+ot.end+"]":""+tt.getLabelForValue(nt[tt.axis]);return{label:""+b.getLabelForValue(nt[b.axis]),value:ht}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const d=this._cachedMeta;this.updateElements(d.data,0,d.data.length,e)}updateElements(e,d,b,tt){const nt=tt==="reset",{index:ot,_cachedMeta:{vScale:ht}}=this,mt=ht.getBasePixel(),gt=ht.isHorizontal(),yt=this._getRuler(),{sharedOptions:ft,includeOptions:st}=this._getSharedOptions(d,tt);for(let bt=d;bt<d+b;bt++){const vt=this.getParsed(bt),xt=nt||isNullOrUndef(vt[ht.axis])?{base:mt,head:mt}:this._calculateBarValuePixels(bt),wt=this._calculateBarIndexPixels(bt,yt),St=(vt._stacks||{})[ht.axis],_t={horizontal:gt,base:xt.base,enableBorderRadius:!St||isFloatBar(vt._custom)||ot===St._top||ot===St._bottom,x:gt?xt.head:wt.center,y:gt?wt.center:xt.head,height:gt?wt.size:Math.abs(xt.size),width:gt?Math.abs(xt.size):wt.size};st&&(_t.options=ft||this.resolveDataElementOptions(bt,e[bt].active?"active":tt));const Tt=_t.options||e[bt].options;setBorderSkipped(_t,Tt,St,ot),setInflateAmount(_t,Tt,yt.ratio),this.updateElement(e[bt],bt,_t,tt)}}_getStacks(e,d){const{iScale:b}=this._cachedMeta,tt=b.getMatchingVisibleMetas(this._type).filter(mt=>mt.controller.options.grouped),nt=b.options.stacked,ot=[],ht=mt=>{const gt=mt.controller.getParsed(d),yt=gt&&gt[mt.vScale.axis];if(isNullOrUndef(yt)||isNaN(yt))return!0};for(const mt of tt)if(!(d!==void 0&&ht(mt))&&((nt===!1||ot.indexOf(mt.stack)===-1||nt===void 0&&mt.stack===void 0)&&ot.push(mt.stack),mt.index===e))break;return ot.length||ot.push(void 0),ot}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,d,b){const tt=this._getStacks(e,b),nt=d!==void 0?tt.indexOf(d):-1;return nt===-1?tt.length-1:nt}_getRuler(){const e=this.options,d=this._cachedMeta,b=d.iScale,tt=[];let nt,ot;for(nt=0,ot=d.data.length;nt<ot;++nt)tt.push(b.getPixelForValue(this.getParsed(nt)[b.axis],nt));const ht=e.barThickness;return{min:ht||computeMinSampleSize(d),pixels:tt,start:b._startPixel,end:b._endPixel,stackCount:this._getStackCount(),scale:b,grouped:e.grouped,ratio:ht?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:d,_stacked:b,index:tt},options:{base:nt,minBarLength:ot}}=this,ht=nt||0,mt=this.getParsed(e),gt=mt._custom,yt=isFloatBar(gt);let ft=mt[d.axis],st=0,bt=b?this.applyStack(d,mt,b):ft,vt,xt;bt!==ft&&(st=bt-ft,bt=ft),yt&&(ft=gt.barStart,bt=gt.barEnd-gt.barStart,ft!==0&&sign(ft)!==sign(gt.barEnd)&&(st=0),st+=ft);const wt=!isNullOrUndef(nt)&&!yt?nt:st;let St=d.getPixelForValue(wt);if(this.chart.getDataVisibility(e)?vt=d.getPixelForValue(st+bt):vt=St,xt=vt-St,Math.abs(xt)<ot){xt=barSign(xt,d,ht)*ot,ft===ht&&(St-=xt/2);const _t=d.getPixelForDecimal(0),Tt=d.getPixelForDecimal(1),Et=Math.min(_t,Tt),kt=Math.max(_t,Tt);St=Math.max(Math.min(St,kt),Et),vt=St+xt,b&&!yt&&(mt._stacks[d.axis]._visualValues[tt]=d.getValueForPixel(vt)-d.getValueForPixel(St))}if(St===d.getPixelForValue(ht)){const _t=sign(xt)*d.getLineWidthForValue(ht)/2;St+=_t,xt-=_t}return{size:xt,base:St,head:vt,center:vt+xt/2}}_calculateBarIndexPixels(e,d){const b=d.scale,tt=this.options,nt=tt.skipNull,ot=valueOrDefault(tt.maxBarThickness,1/0);let ht,mt;if(d.grouped){const gt=nt?this._getStackCount(e):d.stackCount,yt=tt.barThickness==="flex"?computeFlexCategoryTraits(e,d,tt,gt):computeFitCategoryTraits(e,d,tt,gt),ft=this._getStackIndex(this.index,this._cachedMeta.stack,nt?e:void 0);ht=yt.start+yt.chunk*ft+yt.chunk/2,mt=Math.min(ot,yt.chunk*yt.ratio)}else ht=b.getPixelForValue(this.getParsed(e)[b.axis],e),mt=Math.min(ot,d.min*d.ratio);return{base:ht-mt/2,head:ht+mt/2,center:ht,size:mt}}draw(){const e=this._cachedMeta,d=e.vScale,b=e.data,tt=b.length;let nt=0;for(;nt<tt;++nt)this.getParsed(nt)[d.axis]!==null&&!b[nt].hidden&&b[nt].draw(this._ctx)}}Rn(BarController,"id","bar"),Rn(BarController,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Rn(BarController,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{constructor(e){Rn(this,"options");this.options=e||{}}static override(e){Object.assign(DateAdapterBase.prototype,e)}init(){}formats(){return abstract()}parse(){return abstract()}format(){return abstract()}add(){return abstract()}diff(){return abstract()}startOf(){return abstract()}endOf(){return abstract()}}var adapters={_date:DateAdapterBase};function binarySearch(s,e,d,b){const{controller:tt,data:nt,_sorted:ot}=s,ht=tt._cachedMeta.iScale;if(ht&&e===ht.axis&&e!=="r"&&ot&&nt.length){const mt=ht._reversePixels?_rlookupByKey:_lookupByKey;if(b){if(tt._sharedOptions){const gt=nt[0],yt=typeof gt.getRange=="function"&&gt.getRange(e);if(yt){const ft=mt(nt,e,d-yt),st=mt(nt,e,d+yt);return{lo:ft.lo,hi:st.hi}}}}else return mt(nt,e,d)}return{lo:0,hi:nt.length-1}}function evaluateInteractionItems(s,e,d,b,tt){const nt=s.getSortedVisibleDatasetMetas(),ot=d[e];for(let ht=0,mt=nt.length;ht<mt;++ht){const{index:gt,data:yt}=nt[ht],{lo:ft,hi:st}=binarySearch(nt[ht],e,ot,tt);for(let bt=ft;bt<=st;++bt){const vt=yt[bt];vt.skip||b(vt,gt,bt)}}}function getDistanceMetricForAxis(s){const e=s.indexOf("x")!==-1,d=s.indexOf("y")!==-1;return function(b,tt){const nt=e?Math.abs(b.x-tt.x):0,ot=d?Math.abs(b.y-tt.y):0;return Math.sqrt(Math.pow(nt,2)+Math.pow(ot,2))}}function getIntersectItems(s,e,d,b,tt){const nt=[];return!tt&&!s.isPointInArea(e)||evaluateInteractionItems(s,d,e,function(ht,mt,gt){!tt&&!_isPointInArea(ht,s.chartArea,0)||ht.inRange(e.x,e.y,b)&&nt.push({element:ht,datasetIndex:mt,index:gt})},!0),nt}function getNearestRadialItems(s,e,d,b){let tt=[];function nt(ot,ht,mt){const{startAngle:gt,endAngle:yt}=ot.getProps(["startAngle","endAngle"],b),{angle:ft}=getAngleFromPoint(ot,{x:e.x,y:e.y});_angleBetween(ft,gt,yt)&&tt.push({element:ot,datasetIndex:ht,index:mt})}return evaluateInteractionItems(s,d,e,nt),tt}function getNearestCartesianItems(s,e,d,b,tt,nt){let ot=[];const ht=getDistanceMetricForAxis(d);let mt=Number.POSITIVE_INFINITY;function gt(yt,ft,st){const bt=yt.inRange(e.x,e.y,tt);if(b&&!bt)return;const vt=yt.getCenterPoint(tt);if(!(!!nt||s.isPointInArea(vt))&&!bt)return;const wt=ht(e,vt);wt<mt?(ot=[{element:yt,datasetIndex:ft,index:st}],mt=wt):wt===mt&&ot.push({element:yt,datasetIndex:ft,index:st})}return evaluateInteractionItems(s,d,e,gt),ot}function getNearestItems(s,e,d,b,tt,nt){return!nt&&!s.isPointInArea(e)?[]:d==="r"&&!b?getNearestRadialItems(s,e,d,tt):getNearestCartesianItems(s,e,d,b,tt,nt)}function getAxisItems(s,e,d,b,tt){const nt=[],ot=d==="x"?"inXRange":"inYRange";let ht=!1;return evaluateInteractionItems(s,d,e,(mt,gt,yt)=>{mt[ot](e[d],tt)&&(nt.push({element:mt,datasetIndex:gt,index:yt}),ht=ht||mt.inRange(e.x,e.y,tt))}),b&&!ht?[]:nt}var Interaction={evaluateInteractionItems,modes:{index(s,e,d,b){const tt=getRelativePosition(e,s),nt=d.axis||"x",ot=d.includeInvisible||!1,ht=d.intersect?getIntersectItems(s,tt,nt,b,ot):getNearestItems(s,tt,nt,!1,b,ot),mt=[];return ht.length?(s.getSortedVisibleDatasetMetas().forEach(gt=>{const yt=ht[0].index,ft=gt.data[yt];ft&&!ft.skip&&mt.push({element:ft,datasetIndex:gt.index,index:yt})}),mt):[]},dataset(s,e,d,b){const tt=getRelativePosition(e,s),nt=d.axis||"xy",ot=d.includeInvisible||!1;let ht=d.intersect?getIntersectItems(s,tt,nt,b,ot):getNearestItems(s,tt,nt,!1,b,ot);if(ht.length>0){const mt=ht[0].datasetIndex,gt=s.getDatasetMeta(mt).data;ht=[];for(let yt=0;yt<gt.length;++yt)ht.push({element:gt[yt],datasetIndex:mt,index:yt})}return ht},point(s,e,d,b){const tt=getRelativePosition(e,s),nt=d.axis||"xy",ot=d.includeInvisible||!1;return getIntersectItems(s,tt,nt,b,ot)},nearest(s,e,d,b){const tt=getRelativePosition(e,s),nt=d.axis||"xy",ot=d.includeInvisible||!1;return getNearestItems(s,tt,nt,d.intersect,b,ot)},x(s,e,d,b){const tt=getRelativePosition(e,s);return getAxisItems(s,tt,"x",d.intersect,b)},y(s,e,d,b){const tt=getRelativePosition(e,s);return getAxisItems(s,tt,"y",d.intersect,b)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(s,e){return s.filter(d=>d.pos===e)}function filterDynamicPositionByAxis(s,e){return s.filter(d=>STATIC_POSITIONS.indexOf(d.pos)===-1&&d.box.axis===e)}function sortByWeight(s,e){return s.sort((d,b)=>{const tt=e?b:d,nt=e?d:b;return tt.weight===nt.weight?tt.index-nt.index:tt.weight-nt.weight})}function wrapBoxes(s){const e=[];let d,b,tt,nt,ot,ht;for(d=0,b=(s||[]).length;d<b;++d)tt=s[d],{position:nt,options:{stack:ot,stackWeight:ht=1}}=tt,e.push({index:d,box:tt,pos:nt,horizontal:tt.isHorizontal(),weight:tt.weight,stack:ot&&nt+ot,stackWeight:ht});return e}function buildStacks(s){const e={};for(const d of s){const{stack:b,pos:tt,stackWeight:nt}=d;if(!b||!STATIC_POSITIONS.includes(tt))continue;const ot=e[b]||(e[b]={count:0,placed:0,weight:0,size:0});ot.count++,ot.weight+=nt}return e}function setLayoutDims(s,e){const d=buildStacks(s),{vBoxMaxWidth:b,hBoxMaxHeight:tt}=e;let nt,ot,ht;for(nt=0,ot=s.length;nt<ot;++nt){ht=s[nt];const{fullSize:mt}=ht.box,gt=d[ht.stack],yt=gt&&ht.stackWeight/gt.weight;ht.horizontal?(ht.width=yt?yt*b:mt&&e.availableWidth,ht.height=tt):(ht.width=b,ht.height=yt?yt*tt:mt&&e.availableHeight)}return d}function buildLayoutBoxes(s){const e=wrapBoxes(s),d=sortByWeight(e.filter(gt=>gt.box.fullSize),!0),b=sortByWeight(filterByPosition(e,"left"),!0),tt=sortByWeight(filterByPosition(e,"right")),nt=sortByWeight(filterByPosition(e,"top"),!0),ot=sortByWeight(filterByPosition(e,"bottom")),ht=filterDynamicPositionByAxis(e,"x"),mt=filterDynamicPositionByAxis(e,"y");return{fullSize:d,leftAndTop:b.concat(nt),rightAndBottom:tt.concat(mt).concat(ot).concat(ht),chartArea:filterByPosition(e,"chartArea"),vertical:b.concat(tt).concat(mt),horizontal:nt.concat(ot).concat(ht)}}function getCombinedMax(s,e,d,b){return Math.max(s[d],e[d])+Math.max(s[b],e[b])}function updateMaxPadding(s,e){s.top=Math.max(s.top,e.top),s.left=Math.max(s.left,e.left),s.bottom=Math.max(s.bottom,e.bottom),s.right=Math.max(s.right,e.right)}function updateDims(s,e,d,b){const{pos:tt,box:nt}=d,ot=s.maxPadding;if(!isObject(tt)){d.size&&(s[tt]-=d.size);const ft=b[d.stack]||{size:0,count:1};ft.size=Math.max(ft.size,d.horizontal?nt.height:nt.width),d.size=ft.size/ft.count,s[tt]+=d.size}nt.getPadding&&updateMaxPadding(ot,nt.getPadding());const ht=Math.max(0,e.outerWidth-getCombinedMax(ot,s,"left","right")),mt=Math.max(0,e.outerHeight-getCombinedMax(ot,s,"top","bottom")),gt=ht!==s.w,yt=mt!==s.h;return s.w=ht,s.h=mt,d.horizontal?{same:gt,other:yt}:{same:yt,other:gt}}function handleMaxPadding(s){const e=s.maxPadding;function d(b){const tt=Math.max(e[b]-s[b],0);return s[b]+=tt,tt}s.y+=d("top"),s.x+=d("left"),d("right"),d("bottom")}function getMargins(s,e){const d=e.maxPadding;function b(tt){const nt={left:0,top:0,right:0,bottom:0};return tt.forEach(ot=>{nt[ot]=Math.max(e[ot],d[ot])}),nt}return b(s?["left","right"]:["top","bottom"])}function fitBoxes(s,e,d,b){const tt=[];let nt,ot,ht,mt,gt,yt;for(nt=0,ot=s.length,gt=0;nt<ot;++nt){ht=s[nt],mt=ht.box,mt.update(ht.width||e.w,ht.height||e.h,getMargins(ht.horizontal,e));const{same:ft,other:st}=updateDims(e,d,ht,b);gt|=ft&&tt.length,yt=yt||st,mt.fullSize||tt.push(ht)}return gt&&fitBoxes(tt,e,d,b)||yt}function setBoxDims(s,e,d,b,tt){s.top=d,s.left=e,s.right=e+b,s.bottom=d+tt,s.width=b,s.height=tt}function placeBoxes(s,e,d,b){const tt=d.padding;let{x:nt,y:ot}=e;for(const ht of s){const mt=ht.box,gt=b[ht.stack]||{count:1,placed:0,weight:1},yt=ht.stackWeight/gt.weight||1;if(ht.horizontal){const ft=e.w*yt,st=gt.size||mt.height;defined(gt.start)&&(ot=gt.start),mt.fullSize?setBoxDims(mt,tt.left,ot,d.outerWidth-tt.right-tt.left,st):setBoxDims(mt,e.left+gt.placed,ot,ft,st),gt.start=ot,gt.placed+=ft,ot=mt.bottom}else{const ft=e.h*yt,st=gt.size||mt.width;defined(gt.start)&&(nt=gt.start),mt.fullSize?setBoxDims(mt,nt,tt.top,st,d.outerHeight-tt.bottom-tt.top):setBoxDims(mt,nt,e.top+gt.placed,st,ft),gt.start=nt,gt.placed+=ft,nt=mt.right}}e.x=nt,e.y=ot}var layouts={addBox(s,e){s.boxes||(s.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(d){e.draw(d)}}]},s.boxes.push(e)},removeBox(s,e){const d=s.boxes?s.boxes.indexOf(e):-1;d!==-1&&s.boxes.splice(d,1)},configure(s,e,d){e.fullSize=d.fullSize,e.position=d.position,e.weight=d.weight},update(s,e,d,b){if(!s)return;const tt=toPadding(s.options.layout.padding),nt=Math.max(e-tt.width,0),ot=Math.max(d-tt.height,0),ht=buildLayoutBoxes(s.boxes),mt=ht.vertical,gt=ht.horizontal;each(s.boxes,xt=>{typeof xt.beforeLayout=="function"&&xt.beforeLayout()});const yt=mt.reduce((xt,wt)=>wt.box.options&&wt.box.options.display===!1?xt:xt+1,0)||1,ft=Object.freeze({outerWidth:e,outerHeight:d,padding:tt,availableWidth:nt,availableHeight:ot,vBoxMaxWidth:nt/2/yt,hBoxMaxHeight:ot/2}),st=Object.assign({},tt);updateMaxPadding(st,toPadding(b));const bt=Object.assign({maxPadding:st,w:nt,h:ot,x:tt.left,y:tt.top},tt),vt=setLayoutDims(mt.concat(gt),ft);fitBoxes(ht.fullSize,bt,ft,vt),fitBoxes(mt,bt,ft,vt),fitBoxes(gt,bt,ft,vt)&&fitBoxes(mt,bt,ft,vt),handleMaxPadding(bt),placeBoxes(ht.leftAndTop,bt,ft,vt),bt.x+=bt.w,bt.y+=bt.h,placeBoxes(ht.rightAndBottom,bt,ft,vt),s.chartArea={left:bt.left,top:bt.top,right:bt.left+bt.w,bottom:bt.top+bt.h,height:bt.h,width:bt.w},each(ht.chartArea,xt=>{const wt=xt.box;Object.assign(wt,s.chartArea),wt.update(bt.w,bt.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(e,d){}releaseContext(e){return!1}addEventListener(e,d,b){}removeEventListener(e,d,b){}getDevicePixelRatio(){return 1}getMaximumSize(e,d,b,tt){return d=Math.max(0,d||e.width),b=b||e.height,{width:d,height:Math.max(0,tt?Math.floor(d/tt):b)}}isAttached(e){return!0}updateConfig(e){}}class BasicPlatform extends BasePlatform{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=s=>s===null||s==="";function initCanvas(s,e){const d=s.style,b=s.getAttribute("height"),tt=s.getAttribute("width");if(s[EXPANDO_KEY]={initial:{height:b,width:tt,style:{display:d.display,height:d.height,width:d.width}}},d.display=d.display||"block",d.boxSizing=d.boxSizing||"border-box",isNullOrEmpty(tt)){const nt=readUsedSize(s,"width");nt!==void 0&&(s.width=nt)}if(isNullOrEmpty(b))if(s.style.height==="")s.height=s.width/(e||2);else{const nt=readUsedSize(s,"height");nt!==void 0&&(s.height=nt)}return s}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(s,e,d){s&&s.addEventListener(e,d,eventListenerOptions)}function removeListener(s,e,d){s&&s.canvas&&s.canvas.removeEventListener(e,d,eventListenerOptions)}function fromNativeEvent(s,e){const d=EVENT_TYPES[s.type]||s.type,{x:b,y:tt}=getRelativePosition(s,e);return{type:d,chart:e,native:s,x:b!==void 0?b:null,y:tt!==void 0?tt:null}}function nodeListContains(s,e){for(const d of s)if(d===e||d.contains(e))return!0}function createAttachObserver(s,e,d){const b=s.canvas,tt=new MutationObserver(nt=>{let ot=!1;for(const ht of nt)ot=ot||nodeListContains(ht.addedNodes,b),ot=ot&&!nodeListContains(ht.removedNodes,b);ot&&d()});return tt.observe(document,{childList:!0,subtree:!0}),tt}function createDetachObserver(s,e,d){const b=s.canvas,tt=new MutationObserver(nt=>{let ot=!1;for(const ht of nt)ot=ot||nodeListContains(ht.removedNodes,b),ot=ot&&!nodeListContains(ht.addedNodes,b);ot&&d()});return tt.observe(document,{childList:!0,subtree:!0}),tt}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const s=window.devicePixelRatio;s!==oldDevicePixelRatio&&(oldDevicePixelRatio=s,drpListeningCharts.forEach((e,d)=>{d.currentDevicePixelRatio!==s&&e()}))}function listenDevicePixelRatioChanges(s,e){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(s,e)}function unlistenDevicePixelRatioChanges(s){drpListeningCharts.delete(s),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(s,e,d){const b=s.canvas,tt=b&&_getParentNode(b);if(!tt)return;const nt=throttled((ht,mt)=>{const gt=tt.clientWidth;d(ht,mt),gt<tt.clientWidth&&d()},window),ot=new ResizeObserver(ht=>{const mt=ht[0],gt=mt.contentRect.width,yt=mt.contentRect.height;gt===0&&yt===0||nt(gt,yt)});return ot.observe(tt),listenDevicePixelRatioChanges(s,nt),ot}function releaseObserver(s,e,d){d&&d.disconnect(),e==="resize"&&unlistenDevicePixelRatioChanges(s)}function createProxyAndListen(s,e,d){const b=s.canvas,tt=throttled(nt=>{s.ctx!==null&&d(fromNativeEvent(nt,s))},s);return addListener(b,e,tt),tt}class DomPlatform extends BasePlatform{acquireContext(e,d){const b=e&&e.getContext&&e.getContext("2d");return b&&b.canvas===e?(initCanvas(e,d),b):null}releaseContext(e){const d=e.canvas;if(!d[EXPANDO_KEY])return!1;const b=d[EXPANDO_KEY].initial;["height","width"].forEach(nt=>{const ot=b[nt];isNullOrUndef(ot)?d.removeAttribute(nt):d.setAttribute(nt,ot)});const tt=b.style||{};return Object.keys(tt).forEach(nt=>{d.style[nt]=tt[nt]}),d.width=d.width,delete d[EXPANDO_KEY],!0}addEventListener(e,d,b){this.removeEventListener(e,d);const tt=e.$proxies||(e.$proxies={}),ot={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[d]||createProxyAndListen;tt[d]=ot(e,d,b)}removeEventListener(e,d){const b=e.$proxies||(e.$proxies={}),tt=b[d];if(!tt)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[d]||removeListener)(e,d,tt),b[d]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,d,b,tt){return getMaximumSize(e,d,b,tt)}isAttached(e){const d=e&&_getParentNode(e);return!!(d&&d.isConnected)}}function _detectPlatform(s){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?BasicPlatform:DomPlatform}var Uo;let Element$1=(Uo=class{constructor(){Rn(this,"x");Rn(this,"y");Rn(this,"active",!1);Rn(this,"options");Rn(this,"$animations")}tooltipPosition(e){const{x:d,y:b}=this.getProps(["x","y"],e);return{x:d,y:b}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(e,d){const b=this.$animations;if(!d||!b)return this;const tt={};return e.forEach(nt=>{tt[nt]=b[nt]&&b[nt].active()?b[nt]._to:this[nt]}),tt}},Rn(Uo,"defaults",{}),Rn(Uo,"defaultRoutes"),Uo);function autoSkip(s,e){const d=s.options.ticks,b=determineMaxTicks(s),tt=Math.min(d.maxTicksLimit||b,b),nt=d.major.enabled?getMajorIndices(e):[],ot=nt.length,ht=nt[0],mt=nt[ot-1],gt=[];if(ot>tt)return skipMajors(e,gt,nt,ot/tt),gt;const yt=calculateSpacing(nt,e,tt);if(ot>0){let ft,st;const bt=ot>1?Math.round((mt-ht)/(ot-1)):null;for(skip(e,gt,yt,isNullOrUndef(bt)?0:ht-bt,ht),ft=0,st=ot-1;ft<st;ft++)skip(e,gt,yt,nt[ft],nt[ft+1]);return skip(e,gt,yt,mt,isNullOrUndef(bt)?e.length:mt+bt),gt}return skip(e,gt,yt),gt}function determineMaxTicks(s){const e=s.options.offset,d=s._tickSize(),b=s._length/d+(e?0:1),tt=s._maxLength/d;return Math.floor(Math.min(b,tt))}function calculateSpacing(s,e,d){const b=getEvenSpacing(s),tt=e.length/d;if(!b)return Math.max(tt,1);const nt=_factorize(b);for(let ot=0,ht=nt.length-1;ot<ht;ot++){const mt=nt[ot];if(mt>tt)return mt}return Math.max(tt,1)}function getMajorIndices(s){const e=[];let d,b;for(d=0,b=s.length;d<b;d++)s[d].major&&e.push(d);return e}function skipMajors(s,e,d,b){let tt=0,nt=d[0],ot;for(b=Math.ceil(b),ot=0;ot<s.length;ot++)ot===nt&&(e.push(s[ot]),tt++,nt=d[tt*b])}function skip(s,e,d,b,tt){const nt=valueOrDefault(b,0),ot=Math.min(valueOrDefault(tt,s.length),s.length);let ht=0,mt,gt,yt;for(d=Math.ceil(d),tt&&(mt=tt-b,d=mt/Math.floor(mt/d)),yt=nt;yt<0;)ht++,yt=Math.round(nt+ht*d);for(gt=Math.max(nt,0);gt<ot;gt++)gt===yt&&(e.push(s[gt]),ht++,yt=Math.round(nt+ht*d))}function getEvenSpacing(s){const e=s.length;let d,b;if(e<2)return!1;for(b=s[0],d=1;d<e;++d)if(s[d]-s[d-1]!==b)return!1;return b}const reverseAlign=s=>s==="left"?"right":s==="right"?"left":s,offsetFromEdge=(s,e,d)=>e==="top"||e==="left"?s[e]+d:s[e]-d,getTicksLimit=(s,e)=>Math.min(e||s,s);function sample(s,e){const d=[],b=s.length/e,tt=s.length;let nt=0;for(;nt<tt;nt+=b)d.push(s[Math.floor(nt)]);return d}function getPixelForGridLine(s,e,d){const b=s.ticks.length,tt=Math.min(e,b-1),nt=s._startPixel,ot=s._endPixel,ht=1e-6;let mt=s.getPixelForTick(tt),gt;if(!(d&&(b===1?gt=Math.max(mt-nt,ot-mt):e===0?gt=(s.getPixelForTick(1)-mt)/2:gt=(mt-s.getPixelForTick(tt-1))/2,mt+=tt<e?gt:-gt,mt<nt-ht||mt>ot+ht)))return mt}function garbageCollect(s,e){each(s,d=>{const b=d.gc,tt=b.length/2;let nt;if(tt>e){for(nt=0;nt<tt;++nt)delete d.data[b[nt]];b.splice(0,tt)}})}function getTickMarkLength(s){return s.drawTicks?s.tickLength:0}function getTitleHeight(s,e){if(!s.display)return 0;const d=toFont(s.font,e),b=toPadding(s.padding);return(isArray(s.text)?s.text.length:1)*d.lineHeight+b.height}function createScaleContext(s,e){return createContext(s,{scale:e,type:"scale"})}function createTickContext(s,e,d){return createContext(s,{tick:d,index:e,type:"tick"})}function titleAlign(s,e,d){let b=_toLeftRightCenter(s);return(d&&e!=="right"||!d&&e==="right")&&(b=reverseAlign(b)),b}function titleArgs(s,e,d,b){const{top:tt,left:nt,bottom:ot,right:ht,chart:mt}=s,{chartArea:gt,scales:yt}=mt;let ft=0,st,bt,vt;const xt=ot-tt,wt=ht-nt;if(s.isHorizontal()){if(bt=_alignStartEnd(b,nt,ht),isObject(d)){const St=Object.keys(d)[0],_t=d[St];vt=yt[St].getPixelForValue(_t)+xt-e}else d==="center"?vt=(gt.bottom+gt.top)/2+xt-e:vt=offsetFromEdge(s,d,e);st=ht-nt}else{if(isObject(d)){const St=Object.keys(d)[0],_t=d[St];bt=yt[St].getPixelForValue(_t)-wt+e}else d==="center"?bt=(gt.left+gt.right)/2-wt+e:bt=offsetFromEdge(s,d,e);vt=_alignStartEnd(b,ot,tt),ft=d==="left"?-HALF_PI:HALF_PI}return{titleX:bt,titleY:vt,maxWidth:st,rotation:ft}}class Scale extends Element$1{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,d){return e}getUserBounds(){let{_userMin:e,_userMax:d,_suggestedMin:b,_suggestedMax:tt}=this;return e=finiteOrDefault(e,Number.POSITIVE_INFINITY),d=finiteOrDefault(d,Number.NEGATIVE_INFINITY),b=finiteOrDefault(b,Number.POSITIVE_INFINITY),tt=finiteOrDefault(tt,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(e,b),max:finiteOrDefault(d,tt),minDefined:isNumberFinite(e),maxDefined:isNumberFinite(d)}}getMinMax(e){let{min:d,max:b,minDefined:tt,maxDefined:nt}=this.getUserBounds(),ot;if(tt&&nt)return{min:d,max:b};const ht=this.getMatchingVisibleMetas();for(let mt=0,gt=ht.length;mt<gt;++mt)ot=ht[mt].controller.getMinMax(this,e),tt||(d=Math.min(d,ot.min)),nt||(b=Math.max(b,ot.max));return d=nt&&d>b?b:d,b=tt&&d>b?d:b,{min:finiteOrDefault(d,finiteOrDefault(b,d)),max:finiteOrDefault(b,finiteOrDefault(d,b))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(e,d,b){const{beginAtZero:tt,grace:nt,ticks:ot}=this.options,ht=ot.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=d,this._margins=b=Object.assign({left:0,right:0,top:0,bottom:0},b),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+b.left+b.right:this.height+b.top+b.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,nt,tt),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const mt=ht<this.ticks.length;this._convertTicksToLabels(mt?sample(this.ticks,ht):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),ot.display&&(ot.autoSkip||ot.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),mt&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,d,b;this.isHorizontal()?(d=this.left,b=this.right):(d=this.top,b=this.bottom,e=!e),this._startPixel=d,this._endPixel=b,this._reversePixels=e,this._length=b-d,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),callback(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const d=this.options.ticks;let b,tt,nt;for(b=0,tt=e.length;b<tt;b++)nt=e[b],nt.label=callback(d.callback,[nt.value,b,e],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,d=e.ticks,b=getTicksLimit(this.ticks.length,e.ticks.maxTicksLimit),tt=d.minRotation||0,nt=d.maxRotation;let ot=tt,ht,mt,gt;if(!this._isVisible()||!d.display||tt>=nt||b<=1||!this.isHorizontal()){this.labelRotation=tt;return}const yt=this._getLabelSizes(),ft=yt.widest.width,st=yt.highest.height,bt=_limitValue(this.chart.width-ft,0,this.maxWidth);ht=e.offset?this.maxWidth/b:bt/(b-1),ft+6>ht&&(ht=bt/(b-(e.offset?.5:1)),mt=this.maxHeight-getTickMarkLength(e.grid)-d.padding-getTitleHeight(e.title,this.chart.options.font),gt=Math.sqrt(ft*ft+st*st),ot=toDegrees(Math.min(Math.asin(_limitValue((yt.highest.height+6)/ht,-1,1)),Math.asin(_limitValue(mt/gt,-1,1))-Math.asin(_limitValue(st/gt,-1,1)))),ot=Math.max(tt,Math.min(nt,ot))),this.labelRotation=ot}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:d,options:{ticks:b,title:tt,grid:nt}}=this,ot=this._isVisible(),ht=this.isHorizontal();if(ot){const mt=getTitleHeight(tt,d.options.font);if(ht?(e.width=this.maxWidth,e.height=getTickMarkLength(nt)+mt):(e.height=this.maxHeight,e.width=getTickMarkLength(nt)+mt),b.display&&this.ticks.length){const{first:gt,last:yt,widest:ft,highest:st}=this._getLabelSizes(),bt=b.padding*2,vt=toRadians(this.labelRotation),xt=Math.cos(vt),wt=Math.sin(vt);if(ht){const St=b.mirror?0:wt*ft.width+xt*st.height;e.height=Math.min(this.maxHeight,e.height+St+bt)}else{const St=b.mirror?0:xt*ft.width+wt*st.height;e.width=Math.min(this.maxWidth,e.width+St+bt)}this._calculatePadding(gt,yt,wt,xt)}}this._handleMargins(),ht?(this.width=this._length=d.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=d.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,d,b,tt){const{ticks:{align:nt,padding:ot},position:ht}=this.options,mt=this.labelRotation!==0,gt=ht!=="top"&&this.axis==="x";if(this.isHorizontal()){const yt=this.getPixelForTick(0)-this.left,ft=this.right-this.getPixelForTick(this.ticks.length-1);let st=0,bt=0;mt?gt?(st=tt*e.width,bt=b*d.height):(st=b*e.height,bt=tt*d.width):nt==="start"?bt=d.width:nt==="end"?st=e.width:nt!=="inner"&&(st=e.width/2,bt=d.width/2),this.paddingLeft=Math.max((st-yt+ot)*this.width/(this.width-yt),0),this.paddingRight=Math.max((bt-ft+ot)*this.width/(this.width-ft),0)}else{let yt=d.height/2,ft=e.height/2;nt==="start"?(yt=0,ft=e.height):nt==="end"&&(yt=d.height,ft=0),this.paddingTop=yt+ot,this.paddingBottom=ft+ot}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:d}=this.options;return d==="top"||d==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let d,b;for(d=0,b=e.length;d<b;d++)isNullOrUndef(e[d].label)&&(e.splice(d,1),b--,d--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const d=this.options.ticks.sampleSize;let b=this.ticks;d<b.length&&(b=sample(b,d)),this._labelSizes=e=this._computeLabelSizes(b,b.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,d,b){const{ctx:tt,_longestTextCache:nt}=this,ot=[],ht=[],mt=Math.floor(d/getTicksLimit(d,b));let gt=0,yt=0,ft,st,bt,vt,xt,wt,St,_t,Tt,Et,kt;for(ft=0;ft<d;ft+=mt){if(vt=e[ft].label,xt=this._resolveTickFontOptions(ft),tt.font=wt=xt.string,St=nt[wt]=nt[wt]||{data:{},gc:[]},_t=xt.lineHeight,Tt=Et=0,!isNullOrUndef(vt)&&!isArray(vt))Tt=_measureText(tt,St.data,St.gc,Tt,vt),Et=_t;else if(isArray(vt))for(st=0,bt=vt.length;st<bt;++st)kt=vt[st],!isNullOrUndef(kt)&&!isArray(kt)&&(Tt=_measureText(tt,St.data,St.gc,Tt,kt),Et+=_t);ot.push(Tt),ht.push(Et),gt=Math.max(Tt,gt),yt=Math.max(Et,yt)}garbageCollect(nt,d);const Mt=ot.indexOf(gt),Ot=ht.indexOf(yt),Dt=At=>({width:ot[At]||0,height:ht[At]||0});return{first:Dt(0),last:Dt(d-1),widest:Dt(Mt),highest:Dt(Ot),widths:ot,heights:ht}}getLabelForValue(e){return e}getPixelForValue(e,d){return NaN}getValueForPixel(e){}getPixelForTick(e){const d=this.ticks;return e<0||e>d.length-1?null:this.getPixelForValue(d[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const d=this._startPixel+e*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,d,0):d)}getDecimalForPixel(e){const d=(e-this._startPixel)/this._length;return this._reversePixels?1-d:d}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:d}=this;return e<0&&d<0?d:e>0&&d>0?e:0}getContext(e){const d=this.ticks||[];if(e>=0&&e<d.length){const b=d[e];return b.$context||(b.$context=createTickContext(this.getContext(),e,b))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,d=toRadians(this.labelRotation),b=Math.abs(Math.cos(d)),tt=Math.abs(Math.sin(d)),nt=this._getLabelSizes(),ot=e.autoSkipPadding||0,ht=nt?nt.widest.width+ot:0,mt=nt?nt.highest.height+ot:0;return this.isHorizontal()?mt*b>ht*tt?ht/b:mt/tt:mt*tt<ht*b?mt/b:ht/tt}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const d=this.axis,b=this.chart,tt=this.options,{grid:nt,position:ot,border:ht}=tt,mt=nt.offset,gt=this.isHorizontal(),ft=this.ticks.length+(mt?1:0),st=getTickMarkLength(nt),bt=[],vt=ht.setContext(this.getContext()),xt=vt.display?vt.width:0,wt=xt/2,St=function(Lt){return _alignPixel(b,Lt,xt)};let _t,Tt,Et,kt,Mt,Ot,Dt,At,It,jt,qt,Jt;if(ot==="top")_t=St(this.bottom),Ot=this.bottom-st,At=_t-wt,jt=St(e.top)+wt,Jt=e.bottom;else if(ot==="bottom")_t=St(this.top),jt=e.top,Jt=St(e.bottom)-wt,Ot=_t+wt,At=this.top+st;else if(ot==="left")_t=St(this.right),Mt=this.right-st,Dt=_t-wt,It=St(e.left)+wt,qt=e.right;else if(ot==="right")_t=St(this.left),It=e.left,qt=St(e.right)-wt,Mt=_t+wt,Dt=this.left+st;else if(d==="x"){if(ot==="center")_t=St((e.top+e.bottom)/2+.5);else if(isObject(ot)){const Lt=Object.keys(ot)[0],Ut=ot[Lt];_t=St(this.chart.scales[Lt].getPixelForValue(Ut))}jt=e.top,Jt=e.bottom,Ot=_t+wt,At=Ot+st}else if(d==="y"){if(ot==="center")_t=St((e.left+e.right)/2);else if(isObject(ot)){const Lt=Object.keys(ot)[0],Ut=ot[Lt];_t=St(this.chart.scales[Lt].getPixelForValue(Ut))}Mt=_t-wt,Dt=Mt-st,It=e.left,qt=e.right}const Bt=valueOrDefault(tt.ticks.maxTicksLimit,ft),Wt=Math.max(1,Math.ceil(ft/Bt));for(Tt=0;Tt<ft;Tt+=Wt){const Lt=this.getContext(Tt),Ut=nt.setContext(Lt),tn=ht.setContext(Lt),Kt=Ut.lineWidth,an=Ut.color,ln=tn.dash||[],hn=tn.dashOffset,kn=Ut.tickWidth,Zt=Ut.tickColor,xn=Ut.tickBorderDash||[],En=Ut.tickBorderDashOffset;Et=getPixelForGridLine(this,Tt,mt),Et!==void 0&&(kt=_alignPixel(b,Et,Kt),gt?Mt=Dt=It=qt=kt:Ot=At=jt=Jt=kt,bt.push({tx1:Mt,ty1:Ot,tx2:Dt,ty2:At,x1:It,y1:jt,x2:qt,y2:Jt,width:Kt,color:an,borderDash:ln,borderDashOffset:hn,tickWidth:kn,tickColor:Zt,tickBorderDash:xn,tickBorderDashOffset:En}))}return this._ticksLength=ft,this._borderValue=_t,bt}_computeLabelItems(e){const d=this.axis,b=this.options,{position:tt,ticks:nt}=b,ot=this.isHorizontal(),ht=this.ticks,{align:mt,crossAlign:gt,padding:yt,mirror:ft}=nt,st=getTickMarkLength(b.grid),bt=st+yt,vt=ft?-yt:bt,xt=-toRadians(this.labelRotation),wt=[];let St,_t,Tt,Et,kt,Mt,Ot,Dt,At,It,jt,qt,Jt="middle";if(tt==="top")Mt=this.bottom-vt,Ot=this._getXAxisLabelAlignment();else if(tt==="bottom")Mt=this.top+vt,Ot=this._getXAxisLabelAlignment();else if(tt==="left"){const Wt=this._getYAxisLabelAlignment(st);Ot=Wt.textAlign,kt=Wt.x}else if(tt==="right"){const Wt=this._getYAxisLabelAlignment(st);Ot=Wt.textAlign,kt=Wt.x}else if(d==="x"){if(tt==="center")Mt=(e.top+e.bottom)/2+bt;else if(isObject(tt)){const Wt=Object.keys(tt)[0],Lt=tt[Wt];Mt=this.chart.scales[Wt].getPixelForValue(Lt)+bt}Ot=this._getXAxisLabelAlignment()}else if(d==="y"){if(tt==="center")kt=(e.left+e.right)/2-bt;else if(isObject(tt)){const Wt=Object.keys(tt)[0],Lt=tt[Wt];kt=this.chart.scales[Wt].getPixelForValue(Lt)}Ot=this._getYAxisLabelAlignment(st).textAlign}d==="y"&&(mt==="start"?Jt="top":mt==="end"&&(Jt="bottom"));const Bt=this._getLabelSizes();for(St=0,_t=ht.length;St<_t;++St){Tt=ht[St],Et=Tt.label;const Wt=nt.setContext(this.getContext(St));Dt=this.getPixelForTick(St)+nt.labelOffset,At=this._resolveTickFontOptions(St),It=At.lineHeight,jt=isArray(Et)?Et.length:1;const Lt=jt/2,Ut=Wt.color,tn=Wt.textStrokeColor,Kt=Wt.textStrokeWidth;let an=Ot;ot?(kt=Dt,Ot==="inner"&&(St===_t-1?an=this.options.reverse?"left":"right":St===0?an=this.options.reverse?"right":"left":an="center"),tt==="top"?gt==="near"||xt!==0?qt=-jt*It+It/2:gt==="center"?qt=-Bt.highest.height/2-Lt*It+It:qt=-Bt.highest.height+It/2:gt==="near"||xt!==0?qt=It/2:gt==="center"?qt=Bt.highest.height/2-Lt*It:qt=Bt.highest.height-jt*It,ft&&(qt*=-1),xt!==0&&!Wt.showLabelBackdrop&&(kt+=It/2*Math.sin(xt))):(Mt=Dt,qt=(1-jt)*It/2);let ln;if(Wt.showLabelBackdrop){const hn=toPadding(Wt.backdropPadding),kn=Bt.heights[St],Zt=Bt.widths[St];let xn=qt-hn.top,En=0-hn.left;switch(Jt){case"middle":xn-=kn/2;break;case"bottom":xn-=kn;break}switch(Ot){case"center":En-=Zt/2;break;case"right":En-=Zt;break;case"inner":St===_t-1?En-=Zt:St>0&&(En-=Zt/2);break}ln={left:En,top:xn,width:Zt+hn.width,height:kn+hn.height,color:Wt.backdropColor}}wt.push({label:Et,font:At,textOffset:qt,options:{rotation:xt,color:Ut,strokeColor:tn,strokeWidth:Kt,textAlign:an,textBaseline:Jt,translation:[kt,Mt],backdrop:ln}})}return wt}_getXAxisLabelAlignment(){const{position:e,ticks:d}=this.options;if(-toRadians(this.labelRotation))return e==="top"?"left":"right";let tt="center";return d.align==="start"?tt="left":d.align==="end"?tt="right":d.align==="inner"&&(tt="inner"),tt}_getYAxisLabelAlignment(e){const{position:d,ticks:{crossAlign:b,mirror:tt,padding:nt}}=this.options,ot=this._getLabelSizes(),ht=e+nt,mt=ot.widest.width;let gt,yt;return d==="left"?tt?(yt=this.right+nt,b==="near"?gt="left":b==="center"?(gt="center",yt+=mt/2):(gt="right",yt+=mt)):(yt=this.right-ht,b==="near"?gt="right":b==="center"?(gt="center",yt-=mt/2):(gt="left",yt=this.left)):d==="right"?tt?(yt=this.left+nt,b==="near"?gt="right":b==="center"?(gt="center",yt-=mt/2):(gt="left",yt-=mt)):(yt=this.left+ht,b==="near"?gt="left":b==="center"?(gt="center",yt+=mt/2):(gt="right",yt=this.right)):gt="right",{textAlign:gt,x:yt}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,d=this.options.position;if(d==="left"||d==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(d==="top"||d==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:d},left:b,top:tt,width:nt,height:ot}=this;d&&(e.save(),e.fillStyle=d,e.fillRect(b,tt,nt,ot),e.restore())}getLineWidthForValue(e){const d=this.options.grid;if(!this._isVisible()||!d.display)return 0;const tt=this.ticks.findIndex(nt=>nt.value===e);return tt>=0?d.setContext(this.getContext(tt)).lineWidth:0}drawGrid(e){const d=this.options.grid,b=this.ctx,tt=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let nt,ot;const ht=(mt,gt,yt)=>{!yt.width||!yt.color||(b.save(),b.lineWidth=yt.width,b.strokeStyle=yt.color,b.setLineDash(yt.borderDash||[]),b.lineDashOffset=yt.borderDashOffset,b.beginPath(),b.moveTo(mt.x,mt.y),b.lineTo(gt.x,gt.y),b.stroke(),b.restore())};if(d.display)for(nt=0,ot=tt.length;nt<ot;++nt){const mt=tt[nt];d.drawOnChartArea&&ht({x:mt.x1,y:mt.y1},{x:mt.x2,y:mt.y2},mt),d.drawTicks&&ht({x:mt.tx1,y:mt.ty1},{x:mt.tx2,y:mt.ty2},{color:mt.tickColor,width:mt.tickWidth,borderDash:mt.tickBorderDash,borderDashOffset:mt.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:d,options:{border:b,grid:tt}}=this,nt=b.setContext(this.getContext()),ot=b.display?nt.width:0;if(!ot)return;const ht=tt.setContext(this.getContext(0)).lineWidth,mt=this._borderValue;let gt,yt,ft,st;this.isHorizontal()?(gt=_alignPixel(e,this.left,ot)-ot/2,yt=_alignPixel(e,this.right,ht)+ht/2,ft=st=mt):(ft=_alignPixel(e,this.top,ot)-ot/2,st=_alignPixel(e,this.bottom,ht)+ht/2,gt=yt=mt),d.save(),d.lineWidth=nt.width,d.strokeStyle=nt.color,d.beginPath(),d.moveTo(gt,ft),d.lineTo(yt,st),d.stroke(),d.restore()}drawLabels(e){if(!this.options.ticks.display)return;const b=this.ctx,tt=this._computeLabelArea();tt&&clipArea(b,tt);const nt=this.getLabelItems(e);for(const ot of nt){const ht=ot.options,mt=ot.font,gt=ot.label,yt=ot.textOffset;renderText(b,gt,0,yt,mt,ht)}tt&&unclipArea(b)}drawTitle(){const{ctx:e,options:{position:d,title:b,reverse:tt}}=this;if(!b.display)return;const nt=toFont(b.font),ot=toPadding(b.padding),ht=b.align;let mt=nt.lineHeight/2;d==="bottom"||d==="center"||isObject(d)?(mt+=ot.bottom,isArray(b.text)&&(mt+=nt.lineHeight*(b.text.length-1))):mt+=ot.top;const{titleX:gt,titleY:yt,maxWidth:ft,rotation:st}=titleArgs(this,mt,d,ht);renderText(e,b.text,0,0,nt,{color:b.color,maxWidth:ft,rotation:st,textAlign:titleAlign(ht,d,tt),textBaseline:"middle",translation:[gt,yt]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,d=e.ticks&&e.ticks.z||0,b=valueOrDefault(e.grid&&e.grid.z,-1),tt=valueOrDefault(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:d,draw:nt=>{this.draw(nt)}}]:[{z:b,draw:nt=>{this.drawBackground(),this.drawGrid(nt),this.drawTitle()}},{z:tt,draw:()=>{this.drawBorder()}},{z:d,draw:nt=>{this.drawLabels(nt)}}]}getMatchingVisibleMetas(e){const d=this.chart.getSortedVisibleDatasetMetas(),b=this.axis+"AxisID",tt=[];let nt,ot;for(nt=0,ot=d.length;nt<ot;++nt){const ht=d[nt];ht[b]===this.id&&(!e||ht.type===e)&&tt.push(ht)}return tt}_resolveTickFontOptions(e){const d=this.options.ticks.setContext(this.getContext(e));return toFont(d.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class TypedRegistry{constructor(e,d,b){this.type=e,this.scope=d,this.override=b,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const d=Object.getPrototypeOf(e);let b;isIChartComponent(d)&&(b=this.register(d));const tt=this.items,nt=e.id,ot=this.scope+"."+nt;if(!nt)throw new Error("class does not have id: "+e);return nt in tt||(tt[nt]=e,registerDefaults(e,ot,b),this.override&&defaults.override(e.id,e.overrides)),ot}get(e){return this.items[e]}unregister(e){const d=this.items,b=e.id,tt=this.scope;b in d&&delete d[b],tt&&b in defaults[tt]&&(delete defaults[tt][b],this.override&&delete overrides[b])}}function registerDefaults(s,e,d){const b=merge(Object.create(null),[d?defaults.get(d):{},defaults.get(e),s.defaults]);defaults.set(e,b),s.defaultRoutes&&routeDefaults(e,s.defaultRoutes),s.descriptors&&defaults.describe(e,s.descriptors)}function routeDefaults(s,e){Object.keys(e).forEach(d=>{const b=d.split("."),tt=b.pop(),nt=[s].concat(b).join("."),ot=e[d].split("."),ht=ot.pop(),mt=ot.join(".");defaults.route(nt,tt,mt,ht)})}function isIChartComponent(s){return"id"in s&&"defaults"in s}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element$1,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,d,b){[...d].forEach(tt=>{const nt=b||this._getRegistryForType(tt);b||nt.isForType(tt)||nt===this.plugins&&tt.id?this._exec(e,nt,tt):each(tt,ot=>{const ht=b||this._getRegistryForType(ot);this._exec(e,ht,ot)})})}_exec(e,d,b){const tt=_capitalize(e);callback(b["before"+tt],[],b),d[e](b),callback(b["after"+tt],[],b)}_getRegistryForType(e){for(let d=0;d<this._typedRegistries.length;d++){const b=this._typedRegistries[d];if(b.isForType(e))return b}return this.plugins}_get(e,d,b){const tt=d.get(e);if(tt===void 0)throw new Error('"'+e+'" is not a registered '+b+".");return tt}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(e,d,b,tt){d==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const nt=tt?this._descriptors(e).filter(tt):this._descriptors(e),ot=this._notify(nt,e,d,b);return d==="afterDestroy"&&(this._notify(nt,e,"stop"),this._notify(this._init,e,"uninstall")),ot}_notify(e,d,b,tt){tt=tt||{};for(const nt of e){const ot=nt.plugin,ht=ot[b],mt=[d,tt,nt.options];if(callback(ht,mt,ot)===!1&&tt.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const d=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),d}_createDescriptors(e,d){const b=e&&e.config,tt=valueOrDefault(b.options&&b.options.plugins,{}),nt=allPlugins(b);return tt===!1&&!d?[]:createDescriptors(e,nt,tt,d)}_notifyStateChanges(e){const d=this._oldCache||[],b=this._cache,tt=(nt,ot)=>nt.filter(ht=>!ot.some(mt=>ht.plugin.id===mt.plugin.id));this._notify(tt(d,b),e,"stop"),this._notify(tt(b,d),e,"start")}}function allPlugins(s){const e={},d=[],b=Object.keys(registry.plugins.items);for(let nt=0;nt<b.length;nt++)d.push(registry.getPlugin(b[nt]));const tt=s.plugins||[];for(let nt=0;nt<tt.length;nt++){const ot=tt[nt];d.indexOf(ot)===-1&&(d.push(ot),e[ot.id]=!0)}return{plugins:d,localIds:e}}function getOpts(s,e){return!e&&s===!1?null:s===!0?{}:s}function createDescriptors(s,{plugins:e,localIds:d},b,tt){const nt=[],ot=s.getContext();for(const ht of e){const mt=ht.id,gt=getOpts(b[mt],tt);gt!==null&&nt.push({plugin:ht,options:pluginOpts(s.config,{plugin:ht,local:d[mt]},gt,ot)})}return nt}function pluginOpts(s,{plugin:e,local:d},b,tt){const nt=s.pluginScopeKeys(e),ot=s.getOptionScopes(b,nt);return d&&e.defaults&&ot.push(e.defaults),s.createResolver(ot,tt,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(s,e){const d=defaults.datasets[s]||{};return((e.datasets||{})[s]||{}).indexAxis||e.indexAxis||d.indexAxis||"x"}function getAxisFromDefaultScaleID(s,e){let d=s;return s==="_index_"?d=e:s==="_value_"&&(d=e==="x"?"y":"x"),d}function getDefaultScaleIDFromAxis(s,e){return s===e?"_index_":"_value_"}function idMatchesAxis(s){if(s==="x"||s==="y"||s==="r")return s}function axisFromPosition(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function determineAxis(s,...e){if(idMatchesAxis(s))return s;for(const d of e){const b=d.axis||axisFromPosition(d.position)||s.length>1&&idMatchesAxis(s[0].toLowerCase());if(b)return b}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function getAxisFromDataset(s,e,d){if(d[e+"AxisID"]===s)return{axis:e}}function retrieveAxisFromDatasets(s,e){if(e.data&&e.data.datasets){const d=e.data.datasets.filter(b=>b.xAxisID===s||b.yAxisID===s);if(d.length)return getAxisFromDataset(s,"x",d[0])||getAxisFromDataset(s,"y",d[0])}return{}}function mergeScaleConfig(s,e){const d=overrides[s.type]||{scales:{}},b=e.scales||{},tt=getIndexAxis(s.type,e),nt=Object.create(null);return Object.keys(b).forEach(ot=>{const ht=b[ot];if(!isObject(ht))return console.error(`Invalid scale configuration for scale: ${ot}`);if(ht._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${ot}`);const mt=determineAxis(ot,ht,retrieveAxisFromDatasets(ot,s),defaults.scales[ht.type]),gt=getDefaultScaleIDFromAxis(mt,tt),yt=d.scales||{};nt[ot]=mergeIf(Object.create(null),[{axis:mt},ht,yt[mt],yt[gt]])}),s.data.datasets.forEach(ot=>{const ht=ot.type||s.type,mt=ot.indexAxis||getIndexAxis(ht,e),yt=(overrides[ht]||{}).scales||{};Object.keys(yt).forEach(ft=>{const st=getAxisFromDefaultScaleID(ft,mt),bt=ot[st+"AxisID"]||st;nt[bt]=nt[bt]||Object.create(null),mergeIf(nt[bt],[{axis:st},b[bt],yt[ft]])})}),Object.keys(nt).forEach(ot=>{const ht=nt[ot];mergeIf(ht,[defaults.scales[ht.type],defaults.scale])}),nt}function initOptions(s){const e=s.options||(s.options={});e.plugins=valueOrDefault(e.plugins,{}),e.scales=mergeScaleConfig(s,e)}function initData(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function initConfig(s){return s=s||{},s.data=initData(s.data),initOptions(s),s}const keyCache=new Map,keysCached=new Set;function cachedKeys(s,e){let d=keyCache.get(s);return d||(d=e(),keyCache.set(s,d),keysCached.add(d)),d}const addIfFound=(s,e,d)=>{const b=resolveObjectKey(e,d);b!==void 0&&s.add(b)};class Config{constructor(e){this._config=initConfig(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=initData(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),initOptions(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cachedKeys(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,d){return cachedKeys(`${e}.transition.${d}`,()=>[[`datasets.${e}.transitions.${d}`,`transitions.${d}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,d){return cachedKeys(`${e}-${d}`,()=>[[`datasets.${e}.elements.${d}`,`datasets.${e}`,`elements.${d}`,""]])}pluginScopeKeys(e){const d=e.id,b=this.type;return cachedKeys(`${b}-plugin-${d}`,()=>[[`plugins.${d}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,d){const b=this._scopeCache;let tt=b.get(e);return(!tt||d)&&(tt=new Map,b.set(e,tt)),tt}getOptionScopes(e,d,b){const{options:tt,type:nt}=this,ot=this._cachedScopes(e,b),ht=ot.get(d);if(ht)return ht;const mt=new Set;d.forEach(yt=>{e&&(mt.add(e),yt.forEach(ft=>addIfFound(mt,e,ft))),yt.forEach(ft=>addIfFound(mt,tt,ft)),yt.forEach(ft=>addIfFound(mt,overrides[nt]||{},ft)),yt.forEach(ft=>addIfFound(mt,defaults,ft)),yt.forEach(ft=>addIfFound(mt,descriptors,ft))});const gt=Array.from(mt);return gt.length===0&&gt.push(Object.create(null)),keysCached.has(d)&&ot.set(d,gt),gt}chartOptionScopes(){const{options:e,type:d}=this;return[e,overrides[d]||{},defaults.datasets[d]||{},{type:d},defaults,descriptors]}resolveNamedOptions(e,d,b,tt=[""]){const nt={$shared:!0},{resolver:ot,subPrefixes:ht}=getResolver(this._resolverCache,e,tt);let mt=ot;if(needContext(ot,d)){nt.$shared=!1,b=isFunction(b)?b():b;const gt=this.createResolver(e,b,ht);mt=_attachContext(ot,b,gt)}for(const gt of d)nt[gt]=mt[gt];return nt}createResolver(e,d,b=[""],tt){const{resolver:nt}=getResolver(this._resolverCache,e,b);return isObject(d)?_attachContext(nt,d,void 0,tt):nt}}function getResolver(s,e,d){let b=s.get(e);b||(b=new Map,s.set(e,b));const tt=d.join();let nt=b.get(tt);return nt||(nt={resolver:_createResolver(e,d),subPrefixes:d.filter(ht=>!ht.toLowerCase().includes("hover"))},b.set(tt,nt)),nt}const hasFunction=s=>isObject(s)&&Object.getOwnPropertyNames(s).some(e=>isFunction(s[e]));function needContext(s,e){const{isScriptable:d,isIndexable:b}=_descriptors(s);for(const tt of e){const nt=d(tt),ot=b(tt),ht=(ot||nt)&&s[tt];if(nt&&(isFunction(ht)||hasFunction(ht))||ot&&isArray(ht))return!0}return!1}var version="4.4.3";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(s,e){return s==="top"||s==="bottom"||KNOWN_POSITIONS.indexOf(s)===-1&&e==="x"}function compare2Level(s,e){return function(d,b){return d[s]===b[s]?d[e]-b[e]:d[s]-b[s]}}function onAnimationsComplete(s){const e=s.chart,d=e.options.animation;e.notifyPlugins("afterRender"),callback(d&&d.onComplete,[s],e)}function onAnimationProgress(s){const e=s.chart,d=e.options.animation;callback(d&&d.onProgress,[s],e)}function getCanvas(s){return _isDomSupported()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const instances={},getChart=s=>{const e=getCanvas(s);return Object.values(instances).filter(d=>d.canvas===e).pop()};function moveNumericKeys(s,e,d){const b=Object.keys(s);for(const tt of b){const nt=+tt;if(nt>=e){const ot=s[tt];delete s[tt],(d>0||nt>e)&&(s[nt+d]=ot)}}}function determineLastEvent(s,e,d,b){return!d||s.type==="mouseout"?null:b?e:s}function getSizeForArea(s,e,d){return s.options.clip?s[d]:e[d]}function getDatasetArea(s,e){const{xScale:d,yScale:b}=s;return d&&b?{left:getSizeForArea(d,e,"left"),right:getSizeForArea(d,e,"right"),top:getSizeForArea(b,e,"top"),bottom:getSizeForArea(b,e,"bottom")}:e}var oo;let Chart$1=(oo=class{static register(...e){registry.add(...e),invalidatePlugins()}static unregister(...e){registry.remove(...e),invalidatePlugins()}constructor(e,d){const b=this.config=new Config(d),tt=getCanvas(e),nt=getChart(tt);if(nt)throw new Error("Canvas is already in use. Chart with ID '"+nt.id+"' must be destroyed before the canvas with ID '"+nt.canvas.id+"' can be reused.");const ot=b.createResolver(b.chartOptionScopes(),this.getContext());this.platform=new(b.platform||_detectPlatform(tt)),this.platform.updateConfig(b);const ht=this.platform.acquireContext(tt,ot.aspectRatio),mt=ht&&ht.canvas,gt=mt&&mt.height,yt=mt&&mt.width;if(this.id=uid(),this.ctx=ht,this.canvas=mt,this.width=yt,this.height=gt,this._options=ot,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce(ft=>this.update(ft),ot.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!ht||!mt){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:d},width:b,height:tt,_aspectRatio:nt}=this;return isNullOrUndef(e)?d&&nt?nt:tt?b/tt:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return registry}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(e,d){animator.running(this)?this._resizeBeforeDraw={width:e,height:d}:this._resize(e,d)}_resize(e,d){const b=this.options,tt=this.canvas,nt=b.maintainAspectRatio&&this.aspectRatio,ot=this.platform.getMaximumSize(tt,e,d,nt),ht=b.devicePixelRatio||this.platform.getDevicePixelRatio(),mt=this.width?"resize":"attach";this.width=ot.width,this.height=ot.height,this._aspectRatio=this.aspectRatio,retinaScale(this,ht,!0)&&(this.notifyPlugins("resize",{size:ot}),callback(b.onResize,[this,ot],this),this.attached&&this._doResize(mt)&&this.render())}ensureScalesHaveIDs(){const d=this.options.scales||{};each(d,(b,tt)=>{b.id=tt})}buildOrUpdateScales(){const e=this.options,d=e.scales,b=this.scales,tt=Object.keys(b).reduce((ot,ht)=>(ot[ht]=!1,ot),{});let nt=[];d&&(nt=nt.concat(Object.keys(d).map(ot=>{const ht=d[ot],mt=determineAxis(ot,ht),gt=mt==="r",yt=mt==="x";return{options:ht,dposition:gt?"chartArea":yt?"bottom":"left",dtype:gt?"radialLinear":yt?"category":"linear"}}))),each(nt,ot=>{const ht=ot.options,mt=ht.id,gt=determineAxis(mt,ht),yt=valueOrDefault(ht.type,ot.dtype);(ht.position===void 0||positionIsHorizontal(ht.position,gt)!==positionIsHorizontal(ot.dposition))&&(ht.position=ot.dposition),tt[mt]=!0;let ft=null;if(mt in b&&b[mt].type===yt)ft=b[mt];else{const st=registry.getScale(yt);ft=new st({id:mt,type:yt,ctx:this.ctx,chart:this}),b[ft.id]=ft}ft.init(ht,e)}),each(tt,(ot,ht)=>{ot||delete b[ht]}),each(b,ot=>{layouts.configure(this,ot,ot.options),layouts.addBox(this,ot)})}_updateMetasets(){const e=this._metasets,d=this.data.datasets.length,b=e.length;if(e.sort((tt,nt)=>tt.index-nt.index),b>d){for(let tt=d;tt<b;++tt)this._destroyDatasetMeta(tt);e.splice(d,b-d)}this._sortedMetasets=e.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:d}}=this;e.length>d.length&&delete this._stacks,e.forEach((b,tt)=>{d.filter(nt=>nt===b._dataset).length===0&&this._destroyDatasetMeta(tt)})}buildOrUpdateControllers(){const e=[],d=this.data.datasets;let b,tt;for(this._removeUnreferencedMetasets(),b=0,tt=d.length;b<tt;b++){const nt=d[b];let ot=this.getDatasetMeta(b);const ht=nt.type||this.config.type;if(ot.type&&ot.type!==ht&&(this._destroyDatasetMeta(b),ot=this.getDatasetMeta(b)),ot.type=ht,ot.indexAxis=nt.indexAxis||getIndexAxis(ht,this.options),ot.order=nt.order||0,ot.index=b,ot.label=""+nt.label,ot.visible=this.isDatasetVisible(b),ot.controller)ot.controller.updateIndex(b),ot.controller.linkScales();else{const mt=registry.getController(ht),{datasetElementType:gt,dataElementType:yt}=defaults.datasets[ht];Object.assign(mt,{dataElementType:registry.getElement(yt),datasetElementType:gt&&registry.getElement(gt)}),ot.controller=new mt(this,b),e.push(ot.controller)}}return this._updateMetasets(),e}_resetElements(){each(this.data.datasets,(e,d)=>{this.getDatasetMeta(d).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const d=this.config;d.update();const b=this._options=d.createResolver(d.chartOptionScopes(),this.getContext()),tt=this._animationsDisabled=!b.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const nt=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let ot=0;for(let gt=0,yt=this.data.datasets.length;gt<yt;gt++){const{controller:ft}=this.getDatasetMeta(gt),st=!tt&&nt.indexOf(ft)===-1;ft.buildOrUpdateElements(st),ot=Math.max(+ft.getMaxOverflow(),ot)}ot=this._minPadding=b.layout.autoPadding?ot:0,this._updateLayout(ot),tt||each(nt,gt=>{gt.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(compare2Level("z","_idx"));const{_active:ht,_lastEvent:mt}=this;mt?this._eventHandler(mt,!0):ht.length&&this._updateHoverStyles(ht,ht,!0),this.render()}_updateScales(){each(this.scales,e=>{layouts.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,d=new Set(Object.keys(this._listeners)),b=new Set(e.events);(!setsEqual(d,b)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,d=this._getUniformDataChanges()||[];for(const{method:b,start:tt,count:nt}of d){const ot=b==="_removeElements"?-nt:nt;moveNumericKeys(e,tt,ot)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const d=this.data.datasets.length,b=nt=>new Set(e.filter(ot=>ot[0]===nt).map((ot,ht)=>ht+","+ot.splice(1).join(","))),tt=b(0);for(let nt=1;nt<d;nt++)if(!setsEqual(tt,b(nt)))return;return Array.from(tt).map(nt=>nt.split(",")).map(nt=>({method:nt[1],start:+nt[2],count:+nt[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,e);const d=this.chartArea,b=d.width<=0||d.height<=0;this._layers=[],each(this.boxes,tt=>{b&&tt.position==="chartArea"||(tt.configure&&tt.configure(),this._layers.push(...tt._layers()))},this),this._layers.forEach((tt,nt)=>{tt._idx=nt}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let d=0,b=this.data.datasets.length;d<b;++d)this.getDatasetMeta(d).controller.configure();for(let d=0,b=this.data.datasets.length;d<b;++d)this._updateDataset(d,isFunction(e)?e({datasetIndex:d}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,d){const b=this.getDatasetMeta(e),tt={meta:b,index:e,mode:d,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",tt)!==!1&&(b.controller._update(d),tt.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",tt))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:b,height:tt}=this._resizeBeforeDraw;this._resize(b,tt),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const d=this._layers;for(e=0;e<d.length&&d[e].z<=0;++e)d[e].draw(this.chartArea);for(this._drawDatasets();e<d.length;++e)d[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const d=this._sortedMetasets,b=[];let tt,nt;for(tt=0,nt=d.length;tt<nt;++tt){const ot=d[tt];(!e||ot.visible)&&b.push(ot)}return b}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let d=e.length-1;d>=0;--d)this._drawDataset(e[d]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const d=this.ctx,b=e._clip,tt=!b.disabled,nt=getDatasetArea(e,this.chartArea),ot={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",ot)!==!1&&(tt&&clipArea(d,{left:b.left===!1?0:nt.left-b.left,right:b.right===!1?this.width:nt.right+b.right,top:b.top===!1?0:nt.top-b.top,bottom:b.bottom===!1?this.height:nt.bottom+b.bottom}),e.controller.draw(),tt&&unclipArea(d),ot.cancelable=!1,this.notifyPlugins("afterDatasetDraw",ot))}isPointInArea(e){return _isPointInArea(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,d,b,tt){const nt=Interaction.modes[d];return typeof nt=="function"?nt(this,e,b,tt):[]}getDatasetMeta(e){const d=this.data.datasets[e],b=this._metasets;let tt=b.filter(nt=>nt&&nt._dataset===d).pop();return tt||(tt={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:d&&d.order||0,index:e,_dataset:d,_parsed:[],_sorted:!1},b.push(tt)),tt}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const d=this.data.datasets[e];if(!d)return!1;const b=this.getDatasetMeta(e);return typeof b.hidden=="boolean"?!b.hidden:!d.hidden}setDatasetVisibility(e,d){const b=this.getDatasetMeta(e);b.hidden=!d}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,d,b){const tt=b?"show":"hide",nt=this.getDatasetMeta(e),ot=nt.controller._resolveAnimations(void 0,tt);defined(d)?(nt.data[d].hidden=!b,this.update()):(this.setDatasetVisibility(e,b),ot.update(nt,{visible:b}),this.update(ht=>ht.datasetIndex===e?tt:void 0))}hide(e,d){this._updateVisibility(e,d,!1)}show(e,d){this._updateVisibility(e,d,!0)}_destroyDatasetMeta(e){const d=this._metasets[e];d&&d.controller&&d.controller._destroy(),delete this._metasets[e]}_stop(){let e,d;for(this.stop(),animator.remove(this),e=0,d=this.data.datasets.length;e<d;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:d}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),clearCanvas(e,d),this.platform.releaseContext(d),this.canvas=null,this.ctx=null),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,d=this.platform,b=(nt,ot)=>{d.addEventListener(this,nt,ot),e[nt]=ot},tt=(nt,ot,ht)=>{nt.offsetX=ot,nt.offsetY=ht,this._eventHandler(nt)};each(this.options.events,nt=>b(nt,tt))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,d=this.platform,b=(mt,gt)=>{d.addEventListener(this,mt,gt),e[mt]=gt},tt=(mt,gt)=>{e[mt]&&(d.removeEventListener(this,mt,gt),delete e[mt])},nt=(mt,gt)=>{this.canvas&&this.resize(mt,gt)};let ot;const ht=()=>{tt("attach",ht),this.attached=!0,this.resize(),b("resize",nt),b("detach",ot)};ot=()=>{this.attached=!1,tt("resize",nt),this._stop(),this._resize(0,0),b("attach",ht)},d.isAttached(this.canvas)?ht():ot()}unbindEvents(){each(this._listeners,(e,d)=>{this.platform.removeEventListener(this,d,e)}),this._listeners={},each(this._responsiveListeners,(e,d)=>{this.platform.removeEventListener(this,d,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,d,b){const tt=b?"set":"remove";let nt,ot,ht,mt;for(d==="dataset"&&(nt=this.getDatasetMeta(e[0].datasetIndex),nt.controller["_"+tt+"DatasetHoverStyle"]()),ht=0,mt=e.length;ht<mt;++ht){ot=e[ht];const gt=ot&&this.getDatasetMeta(ot.datasetIndex).controller;gt&&gt[tt+"HoverStyle"](ot.element,ot.datasetIndex,ot.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const d=this._active||[],b=e.map(({datasetIndex:nt,index:ot})=>{const ht=this.getDatasetMeta(nt);if(!ht)throw new Error("No dataset found at index "+nt);return{datasetIndex:nt,element:ht.data[ot],index:ot}});!_elementsEqual(b,d)&&(this._active=b,this._lastEvent=null,this._updateHoverStyles(b,d))}notifyPlugins(e,d,b){return this._plugins.notify(this,e,d,b)}isPluginEnabled(e){return this._plugins._cache.filter(d=>d.plugin.id===e).length===1}_updateHoverStyles(e,d,b){const tt=this.options.hover,nt=(mt,gt)=>mt.filter(yt=>!gt.some(ft=>yt.datasetIndex===ft.datasetIndex&&yt.index===ft.index)),ot=nt(d,e),ht=b?e:nt(e,d);ot.length&&this.updateHoverStyle(ot,tt.mode,!1),ht.length&&tt.mode&&this.updateHoverStyle(ht,tt.mode,!0)}_eventHandler(e,d){const b={event:e,replay:d,cancelable:!0,inChartArea:this.isPointInArea(e)},tt=ot=>(ot.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",b,tt)===!1)return;const nt=this._handleEvent(e,d,b.inChartArea);return b.cancelable=!1,this.notifyPlugins("afterEvent",b,tt),(nt||b.changed)&&this.render(),this}_handleEvent(e,d,b){const{_active:tt=[],options:nt}=this,ot=d,ht=this._getActiveElements(e,tt,b,ot),mt=_isClickEvent(e),gt=determineLastEvent(e,this._lastEvent,b,mt);b&&(this._lastEvent=null,callback(nt.onHover,[e,ht,this],this),mt&&callback(nt.onClick,[e,ht,this],this));const yt=!_elementsEqual(ht,tt);return(yt||d)&&(this._active=ht,this._updateHoverStyles(ht,tt,d)),this._lastEvent=gt,yt}_getActiveElements(e,d,b,tt){if(e.type==="mouseout")return[];if(!b)return d;const nt=this.options.hover;return this.getElementsAtEventForMode(e,nt.mode,nt,tt)}},Rn(oo,"defaults",defaults),Rn(oo,"instances",instances),Rn(oo,"overrides",overrides),Rn(oo,"registry",registry),Rn(oo,"version",version),Rn(oo,"getChart",getChart),oo);function invalidatePlugins(){return each(Chart$1.instances,s=>s._plugins.invalidate())}function getBarBounds(s,e){const{x:d,y:b,base:tt,width:nt,height:ot}=s.getProps(["x","y","base","width","height"],e);let ht,mt,gt,yt,ft;return s.horizontal?(ft=ot/2,ht=Math.min(d,tt),mt=Math.max(d,tt),gt=b-ft,yt=b+ft):(ft=nt/2,ht=d-ft,mt=d+ft,gt=Math.min(b,tt),yt=Math.max(b,tt)),{left:ht,top:gt,right:mt,bottom:yt}}function skipOrLimit(s,e,d,b){return s?0:_limitValue(e,d,b)}function parseBorderWidth(s,e,d){const b=s.options.borderWidth,tt=s.borderSkipped,nt=toTRBL(b);return{t:skipOrLimit(tt.top,nt.top,0,d),r:skipOrLimit(tt.right,nt.right,0,e),b:skipOrLimit(tt.bottom,nt.bottom,0,d),l:skipOrLimit(tt.left,nt.left,0,e)}}function parseBorderRadius(s,e,d){const{enableBorderRadius:b}=s.getProps(["enableBorderRadius"]),tt=s.options.borderRadius,nt=toTRBLCorners(tt),ot=Math.min(e,d),ht=s.borderSkipped,mt=b||isObject(tt);return{topLeft:skipOrLimit(!mt||ht.top||ht.left,nt.topLeft,0,ot),topRight:skipOrLimit(!mt||ht.top||ht.right,nt.topRight,0,ot),bottomLeft:skipOrLimit(!mt||ht.bottom||ht.left,nt.bottomLeft,0,ot),bottomRight:skipOrLimit(!mt||ht.bottom||ht.right,nt.bottomRight,0,ot)}}function boundingRects(s){const e=getBarBounds(s),d=e.right-e.left,b=e.bottom-e.top,tt=parseBorderWidth(s,d/2,b/2),nt=parseBorderRadius(s,d/2,b/2);return{outer:{x:e.left,y:e.top,w:d,h:b,radius:nt},inner:{x:e.left+tt.l,y:e.top+tt.t,w:d-tt.l-tt.r,h:b-tt.t-tt.b,radius:{topLeft:Math.max(0,nt.topLeft-Math.max(tt.t,tt.l)),topRight:Math.max(0,nt.topRight-Math.max(tt.t,tt.r)),bottomLeft:Math.max(0,nt.bottomLeft-Math.max(tt.b,tt.l)),bottomRight:Math.max(0,nt.bottomRight-Math.max(tt.b,tt.r))}}}}function inRange(s,e,d,b){const tt=e===null,nt=d===null,ht=s&&!(tt&&nt)&&getBarBounds(s,b);return ht&&(tt||_isBetween(e,ht.left,ht.right))&&(nt||_isBetween(d,ht.top,ht.bottom))}function hasRadius(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function addNormalRectPath(s,e){s.rect(e.x,e.y,e.w,e.h)}function inflateRect(s,e,d={}){const b=s.x!==d.x?-e:0,tt=s.y!==d.y?-e:0,nt=(s.x+s.w!==d.x+d.w?e:0)-b,ot=(s.y+s.h!==d.y+d.h?e:0)-tt;return{x:s.x+b,y:s.y+tt,w:s.w+nt,h:s.h+ot,radius:s.radius}}class BarElement extends Element$1{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:d,options:{borderColor:b,backgroundColor:tt}}=this,{inner:nt,outer:ot}=boundingRects(this),ht=hasRadius(ot.radius)?addRoundedRectPath:addNormalRectPath;e.save(),(ot.w!==nt.w||ot.h!==nt.h)&&(e.beginPath(),ht(e,inflateRect(ot,d,nt)),e.clip(),ht(e,inflateRect(nt,-d,ot)),e.fillStyle=b,e.fill("evenodd")),e.beginPath(),ht(e,inflateRect(nt,d)),e.fillStyle=tt,e.fill(),e.restore()}inRange(e,d,b){return inRange(this,e,d,b)}inXRange(e,d){return inRange(this,e,null,d)}inYRange(e,d){return inRange(this,null,e,d)}getCenterPoint(e){const{x:d,y:b,base:tt,horizontal:nt}=this.getProps(["x","y","base","horizontal"],e);return{x:nt?(d+tt)/2:d,y:nt?b:(b+tt)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Rn(BarElement,"id","bar"),Rn(BarElement,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Rn(BarElement,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const getBoxSize=(s,e)=>{let{boxHeight:d=e,boxWidth:b=e}=s;return s.usePointStyle&&(d=Math.min(d,e),b=s.pointStyleWidth||Math.min(b,e)),{boxWidth:b,boxHeight:d,itemHeight:Math.max(e,d)}},itemsEqual=(s,e)=>s!==null&&e!==null&&s.datasetIndex===e.datasetIndex&&s.index===e.index;class Legend extends Element$1{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,d,b){this.maxWidth=e,this.maxHeight=d,this._margins=b,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let d=callback(e.generateLabels,[this.chart],this)||[];e.filter&&(d=d.filter(b=>e.filter(b,this.chart.data))),e.sort&&(d=d.sort((b,tt)=>e.sort(b,tt,this.chart.data))),this.options.reverse&&d.reverse(),this.legendItems=d}fit(){const{options:e,ctx:d}=this;if(!e.display){this.width=this.height=0;return}const b=e.labels,tt=toFont(b.font),nt=tt.size,ot=this._computeTitleHeight(),{boxWidth:ht,itemHeight:mt}=getBoxSize(b,nt);let gt,yt;d.font=tt.string,this.isHorizontal()?(gt=this.maxWidth,yt=this._fitRows(ot,nt,ht,mt)+10):(yt=this.maxHeight,gt=this._fitCols(ot,tt,ht,mt)+10),this.width=Math.min(gt,e.maxWidth||this.maxWidth),this.height=Math.min(yt,e.maxHeight||this.maxHeight)}_fitRows(e,d,b,tt){const{ctx:nt,maxWidth:ot,options:{labels:{padding:ht}}}=this,mt=this.legendHitBoxes=[],gt=this.lineWidths=[0],yt=tt+ht;let ft=e;nt.textAlign="left",nt.textBaseline="middle";let st=-1,bt=-yt;return this.legendItems.forEach((vt,xt)=>{const wt=b+d/2+nt.measureText(vt.text).width;(xt===0||gt[gt.length-1]+wt+2*ht>ot)&&(ft+=yt,gt[gt.length-(xt>0?0:1)]=0,bt+=yt,st++),mt[xt]={left:0,top:bt,row:st,width:wt,height:tt},gt[gt.length-1]+=wt+ht}),ft}_fitCols(e,d,b,tt){const{ctx:nt,maxHeight:ot,options:{labels:{padding:ht}}}=this,mt=this.legendHitBoxes=[],gt=this.columnSizes=[],yt=ot-e;let ft=ht,st=0,bt=0,vt=0,xt=0;return this.legendItems.forEach((wt,St)=>{const{itemWidth:_t,itemHeight:Tt}=calculateItemSize(b,d,nt,wt,tt);St>0&&bt+Tt+2*ht>yt&&(ft+=st+ht,gt.push({width:st,height:bt}),vt+=st+ht,xt++,st=bt=0),mt[St]={left:vt,top:bt,col:xt,width:_t,height:Tt},st=Math.max(st,_t),bt+=Tt+ht}),ft+=st,gt.push({width:st,height:bt}),ft}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:d,options:{align:b,labels:{padding:tt},rtl:nt}}=this,ot=getRtlAdapter(nt,this.left,this.width);if(this.isHorizontal()){let ht=0,mt=_alignStartEnd(b,this.left+tt,this.right-this.lineWidths[ht]);for(const gt of d)ht!==gt.row&&(ht=gt.row,mt=_alignStartEnd(b,this.left+tt,this.right-this.lineWidths[ht])),gt.top+=this.top+e+tt,gt.left=ot.leftForLtr(ot.x(mt),gt.width),mt+=gt.width+tt}else{let ht=0,mt=_alignStartEnd(b,this.top+e+tt,this.bottom-this.columnSizes[ht].height);for(const gt of d)gt.col!==ht&&(ht=gt.col,mt=_alignStartEnd(b,this.top+e+tt,this.bottom-this.columnSizes[ht].height)),gt.top=mt,gt.left+=this.left+tt,gt.left=ot.leftForLtr(ot.x(gt.left),gt.width),mt+=gt.height+tt}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;clipArea(e,this),this._draw(),unclipArea(e)}}_draw(){const{options:e,columnSizes:d,lineWidths:b,ctx:tt}=this,{align:nt,labels:ot}=e,ht=defaults.color,mt=getRtlAdapter(e.rtl,this.left,this.width),gt=toFont(ot.font),{padding:yt}=ot,ft=gt.size,st=ft/2;let bt;this.drawTitle(),tt.textAlign=mt.textAlign("left"),tt.textBaseline="middle",tt.lineWidth=.5,tt.font=gt.string;const{boxWidth:vt,boxHeight:xt,itemHeight:wt}=getBoxSize(ot,ft),St=function(Mt,Ot,Dt){if(isNaN(vt)||vt<=0||isNaN(xt)||xt<0)return;tt.save();const At=valueOrDefault(Dt.lineWidth,1);if(tt.fillStyle=valueOrDefault(Dt.fillStyle,ht),tt.lineCap=valueOrDefault(Dt.lineCap,"butt"),tt.lineDashOffset=valueOrDefault(Dt.lineDashOffset,0),tt.lineJoin=valueOrDefault(Dt.lineJoin,"miter"),tt.lineWidth=At,tt.strokeStyle=valueOrDefault(Dt.strokeStyle,ht),tt.setLineDash(valueOrDefault(Dt.lineDash,[])),ot.usePointStyle){const It={radius:xt*Math.SQRT2/2,pointStyle:Dt.pointStyle,rotation:Dt.rotation,borderWidth:At},jt=mt.xPlus(Mt,vt/2),qt=Ot+st;drawPointLegend(tt,It,jt,qt,ot.pointStyleWidth&&vt)}else{const It=Ot+Math.max((ft-xt)/2,0),jt=mt.leftForLtr(Mt,vt),qt=toTRBLCorners(Dt.borderRadius);tt.beginPath(),Object.values(qt).some(Jt=>Jt!==0)?addRoundedRectPath(tt,{x:jt,y:It,w:vt,h:xt,radius:qt}):tt.rect(jt,It,vt,xt),tt.fill(),At!==0&&tt.stroke()}tt.restore()},_t=function(Mt,Ot,Dt){renderText(tt,Dt.text,Mt,Ot+wt/2,gt,{strikethrough:Dt.hidden,textAlign:mt.textAlign(Dt.textAlign)})},Tt=this.isHorizontal(),Et=this._computeTitleHeight();Tt?bt={x:_alignStartEnd(nt,this.left+yt,this.right-b[0]),y:this.top+yt+Et,line:0}:bt={x:this.left+yt,y:_alignStartEnd(nt,this.top+Et+yt,this.bottom-d[0].height),line:0},overrideTextDirection(this.ctx,e.textDirection);const kt=wt+yt;this.legendItems.forEach((Mt,Ot)=>{tt.strokeStyle=Mt.fontColor,tt.fillStyle=Mt.fontColor;const Dt=tt.measureText(Mt.text).width,At=mt.textAlign(Mt.textAlign||(Mt.textAlign=ot.textAlign)),It=vt+st+Dt;let jt=bt.x,qt=bt.y;mt.setWidth(this.width),Tt?Ot>0&&jt+It+yt>this.right&&(qt=bt.y+=kt,bt.line++,jt=bt.x=_alignStartEnd(nt,this.left+yt,this.right-b[bt.line])):Ot>0&&qt+kt>this.bottom&&(jt=bt.x=jt+d[bt.line].width+yt,bt.line++,qt=bt.y=_alignStartEnd(nt,this.top+Et+yt,this.bottom-d[bt.line].height));const Jt=mt.x(jt);if(St(Jt,qt,Mt),jt=_textX(At,jt+vt+st,Tt?jt+It:this.right,e.rtl),_t(mt.x(jt),qt,Mt),Tt)bt.x+=It+yt;else if(typeof Mt.text!="string"){const Bt=gt.lineHeight;bt.y+=calculateLegendItemHeight(Mt,Bt)+yt}else bt.y+=kt}),restoreTextDirection(this.ctx,e.textDirection)}drawTitle(){const e=this.options,d=e.title,b=toFont(d.font),tt=toPadding(d.padding);if(!d.display)return;const nt=getRtlAdapter(e.rtl,this.left,this.width),ot=this.ctx,ht=d.position,mt=b.size/2,gt=tt.top+mt;let yt,ft=this.left,st=this.width;if(this.isHorizontal())st=Math.max(...this.lineWidths),yt=this.top+gt,ft=_alignStartEnd(e.align,ft,this.right-st);else{const vt=this.columnSizes.reduce((xt,wt)=>Math.max(xt,wt.height),0);yt=gt+_alignStartEnd(e.align,this.top,this.bottom-vt-e.labels.padding-this._computeTitleHeight())}const bt=_alignStartEnd(ht,ft,ft+st);ot.textAlign=nt.textAlign(_toLeftRightCenter(ht)),ot.textBaseline="middle",ot.strokeStyle=d.color,ot.fillStyle=d.color,ot.font=b.string,renderText(ot,d.text,bt,yt,b)}_computeTitleHeight(){const e=this.options.title,d=toFont(e.font),b=toPadding(e.padding);return e.display?d.lineHeight+b.height:0}_getLegendItemAt(e,d){let b,tt,nt;if(_isBetween(e,this.left,this.right)&&_isBetween(d,this.top,this.bottom)){for(nt=this.legendHitBoxes,b=0;b<nt.length;++b)if(tt=nt[b],_isBetween(e,tt.left,tt.left+tt.width)&&_isBetween(d,tt.top,tt.top+tt.height))return this.legendItems[b]}return null}handleEvent(e){const d=this.options;if(!isListened(e.type,d))return;const b=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const tt=this._hoveredItem,nt=itemsEqual(tt,b);tt&&!nt&&callback(d.onLeave,[e,tt,this],this),this._hoveredItem=b,b&&!nt&&callback(d.onHover,[e,b,this],this)}else b&&callback(d.onClick,[e,b,this],this)}}function calculateItemSize(s,e,d,b,tt){const nt=calculateItemWidth(b,s,e,d),ot=calculateItemHeight(tt,b,e.lineHeight);return{itemWidth:nt,itemHeight:ot}}function calculateItemWidth(s,e,d,b){let tt=s.text;return tt&&typeof tt!="string"&&(tt=tt.reduce((nt,ot)=>nt.length>ot.length?nt:ot)),e+d.size/2+b.measureText(tt).width}function calculateItemHeight(s,e,d){let b=s;return typeof e.text!="string"&&(b=calculateLegendItemHeight(e,d)),b}function calculateLegendItemHeight(s,e){const d=s.text?s.text.length:0;return e*d}function isListened(s,e){return!!((s==="mousemove"||s==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(s==="click"||s==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(s,e,d){const b=s.legend=new Legend({ctx:s.ctx,options:d,chart:s});layouts.configure(s,b,d),layouts.addBox(s,b)},stop(s){layouts.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,e,d){const b=s.legend;layouts.configure(s,b,d),b.options=d},afterUpdate(s){const e=s.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(s,e){e.replay||s.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,e,d){const b=e.datasetIndex,tt=d.chart;tt.isDatasetVisible(b)?(tt.hide(b),e.hidden=!0):(tt.show(b),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const e=s.data.datasets,{labels:{usePointStyle:d,pointStyle:b,textAlign:tt,color:nt,useBorderRadius:ot,borderRadius:ht}}=s.legend.options;return s._getSortedDatasetMetas().map(mt=>{const gt=mt.controller.getStyle(d?0:void 0),yt=toPadding(gt.borderWidth);return{text:e[mt.index].label,fillStyle:gt.backgroundColor,fontColor:nt,hidden:!mt.visible,lineCap:gt.borderCapStyle,lineDash:gt.borderDash,lineDashOffset:gt.borderDashOffset,lineJoin:gt.borderJoinStyle,lineWidth:(yt.width+yt.height)/4,strokeStyle:gt.borderColor,pointStyle:b||gt.pointStyle,rotation:gt.rotation,textAlign:tt||gt.textAlign,borderRadius:ot&&(ht||gt.borderRadius),datasetIndex:mt.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class Title extends Element$1{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,d){const b=this.options;if(this.left=0,this.top=0,!b.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=d;const tt=isArray(b.text)?b.text.length:1;this._padding=toPadding(b.padding);const nt=tt*toFont(b.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=nt:this.width=nt}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:d,left:b,bottom:tt,right:nt,options:ot}=this,ht=ot.align;let mt=0,gt,yt,ft;return this.isHorizontal()?(yt=_alignStartEnd(ht,b,nt),ft=d+e,gt=nt-b):(ot.position==="left"?(yt=b+e,ft=_alignStartEnd(ht,tt,d),mt=PI*-.5):(yt=nt-e,ft=_alignStartEnd(ht,d,tt),mt=PI*.5),gt=tt-d),{titleX:yt,titleY:ft,maxWidth:gt,rotation:mt}}draw(){const e=this.ctx,d=this.options;if(!d.display)return;const b=toFont(d.font),nt=b.lineHeight/2+this._padding.top,{titleX:ot,titleY:ht,maxWidth:mt,rotation:gt}=this._drawArgs(nt);renderText(e,d.text,0,0,b,{color:d.color,maxWidth:mt,rotation:gt,textAlign:_toLeftRightCenter(d.align),textBaseline:"middle",translation:[ot,ht]})}}function createTitle(s,e){const d=new Title({ctx:s.ctx,options:e,chart:s});layouts.configure(s,d,e),layouts.addBox(s,d),s.titleBlock=d}var plugin_title={id:"title",_element:Title,start(s,e,d){createTitle(s,d)},stop(s){const e=s.titleBlock;layouts.removeBox(s,e),delete s.titleBlock},beforeUpdate(s,e,d){const b=s.titleBlock;layouts.configure(s,b,d),b.options=d},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(s){if(!s.length)return!1;let e,d,b=new Set,tt=0,nt=0;for(e=0,d=s.length;e<d;++e){const ht=s[e].element;if(ht&&ht.hasValue()){const mt=ht.tooltipPosition();b.add(mt.x),tt+=mt.y,++nt}}return{x:[...b].reduce((ht,mt)=>ht+mt)/b.size,y:tt/nt}},nearest(s,e){if(!s.length)return!1;let d=e.x,b=e.y,tt=Number.POSITIVE_INFINITY,nt,ot,ht;for(nt=0,ot=s.length;nt<ot;++nt){const mt=s[nt].element;if(mt&&mt.hasValue()){const gt=mt.getCenterPoint(),yt=distanceBetweenPoints(e,gt);yt<tt&&(tt=yt,ht=mt)}}if(ht){const mt=ht.tooltipPosition();d=mt.x,b=mt.y}return{x:d,y:b}}};function pushOrConcat(s,e){return e&&(isArray(e)?Array.prototype.push.apply(s,e):s.push(e)),s}function splitNewlines(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function createTooltipItem(s,e){const{element:d,datasetIndex:b,index:tt}=e,nt=s.getDatasetMeta(b).controller,{label:ot,value:ht}=nt.getLabelAndValue(tt);return{chart:s,label:ot,parsed:nt.getParsed(tt),raw:s.data.datasets[b].data[tt],formattedValue:ht,dataset:nt.getDataset(),dataIndex:tt,datasetIndex:b,element:d}}function getTooltipSize(s,e){const d=s.chart.ctx,{body:b,footer:tt,title:nt}=s,{boxWidth:ot,boxHeight:ht}=e,mt=toFont(e.bodyFont),gt=toFont(e.titleFont),yt=toFont(e.footerFont),ft=nt.length,st=tt.length,bt=b.length,vt=toPadding(e.padding);let xt=vt.height,wt=0,St=b.reduce((Et,kt)=>Et+kt.before.length+kt.lines.length+kt.after.length,0);if(St+=s.beforeBody.length+s.afterBody.length,ft&&(xt+=ft*gt.lineHeight+(ft-1)*e.titleSpacing+e.titleMarginBottom),St){const Et=e.displayColors?Math.max(ht,mt.lineHeight):mt.lineHeight;xt+=bt*Et+(St-bt)*mt.lineHeight+(St-1)*e.bodySpacing}st&&(xt+=e.footerMarginTop+st*yt.lineHeight+(st-1)*e.footerSpacing);let _t=0;const Tt=function(Et){wt=Math.max(wt,d.measureText(Et).width+_t)};return d.save(),d.font=gt.string,each(s.title,Tt),d.font=mt.string,each(s.beforeBody.concat(s.afterBody),Tt),_t=e.displayColors?ot+2+e.boxPadding:0,each(b,Et=>{each(Et.before,Tt),each(Et.lines,Tt),each(Et.after,Tt)}),_t=0,d.font=yt.string,each(s.footer,Tt),d.restore(),wt+=vt.width,{width:wt,height:xt}}function determineYAlign(s,e){const{y:d,height:b}=e;return d<b/2?"top":d>s.height-b/2?"bottom":"center"}function doesNotFitWithAlign(s,e,d,b){const{x:tt,width:nt}=b,ot=d.caretSize+d.caretPadding;if(s==="left"&&tt+nt+ot>e.width||s==="right"&&tt-nt-ot<0)return!0}function determineXAlign(s,e,d,b){const{x:tt,width:nt}=d,{width:ot,chartArea:{left:ht,right:mt}}=s;let gt="center";return b==="center"?gt=tt<=(ht+mt)/2?"left":"right":tt<=nt/2?gt="left":tt>=ot-nt/2&&(gt="right"),doesNotFitWithAlign(gt,s,e,d)&&(gt="center"),gt}function determineAlignment(s,e,d){const b=d.yAlign||e.yAlign||determineYAlign(s,d);return{xAlign:d.xAlign||e.xAlign||determineXAlign(s,e,d,b),yAlign:b}}function alignX(s,e){let{x:d,width:b}=s;return e==="right"?d-=b:e==="center"&&(d-=b/2),d}function alignY(s,e,d){let{y:b,height:tt}=s;return e==="top"?b+=d:e==="bottom"?b-=tt+d:b-=tt/2,b}function getBackgroundPoint(s,e,d,b){const{caretSize:tt,caretPadding:nt,cornerRadius:ot}=s,{xAlign:ht,yAlign:mt}=d,gt=tt+nt,{topLeft:yt,topRight:ft,bottomLeft:st,bottomRight:bt}=toTRBLCorners(ot);let vt=alignX(e,ht);const xt=alignY(e,mt,gt);return mt==="center"?ht==="left"?vt+=gt:ht==="right"&&(vt-=gt):ht==="left"?vt-=Math.max(yt,st)+tt:ht==="right"&&(vt+=Math.max(ft,bt)+tt),{x:_limitValue(vt,0,b.width-e.width),y:_limitValue(xt,0,b.height-e.height)}}function getAlignedX(s,e,d){const b=toPadding(d.padding);return e==="center"?s.x+s.width/2:e==="right"?s.x+s.width-b.right:s.x+b.left}function getBeforeAfterBodyLines(s){return pushOrConcat([],splitNewlines(s))}function createTooltipContext(s,e,d){return createContext(s,{tooltip:e,tooltipItems:d,type:"tooltip"})}function overrideCallbacks(s,e){const d=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return d?s.override(d):s}const defaultCallbacks={beforeTitle:noop$1,title(s){if(s.length>0){const e=s[0],d=e.chart.data.labels,b=d?d.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(b>0&&e.dataIndex<b)return d[e.dataIndex]}return""},afterTitle:noop$1,beforeBody:noop$1,beforeLabel:noop$1,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let e=s.dataset.label||"";e&&(e+=": ");const d=s.formattedValue;return isNullOrUndef(d)||(e+=d),e},labelColor(s){const d=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:d.borderColor,backgroundColor:d.backgroundColor,borderWidth:d.borderWidth,borderDash:d.borderDash,borderDashOffset:d.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const d=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:d.pointStyle,rotation:d.rotation}},afterLabel:noop$1,afterBody:noop$1,beforeFooter:noop$1,footer:noop$1,afterFooter:noop$1};function invokeCallbackWithFallback(s,e,d,b){const tt=s[e].call(d,b);return typeof tt>"u"?defaultCallbacks[e].call(d,b):tt}class Tooltip extends Element$1{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const d=this.chart,b=this.options.setContext(this.getContext()),tt=b.enabled&&d.options.animation&&b.animations,nt=new Animations(this.chart,tt);return tt._cacheable&&(this._cachedAnimations=Object.freeze(nt)),nt}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,d){const{callbacks:b}=d,tt=invokeCallbackWithFallback(b,"beforeTitle",this,e),nt=invokeCallbackWithFallback(b,"title",this,e),ot=invokeCallbackWithFallback(b,"afterTitle",this,e);let ht=[];return ht=pushOrConcat(ht,splitNewlines(tt)),ht=pushOrConcat(ht,splitNewlines(nt)),ht=pushOrConcat(ht,splitNewlines(ot)),ht}getBeforeBody(e,d){return getBeforeAfterBodyLines(invokeCallbackWithFallback(d.callbacks,"beforeBody",this,e))}getBody(e,d){const{callbacks:b}=d,tt=[];return each(e,nt=>{const ot={before:[],lines:[],after:[]},ht=overrideCallbacks(b,nt);pushOrConcat(ot.before,splitNewlines(invokeCallbackWithFallback(ht,"beforeLabel",this,nt))),pushOrConcat(ot.lines,invokeCallbackWithFallback(ht,"label",this,nt)),pushOrConcat(ot.after,splitNewlines(invokeCallbackWithFallback(ht,"afterLabel",this,nt))),tt.push(ot)}),tt}getAfterBody(e,d){return getBeforeAfterBodyLines(invokeCallbackWithFallback(d.callbacks,"afterBody",this,e))}getFooter(e,d){const{callbacks:b}=d,tt=invokeCallbackWithFallback(b,"beforeFooter",this,e),nt=invokeCallbackWithFallback(b,"footer",this,e),ot=invokeCallbackWithFallback(b,"afterFooter",this,e);let ht=[];return ht=pushOrConcat(ht,splitNewlines(tt)),ht=pushOrConcat(ht,splitNewlines(nt)),ht=pushOrConcat(ht,splitNewlines(ot)),ht}_createItems(e){const d=this._active,b=this.chart.data,tt=[],nt=[],ot=[];let ht=[],mt,gt;for(mt=0,gt=d.length;mt<gt;++mt)ht.push(createTooltipItem(this.chart,d[mt]));return e.filter&&(ht=ht.filter((yt,ft,st)=>e.filter(yt,ft,st,b))),e.itemSort&&(ht=ht.sort((yt,ft)=>e.itemSort(yt,ft,b))),each(ht,yt=>{const ft=overrideCallbacks(e.callbacks,yt);tt.push(invokeCallbackWithFallback(ft,"labelColor",this,yt)),nt.push(invokeCallbackWithFallback(ft,"labelPointStyle",this,yt)),ot.push(invokeCallbackWithFallback(ft,"labelTextColor",this,yt))}),this.labelColors=tt,this.labelPointStyles=nt,this.labelTextColors=ot,this.dataPoints=ht,ht}update(e,d){const b=this.options.setContext(this.getContext()),tt=this._active;let nt,ot=[];if(!tt.length)this.opacity!==0&&(nt={opacity:0});else{const ht=positioners[b.position].call(this,tt,this._eventPosition);ot=this._createItems(b),this.title=this.getTitle(ot,b),this.beforeBody=this.getBeforeBody(ot,b),this.body=this.getBody(ot,b),this.afterBody=this.getAfterBody(ot,b),this.footer=this.getFooter(ot,b);const mt=this._size=getTooltipSize(this,b),gt=Object.assign({},ht,mt),yt=determineAlignment(this.chart,b,gt),ft=getBackgroundPoint(b,gt,yt,this.chart);this.xAlign=yt.xAlign,this.yAlign=yt.yAlign,nt={opacity:1,x:ft.x,y:ft.y,width:mt.width,height:mt.height,caretX:ht.x,caretY:ht.y}}this._tooltipItems=ot,this.$context=void 0,nt&&this._resolveAnimations().update(this,nt),e&&b.external&&b.external.call(this,{chart:this.chart,tooltip:this,replay:d})}drawCaret(e,d,b,tt){const nt=this.getCaretPosition(e,b,tt);d.lineTo(nt.x1,nt.y1),d.lineTo(nt.x2,nt.y2),d.lineTo(nt.x3,nt.y3)}getCaretPosition(e,d,b){const{xAlign:tt,yAlign:nt}=this,{caretSize:ot,cornerRadius:ht}=b,{topLeft:mt,topRight:gt,bottomLeft:yt,bottomRight:ft}=toTRBLCorners(ht),{x:st,y:bt}=e,{width:vt,height:xt}=d;let wt,St,_t,Tt,Et,kt;return nt==="center"?(Et=bt+xt/2,tt==="left"?(wt=st,St=wt-ot,Tt=Et+ot,kt=Et-ot):(wt=st+vt,St=wt+ot,Tt=Et-ot,kt=Et+ot),_t=wt):(tt==="left"?St=st+Math.max(mt,yt)+ot:tt==="right"?St=st+vt-Math.max(gt,ft)-ot:St=this.caretX,nt==="top"?(Tt=bt,Et=Tt-ot,wt=St-ot,_t=St+ot):(Tt=bt+xt,Et=Tt+ot,wt=St+ot,_t=St-ot),kt=Tt),{x1:wt,x2:St,x3:_t,y1:Tt,y2:Et,y3:kt}}drawTitle(e,d,b){const tt=this.title,nt=tt.length;let ot,ht,mt;if(nt){const gt=getRtlAdapter(b.rtl,this.x,this.width);for(e.x=getAlignedX(this,b.titleAlign,b),d.textAlign=gt.textAlign(b.titleAlign),d.textBaseline="middle",ot=toFont(b.titleFont),ht=b.titleSpacing,d.fillStyle=b.titleColor,d.font=ot.string,mt=0;mt<nt;++mt)d.fillText(tt[mt],gt.x(e.x),e.y+ot.lineHeight/2),e.y+=ot.lineHeight+ht,mt+1===nt&&(e.y+=b.titleMarginBottom-ht)}}_drawColorBox(e,d,b,tt,nt){const ot=this.labelColors[b],ht=this.labelPointStyles[b],{boxHeight:mt,boxWidth:gt}=nt,yt=toFont(nt.bodyFont),ft=getAlignedX(this,"left",nt),st=tt.x(ft),bt=mt<yt.lineHeight?(yt.lineHeight-mt)/2:0,vt=d.y+bt;if(nt.usePointStyle){const xt={radius:Math.min(gt,mt)/2,pointStyle:ht.pointStyle,rotation:ht.rotation,borderWidth:1},wt=tt.leftForLtr(st,gt)+gt/2,St=vt+mt/2;e.strokeStyle=nt.multiKeyBackground,e.fillStyle=nt.multiKeyBackground,drawPoint(e,xt,wt,St),e.strokeStyle=ot.borderColor,e.fillStyle=ot.backgroundColor,drawPoint(e,xt,wt,St)}else{e.lineWidth=isObject(ot.borderWidth)?Math.max(...Object.values(ot.borderWidth)):ot.borderWidth||1,e.strokeStyle=ot.borderColor,e.setLineDash(ot.borderDash||[]),e.lineDashOffset=ot.borderDashOffset||0;const xt=tt.leftForLtr(st,gt),wt=tt.leftForLtr(tt.xPlus(st,1),gt-2),St=toTRBLCorners(ot.borderRadius);Object.values(St).some(_t=>_t!==0)?(e.beginPath(),e.fillStyle=nt.multiKeyBackground,addRoundedRectPath(e,{x:xt,y:vt,w:gt,h:mt,radius:St}),e.fill(),e.stroke(),e.fillStyle=ot.backgroundColor,e.beginPath(),addRoundedRectPath(e,{x:wt,y:vt+1,w:gt-2,h:mt-2,radius:St}),e.fill()):(e.fillStyle=nt.multiKeyBackground,e.fillRect(xt,vt,gt,mt),e.strokeRect(xt,vt,gt,mt),e.fillStyle=ot.backgroundColor,e.fillRect(wt,vt+1,gt-2,mt-2))}e.fillStyle=this.labelTextColors[b]}drawBody(e,d,b){const{body:tt}=this,{bodySpacing:nt,bodyAlign:ot,displayColors:ht,boxHeight:mt,boxWidth:gt,boxPadding:yt}=b,ft=toFont(b.bodyFont);let st=ft.lineHeight,bt=0;const vt=getRtlAdapter(b.rtl,this.x,this.width),xt=function(Dt){d.fillText(Dt,vt.x(e.x+bt),e.y+st/2),e.y+=st+nt},wt=vt.textAlign(ot);let St,_t,Tt,Et,kt,Mt,Ot;for(d.textAlign=ot,d.textBaseline="middle",d.font=ft.string,e.x=getAlignedX(this,wt,b),d.fillStyle=b.bodyColor,each(this.beforeBody,xt),bt=ht&&wt!=="right"?ot==="center"?gt/2+yt:gt+2+yt:0,Et=0,Mt=tt.length;Et<Mt;++Et){for(St=tt[Et],_t=this.labelTextColors[Et],d.fillStyle=_t,each(St.before,xt),Tt=St.lines,ht&&Tt.length&&(this._drawColorBox(d,e,Et,vt,b),st=Math.max(ft.lineHeight,mt)),kt=0,Ot=Tt.length;kt<Ot;++kt)xt(Tt[kt]),st=ft.lineHeight;each(St.after,xt)}bt=0,st=ft.lineHeight,each(this.afterBody,xt),e.y-=nt}drawFooter(e,d,b){const tt=this.footer,nt=tt.length;let ot,ht;if(nt){const mt=getRtlAdapter(b.rtl,this.x,this.width);for(e.x=getAlignedX(this,b.footerAlign,b),e.y+=b.footerMarginTop,d.textAlign=mt.textAlign(b.footerAlign),d.textBaseline="middle",ot=toFont(b.footerFont),d.fillStyle=b.footerColor,d.font=ot.string,ht=0;ht<nt;++ht)d.fillText(tt[ht],mt.x(e.x),e.y+ot.lineHeight/2),e.y+=ot.lineHeight+b.footerSpacing}}drawBackground(e,d,b,tt){const{xAlign:nt,yAlign:ot}=this,{x:ht,y:mt}=e,{width:gt,height:yt}=b,{topLeft:ft,topRight:st,bottomLeft:bt,bottomRight:vt}=toTRBLCorners(tt.cornerRadius);d.fillStyle=tt.backgroundColor,d.strokeStyle=tt.borderColor,d.lineWidth=tt.borderWidth,d.beginPath(),d.moveTo(ht+ft,mt),ot==="top"&&this.drawCaret(e,d,b,tt),d.lineTo(ht+gt-st,mt),d.quadraticCurveTo(ht+gt,mt,ht+gt,mt+st),ot==="center"&&nt==="right"&&this.drawCaret(e,d,b,tt),d.lineTo(ht+gt,mt+yt-vt),d.quadraticCurveTo(ht+gt,mt+yt,ht+gt-vt,mt+yt),ot==="bottom"&&this.drawCaret(e,d,b,tt),d.lineTo(ht+bt,mt+yt),d.quadraticCurveTo(ht,mt+yt,ht,mt+yt-bt),ot==="center"&&nt==="left"&&this.drawCaret(e,d,b,tt),d.lineTo(ht,mt+ft),d.quadraticCurveTo(ht,mt,ht+ft,mt),d.closePath(),d.fill(),tt.borderWidth>0&&d.stroke()}_updateAnimationTarget(e){const d=this.chart,b=this.$animations,tt=b&&b.x,nt=b&&b.y;if(tt||nt){const ot=positioners[e.position].call(this,this._active,this._eventPosition);if(!ot)return;const ht=this._size=getTooltipSize(this,e),mt=Object.assign({},ot,this._size),gt=determineAlignment(d,e,mt),yt=getBackgroundPoint(e,mt,gt,d);(tt._to!==yt.x||nt._to!==yt.y)&&(this.xAlign=gt.xAlign,this.yAlign=gt.yAlign,this.width=ht.width,this.height=ht.height,this.caretX=ot.x,this.caretY=ot.y,this._resolveAnimations().update(this,yt))}}_willRender(){return!!this.opacity}draw(e){const d=this.options.setContext(this.getContext());let b=this.opacity;if(!b)return;this._updateAnimationTarget(d);const tt={width:this.width,height:this.height},nt={x:this.x,y:this.y};b=Math.abs(b)<.001?0:b;const ot=toPadding(d.padding),ht=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;d.enabled&&ht&&(e.save(),e.globalAlpha=b,this.drawBackground(nt,e,tt,d),overrideTextDirection(e,d.textDirection),nt.y+=ot.top,this.drawTitle(nt,e,d),this.drawBody(nt,e,d),this.drawFooter(nt,e,d),restoreTextDirection(e,d.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,d){const b=this._active,tt=e.map(({datasetIndex:ht,index:mt})=>{const gt=this.chart.getDatasetMeta(ht);if(!gt)throw new Error("Cannot find a dataset at index "+ht);return{datasetIndex:ht,element:gt.data[mt],index:mt}}),nt=!_elementsEqual(b,tt),ot=this._positionChanged(tt,d);(nt||ot)&&(this._active=tt,this._eventPosition=d,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,d,b=!0){if(d&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const tt=this.options,nt=this._active||[],ot=this._getActiveElements(e,nt,d,b),ht=this._positionChanged(ot,e),mt=d||!_elementsEqual(ot,nt)||ht;return mt&&(this._active=ot,(tt.enabled||tt.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,d))),mt}_getActiveElements(e,d,b,tt){const nt=this.options;if(e.type==="mouseout")return[];if(!tt)return d.filter(ht=>this.chart.data.datasets[ht.datasetIndex]&&this.chart.getDatasetMeta(ht.datasetIndex).controller.getParsed(ht.index)!==void 0);const ot=this.chart.getElementsAtEventForMode(e,nt.mode,nt,b);return nt.reverse&&ot.reverse(),ot}_positionChanged(e,d){const{caretX:b,caretY:tt,options:nt}=this,ot=positioners[nt.position].call(this,e,d);return ot!==!1&&(b!==ot.x||tt!==ot.y)}}Rn(Tooltip,"positioners",positioners);var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(s,e,d){d&&(s.tooltip=new Tooltip({chart:s,options:d}))},beforeUpdate(s,e,d){s.tooltip&&s.tooltip.initialize(d)},reset(s,e,d){s.tooltip&&s.tooltip.initialize(d)},afterDraw(s){const e=s.tooltip;if(e&&e._willRender()){const d={tooltip:e};if(s.notifyPlugins("beforeTooltipDraw",{...d,cancelable:!0})===!1)return;e.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",d)}},afterEvent(s,e){if(s.tooltip){const d=e.replay;s.tooltip.handleEvent(e.event,d,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,e)=>e.bodyFont.size,boxWidth:(s,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:defaultCallbacks},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const addIfString=(s,e,d,b)=>(typeof e=="string"?(d=s.push(e)-1,b.unshift({index:d,label:e})):isNaN(e)&&(d=null),d);function findOrAddLabel(s,e,d,b){const tt=s.indexOf(e);if(tt===-1)return addIfString(s,e,d,b);const nt=s.lastIndexOf(e);return tt!==nt?d:tt}const validIndex=(s,e)=>s===null?null:_limitValue(Math.round(s),0,e);function _getLabelForValue(s){const e=this.getLabels();return s>=0&&s<e.length?e[s]:s}class CategoryScale extends Scale{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const d=this._addedLabels;if(d.length){const b=this.getLabels();for(const{index:tt,label:nt}of d)b[tt]===nt&&b.splice(tt,1);this._addedLabels=[]}super.init(e)}parse(e,d){if(isNullOrUndef(e))return null;const b=this.getLabels();return d=isFinite(d)&&b[d]===e?d:findOrAddLabel(b,e,valueOrDefault(d,e),this._addedLabels),validIndex(d,b.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:d}=this.getUserBounds();let{min:b,max:tt}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(b=0),d||(tt=this.getLabels().length-1)),this.min=b,this.max=tt}buildTicks(){const e=this.min,d=this.max,b=this.options.offset,tt=[];let nt=this.getLabels();nt=e===0&&d===nt.length-1?nt:nt.slice(e,d+1),this._valueRange=Math.max(nt.length-(b?0:1),1),this._startValue=this.min-(b?.5:0);for(let ot=e;ot<=d;ot++)tt.push({value:ot});return tt}getLabelForValue(e){return _getLabelForValue.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const d=this.ticks;return e<0||e>d.length-1?null:this.getPixelForValue(d[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Rn(CategoryScale,"id","category"),Rn(CategoryScale,"defaults",{ticks:{callback:_getLabelForValue}});function generateTicks$1(s,e){const d=[],{bounds:tt,step:nt,min:ot,max:ht,precision:mt,count:gt,maxTicks:yt,maxDigits:ft,includeBounds:st}=s,bt=nt||1,vt=yt-1,{min:xt,max:wt}=e,St=!isNullOrUndef(ot),_t=!isNullOrUndef(ht),Tt=!isNullOrUndef(gt),Et=(wt-xt)/(ft+1);let kt=niceNum((wt-xt)/vt/bt)*bt,Mt,Ot,Dt,At;if(kt<1e-14&&!St&&!_t)return[{value:xt},{value:wt}];At=Math.ceil(wt/kt)-Math.floor(xt/kt),At>vt&&(kt=niceNum(At*kt/vt/bt)*bt),isNullOrUndef(mt)||(Mt=Math.pow(10,mt),kt=Math.ceil(kt*Mt)/Mt),tt==="ticks"?(Ot=Math.floor(xt/kt)*kt,Dt=Math.ceil(wt/kt)*kt):(Ot=xt,Dt=wt),St&&_t&&nt&&almostWhole((ht-ot)/nt,kt/1e3)?(At=Math.round(Math.min((ht-ot)/kt,yt)),kt=(ht-ot)/At,Ot=ot,Dt=ht):Tt?(Ot=St?ot:Ot,Dt=_t?ht:Dt,At=gt-1,kt=(Dt-Ot)/At):(At=(Dt-Ot)/kt,almostEquals(At,Math.round(At),kt/1e3)?At=Math.round(At):At=Math.ceil(At));const It=Math.max(_decimalPlaces(kt),_decimalPlaces(Ot));Mt=Math.pow(10,isNullOrUndef(mt)?It:mt),Ot=Math.round(Ot*Mt)/Mt,Dt=Math.round(Dt*Mt)/Mt;let jt=0;for(St&&(st&&Ot!==ot?(d.push({value:ot}),Ot<ot&&jt++,almostEquals(Math.round((Ot+jt*kt)*Mt)/Mt,ot,relativeLabelSize(ot,Et,s))&&jt++):Ot<ot&&jt++);jt<At;++jt){const qt=Math.round((Ot+jt*kt)*Mt)/Mt;if(_t&&qt>ht)break;d.push({value:qt})}return _t&&st&&Dt!==ht?d.length&&almostEquals(d[d.length-1].value,ht,relativeLabelSize(ht,Et,s))?d[d.length-1].value=ht:d.push({value:ht}):(!_t||Dt===ht)&&d.push({value:Dt}),d}function relativeLabelSize(s,e,{horizontal:d,minRotation:b}){const tt=toRadians(b),nt=(d?Math.sin(tt):Math.cos(tt))||.001,ot=.75*e*(""+s).length;return Math.min(e/nt,ot)}class LinearScaleBase extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,d){return isNullOrUndef(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:d,maxDefined:b}=this.getUserBounds();let{min:tt,max:nt}=this;const ot=mt=>tt=d?tt:mt,ht=mt=>nt=b?nt:mt;if(e){const mt=sign(tt),gt=sign(nt);mt<0&&gt<0?ht(0):mt>0&&gt>0&&ot(0)}if(tt===nt){let mt=nt===0?1:Math.abs(nt*.05);ht(nt+mt),e||ot(tt-mt)}this.min=tt,this.max=nt}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:d,stepSize:b}=e,tt;return b?(tt=Math.ceil(this.max/b)-Math.floor(this.min/b)+1,tt>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${b} would result generating up to ${tt} ticks. Limiting to 1000.`),tt=1e3)):(tt=this.computeTickLimit(),d=d||11),d&&(tt=Math.min(d,tt)),tt}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,d=e.ticks;let b=this.getTickLimit();b=Math.max(2,b);const tt={maxTicks:b,bounds:e.bounds,min:e.min,max:e.max,precision:d.precision,step:d.stepSize,count:d.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:d.minRotation||0,includeBounds:d.includeBounds!==!1},nt=this._range||this,ot=generateTicks$1(tt,nt);return e.bounds==="ticks"&&_setMinAndMaxByKey(ot,this,"value"),e.reverse?(ot.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),ot}configure(){const e=this.ticks;let d=this.min,b=this.max;if(super.configure(),this.options.offset&&e.length){const tt=(b-d)/Math.max(e.length-1,1)/2;d-=tt,b+=tt}this._startValue=d,this._endValue=b,this._valueRange=b-d}getLabelForValue(e){return formatNumber(e,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:e,max:d}=this.getMinMax(!0);this.min=isNumberFinite(e)?e:0,this.max=isNumberFinite(d)?d:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),d=e?this.width:this.height,b=toRadians(this.options.ticks.minRotation),tt=(e?Math.sin(b):Math.cos(b))||.001,nt=this._resolveTickFontOptions(0);return Math.ceil(d/Math.min(40,nt.lineHeight/tt))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Rn(LinearScale,"id","linear"),Rn(LinearScale,"defaults",{ticks:{callback:Ticks.formatters.numeric}});const log10Floor=s=>Math.floor(log10(s)),changeExponent=(s,e)=>Math.pow(10,log10Floor(s)+e);function isMajor(s){return s/Math.pow(10,log10Floor(s))===1}function steps(s,e,d){const b=Math.pow(10,d),tt=Math.floor(s/b);return Math.ceil(e/b)-tt}function startExp(s,e){const d=e-s;let b=log10Floor(d);for(;steps(s,e,b)>10;)b++;for(;steps(s,e,b)<10;)b--;return Math.min(b,log10Floor(s))}function generateTicks(s,{min:e,max:d}){e=finiteOrDefault(s.min,e);const b=[],tt=log10Floor(e);let nt=startExp(e,d),ot=nt<0?Math.pow(10,Math.abs(nt)):1;const ht=Math.pow(10,nt),mt=tt>nt?Math.pow(10,tt):0,gt=Math.round((e-mt)*ot)/ot,yt=Math.floor((e-mt)/ht/10)*ht*10;let ft=Math.floor((gt-yt)/Math.pow(10,nt)),st=finiteOrDefault(s.min,Math.round((mt+yt+ft*Math.pow(10,nt))*ot)/ot);for(;st<d;)b.push({value:st,major:isMajor(st),significand:ft}),ft>=10?ft=ft<15?15:20:ft++,ft>=20&&(nt++,ft=2,ot=nt>=0?1:ot),st=Math.round((mt+yt+ft*Math.pow(10,nt))*ot)/ot;const bt=finiteOrDefault(s.max,st);return b.push({value:bt,major:isMajor(bt),significand:ft}),b}class LogarithmicScale extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,d){const b=LinearScaleBase.prototype.parse.apply(this,[e,d]);if(b===0){this._zero=!0;return}return isNumberFinite(b)&&b>0?b:null}determineDataLimits(){const{min:e,max:d}=this.getMinMax(!0);this.min=isNumberFinite(e)?Math.max(0,e):null,this.max=isNumberFinite(d)?Math.max(0,d):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!isNumberFinite(this._userMin)&&(this.min=e===changeExponent(this.min,0)?changeExponent(this.min,-1):changeExponent(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:d}=this.getUserBounds();let b=this.min,tt=this.max;const nt=ht=>b=e?b:ht,ot=ht=>tt=d?tt:ht;b===tt&&(b<=0?(nt(1),ot(10)):(nt(changeExponent(b,-1)),ot(changeExponent(tt,1)))),b<=0&&nt(changeExponent(tt,-1)),tt<=0&&ot(changeExponent(b,1)),this.min=b,this.max=tt}buildTicks(){const e=this.options,d={min:this._userMin,max:this._userMax},b=generateTicks(d,this);return e.bounds==="ticks"&&_setMinAndMaxByKey(b,this,"value"),e.reverse?(b.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),b}getLabelForValue(e){return e===void 0?"0":formatNumber(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=log10(e),this._valueRange=log10(this.max)-log10(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(log10(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const d=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+d*this._valueRange)}}Rn(LogarithmicScale,"id","logarithmic"),Rn(LogarithmicScale,"defaults",{ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}});function getTickBackdropHeight(s){const e=s.ticks;if(e.display&&s.display){const d=toPadding(e.backdropPadding);return valueOrDefault(e.font&&e.font.size,defaults.font.size)+d.height}return 0}function measureLabelSize(s,e,d){return d=isArray(d)?d:[d],{w:_longestText(s,e.string,d),h:d.length*e.lineHeight}}function determineLimits(s,e,d,b,tt){return s===b||s===tt?{start:e-d/2,end:e+d/2}:s<b||s>tt?{start:e-d,end:e}:{start:e,end:e+d}}function fitWithPointLabels(s){const e={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},d=Object.assign({},e),b=[],tt=[],nt=s._pointLabels.length,ot=s.options.pointLabels,ht=ot.centerPointLabels?PI/nt:0;for(let mt=0;mt<nt;mt++){const gt=ot.setContext(s.getPointLabelContext(mt));tt[mt]=gt.padding;const yt=s.getPointPosition(mt,s.drawingArea+tt[mt],ht),ft=toFont(gt.font),st=measureLabelSize(s.ctx,ft,s._pointLabels[mt]);b[mt]=st;const bt=_normalizeAngle(s.getIndexAngle(mt)+ht),vt=Math.round(toDegrees(bt)),xt=determineLimits(vt,yt.x,st.w,0,180),wt=determineLimits(vt,yt.y,st.h,90,270);updateLimits(d,e,bt,xt,wt)}s.setCenterPoint(e.l-d.l,d.r-e.r,e.t-d.t,d.b-e.b),s._pointLabelItems=buildPointLabelItems(s,b,tt)}function updateLimits(s,e,d,b,tt){const nt=Math.abs(Math.sin(d)),ot=Math.abs(Math.cos(d));let ht=0,mt=0;b.start<e.l?(ht=(e.l-b.start)/nt,s.l=Math.min(s.l,e.l-ht)):b.end>e.r&&(ht=(b.end-e.r)/nt,s.r=Math.max(s.r,e.r+ht)),tt.start<e.t?(mt=(e.t-tt.start)/ot,s.t=Math.min(s.t,e.t-mt)):tt.end>e.b&&(mt=(tt.end-e.b)/ot,s.b=Math.max(s.b,e.b+mt))}function createPointLabelItem(s,e,d){const b=s.drawingArea,{extra:tt,additionalAngle:nt,padding:ot,size:ht}=d,mt=s.getPointPosition(e,b+tt+ot,nt),gt=Math.round(toDegrees(_normalizeAngle(mt.angle+HALF_PI))),yt=yForAngle(mt.y,ht.h,gt),ft=getTextAlignForAngle(gt),st=leftForTextAlign(mt.x,ht.w,ft);return{visible:!0,x:mt.x,y:yt,textAlign:ft,left:st,top:yt,right:st+ht.w,bottom:yt+ht.h}}function isNotOverlapped(s,e){if(!e)return!0;const{left:d,top:b,right:tt,bottom:nt}=s;return!(_isPointInArea({x:d,y:b},e)||_isPointInArea({x:d,y:nt},e)||_isPointInArea({x:tt,y:b},e)||_isPointInArea({x:tt,y:nt},e))}function buildPointLabelItems(s,e,d){const b=[],tt=s._pointLabels.length,nt=s.options,{centerPointLabels:ot,display:ht}=nt.pointLabels,mt={extra:getTickBackdropHeight(nt)/2,additionalAngle:ot?PI/tt:0};let gt;for(let yt=0;yt<tt;yt++){mt.padding=d[yt],mt.size=e[yt];const ft=createPointLabelItem(s,yt,mt);b.push(ft),ht==="auto"&&(ft.visible=isNotOverlapped(ft,gt),ft.visible&&(gt=ft))}return b}function getTextAlignForAngle(s){return s===0||s===180?"center":s<180?"left":"right"}function leftForTextAlign(s,e,d){return d==="right"?s-=e:d==="center"&&(s-=e/2),s}function yForAngle(s,e,d){return d===90||d===270?s-=e/2:(d>270||d<90)&&(s-=e),s}function drawPointLabelBox(s,e,d){const{left:b,top:tt,right:nt,bottom:ot}=d,{backdropColor:ht}=e;if(!isNullOrUndef(ht)){const mt=toTRBLCorners(e.borderRadius),gt=toPadding(e.backdropPadding);s.fillStyle=ht;const yt=b-gt.left,ft=tt-gt.top,st=nt-b+gt.width,bt=ot-tt+gt.height;Object.values(mt).some(vt=>vt!==0)?(s.beginPath(),addRoundedRectPath(s,{x:yt,y:ft,w:st,h:bt,radius:mt}),s.fill()):s.fillRect(yt,ft,st,bt)}}function drawPointLabels(s,e){const{ctx:d,options:{pointLabels:b}}=s;for(let tt=e-1;tt>=0;tt--){const nt=s._pointLabelItems[tt];if(!nt.visible)continue;const ot=b.setContext(s.getPointLabelContext(tt));drawPointLabelBox(d,ot,nt);const ht=toFont(ot.font),{x:mt,y:gt,textAlign:yt}=nt;renderText(d,s._pointLabels[tt],mt,gt+ht.lineHeight/2,ht,{color:ot.color,textAlign:yt,textBaseline:"middle"})}}function pathRadiusLine(s,e,d,b){const{ctx:tt}=s;if(d)tt.arc(s.xCenter,s.yCenter,e,0,TAU);else{let nt=s.getPointPosition(0,e);tt.moveTo(nt.x,nt.y);for(let ot=1;ot<b;ot++)nt=s.getPointPosition(ot,e),tt.lineTo(nt.x,nt.y)}}function drawRadiusLine(s,e,d,b,tt){const nt=s.ctx,ot=e.circular,{color:ht,lineWidth:mt}=e;!ot&&!b||!ht||!mt||d<0||(nt.save(),nt.strokeStyle=ht,nt.lineWidth=mt,nt.setLineDash(tt.dash),nt.lineDashOffset=tt.dashOffset,nt.beginPath(),pathRadiusLine(s,d,ot,b),nt.closePath(),nt.stroke(),nt.restore())}function createPointLabelContext(s,e,d){return createContext(s,{label:d,index:e,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=toPadding(getTickBackdropHeight(this.options)/2),d=this.width=this.maxWidth-e.width,b=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+d/2+e.left),this.yCenter=Math.floor(this.top+b/2+e.top),this.drawingArea=Math.floor(Math.min(d,b)/2)}determineDataLimits(){const{min:e,max:d}=this.getMinMax(!1);this.min=isNumberFinite(e)&&!isNaN(e)?e:0,this.max=isNumberFinite(d)&&!isNaN(d)?d:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(e){LinearScaleBase.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((d,b)=>{const tt=callback(this.options.pointLabels.callback,[d,b],this);return tt||tt===0?tt:""}).filter((d,b)=>this.chart.getDataVisibility(b))}fit(){const e=this.options;e.display&&e.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,d,b,tt){this.xCenter+=Math.floor((e-d)/2),this.yCenter+=Math.floor((b-tt)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,d,b,tt))}getIndexAngle(e){const d=TAU/(this._pointLabels.length||1),b=this.options.startAngle||0;return _normalizeAngle(e*d+toRadians(b))}getDistanceFromCenterForValue(e){if(isNullOrUndef(e))return NaN;const d=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*d:(e-this.min)*d}getValueForDistanceFromCenter(e){if(isNullOrUndef(e))return NaN;const d=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-d:this.min+d}getPointLabelContext(e){const d=this._pointLabels||[];if(e>=0&&e<d.length){const b=d[e];return createPointLabelContext(this.getContext(),e,b)}}getPointPosition(e,d,b=0){const tt=this.getIndexAngle(e)-HALF_PI+b;return{x:Math.cos(tt)*d+this.xCenter,y:Math.sin(tt)*d+this.yCenter,angle:tt}}getPointPositionForValue(e,d){return this.getPointPosition(e,this.getDistanceFromCenterForValue(d))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:d,top:b,right:tt,bottom:nt}=this._pointLabelItems[e];return{left:d,top:b,right:tt,bottom:nt}}drawBackground(){const{backgroundColor:e,grid:{circular:d}}=this.options;if(e){const b=this.ctx;b.save(),b.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),d,this._pointLabels.length),b.closePath(),b.fillStyle=e,b.fill(),b.restore()}}drawGrid(){const e=this.ctx,d=this.options,{angleLines:b,grid:tt,border:nt}=d,ot=this._pointLabels.length;let ht,mt,gt;if(d.pointLabels.display&&drawPointLabels(this,ot),tt.display&&this.ticks.forEach((yt,ft)=>{if(ft!==0||ft===0&&this.min<0){mt=this.getDistanceFromCenterForValue(yt.value);const st=this.getContext(ft),bt=tt.setContext(st),vt=nt.setContext(st);drawRadiusLine(this,bt,mt,ot,vt)}}),b.display){for(e.save(),ht=ot-1;ht>=0;ht--){const yt=b.setContext(this.getPointLabelContext(ht)),{color:ft,lineWidth:st}=yt;!st||!ft||(e.lineWidth=st,e.strokeStyle=ft,e.setLineDash(yt.borderDash),e.lineDashOffset=yt.borderDashOffset,mt=this.getDistanceFromCenterForValue(d.ticks.reverse?this.min:this.max),gt=this.getPointPosition(ht,mt),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(gt.x,gt.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,d=this.options,b=d.ticks;if(!b.display)return;const tt=this.getIndexAngle(0);let nt,ot;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(tt),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((ht,mt)=>{if(mt===0&&this.min>=0&&!d.reverse)return;const gt=b.setContext(this.getContext(mt)),yt=toFont(gt.font);if(nt=this.getDistanceFromCenterForValue(this.ticks[mt].value),gt.showLabelBackdrop){e.font=yt.string,ot=e.measureText(ht.label).width,e.fillStyle=gt.backdropColor;const ft=toPadding(gt.backdropPadding);e.fillRect(-ot/2-ft.left,-nt-yt.size/2-ft.top,ot+ft.width,yt.size+ft.height)}renderText(e,ht.label,0,-nt,yt,{color:gt.color,strokeColor:gt.textStrokeColor,strokeWidth:gt.textStrokeWidth})}),e.restore()}drawTitle(){}}Rn(RadialLinearScale,"id","radialLinear"),Rn(RadialLinearScale,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Rn(RadialLinearScale,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Rn(RadialLinearScale,"descriptors",{angleLines:{_fallback:"grid"}});const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(s,e){return s-e}function parse(s,e){if(isNullOrUndef(e))return null;const d=s._adapter,{parser:b,round:tt,isoWeekday:nt}=s._parseOpts;let ot=e;return typeof b=="function"&&(ot=b(ot)),isNumberFinite(ot)||(ot=typeof b=="string"?d.parse(ot,b):d.parse(ot)),ot===null?null:(tt&&(ot=tt==="week"&&(isNumber(nt)||nt===!0)?d.startOf(ot,"isoWeek",nt):d.startOf(ot,tt)),+ot)}function determineUnitForAutoTicks(s,e,d,b){const tt=UNITS.length;for(let nt=UNITS.indexOf(s);nt<tt-1;++nt){const ot=INTERVALS[UNITS[nt]],ht=ot.steps?ot.steps:Number.MAX_SAFE_INTEGER;if(ot.common&&Math.ceil((d-e)/(ht*ot.size))<=b)return UNITS[nt]}return UNITS[tt-1]}function determineUnitForFormatting(s,e,d,b,tt){for(let nt=UNITS.length-1;nt>=UNITS.indexOf(d);nt--){const ot=UNITS[nt];if(INTERVALS[ot].common&&s._adapter.diff(tt,b,ot)>=e-1)return ot}return UNITS[d?UNITS.indexOf(d):0]}function determineMajorUnit(s){for(let e=UNITS.indexOf(s)+1,d=UNITS.length;e<d;++e)if(INTERVALS[UNITS[e]].common)return UNITS[e]}function addTick(s,e,d){if(!d)s[e]=!0;else if(d.length){const{lo:b,hi:tt}=_lookup(d,e),nt=d[b]>=e?d[b]:d[tt];s[nt]=!0}}function setMajorTicks(s,e,d,b){const tt=s._adapter,nt=+tt.startOf(e[0].value,b),ot=e[e.length-1].value;let ht,mt;for(ht=nt;ht<=ot;ht=+tt.add(ht,1,b))mt=d[ht],mt>=0&&(e[mt].major=!0);return e}function ticksFromTimestamps(s,e,d){const b=[],tt={},nt=e.length;let ot,ht;for(ot=0;ot<nt;++ot)ht=e[ot],tt[ht]=ot,b.push({value:ht,major:!1});return nt===0||!d?b:setMajorTicks(s,b,tt,d)}class TimeScale extends Scale{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,d={}){const b=e.time||(e.time={}),tt=this._adapter=new adapters._date(e.adapters.date);tt.init(d),mergeIf(b.displayFormats,tt.formats()),this._parseOpts={parser:b.parser,round:b.round,isoWeekday:b.isoWeekday},super.init(e),this._normalized=d.normalized}parse(e,d){return e===void 0?null:parse(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,d=this._adapter,b=e.time.unit||"day";let{min:tt,max:nt,minDefined:ot,maxDefined:ht}=this.getUserBounds();function mt(gt){!ot&&!isNaN(gt.min)&&(tt=Math.min(tt,gt.min)),!ht&&!isNaN(gt.max)&&(nt=Math.max(nt,gt.max))}(!ot||!ht)&&(mt(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&mt(this.getMinMax(!1))),tt=isNumberFinite(tt)&&!isNaN(tt)?tt:+d.startOf(Date.now(),b),nt=isNumberFinite(nt)&&!isNaN(nt)?nt:+d.endOf(Date.now(),b)+1,this.min=Math.min(tt,nt-1),this.max=Math.max(tt+1,nt)}_getLabelBounds(){const e=this.getLabelTimestamps();let d=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;return e.length&&(d=e[0],b=e[e.length-1]),{min:d,max:b}}buildTicks(){const e=this.options,d=e.time,b=e.ticks,tt=b.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&tt.length&&(this.min=this._userMin||tt[0],this.max=this._userMax||tt[tt.length-1]);const nt=this.min,ot=this.max,ht=_filterBetween(tt,nt,ot);return this._unit=d.unit||(b.autoSkip?determineUnitForAutoTicks(d.minUnit,this.min,this.max,this._getLabelCapacity(nt)):determineUnitForFormatting(this,ht.length,d.minUnit,this.min,this.max)),this._majorUnit=!b.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(tt),e.reverse&&ht.reverse(),ticksFromTimestamps(this,ht,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let d=0,b=0,tt,nt;this.options.offset&&e.length&&(tt=this.getDecimalForValue(e[0]),e.length===1?d=1-tt:d=(this.getDecimalForValue(e[1])-tt)/2,nt=this.getDecimalForValue(e[e.length-1]),e.length===1?b=nt:b=(nt-this.getDecimalForValue(e[e.length-2]))/2);const ot=e.length<3?.5:.25;d=_limitValue(d,0,ot),b=_limitValue(b,0,ot),this._offsets={start:d,end:b,factor:1/(d+1+b)}}_generate(){const e=this._adapter,d=this.min,b=this.max,tt=this.options,nt=tt.time,ot=nt.unit||determineUnitForAutoTicks(nt.minUnit,d,b,this._getLabelCapacity(d)),ht=valueOrDefault(tt.ticks.stepSize,1),mt=ot==="week"?nt.isoWeekday:!1,gt=isNumber(mt)||mt===!0,yt={};let ft=d,st,bt;if(gt&&(ft=+e.startOf(ft,"isoWeek",mt)),ft=+e.startOf(ft,gt?"day":ot),e.diff(b,d,ot)>1e5*ht)throw new Error(d+" and "+b+" are too far apart with stepSize of "+ht+" "+ot);const vt=tt.ticks.source==="data"&&this.getDataTimestamps();for(st=ft,bt=0;st<b;st=+e.add(st,ht,ot),bt++)addTick(yt,st,vt);return(st===b||tt.bounds==="ticks"||bt===1)&&addTick(yt,st,vt),Object.keys(yt).sort(sorter).map(xt=>+xt)}getLabelForValue(e){const d=this._adapter,b=this.options.time;return b.tooltipFormat?d.format(e,b.tooltipFormat):d.format(e,b.displayFormats.datetime)}format(e,d){const tt=this.options.time.displayFormats,nt=this._unit,ot=d||tt[nt];return this._adapter.format(e,ot)}_tickFormatFunction(e,d,b,tt){const nt=this.options,ot=nt.ticks.callback;if(ot)return callback(ot,[e,d,b],this);const ht=nt.time.displayFormats,mt=this._unit,gt=this._majorUnit,yt=mt&&ht[mt],ft=gt&&ht[gt],st=b[d],bt=gt&&ft&&st&&st.major;return this._adapter.format(e,tt||(bt?ft:yt))}generateTickLabels(e){let d,b,tt;for(d=0,b=e.length;d<b;++d)tt=e[d],tt.label=this._tickFormatFunction(tt.value,d,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const d=this._offsets,b=this.getDecimalForValue(e);return this.getPixelForDecimal((d.start+b)*d.factor)}getValueForPixel(e){const d=this._offsets,b=this.getDecimalForPixel(e)/d.factor-d.end;return this.min+b*(this.max-this.min)}_getLabelSize(e){const d=this.options.ticks,b=this.ctx.measureText(e).width,tt=toRadians(this.isHorizontal()?d.maxRotation:d.minRotation),nt=Math.cos(tt),ot=Math.sin(tt),ht=this._resolveTickFontOptions(0).size;return{w:b*nt+ht*ot,h:b*ot+ht*nt}}_getLabelCapacity(e){const d=this.options.time,b=d.displayFormats,tt=b[d.unit]||b.millisecond,nt=this._tickFormatFunction(e,0,ticksFromTimestamps(this,[e],this._majorUnit),tt),ot=this._getLabelSize(nt),ht=Math.floor(this.isHorizontal()?this.width/ot.w:this.height/ot.h)-1;return ht>0?ht:1}getDataTimestamps(){let e=this._cache.data||[],d,b;if(e.length)return e;const tt=this.getMatchingVisibleMetas();if(this._normalized&&tt.length)return this._cache.data=tt[0].controller.getAllParsedValues(this);for(d=0,b=tt.length;d<b;++d)e=e.concat(tt[d].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let d,b;if(e.length)return e;const tt=this.getLabels();for(d=0,b=tt.length;d<b;++d)e.push(parse(this,tt[d]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _arrayUnique(e.sort(sorter))}}Rn(TimeScale,"id","time"),Rn(TimeScale,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function interpolate$1(s,e,d){let b=0,tt=s.length-1,nt,ot,ht,mt;d?(e>=s[b].pos&&e<=s[tt].pos&&({lo:b,hi:tt}=_lookupByKey(s,"pos",e)),{pos:nt,time:ht}=s[b],{pos:ot,time:mt}=s[tt]):(e>=s[b].time&&e<=s[tt].time&&({lo:b,hi:tt}=_lookupByKey(s,"time",e)),{time:nt,pos:ht}=s[b],{time:ot,pos:mt}=s[tt]);const gt=ot-nt;return gt?ht+(mt-ht)*(e-nt)/gt:ht}class TimeSeriesScale extends TimeScale{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),d=this._table=this.buildLookupTable(e);this._minPos=interpolate$1(d,this.min),this._tableRange=interpolate$1(d,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:d,max:b}=this,tt=[],nt=[];let ot,ht,mt,gt,yt;for(ot=0,ht=e.length;ot<ht;++ot)gt=e[ot],gt>=d&&gt<=b&&tt.push(gt);if(tt.length<2)return[{time:d,pos:0},{time:b,pos:1}];for(ot=0,ht=tt.length;ot<ht;++ot)yt=tt[ot+1],mt=tt[ot-1],gt=tt[ot],Math.round((yt+mt)/2)!==gt&&nt.push({time:gt,pos:ot/(ht-1)});return nt}_generate(){const e=this.min,d=this.max;let b=super.getDataTimestamps();return(!b.includes(e)||!b.length)&&b.splice(0,0,e),(!b.includes(d)||b.length===1)&&b.push(d),b.sort((tt,nt)=>tt-nt)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const d=this.getDataTimestamps(),b=this.getLabelTimestamps();return d.length&&b.length?e=this.normalize(d.concat(b)):e=d.length?d:b,e=this._cache.all=e,e}getDecimalForValue(e){return(interpolate$1(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const d=this._offsets,b=this.getDecimalForPixel(e)/d.factor-d.end;return interpolate$1(this._table,b*this._tableRange+this._minPos,!0)}}Rn(TimeSeriesScale,"id","timeseries"),Rn(TimeSeriesScale,"defaults",TimeScale.defaults);const ChartBlock=Node$2.create({name:"chart-block",inline:!1,group:"block",atom:!0,selectable:!1,addAttributes(){return{data:{default:[]},xLabel:{default:"x"},yLabel:{default:"Pr"},chartType:{default:"bar"},editing:{default:!0}}},parseHTML(){return[{tag:"chart-block"}]},renderHTML({HTMLAttributes:s}){return["chart-block",mergeAttributes(s)]},addNodeView(){return ReactNodeViewRenderer(RenderChartBlock)}}),RenderChartBlock=s=>{let e=s.node.attrs.editing;const[d,b,tt]=useState(s.editor.isEditable),[nt,ot,ht]=useState(s.node.attrs.data),[mt,gt,yt]=useState(s.node.attrs.xLabel),[ft,st,bt]=useState(s.node.attrs.yLabel),[vt,xt,wt]=useState(s.node.attrs.chartType);reactExports.useEffect(()=>{s.editor.on("transaction",()=>{s.editor.isEditable!=tt.current&&b(s.editor.isEditable)})},[]);const St=Ot=>{gt(Ot),s.updateAttributes({xLabel:Ot})},_t=Ot=>{st(Ot),s.updateAttributes({yLabel:Ot})},Tt=Ot=>{xt(Ot),s.updateAttributes({chartType:Ot})},Et=Ot=>{ot(Ot),s.updateAttributes({data:Ot})},kt=()=>{s.editor.commands.focus()},Mt=Ot=>{Ot.key==="Enter"&&kt(),Ot.key==="Tab"&&kt()};return e&&d?(console.log("HEREE"),jsxRuntimeExports.jsxs(NodeViewWrapper,{as:"span",children:[jsxRuntimeExports.jsx("label",{children:"x Axis Label"}),jsxRuntimeExports.jsx(ControlledInput,{style:INPUT_STYLE,value:mt,onChange:St,onKeyDown:Mt,onBlur:kt,autoFocus:!0,size:10}),jsxRuntimeExports.jsx("label",{children:"y Axis Label"}),jsxRuntimeExports.jsx(ControlledInput,{style:INPUT_STYLE,value:ft,onChange:_t,onKeyDown:Mt,onBlur:kt,autoFocus:!0,size:10}),jsxRuntimeExports.jsx("label",{children:"Chart Type"}),jsxRuntimeExports.jsx(ControlledInput,{style:INPUT_STYLE,value:vt,onChange:Tt,onKeyDown:Mt,onBlur:kt,autoFocus:!0,size:10}),jsxRuntimeExports.jsx("label",{children:"Data"}),jsxRuntimeExports.jsx(ControlledInput,{style:INPUT_STYLE,value:nt,onChange:Et,onKeyDown:Mt,onBlur:kt,autoFocus:!0,size:10})]})):(console.log("HE:(REE"),jsxRuntimeExports.jsx(NodeViewWrapper,{children:jsxRuntimeExports.jsx(ChartView,{data:nt,xLabel:mt,yLabel:ft,chartType:vt})}))},ChartView=s=>{const e=reactExports.useRef(null);return reactExports.useEffect(()=>{if(e.current){const d=e.current.getContext("2d");new Chart$1(d,{type:s.chartType,data:{labels:s.data.map((b,tt)=>tt),datasets:[{label:s.yLabel,data:JSON.parse(s.data)}]}})}},[s.data,s.xLabel,s.yLabel,s.chartType]),jsxRuntimeExports.jsx("canvas",{ref:e})},ButtonBar=({editor:s,editable:e,onInsertImage:d})=>e?jsxRuntimeExports.jsxs("div",{className:"d-flex",style:{top:"0",background:"white",border:"1px solid lightgrey",borderRadius:"5px 5px 0px 0px",maxWidth:"670px"},children:[jsxRuntimeExports.jsx(BlockLatexButton,{editor:s}),jsxRuntimeExports.jsx(InlineLatexButton,{editor:s}),jsxRuntimeExports.jsx(PythonButton,{editor:s}),jsxRuntimeExports.jsx(ImageButton,{editor:s,onInsertImage:d}),jsxRuntimeExports.jsx(ChartButton,{editor:s})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});function InlineLatexButton({editor:s}){return jsxRuntimeExports.jsxs("button",{onClick:()=>s.chain().focus().insertContent("<inline-tex></inline-tex>").run(),className:"btn btn-sm btn-light",children:[jsxRuntimeExports.jsx(FaSquareRootAlt,{})," Inline LaTeX"]})}function ImageButton({editor:s,onInsertImage:e}){return jsxRuntimeExports.jsxs("button",{onClick:()=>e(),className:"btn btn-sm btn-light",children:[jsxRuntimeExports.jsx(FaImage,{})," Image"]})}function PythonButton({editor:s}){return jsxRuntimeExports.jsxs("button",{onClick:()=>s.chain().focus().insertContent("<runnable-code></runnable-code>").run(),className:"btn btn-sm btn-light ",children:[jsxRuntimeExports.jsx(FaPython,{})," Python"]})}function BlockLatexButton({editor:s}){return jsxRuntimeExports.jsxs("button",{onClick:()=>s.chain().focus().insertContent("<block-tex></block-tex>").run(),className:"btn btn-sm btn-light",children:[jsxRuntimeExports.jsx(FaAlignCenter,{})," Block LaTeX"]})}function ChartButton({editor:s}){return jsxRuntimeExports.jsxs("button",{onClick:()=>s.chain().focus().insertContent("<chart-block></chart-block>").run(),className:"btn btn-sm btn-light",children:[jsxRuntimeExports.jsx(FaHeading,{})," Chart"]})}const TipTap=s=>{const{editable:e}=s;return reactExports.createElement(TipTapSafe,{...s,key:`uniqueKey-${e}`})},TipTapSafe=({editable:s,user:e,content:d=""})=>jsxRuntimeExports.jsx(TipTapWithData,{editable:s,user:e,content:d}),TipTapWithData=({editable:s,user:e,content:d})=>{const b=reactExports.useRef(s);reactExports.useEffect(()=>{if(b.current!==s)throw new Error("editable changed in TipTapSafe")},[s]);let[tt,nt]=reactExports.useState(null);const[ot,ht]=reactExports.useState(null);o(ot,500);const mt=(gt,yt,ft)=>{ht(gt)};return jsxRuntimeExports.jsx(TipTapWithDoc,{onUpdate:mt,provider:tt,editable:s,user:e,content:d})},TipTapWithDoc=({provider:s,onUpdate:e,editable:d,user:b,content:tt=""})=>{reactExports.useState(tt);const nt=useEditor({extensions:[StarterKit.configure({history:!1}),InlineTex,BlockTex,RunnableCode,ChartBlock,Placeholder.configure({placeholder:"Write something "}),Image$1.configure({inline:!1})],editable:d,content:parseMathJax(tt)});reactExports.useEffect(()=>{nt&&nt.commands.setContent(parseMathJax(tt))},[tt]),reactExports.useEffect(()=>{nt&&(nt.setEditable(d),nt.chain().focus().insertContent("").run())},[d]),reactExports.useEffect(()=>{nt&&nt.on("update",({editor:mt})=>{let gt=mt.getJSON(),yt=mt.getHTML(),ft=mt.getText();e(gt,yt,ft)})},[nt]);const ot=()=>{Swal.fire({title:"Select image",input:"file",inputAttributes:{accept:"image/*","aria-label":"Upload your profile picture"}}).then(mt=>{const gt=mt.value,yt=new FileReader;yt.onload=st=>{ht(st.target.result)},yt.readAsDataURL(gt);const ft=URL.createObjectURL(gt);ht(ft)})},ht=mt=>{nt.chain().focus().insertContent(`<img src="${mt}"></img>`).run()};return jsxRuntimeExports.jsxs("div",{className:"tiptapWrapper",children:[jsxRuntimeExports.jsx(ButtonBar,{editor:nt,editable:d,onInsertImage:ot}),jsxRuntimeExports.jsx("div",{style:{minHeight:"800px"},className:"tiptapContentWrapper "+(d?"editor editableWrapper":""),children:jsxRuntimeExports.jsx(EditorContent,{editor:nt})})]})},RichTextEditor=({user:s,editable:e,firebaseDocPath:d,content:b=""})=>d?jsxRuntimeExports.jsx(TipTap,{firebaseDocPath:d,editable:e,user:s,content:b}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Missing firebasedocpath"}),FileDisplay=({filePath:s,setCurrFile:e})=>{const[d,b]=reactExports.useState(null),[tt,nt]=reactExports.useState(!1);return reactExports.useEffect(()=>{(async()=>{const mt=await(await fetch(s)).text();b(mt)})()},[s]),jsxRuntimeExports.jsxs("div",{className:"h-100",children:[jsxRuntimeExports.jsx("button",{onClick:()=>e(null),children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:()=>nt(!tt),children:"Toggle Editable"}),jsxRuntimeExports.jsx("h1",{children:s}),jsxRuntimeExports.jsx("div",{className:"border border-rounded p-2",children:jsxRuntimeExports.jsx(RichTextEditor,{editable:tt,content:d,firebaseDocPath:s,user:{name:"test"}})})]})},fetchFileStructure=async()=>(await fetch("/fileStructure.json")).json(),renderFileStructure=(s,e,d="")=>e.map(b=>b.type==="directory"?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:b.name}),jsxRuntimeExports.jsx("div",{style:{marginLeft:"20px"},children:renderFileStructure(s,b.children,`${d}${b.name}/`)})]},d+b.name):b.name.endsWith(".html")?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{onClick:()=>{s(d+b.name)},children:b.name})},d+b.name):null),FileStructure=({setCurrFile:s})=>{const[e,d]=reactExports.useState([]);return reactExports.useEffect(()=>{(async()=>{const tt=await fetchFileStructure();d(tt)})()},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{children:"File Structure"}),renderFileStructure(s,e)]})},FileStructureOuter=()=>{const[s,e]=reactExports.useState(null);return s?jsxRuntimeExports.jsx(FileDisplay,{filePath:s,setCurrFile:e}):jsxRuntimeExports.jsx(FileStructure,{setCurrFile:e})};dt.div`
    color: white;
    background-color: lightblue;
    display: flex;
    top: 0;
    left: 0;
    width: 100%;
    margin-bottom: 20px;
`;const SoftenedDiv=dt.div`
    border-radius: 10px;
    padding: 10px;
`;var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(s){(function(){var e={}.hasOwnProperty;function d(){for(var nt="",ot=0;ot<arguments.length;ot++){var ht=arguments[ot];ht&&(nt=tt(nt,b(ht)))}return nt}function b(nt){if(typeof nt=="string"||typeof nt=="number")return nt;if(typeof nt!="object")return"";if(Array.isArray(nt))return d.apply(null,nt);if(nt.toString!==Object.prototype.toString&&!nt.toString.toString().includes("[native code]"))return nt.toString();var ot="";for(var ht in nt)e.call(nt,ht)&&nt[ht]&&(ot=tt(ot,ht));return ot}function tt(nt,ot){return ot?nt?nt+" "+ot:nt+ot:nt}s.exports?(d.default=d,s.exports=d):window.classNames=d})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);function componentWillMount(){var s=this.constructor.getDerivedStateFromProps(this.props,this.state);s!=null&&this.setState(s)}function componentWillReceiveProps(s){function e(d){var b=this.constructor.getDerivedStateFromProps(s,d);return b??null}this.setState(e.bind(this))}function componentWillUpdate(s,e){try{var d=this.props,b=this.state;this.props=s,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(d,b)}finally{this.props=d,this.state=b}}componentWillMount.__suppressDeprecationWarning=!0;componentWillReceiveProps.__suppressDeprecationWarning=!0;componentWillUpdate.__suppressDeprecationWarning=!0;function polyfill(s){var e=s.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof s.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return s;var d=null,b=null,tt=null;if(typeof e.componentWillMount=="function"?d="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(d="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?b="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(b="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?tt="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(tt="UNSAFE_componentWillUpdate"),d!==null||b!==null||tt!==null){var nt=s.displayName||s.name,ot=typeof s.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+nt+" uses "+ot+" but also contains the following legacy lifecycles:"+(d!==null?`
  `+d:"")+(b!==null?`
  `+b:"")+(tt!==null?`
  `+tt:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof s.getDerivedStateFromProps=="function"&&(e.componentWillMount=componentWillMount,e.componentWillReceiveProps=componentWillReceiveProps),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=componentWillUpdate;var ht=e.componentDidUpdate;e.componentDidUpdate=function(gt,yt,ft){var st=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:ft;ht.call(this,gt,yt,st)}}return s}const reactLifecyclesCompat_es=Object.freeze(Object.defineProperty({__proto__:null,polyfill},Symbol.toStringTag,{value:"Module"})),DEFAULT_BREAKPOINTS=["xxl","xl","lg","md","sm","xs"],DEFAULT_MIN_BREAKPOINT="xs",ThemeContext=reactExports.createContext({prefixes:{},breakpoints:DEFAULT_BREAKPOINTS,minBreakpoint:DEFAULT_MIN_BREAKPOINT});function useBootstrapPrefix(s,e){const{prefixes:d}=reactExports.useContext(ThemeContext);return s||d[e]||e}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function s(b,tt,nt,ot,ht,mt){if(mt!==ReactPropTypesSecret){var gt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw gt.name="Invariant Violation",gt}}s.isRequired=s;function e(){return s}var d={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:e,element:s,elementType:s,instanceOf:e,node:s,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return d.PropTypes=d,d};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const _excluded=["as","disabled"];function _objectWithoutPropertiesLoose(s,e){if(s==null)return{};var d={},b=Object.keys(s),tt,nt;for(nt=0;nt<b.length;nt++)tt=b[nt],!(e.indexOf(tt)>=0)&&(d[tt]=s[tt]);return d}function isTrivialHref(s){return!s||s.trim()==="#"}function useButtonProps({tagName:s,disabled:e,href:d,target:b,rel:tt,role:nt,onClick:ot,tabIndex:ht=0,type:mt}){s||(d!=null||b!=null||tt!=null?s="a":s="button");const gt={tagName:s};if(s==="button")return[{type:mt||"button",disabled:e},gt];const yt=st=>{if((e||s==="a"&&isTrivialHref(d))&&st.preventDefault(),e){st.stopPropagation();return}ot==null||ot(st)},ft=st=>{st.key===" "&&(st.preventDefault(),yt(st))};return s==="a"&&(d||(d="#"),e&&(d=void 0)),[{role:nt??"button",disabled:void 0,tabIndex:e?void 0:ht,href:d,target:s==="a"?b:void 0,"aria-disabled":e||void 0,rel:s==="a"?tt:void 0,onClick:yt,onKeyDown:ft},gt]}const Button$1=reactExports.forwardRef((s,e)=>{let{as:d,disabled:b}=s,tt=_objectWithoutPropertiesLoose(s,_excluded);const[nt,{tagName:ot}]=useButtonProps(Object.assign({tagName:d,disabled:b},tt));return jsxRuntimeExports.jsx(ot,Object.assign({},tt,nt,{ref:e}))});Button$1.displayName="Button";const Button=reactExports.forwardRef(({as:s,bsPrefix:e,variant:d="primary",size:b,active:tt=!1,disabled:nt=!1,className:ot,...ht},mt)=>{const gt=useBootstrapPrefix(e,"btn"),[yt,{tagName:ft}]=useButtonProps({tagName:s,disabled:nt,...ht}),st=ft;return jsxRuntimeExports.jsx(st,{...yt,...ht,ref:mt,disabled:nt,className:classNames(ot,gt,tt&&"active",d&&`${gt}-${d}`,b&&`${gt}-${b}`,ht.href&&nt&&"disabled")})});Button.displayName="Button";const AppContext=reactExports.createContext();function useAppContext$1(){return reactExports.useContext(AppContext)}const StyledScoreBoard=dt.div`
    background-color: pink;
    display: flex;
    flex-direction: row;
    justify-content: center; /* Center children horizontally */
    align-items: center; /* Center children vertically */
    height: 50%;
    width: 100%;
`,StyledScoreCard=dt(SoftenedDiv)`
    background-color: white;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    
    h2 {
        font-size: calc(1vw + 1vh + 0.5vmin); /* Example of scaling based on viewport */
        /* Adjust the formula as needed to fit your design */
    }
`,ScoreCard=s=>jsxRuntimeExports.jsxs(StyledScoreCard,{children:[jsxRuntimeExports.jsx("h2",{children:s.player}),jsxRuntimeExports.jsx("h2",{children:s.score})]}),ScoreBoard=()=>{const{appState:s}=useAppContext$1();return jsxRuntimeExports.jsxs(StyledScoreBoard,{children:[jsxRuntimeExports.jsx(ScoreCard,{player:"Red",score:s.redScore}),jsxRuntimeExports.jsx(ScoreCard,{player:"Blue",score:s.blueScore})]})},DiceBar=dt.div`
    display: flex;
    flex-direction: row;
    justify-content: center;
    gap: 2px;
`,Die=({color:s})=>jsxRuntimeExports.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:s}}),Dice=()=>{const{appState:s}=useAppContext$1();return jsxRuntimeExports.jsxs(DiceBar,{children:[jsxRuntimeExports.jsx(Die,{color:s.diceRoll[0]===0?"black":"white"}),jsxRuntimeExports.jsx(Die,{color:s.diceRoll[1]===0?"black":"white"}),jsxRuntimeExports.jsx(Die,{color:s.diceRoll[2]===0?"black":"white"}),jsxRuntimeExports.jsx(Die,{color:s.diceRoll[3]===0?"black":"white"})]})},ActionTypes={ROLL_DICE:"ROLL_DICE",MOVE_PIECE:"MOVE_PIECE",GENERATE_CANDIDATE_MOVE:"GENERATE_CANDIDATE_MOVE",TOGGLE_DICE:"TOGGLE_DICE",SCORE:"SCORE",CAPTURE:"CAPTURE",DECREMENT_RED_STACK:"DECREMENT_RED_STACK",DECREMENT_BLUE_STACK:"DECREMENT_BLUE_STACK",CLEAR_CANDIDATE_MOVE:"CLEAR_CANDIDATE_MOVE"},rollDice$1=()=>({type:ActionTypes.ROLL_DICE}),movePiece=({newPosition:s,piece:e,x:d,y:b})=>({type:ActionTypes.MOVE_PIECE,payload:{newPosition:s,piece:e,x:d,y:b}}),generateCandidateMove=({candidateMove:s})=>({type:ActionTypes.GENERATE_CANDIDATE_MOVE,payload:{candidateMove:s}}),decrementRedStack=()=>({type:ActionTypes.DECREMENT_RED_STACK}),decrementBlueStack=()=>({type:ActionTypes.DECREMENT_BLUE_STACK}),capture=({piece:s})=>({type:ActionTypes.CAPTURE,payload:{piece:s}}),clearCandidateMove=()=>({type:ActionTypes.CLEAR_CANDIDATE_MOVE}),toggleDice=()=>({type:ActionTypes.TOGGLE_DICE}),Dispatcher={rollDice:rollDice$1,movePiece,generateCandidateMove,toggleDice,decrementBlueStack,decrementRedStack,capture,clearCandidateMove},StyledControlPanel=dt(SoftenedDiv)`
    width: 30vh;
    height: 30vh;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    transition: background-color 0.3s ease-in-out;
    background-color: ${s=>s.turn==="r"?"tomato":"#4e949a"};
`;dt(Button)`
    &.btn-primary {
        transition: background-color 0.5s ease-in-out, border-color 0.5s ease-in-out;
        background-color: ${s=>s.turn==="r"?"white":"black"};
        border-color: ${s=>s.turn==="r"?"white":"black"};

        &:hover, &:focus, &:active {
            background-color: ${s=>s.turn==="r"?"lightgray":"darkgray"};
            border-color: ${s=>s.turn==="r"?"lightgray":"darkgray"};
        }
    }
`;const ControlPanel$1=()=>{const{appState:s,dispatch:e}=useAppContext$1();return console.log("Checking current turn: ",s.turn),jsxRuntimeExports.jsxs(StyledControlPanel,{turn:s.turn,children:[jsxRuntimeExports.jsx(ScoreBoard,{}),jsxRuntimeExports.jsx(Button,{onClick:()=>e(Dispatcher.rollDice()),disabled:s.diceOff,variant:"primary",turn:s.turn,style:{width:"100%",marginBottom:"5px"},children:"Roll Dice"}),jsxRuntimeExports.jsx(Dice,{})]})},createPosition=()=>{const s=new Array(3).fill("").map(e=>new Array(8).fill(""));return s[2][3]="rp",s[0][3]="bp",s},copyPosition=s=>{const e=new Array(3).fill("").map(d=>new Array(8).fill(""));for(let d=0;d<3;d++)for(let b=0;b<8;b++)e[d][b]=s[d][b];return e},rollDice=()=>Array.from({length:4},()=>Math.floor(Math.random()*2)),getMove=(s,e,d,b,tt)=>{const nt={"2-3":0,"2-4":1,"2-5":2,"2-6":3,"2-7":4,"1-7":5,"1-6":6,"1-5":7,"1-4":8,"1-3":9,"1-2":10,"1-1":11,"1-0":12,"2-0":13,"2-1":14,"2-2":15},ot={"0-3":0,"0-4":1,"0-5":2,"0-6":3,"0-7":4,"1-7":5,"1-6":6,"1-5":7,"1-4":8,"1-3":9,"1-2":10,"1-1":11,"1-0":12,"0-0":13,"0-1":14,"0-2":15},ht={0:"2-3",1:"2-4",2:"2-5",3:"2-6",4:"2-7",5:"1-7",6:"1-6",7:"1-5",8:"1-4",9:"1-3",10:"1-2",11:"1-1",12:"1-0",13:"2-0",14:"2-1",15:"2-2"},mt={0:"0-3",1:"0-4",2:"0-5",3:"0-6",4:"0-7",5:"1-7",6:"1-6",7:"1-5",8:"1-4",9:"1-3",10:"1-2",11:"1-1",12:"1-0",13:"0-0",14:"0-1",15:"0-2"},gt=`${d}-${b}`;let yt;if(e[0]==="r"){const vt=nt[gt]+tt;if(vt>15)return null;yt=ht[vt]}else{const vt=ot[gt]+tt;if(vt>15)return null;yt=mt[vt]}const[ft,st]=yt.split("-");return[parseInt(ft),parseInt(st)]},normalize=s=>{const e=s.reduce((d,b)=>d+b,0);return s.map(d=>d/e)},Rp="/probability-tiptap/assets/rp-HNpSzTx9.png",Bp="/probability-tiptap/assets/bp-Bca_DnTz.png",StyledPiece=dt.div`
    width: 12.5%;
    height: 33.3333%;
    position: absolute;
    background-size: 100%;

    &.bp { background-image: url(${Bp});}
    &.rp { background-image: url(${Rp});}

    &.p-20 { transform: translate(0%, 0%); }
    &.p-21 { transform: translate(100%, 0%); }
    &.p-22 { transform: translate(200%, 0%); }
    &.p-23 { transform: translate(300%, 0%); }
    &.p-24 { transform: translate(400%, 0%); }
    &.p-25 { transform: translate(500%, 0%); }
    &.p-26 { transform: translate(600%, 0%); }
    &.p-27 { transform: translate(700%, 0%); }

    &.p-10 { transform: translate(0%, 100%); }
    &.p-11 { transform: translate(100%, 100%); }
    &.p-12 { transform: translate(200%, 100%); }
    &.p-13 { transform: translate(300%, 100%); }
    &.p-14 { transform: translate(400%, 100%); }
    &.p-15 { transform: translate(500%, 100%); }
    &.p-16 { transform: translate(600%, 100%); }
    &.p-17 { transform: translate(700%, 100%); }

    &.p-00 { transform: translate(0%, 200%); }
    &.p-01 { transform: translate(100%, 200%); }
    &.p-02 { transform: translate(200%, 200%); }
    &.p-03 { transform: translate(300%, 200%); }
    &.p-04 { transform: translate(400%, 200%); }
    &.p-05 { transform: translate(500%, 200%); }
    &.p-06 { transform: translate(600%, 200%); }
    &.p-07 { transform: translate(700%, 200%); }
`,Piece=({row:s,col:e,piece:d})=>{const{appState:b,dispatch:tt}=useAppContext$1(),{turn:nt,position:ot,moveLength:ht}=b,mt=ot[ot.length-1],gt=ft=>{if(b.piecesOn&&(ft.dataTransfer.effectAllowed="move",ft.dataTransfer.setData("text/plain",`${d},${s},${e}`),setTimeout(()=>{ft.target.style.display="none"},0)),nt===d[0]){const st=getMove(mt,d,s,e,ht);tt(Dispatcher.generateCandidateMove({candidateMove:st}))}},yt=ft=>ft.target.style.display="block";return jsxRuntimeExports.jsx(StyledPiece,{className:`piece ${d} p-${s}${e}`,draggable:b.piecesOn,onDragStart:gt,onDragEnd:yt})},TILE_CONSTANT=50/3,initGameState={position:[createPosition()],turn:"b",candidateMove:[],diceRoll:[0,0,0,0],moveLength:0,diceOff:!1,redScore:0,blueScore:0,redStack:7,blueStack:7,diceFrequency:[0,0,0,0,0,0]},StyledStackCounter=dt.div`
    position: absolute;
    transform: ${s=>s.player==="b"?`translate(${3*TILE_CONSTANT}vh, ${2*TILE_CONSTANT}vh)`:`translate(${3*TILE_CONSTANT}vh, ${0*TILE_CONSTANT}vh)`};
    background-color: ${s=>s.player==="r"?"rgba(255, 99, 71, 0.3)":"rgba(78, 148, 154, 0.3)"};
    width: ${TILE_CONSTANT/4}vh;
    height: ${TILE_CONSTANT/4}vh;
    border-radius: 20%;
    margin-top: ${TILE_CONSTANT/32}vh;
    margin-left: ${TILE_CONSTANT/32}vh;
    padding-top: ${TILE_CONSTANT/32}vh;
    display: flex;
    justify-content: center;
    align-items: center;
    user-select: none;

    h2 {
        font-size: calc(1vw + 1vh + 0.5vmin); /* Example of scaling based on viewport */
        /* Adjust the formula as needed to fit your design */
    }
`,StackCounter=s=>{const{appState:e}=useAppContext$1(),d=s.player==="r"?e.redStack:e.blueStack;return jsxRuntimeExports.jsx(StyledStackCounter,{player:s.player,children:jsxRuntimeExports.jsx("h2",{children:d})})},StyledPieces=dt.div`
    position: absolute;
    width: calc(8 * ${TILE_CONSTANT}vh);          /* Match the width of the grid */
    height: calc(3 * ${TILE_CONSTANT}vh);         /* Match the height of the grid */
    left: 50%;                                  /* Center horizontally */
    top: 50%;                                   /* Center vertically */
    transform: translate(-50%, -50%);           /* Offset the centering */
    box-sizing: border-box;
`,Pieces=()=>{const s=reactExports.useRef(),{appState:e,dispatch:d}=useAppContext$1(),b=e.position[e.position.length-1];console.log(b);const tt=ht=>{const{width:mt,left:gt,top:yt,height:ft}=s.current.getBoundingClientRect(),st=ft/3,bt=mt/8,vt=Math.floor((ht.clientX-gt)/bt);return{x:2-Math.floor((ht.clientY-yt)/st),y:vt}},nt=ht=>{const mt=copyPosition(e.position[e.position.length-1]);console.log(mt);const{x:gt,y:yt}=tt(ht),[ft,st,bt]=ht.dataTransfer.getData("text").split(",");if(!(!ft||!st||!bt)){if(e.candidateMove&&e.candidateMove[0]===gt&&e.candidateMove[1]===yt){if(st==="2"&&bt==="3"&&e.redStack>0?(d(Dispatcher.decrementRedStack()),e.redStack===1&&(mt[st][bt]="")):st==="0"&&bt==="3"&&e.blueStack>0?(d(Dispatcher.decrementBlueStack()),e.blueStack===1&&(mt[st][bt]="")):mt[st][bt]="",ft==="rp"&&mt[gt][yt]==="bp"?(d(Dispatcher.capture({piece:"b"})),mt[0][3]="bp"):ft==="bp"&&mt[gt][yt]==="rp"&&(d(Dispatcher.capture({piece:"r"})),mt[2][3]="rp"),ft===mt[gt][yt])return;mt[gt][yt]=ft,mt[0][2]="",mt[2][2]="",d(Dispatcher.movePiece({newPosition:mt,x:gt,y:yt}))}d(Dispatcher.clearCandidateMove())}},ot=ht=>ht.preventDefault();return jsxRuntimeExports.jsxs(StyledPieces,{ref:s,onDragOver:ot,onDrop:nt,children:[b.map((ht,mt)=>ht.map((gt,yt)=>b[mt][yt]?jsxRuntimeExports.jsx(Piece,{row:mt,col:yt,piece:b[mt][yt]},`${mt}-${yt}`):null)),jsxRuntimeExports.jsx(StackCounter,{player:"r"}),jsxRuntimeExports.jsx(StackCounter,{player:"b"})]})},rosette="/probability-tiptap/assets/rosette-BJ8I05RZ.png",dice="/probability-tiptap/assets/dice-BcfnomJy.png",eyes="/probability-tiptap/assets/eyes-BqfdIvjv.png",fxf="/probability-tiptap/assets/four-by-four-DoLDQ_W6.png",zigZag="/probability-tiptap/assets/zig-zag-B9TGYTbq.png",quad="/probability-tiptap/assets/quadrant-Do65EVGM.png",BoardStyle=dt.div`
  display: grid;
  grid-template-columns: repeat(8, ${TILE_CONSTANT}vh);
  position: relative;
  box-sizing: border-box;
  margin: auto;
  justify-content: center;
  align-items: center;
  margin-top: 0px;
  margin-left: 0px;
  margin-right: 0px;
  /* background-color: #003366 */
`,TilesStyle=dt.div`
  display: grid;
  grid-template-columns: repeat(8, ${TILE_CONSTANT}vh);
  grid-template-rows: repeat(3, ${TILE_CONSTANT}vh);
  width: calc(8 * ${TILE_CONSTANT}vh);
  position: relative;
  box-sizing: border-box;
`,TileStyle=dt.div`
  position: relative;
  border: 1px solid black;
  background: #003366;

  &.tile--light {
    background: transparent;
    border: 0px; 
    /* border: 1px solid white; */
  }

  &.tile--dark {
    background: #5f0909;
    background-image: url(${rosette});
    border: 1px solid black;
    background-repeat: no-repeat;
    background-size: cover;
  }
  
  &.tile--dice {
    background-image: url(${dice});
    border: 1px solid black;
    background-repeat: no-repeat;
    background-size: cover;
  }

  &.tile--eyes {
    background-image: url(${eyes});
    border: 1px solid black;
    background-repeat: no-repeat;
    background-size: cover;
  }

  &.tile--four-by-four {
    background-image: url(${fxf});
    border: 1px solid black;
    background-repeat: no-repeat;
    background-size: cover;
  }

  &.tile--quadrant {
    background-image: url(${quad});
    border: 1px solid black;
    background-repeat: no-repeat;
    background-size: cover;
  }

  &.tile--zigzag {
    background-image: url(${zigZag});
    border: 1px solid black;
    background-repeat: no-repeat;
    background-size: cover;
  }

  &.highlight--blue {
    background: turquoise;
    opacity: 0.5;
  }

  &.highlight--red {
    background: tomato;
    opacity: 0.5;
  }
`,Board=()=>{const{appState:s}=useAppContext$1(),e=Array(3).fill().map((tt,nt)=>8-nt),d=Array(8).fill().map((tt,nt)=>nt+1),b=(tt,nt)=>{let ot="tile";return tt===0&&nt===1||tt===0&&nt===7||tt===1&&nt===4||tt===2&&nt===1||tt===2&&nt===7?ot+=" tile--dark ":tt===0&&nt===2||tt===0&&nt===3||tt===2&&nt===2||tt===2&&nt===3?ot+=" tile--light ":tt===1&&nt===0||tt===1&&nt===3||tt===1&&nt===6||tt===2&&nt===5||tt===0&&nt===5?ot+=" tile--dice ":tt===0&&nt===4||tt===0&&nt===6||tt===2&&nt===4||tt===2&&nt===6||tt===1&&nt===1?ot+=" tile--eyes ":tt===1&&nt===2||tt===1&&nt===5?ot+=" tile--quadrant ":tt===2&&nt===0||tt===0&&nt===0?ot+=" tile--zigzag ":tt===1&&nt===7&&(ot+=" tile--four-by-four "),s.candidateMove[0]===tt&&s.candidateMove[1]===nt&&s.turn==="b"?ot+=" highlight--blue":s.candidateMove[0]===tt&&s.candidateMove[1]===nt&&s.turn==="r"&&(ot+=" highlight--red"),ot};return jsxRuntimeExports.jsxs(BoardStyle,{children:[jsxRuntimeExports.jsx(TilesStyle,{children:e.map((tt,nt)=>d.map((ot,ht)=>jsxRuntimeExports.jsx(TileStyle,{className:b(2-nt,ht),children:" "},`${ot}-${tt}`)))}),jsxRuntimeExports.jsx(Pieces,{})]})},reducer=(s,e)=>{switch(e.type){case ActionTypes.ROLL_DICE:{let{turn:d}=s;const b=rollDice(),tt=b.reduce((nt,ot)=>nt+ot,0);return console.log("You may move ",tt," spaces."),tt?s.diceOff=!0:(d=d==="b"?"r":"b",s.diceOff=!1),s.diceFrequency[tt]+=1,{...s,turn:d,diceRoll:b,moveLength:tt,diceOff:s.diceOff,piecesOn:!0,diceFrequency:s.diceFrequency}}case ActionTypes.MOVE_PIECE:{let{turn:d,position:b}=s;b=[...b,e.payload.newPosition];const tt=[e.payload.x,e.payload.y];console.log("Moved piece to position: ",tt[0],tt[1]),[[2,1],[0,1],[1,4],[2,7],[0,7]].find(mt=>mt[0]===tt[0]&&mt[1]===tt[1])||(d=d==="b"?"r":"b");const ot=tt[0]===2&&tt[1]===2,ht=tt[0]===0&&tt[1]===2;return{...s,turn:d,position:b,diceOff:!1,piecesOn:!1,redScore:s.redScore+ot,blueScore:s.blueScore+ht}}case ActionTypes.GENERATE_CANDIDATE_MOVE:return{...s,candidateMove:e.payload.candidateMove};case ActionTypes.CAPTURE:return e.payload.piece==="b"?{...s,blueStack:s.blueStack+1}:{...s,redStack:s.redStack+1};case ActionTypes.DECREMENT_RED_STACK:return{...s,redStack:s.redStack-1};case ActionTypes.DECREMENT_BLUE_STACK:return{...s,blueStack:s.blueStack-1};case ActionTypes.CLEAR_CANDIDATE_MOVE:return{...s,candidateMove:[]};case ActionTypes.SCORE:default:return s}},defaultDatasetIdKey="label";function reforwardRef(s,e){typeof s=="function"?s(e):s&&(s.current=e)}function setOptions(s,e){const d=s.options;d&&e&&Object.assign(d,e)}function setLabels(s,e){s.labels=e}function setDatasets(s,e){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:defaultDatasetIdKey;const b=[];s.datasets=e.map(tt=>{const nt=s.datasets.find(ot=>ot[d]===tt[d]);return!nt||!tt.data||b.includes(nt)?{...tt}:(b.push(nt),Object.assign(nt,tt),nt)})}function cloneData(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:defaultDatasetIdKey;const d={labels:[],datasets:[]};return setLabels(d,s.labels),setDatasets(d,s.datasets,e),d}function ChartComponent(s,e){const{height:d=150,width:b=300,redraw:tt=!1,datasetIdKey:nt,type:ot,data:ht,options:mt,plugins:gt=[],fallbackContent:yt,updateMode:ft,...st}=s,bt=reactExports.useRef(null),vt=reactExports.useRef(),xt=()=>{bt.current&&(vt.current=new Chart$1(bt.current,{type:ot,data:cloneData(ht,nt),options:mt&&{...mt},plugins:gt}),reforwardRef(e,vt.current))},wt=()=>{reforwardRef(e,null),vt.current&&(vt.current.destroy(),vt.current=null)};return reactExports.useEffect(()=>{!tt&&vt.current&&mt&&setOptions(vt.current,mt)},[tt,mt]),reactExports.useEffect(()=>{!tt&&vt.current&&setLabels(vt.current.config.data,ht.labels)},[tt,ht.labels]),reactExports.useEffect(()=>{!tt&&vt.current&&ht.datasets&&setDatasets(vt.current.config.data,ht.datasets,nt)},[tt,ht.datasets]),reactExports.useEffect(()=>{vt.current&&(tt?(wt(),setTimeout(xt)):vt.current.update(ft))},[tt,mt,ht.labels,ht.datasets,ft]),reactExports.useEffect(()=>{vt.current&&(wt(),setTimeout(xt))},[ot]),reactExports.useEffect(()=>(xt(),()=>wt()),[]),React.createElement("canvas",Object.assign({ref:bt,role:"img",height:d,width:b},st),yt)}const Chart=reactExports.forwardRef(ChartComponent);function createTypedChart(s,e){return Chart$1.register(e),reactExports.forwardRef((d,b)=>React.createElement(Chart,Object.assign({},d,{ref:b,type:s})))}const Bar=createTypedChart("bar",BarController);Chart$1.register(CategoryScale,LinearScale,BarElement,plugin_title,plugin_tooltip,plugin_legend);const barChartData={labels:["0","1","2","3","4"],datasets:[{label:"Dice Roll Frequency",backgroundColor:["rbga(255, 99, 132, 0.2)"],borderColor:["rgba(54, 162, 235, 1)"],borderWidth:1}]},BarChart=()=>{const{appState:s}=useAppContext$1(),e={},d={...barChartData,datasets:[{...barChartData.datasets[0],data:normalize(s.diceFrequency)}]};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Bar,{options:e,data:d})})},GameWindow=dt.div`
    /* Set the display to flex and arrange items in a row */
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;

    /* Set the width to 100% and the height to 50vh */
    width: 100%;

    /* Set the background color to #f0f0f0 */
    background-color: #f0f0f0;
    
    /* Add a border radius of 10px */
    border-radius: 10px;
    /* Apply margin to all direct children elements */
    & > * {
        margin-right: 10px;
    }
`,BarWindow=dt.div`
    width: 100%;
    height: 50vh;
    /* background-color: yellow; */
    /* Center the contents horizontally and vertically */
    display: flex;
    justify-content: center;
    align-items: center;
`,BoardWindow=dt.div`
    /* background-color: green; */
`,ControlsWindow=dt.div`
    height: 100%;
    /* background-color: blue; */
`;function GameOfUr(){const[s,e]=reactExports.useReducer(reducer,initGameState),d={appState:s,dispatch:e};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(AppContext.Provider,{value:d,children:[jsxRuntimeExports.jsxs(GameWindow,{children:[jsxRuntimeExports.jsx(BoardWindow,{children:jsxRuntimeExports.jsx(Board,{})}),jsxRuntimeExports.jsx(ControlsWindow,{children:jsxRuntimeExports.jsx(ControlPanel$1,{})})]}),jsxRuntimeExports.jsx(BarWindow,{children:jsxRuntimeExports.jsx(BarChart,{})})]})})}function count(s){var e=0,d=s.children,b=d&&d.length;if(!b)e=1;else for(;--b>=0;)e+=d[b].value;s.value=e}function node_count(){return this.eachAfter(count)}function node_each(s){var e=this,d,b=[e],tt,nt,ot;do for(d=b.reverse(),b=[];e=d.pop();)if(s(e),tt=e.children,tt)for(nt=0,ot=tt.length;nt<ot;++nt)b.push(tt[nt]);while(b.length);return this}function node_eachBefore(s){for(var e=this,d=[e],b,tt;e=d.pop();)if(s(e),b=e.children,b)for(tt=b.length-1;tt>=0;--tt)d.push(b[tt]);return this}function node_eachAfter(s){for(var e=this,d=[e],b=[],tt,nt,ot;e=d.pop();)if(b.push(e),tt=e.children,tt)for(nt=0,ot=tt.length;nt<ot;++nt)d.push(tt[nt]);for(;e=b.pop();)s(e);return this}function node_sum(s){return this.eachAfter(function(e){for(var d=+s(e.data)||0,b=e.children,tt=b&&b.length;--tt>=0;)d+=b[tt].value;e.value=d})}function node_sort(s){return this.eachBefore(function(e){e.children&&e.children.sort(s)})}function node_path(s){for(var e=this,d=leastCommonAncestor(e,s),b=[e];e!==d;)e=e.parent,b.push(e);for(var tt=b.length;s!==d;)b.splice(tt,0,s),s=s.parent;return b}function leastCommonAncestor(s,e){if(s===e)return s;var d=s.ancestors(),b=e.ancestors(),tt=null;for(s=d.pop(),e=b.pop();s===e;)tt=s,s=d.pop(),e=b.pop();return tt}function node_ancestors(){for(var s=this,e=[s];s=s.parent;)e.push(s);return e}function node_descendants(){var s=[];return this.each(function(e){s.push(e)}),s}function node_leaves(){var s=[];return this.eachBefore(function(e){e.children||s.push(e)}),s}function node_links(){var s=this,e=[];return s.each(function(d){d!==s&&e.push({source:d.parent,target:d})}),e}function hierarchy(s,e){var d=new Node$1(s),b=+s.value&&(d.value=s.value),tt,nt=[d],ot,ht,mt,gt;for(e==null&&(e=defaultChildren);tt=nt.pop();)if(b&&(tt.value=+tt.data.value),(ht=e(tt.data))&&(gt=ht.length))for(tt.children=new Array(gt),mt=gt-1;mt>=0;--mt)nt.push(ot=tt.children[mt]=new Node$1(ht[mt])),ot.parent=tt,ot.depth=tt.depth+1;return d.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function defaultChildren(s){return s.children}function copyData(s){s.data=s.data.data}function computeHeight(s){var e=0;do s.height=e;while((s=s.parent)&&s.height<++e)}function Node$1(s){this.data=s,this.depth=this.height=0,this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy};function defaultSeparation(s,e){return s.parent===e.parent?1:2}function nextLeft(s){var e=s.children;return e?e[0]:s.t}function nextRight(s){var e=s.children;return e?e[e.length-1]:s.t}function moveSubtree(s,e,d){var b=d/(e.i-s.i);e.c-=b,e.s+=d,s.c+=b,e.z+=d,e.m+=d}function executeShifts(s){for(var e=0,d=0,b=s.children,tt=b.length,nt;--tt>=0;)nt=b[tt],nt.z+=e,nt.m+=e,e+=nt.s+(d+=nt.c)}function nextAncestor(s,e,d){return s.a.parent===e.parent?s.a:d}function TreeNode(s,e){this._=s,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}TreeNode.prototype=Object.create(Node$1.prototype);function treeRoot(s){for(var e=new TreeNode(s,0),d,b=[e],tt,nt,ot,ht;d=b.pop();)if(nt=d._.children)for(d.children=new Array(ht=nt.length),ot=ht-1;ot>=0;--ot)b.push(tt=d.children[ot]=new TreeNode(nt[ot],ot)),tt.parent=d;return(e.parent=new TreeNode(null,0)).children=[e],e}function d3tree(){var s=defaultSeparation,e=1,d=1,b=null;function tt(gt){var yt=treeRoot(gt);if(yt.eachAfter(nt),yt.parent.m=-yt.z,yt.eachBefore(ot),b)gt.eachBefore(mt);else{var ft=gt,st=gt,bt=gt;gt.eachBefore(function(_t){_t.x<ft.x&&(ft=_t),_t.x>st.x&&(st=_t),_t.depth>bt.depth&&(bt=_t)});var vt=ft===st?1:s(ft,st)/2,xt=vt-ft.x,wt=e/(st.x+vt+xt),St=d/(bt.depth||1);gt.eachBefore(function(_t){_t.x=(_t.x+xt)*wt,_t.y=_t.depth*St})}return gt}function nt(gt){var yt=gt.children,ft=gt.parent.children,st=gt.i?ft[gt.i-1]:null;if(yt){executeShifts(gt);var bt=(yt[0].z+yt[yt.length-1].z)/2;st?(gt.z=st.z+s(gt._,st._),gt.m=gt.z-bt):gt.z=bt}else st&&(gt.z=st.z+s(gt._,st._));gt.parent.A=ht(gt,st,gt.parent.A||ft[0])}function ot(gt){gt._.x=gt.z+gt.parent.m,gt.m+=gt.parent.m}function ht(gt,yt,ft){if(yt){for(var st=gt,bt=gt,vt=yt,xt=st.parent.children[0],wt=st.m,St=bt.m,_t=vt.m,Tt=xt.m,Et;vt=nextRight(vt),st=nextLeft(st),vt&&st;)xt=nextLeft(xt),bt=nextRight(bt),bt.a=gt,Et=vt.z+_t-st.z-wt+s(vt._,st._),Et>0&&(moveSubtree(nextAncestor(vt,gt,ft),gt,Et),wt+=Et,St+=Et),_t+=vt.m,wt+=st.m,Tt+=xt.m,St+=bt.m;vt&&!nextRight(bt)&&(bt.t=vt,bt.m+=_t-St),st&&!nextLeft(xt)&&(xt.t=st,xt.m+=wt-Tt,ft=gt)}return ft}function mt(gt){gt.x*=e,gt.y=gt.depth*d}return tt.separation=function(gt){return arguments.length?(s=gt,tt):s},tt.size=function(gt){return arguments.length?(b=!1,e=+gt[0],d=+gt[1],tt):b?null:[e,d]},tt.nodeSize=function(gt){return arguments.length?(b=!0,e=+gt[0],d=+gt[1],tt):b?[e,d]:null},tt}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(s){var e=s+="",d=e.indexOf(":");return d>=0&&(e=s.slice(0,d))!=="xmlns"&&(s=s.slice(d+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:s}:s}function creatorInherit(s){return function(){var e=this.ownerDocument,d=this.namespaceURI;return d===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(s):e.createElementNS(d,s)}}function creatorFixed(s){return function(){return this.ownerDocument.createElementNS(s.space,s.local)}}function creator(s){var e=namespace(s);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector(s){return s==null?none:function(){return this.querySelector(s)}}function selection_select(s){typeof s!="function"&&(s=selector(s));for(var e=this._groups,d=e.length,b=new Array(d),tt=0;tt<d;++tt)for(var nt=e[tt],ot=nt.length,ht=b[tt]=new Array(ot),mt,gt,yt=0;yt<ot;++yt)(mt=nt[yt])&&(gt=s.call(mt,mt.__data__,yt,nt))&&("__data__"in mt&&(gt.__data__=mt.__data__),ht[yt]=gt);return new Selection$1(b,this._parents)}function array(s){return s==null?[]:Array.isArray(s)?s:Array.from(s)}function empty(){return[]}function selectorAll(s){return s==null?empty:function(){return this.querySelectorAll(s)}}function arrayAll(s){return function(){return array(s.apply(this,arguments))}}function selection_selectAll(s){typeof s=="function"?s=arrayAll(s):s=selectorAll(s);for(var e=this._groups,d=e.length,b=[],tt=[],nt=0;nt<d;++nt)for(var ot=e[nt],ht=ot.length,mt,gt=0;gt<ht;++gt)(mt=ot[gt])&&(b.push(s.call(mt,mt.__data__,gt,ot)),tt.push(mt));return new Selection$1(b,tt)}function matcher(s){return function(){return this.matches(s)}}function childMatcher(s){return function(e){return e.matches(s)}}var find=Array.prototype.find;function childFind(s){return function(){return find.call(this.children,s)}}function childFirst(){return this.firstElementChild}function selection_selectChild(s){return this.select(s==null?childFirst:childFind(typeof s=="function"?s:childMatcher(s)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(s){return function(){return filter.call(this.children,s)}}function selection_selectChildren(s){return this.selectAll(s==null?children:childrenFilter(typeof s=="function"?s:childMatcher(s)))}function selection_filter(s){typeof s!="function"&&(s=matcher(s));for(var e=this._groups,d=e.length,b=new Array(d),tt=0;tt<d;++tt)for(var nt=e[tt],ot=nt.length,ht=b[tt]=[],mt,gt=0;gt<ot;++gt)(mt=nt[gt])&&s.call(mt,mt.__data__,gt,nt)&&ht.push(mt);return new Selection$1(b,this._parents)}function sparse(s){return new Array(s.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(s,e){this.ownerDocument=s.ownerDocument,this.namespaceURI=s.namespaceURI,this._next=null,this._parent=s,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(s){return this._parent.insertBefore(s,this._next)},insertBefore:function(s,e){return this._parent.insertBefore(s,e)},querySelector:function(s){return this._parent.querySelector(s)},querySelectorAll:function(s){return this._parent.querySelectorAll(s)}};function constant$3(s){return function(){return s}}function bindIndex(s,e,d,b,tt,nt){for(var ot=0,ht,mt=e.length,gt=nt.length;ot<gt;++ot)(ht=e[ot])?(ht.__data__=nt[ot],b[ot]=ht):d[ot]=new EnterNode(s,nt[ot]);for(;ot<mt;++ot)(ht=e[ot])&&(tt[ot]=ht)}function bindKey(s,e,d,b,tt,nt,ot){var ht,mt,gt=new Map,yt=e.length,ft=nt.length,st=new Array(yt),bt;for(ht=0;ht<yt;++ht)(mt=e[ht])&&(st[ht]=bt=ot.call(mt,mt.__data__,ht,e)+"",gt.has(bt)?tt[ht]=mt:gt.set(bt,mt));for(ht=0;ht<ft;++ht)bt=ot.call(s,nt[ht],ht,nt)+"",(mt=gt.get(bt))?(b[ht]=mt,mt.__data__=nt[ht],gt.delete(bt)):d[ht]=new EnterNode(s,nt[ht]);for(ht=0;ht<yt;++ht)(mt=e[ht])&&gt.get(st[ht])===mt&&(tt[ht]=mt)}function datum(s){return s.__data__}function selection_data(s,e){if(!arguments.length)return Array.from(this,datum);var d=e?bindKey:bindIndex,b=this._parents,tt=this._groups;typeof s!="function"&&(s=constant$3(s));for(var nt=tt.length,ot=new Array(nt),ht=new Array(nt),mt=new Array(nt),gt=0;gt<nt;++gt){var yt=b[gt],ft=tt[gt],st=ft.length,bt=arraylike(s.call(yt,yt&&yt.__data__,gt,b)),vt=bt.length,xt=ht[gt]=new Array(vt),wt=ot[gt]=new Array(vt),St=mt[gt]=new Array(st);d(yt,ft,xt,wt,St,bt,e);for(var _t=0,Tt=0,Et,kt;_t<vt;++_t)if(Et=xt[_t]){for(_t>=Tt&&(Tt=_t+1);!(kt=wt[Tt])&&++Tt<vt;);Et._next=kt||null}}return ot=new Selection$1(ot,b),ot._enter=ht,ot._exit=mt,ot}function arraylike(s){return typeof s=="object"&&"length"in s?s:Array.from(s)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(s,e,d){var b=this.enter(),tt=this,nt=this.exit();return typeof s=="function"?(b=s(b),b&&(b=b.selection())):b=b.append(s+""),e!=null&&(tt=e(tt),tt&&(tt=tt.selection())),d==null?nt.remove():d(nt),b&&tt?b.merge(tt).order():tt}function selection_merge(s){for(var e=s.selection?s.selection():s,d=this._groups,b=e._groups,tt=d.length,nt=b.length,ot=Math.min(tt,nt),ht=new Array(tt),mt=0;mt<ot;++mt)for(var gt=d[mt],yt=b[mt],ft=gt.length,st=ht[mt]=new Array(ft),bt,vt=0;vt<ft;++vt)(bt=gt[vt]||yt[vt])&&(st[vt]=bt);for(;mt<tt;++mt)ht[mt]=d[mt];return new Selection$1(ht,this._parents)}function selection_order(){for(var s=this._groups,e=-1,d=s.length;++e<d;)for(var b=s[e],tt=b.length-1,nt=b[tt],ot;--tt>=0;)(ot=b[tt])&&(nt&&ot.compareDocumentPosition(nt)^4&&nt.parentNode.insertBefore(ot,nt),nt=ot);return this}function selection_sort(s){s||(s=ascending);function e(ft,st){return ft&&st?s(ft.__data__,st.__data__):!ft-!st}for(var d=this._groups,b=d.length,tt=new Array(b),nt=0;nt<b;++nt){for(var ot=d[nt],ht=ot.length,mt=tt[nt]=new Array(ht),gt,yt=0;yt<ht;++yt)(gt=ot[yt])&&(mt[yt]=gt);mt.sort(e)}return new Selection$1(tt,this._parents).order()}function ascending(s,e){return s<e?-1:s>e?1:s>=e?0:NaN}function selection_call(){var s=arguments[0];return arguments[0]=this,s.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var s=this._groups,e=0,d=s.length;e<d;++e)for(var b=s[e],tt=0,nt=b.length;tt<nt;++tt){var ot=b[tt];if(ot)return ot}return null}function selection_size(){let s=0;for(const e of this)++s;return s}function selection_empty(){return!this.node()}function selection_each(s){for(var e=this._groups,d=0,b=e.length;d<b;++d)for(var tt=e[d],nt=0,ot=tt.length,ht;nt<ot;++nt)(ht=tt[nt])&&s.call(ht,ht.__data__,nt,tt);return this}function attrRemove$1(s){return function(){this.removeAttribute(s)}}function attrRemoveNS$1(s){return function(){this.removeAttributeNS(s.space,s.local)}}function attrConstant$1(s,e){return function(){this.setAttribute(s,e)}}function attrConstantNS$1(s,e){return function(){this.setAttributeNS(s.space,s.local,e)}}function attrFunction$1(s,e){return function(){var d=e.apply(this,arguments);d==null?this.removeAttribute(s):this.setAttribute(s,d)}}function attrFunctionNS$1(s,e){return function(){var d=e.apply(this,arguments);d==null?this.removeAttributeNS(s.space,s.local):this.setAttributeNS(s.space,s.local,d)}}function selection_attr(s,e){var d=namespace(s);if(arguments.length<2){var b=this.node();return d.local?b.getAttributeNS(d.space,d.local):b.getAttribute(d)}return this.each((e==null?d.local?attrRemoveNS$1:attrRemove$1:typeof e=="function"?d.local?attrFunctionNS$1:attrFunction$1:d.local?attrConstantNS$1:attrConstant$1)(d,e))}function defaultView(s){return s.ownerDocument&&s.ownerDocument.defaultView||s.document&&s||s.defaultView}function styleRemove$1(s){return function(){this.style.removeProperty(s)}}function styleConstant$1(s,e,d){return function(){this.style.setProperty(s,e,d)}}function styleFunction$1(s,e,d){return function(){var b=e.apply(this,arguments);b==null?this.style.removeProperty(s):this.style.setProperty(s,b,d)}}function selection_style(s,e,d){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e=="function"?styleFunction$1:styleConstant$1)(s,e,d??"")):styleValue(this.node(),s)}function styleValue(s,e){return s.style.getPropertyValue(e)||defaultView(s).getComputedStyle(s,null).getPropertyValue(e)}function propertyRemove(s){return function(){delete this[s]}}function propertyConstant(s,e){return function(){this[s]=e}}function propertyFunction(s,e){return function(){var d=e.apply(this,arguments);d==null?delete this[s]:this[s]=d}}function selection_property(s,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(s,e)):this.node()[s]}function classArray(s){return s.trim().split(/^|\s+/)}function classList(s){return s.classList||new ClassList(s)}function ClassList(s){this._node=s,this._names=classArray(s.getAttribute("class")||"")}ClassList.prototype={add:function(s){var e=this._names.indexOf(s);e<0&&(this._names.push(s),this._node.setAttribute("class",this._names.join(" ")))},remove:function(s){var e=this._names.indexOf(s);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(s){return this._names.indexOf(s)>=0}};function classedAdd(s,e){for(var d=classList(s),b=-1,tt=e.length;++b<tt;)d.add(e[b])}function classedRemove(s,e){for(var d=classList(s),b=-1,tt=e.length;++b<tt;)d.remove(e[b])}function classedTrue(s){return function(){classedAdd(this,s)}}function classedFalse(s){return function(){classedRemove(this,s)}}function classedFunction(s,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,s)}}function selection_classed(s,e){var d=classArray(s+"");if(arguments.length<2){for(var b=classList(this.node()),tt=-1,nt=d.length;++tt<nt;)if(!b.contains(d[tt]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(d,e))}function textRemove(){this.textContent=""}function textConstant$1(s){return function(){this.textContent=s}}function textFunction$1(s){return function(){var e=s.apply(this,arguments);this.textContent=e??""}}function selection_text(s){return arguments.length?this.each(s==null?textRemove:(typeof s=="function"?textFunction$1:textConstant$1)(s)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(s){return function(){this.innerHTML=s}}function htmlFunction(s){return function(){var e=s.apply(this,arguments);this.innerHTML=e??""}}function selection_html(s){return arguments.length?this.each(s==null?htmlRemove:(typeof s=="function"?htmlFunction:htmlConstant)(s)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(s){var e=typeof s=="function"?s:creator(s);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(s,e){var d=typeof s=="function"?s:creator(s),b=e==null?constantNull:typeof e=="function"?e:selector(e);return this.select(function(){return this.insertBefore(d.apply(this,arguments),b.apply(this,arguments)||null)})}function remove(){var s=this.parentNode;s&&s.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var s=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(s,this.nextSibling):s}function selection_cloneDeep(){var s=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(s,this.nextSibling):s}function selection_clone(s){return this.select(s?selection_cloneDeep:selection_cloneShallow)}function selection_datum(s){return arguments.length?this.property("__data__",s):this.node().__data__}function contextListener(s){return function(e){s.call(this,e,this.__data__)}}function parseTypenames$1(s){return s.trim().split(/^|\s+/).map(function(e){var d="",b=e.indexOf(".");return b>=0&&(d=e.slice(b+1),e=e.slice(0,b)),{type:e,name:d}})}function onRemove(s){return function(){var e=this.__on;if(e){for(var d=0,b=-1,tt=e.length,nt;d<tt;++d)nt=e[d],(!s.type||nt.type===s.type)&&nt.name===s.name?this.removeEventListener(nt.type,nt.listener,nt.options):e[++b]=nt;++b?e.length=b:delete this.__on}}}function onAdd(s,e,d){return function(){var b=this.__on,tt,nt=contextListener(e);if(b){for(var ot=0,ht=b.length;ot<ht;++ot)if((tt=b[ot]).type===s.type&&tt.name===s.name){this.removeEventListener(tt.type,tt.listener,tt.options),this.addEventListener(tt.type,tt.listener=nt,tt.options=d),tt.value=e;return}}this.addEventListener(s.type,nt,d),tt={type:s.type,name:s.name,value:e,listener:nt,options:d},b?b.push(tt):this.__on=[tt]}}function selection_on(s,e,d){var b=parseTypenames$1(s+""),tt,nt=b.length,ot;if(arguments.length<2){var ht=this.node().__on;if(ht){for(var mt=0,gt=ht.length,yt;mt<gt;++mt)for(tt=0,yt=ht[mt];tt<nt;++tt)if((ot=b[tt]).type===yt.type&&ot.name===yt.name)return yt.value}return}for(ht=e?onAdd:onRemove,tt=0;tt<nt;++tt)this.each(ht(b[tt],e,d));return this}function dispatchEvent(s,e,d){var b=defaultView(s),tt=b.CustomEvent;typeof tt=="function"?tt=new tt(e,d):(tt=b.document.createEvent("Event"),d?(tt.initEvent(e,d.bubbles,d.cancelable),tt.detail=d.detail):tt.initEvent(e,!1,!1)),s.dispatchEvent(tt)}function dispatchConstant(s,e){return function(){return dispatchEvent(this,s,e)}}function dispatchFunction(s,e){return function(){return dispatchEvent(this,s,e.apply(this,arguments))}}function selection_dispatch(s,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(s,e))}function*selection_iterator(){for(var s=this._groups,e=0,d=s.length;e<d;++e)for(var b=s[e],tt=0,nt=b.length,ot;tt<nt;++tt)(ot=b[tt])&&(yield ot)}var root=[null];function Selection$1(s,e){this._groups=s,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(s){return typeof s=="string"?new Selection$1([[document.querySelector(s)]],[document.documentElement]):new Selection$1([[s]],root)}function sourceEvent(s){let e;for(;e=s.sourceEvent;)s=e;return s}function pointer(s,e){if(s=sourceEvent(s),e===void 0&&(e=s.currentTarget),e){var d=e.ownerSVGElement||e;if(d.createSVGPoint){var b=d.createSVGPoint();return b.x=s.clientX,b.y=s.clientY,b=b.matrixTransform(e.getScreenCTM().inverse()),[b.x,b.y]}if(e.getBoundingClientRect){var tt=e.getBoundingClientRect();return[s.clientX-tt.left-e.clientLeft,s.clientY-tt.top-e.clientTop]}}return[s.pageX,s.pageY]}var noop={value:()=>{}};function dispatch(){for(var s=0,e=arguments.length,d={},b;s<e;++s){if(!(b=arguments[s]+"")||b in d||/[\s.]/.test(b))throw new Error("illegal type: "+b);d[b]=[]}return new Dispatch(d)}function Dispatch(s){this._=s}function parseTypenames(s,e){return s.trim().split(/^|\s+/).map(function(d){var b="",tt=d.indexOf(".");if(tt>=0&&(b=d.slice(tt+1),d=d.slice(0,tt)),d&&!e.hasOwnProperty(d))throw new Error("unknown type: "+d);return{type:d,name:b}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(s,e){var d=this._,b=parseTypenames(s+"",d),tt,nt=-1,ot=b.length;if(arguments.length<2){for(;++nt<ot;)if((tt=(s=b[nt]).type)&&(tt=get$1(d[tt],s.name)))return tt;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++nt<ot;)if(tt=(s=b[nt]).type)d[tt]=set$1(d[tt],s.name,e);else if(e==null)for(tt in d)d[tt]=set$1(d[tt],s.name,null);return this},copy:function(){var s={},e=this._;for(var d in e)s[d]=e[d].slice();return new Dispatch(s)},call:function(s,e){if((tt=arguments.length-2)>0)for(var d=new Array(tt),b=0,tt,nt;b<tt;++b)d[b]=arguments[b+2];if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(nt=this._[s],b=0,tt=nt.length;b<tt;++b)nt[b].value.apply(e,d)},apply:function(s,e,d){if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(var b=this._[s],tt=0,nt=b.length;tt<nt;++tt)b[tt].value.apply(e,d)}};function get$1(s,e){for(var d=0,b=s.length,tt;d<b;++d)if((tt=s[d]).name===e)return tt.value}function set$1(s,e,d){for(var b=0,tt=s.length;b<tt;++b)if(s[b].name===e){s[b]=noop,s=s.slice(0,b).concat(s.slice(b+1));break}return d!=null&&s.push({name:e,value:d}),s}const nonpassivecapture={capture:!0,passive:!1};function noevent$1(s){s.preventDefault(),s.stopImmediatePropagation()}function dragDisable(s){var e=s.document.documentElement,d=select(s).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in e?d.on("selectstart.drag",noevent$1,nonpassivecapture):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yesdrag(s,e){var d=s.document.documentElement,b=select(s).on("dragstart.drag",null);e&&(b.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){b.on("click.drag",null)},0)),"onselectstart"in d?b.on("selectstart.drag",null):(d.style.MozUserSelect=d.__noselect,delete d.__noselect)}function define(s,e,d){s.prototype=e.prototype=d,d.constructor=s}function extend(s,e){var d=Object.create(s.prototype);for(var b in e)d[b]=e[b];return d}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(s){return Object.assign(new this.constructor,this,s)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(s){var e,d;return s=(s+"").trim().toLowerCase(),(e=reHex.exec(s))?(d=e[1].length,e=parseInt(e[1],16),d===6?rgbn(e):d===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):d===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):d===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(s))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(s))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(s))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(s))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(s))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(s))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(s)?rgbn(named[s]):s==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(s){return new Rgb(s>>16&255,s>>8&255,s&255,1)}function rgba(s,e,d,b){return b<=0&&(s=e=d=NaN),new Rgb(s,e,d,b)}function rgbConvert(s){return s instanceof Color||(s=color(s)),s?(s=s.rgb(),new Rgb(s.r,s.g,s.b,s.opacity)):new Rgb}function rgb(s,e,d,b){return arguments.length===1?rgbConvert(s):new Rgb(s,e,d,b??1)}function Rgb(s,e,d,b){this.r=+s,this.g=+e,this.b=+d,this.opacity=+b}define(Rgb,rgb,extend(Color,{brighter(s){return s=s==null?brighter:Math.pow(brighter,s),new Rgb(this.r*s,this.g*s,this.b*s,this.opacity)},darker(s){return s=s==null?darker:Math.pow(darker,s),new Rgb(this.r*s,this.g*s,this.b*s,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const s=clampa(this.opacity);return`${s===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${s===1?")":`, ${s})`}`}function clampa(s){return isNaN(s)?1:Math.max(0,Math.min(1,s))}function clampi(s){return Math.max(0,Math.min(255,Math.round(s)||0))}function hex(s){return s=clampi(s),(s<16?"0":"")+s.toString(16)}function hsla(s,e,d,b){return b<=0?s=e=d=NaN:d<=0||d>=1?s=e=NaN:e<=0&&(s=NaN),new Hsl(s,e,d,b)}function hslConvert(s){if(s instanceof Hsl)return new Hsl(s.h,s.s,s.l,s.opacity);if(s instanceof Color||(s=color(s)),!s)return new Hsl;if(s instanceof Hsl)return s;s=s.rgb();var e=s.r/255,d=s.g/255,b=s.b/255,tt=Math.min(e,d,b),nt=Math.max(e,d,b),ot=NaN,ht=nt-tt,mt=(nt+tt)/2;return ht?(e===nt?ot=(d-b)/ht+(d<b)*6:d===nt?ot=(b-e)/ht+2:ot=(e-d)/ht+4,ht/=mt<.5?nt+tt:2-nt-tt,ot*=60):ht=mt>0&&mt<1?0:ot,new Hsl(ot,ht,mt,s.opacity)}function hsl(s,e,d,b){return arguments.length===1?hslConvert(s):new Hsl(s,e,d,b??1)}function Hsl(s,e,d,b){this.h=+s,this.s=+e,this.l=+d,this.opacity=+b}define(Hsl,hsl,extend(Color,{brighter(s){return s=s==null?brighter:Math.pow(brighter,s),new Hsl(this.h,this.s,this.l*s,this.opacity)},darker(s){return s=s==null?darker:Math.pow(darker,s),new Hsl(this.h,this.s,this.l*s,this.opacity)},rgb(){var s=this.h%360+(this.h<0)*360,e=isNaN(s)||isNaN(this.s)?0:this.s,d=this.l,b=d+(d<.5?d:1-d)*e,tt=2*d-b;return new Rgb(hsl2rgb(s>=240?s-240:s+120,tt,b),hsl2rgb(s,tt,b),hsl2rgb(s<120?s+240:s-120,tt,b),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const s=clampa(this.opacity);return`${s===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${s===1?")":`, ${s})`}`}}));function clamph(s){return s=(s||0)%360,s<0?s+360:s}function clampt(s){return Math.max(0,Math.min(1,s||0))}function hsl2rgb(s,e,d){return(s<60?e+(d-e)*s/60:s<180?d:s<240?e+(d-e)*(240-s)/60:e)*255}const constant$2=s=>()=>s;function linear(s,e){return function(d){return s+d*e}}function exponential(s,e,d){return s=Math.pow(s,d),e=Math.pow(e,d)-s,d=1/d,function(b){return Math.pow(s+b*e,d)}}function gamma(s){return(s=+s)==1?nogamma:function(e,d){return d-e?exponential(e,d,s):constant$2(isNaN(e)?d:e)}}function nogamma(s,e){var d=e-s;return d?linear(s,d):constant$2(isNaN(s)?e:s)}const interpolateRgb=function s(e){var d=gamma(e);function b(tt,nt){var ot=d((tt=rgb(tt)).r,(nt=rgb(nt)).r),ht=d(tt.g,nt.g),mt=d(tt.b,nt.b),gt=nogamma(tt.opacity,nt.opacity);return function(yt){return tt.r=ot(yt),tt.g=ht(yt),tt.b=mt(yt),tt.opacity=gt(yt),tt+""}}return b.gamma=s,b}(1);function interpolateNumber(s,e){return s=+s,e=+e,function(d){return s*(1-d)+e*d}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(s){return function(){return s}}function one(s){return function(e){return s(e)+""}}function interpolateString(s,e){var d=reA.lastIndex=reB.lastIndex=0,b,tt,nt,ot=-1,ht=[],mt=[];for(s=s+"",e=e+"";(b=reA.exec(s))&&(tt=reB.exec(e));)(nt=tt.index)>d&&(nt=e.slice(d,nt),ht[ot]?ht[ot]+=nt:ht[++ot]=nt),(b=b[0])===(tt=tt[0])?ht[ot]?ht[ot]+=tt:ht[++ot]=tt:(ht[++ot]=null,mt.push({i:ot,x:interpolateNumber(b,tt)})),d=reB.lastIndex;return d<e.length&&(nt=e.slice(d),ht[ot]?ht[ot]+=nt:ht[++ot]=nt),ht.length<2?mt[0]?one(mt[0].x):zero(e):(e=mt.length,function(gt){for(var yt=0,ft;yt<e;++yt)ht[(ft=mt[yt]).i]=ft.x(gt);return ht.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(s,e,d,b,tt,nt){var ot,ht,mt;return(ot=Math.sqrt(s*s+e*e))&&(s/=ot,e/=ot),(mt=s*d+e*b)&&(d-=s*mt,b-=e*mt),(ht=Math.sqrt(d*d+b*b))&&(d/=ht,b/=ht,mt/=ht),s*b<e*d&&(s=-s,e=-e,mt=-mt,ot=-ot),{translateX:tt,translateY:nt,rotate:Math.atan2(e,s)*degrees,skewX:Math.atan(mt)*degrees,scaleX:ot,scaleY:ht}}var svgNode;function parseCss(s){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(s+"");return e.isIdentity?identity$1:decompose(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg(s){return s==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",s),!(s=svgNode.transform.baseVal.consolidate()))?identity$1:(s=s.matrix,decompose(s.a,s.b,s.c,s.d,s.e,s.f))}function interpolateTransform(s,e,d,b){function tt(gt){return gt.length?gt.pop()+" ":""}function nt(gt,yt,ft,st,bt,vt){if(gt!==ft||yt!==st){var xt=bt.push("translate(",null,e,null,d);vt.push({i:xt-4,x:interpolateNumber(gt,ft)},{i:xt-2,x:interpolateNumber(yt,st)})}else(ft||st)&&bt.push("translate("+ft+e+st+d)}function ot(gt,yt,ft,st){gt!==yt?(gt-yt>180?yt+=360:yt-gt>180&&(gt+=360),st.push({i:ft.push(tt(ft)+"rotate(",null,b)-2,x:interpolateNumber(gt,yt)})):yt&&ft.push(tt(ft)+"rotate("+yt+b)}function ht(gt,yt,ft,st){gt!==yt?st.push({i:ft.push(tt(ft)+"skewX(",null,b)-2,x:interpolateNumber(gt,yt)}):yt&&ft.push(tt(ft)+"skewX("+yt+b)}function mt(gt,yt,ft,st,bt,vt){if(gt!==ft||yt!==st){var xt=bt.push(tt(bt)+"scale(",null,",",null,")");vt.push({i:xt-4,x:interpolateNumber(gt,ft)},{i:xt-2,x:interpolateNumber(yt,st)})}else(ft!==1||st!==1)&&bt.push(tt(bt)+"scale("+ft+","+st+")")}return function(gt,yt){var ft=[],st=[];return gt=s(gt),yt=s(yt),nt(gt.translateX,gt.translateY,yt.translateX,yt.translateY,ft,st),ot(gt.rotate,yt.rotate,ft,st),ht(gt.skewX,yt.skewX,ft,st),mt(gt.scaleX,gt.scaleY,yt.scaleX,yt.scaleY,ft,st),gt=yt=null,function(bt){for(var vt=-1,xt=st.length,wt;++vt<xt;)ft[(wt=st[vt]).i]=wt.x(bt);return ft.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(s){return((s=Math.exp(s))+1/s)/2}function sinh(s){return((s=Math.exp(s))-1/s)/2}function tanh(s){return((s=Math.exp(2*s))-1)/(s+1)}const interpolateZoom=function s(e,d,b){function tt(nt,ot){var ht=nt[0],mt=nt[1],gt=nt[2],yt=ot[0],ft=ot[1],st=ot[2],bt=yt-ht,vt=ft-mt,xt=bt*bt+vt*vt,wt,St;if(xt<epsilon2)St=Math.log(st/gt)/e,wt=function(Ot){return[ht+Ot*bt,mt+Ot*vt,gt*Math.exp(e*Ot*St)]};else{var _t=Math.sqrt(xt),Tt=(st*st-gt*gt+b*xt)/(2*gt*d*_t),Et=(st*st-gt*gt-b*xt)/(2*st*d*_t),kt=Math.log(Math.sqrt(Tt*Tt+1)-Tt),Mt=Math.log(Math.sqrt(Et*Et+1)-Et);St=(Mt-kt)/e,wt=function(Ot){var Dt=Ot*St,At=cosh(kt),It=gt/(d*_t)*(At*tanh(e*Dt+kt)-sinh(kt));return[ht+It*bt,mt+It*vt,gt*At/cosh(e*Dt+kt)]}}return wt.duration=St*1e3*e/Math.SQRT2,wt}return tt.rho=function(nt){var ot=Math.max(.001,+nt),ht=ot*ot,mt=ht*ht;return s(ot,ht,mt)},tt}(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(s){setTimeout(s,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(s,e,d){if(typeof s!="function")throw new TypeError("callback is not a function");d=(d==null?now():+d)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=s,this._time=d,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(s,e,d){var b=new Timer;return b.restart(s,e,d),b}function timerFlush(){now(),++frame;for(var s=taskHead,e;s;)(e=clockNow-s._time)>=0&&s._call.call(void 0,e),s=s._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var s=clock.now(),e=s-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=s)}function nap(){for(var s,e=taskHead,d,b=1/0;e;)e._call?(b>e._time&&(b=e._time),s=e,e=e._next):(d=e._next,e._next=null,e=s?s._next=d:taskHead=d);taskTail=s,sleep(b)}function sleep(s){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var e=s-clockNow;e>24?(s<1/0&&(timeout$1=setTimeout(wake,s-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(s,e,d){var b=new Timer;return e=e==null?0:+e,b.restart(tt=>{b.stop(),s(tt+e)},e,d),b}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(s,e,d,b,tt,nt){var ot=s.__transition;if(!ot)s.__transition={};else if(d in ot)return;create(s,d,{name:e,index:b,group:tt,on:emptyOn,tween:emptyTween,time:nt.time,delay:nt.delay,duration:nt.duration,ease:nt.ease,timer:null,state:CREATED})}function init(s,e){var d=get(s,e);if(d.state>CREATED)throw new Error("too late; already scheduled");return d}function set(s,e){var d=get(s,e);if(d.state>STARTED)throw new Error("too late; already running");return d}function get(s,e){var d=s.__transition;if(!d||!(d=d[e]))throw new Error("transition not found");return d}function create(s,e,d){var b=s.__transition,tt;b[e]=d,d.timer=timer(nt,0,d.time);function nt(gt){d.state=SCHEDULED,d.timer.restart(ot,d.delay,d.time),d.delay<=gt&&ot(gt-d.delay)}function ot(gt){var yt,ft,st,bt;if(d.state!==SCHEDULED)return mt();for(yt in b)if(bt=b[yt],bt.name===d.name){if(bt.state===STARTED)return timeout(ot);bt.state===RUNNING?(bt.state=ENDED,bt.timer.stop(),bt.on.call("interrupt",s,s.__data__,bt.index,bt.group),delete b[yt]):+yt<e&&(bt.state=ENDED,bt.timer.stop(),bt.on.call("cancel",s,s.__data__,bt.index,bt.group),delete b[yt])}if(timeout(function(){d.state===STARTED&&(d.state=RUNNING,d.timer.restart(ht,d.delay,d.time),ht(gt))}),d.state=STARTING,d.on.call("start",s,s.__data__,d.index,d.group),d.state===STARTING){for(d.state=STARTED,tt=new Array(st=d.tween.length),yt=0,ft=-1;yt<st;++yt)(bt=d.tween[yt].value.call(s,s.__data__,d.index,d.group))&&(tt[++ft]=bt);tt.length=ft+1}}function ht(gt){for(var yt=gt<d.duration?d.ease.call(null,gt/d.duration):(d.timer.restart(mt),d.state=ENDING,1),ft=-1,st=tt.length;++ft<st;)tt[ft].call(s,yt);d.state===ENDING&&(d.on.call("end",s,s.__data__,d.index,d.group),mt())}function mt(){d.state=ENDED,d.timer.stop(),delete b[e];for(var gt in b)return;delete s.__transition}}function interrupt(s,e){var d=s.__transition,b,tt,nt=!0,ot;if(d){e=e==null?null:e+"";for(ot in d){if((b=d[ot]).name!==e){nt=!1;continue}tt=b.state>STARTING&&b.state<ENDING,b.state=ENDED,b.timer.stop(),b.on.call(tt?"interrupt":"cancel",s,s.__data__,b.index,b.group),delete d[ot]}nt&&delete s.__transition}}function selection_interrupt(s){return this.each(function(){interrupt(this,s)})}function tweenRemove(s,e){var d,b;return function(){var tt=set(this,s),nt=tt.tween;if(nt!==d){b=d=nt;for(var ot=0,ht=b.length;ot<ht;++ot)if(b[ot].name===e){b=b.slice(),b.splice(ot,1);break}}tt.tween=b}}function tweenFunction(s,e,d){var b,tt;if(typeof d!="function")throw new Error;return function(){var nt=set(this,s),ot=nt.tween;if(ot!==b){tt=(b=ot).slice();for(var ht={name:e,value:d},mt=0,gt=tt.length;mt<gt;++mt)if(tt[mt].name===e){tt[mt]=ht;break}mt===gt&&tt.push(ht)}nt.tween=tt}}function transition_tween(s,e){var d=this._id;if(s+="",arguments.length<2){for(var b=get(this.node(),d).tween,tt=0,nt=b.length,ot;tt<nt;++tt)if((ot=b[tt]).name===s)return ot.value;return null}return this.each((e==null?tweenRemove:tweenFunction)(d,s,e))}function tweenValue(s,e,d){var b=s._id;return s.each(function(){var tt=set(this,b);(tt.value||(tt.value={}))[e]=d.apply(this,arguments)}),function(tt){return get(tt,b).value[e]}}function interpolate(s,e){var d;return(typeof e=="number"?interpolateNumber:e instanceof color?interpolateRgb:(d=color(e))?(e=d,interpolateRgb):interpolateString)(s,e)}function attrRemove(s){return function(){this.removeAttribute(s)}}function attrRemoveNS(s){return function(){this.removeAttributeNS(s.space,s.local)}}function attrConstant(s,e,d){var b,tt=d+"",nt;return function(){var ot=this.getAttribute(s);return ot===tt?null:ot===b?nt:nt=e(b=ot,d)}}function attrConstantNS(s,e,d){var b,tt=d+"",nt;return function(){var ot=this.getAttributeNS(s.space,s.local);return ot===tt?null:ot===b?nt:nt=e(b=ot,d)}}function attrFunction(s,e,d){var b,tt,nt;return function(){var ot,ht=d(this),mt;return ht==null?void this.removeAttribute(s):(ot=this.getAttribute(s),mt=ht+"",ot===mt?null:ot===b&&mt===tt?nt:(tt=mt,nt=e(b=ot,ht)))}}function attrFunctionNS(s,e,d){var b,tt,nt;return function(){var ot,ht=d(this),mt;return ht==null?void this.removeAttributeNS(s.space,s.local):(ot=this.getAttributeNS(s.space,s.local),mt=ht+"",ot===mt?null:ot===b&&mt===tt?nt:(tt=mt,nt=e(b=ot,ht)))}}function transition_attr(s,e){var d=namespace(s),b=d==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(s,typeof e=="function"?(d.local?attrFunctionNS:attrFunction)(d,b,tweenValue(this,"attr."+s,e)):e==null?(d.local?attrRemoveNS:attrRemove)(d):(d.local?attrConstantNS:attrConstant)(d,b,e))}function attrInterpolate(s,e){return function(d){this.setAttribute(s,e.call(this,d))}}function attrInterpolateNS(s,e){return function(d){this.setAttributeNS(s.space,s.local,e.call(this,d))}}function attrTweenNS(s,e){var d,b;function tt(){var nt=e.apply(this,arguments);return nt!==b&&(d=(b=nt)&&attrInterpolateNS(s,nt)),d}return tt._value=e,tt}function attrTween(s,e){var d,b;function tt(){var nt=e.apply(this,arguments);return nt!==b&&(d=(b=nt)&&attrInterpolate(s,nt)),d}return tt._value=e,tt}function transition_attrTween(s,e){var d="attr."+s;if(arguments.length<2)return(d=this.tween(d))&&d._value;if(e==null)return this.tween(d,null);if(typeof e!="function")throw new Error;var b=namespace(s);return this.tween(d,(b.local?attrTweenNS:attrTween)(b,e))}function delayFunction(s,e){return function(){init(this,s).delay=+e.apply(this,arguments)}}function delayConstant(s,e){return e=+e,function(){init(this,s).delay=e}}function transition_delay(s){var e=this._id;return arguments.length?this.each((typeof s=="function"?delayFunction:delayConstant)(e,s)):get(this.node(),e).delay}function durationFunction(s,e){return function(){set(this,s).duration=+e.apply(this,arguments)}}function durationConstant(s,e){return e=+e,function(){set(this,s).duration=e}}function transition_duration(s){var e=this._id;return arguments.length?this.each((typeof s=="function"?durationFunction:durationConstant)(e,s)):get(this.node(),e).duration}function easeConstant(s,e){if(typeof e!="function")throw new Error;return function(){set(this,s).ease=e}}function transition_ease(s){var e=this._id;return arguments.length?this.each(easeConstant(e,s)):get(this.node(),e).ease}function easeVarying(s,e){return function(){var d=e.apply(this,arguments);if(typeof d!="function")throw new Error;set(this,s).ease=d}}function transition_easeVarying(s){if(typeof s!="function")throw new Error;return this.each(easeVarying(this._id,s))}function transition_filter(s){typeof s!="function"&&(s=matcher(s));for(var e=this._groups,d=e.length,b=new Array(d),tt=0;tt<d;++tt)for(var nt=e[tt],ot=nt.length,ht=b[tt]=[],mt,gt=0;gt<ot;++gt)(mt=nt[gt])&&s.call(mt,mt.__data__,gt,nt)&&ht.push(mt);return new Transition(b,this._parents,this._name,this._id)}function transition_merge(s){if(s._id!==this._id)throw new Error;for(var e=this._groups,d=s._groups,b=e.length,tt=d.length,nt=Math.min(b,tt),ot=new Array(b),ht=0;ht<nt;++ht)for(var mt=e[ht],gt=d[ht],yt=mt.length,ft=ot[ht]=new Array(yt),st,bt=0;bt<yt;++bt)(st=mt[bt]||gt[bt])&&(ft[bt]=st);for(;ht<b;++ht)ot[ht]=e[ht];return new Transition(ot,this._parents,this._name,this._id)}function start(s){return(s+"").trim().split(/^|\s+/).every(function(e){var d=e.indexOf(".");return d>=0&&(e=e.slice(0,d)),!e||e==="start"})}function onFunction(s,e,d){var b,tt,nt=start(e)?init:set;return function(){var ot=nt(this,s),ht=ot.on;ht!==b&&(tt=(b=ht).copy()).on(e,d),ot.on=tt}}function transition_on(s,e){var d=this._id;return arguments.length<2?get(this.node(),d).on.on(s):this.each(onFunction(d,s,e))}function removeFunction(s){return function(){var e=this.parentNode;for(var d in this.__transition)if(+d!==s)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(s){var e=this._name,d=this._id;typeof s!="function"&&(s=selector(s));for(var b=this._groups,tt=b.length,nt=new Array(tt),ot=0;ot<tt;++ot)for(var ht=b[ot],mt=ht.length,gt=nt[ot]=new Array(mt),yt,ft,st=0;st<mt;++st)(yt=ht[st])&&(ft=s.call(yt,yt.__data__,st,ht))&&("__data__"in yt&&(ft.__data__=yt.__data__),gt[st]=ft,schedule(gt[st],e,d,st,gt,get(yt,d)));return new Transition(nt,this._parents,e,d)}function transition_selectAll(s){var e=this._name,d=this._id;typeof s!="function"&&(s=selectorAll(s));for(var b=this._groups,tt=b.length,nt=[],ot=[],ht=0;ht<tt;++ht)for(var mt=b[ht],gt=mt.length,yt,ft=0;ft<gt;++ft)if(yt=mt[ft]){for(var st=s.call(yt,yt.__data__,ft,mt),bt,vt=get(yt,d),xt=0,wt=st.length;xt<wt;++xt)(bt=st[xt])&&schedule(bt,e,d,xt,st,vt);nt.push(st),ot.push(yt)}return new Transition(nt,ot,e,d)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(s,e){var d,b,tt;return function(){var nt=styleValue(this,s),ot=(this.style.removeProperty(s),styleValue(this,s));return nt===ot?null:nt===d&&ot===b?tt:tt=e(d=nt,b=ot)}}function styleRemove(s){return function(){this.style.removeProperty(s)}}function styleConstant(s,e,d){var b,tt=d+"",nt;return function(){var ot=styleValue(this,s);return ot===tt?null:ot===b?nt:nt=e(b=ot,d)}}function styleFunction(s,e,d){var b,tt,nt;return function(){var ot=styleValue(this,s),ht=d(this),mt=ht+"";return ht==null&&(mt=ht=(this.style.removeProperty(s),styleValue(this,s))),ot===mt?null:ot===b&&mt===tt?nt:(tt=mt,nt=e(b=ot,ht))}}function styleMaybeRemove(s,e){var d,b,tt,nt="style."+e,ot="end."+nt,ht;return function(){var mt=set(this,s),gt=mt.on,yt=mt.value[nt]==null?ht||(ht=styleRemove(e)):void 0;(gt!==d||tt!==yt)&&(b=(d=gt).copy()).on(ot,tt=yt),mt.on=b}}function transition_style(s,e,d){var b=(s+="")=="transform"?interpolateTransformCss:interpolate;return e==null?this.styleTween(s,styleNull(s,b)).on("end.style."+s,styleRemove(s)):typeof e=="function"?this.styleTween(s,styleFunction(s,b,tweenValue(this,"style."+s,e))).each(styleMaybeRemove(this._id,s)):this.styleTween(s,styleConstant(s,b,e),d).on("end.style."+s,null)}function styleInterpolate(s,e,d){return function(b){this.style.setProperty(s,e.call(this,b),d)}}function styleTween(s,e,d){var b,tt;function nt(){var ot=e.apply(this,arguments);return ot!==tt&&(b=(tt=ot)&&styleInterpolate(s,ot,d)),b}return nt._value=e,nt}function transition_styleTween(s,e,d){var b="style."+(s+="");if(arguments.length<2)return(b=this.tween(b))&&b._value;if(e==null)return this.tween(b,null);if(typeof e!="function")throw new Error;return this.tween(b,styleTween(s,e,d??""))}function textConstant(s){return function(){this.textContent=s}}function textFunction(s){return function(){var e=s(this);this.textContent=e??""}}function transition_text(s){return this.tween("text",typeof s=="function"?textFunction(tweenValue(this,"text",s)):textConstant(s==null?"":s+""))}function textInterpolate(s){return function(e){this.textContent=s.call(this,e)}}function textTween(s){var e,d;function b(){var tt=s.apply(this,arguments);return tt!==d&&(e=(d=tt)&&textInterpolate(tt)),e}return b._value=s,b}function transition_textTween(s){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(s==null)return this.tween(e,null);if(typeof s!="function")throw new Error;return this.tween(e,textTween(s))}function transition_transition(){for(var s=this._name,e=this._id,d=newId(),b=this._groups,tt=b.length,nt=0;nt<tt;++nt)for(var ot=b[nt],ht=ot.length,mt,gt=0;gt<ht;++gt)if(mt=ot[gt]){var yt=get(mt,e);schedule(mt,s,d,gt,ot,{time:yt.time+yt.delay+yt.duration,delay:0,duration:yt.duration,ease:yt.ease})}return new Transition(b,this._parents,s,d)}function transition_end(){var s,e,d=this,b=d._id,tt=d.size();return new Promise(function(nt,ot){var ht={value:ot},mt={value:function(){--tt===0&&nt()}};d.each(function(){var gt=set(this,b),yt=gt.on;yt!==s&&(e=(s=yt).copy(),e._.cancel.push(ht),e._.interrupt.push(ht),e._.end.push(mt)),gt.on=e}),tt===0&&nt()})}var id=0;function Transition(s,e,d,b){this._groups=s,this._parents=e,this._name=d,this._id=b}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(s){return((s*=2)<=1?s*s*s:(s-=2)*s*s+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(s,e){for(var d;!(d=s.__transition)||!(d=d[e]);)if(!(s=s.parentNode))throw new Error(`transition ${e} not found`);return d}function selection_transition(s){var e,d;s instanceof Transition?(e=s._id,s=s._name):(e=newId(),(d=defaultTiming).time=now(),s=s==null?null:s+"");for(var b=this._groups,tt=b.length,nt=0;nt<tt;++nt)for(var ot=b[nt],ht=ot.length,mt,gt=0;gt<ht;++gt)(mt=ot[gt])&&schedule(mt,s,e,gt,ot,d||inherit(mt,e));return new Transition(b,this._parents,s,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const constant$1=s=>()=>s;function ZoomEvent(s,{sourceEvent:e,target:d,transform:b,dispatch:tt}){Object.defineProperties(this,{type:{value:s,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},transform:{value:b,enumerable:!0,configurable:!0},_:{value:tt}})}function Transform(s,e,d){this.k=s,this.x=e,this.y=d}Transform.prototype={constructor:Transform,scale:function(s){return s===1?this:new Transform(this.k*s,this.x,this.y)},translate:function(s,e){return s===0&e===0?this:new Transform(this.k,this.x+this.k*s,this.y+this.k*e)},apply:function(s){return[s[0]*this.k+this.x,s[1]*this.k+this.y]},applyX:function(s){return s*this.k+this.x},applyY:function(s){return s*this.k+this.y},invert:function(s){return[(s[0]-this.x)/this.k,(s[1]-this.y)/this.k]},invertX:function(s){return(s-this.x)/this.k},invertY:function(s){return(s-this.y)/this.k},rescaleX:function(s){return s.copy().domain(s.range().map(this.invertX,this).map(s.invert,s))},rescaleY:function(s){return s.copy().domain(s.range().map(this.invertY,this).map(s.invert,s))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(s){s.stopImmediatePropagation()}function noevent(s){s.preventDefault(),s.stopImmediatePropagation()}function defaultFilter(s){return(!s.ctrlKey||s.type==="wheel")&&!s.button}function defaultExtent(){var s=this;return s instanceof SVGElement?(s=s.ownerSVGElement||s,s.hasAttribute("viewBox")?(s=s.viewBox.baseVal,[[s.x,s.y],[s.x+s.width,s.y+s.height]]):[[0,0],[s.width.baseVal.value,s.height.baseVal.value]]):[[0,0],[s.clientWidth,s.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(s){return-s.deltaY*(s.deltaMode===1?.05:s.deltaMode?1:.002)*(s.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(s,e,d){var b=s.invertX(e[0][0])-d[0][0],tt=s.invertX(e[1][0])-d[1][0],nt=s.invertY(e[0][1])-d[0][1],ot=s.invertY(e[1][1])-d[1][1];return s.translate(tt>b?(b+tt)/2:Math.min(0,b)||Math.max(0,tt),ot>nt?(nt+ot)/2:Math.min(0,nt)||Math.max(0,ot))}function d3zoom(){var s=defaultFilter,e=defaultExtent,d=defaultConstrain,b=defaultWheelDelta,tt=defaultTouchable,nt=[0,1/0],ot=[[-1/0,-1/0],[1/0,1/0]],ht=250,mt=interpolateZoom,gt=dispatch("start","zoom","end"),yt,ft,st,bt=500,vt=150,xt=0,wt=10;function St(Bt){Bt.property("__zoom",defaultTransform).on("wheel.zoom",Dt,{passive:!1}).on("mousedown.zoom",At).on("dblclick.zoom",It).filter(tt).on("touchstart.zoom",jt).on("touchmove.zoom",qt).on("touchend.zoom touchcancel.zoom",Jt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}St.transform=function(Bt,Wt,Lt,Ut){var tn=Bt.selection?Bt.selection():Bt;tn.property("__zoom",defaultTransform),Bt!==tn?kt(Bt,Wt,Lt,Ut):tn.interrupt().each(function(){Mt(this,arguments).event(Ut).start().zoom(null,typeof Wt=="function"?Wt.apply(this,arguments):Wt).end()})},St.scaleBy=function(Bt,Wt,Lt,Ut){St.scaleTo(Bt,function(){var tn=this.__zoom.k,Kt=typeof Wt=="function"?Wt.apply(this,arguments):Wt;return tn*Kt},Lt,Ut)},St.scaleTo=function(Bt,Wt,Lt,Ut){St.transform(Bt,function(){var tn=e.apply(this,arguments),Kt=this.__zoom,an=Lt==null?Et(tn):typeof Lt=="function"?Lt.apply(this,arguments):Lt,ln=Kt.invert(an),hn=typeof Wt=="function"?Wt.apply(this,arguments):Wt;return d(Tt(_t(Kt,hn),an,ln),tn,ot)},Lt,Ut)},St.translateBy=function(Bt,Wt,Lt,Ut){St.transform(Bt,function(){return d(this.__zoom.translate(typeof Wt=="function"?Wt.apply(this,arguments):Wt,typeof Lt=="function"?Lt.apply(this,arguments):Lt),e.apply(this,arguments),ot)},null,Ut)},St.translateTo=function(Bt,Wt,Lt,Ut,tn){St.transform(Bt,function(){var Kt=e.apply(this,arguments),an=this.__zoom,ln=Ut==null?Et(Kt):typeof Ut=="function"?Ut.apply(this,arguments):Ut;return d(identity.translate(ln[0],ln[1]).scale(an.k).translate(typeof Wt=="function"?-Wt.apply(this,arguments):-Wt,typeof Lt=="function"?-Lt.apply(this,arguments):-Lt),Kt,ot)},Ut,tn)};function _t(Bt,Wt){return Wt=Math.max(nt[0],Math.min(nt[1],Wt)),Wt===Bt.k?Bt:new Transform(Wt,Bt.x,Bt.y)}function Tt(Bt,Wt,Lt){var Ut=Wt[0]-Lt[0]*Bt.k,tn=Wt[1]-Lt[1]*Bt.k;return Ut===Bt.x&&tn===Bt.y?Bt:new Transform(Bt.k,Ut,tn)}function Et(Bt){return[(+Bt[0][0]+ +Bt[1][0])/2,(+Bt[0][1]+ +Bt[1][1])/2]}function kt(Bt,Wt,Lt,Ut){Bt.on("start.zoom",function(){Mt(this,arguments).event(Ut).start()}).on("interrupt.zoom end.zoom",function(){Mt(this,arguments).event(Ut).end()}).tween("zoom",function(){var tn=this,Kt=arguments,an=Mt(tn,Kt).event(Ut),ln=e.apply(tn,Kt),hn=Lt==null?Et(ln):typeof Lt=="function"?Lt.apply(tn,Kt):Lt,kn=Math.max(ln[1][0]-ln[0][0],ln[1][1]-ln[0][1]),Zt=tn.__zoom,xn=typeof Wt=="function"?Wt.apply(tn,Kt):Wt,En=mt(Zt.invert(hn).concat(kn/Zt.k),xn.invert(hn).concat(kn/xn.k));return function(Cn){if(Cn===1)Cn=xn;else{var Fn=En(Cn),Vn=kn/Fn[2];Cn=new Transform(Vn,hn[0]-Fn[0]*Vn,hn[1]-Fn[1]*Vn)}an.zoom(null,Cn)}})}function Mt(Bt,Wt,Lt){return!Lt&&Bt.__zooming||new Ot(Bt,Wt)}function Ot(Bt,Wt){this.that=Bt,this.args=Wt,this.active=0,this.sourceEvent=null,this.extent=e.apply(Bt,Wt),this.taps=0}Ot.prototype={event:function(Bt){return Bt&&(this.sourceEvent=Bt),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Bt,Wt){return this.mouse&&Bt!=="mouse"&&(this.mouse[1]=Wt.invert(this.mouse[0])),this.touch0&&Bt!=="touch"&&(this.touch0[1]=Wt.invert(this.touch0[0])),this.touch1&&Bt!=="touch"&&(this.touch1[1]=Wt.invert(this.touch1[0])),this.that.__zoom=Wt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Bt){var Wt=select(this.that).datum();gt.call(Bt,this.that,new ZoomEvent(Bt,{sourceEvent:this.sourceEvent,target:St,type:Bt,transform:this.that.__zoom,dispatch:gt}),Wt)}};function Dt(Bt,...Wt){if(!s.apply(this,arguments))return;var Lt=Mt(this,Wt).event(Bt),Ut=this.__zoom,tn=Math.max(nt[0],Math.min(nt[1],Ut.k*Math.pow(2,b.apply(this,arguments)))),Kt=pointer(Bt);if(Lt.wheel)(Lt.mouse[0][0]!==Kt[0]||Lt.mouse[0][1]!==Kt[1])&&(Lt.mouse[1]=Ut.invert(Lt.mouse[0]=Kt)),clearTimeout(Lt.wheel);else{if(Ut.k===tn)return;Lt.mouse=[Kt,Ut.invert(Kt)],interrupt(this),Lt.start()}noevent(Bt),Lt.wheel=setTimeout(an,vt),Lt.zoom("mouse",d(Tt(_t(Ut,tn),Lt.mouse[0],Lt.mouse[1]),Lt.extent,ot));function an(){Lt.wheel=null,Lt.end()}}function At(Bt,...Wt){if(st||!s.apply(this,arguments))return;var Lt=Bt.currentTarget,Ut=Mt(this,Wt,!0).event(Bt),tn=select(Bt.view).on("mousemove.zoom",hn,!0).on("mouseup.zoom",kn,!0),Kt=pointer(Bt,Lt),an=Bt.clientX,ln=Bt.clientY;dragDisable(Bt.view),nopropagation(Bt),Ut.mouse=[Kt,this.__zoom.invert(Kt)],interrupt(this),Ut.start();function hn(Zt){if(noevent(Zt),!Ut.moved){var xn=Zt.clientX-an,En=Zt.clientY-ln;Ut.moved=xn*xn+En*En>xt}Ut.event(Zt).zoom("mouse",d(Tt(Ut.that.__zoom,Ut.mouse[0]=pointer(Zt,Lt),Ut.mouse[1]),Ut.extent,ot))}function kn(Zt){tn.on("mousemove.zoom mouseup.zoom",null),yesdrag(Zt.view,Ut.moved),noevent(Zt),Ut.event(Zt).end()}}function It(Bt,...Wt){if(s.apply(this,arguments)){var Lt=this.__zoom,Ut=pointer(Bt.changedTouches?Bt.changedTouches[0]:Bt,this),tn=Lt.invert(Ut),Kt=Lt.k*(Bt.shiftKey?.5:2),an=d(Tt(_t(Lt,Kt),Ut,tn),e.apply(this,Wt),ot);noevent(Bt),ht>0?select(this).transition().duration(ht).call(kt,an,Ut,Bt):select(this).call(St.transform,an,Ut,Bt)}}function jt(Bt,...Wt){if(s.apply(this,arguments)){var Lt=Bt.touches,Ut=Lt.length,tn=Mt(this,Wt,Bt.changedTouches.length===Ut).event(Bt),Kt,an,ln,hn;for(nopropagation(Bt),an=0;an<Ut;++an)ln=Lt[an],hn=pointer(ln,this),hn=[hn,this.__zoom.invert(hn),ln.identifier],tn.touch0?!tn.touch1&&tn.touch0[2]!==hn[2]&&(tn.touch1=hn,tn.taps=0):(tn.touch0=hn,Kt=!0,tn.taps=1+!!yt);yt&&(yt=clearTimeout(yt)),Kt&&(tn.taps<2&&(ft=hn[0],yt=setTimeout(function(){yt=null},bt)),interrupt(this),tn.start())}}function qt(Bt,...Wt){if(this.__zooming){var Lt=Mt(this,Wt).event(Bt),Ut=Bt.changedTouches,tn=Ut.length,Kt,an,ln,hn;for(noevent(Bt),Kt=0;Kt<tn;++Kt)an=Ut[Kt],ln=pointer(an,this),Lt.touch0&&Lt.touch0[2]===an.identifier?Lt.touch0[0]=ln:Lt.touch1&&Lt.touch1[2]===an.identifier&&(Lt.touch1[0]=ln);if(an=Lt.that.__zoom,Lt.touch1){var kn=Lt.touch0[0],Zt=Lt.touch0[1],xn=Lt.touch1[0],En=Lt.touch1[1],Cn=(Cn=xn[0]-kn[0])*Cn+(Cn=xn[1]-kn[1])*Cn,Fn=(Fn=En[0]-Zt[0])*Fn+(Fn=En[1]-Zt[1])*Fn;an=_t(an,Math.sqrt(Cn/Fn)),ln=[(kn[0]+xn[0])/2,(kn[1]+xn[1])/2],hn=[(Zt[0]+En[0])/2,(Zt[1]+En[1])/2]}else if(Lt.touch0)ln=Lt.touch0[0],hn=Lt.touch0[1];else return;Lt.zoom("touch",d(Tt(an,ln,hn),Lt.extent,ot))}}function Jt(Bt,...Wt){if(this.__zooming){var Lt=Mt(this,Wt).event(Bt),Ut=Bt.changedTouches,tn=Ut.length,Kt,an;for(nopropagation(Bt),st&&clearTimeout(st),st=setTimeout(function(){st=null},bt),Kt=0;Kt<tn;++Kt)an=Ut[Kt],Lt.touch0&&Lt.touch0[2]===an.identifier?delete Lt.touch0:Lt.touch1&&Lt.touch1[2]===an.identifier&&delete Lt.touch1;if(Lt.touch1&&!Lt.touch0&&(Lt.touch0=Lt.touch1,delete Lt.touch1),Lt.touch0)Lt.touch0[1]=this.__zoom.invert(Lt.touch0[0]);else if(Lt.end(),Lt.taps===2&&(an=pointer(an,this),Math.hypot(ft[0]-an[0],ft[1]-an[1])<wt)){var ln=select(this).on("dblclick.zoom");ln&&ln.apply(this,arguments)}}}return St.wheelDelta=function(Bt){return arguments.length?(b=typeof Bt=="function"?Bt:constant$1(+Bt),St):b},St.filter=function(Bt){return arguments.length?(s=typeof Bt=="function"?Bt:constant$1(!!Bt),St):s},St.touchable=function(Bt){return arguments.length?(tt=typeof Bt=="function"?Bt:constant$1(!!Bt),St):tt},St.extent=function(Bt){return arguments.length?(e=typeof Bt=="function"?Bt:constant$1([[+Bt[0][0],+Bt[0][1]],[+Bt[1][0],+Bt[1][1]]]),St):e},St.scaleExtent=function(Bt){return arguments.length?(nt[0]=+Bt[0],nt[1]=+Bt[1],St):[nt[0],nt[1]]},St.translateExtent=function(Bt){return arguments.length?(ot[0][0]=+Bt[0][0],ot[1][0]=+Bt[1][0],ot[0][1]=+Bt[0][1],ot[1][1]=+Bt[1][1],St):[[ot[0][0],ot[0][1]],[ot[1][0],ot[1][1]]]},St.constrain=function(Bt){return arguments.length?(d=Bt,St):d},St.duration=function(Bt){return arguments.length?(ht=+Bt,St):ht},St.interpolate=function(Bt){return arguments.length?(mt=Bt,St):mt},St.on=function(){var Bt=gt.on.apply(gt,arguments);return Bt===gt?St:Bt},St.clickDistance=function(Bt){return arguments.length?(xt=(Bt=+Bt)*Bt,St):Math.sqrt(xt)},St.tapDistance=function(Bt){return arguments.length?(wt=+Bt,St):wt},St}var has=Object.prototype.hasOwnProperty;function dequal(s,e){var d,b;if(s===e)return!0;if(s&&e&&(d=s.constructor)===e.constructor){if(d===Date)return s.getTime()===e.getTime();if(d===RegExp)return s.toString()===e.toString();if(d===Array){if((b=s.length)===e.length)for(;b--&&dequal(s[b],e[b]););return b===-1}if(!d||typeof s=="object"){b=0;for(d in s)if(has.call(s,d)&&++b&&!has.call(e,d)||!(d in e)||!dequal(s[d],e[d]))return!1;return Object.keys(e).length===b}}return s!==s&&e!==e}var clone$1={exports:{}};(function(s){var e=function(){function d(st,bt){return bt!=null&&st instanceof bt}var b;try{b=Map}catch{b=function(){}}var tt;try{tt=Set}catch{tt=function(){}}var nt;try{nt=Promise}catch{nt=function(){}}function ot(st,bt,vt,xt,wt){typeof bt=="object"&&(vt=bt.depth,xt=bt.prototype,wt=bt.includeNonEnumerable,bt=bt.circular);var St=[],_t=[],Tt=typeof Buffer<"u";typeof bt>"u"&&(bt=!0),typeof vt>"u"&&(vt=1/0);function Et(kt,Mt){if(kt===null)return null;if(Mt===0)return kt;var Ot,Dt;if(typeof kt!="object")return kt;if(d(kt,b))Ot=new b;else if(d(kt,tt))Ot=new tt;else if(d(kt,nt))Ot=new nt(function(Ut,tn){kt.then(function(Kt){Ut(Et(Kt,Mt-1))},function(Kt){tn(Et(Kt,Mt-1))})});else if(ot.__isArray(kt))Ot=[];else if(ot.__isRegExp(kt))Ot=new RegExp(kt.source,ft(kt)),kt.lastIndex&&(Ot.lastIndex=kt.lastIndex);else if(ot.__isDate(kt))Ot=new Date(kt.getTime());else{if(Tt&&Buffer.isBuffer(kt))return Buffer.allocUnsafe?Ot=Buffer.allocUnsafe(kt.length):Ot=new Buffer(kt.length),kt.copy(Ot),Ot;d(kt,Error)?Ot=Object.create(kt):typeof xt>"u"?(Dt=Object.getPrototypeOf(kt),Ot=Object.create(Dt)):(Ot=Object.create(xt),Dt=xt)}if(bt){var At=St.indexOf(kt);if(At!=-1)return _t[At];St.push(kt),_t.push(Ot)}d(kt,b)&&kt.forEach(function(Ut,tn){var Kt=Et(tn,Mt-1),an=Et(Ut,Mt-1);Ot.set(Kt,an)}),d(kt,tt)&&kt.forEach(function(Ut){var tn=Et(Ut,Mt-1);Ot.add(tn)});for(var It in kt){var jt;Dt&&(jt=Object.getOwnPropertyDescriptor(Dt,It)),!(jt&&jt.set==null)&&(Ot[It]=Et(kt[It],Mt-1))}if(Object.getOwnPropertySymbols)for(var qt=Object.getOwnPropertySymbols(kt),It=0;It<qt.length;It++){var Jt=qt[It],Bt=Object.getOwnPropertyDescriptor(kt,Jt);Bt&&!Bt.enumerable&&!wt||(Ot[Jt]=Et(kt[Jt],Mt-1),Bt.enumerable||Object.defineProperty(Ot,Jt,{enumerable:!1}))}if(wt)for(var Wt=Object.getOwnPropertyNames(kt),It=0;It<Wt.length;It++){var Lt=Wt[It],Bt=Object.getOwnPropertyDescriptor(kt,Lt);Bt&&Bt.enumerable||(Ot[Lt]=Et(kt[Lt],Mt-1),Object.defineProperty(Ot,Lt,{enumerable:!1}))}return Ot}return Et(st,vt)}ot.clonePrototype=function(bt){if(bt===null)return null;var vt=function(){};return vt.prototype=bt,new vt};function ht(st){return Object.prototype.toString.call(st)}ot.__objToStr=ht;function mt(st){return typeof st=="object"&&ht(st)==="[object Date]"}ot.__isDate=mt;function gt(st){return typeof st=="object"&&ht(st)==="[object Array]"}ot.__isArray=gt;function yt(st){return typeof st=="object"&&ht(st)==="[object RegExp]"}ot.__isRegExp=yt;function ft(st){var bt="";return st.global&&(bt+="g"),st.ignoreCase&&(bt+="i"),st.multiline&&(bt+="m"),bt}return ot.__getRegExpFlags=ft,ot}();s.exports&&(s.exports=e)})(clone$1);var cloneExports=clone$1.exports;const clone=getDefaultExportFromCjs(cloneExports);var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(s){return typeof s=="string"&&REGEX.test(s)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=(byteToHex[s[e+0]]+byteToHex[s[e+1]]+byteToHex[s[e+2]]+byteToHex[s[e+3]]+"-"+byteToHex[s[e+4]]+byteToHex[s[e+5]]+"-"+byteToHex[s[e+6]]+byteToHex[s[e+7]]+"-"+byteToHex[s[e+8]]+byteToHex[s[e+9]]+"-"+byteToHex[s[e+10]]+byteToHex[s[e+11]]+byteToHex[s[e+12]]+byteToHex[s[e+13]]+byteToHex[s[e+14]]+byteToHex[s[e+15]]).toLowerCase();if(!validate(d))throw TypeError("Stringified UUID is invalid");return d}function v4(s,e,d){s=s||{};var b=s.random||(s.rng||rng)();return b[6]=b[6]&15|64,b[8]=b[8]&63|128,stringify(b)}var CSSTransitionGroup={exports:{}},TransitionGroup={exports:{}},chainFunction=function(){for(var e=arguments.length,d=[],b=0;b<e;b++)d[b]=arguments[b];if(d=d.filter(function(tt){return tt!=null}),d.length!==0)return d.length===1?d[0]:d.reduce(function(tt,nt){return function(){tt.apply(this,arguments),nt.apply(this,arguments)}})},warning=function(){},browser=warning;const require$$4=getAugmentedNamespace(reactLifecyclesCompat_es);var ChildMapping={};ChildMapping.__esModule=!0;ChildMapping.getChildMapping=getChildMapping;ChildMapping.mergeChildMappings=mergeChildMappings;var _react$1=reactExports;function getChildMapping(s){if(!s)return s;var e={};return _react$1.Children.map(s,function(d){return d}).forEach(function(d){e[d.key]=d}),e}function mergeChildMappings(s,e){s=s||{},e=e||{};function d(yt){return e.hasOwnProperty(yt)?e[yt]:s[yt]}var b={},tt=[];for(var nt in s)e.hasOwnProperty(nt)?tt.length&&(b[nt]=tt,tt=[]):tt.push(nt);var ot=void 0,ht={};for(var mt in e){if(b.hasOwnProperty(mt))for(ot=0;ot<b[mt].length;ot++){var gt=b[mt][ot];ht[b[mt][ot]]=d(gt)}ht[mt]=d(mt)}for(ot=0;ot<tt.length;ot++)ht[tt[ot]]=d(tt[ot]);return ht}(function(s,e){e.__esModule=!0;var d=Object.assign||function(_t){for(var Tt=1;Tt<arguments.length;Tt++){var Et=arguments[Tt];for(var kt in Et)Object.prototype.hasOwnProperty.call(Et,kt)&&(_t[kt]=Et[kt])}return _t},b=chainFunction,tt=st(b),nt=reactExports,ot=st(nt),ht=propTypesExports,mt=st(ht),gt=browser;st(gt);var yt=require$$4,ft=ChildMapping;function st(_t){return _t&&_t.__esModule?_t:{default:_t}}function bt(_t,Tt){if(!(_t instanceof Tt))throw new TypeError("Cannot call a class as a function")}function vt(_t,Tt){if(!_t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Tt&&(typeof Tt=="object"||typeof Tt=="function")?Tt:_t}function xt(_t,Tt){if(typeof Tt!="function"&&Tt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Tt);_t.prototype=Object.create(Tt&&Tt.prototype,{constructor:{value:_t,enumerable:!1,writable:!0,configurable:!0}}),Tt&&(Object.setPrototypeOf?Object.setPrototypeOf(_t,Tt):_t.__proto__=Tt)}mt.default.any,mt.default.func,mt.default.node;var wt={component:"span",childFactory:function(Tt){return Tt}},St=function(_t){xt(Tt,_t);function Tt(Et,kt){bt(this,Tt);var Mt=vt(this,_t.call(this,Et,kt));return Mt.performAppear=function(Ot,Dt){Mt.currentlyTransitioningKeys[Ot]=!0,Dt.componentWillAppear?Dt.componentWillAppear(Mt._handleDoneAppearing.bind(Mt,Ot,Dt)):Mt._handleDoneAppearing(Ot,Dt)},Mt._handleDoneAppearing=function(Ot,Dt){Dt&&Dt.componentDidAppear&&Dt.componentDidAppear(),delete Mt.currentlyTransitioningKeys[Ot];var At=(0,ft.getChildMapping)(Mt.props.children);(!At||!At.hasOwnProperty(Ot))&&Mt.performLeave(Ot,Dt)},Mt.performEnter=function(Ot,Dt){Mt.currentlyTransitioningKeys[Ot]=!0,Dt.componentWillEnter?Dt.componentWillEnter(Mt._handleDoneEntering.bind(Mt,Ot,Dt)):Mt._handleDoneEntering(Ot,Dt)},Mt._handleDoneEntering=function(Ot,Dt){Dt&&Dt.componentDidEnter&&Dt.componentDidEnter(),delete Mt.currentlyTransitioningKeys[Ot];var At=(0,ft.getChildMapping)(Mt.props.children);(!At||!At.hasOwnProperty(Ot))&&Mt.performLeave(Ot,Dt)},Mt.performLeave=function(Ot,Dt){Mt.currentlyTransitioningKeys[Ot]=!0,Dt&&Dt.componentWillLeave?Dt.componentWillLeave(Mt._handleDoneLeaving.bind(Mt,Ot,Dt)):Mt._handleDoneLeaving(Ot,Dt)},Mt._handleDoneLeaving=function(Ot,Dt){Dt&&Dt.componentDidLeave&&Dt.componentDidLeave(),delete Mt.currentlyTransitioningKeys[Ot];var At=(0,ft.getChildMapping)(Mt.props.children);At&&At.hasOwnProperty(Ot)?Mt.keysToEnter.push(Ot):Mt.setState(function(It){var jt=d({},It.children);return delete jt[Ot],{children:jt}})},Mt.childRefs=Object.create(null),Mt.currentlyTransitioningKeys={},Mt.keysToEnter=[],Mt.keysToLeave=[],Mt.state={children:(0,ft.getChildMapping)(Et.children)},Mt}return Tt.prototype.componentDidMount=function(){var kt=this.state.children;for(var Mt in kt)kt[Mt]&&this.performAppear(Mt,this.childRefs[Mt])},Tt.getDerivedStateFromProps=function(kt,Mt){var Ot=(0,ft.getChildMapping)(kt.children),Dt=Mt.children;return{children:(0,ft.mergeChildMappings)(Dt,Ot)}},Tt.prototype.componentDidUpdate=function(kt,Mt){var Ot=this,Dt=(0,ft.getChildMapping)(this.props.children),At=Mt.children;for(var It in Dt){var jt=At&&At.hasOwnProperty(It);Dt[It]&&!jt&&!this.currentlyTransitioningKeys[It]&&this.keysToEnter.push(It)}for(var qt in At){var Jt=Dt&&Dt.hasOwnProperty(qt);At[qt]&&!Jt&&!this.currentlyTransitioningKeys[qt]&&this.keysToLeave.push(qt)}var Bt=this.keysToEnter;this.keysToEnter=[],Bt.forEach(function(Lt){return Ot.performEnter(Lt,Ot.childRefs[Lt])});var Wt=this.keysToLeave;this.keysToLeave=[],Wt.forEach(function(Lt){return Ot.performLeave(Lt,Ot.childRefs[Lt])})},Tt.prototype.render=function(){var kt=this,Mt=[],Ot=function(jt){var qt=kt.state.children[jt];if(qt){var Jt=typeof qt.ref!="string",Bt=kt.props.childFactory(qt),Wt=function(Ut){kt.childRefs[jt]=Ut};Bt===qt&&Jt&&(Wt=(0,tt.default)(qt.ref,Wt)),Mt.push(ot.default.cloneElement(Bt,{key:jt,ref:Wt}))}};for(var Dt in this.state.children)Ot(Dt);var At=d({},this.props);return delete At.transitionLeave,delete At.transitionName,delete At.transitionAppear,delete At.transitionEnter,delete At.childFactory,delete At.transitionLeaveTimeout,delete At.transitionEnterTimeout,delete At.transitionAppearTimeout,delete At.component,ot.default.createElement(this.props.component,At,Mt)},Tt}(ot.default.Component);St.displayName="TransitionGroup",St.propTypes={},St.defaultProps=wt,e.default=(0,yt.polyfill)(St),s.exports=e.default})(TransitionGroup,TransitionGroup.exports);var TransitionGroupExports=TransitionGroup.exports,CSSTransitionGroupChild={exports:{}},addClass={exports:{}},interopRequireDefault={exports:{}};(function(s){function e(d){return d&&d.__esModule?d:{default:d}}s.exports=e,s.exports.__esModule=!0,s.exports.default=s.exports})(interopRequireDefault);var interopRequireDefaultExports=interopRequireDefault.exports,hasClass={exports:{}},hasRequiredHasClass;function requireHasClass(){return hasRequiredHasClass||(hasRequiredHasClass=1,function(s,e){e.__esModule=!0,e.default=d;function d(b,tt){return b.classList?!!tt&&b.classList.contains(tt):(" "+(b.className.baseVal||b.className)+" ").indexOf(" "+tt+" ")!==-1}s.exports=e.default}(hasClass,hasClass.exports)),hasClass.exports}(function(s,e){var d=interopRequireDefaultExports;e.__esModule=!0,e.default=tt;var b=d(requireHasClass());function tt(nt,ot){nt.classList?nt.classList.add(ot):(0,b.default)(nt,ot)||(typeof nt.className=="string"?nt.className=nt.className+" "+ot:nt.setAttribute("class",(nt.className&&nt.className.baseVal||"")+" "+ot))}s.exports=e.default})(addClass,addClass.exports);var addClassExports=addClass.exports;function replaceClassName(s,e){return s.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var removeClass=function(e,d){e.classList?e.classList.remove(d):typeof e.className=="string"?e.className=replaceClassName(e.className,d):e.setAttribute("class",replaceClassName(e.className&&e.className.baseVal||"",d))},requestAnimationFrame$1={exports:{}},inDOM={exports:{}},hasRequiredInDOM;function requireInDOM(){return hasRequiredInDOM||(hasRequiredInDOM=1,function(s,e){e.__esModule=!0,e.default=void 0;var d=!!(typeof window<"u"&&window.document&&window.document.createElement);e.default=d,s.exports=e.default}(inDOM,inDOM.exports)),inDOM.exports}(function(s,e){var d=interopRequireDefaultExports;e.__esModule=!0,e.default=void 0;var b=d(requireInDOM()),tt=["","webkit","moz","o","ms"],nt="clearTimeout",ot=yt,ht,mt=function(bt,vt){return bt+(bt?vt[0].toUpperCase()+vt.substr(1):vt)+"AnimationFrame"};b.default&&tt.some(function(st){var bt=mt(st,"request");if(bt in window)return nt=mt(st,"cancel"),ot=function(xt){return window[bt](xt)}});var gt=new Date().getTime();function yt(st){var bt=new Date().getTime(),vt=Math.max(0,16-(bt-gt)),xt=setTimeout(st,vt);return gt=bt,xt}ht=function(bt){return ot(bt)},ht.cancel=function(st){window[nt]&&typeof window[nt]=="function"&&window[nt](st)};var ft=ht;e.default=ft,s.exports=e.default})(requestAnimationFrame$1,requestAnimationFrame$1.exports);var requestAnimationFrameExports=requestAnimationFrame$1.exports,properties={},_interopRequireDefault$2=interopRequireDefaultExports;properties.__esModule=!0;properties.default=properties.animationEnd=properties.animationDelay=properties.animationTiming=properties.animationDuration=properties.animationName=properties.transitionEnd=properties.transitionDuration=properties.transitionDelay=properties.transitionTiming=properties.transitionProperty=properties.transform=void 0;var _inDOM=_interopRequireDefault$2(requireInDOM()),transform="transform";properties.transform=transform;var prefix,transitionEnd,animationEnd;properties.animationEnd=animationEnd;properties.transitionEnd=transitionEnd;var transitionProperty,transitionDuration,transitionTiming,transitionDelay;properties.transitionDelay=transitionDelay;properties.transitionTiming=transitionTiming;properties.transitionDuration=transitionDuration;properties.transitionProperty=transitionProperty;var animationName,animationDuration,animationTiming,animationDelay;properties.animationDelay=animationDelay;properties.animationTiming=animationTiming;properties.animationDuration=animationDuration;properties.animationName=animationName;if(_inDOM.default){var _getTransitionPropert=getTransitionProperties();prefix=_getTransitionPropert.prefix,properties.transitionEnd=transitionEnd=_getTransitionPropert.transitionEnd,properties.animationEnd=animationEnd=_getTransitionPropert.animationEnd,properties.transform=transform=prefix+"-"+transform,properties.transitionProperty=transitionProperty=prefix+"-transition-property",properties.transitionDuration=transitionDuration=prefix+"-transition-duration",properties.transitionDelay=transitionDelay=prefix+"-transition-delay",properties.transitionTiming=transitionTiming=prefix+"-transition-timing-function",properties.animationName=animationName=prefix+"-animation-name",properties.animationDuration=animationDuration=prefix+"-animation-duration",properties.animationTiming=animationTiming=prefix+"-animation-delay",properties.animationDelay=animationDelay=prefix+"-animation-timing-function"}var _default={transform,end:transitionEnd,property:transitionProperty,timing:transitionTiming,delay:transitionDelay,duration:transitionDuration};properties.default=_default;function getTransitionProperties(){for(var s=document.createElement("div").style,e={O:function(gt){return"o"+gt.toLowerCase()},Moz:function(gt){return gt.toLowerCase()},Webkit:function(gt){return"webkit"+gt},ms:function(gt){return"MS"+gt}},d=Object.keys(e),b,tt,nt="",ot=0;ot<d.length;ot++){var ht=d[ot];if(ht+"TransitionProperty"in s){nt="-"+ht.toLowerCase(),b=e[ht]("TransitionEnd"),tt=e[ht]("AnimationEnd");break}}return!b&&"transitionProperty"in s&&(b="transitionend"),!tt&&"animationName"in s&&(tt="animationend"),s=null,{animationEnd:tt,transitionEnd:b,prefix:nt}}var PropTypes={};PropTypes.__esModule=!0;PropTypes.nameShape=void 0;PropTypes.transitionTimeout=transitionTimeout;var _react=reactExports;_interopRequireDefault$1(_react);var _propTypes=propTypesExports,_propTypes2=_interopRequireDefault$1(_propTypes);function _interopRequireDefault$1(s){return s&&s.__esModule?s:{default:s}}function transitionTimeout(s){var e="transition"+s+"Timeout",d="transition"+s;return function(b){if(b[d]){if(b[e]==null)return new Error(e+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if(typeof b[e]!="number")return new Error(e+" must be a number (in milliseconds)")}return null}}PropTypes.nameShape=_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.shape({enter:_propTypes2.default.string,leave:_propTypes2.default.string,active:_propTypes2.default.string}),_propTypes2.default.shape({enter:_propTypes2.default.string,enterActive:_propTypes2.default.string,leave:_propTypes2.default.string,leaveActive:_propTypes2.default.string,appear:_propTypes2.default.string,appearActive:_propTypes2.default.string})]);(function(s,e){e.__esModule=!0;var d=Object.assign||function(Ot){for(var Dt=1;Dt<arguments.length;Dt++){var At=arguments[Dt];for(var It in At)Object.prototype.hasOwnProperty.call(At,It)&&(Ot[It]=At[It])}return Ot},b=addClassExports,tt=wt(b),nt=removeClass,ot=wt(nt),ht=requestAnimationFrameExports,mt=wt(ht),gt=properties,yt=reactExports,ft=wt(yt),st=propTypesExports,bt=wt(st),vt=reactDomExports,xt=PropTypes;function wt(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function St(Ot,Dt){if(!(Ot instanceof Dt))throw new TypeError("Cannot call a class as a function")}function _t(Ot,Dt){if(!Ot)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Dt&&(typeof Dt=="object"||typeof Dt=="function")?Dt:Ot}function Tt(Ot,Dt){if(typeof Dt!="function"&&Dt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Dt);Ot.prototype=Object.create(Dt&&Dt.prototype,{constructor:{value:Ot,enumerable:!1,writable:!0,configurable:!0}}),Dt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ot,Dt):Ot.__proto__=Dt)}var Et=[];gt.transitionEnd&&Et.push(gt.transitionEnd),gt.animationEnd&&Et.push(gt.animationEnd);function kt(Ot,Dt){return Et.length?Et.forEach(function(At){return Ot.addEventListener(At,Dt,!1)}):setTimeout(Dt,0),function(){Et.length&&Et.forEach(function(At){return Ot.removeEventListener(At,Dt,!1)})}}bt.default.node,xt.nameShape.isRequired,bt.default.bool,bt.default.bool,bt.default.bool,bt.default.number,bt.default.number,bt.default.number;var Mt=function(Ot){Tt(Dt,Ot);function Dt(At,It){St(this,Dt);var jt=_t(this,Ot.call(this,At,It));return jt.componentWillAppear=function(qt){jt.props.appear?jt.transition("appear",qt,jt.props.appearTimeout):qt()},jt.componentWillEnter=function(qt){jt.props.enter?jt.transition("enter",qt,jt.props.enterTimeout):qt()},jt.componentWillLeave=function(qt){jt.props.leave?jt.transition("leave",qt,jt.props.leaveTimeout):qt()},jt.classNameAndNodeQueue=[],jt.transitionTimeouts=[],jt}return Dt.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(It){clearTimeout(It)}),this.classNameAndNodeQueue.length=0},Dt.prototype.transition=function(It,jt,qt){var Jt=(0,vt.findDOMNode)(this);if(!Jt){jt&&jt();return}var Bt=this.props.name[It]||this.props.name+"-"+It,Wt=this.props.name[It+"Active"]||Bt+"-active",Lt=null,Ut=void 0;(0,tt.default)(Jt,Bt),this.queueClassAndNode(Wt,Jt);var tn=function(an){an&&an.target!==Jt||(clearTimeout(Lt),Ut&&Ut(),(0,ot.default)(Jt,Bt),(0,ot.default)(Jt,Wt),Ut&&Ut(),jt&&jt())};qt?(Lt=setTimeout(tn,qt),this.transitionTimeouts.push(Lt)):gt.transitionEnd&&(Ut=kt(Jt,tn))},Dt.prototype.queueClassAndNode=function(It,jt){var qt=this;this.classNameAndNodeQueue.push({className:It,node:jt}),this.rafHandle||(this.rafHandle=(0,mt.default)(function(){return qt.flushClassNameAndNodeQueue()}))},Dt.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(It){It.node.scrollTop,(0,tt.default)(It.node,It.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},Dt.prototype.render=function(){var It=d({},this.props);return delete It.name,delete It.appear,delete It.enter,delete It.leave,delete It.appearTimeout,delete It.enterTimeout,delete It.leaveTimeout,delete It.children,ft.default.cloneElement(ft.default.Children.only(this.props.children),It)},Dt}(ft.default.Component);Mt.displayName="CSSTransitionGroupChild",Mt.propTypes={},e.default=Mt,s.exports=e.default})(CSSTransitionGroupChild,CSSTransitionGroupChild.exports);var CSSTransitionGroupChildExports=CSSTransitionGroupChild.exports;(function(s,e){e.__esModule=!0;var d=Object.assign||function(_t){for(var Tt=1;Tt<arguments.length;Tt++){var Et=arguments[Tt];for(var kt in Et)Object.prototype.hasOwnProperty.call(Et,kt)&&(_t[kt]=Et[kt])}return _t},b=reactExports,tt=st(b),nt=propTypesExports,ot=st(nt),ht=TransitionGroupExports,mt=st(ht),gt=CSSTransitionGroupChildExports,yt=st(gt),ft=PropTypes;function st(_t){return _t&&_t.__esModule?_t:{default:_t}}function bt(_t,Tt){if(!(_t instanceof Tt))throw new TypeError("Cannot call a class as a function")}function vt(_t,Tt){if(!_t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Tt&&(typeof Tt=="object"||typeof Tt=="function")?Tt:_t}function xt(_t,Tt){if(typeof Tt!="function"&&Tt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Tt);_t.prototype=Object.create(Tt&&Tt.prototype,{constructor:{value:_t,enumerable:!1,writable:!0,configurable:!0}}),Tt&&(Object.setPrototypeOf?Object.setPrototypeOf(_t,Tt):_t.__proto__=Tt)}ft.nameShape.isRequired,ot.default.bool,ot.default.bool,ot.default.bool,(0,ft.transitionTimeout)("Appear"),(0,ft.transitionTimeout)("Enter"),(0,ft.transitionTimeout)("Leave");var wt={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},St=function(_t){xt(Tt,_t);function Tt(){var Et,kt,Mt;bt(this,Tt);for(var Ot=arguments.length,Dt=Array(Ot),At=0;At<Ot;At++)Dt[At]=arguments[At];return Mt=(Et=(kt=vt(this,_t.call.apply(_t,[this].concat(Dt))),kt),kt._wrapChild=function(It){return tt.default.createElement(yt.default,{name:kt.props.transitionName,appear:kt.props.transitionAppear,enter:kt.props.transitionEnter,leave:kt.props.transitionLeave,appearTimeout:kt.props.transitionAppearTimeout,enterTimeout:kt.props.transitionEnterTimeout,leaveTimeout:kt.props.transitionLeaveTimeout},It)},Et),vt(kt,Mt)}return Tt.prototype.render=function(){return tt.default.createElement(mt.default,d({},this.props,{childFactory:this._wrapChild}))},Tt}(tt.default.Component);St.displayName="CSSTransitionGroup",St.propTypes={},St.defaultProps=wt,e.default=St,s.exports=e.default})(CSSTransitionGroup,CSSTransitionGroup.exports);var CSSTransitionGroupExports=CSSTransitionGroup.exports,_CSSTransitionGroup=CSSTransitionGroupExports,_CSSTransitionGroup2=_interopRequireDefault(_CSSTransitionGroup),_TransitionGroup=TransitionGroupExports,_TransitionGroup2=_interopRequireDefault(_TransitionGroup);function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}var reactTransitionGroup={TransitionGroup:_TransitionGroup2.default,CSSTransitionGroup:_CSSTransitionGroup2.default};const TransitionGroupWrapper=s=>s.enableLegacyTransitions?React.createElement(reactTransitionGroup.TransitionGroup,{component:s.component,className:s.className,transform:s.transform},s.children):React.createElement("g",{className:s.className,transform:s.transform},s.children),DEFAULT_NODE_CIRCLE_RADIUS=15,textLayout={title:{textAnchor:"start",x:40},attribute:{x:40,dy:"1.2em"}},DefaultNodeElement=({nodeDatum:s,toggleNode:e,onNodeClick:d,onNodeMouseOver:b,onNodeMouseOut:tt})=>React.createElement(React.Fragment,null,React.createElement("circle",{r:DEFAULT_NODE_CIRCLE_RADIUS,onClick:nt=>{e(),d(nt)},onMouseOver:b,onMouseOut:tt}),React.createElement("g",{className:"rd3t-label"},React.createElement("text",Object.assign({className:"rd3t-label__title"},textLayout.title),s.name),React.createElement("text",{className:"rd3t-label__attributes"},s.attributes&&Object.entries(s.attributes).map(([nt,ot],ht)=>React.createElement("tspan",Object.assign({key:`${nt}-${ht}`},textLayout.attribute),nt,": ",typeof ot=="boolean"?ot.toString():ot)))));class Node extends React.Component{constructor(){super(...arguments),this.nodeRef=null,this.state={transform:this.setTransform(this.props.position,this.props.parent,this.props.orientation,!0),initialStyle:{opacity:0},wasClicked:!1},this.shouldNodeTransform=(e,d,b,tt)=>d.subscriptions!==e.subscriptions||d.position.x!==e.position.x||d.position.y!==e.position.y||d.orientation!==e.orientation||tt.wasClicked!==b.wasClicked,this.renderNodeElement=()=>{const{data:e,hierarchyPointNode:d,renderCustomNodeElement:b}=this.props,tt=typeof b=="function"?b:DefaultNodeElement,nt={hierarchyPointNode:d,nodeDatum:e,toggleNode:this.handleNodeToggle,onNodeClick:this.handleOnClick,onNodeMouseOver:this.handleOnMouseOver,onNodeMouseOut:this.handleOnMouseOut,addChildren:this.handleAddChildren};return tt(nt)},this.handleNodeToggle=()=>{this.setState({wasClicked:!0}),this.props.onNodeToggle(this.props.data.__rd3t.id)},this.handleOnClick=e=>{this.setState({wasClicked:!0}),this.props.onNodeClick(this.props.hierarchyPointNode,e)},this.handleOnMouseOver=e=>{this.props.onNodeMouseOver(this.props.hierarchyPointNode,e)},this.handleOnMouseOut=e=>{this.props.onNodeMouseOut(this.props.hierarchyPointNode,e)},this.handleAddChildren=e=>{this.props.handleAddChildrenToNode(this.props.data.__rd3t.id,e)}}componentDidMount(){this.commitTransform()}componentDidUpdate(){this.state.wasClicked&&(this.props.centerNode(this.props.hierarchyPointNode),this.setState({wasClicked:!1})),this.commitTransform()}shouldComponentUpdate(e,d){return this.shouldNodeTransform(this.props,e,this.state,d)}setTransform(e,d,b,tt=!1){if(tt){const nt=d!=null,ot=nt?d.x:0,ht=nt?d.y:0;return b==="horizontal"?`translate(${ht},${ot})`:`translate(${ot},${ht})`}return b==="horizontal"?`translate(${e.y},${e.x})`:`translate(${e.x},${e.y})`}applyTransform(e,d,b=1,tt=()=>{}){this.props.enableLegacyTransitions?select(this.nodeRef).transition().duration(d).attr("transform",e).style("opacity",b).on("end",tt):(select(this.nodeRef).attr("transform",e).style("opacity",b),tt())}commitTransform(){const{orientation:e,transitionDuration:d,position:b,parent:tt}=this.props,nt=this.setTransform(b,tt,e);this.applyTransform(nt,d)}componentWillLeave(e){const{orientation:d,transitionDuration:b,position:tt,parent:nt}=this.props,ot=this.setTransform(tt,nt,d,!0);this.applyTransform(ot,b,0,e)}render(){const{data:e,nodeClassName:d}=this.props;return React.createElement("g",{id:e.__rd3t.id,ref:b=>{this.nodeRef=b},style:this.state.initialStyle,className:[e.children&&e.children.length>0?"rd3t-node":"rd3t-leaf-node",d].join(" ").trim(),transform:this.state.transform},this.renderNodeElement())}}var pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(s,e){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(s,e){this._+="L"+(this._x1=+s)+","+(this._y1=+e)},quadraticCurveTo:function(s,e,d,b){this._+="Q"+ +s+","+ +e+","+(this._x1=+d)+","+(this._y1=+b)},bezierCurveTo:function(s,e,d,b,tt,nt){this._+="C"+ +s+","+ +e+","+ +d+","+ +b+","+(this._x1=+tt)+","+(this._y1=+nt)},arcTo:function(s,e,d,b,tt){s=+s,e=+e,d=+d,b=+b,tt=+tt;var nt=this._x1,ot=this._y1,ht=d-s,mt=b-e,gt=nt-s,yt=ot-e,ft=gt*gt+yt*yt;if(tt<0)throw new Error("negative radius: "+tt);if(this._x1===null)this._+="M"+(this._x1=s)+","+(this._y1=e);else if(ft>epsilon)if(!(Math.abs(yt*ht-mt*gt)>epsilon)||!tt)this._+="L"+(this._x1=s)+","+(this._y1=e);else{var st=d-nt,bt=b-ot,vt=ht*ht+mt*mt,xt=st*st+bt*bt,wt=Math.sqrt(vt),St=Math.sqrt(ft),_t=tt*Math.tan((pi-Math.acos((vt+ft-xt)/(2*wt*St)))/2),Tt=_t/St,Et=_t/wt;Math.abs(Tt-1)>epsilon&&(this._+="L"+(s+Tt*gt)+","+(e+Tt*yt)),this._+="A"+tt+","+tt+",0,0,"+ +(yt*st>gt*bt)+","+(this._x1=s+Et*ht)+","+(this._y1=e+Et*mt)}},arc:function(s,e,d,b,tt,nt){s=+s,e=+e,d=+d,nt=!!nt;var ot=d*Math.cos(b),ht=d*Math.sin(b),mt=s+ot,gt=e+ht,yt=1^nt,ft=nt?b-tt:tt-b;if(d<0)throw new Error("negative radius: "+d);this._x1===null?this._+="M"+mt+","+gt:(Math.abs(this._x1-mt)>epsilon||Math.abs(this._y1-gt)>epsilon)&&(this._+="L"+mt+","+gt),d&&(ft<0&&(ft=ft%tau+tau),ft>tauEpsilon?this._+="A"+d+","+d+",0,1,"+yt+","+(s-ot)+","+(e-ht)+"A"+d+","+d+",0,1,"+yt+","+(this._x1=mt)+","+(this._y1=gt):ft>epsilon&&(this._+="A"+d+","+d+",0,"+ +(ft>=pi)+","+yt+","+(this._x1=s+d*Math.cos(tt))+","+(this._y1=e+d*Math.sin(tt))))},rect:function(s,e,d,b){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+e)+"h"+ +d+"v"+ +b+"h"+-d+"Z"},toString:function(){return this._}};function constant(s){return function(){return s}}function x(s){return s[0]}function y(s){return s[1]}var slice=Array.prototype.slice;function linkSource(s){return s.source}function linkTarget(s){return s.target}function link(s){var e=linkSource,d=linkTarget,b=x,tt=y,nt=null;function ot(){var ht,mt=slice.call(arguments),gt=e.apply(this,mt),yt=d.apply(this,mt);if(nt||(nt=ht=path()),s(nt,+b.apply(this,(mt[0]=gt,mt)),+tt.apply(this,mt),+b.apply(this,(mt[0]=yt,mt)),+tt.apply(this,mt)),ht)return nt=null,ht+""||null}return ot.source=function(ht){return arguments.length?(e=ht,ot):e},ot.target=function(ht){return arguments.length?(d=ht,ot):d},ot.x=function(ht){return arguments.length?(b=typeof ht=="function"?ht:constant(+ht),ot):b},ot.y=function(ht){return arguments.length?(tt=typeof ht=="function"?ht:constant(+ht),ot):tt},ot.context=function(ht){return arguments.length?(nt=ht??null,ot):nt},ot}function curveHorizontal(s,e,d,b,tt){s.moveTo(e,d),s.bezierCurveTo(e=(e+b)/2,d,e,tt,b,tt)}function curveVertical(s,e,d,b,tt){s.moveTo(e,d),s.bezierCurveTo(e,d=(d+tt)/2,b,d,b,tt)}function linkHorizontal(){return link(curveHorizontal)}function linkVertical(){return link(curveVertical)}class Link extends React.PureComponent{constructor(){super(...arguments),this.linkRef=null,this.state={initialStyle:{opacity:0}},this.handleOnClick=e=>{this.props.onClick(this.props.linkData.source,this.props.linkData.target,e)},this.handleOnMouseOver=e=>{this.props.onMouseOver(this.props.linkData.source,this.props.linkData.target,e)},this.handleOnMouseOut=e=>{this.props.onMouseOut(this.props.linkData.source,this.props.linkData.target,e)}}componentDidMount(){this.applyOpacity(1,this.props.transitionDuration)}componentWillLeave(e){this.applyOpacity(0,this.props.transitionDuration,e)}applyOpacity(e,d,b=()=>{}){this.props.enableLegacyTransitions?select(this.linkRef).transition().duration(d).style("opacity",e).on("end",b):(select(this.linkRef).style("opacity",e),b())}drawStepPath(e,d){const{source:b,target:tt}=e,nt=tt.y-b.y;return d==="horizontal"?`M${b.y},${b.x} H${b.y+nt/2} V${tt.x} H${tt.y}`:`M${b.x},${b.y} V${b.y+nt/2} H${tt.x} V${tt.y}`}drawDiagonalPath(e,d){const{source:b,target:tt}=e;return d==="horizontal"?linkHorizontal()({source:[b.y,b.x],target:[tt.y,tt.x]}):linkVertical()({source:[b.x,b.y],target:[tt.x,tt.y]})}drawStraightPath(e,d){const{source:b,target:tt}=e;return d==="horizontal"?`M${b.y},${b.x}L${tt.y},${tt.x}`:`M${b.x},${b.y}L${tt.x},${tt.y}`}drawElbowPath(e,d){return d==="horizontal"?`M${e.source.y},${e.source.x}V${e.target.x}H${e.target.y}`:`M${e.source.x},${e.source.y}V${e.target.y}H${e.target.x}`}drawPath(){const{linkData:e,orientation:d,pathFunc:b}=this.props;return typeof b=="function"?b(e,d):b==="elbow"?this.drawElbowPath(e,d):b==="straight"?this.drawStraightPath(e,d):b==="step"?this.drawStepPath(e,d):this.drawDiagonalPath(e,d)}getClassNames(){const{linkData:e,orientation:d,pathClassFunc:b}=this.props,tt=["rd3t-link"];return typeof b=="function"&&tt.push(b(e,d)),tt.join(" ").trim()}render(){const{linkData:e}=this.props;return React.createElement("path",{ref:d=>{this.linkRef=d},style:Object.assign({},this.state.initialStyle),className:this.getClassNames(),d:this.drawPath(),onClick:this.handleOnClick,onMouseOver:this.handleOnMouseOver,onMouseOut:this.handleOnMouseOut,"data-source-id":e.source.id,"data-target-id":e.target.id})}}const globalCss=`
/* Tree */
.rd3t-tree-container {
  width: 100%;
  height: 100%;
}

.rd3t-grabbable {
  cursor: move; /* fallback if grab cursor is unsupported */
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.rd3t-grabbable:active {
    cursor: grabbing;
    cursor: -moz-grabbing;
    cursor: -webkit-grabbing;
}

/* Node */
.rd3t-node {
  cursor: pointer;
  fill: #777;
  stroke: #000;
  stroke-width: 2;
}

.rd3t-leaf-node {
  cursor: pointer;
  fill: transparent;
  stroke: #000;
  stroke-width: 1;
}

.rd3t-label__title {
  fill: #000;
  stroke: none;
  font-weight: bolder;
}

.rd3t-label__attributes {
  fill: #777;
  stroke: none;
  font-weight: bolder;
  font-size: smaller;
}

/* Link */
.rd3t-link {
  fill: none;
  stroke: #000;
}
`;class Tree extends React.Component{constructor(){super(...arguments),this.state={dataRef:this.props.data,data:Tree.assignInternalProperties(clone(this.props.data)),d3:Tree.calculateD3Geometry(this.props),isTransitioning:!1,isInitialRenderForDataset:!0,dataKey:this.props.dataKey},this.internalState={targetNode:null,isTransitioning:!1},this.svgInstanceRef=`rd3t-svg-${v4()}`,this.gInstanceRef=`rd3t-g-${v4()}`,this.handleNodeToggle=e=>{const d=clone(this.state.data),tt=this.findNodesById(e,d,[])[0];this.props.collapsible&&!this.state.isTransitioning&&(tt.__rd3t.collapsed?(Tree.expandNode(tt),this.props.shouldCollapseNeighborNodes&&this.collapseNeighborNodes(tt,d)):Tree.collapseNode(tt),this.props.enableLegacyTransitions?(this.setState({data:d,isTransitioning:!0}),setTimeout(()=>this.setState({isTransitioning:!1}),this.props.transitionDuration+10)):this.setState({data:d}),this.internalState.targetNode=tt)},this.handleAddChildrenToNode=(e,d)=>{const b=clone(this.state.data),tt=this.findNodesById(e,b,[]);if(tt.length>0){const nt=tt[0],ot=nt.__rd3t.depth,ht=clone(d).map(mt=>Tree.assignInternalProperties([mt],ot+1));nt.children.push(...ht.flat()),this.setState({data:b})}},this.handleOnNodeClickCb=(e,d)=>{const{onNodeClick:b}=this.props;b&&typeof b=="function"&&(d.persist(),b(clone(e),d))},this.handleOnLinkClickCb=(e,d,b)=>{const{onLinkClick:tt}=this.props;tt&&typeof tt=="function"&&(b.persist(),tt(clone(e),clone(d),b))},this.handleOnNodeMouseOverCb=(e,d)=>{const{onNodeMouseOver:b}=this.props;b&&typeof b=="function"&&(d.persist(),b(clone(e),d))},this.handleOnLinkMouseOverCb=(e,d,b)=>{const{onLinkMouseOver:tt}=this.props;tt&&typeof tt=="function"&&(b.persist(),tt(clone(e),clone(d),b))},this.handleOnNodeMouseOutCb=(e,d)=>{const{onNodeMouseOut:b}=this.props;b&&typeof b=="function"&&(d.persist(),b(clone(e),d))},this.handleOnLinkMouseOutCb=(e,d,b)=>{const{onLinkMouseOut:tt}=this.props;tt&&typeof tt=="function"&&(b.persist(),tt(clone(e),clone(d),b))},this.centerNode=e=>{const{dimensions:d,orientation:b,zoom:tt,centeringTransitionDuration:nt}=this.props;if(d){const ot=select(`.${this.gInstanceRef}`),ht=select(`.${this.svgInstanceRef}`),mt=this.state.d3.scale;let gt,yt;b==="horizontal"?(yt=-e.x*mt+d.height/2,gt=-e.y*mt+d.width/2):(gt=-e.x*mt+d.width/2,yt=-e.y*mt+d.height/2),ot.transition().duration(nt).attr("transform","translate("+gt+","+yt+")scale("+mt+")"),ht.call(d3zoom().transform,identity.translate(gt,yt).scale(tt))}},this.getNodeClassName=(e,d)=>{const{rootNodeClassName:b,branchNodeClassName:tt,leafNodeClassName:nt}=this.props;return e!=null?d.children?tt:nt:b}}static getDerivedStateFromProps(e,d){let b=null;const tt=!e.dataKey||d.dataKey!==e.dataKey;e.data!==d.dataRef&&tt&&(b={dataRef:e.data,data:Tree.assignInternalProperties(clone(e.data)),isInitialRenderForDataset:!0,dataKey:e.dataKey});const nt=Tree.calculateD3Geometry(e);return dequal(nt,d.d3)||(b=b||{},b.d3=nt),b}componentDidMount(){this.bindZoomListener(this.props),this.setState({isInitialRenderForDataset:!1})}componentDidUpdate(e){this.props.data!==e.data&&this.setState({isInitialRenderForDataset:!1}),(!dequal(this.props.translate,e.translate)||!dequal(this.props.scaleExtent,e.scaleExtent)||this.props.zoomable!==e.zoomable||this.props.draggable!==e.draggable||this.props.zoom!==e.zoom||this.props.enableLegacyTransitions!==e.enableLegacyTransitions)&&this.bindZoomListener(this.props),typeof this.props.onUpdate=="function"&&this.props.onUpdate({node:this.internalState.targetNode?clone(this.internalState.targetNode):null,zoom:this.state.d3.scale,translate:this.state.d3.translate}),this.internalState.targetNode=null}setInitialTreeDepth(e,d){e.forEach(b=>{b.data.__rd3t.collapsed=b.depth>=d})}bindZoomListener(e){const{zoomable:d,scaleExtent:b,translate:tt,zoom:nt,onUpdate:ot,hasInteractiveNodes:ht}=e,mt=select(`.${this.svgInstanceRef}`),gt=select(`.${this.gInstanceRef}`);mt.call(d3zoom().transform,identity.translate(tt.x,tt.y).scale(nt)),mt.call(d3zoom().scaleExtent(d?[b.min,b.max]:[nt,nt]).filter(yt=>ht?yt.target.classList.contains(this.svgInstanceRef)||yt.target.classList.contains(this.gInstanceRef)||yt.shiftKey:!0).on("zoom",yt=>{!this.props.draggable&&["mousemove","touchmove","dblclick"].includes(yt.sourceEvent.type)||(gt.attr("transform",yt.transform),typeof ot=="function"&&(ot({node:null,zoom:yt.transform.k,translate:{x:yt.transform.x,y:yt.transform.y}}),this.state.d3.scale=yt.transform.k,this.state.d3.translate={x:yt.transform.x,y:yt.transform.y}))}))}static assignInternalProperties(e,d=0){return(Array.isArray(e)?e:[e]).map(tt=>{const nt=tt;return nt.__rd3t={id:null,depth:null,collapsed:!1},nt.__rd3t.id=v4(),nt.__rd3t.depth=d,nt.children&&nt.children.length>0&&(nt.children=Tree.assignInternalProperties(nt.children,d+1)),nt})}findNodesById(e,d,b){return b.length>0||(b=b.concat(d.filter(tt=>tt.__rd3t.id===e)),d.forEach(tt=>{tt.children&&tt.children.length>0&&(b=this.findNodesById(e,tt.children,b))})),b}findNodesAtDepth(e,d,b){return b=b.concat(d.filter(tt=>tt.__rd3t.depth===e)),d.forEach(tt=>{tt.children&&tt.children.length>0&&(b=this.findNodesAtDepth(e,tt.children,b))}),b}static collapseNode(e){e.__rd3t.collapsed=!0,e.children&&e.children.length>0&&e.children.forEach(d=>{Tree.collapseNode(d)})}static expandNode(e){e.__rd3t.collapsed=!1}collapseNeighborNodes(e,d){this.findNodesAtDepth(e.__rd3t.depth,d,[]).filter(tt=>tt.__rd3t.id!==e.__rd3t.id).forEach(tt=>Tree.collapseNode(tt))}generateTree(){const{initialDepth:e,depthFactor:d,separation:b,nodeSize:tt,orientation:nt}=this.props,{isInitialRenderForDataset:ot}=this.state,mt=d3tree().nodeSize(nt==="horizontal"?[tt.y,tt.x]:[tt.x,tt.y]).separation((ft,st)=>ft.parent.data.__rd3t.id===st.parent.data.__rd3t.id?b.siblings:b.nonSiblings)(hierarchy(this.state.data[0],ft=>ft.__rd3t.collapsed?null:ft.children));let gt=mt.descendants();const yt=mt.links();return e!==void 0&&ot&&this.setInitialTreeDepth(gt,e),d&&gt.forEach(ft=>{ft.y=ft.depth*d}),{nodes:gt,links:yt}}static calculateD3Geometry(e){let d;return e.zoom>e.scaleExtent.max?d=e.scaleExtent.max:e.zoom<e.scaleExtent.min?d=e.scaleExtent.min:d=e.zoom,{translate:e.translate,scale:d}}render(){const{nodes:e,links:d}=this.generateTree(),{renderCustomNodeElement:b,orientation:tt,pathFunc:nt,transitionDuration:ot,nodeSize:ht,depthFactor:mt,initialDepth:gt,separation:yt,enableLegacyTransitions:ft,svgClassName:st,pathClassFunc:bt}=this.props,{translate:vt,scale:xt}=this.state.d3,wt=Object.assign(Object.assign(Object.assign({},ht),yt),{depthFactor:mt,initialDepth:gt});return React.createElement("div",{className:"rd3t-tree-container rd3t-grabbable"},React.createElement("style",null,globalCss),React.createElement("svg",{className:`rd3t-svg ${this.svgInstanceRef} ${st}`,width:"100%",height:"100%"},React.createElement(TransitionGroupWrapper,{enableLegacyTransitions:ft,component:"g",className:`rd3t-g ${this.gInstanceRef}`,transform:`translate(${vt.x},${vt.y}) scale(${xt})`},d.map((St,_t)=>React.createElement(Link,{key:"link-"+_t,orientation:tt,pathFunc:nt,pathClassFunc:bt,linkData:St,onClick:this.handleOnLinkClickCb,onMouseOver:this.handleOnLinkMouseOverCb,onMouseOut:this.handleOnLinkMouseOutCb,enableLegacyTransitions:ft,transitionDuration:ot})),e.map((St,_t)=>{const{data:Tt,x:Et,y:kt,parent:Mt}=St;return React.createElement(Node,{key:"node-"+_t,data:Tt,position:{x:Et,y:kt},hierarchyPointNode:St,parent:Mt,nodeClassName:this.getNodeClassName(Mt,Tt),renderCustomNodeElement:b,nodeSize:ht,orientation:tt,enableLegacyTransitions:ft,transitionDuration:ot,onNodeToggle:this.handleNodeToggle,onNodeClick:this.handleOnNodeClickCb,onNodeMouseOver:this.handleOnNodeMouseOverCb,onNodeMouseOut:this.handleOnNodeMouseOutCb,handleAddChildrenToNode:this.handleAddChildrenToNode,subscriptions:wt,centerNode:this.centerNode})}))))}}Tree.defaultProps={onNodeClick:void 0,onNodeMouseOver:void 0,onNodeMouseOut:void 0,onLinkClick:void 0,onLinkMouseOver:void 0,onLinkMouseOut:void 0,onUpdate:void 0,orientation:"horizontal",translate:{x:0,y:0},pathFunc:"diagonal",pathClassFunc:void 0,transitionDuration:500,depthFactor:void 0,collapsible:!0,initialDepth:void 0,zoomable:!0,draggable:!0,zoom:1,scaleExtent:{min:.1,max:1},nodeSize:{x:140,y:140},separation:{siblings:1,nonSiblings:2},shouldCollapseNeighborNodes:!1,svgClassName:"",rootNodeClassName:"",branchNodeClassName:"",leafNodeClassName:"",renderCustomNodeElement:void 0,enableLegacyTransitions:!1,hasInteractiveNodes:!1,dimensions:void 0,centeringTransitionDuration:800,dataKey:void 0};const BSContext=reactExports.createContext(),useAppContext=()=>reactExports.useContext(BSContext),replaceSpecialTokens=s=>s.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/"/g,'\\"').replace(/'/g,"\\'"),CustomNodeRender=({nodeDatum:s})=>{const e=reactExports.useRef(null),d=reactExports.useRef(null),[b,tt]=reactExports.useState({width:300,height:60});if(reactExports.useLayoutEffect(()=>{if(e.current&&d.current){const yt=d.current;let ft=yt.scrollWidth+20,st=yt.scrollHeight+10;tt({width:ft,height:st})}},[s.name]),s.name==="root"&&!s.score)return null;const nt=0,ot=b.height/2,ht=s.highlighted?"#FFEB3B":"#E3F2FD",mt=s.highlighted?"#FBC02D":"none",gt=s.highlighted?"#F57F17":"#0D47A1";return console.log("Current Node:",s),jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("filter",{id:"dropShadow",x:"-20%",y:"-20%",width:"150%",height:"150%",children:[jsxRuntimeExports.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),jsxRuntimeExports.jsx("feOffset",{dx:"2",dy:"2",result:"offsetblur"}),jsxRuntimeExports.jsx("feFlood",{floodColor:"rgba(0,0,0,0.3)"}),jsxRuntimeExports.jsx("feComposite",{in2:"offsetblur",operator:"in"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),jsxRuntimeExports.jsx("rect",{x:(nt-b.width)/2,y:(ot-b.height)/2,width:b.width,height:b.height,fill:ht,stroke:mt,rx:"20",ry:"20",filter:"url(#dropShadow)",style:{transition:"fill 0.3s ease, stroke 0.3s ease"}}),jsxRuntimeExports.jsx("foreignObject",{ref:e,x:(nt-b.width)/2,y:(ot-b.height)/2,width:b.width,height:b.height,style:{transition:"transform 0.2s ease"},children:jsxRuntimeExports.jsx("div",{ref:d,xmlns:"http://www.w3.org/1999/xhtml",style:{color:gt,fontSize:"32px",fontWeight:"normal",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",height:"100%",transition:"color 0.3s ease",padding:"0 20px"},children:replaceSpecialTokens(s.name)})}),(!s.children||s.children.length===0)&&s.score&&jsxRuntimeExports.jsx("text",{x:nt,y:0,textAnchor:"middle",fill:"#0D47A1",fontSize:"24px",fontWeight:"normal",style:{fontWeight:"normal"},children:s.score})]})};dt.div`
    position: absolute;
    bottom: 10px; /* Adjust the margin from the bottom here */
    left: 50%;
    transform: translateX(-50%);
    background: #90caf9;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    z-index: 1000;
    flex-direction: column; /* Stack siblings horizontally */
`;const TreeComponent=()=>{const{config:s,setConfig:e}=useAppContext(),[d,b]=reactExports.useState({width:window.innerWidth,height:window.innerHeight}),[tt,nt]=reactExports.useState(0),ot={x:d.width-d.width,y:d.height/2},[ht,mt]=reactExports.useState(ot);console.log(window.innerWidth);const gt=yt=>(console.log("Number of Beams:",yt),yt===1||yt===2?.75:yt===3?.5:yt===4?.35:-1);return reactExports.useEffect(()=>{const yt=gt(s.numBeams);console.log("New Zoom:",yt),e(ft=>({...ft,zoom:yt}))},[s.numBeams]),console.log("Translate:",ht.x,ht.y),reactExports.useEffect(()=>{s.tree===null&&(mt(ot),nt(yt=>yt+1))},[s.tree]),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",position:"relative"},children:jsxRuntimeExports.jsx(Tree,{data:s.renderTree,renderCustomNodeElement:yt=>jsxRuntimeExports.jsx(CustomNodeRender,{...yt}),translate:ht,zoom:s.zoom,nodeSize:{x:400,y:30},scaleExtent:{min:.1,max:2},draggable:s.isDraggable,transitionDuration:500,enableLegacyTransitions:!0,separation:{siblings:3,nonSiblings:4}},tt)})},ControlPanelStyle=dt.div`
  width: 25%;
  background: linear-gradient(135deg, #e3f2fd, #90caf9);
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  // border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
`,ButtonStyle=dt.button`
  background: linear-gradient(135deg, #42a5f5, #1e88e5);
  color: white;
  border: none;
  padding: 0.75rem 1rem;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s ease, transform 0.2s ease;

  &:hover {
    background: linear-gradient(135deg, #1e88e5, #1565c0);
    transform: translateY(-2px);
  }

  &:disabled {
    background-color: #b0bec5;
    cursor: not-allowed;
  }

  &:not(:last-child) {
    margin-bottom: 0.5rem;
  }
`,SliderStyle=dt.input.attrs({type:"range"})`
  width: 100%;
  height: 25px;
  background: #cfd8dc;
  border-radius: 8px;
  -webkit-appearance: none;

  &::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 25px;
    height: 25px;
    background: #42a5f5;
    cursor: pointer;
    border-radius: 50%;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: background 0.3s ease;
  }

  &::-moz-range-thumb {
    width: 25px;
    height: 25px;
    background: #42a5f5;
    cursor: pointer;
    border-radius: 50%;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: background 0.3s ease;
  }

  &:hover::-webkit-slider-thumb {
    background: #1e88e5;
  }

  &:hover::-moz-range-thumb {
    background: #1e88e5;
  }
`,Input=dt.input`
  padding: 0.5rem;
  border: 1px solid #90a4ae;
  border-radius: 8px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: border-color 0.3s ease, box-shadow 0.3s ease;

  &:focus {
    border-color: #42a5f5;
    box-shadow: inset 0 2px 6px rgba(0, 123, 255, 0.3);
    outline: none;
  }
`,SequenceText=dt.div`
  width: 100%;
  background-color: white;
  padding: 0.5rem;
  border-radius: 4px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: border-color 0.3s ease, box-shadow 0.3s ease;

  &:focus {
    border-color: #42a5f5;
    box-shadow: inset 0 2px 6px rgba(0, 123, 255, 0.3);
    outline: none;
  }
`,Label=dt.label`
  font-size: 1rem; 
  color: #455a64;
  margin-bottom: 0rem;
`,InputContainer=dt.div`
  display: flex;
  flex-direction: column;
  gap: 0.5rem; 
`,ButtonContainer=dt.div`
  display: flex;
  flex-direction: column;
  gap: 1rem; 
`,SequenceContainer=dt.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: flex-end; /* Anchor stacked elements to the bottom */
  align-items: center;
`,ResetButtonStyle=dt(ButtonStyle)`
  background: linear-gradient(135deg, #90caf9, #64b5f6);
  margin-top: 1rem;

  &:hover {
    background: linear-gradient(135deg, #64b5f6, #42a5f5);
  }
`,ControlPanel=()=>{const{config:s,setConfig:e,animate:d,generate:b,lastMessage:tt}=useAppContext(),[nt,ot]=reactExports.useState(!1),[ht,mt]=reactExports.useState(!1);reactExports.useEffect(()=>{s.tree&&gt()},[s.tree]);const gt=()=>{e(st=>({...st,useTimeout:!1,isRunning:!0,showAnimateButton:!0})),ot(!0),d([],0)},yt=()=>{e(st=>({...st,useTimeout:!0,isRunning:!0,isStepDisabled:!0})),d(s.currentLayer,s.currentDepth)},ft=()=>{console.log("THIS IS WHAT IS IN TREE AT THIS POINT",s.tree),e(st=>({...st,renderTree:{name:"root"},tree:null,useTimeout:!1,isRunning:!1,currentLayer:[],currentDepth:0,showAnimateButton:!1,showResetButton:!1,isStepDisabled:!1,isDraggable:!1})),ot(!1)};return jsxRuntimeExports.jsxs(ControlPanelStyle,{children:[jsxRuntimeExports.jsxs(InputContainer,{children:[jsxRuntimeExports.jsx(Label,{children:"Input Text: "}),jsxRuntimeExports.jsx(Input,{placeholder:"Enter a message",value:s.input,onChange:st=>e(bt=>({...bt,input:st.target.value}))})]}),jsxRuntimeExports.jsxs(InputContainer,{children:[jsxRuntimeExports.jsx(Label,{children:"Beams:"}),jsxRuntimeExports.jsx(Input,{value:s.numBeams,onChange:st=>e(bt=>({...bt,numBeams:st.target.value}))}),jsxRuntimeExports.jsx(SliderStyle,{min:"1",max:"4",value:s.numBeams,onChange:st=>e(bt=>({...bt,numBeams:Number(st.target.value)}))})]}),jsxRuntimeExports.jsxs(InputContainer,{children:[jsxRuntimeExports.jsx(Label,{children:"Depth:"}),jsxRuntimeExports.jsx(Input,{value:s.maxDepth,onChange:st=>e(bt=>({...bt,maxDepth:st.target.value}))}),jsxRuntimeExports.jsx(SliderStyle,{min:"1",max:"10",value:s.maxDepth,onChange:st=>e(bt=>({...bt,maxDepth:Number(st.target.value)}))})]}),nt?jsxRuntimeExports.jsxs(ButtonContainer,{children:[jsxRuntimeExports.jsx(ButtonStyle,{onClick:()=>window.dispatchEvent(new CustomEvent("stepPress")),disabled:s.isStepDisabled,children:"Step"}),s.showAnimateButton&&jsxRuntimeExports.jsx(ButtonStyle,{onClick:yt,children:"Animate"})]}):jsxRuntimeExports.jsx(ButtonStyle,{disabled:ht||s.input==="",onClick:()=>{b(),mt(!0)},children:ht?"Loading...":"Start"}),s.showResetButton&&jsxRuntimeExports.jsx(ResetButtonStyle,{onClick:()=>{ft(),mt(!1)},children:"Reset"}),jsxRuntimeExports.jsxs(SequenceContainer,{children:[jsxRuntimeExports.jsx("h3",{children:"Generated Sequence"}),jsxRuntimeExports.jsx(SequenceText,{children:jsxRuntimeExports.jsx("p",{children:tt})})]})]})};function dispatchCallback(s,e){s&&s(e)}function reverseDictionary(s){return Object.fromEntries(Object.entries(s).map(([e,d])=>[d,e]))}const Callable=class{constructor(){let s=function(...e){return s._call(...e)};return Object.setPrototypeOf(s,new.target.prototype)}_call(...s){throw Error("Must implement _call method in subclass")}};function isTypedArray(s){var e,d,b;return((b=(d=(e=s==null?void 0:s.prototype)==null?void 0:e.__proto__)==null?void 0:d.constructor)==null?void 0:b.name)==="TypedArray"}function isIntegralNumber(s){return Number.isInteger(s)||typeof s=="bigint"}function exists(s){return s!=null}function mergeArrays(...s){return Array.prototype.concat.apply([],s)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(s,e,d)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const b=backends[s];if(b===void 0)backends[s]={backend:e,priority:d};else{if(b.priority>d)return;if(b.priority===d&&b.backend!==e)throw new Error(`cannot register backend "${s}" using priority ${d}`)}if(d>=0){const tt=backendsSortedByPriority.indexOf(s);tt!==-1&&backendsSortedByPriority.splice(tt,1);for(let nt=0;nt<backendsSortedByPriority.length;nt++)if(backends[backendsSortedByPriority[nt]].priority<=d){backendsSortedByPriority.splice(nt,0,s);return}backendsSortedByPriority.push(s)}return}throw new TypeError("not a valid backend")},resolveBackend=async s=>{const e=s.length===0?backendsSortedByPriority:s,d=[];for(const b of e){const tt=backends[b];if(tt){if(tt.initialized)return tt.backend;if(tt.aborted)continue;const nt=!!tt.initPromise;try{return nt||(tt.initPromise=tt.backend.init()),await tt.initPromise,tt.initialized=!0,tt.backend}catch(ot){nt||d.push({name:b,err:ot}),tt.aborted=!0}finally{delete tt.initPromise}}}throw new Error(`no available backend found. ERR: ${d.map(b=>`[${b.name}] ${b.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=s=>{let e=1;for(let d=0;d<s.length;d++){const b=s[d];if(typeof b!="number"||!Number.isSafeInteger(b))throw new TypeError(`dims[${d}] must be an integer, got: ${b}`);if(b<0)throw new RangeError(`dims[${d}] must be a non-negative integer, got: ${b}`);e*=b}return e};let Tensor$2=class lo{constructor(e,d,b){let tt,nt,ot;if(typeof e=="string")if(tt=e,ot=b,e==="string"){if(!Array.isArray(d))throw new TypeError("A string tensor's data must be a string array.");nt=d}else{const mt=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(mt===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(d))nt=mt.from(d);else if(d instanceof mt)nt=d;else throw new TypeError(`A ${tt} tensor's data must be type of ${mt}`)}else if(ot=d,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const mt=typeof e[0];if(mt==="string")tt="string",nt=e;else if(mt==="boolean")tt="bool",nt=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${mt}.`)}else{const mt=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(mt===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);tt=mt,nt=e}if(ot===void 0)ot=[nt.length];else if(!Array.isArray(ot))throw new TypeError("A tensor's dims must be a number array");const ht=calculateSize(ot);if(ht!==nt.length)throw new Error(`Tensor's size(${ht}) does not match data length(${nt.length}).`);this.dims=ot,this.type=tt,this.data=nt,this.size=ht}static bufferToTensor(e,d){if(e===void 0)throw new Error("Image buffer must be defined");if(d.height===void 0||d.width===void 0)throw new Error("Image height and width must be defined");const{height:b,width:tt}=d,nt=d.norm;let ot,ht;nt===void 0||nt.mean===void 0?ot=255:ot=nt.mean,nt===void 0||nt.bias===void 0?ht=0:ht=nt.bias;const mt=d.bitmapFormat!==void 0?d.bitmapFormat:"RGBA",gt=d.tensorFormat!==void 0&&d.tensorFormat!==void 0?d.tensorFormat:"RGB",yt=b*tt,ft=gt==="RGBA"?new Float32Array(yt*4):new Float32Array(yt*3);let st=4,bt=0,vt=1,xt=2,wt=3,St=0,_t=yt,Tt=yt*2,Et=-1;mt==="RGB"&&(st=3,bt=0,vt=1,xt=2,wt=-1),gt==="RGBA"?Et=yt*3:gt==="RBG"?(St=0,Tt=yt,_t=yt*2):gt==="BGR"&&(Tt=0,_t=yt,St=yt*2);for(let Mt=0;Mt<yt;Mt++,bt+=st,xt+=st,vt+=st,wt+=st)ft[St++]=(e[bt]+ht)/ot,ft[_t++]=(e[vt]+ht)/ot,ft[Tt++]=(e[xt]+ht)/ot,Et!==-1&&wt!==-1&&(ft[Et++]=(e[wt]+ht)/ot);return gt==="RGBA"?new lo("float32",ft,[1,4,b,tt]):new lo("float32",ft,[1,3,b,tt])}static async fromImage(e,d){const b=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,tt=typeof ImageData<"u"&&e instanceof ImageData,nt=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,ot=typeof String<"u"&&(e instanceof String||typeof e=="string");let ht,mt={};if(b){const gt=document.createElement("canvas"),yt=gt.getContext("2d");if(yt!=null){let ft=e.naturalHeight,st=e.naturalWidth;if(d!==void 0&&d.resizedHeight!==void 0&&d.resizedWidth!==void 0&&(ft=d.resizedHeight,st=d.resizedWidth),d!==void 0){if(mt=d,d.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(mt.tensorFormat="RGBA",d.height!==void 0&&d.height!==ft)throw new Error("Image input config height doesn't match HTMLImageElement height");if(mt.height=ft,d.width!==void 0&&d.width!==st)throw new Error("Image input config width doesn't match HTMLImageElement width");mt.width=st}else mt.tensorFormat="RGBA",mt.height=ft,mt.width=st;gt.width=st,gt.height=ft,yt.drawImage(e,0,0,st,ft),ht=yt.getImageData(0,0,st,ft).data}else throw new Error("Can not access image data")}else if(tt){const gt="RGBA";let yt,ft;if(d!==void 0&&d.resizedWidth!==void 0&&d.resizedHeight!==void 0?(yt=d.resizedHeight,ft=d.resizedWidth):(yt=e.height,ft=e.width),d!==void 0){if(mt=d,d.bitmapFormat!==void 0&&d.bitmapFormat!==gt)throw new Error("Image input config format must be RGBA for ImageData");mt.bitmapFormat="RGBA"}else mt.bitmapFormat="RGBA";if(mt.height=yt,mt.width=ft,d!==void 0){const st=document.createElement("canvas");st.width=ft,st.height=yt;const bt=st.getContext("2d");if(bt!=null)bt.putImageData(e,0,0),ht=bt.getImageData(0,0,ft,yt).data;else throw new Error("Can not access image data")}else ht=e.data}else if(nt){if(d===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(d.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const gt=document.createElement("canvas").getContext("2d");if(gt!=null){const yt=e.height,ft=e.width;if(gt.drawImage(e,0,0,ft,yt),ht=gt.getImageData(0,0,ft,yt).data,d!==void 0){if(d.height!==void 0&&d.height!==yt)throw new Error("Image input config height doesn't match ImageBitmap height");if(mt.height=yt,d.width!==void 0&&d.width!==ft)throw new Error("Image input config width doesn't match ImageBitmap width");mt.width=ft}else mt.height=yt,mt.width=ft;return lo.bufferToTensor(ht,mt)}else throw new Error("Can not access image data")}else{if(ot)return new Promise((gt,yt)=>{const ft=document.createElement("canvas"),st=ft.getContext("2d");if(!e||!st)return yt();const bt=new Image;bt.crossOrigin="Anonymous",bt.src=e,bt.onload=()=>{ft.width=bt.width,ft.height=bt.height,st.drawImage(bt,0,0,ft.width,ft.height);const vt=st.getImageData(0,0,ft.width,ft.height);if(d!==void 0){if(d.height!==void 0&&d.height!==ft.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(mt.height=ft.height,d.width!==void 0&&d.width!==ft.width)throw new Error("Image input config width doesn't match ImageBitmap width");mt.width=ft.width}else mt.height=ft.height,mt.width=ft.width;gt(lo.bufferToTensor(vt.data,mt))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(ht!==void 0)return lo.bufferToTensor(ht,mt);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var d,b;const tt=document.createElement("canvas").getContext("2d");let nt;if(tt!=null){const ot=this.dims[3],ht=this.dims[2],mt=this.dims[1],gt=e!==void 0&&e.format!==void 0?e.format:"RGB",yt=e!==void 0&&((d=e.norm)===null||d===void 0?void 0:d.mean)!==void 0?e.norm.mean:255,ft=e!==void 0&&((b=e.norm)===null||b===void 0?void 0:b.bias)!==void 0?e.norm.bias:0,st=ht*ot;if(e!==void 0){if(e.height!==void 0&&e.height!==ht)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==ot)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&mt===4&&e.format!=="RGBA"||mt===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const bt=4;let vt=0,xt=1,wt=2,St=3,_t=0,Tt=st,Et=st*2,kt=-1;gt==="RGBA"?(_t=0,Tt=st,Et=st*2,kt=st*3):gt==="RGB"?(_t=0,Tt=st,Et=st*2):gt==="RBG"&&(_t=0,Et=st,Tt=st*2),nt=tt.createImageData(ot,ht);for(let Mt=0;Mt<ht*ot;vt+=bt,xt+=bt,wt+=bt,St+=bt,Mt++)nt.data[vt]=(this.data[_t++]-ft)*yt,nt.data[xt]=(this.data[Tt++]-ft)*yt,nt.data[wt]=(this.data[Et++]-ft)*yt,nt.data[St]=kt===-1?255:(this.data[kt++]-ft)*yt}else throw new Error("Can not access image data");return nt}reshape(e){return new lo(this.type,this.data,e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class Fs{constructor(e){this.handler=e}async run(e,d,b){const tt={};let nt={};if(typeof e!="object"||e===null||e instanceof Tensor$1||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let ot=!0;if(typeof d=="object"){if(d===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(d instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(d)){if(d.length===0)throw new TypeError("'fetches' cannot be an empty array.");ot=!1;for(const gt of d){if(typeof gt!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(gt)===-1)throw new RangeError(`'fetches' contains invalid output name: ${gt}.`);tt[gt]=null}if(typeof b=="object"&&b!==null)nt=b;else if(typeof b<"u")throw new TypeError("'options' must be an object.")}else{let gt=!1;const yt=Object.getOwnPropertyNames(d);for(const ft of this.outputNames)if(yt.indexOf(ft)!==-1){const st=d[ft];(st===null||st instanceof Tensor$1)&&(gt=!0,ot=!1,tt[ft]=st)}if(gt){if(typeof b=="object"&&b!==null)nt=b;else if(typeof b<"u")throw new TypeError("'options' must be an object.")}else nt=d}}else if(typeof d<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const gt of this.inputNames)if(typeof e[gt]>"u")throw new Error(`input '${gt}' is missing in 'feeds'.`);if(ot)for(const gt of this.outputNames)tt[gt]=null;const ht=await this.handler.run(e,tt,nt),mt={};for(const gt in ht)Object.hasOwnProperty.call(ht,gt)&&(mt[gt]=new Tensor$1(ht[gt].type,ht[gt].data,ht[gt].dims));return mt}static async create(e,d,b,tt){let nt,ot={};if(typeof e=="string"){if(nt=e,typeof d=="object"&&d!==null)ot=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(nt=e,typeof d=="object"&&d!==null)ot=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const ft=e;let st=0,bt=e.byteLength;if(typeof d=="object"&&d!==null)ot=d;else if(typeof d=="number"){if(st=d,!Number.isSafeInteger(st))throw new RangeError("'byteOffset' must be an integer.");if(st<0||st>=ft.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${ft.byteLength}).`);if(bt=e.byteLength-st,typeof b=="number"){if(bt=b,!Number.isSafeInteger(bt))throw new RangeError("'byteLength' must be an integer.");if(bt<=0||st+bt>ft.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${ft.byteLength-st}].`);if(typeof tt=="object"&&tt!==null)ot=tt;else if(typeof tt<"u")throw new TypeError("'options' must be an object.")}else if(typeof b<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof d<"u")throw new TypeError("'options' must be an object.");nt=new Uint8Array(ft,st,bt)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const mt=(ot.executionProviders||[]).map(ft=>typeof ft=="string"?ft:ft.name),yt=await(await resolveBackend(mt)).createSessionHandler(nt,ot);return new Fs(yt)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(s,e){module.exports=e(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(s,e,d)=>{var b,tt=(b=(b=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(nt){function ot(){return Kt.buffer!=ln&&ir(Kt.buffer),hn}function ht(){return Kt.buffer!=ln&&ir(Kt.buffer),kn}function mt(){return Kt.buffer!=ln&&ir(Kt.buffer),Zt}function gt(){return Kt.buffer!=ln&&ir(Kt.buffer),xn}function yt(){return Kt.buffer!=ln&&ir(Kt.buffer),En}var ft,st,bt;nt=nt||{},ft||(ft=nt!==void 0?nt:{}),ft.ready=new Promise(function(Nt,Vt){st=Nt,bt=Vt});var vt,xt,wt,St,_t,Tt,Et=Object.assign({},ft),kt="./this.program",Mt=(Nt,Vt)=>{throw Vt},Ot=typeof window=="object",Dt=typeof importScripts=="function",At=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",It=ft.ENVIRONMENT_IS_PTHREAD||!1,jt="";function qt(Nt){return ft.locateFile?ft.locateFile(Nt,jt):jt+Nt}if(At){let Nt;jt=Dt?d(908).dirname(jt)+"/":"//",Tt=()=>{_t||(St=d(1384),_t=d(908))},vt=function(Vt,Gt){return Tt(),Vt=_t.normalize(Vt),St.readFileSync(Vt,Gt?void 0:"utf8")},wt=Vt=>((Vt=vt(Vt,!0)).buffer||(Vt=new Uint8Array(Vt)),Vt),xt=(Vt,Gt,Qt)=>{Tt(),Vt=_t.normalize(Vt),St.readFile(Vt,function(sn,fn){sn?Qt(sn):Gt(fn.buffer)})},1<process.argv.length&&(kt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Vt){if(!(Vt instanceof lr))throw Vt}),process.on("unhandledRejection",function(Vt){throw Vt}),Mt=(Vt,Gt)=>{if(hr())throw process.exitCode=Vt,Gt;Gt instanceof lr||Ut("exiting due to exception: "+Gt),process.exit(Vt)},ft.inspect=function(){return"[Emscripten Module object]"};try{Nt=d(9925)}catch(Vt){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Vt}d.g.Worker=Nt.Worker}else(Ot||Dt)&&(Dt?jt=self.location.href:typeof document<"u"&&document.currentScript&&(jt=document.currentScript.src),b&&(jt=b),jt=jt.indexOf("blob:")!==0?jt.substr(0,jt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",At||(vt=Nt=>{var Vt=new XMLHttpRequest;return Vt.open("GET",Nt,!1),Vt.send(null),Vt.responseText},Dt&&(wt=Nt=>{var Vt=new XMLHttpRequest;return Vt.open("GET",Nt,!1),Vt.responseType="arraybuffer",Vt.send(null),new Uint8Array(Vt.response)}),xt=(Nt,Vt,Gt)=>{var Qt=new XMLHttpRequest;Qt.open("GET",Nt,!0),Qt.responseType="arraybuffer",Qt.onload=()=>{Qt.status==200||Qt.status==0&&Qt.response?Vt(Qt.response):Gt()},Qt.onerror=Gt,Qt.send(null)}));At&&typeof performance>"u"&&(d.g.performance=d(6953).performance);var Jt=console.log.bind(console),Bt=console.warn.bind(console);At&&(Tt(),Jt=Nt=>St.writeSync(1,Nt+`
`),Bt=Nt=>St.writeSync(2,Nt+`
`));var Wt,Lt=ft.print||Jt,Ut=ft.printErr||Bt;Object.assign(ft,Et),Et=null,ft.thisProgram&&(kt=ft.thisProgram),ft.quit&&(Mt=ft.quit),ft.wasmBinary&&(Wt=ft.wasmBinary);var tn=ft.noExitRuntime||!1;typeof WebAssembly!="object"&&zn("no native wasm support detected");var Kt,an,ln,hn,kn,Zt,xn,En,Cn=!1,Fn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Vn(Nt,Vt,Gt){var Qt=(Vt>>>=0)+Gt;for(Gt=Vt;Nt[Gt]&&!(Gt>=Qt);)++Gt;if(16<Gt-Vt&&Nt.buffer&&Fn)return Fn.decode(Nt.buffer instanceof SharedArrayBuffer?Nt.slice(Vt,Gt):Nt.subarray(Vt,Gt));for(Qt="";Vt<Gt;){var sn=Nt[Vt++];if(128&sn){var fn=63&Nt[Vt++];if((224&sn)==192)Qt+=String.fromCharCode((31&sn)<<6|fn);else{var wn=63&Nt[Vt++];65536>(sn=(240&sn)==224?(15&sn)<<12|fn<<6|wn:(7&sn)<<18|fn<<12|wn<<6|63&Nt[Vt++])?Qt+=String.fromCharCode(sn):(sn-=65536,Qt+=String.fromCharCode(55296|sn>>10,56320|1023&sn))}}else Qt+=String.fromCharCode(sn)}return Qt}function qn(Nt,Vt){return(Nt>>>=0)?Vn(ht(),Nt,Vt):""}function cr(Nt,Vt,Gt,Qt){if(!(0<Qt))return 0;var sn=Gt>>>=0;Qt=Gt+Qt-1;for(var fn=0;fn<Nt.length;++fn){var wn=Nt.charCodeAt(fn);if(55296<=wn&&57343>=wn&&(wn=65536+((1023&wn)<<10)|1023&Nt.charCodeAt(++fn)),127>=wn){if(Gt>=Qt)break;Vt[Gt++>>>0]=wn}else{if(2047>=wn){if(Gt+1>=Qt)break;Vt[Gt++>>>0]=192|wn>>6}else{if(65535>=wn){if(Gt+2>=Qt)break;Vt[Gt++>>>0]=224|wn>>12}else{if(Gt+3>=Qt)break;Vt[Gt++>>>0]=240|wn>>18,Vt[Gt++>>>0]=128|wn>>12&63}Vt[Gt++>>>0]=128|wn>>6&63}Vt[Gt++>>>0]=128|63&wn}}return Vt[Gt>>>0]=0,Gt-sn}function Bn(Nt){for(var Vt=0,Gt=0;Gt<Nt.length;++Gt){var Qt=Nt.charCodeAt(Gt);127>=Qt?Vt++:2047>=Qt?Vt+=2:55296<=Qt&&57343>=Qt?(Vt+=4,++Gt):Vt+=3}return Vt}function ir(Nt){ln=Nt,ft.HEAP8=hn=new Int8Array(Nt),ft.HEAP16=new Int16Array(Nt),ft.HEAP32=Zt=new Int32Array(Nt),ft.HEAPU8=kn=new Uint8Array(Nt),ft.HEAPU16=new Uint16Array(Nt),ft.HEAPU32=xn=new Uint32Array(Nt),ft.HEAPF32=new Float32Array(Nt),ft.HEAPF64=En=new Float64Array(Nt)}It&&(ln=ft.buffer);var tr=ft.INITIAL_MEMORY||16777216;if(It)Kt=ft.wasmMemory,ln=ft.buffer;else if(ft.wasmMemory)Kt=ft.wasmMemory;else if(!((Kt=new WebAssembly.Memory({initial:tr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Ut("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),At&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Kt&&(ln=Kt.buffer),tr=ln.byteLength,ir(ln);var wr,dr=[],Sr=[],ar=[],vr=[];function hr(){return tn||!1}function Hn(){var Nt=ft.preRun.shift();dr.unshift(Nt)}var or,Pr=0,Cr=null;function zn(Nt){throw It?postMessage({cmd:"onAbort",arg:Nt}):ft.onAbort&&ft.onAbort(Nt),Ut(Nt="Aborted("+Nt+")"),Cn=!0,Nt=new WebAssembly.RuntimeError(Nt+". Build with -sASSERTIONS for more info."),bt(Nt),Nt}function Yr(){return or.startsWith("data:application/octet-stream;base64,")}function Fr(){var Nt=or;try{if(Nt==or&&Wt)return new Uint8Array(Wt);if(wt)return wt(Nt);throw"both async and sync fetching of the wasm failed"}catch(Vt){zn(Vt)}}or="ort-wasm-threaded.wasm",Yr()||(or=qt(or));var Dr={};function lr(Nt){this.name="ExitStatus",this.message="Program terminated with exit("+Nt+")",this.status=Nt}function Nr(Nt){(Nt=In.Vb[Nt])||zn(),In.mc(Nt)}function Or(Nt){var Vt=In.Cc();if(!Vt)return 6;In.ac.push(Vt),In.Vb[Nt.Ub]=Vt,Vt.Ub=Nt.Ub;var Gt={cmd:"run",start_routine:Nt.Ic,arg:Nt.zc,pthread_ptr:Nt.Ub};return Vt.$b=()=>{Gt.time=performance.now(),Vt.postMessage(Gt,Nt.Nc)},Vt.loaded&&(Vt.$b(),delete Vt.$b),0}function kr(Nt){if(It)return vn(1,1,Nt);hr()||(In.oc(),ft.onExit&&ft.onExit(Nt),Cn=!0),Mt(Nt,new lr(Nt))}function xr(Nt,Vt){if(!Vt&&It)throw Jr(Nt),"unwind";hr()||It||(Mo(),Br(ar),Eo(0),jn[1].length&&pr(1,10),jn[2].length&&pr(2,10),In.oc()),kr(Nt)}var In={Yb:[],ac:[],qc:[],Vb:{},fc:function(){It&&In.Ec()},Pc:function(){},Ec:function(){In.receiveObjectTransfer=In.Gc,In.threadInitTLS=In.pc,In.setExitStatus=In.nc,tn=!1},nc:function(){},oc:function(){for(var Nt of Object.values(In.Vb))In.mc(Nt);for(Nt of In.Yb)Nt.terminate();In.Yb=[]},mc:function(Nt){var Vt=Nt.Ub;delete In.Vb[Vt],In.Yb.push(Nt),In.ac.splice(In.ac.indexOf(Nt),1),Nt.Ub=0,ro(Vt)},Gc:function(){},pc:function(){In.qc.forEach(Nt=>Nt())},Fc:function(Nt,Vt){Nt.onmessage=Gt=>{var Qt=(Gt=Gt.data).cmd;if(Nt.Ub&&(In.Bc=Nt.Ub),Gt.targetThread&&Gt.targetThread!=co()){var sn=In.Vb[Gt.Qc];sn?sn.postMessage(Gt,Gt.transferList):Ut('Internal error! Worker sent a message "'+Qt+'" to target pthread '+Gt.targetThread+", but that thread no longer exists!")}else Qt==="processProxyingQueue"?Xt(Gt.queue):Qt==="spawnThread"?Or(Gt):Qt==="cleanupThread"?Nr(Gt.thread):Qt==="killThread"?(Gt=Gt.thread,Qt=In.Vb[Gt],delete In.Vb[Gt],Qt.terminate(),ro(Gt),In.ac.splice(In.ac.indexOf(Qt),1),Qt.Ub=0):Qt==="cancelThread"?In.Vb[Gt.thread].postMessage({cmd:"cancel"}):Qt==="loaded"?(Nt.loaded=!0,Vt&&Vt(Nt),Nt.$b&&(Nt.$b(),delete Nt.$b)):Qt==="print"?Lt("Thread "+Gt.threadId+": "+Gt.text):Qt==="printErr"?Ut("Thread "+Gt.threadId+": "+Gt.text):Qt==="alert"?alert("Thread "+Gt.threadId+": "+Gt.text):Gt.target==="setimmediate"?Nt.postMessage(Gt):Qt==="onAbort"?ft.onAbort&&ft.onAbort(Gt.arg):Qt&&Ut("worker sent an unknown command "+Qt);In.Bc=void 0},Nt.onerror=Gt=>{throw Ut("worker sent an error! "+Gt.filename+":"+Gt.lineno+": "+Gt.message),Gt},At&&(Nt.on("message",function(Gt){Nt.onmessage({data:Gt})}),Nt.on("error",function(Gt){Nt.onerror(Gt)}),Nt.on("detachedExit",function(){})),Nt.postMessage({cmd:"load",urlOrBlob:ft.mainScriptUrlOrBlob||b,wasmMemory:Kt,wasmModule:an})},yc:function(){var Nt=qt("ort-wasm-threaded.worker.js");In.Yb.push(new Worker(Nt))},Cc:function(){return In.Yb.length==0&&(In.yc(),In.Fc(In.Yb[0])),In.Yb.pop()}};function Br(Nt){for(;0<Nt.length;)Nt.shift()(ft)}function Wr(Nt){var Vt=Yn();return Nt=Nt(),Gn(Vt),Nt}function Jr(Nt){if(It)return vn(2,0,Nt);try{xr(Nt)}catch(Vt){Vt instanceof lr||Vt=="unwind"||Mt(1,Vt)}}ft.PThread=In,ft.establishStackSpace=function(){var Nt=co(),Vt=mt()[Nt+44>>2>>>0];Nt=mt()[Nt+48>>2>>>0],Oo(Vt,Vt-Nt),Gn(Vt)};var zr=[];function Kn(Nt){var Vt=zr[Nt];return Vt||(Nt>=zr.length&&(zr.length=Nt+1),zr[Nt]=Vt=wr.get(Nt)),Vt}ft.invokeEntryPoint=function(Nt,Vt){Nt=Kn(Nt)(Vt),hr()?In.nc(Nt):yr(Nt)};var jr,Vr,Hr=[],On=0,Dn=0;function $n(Nt){this.Zb=Nt,this.Sb=Nt-24,this.xc=function(Vt){gt()[this.Sb+4>>2>>>0]=Vt},this.bc=function(){return gt()[this.Sb+4>>2>>>0]},this.wc=function(Vt){gt()[this.Sb+8>>2>>>0]=Vt},this.Dc=function(){return gt()[this.Sb+8>>2>>>0]},this.rc=function(){mt()[this.Sb>>2>>>0]=0},this.hc=function(Vt){Vt=Vt?1:0,ot()[this.Sb+12>>0>>>0]=Vt},this.uc=function(){return ot()[this.Sb+12>>0>>>0]!=0},this.ic=function(Vt){Vt=Vt?1:0,ot()[this.Sb+13>>0>>>0]=Vt},this.kc=function(){return ot()[this.Sb+13>>0>>>0]!=0},this.fc=function(Vt,Gt){this.cc(0),this.xc(Vt),this.wc(Gt),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(mt(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(mt(),this.Sb>>2,1)===1},this.cc=function(Vt){gt()[this.Sb+16>>2>>>0]=Vt},this.tc=function(){return gt()[this.Sb+16>>2>>>0]},this.vc=function(){if(Ao(this.bc()))return gt()[this.Zb>>2>>>0];var Vt=this.tc();return Vt!==0?Vt:this.Zb}}function Er(Nt){return ko(new $n(Nt).Sb)}function Lr(Nt,Vt,Gt,Qt){return It?vn(3,1,Nt,Vt,Gt,Qt):qr(Nt,Vt,Gt,Qt)}function qr(Nt,Vt,Gt,Qt){if(typeof SharedArrayBuffer>"u")return Ut("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var sn=[];return It&&sn.length===0?Lr(Nt,Vt,Gt,Qt):(Nt={Ic:Gt,Ub:Nt,zc:Qt,Nc:sn},It?(Nt.Oc="spawnThread",postMessage(Nt,sn),0):Or(Nt))}function Gr(Nt,Vt,Gt){return It?vn(4,1,Nt,Vt,Gt):0}function Qn(Nt,Vt){if(It)return vn(5,1,Nt,Vt)}function Ir(Nt,Vt){if(It)return vn(6,1,Nt,Vt)}function en(Nt,Vt,Gt){if(It)return vn(7,1,Nt,Vt,Gt)}function rn(Nt,Vt,Gt){return It?vn(8,1,Nt,Vt,Gt):0}function un(Nt,Vt){if(It)return vn(9,1,Nt,Vt)}function mn(Nt,Vt,Gt){if(It)return vn(10,1,Nt,Vt,Gt)}function Sn(Nt,Vt,Gt,Qt){if(It)return vn(11,1,Nt,Vt,Gt,Qt)}function Mn(Nt,Vt,Gt,Qt){if(It)return vn(12,1,Nt,Vt,Gt,Qt)}function Pn(Nt,Vt,Gt,Qt){if(It)return vn(13,1,Nt,Vt,Gt,Qt)}function bn(Nt){if(It)return vn(14,1,Nt)}function zt(Nt,Vt){if(It)return vn(15,1,Nt,Vt)}function Ht(Nt,Vt,Gt){if(It)return vn(16,1,Nt,Vt,Gt)}function Xt(Nt){Atomics.store(mt(),Nt>>2,1),co()&&yo(Nt),Atomics.compareExchange(mt(),Nt>>2,1,0)}function nn(Nt){return gt()[Nt>>>2]+4294967296*mt()[Nt+4>>>2]}function on(Nt,Vt,Gt,Qt,sn,fn){return It?vn(17,1,Nt,Vt,Gt,Qt,sn,fn):-52}function cn(Nt,Vt,Gt,Qt,sn,fn){if(It)return vn(18,1,Nt,Vt,Gt,Qt,sn,fn)}function yn(Nt){var Vt=Bn(Nt)+1,Gt=go(Vt);return Gt&&cr(Nt,ot(),Gt,Vt),Gt}function _n(Nt,Vt,Gt){function Qt(nr){return(nr=nr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?nr[1]:"GMT"}if(It)return vn(19,1,Nt,Vt,Gt);var sn=new Date().getFullYear(),fn=new Date(sn,0,1),wn=new Date(sn,6,1);sn=fn.getTimezoneOffset();var An=wn.getTimezoneOffset(),Xn=Math.max(sn,An);mt()[Nt>>2>>>0]=60*Xn,mt()[Vt>>2>>>0]=+(sn!=An),Nt=Qt(fn),Vt=Qt(wn),Nt=yn(Nt),Vt=yn(Vt),An<sn?(gt()[Gt>>2>>>0]=Nt,gt()[Gt+4>>2>>>0]=Vt):(gt()[Gt>>2>>>0]=Vt,gt()[Gt+4>>2>>>0]=Nt)}function vn(Nt,Vt){var Gt=arguments.length-2,Qt=arguments;return Wr(()=>{for(var sn=bo(8*Gt),fn=sn>>3,wn=0;wn<Gt;wn++){var An=Qt[2+wn];yt()[fn+wn>>>0]=An}return no(Nt,Gt,sn,Vt)})}ft.executeNotifiedProxyingQueue=Xt,Vr=At?()=>{var Nt=process.hrtime();return 1e3*Nt[0]+Nt[1]/1e6}:It?()=>performance.now()-ft.__performance_now_clock_drift:()=>performance.now();var Ln,Zn=[],gr={};function fr(){if(!Ln){var Nt,Vt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:kt||"./this.program"};for(Nt in gr)gr[Nt]===void 0?delete Vt[Nt]:Vt[Nt]=gr[Nt];var Gt=[];for(Nt in Vt)Gt.push(Nt+"="+Vt[Nt]);Ln=Gt}return Ln}function dn(Nt,Vt){if(It)return vn(20,1,Nt,Vt);var Gt=0;return fr().forEach(function(Qt,sn){var fn=Vt+Gt;for(sn=gt()[Nt+4*sn>>2>>>0]=fn,fn=0;fn<Qt.length;++fn)ot()[sn++>>0>>>0]=Qt.charCodeAt(fn);ot()[sn>>0>>>0]=0,Gt+=Qt.length+1}),0}function Nn(Nt,Vt){if(It)return vn(21,1,Nt,Vt);var Gt=fr();gt()[Nt>>2>>>0]=Gt.length;var Qt=0;return Gt.forEach(function(sn){Qt+=sn.length+1}),gt()[Vt>>2>>>0]=Qt,0}function sr(Nt){return It?vn(22,1,Nt):52}function Ar(Nt,Vt,Gt,Qt){return It?vn(23,1,Nt,Vt,Gt,Qt):52}function _r(Nt,Vt,Gt,Qt,sn){return It?vn(24,1,Nt,Vt,Gt,Qt,sn):70}var jn=[null,[],[]];function pr(Nt,Vt){var Gt=jn[Nt];Vt===0||Vt===10?((Nt===1?Lt:Ut)(Vn(Gt,0)),Gt.length=0):Gt.push(Vt)}function Rr(Nt,Vt,Gt,Qt){if(It)return vn(25,1,Nt,Vt,Gt,Qt);for(var sn=0,fn=0;fn<Gt;fn++){var wn=gt()[Vt>>2>>>0],An=gt()[Vt+4>>2>>>0];Vt+=8;for(var Xn=0;Xn<An;Xn++)pr(Nt,ht()[wn+Xn>>>0]);sn+=An}return gt()[Qt>>2>>>0]=sn,0}var Un=0;function $r(Nt){return Nt%4==0&&(Nt%100!=0||Nt%400==0)}var so=[31,29,31,30,31,30,31,31,30,31,30,31],uo=[31,28,31,30,31,30,31,31,30,31,30,31];function To(Nt,Vt,Gt,Qt){function sn(gn,rr,ur){for(gn=typeof gn=="number"?gn.toString():gn||"";gn.length<rr;)gn=ur[0]+gn;return gn}function fn(gn,rr){return sn(gn,rr,"0")}function wn(gn,rr){function ur(Zr){return 0>Zr?-1:0<Zr?1:0}var Xr;return(Xr=ur(gn.getFullYear()-rr.getFullYear()))===0&&(Xr=ur(gn.getMonth()-rr.getMonth()))===0&&(Xr=ur(gn.getDate()-rr.getDate())),Xr}function An(gn){switch(gn.getDay()){case 0:return new Date(gn.getFullYear()-1,11,29);case 1:return gn;case 2:return new Date(gn.getFullYear(),0,3);case 3:return new Date(gn.getFullYear(),0,2);case 4:return new Date(gn.getFullYear(),0,1);case 5:return new Date(gn.getFullYear()-1,11,31);case 6:return new Date(gn.getFullYear()-1,11,30)}}function Xn(gn){var rr=gn.Wb;for(gn=new Date(new Date(gn.Xb+1900,0,1).getTime());0<rr;){var ur=gn.getMonth(),Xr=($r(gn.getFullYear())?so:uo)[ur];if(!(rr>Xr-gn.getDate())){gn.setDate(gn.getDate()+rr);break}rr-=Xr-gn.getDate()+1,gn.setDate(1),11>ur?gn.setMonth(ur+1):(gn.setMonth(0),gn.setFullYear(gn.getFullYear()+1))}return ur=new Date(gn.getFullYear()+1,0,4),rr=An(new Date(gn.getFullYear(),0,4)),ur=An(ur),0>=wn(rr,gn)?0>=wn(ur,gn)?gn.getFullYear()+1:gn.getFullYear():gn.getFullYear()-1}var nr=mt()[Qt+40>>2>>>0];for(var br in Qt={Lc:mt()[Qt>>2>>>0],Kc:mt()[Qt+4>>2>>>0],dc:mt()[Qt+8>>2>>>0],jc:mt()[Qt+12>>2>>>0],ec:mt()[Qt+16>>2>>>0],Xb:mt()[Qt+20>>2>>>0],Tb:mt()[Qt+24>>2>>>0],Wb:mt()[Qt+28>>2>>>0],Rc:mt()[Qt+32>>2>>>0],Jc:mt()[Qt+36>>2>>>0],Mc:nr?qn(nr):""},Gt=qn(Gt),nr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Gt=Gt.replace(new RegExp(br,"g"),nr[br]);var Kr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ur="January February March April May June July August September October November December".split(" ");for(br in nr={"%a":function(gn){return Kr[gn.Tb].substring(0,3)},"%A":function(gn){return Kr[gn.Tb]},"%b":function(gn){return Ur[gn.ec].substring(0,3)},"%B":function(gn){return Ur[gn.ec]},"%C":function(gn){return fn((gn.Xb+1900)/100|0,2)},"%d":function(gn){return fn(gn.jc,2)},"%e":function(gn){return sn(gn.jc,2," ")},"%g":function(gn){return Xn(gn).toString().substring(2)},"%G":function(gn){return Xn(gn)},"%H":function(gn){return fn(gn.dc,2)},"%I":function(gn){return(gn=gn.dc)==0?gn=12:12<gn&&(gn-=12),fn(gn,2)},"%j":function(gn){for(var rr=0,ur=0;ur<=gn.ec-1;rr+=($r(gn.Xb+1900)?so:uo)[ur++]);return fn(gn.jc+rr,3)},"%m":function(gn){return fn(gn.ec+1,2)},"%M":function(gn){return fn(gn.Kc,2)},"%n":function(){return`
`},"%p":function(gn){return 0<=gn.dc&&12>gn.dc?"AM":"PM"},"%S":function(gn){return fn(gn.Lc,2)},"%t":function(){return"	"},"%u":function(gn){return gn.Tb||7},"%U":function(gn){return fn(Math.floor((gn.Wb+7-gn.Tb)/7),2)},"%V":function(gn){var rr=Math.floor((gn.Wb+7-(gn.Tb+6)%7)/7);if(2>=(gn.Tb+371-gn.Wb-2)%7&&rr++,rr)rr==53&&((ur=(gn.Tb+371-gn.Wb)%7)==4||ur==3&&$r(gn.Xb)||(rr=1));else{rr=52;var ur=(gn.Tb+7-gn.Wb-1)%7;(ur==4||ur==5&&$r(gn.Xb%400-1))&&rr++}return fn(rr,2)},"%w":function(gn){return gn.Tb},"%W":function(gn){return fn(Math.floor((gn.Wb+7-(gn.Tb+6)%7)/7),2)},"%y":function(gn){return(gn.Xb+1900).toString().substring(2)},"%Y":function(gn){return gn.Xb+1900},"%z":function(gn){var rr=0<=(gn=gn.Jc);return gn=Math.abs(gn)/60,(rr?"+":"-")+("0000"+(gn/60*100+gn%60)).slice(-4)},"%Z":function(gn){return gn.Mc},"%%":function(){return"%"}},Gt=Gt.replace(/%%/g,"\0\0"),nr)Gt.includes(br)&&(Gt=Gt.replace(new RegExp(br,"g"),nr[br](Qt)));return br=function(gn){var rr=Array(Bn(gn)+1);return cr(gn,rr,0,rr.length),rr}(Gt=Gt.replace(/\0\0/g,"%")),br.length>Vt?0:(function(gn,rr){ot().set(gn,rr>>>0)}(br,Nt),br.length-1)}In.fc();var Go=[null,kr,Jr,Lr,Gr,Qn,Ir,en,rn,un,mn,Sn,Mn,Pn,bn,zt,Ht,on,cn,_n,dn,Nn,sr,Ar,_r,Rr],mr={b:function(Nt){return go(Nt+24)+24},n:function(Nt){return(Nt=new $n(Nt)).uc()||(Nt.hc(!0),On--),Nt.ic(!1),Hr.push(Nt),Nt.sc(),Nt.vc()},ma:function(Nt){throw Ut("Unexpected exception thrown, this is not properly supported - aborting"),Cn=!0,Nt},x:function(){er(0);var Nt=Hr.pop();if(Nt.Hc()&&!Nt.kc()){var Vt=Nt.Dc();Vt&&Kn(Vt)(Nt.Zb),Er(Nt.Zb)}Dn=0},e:function(){var Nt=Dn;if(!Nt)return Un=0;var Vt=new $n(Nt);Vt.cc(Nt);var Gt=Vt.bc();if(!Gt)return Un=0,Nt;for(var Qt=Array.prototype.slice.call(arguments),sn=0;sn<Qt.length;sn++){var fn=Qt[sn];if(fn===0||fn===Gt)break;if(ho(fn,Gt,Vt.Sb+16))return Un=fn,Nt}return Un=Gt,Nt},l:function(){var Nt=Dn;if(!Nt)return Un=0;var Vt=new $n(Nt);Vt.cc(Nt);var Gt=Vt.bc();if(!Gt)return Un=0,Nt;for(var Qt=Array.prototype.slice.call(arguments),sn=0;sn<Qt.length;sn++){var fn=Qt[sn];if(fn===0||fn===Gt)break;if(ho(fn,Gt,Vt.Sb+16))return Un=fn,Nt}return Un=Gt,Nt},h:function(){var Nt=Dn;if(!Nt)return Un=0;var Vt=new $n(Nt);Vt.cc(Nt);var Gt=Vt.bc();if(!Gt)return Un=0,Nt;for(var Qt=Array.prototype.slice.call(arguments),sn=0;sn<Qt.length;sn++){var fn=Qt[sn];if(fn===0||fn===Gt)break;if(ho(fn,Gt,Vt.Sb+16))return Un=fn,Nt}return Un=Gt,Nt},t:Er,M:function(){var Nt=Hr.pop();Nt||zn("no exception to throw");var Vt=Nt.Zb;throw Nt.kc()||(Hr.push(Nt),Nt.ic(!0),Nt.hc(!1),On++),Dn=Vt,Vt},c:function(Nt,Vt,Gt){throw new $n(Nt).fc(Vt,Gt),Dn=Nt,On++,Nt},pa:function(){return On},Fa:function(Nt){Co(Nt,!Dt,1,!Ot),In.pc()},T:function(Nt){It?postMessage({cmd:"cleanupThread",thread:Nt}):Nr(Nt)},xa:qr,j:function(Nt){throw Dn||(Dn=Nt),Nt},H:Gr,Ma:Qn,ua:Ir,wa:en,oa:rn,Ka:un,Ca:mn,Ja:Sn,V:Mn,va:Pn,sa:bn,La:zt,ta:Ht,Ta:function(){},X:function(){zn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){zn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Nt,Vt,Gt,Qt){if(Nt==Vt)setTimeout(()=>Xt(Qt));else if(It)postMessage({targetThread:Nt,cmd:"processProxyingQueue",queue:Qt});else{if(!(Nt=In.Vb[Nt]))return;Nt.postMessage({cmd:"processProxyingQueue",queue:Qt})}return 1},Ea:function(){return-1},Pa:function(Nt,Vt){Nt=new Date(1e3*nn(Nt)),mt()[Vt>>2>>>0]=Nt.getUTCSeconds(),mt()[Vt+4>>2>>>0]=Nt.getUTCMinutes(),mt()[Vt+8>>2>>>0]=Nt.getUTCHours(),mt()[Vt+12>>2>>>0]=Nt.getUTCDate(),mt()[Vt+16>>2>>>0]=Nt.getUTCMonth(),mt()[Vt+20>>2>>>0]=Nt.getUTCFullYear()-1900,mt()[Vt+24>>2>>>0]=Nt.getUTCDay(),Nt=(Nt.getTime()-Date.UTC(Nt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,mt()[Vt+28>>2>>>0]=Nt},Qa:function(Nt,Vt){Nt=new Date(1e3*nn(Nt)),mt()[Vt>>2>>>0]=Nt.getSeconds(),mt()[Vt+4>>2>>>0]=Nt.getMinutes(),mt()[Vt+8>>2>>>0]=Nt.getHours(),mt()[Vt+12>>2>>>0]=Nt.getDate(),mt()[Vt+16>>2>>>0]=Nt.getMonth(),mt()[Vt+20>>2>>>0]=Nt.getFullYear()-1900,mt()[Vt+24>>2>>>0]=Nt.getDay();var Gt=new Date(Nt.getFullYear(),0,1),Qt=(Nt.getTime()-Gt.getTime())/864e5|0;mt()[Vt+28>>2>>>0]=Qt,mt()[Vt+36>>2>>>0]=-60*Nt.getTimezoneOffset(),Qt=new Date(Nt.getFullYear(),6,1).getTimezoneOffset(),Nt=0|(Qt!=(Gt=Gt.getTimezoneOffset())&&Nt.getTimezoneOffset()==Math.min(Gt,Qt)),mt()[Vt+32>>2>>>0]=Nt},Ra:function(Nt){var Vt=new Date(mt()[Nt+20>>2>>>0]+1900,mt()[Nt+16>>2>>>0],mt()[Nt+12>>2>>>0],mt()[Nt+8>>2>>>0],mt()[Nt+4>>2>>>0],mt()[Nt>>2>>>0],0),Gt=mt()[Nt+32>>2>>>0],Qt=Vt.getTimezoneOffset(),sn=new Date(Vt.getFullYear(),0,1),fn=new Date(Vt.getFullYear(),6,1).getTimezoneOffset(),wn=sn.getTimezoneOffset(),An=Math.min(wn,fn);return 0>Gt?mt()[Nt+32>>2>>>0]=+(fn!=wn&&An==Qt):0<Gt!=(An==Qt)&&(fn=Math.max(wn,fn),Vt.setTime(Vt.getTime()+6e4*((0<Gt?An:fn)-Qt))),mt()[Nt+24>>2>>>0]=Vt.getDay(),Gt=(Vt.getTime()-sn.getTime())/864e5|0,mt()[Nt+28>>2>>>0]=Gt,mt()[Nt>>2>>>0]=Vt.getSeconds(),mt()[Nt+4>>2>>>0]=Vt.getMinutes(),mt()[Nt+8>>2>>>0]=Vt.getHours(),mt()[Nt+12>>2>>>0]=Vt.getDate(),mt()[Nt+16>>2>>>0]=Vt.getMonth(),Vt.getTime()/1e3|0},Aa:on,Ba:cn,Sa:function Nt(Vt,Gt,Qt){Nt.Ac||(Nt.Ac=!0,_n(Vt,Gt,Qt))},y:function(){zn("")},U:function(){if(!At&&!Dt){var Nt="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";jr||(jr={}),jr[Nt]||(jr[Nt]=1,At&&(Nt="warning: "+Nt),Ut(Nt))}},ra:function(){return 4294901760},B:Vr,Ia:function(Nt,Vt,Gt){ht().copyWithin(Nt>>>0,Vt>>>0,Vt+Gt>>>0)},F:function(){return At?d(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Nt,Vt,Gt){Zn.length=Vt,Gt>>=3;for(var Qt=0;Qt<Vt;Qt++)Zn[Qt]=yt()[Gt+Qt>>>0];return(0>Nt?Dr[-Nt-1]:Go[Nt]).apply(null,Zn)},qa:function(Nt){var Vt=ht().length;if((Nt>>>=0)<=Vt||4294901760<Nt)return!1;for(var Gt=1;4>=Gt;Gt*=2){var Qt=Vt*(1+.2/Gt);Qt=Math.min(Qt,Nt+100663296);var sn=Math;Qt=Math.max(Nt,Qt),sn=sn.min.call(sn,4294901760,Qt+(65536-Qt%65536)%65536);e:{try{Kt.grow(sn-ln.byteLength+65535>>>16),ir(Kt.buffer);var fn=1;break e}catch{}fn=void 0}if(fn)return!0}return!1},Na:function(){throw"unwind"},Ga:dn,Ha:Nn,J:xr,I:sr,S:Ar,ga:_r,R:Rr,d:function(){return Un},na:function Nt(Vt,Gt){Nt.lc||(Nt.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var sn=new Uint8Array(1);return()=>(crypto.getRandomValues(sn),sn[0])}if(At)try{var fn=d(Object(function(){var wn=new Error("Cannot find module 'crypto'");throw wn.code="MODULE_NOT_FOUND",wn}()));return()=>fn.randomBytes(1)[0]}catch{}return()=>zn("randomDevice")}());for(var Qt=0;Qt<Gt;Qt++)ot()[Vt+Qt>>0>>>0]=Nt.lc();return 0},ia:function(Nt,Vt,Gt){var Qt=Yn();try{return Kn(Nt)(Vt,Gt)}catch(sn){if(Gn(Qt),sn!==sn+0)throw sn;er(1,0)}},ja:function(Nt,Vt,Gt){var Qt=Yn();try{return Kn(Nt)(Vt,Gt)}catch(sn){if(Gn(Qt),sn!==sn+0)throw sn;er(1,0)}},K:function(Nt){var Vt=Yn();try{return Kn(Nt)()}catch(Gt){if(Gn(Vt),Gt!==Gt+0)throw Gt;er(1,0)}},f:function(Nt,Vt){var Gt=Yn();try{return Kn(Nt)(Vt)}catch(Qt){if(Gn(Gt),Qt!==Qt+0)throw Qt;er(1,0)}},P:function(Nt,Vt,Gt){var Qt=Yn();try{return Kn(Nt)(Vt,Gt)}catch(sn){if(Gn(Qt),sn!==sn+0)throw sn;er(1,0)}},Q:function(Nt,Vt,Gt){var Qt=Yn();try{return Kn(Nt)(Vt,Gt)}catch(sn){if(Gn(Qt),sn!==sn+0)throw sn;er(1,0)}},k:function(Nt,Vt,Gt){var Qt=Yn();try{return Kn(Nt)(Vt,Gt)}catch(sn){if(Gn(Qt),sn!==sn+0)throw sn;er(1,0)}},p:function(Nt,Vt,Gt,Qt){var sn=Yn();try{return Kn(Nt)(Vt,Gt,Qt)}catch(fn){if(Gn(sn),fn!==fn+0)throw fn;er(1,0)}},q:function(Nt,Vt,Gt,Qt,sn){var fn=Yn();try{return Kn(Nt)(Vt,Gt,Qt,sn)}catch(wn){if(Gn(fn),wn!==wn+0)throw wn;er(1,0)}},N:function(Nt,Vt,Gt,Qt,sn,fn){var wn=Yn();try{return Kn(Nt)(Vt,Gt,Qt,sn,fn)}catch(An){if(Gn(wn),An!==An+0)throw An;er(1,0)}},s:function(Nt,Vt,Gt,Qt,sn,fn){var wn=Yn();try{return Kn(Nt)(Vt,Gt,Qt,sn,fn)}catch(An){if(Gn(wn),An!==An+0)throw An;er(1,0)}},w:function(Nt,Vt,Gt,Qt,sn,fn,wn){var An=Yn();try{return Kn(Nt)(Vt,Gt,Qt,sn,fn,wn)}catch(Xn){if(Gn(An),Xn!==Xn+0)throw Xn;er(1,0)}},L:function(Nt,Vt,Gt,Qt,sn,fn,wn,An){var Xn=Yn();try{return Kn(Nt)(Vt,Gt,Qt,sn,fn,wn,An)}catch(nr){if(Gn(Xn),nr!==nr+0)throw nr;er(1,0)}},E:function(Nt,Vt,Gt,Qt,sn,fn,wn,An,Xn,nr,br,Kr){var Ur=Yn();try{return Kn(Nt)(Vt,Gt,Qt,sn,fn,wn,An,Xn,nr,br,Kr)}catch(gn){if(Gn(Ur),gn!==gn+0)throw gn;er(1,0)}},aa:function(Nt,Vt,Gt,Qt,sn,fn,wn,An){var Xn=Yn();try{return Lo(Nt,Vt,Gt,Qt,sn,fn,wn,An)}catch(nr){if(Gn(Xn),nr!==nr+0)throw nr;er(1,0)}},_:function(Nt,Vt,Gt,Qt,sn,fn,wn){var An=Yn();try{return Po(Nt,Vt,Gt,Qt,sn,fn,wn)}catch(Xn){if(Gn(An),Xn!==Xn+0)throw Xn;er(1,0)}},Z:function(Nt,Vt,Gt,Qt,sn){var fn=Yn();try{return Fo(Nt,Vt,Gt,Qt,sn)}catch(wn){if(Gn(fn),wn!==wn+0)throw wn;er(1,0)}},ca:function(Nt,Vt,Gt,Qt){var sn=Yn();try{return No(Nt,Vt,Gt,Qt)}catch(fn){if(Gn(sn),fn!==fn+0)throw fn;er(1,0)}},$:function(Nt){var Vt=Yn();try{return vo(Nt)}catch(Gt){if(Gn(Vt),Gt!==Gt+0)throw Gt;er(1,0)}},ba:function(Nt,Vt){var Gt=Yn();try{return $o(Nt,Vt)}catch(Qt){if(Gn(Gt),Qt!==Qt+0)throw Qt;er(1,0)}},Y:function(Nt,Vt,Gt){var Qt=Yn();try{return xo(Nt,Vt,Gt)}catch(sn){if(Gn(Qt),sn!==sn+0)throw sn;er(1,0)}},g:function(Nt){var Vt=Yn();try{Kn(Nt)()}catch(Gt){if(Gn(Vt),Gt!==Gt+0)throw Gt;er(1,0)}},r:function(Nt,Vt){var Gt=Yn();try{Kn(Nt)(Vt)}catch(Qt){if(Gn(Gt),Qt!==Qt+0)throw Qt;er(1,0)}},i:function(Nt,Vt,Gt){var Qt=Yn();try{Kn(Nt)(Vt,Gt)}catch(sn){if(Gn(Qt),sn!==sn+0)throw sn;er(1,0)}},ha:function(Nt,Vt,Gt,Qt){var sn=Yn();try{Kn(Nt)(Vt,Gt,Qt)}catch(fn){if(Gn(sn),fn!==fn+0)throw fn;er(1,0)}},m:function(Nt,Vt,Gt,Qt){var sn=Yn();try{Kn(Nt)(Vt,Gt,Qt)}catch(fn){if(Gn(sn),fn!==fn+0)throw fn;er(1,0)}},v:function(Nt,Vt,Gt,Qt,sn){var fn=Yn();try{Kn(Nt)(Vt,Gt,Qt,sn)}catch(wn){if(Gn(fn),wn!==wn+0)throw wn;er(1,0)}},u:function(Nt,Vt,Gt,Qt,sn,fn){var wn=Yn();try{Kn(Nt)(Vt,Gt,Qt,sn,fn)}catch(An){if(Gn(wn),An!==An+0)throw An;er(1,0)}},O:function(Nt,Vt,Gt,Qt,sn,fn,wn){var An=Yn();try{Kn(Nt)(Vt,Gt,Qt,sn,fn,wn)}catch(Xn){if(Gn(An),Xn!==Xn+0)throw Xn;er(1,0)}},A:function(Nt,Vt,Gt,Qt,sn,fn,wn,An){var Xn=Yn();try{Kn(Nt)(Vt,Gt,Qt,sn,fn,wn,An)}catch(nr){if(Gn(Xn),nr!==nr+0)throw nr;er(1,0)}},ka:function(Nt,Vt,Gt,Qt,sn,fn,wn,An,Xn){var nr=Yn();try{Kn(Nt)(Vt,Gt,Qt,sn,fn,wn,An,Xn)}catch(br){if(Gn(nr),br!==br+0)throw br;er(1,0)}},C:function(Nt,Vt,Gt,Qt,sn,fn,wn,An,Xn,nr,br){var Kr=Yn();try{Kn(Nt)(Vt,Gt,Qt,sn,fn,wn,An,Xn,nr,br)}catch(Ur){if(Gn(Kr),Ur!==Ur+0)throw Ur;er(1,0)}},D:function(Nt,Vt,Gt,Qt,sn,fn,wn,An,Xn,nr,br,Kr,Ur,gn,rr,ur){var Xr=Yn();try{Kn(Nt)(Vt,Gt,Qt,sn,fn,wn,An,Xn,nr,br,Kr,Ur,gn,rr,ur)}catch(Zr){if(Gn(Xr),Zr!==Zr+0)throw Zr;er(1,0)}},fa:function(Nt,Vt,Gt,Qt,sn,fn,wn,An){var Xn=Yn();try{Do(Nt,Vt,Gt,Qt,sn,fn,wn,An)}catch(nr){if(Gn(Xn),nr!==nr+0)throw nr;er(1,0)}},da:function(Nt,Vt,Gt,Qt,sn,fn,wn,An,Xn,nr,br,Kr){var Ur=Yn();try{Ro(Nt,Vt,Gt,Qt,sn,fn,wn,An,Xn,nr,br,Kr)}catch(gn){if(Gn(Ur),gn!==gn+0)throw gn;er(1,0)}},ea:function(Nt,Vt,Gt,Qt,sn,fn){var wn=Yn();try{Io(Nt,Vt,Gt,Qt,sn,fn)}catch(An){if(Gn(wn),An!==An+0)throw An;er(1,0)}},o:function(Nt){return Nt},a:Kt||ft.wasmMemory,G:function(Nt){Un=Nt},la:To,z:function(Nt,Vt,Gt,Qt){return To(Nt,Vt,Gt,Qt)}};(function(){function Nt(sn,fn){ft.asm=sn.exports,In.qc.push(ft.asm.sb),wr=ft.asm.ub,Sr.unshift(ft.asm.Va),an=fn,It||(Pr--,ft.monitorRunDependencies&&ft.monitorRunDependencies(Pr),Pr==0&&Cr&&(sn=Cr,Cr=null,sn()))}function Vt(sn){Nt(sn.instance,sn.module)}function Gt(sn){return function(){if(!Wt&&(Ot||Dt)){if(typeof fetch=="function"&&!or.startsWith("file://"))return fetch(or,{credentials:"same-origin"}).then(function(fn){if(!fn.ok)throw"failed to load wasm binary file at '"+or+"'";return fn.arrayBuffer()}).catch(function(){return Fr()});if(xt)return new Promise(function(fn,wn){xt(or,function(An){fn(new Uint8Array(An))},wn)})}return Promise.resolve().then(function(){return Fr()})}().then(function(fn){return WebAssembly.instantiate(fn,Qt)}).then(function(fn){return fn}).then(sn,function(fn){Ut("failed to asynchronously prepare wasm: "+fn),zn(fn)})}var Qt={a:mr};if(It||(Pr++,ft.monitorRunDependencies&&ft.monitorRunDependencies(Pr)),ft.instantiateWasm)try{return ft.instantiateWasm(Qt,Nt)}catch(sn){return Ut("Module.instantiateWasm callback failed with error: "+sn),!1}(Wt||typeof WebAssembly.instantiateStreaming!="function"||Yr()||or.startsWith("file://")||At||typeof fetch!="function"?Gt(Vt):fetch(or,{credentials:"same-origin"}).then(function(sn){return WebAssembly.instantiateStreaming(sn,Qt).then(Vt,function(fn){return Ut("wasm streaming compile failed: "+fn),Ut("falling back to ArrayBuffer instantiation"),Gt(Vt)})})).catch(bt)})(),ft.___wasm_call_ctors=function(){return(ft.___wasm_call_ctors=ft.asm.Va).apply(null,arguments)},ft._OrtInit=function(){return(ft._OrtInit=ft.asm.Wa).apply(null,arguments)},ft._OrtCreateSessionOptions=function(){return(ft._OrtCreateSessionOptions=ft.asm.Xa).apply(null,arguments)},ft._OrtAppendExecutionProvider=function(){return(ft._OrtAppendExecutionProvider=ft.asm.Ya).apply(null,arguments)},ft._OrtAddSessionConfigEntry=function(){return(ft._OrtAddSessionConfigEntry=ft.asm.Za).apply(null,arguments)},ft._OrtReleaseSessionOptions=function(){return(ft._OrtReleaseSessionOptions=ft.asm._a).apply(null,arguments)},ft._OrtCreateSession=function(){return(ft._OrtCreateSession=ft.asm.$a).apply(null,arguments)},ft._OrtReleaseSession=function(){return(ft._OrtReleaseSession=ft.asm.ab).apply(null,arguments)},ft._OrtGetInputCount=function(){return(ft._OrtGetInputCount=ft.asm.bb).apply(null,arguments)},ft._OrtGetOutputCount=function(){return(ft._OrtGetOutputCount=ft.asm.cb).apply(null,arguments)},ft._OrtGetInputName=function(){return(ft._OrtGetInputName=ft.asm.db).apply(null,arguments)},ft._OrtGetOutputName=function(){return(ft._OrtGetOutputName=ft.asm.eb).apply(null,arguments)},ft._OrtFree=function(){return(ft._OrtFree=ft.asm.fb).apply(null,arguments)},ft._OrtCreateTensor=function(){return(ft._OrtCreateTensor=ft.asm.gb).apply(null,arguments)},ft._OrtGetTensorData=function(){return(ft._OrtGetTensorData=ft.asm.hb).apply(null,arguments)},ft._OrtReleaseTensor=function(){return(ft._OrtReleaseTensor=ft.asm.ib).apply(null,arguments)},ft._OrtCreateRunOptions=function(){return(ft._OrtCreateRunOptions=ft.asm.jb).apply(null,arguments)},ft._OrtAddRunConfigEntry=function(){return(ft._OrtAddRunConfigEntry=ft.asm.kb).apply(null,arguments)},ft._OrtReleaseRunOptions=function(){return(ft._OrtReleaseRunOptions=ft.asm.lb).apply(null,arguments)},ft._OrtRun=function(){return(ft._OrtRun=ft.asm.mb).apply(null,arguments)},ft._OrtEndProfiling=function(){return(ft._OrtEndProfiling=ft.asm.nb).apply(null,arguments)};var co=ft._pthread_self=function(){return(co=ft._pthread_self=ft.asm.ob).apply(null,arguments)},go=ft._malloc=function(){return(go=ft._malloc=ft.asm.pb).apply(null,arguments)},ko=ft._free=function(){return(ko=ft._free=ft.asm.qb).apply(null,arguments)},Eo=ft._fflush=function(){return(Eo=ft._fflush=ft.asm.rb).apply(null,arguments)};ft.__emscripten_tls_init=function(){return(ft.__emscripten_tls_init=ft.asm.sb).apply(null,arguments)};var Mo=ft.___funcs_on_exit=function(){return(Mo=ft.___funcs_on_exit=ft.asm.tb).apply(null,arguments)},Co=ft.__emscripten_thread_init=function(){return(Co=ft.__emscripten_thread_init=ft.asm.vb).apply(null,arguments)};ft.__emscripten_thread_crashed=function(){return(ft.__emscripten_thread_crashed=ft.asm.wb).apply(null,arguments)};var eo,no=ft._emscripten_run_in_main_runtime_thread_js=function(){return(no=ft._emscripten_run_in_main_runtime_thread_js=ft.asm.xb).apply(null,arguments)},yo=ft.__emscripten_proxy_execute_task_queue=function(){return(yo=ft.__emscripten_proxy_execute_task_queue=ft.asm.yb).apply(null,arguments)},ro=ft.__emscripten_thread_free_data=function(){return(ro=ft.__emscripten_thread_free_data=ft.asm.zb).apply(null,arguments)},yr=ft.__emscripten_thread_exit=function(){return(yr=ft.__emscripten_thread_exit=ft.asm.Ab).apply(null,arguments)},er=ft._setThrew=function(){return(er=ft._setThrew=ft.asm.Bb).apply(null,arguments)},Oo=ft._emscripten_stack_set_limits=function(){return(Oo=ft._emscripten_stack_set_limits=ft.asm.Cb).apply(null,arguments)},Yn=ft.stackSave=function(){return(Yn=ft.stackSave=ft.asm.Db).apply(null,arguments)},Gn=ft.stackRestore=function(){return(Gn=ft.stackRestore=ft.asm.Eb).apply(null,arguments)},bo=ft.stackAlloc=function(){return(bo=ft.stackAlloc=ft.asm.Fb).apply(null,arguments)},ho=ft.___cxa_can_catch=function(){return(ho=ft.___cxa_can_catch=ft.asm.Gb).apply(null,arguments)},Ao=ft.___cxa_is_pointer_type=function(){return(Ao=ft.___cxa_is_pointer_type=ft.asm.Hb).apply(null,arguments)},vo=ft.dynCall_j=function(){return(vo=ft.dynCall_j=ft.asm.Ib).apply(null,arguments)},Po=ft.dynCall_iiiiij=function(){return(Po=ft.dynCall_iiiiij=ft.asm.Jb).apply(null,arguments)},xo=ft.dynCall_jii=function(){return(xo=ft.dynCall_jii=ft.asm.Kb).apply(null,arguments)},Do=ft.dynCall_viiiiij=function(){return(Do=ft.dynCall_viiiiij=ft.asm.Lb).apply(null,arguments)},Io=ft.dynCall_vjji=function(){return(Io=ft.dynCall_vjji=ft.asm.Mb).apply(null,arguments)},Ro=ft.dynCall_viiijjjii=function(){return(Ro=ft.dynCall_viiijjjii=ft.asm.Nb).apply(null,arguments)},No=ft.dynCall_iij=function(){return(No=ft.dynCall_iij=ft.asm.Ob).apply(null,arguments)},$o=ft.dynCall_ji=function(){return($o=ft.dynCall_ji=ft.asm.Pb).apply(null,arguments)},Lo=ft.dynCall_iiiiiij=function(){return(Lo=ft.dynCall_iiiiiij=ft.asm.Qb).apply(null,arguments)},Fo=ft.dynCall_iiij=function(){return(Fo=ft.dynCall_iiij=ft.asm.Rb).apply(null,arguments)};function wo(){function Nt(){if(!eo&&(eo=!0,ft.calledRun=!0,!Cn)&&(It||Br(Sr),st(ft),ft.onRuntimeInitialized&&ft.onRuntimeInitialized(),!It)){if(ft.postRun)for(typeof ft.postRun=="function"&&(ft.postRun=[ft.postRun]);ft.postRun.length;){var Vt=ft.postRun.shift();vr.unshift(Vt)}Br(vr)}}if(!(0<Pr))if(It)st(ft),It||Br(Sr),postMessage({cmd:"loaded"});else{if(ft.preRun)for(typeof ft.preRun=="function"&&(ft.preRun=[ft.preRun]);ft.preRun.length;)Hn();Br(dr),0<Pr||(ft.setStatus?(ft.setStatus("Running..."),setTimeout(function(){setTimeout(function(){ft.setStatus("")},1),Nt()},1)):Nt())}}if(ft.UTF8ToString=qn,ft.stringToUTF8=function(Nt,Vt,Gt){return cr(Nt,ht(),Vt,Gt)},ft.lengthBytesUTF8=Bn,ft.keepRuntimeAlive=hr,ft.wasmMemory=Kt,ft.stackSave=Yn,ft.stackRestore=Gn,ft.stackAlloc=bo,ft.ExitStatus=lr,ft.PThread=In,Cr=function Nt(){eo||wo(),eo||(Cr=Nt)},ft.preInit)for(typeof ft.preInit=="function"&&(ft.preInit=[ft.preInit]);0<ft.preInit.length;)ft.preInit.pop()();return wo(),nt.ready});s.exports=tt},932:(s,e,d)=>{var b,tt=(b=(b=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(nt){var ot,ht,mt;nt=nt||{},ot||(ot=nt!==void 0?nt:{}),ot.ready=new Promise(function(zt,Ht){ht=zt,mt=Ht});var gt,yt,ft,st,bt,vt,xt=Object.assign({},ot),wt="./this.program",St=(zt,Ht)=>{throw Ht},_t=typeof window=="object",Tt=typeof importScripts=="function",Et=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",kt="";Et?(kt=Tt?d(908).dirname(kt)+"/":"//",vt=()=>{bt||(st=d(1384),bt=d(908))},gt=function(zt,Ht){return vt(),zt=bt.normalize(zt),st.readFileSync(zt,Ht?void 0:"utf8")},ft=zt=>((zt=gt(zt,!0)).buffer||(zt=new Uint8Array(zt)),zt),yt=(zt,Ht,Xt)=>{vt(),zt=bt.normalize(zt),st.readFile(zt,function(nn,on){nn?Xt(nn):Ht(on.buffer)})},1<process.argv.length&&(wt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(zt){if(!(zt instanceof Sr))throw zt}),process.on("unhandledRejection",function(zt){throw zt}),St=(zt,Ht)=>{if(At||0<Fn)throw process.exitCode=zt,Ht;Ht instanceof Sr||Dt("exiting due to exception: "+Ht),process.exit(zt)},ot.inspect=function(){return"[Emscripten Module object]"}):(_t||Tt)&&(Tt?kt=self.location.href:typeof document<"u"&&document.currentScript&&(kt=document.currentScript.src),b&&(kt=b),kt=kt.indexOf("blob:")!==0?kt.substr(0,kt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",gt=zt=>{var Ht=new XMLHttpRequest;return Ht.open("GET",zt,!1),Ht.send(null),Ht.responseText},Tt&&(ft=zt=>{var Ht=new XMLHttpRequest;return Ht.open("GET",zt,!1),Ht.responseType="arraybuffer",Ht.send(null),new Uint8Array(Ht.response)}),yt=(zt,Ht,Xt)=>{var nn=new XMLHttpRequest;nn.open("GET",zt,!0),nn.responseType="arraybuffer",nn.onload=()=>{nn.status==200||nn.status==0&&nn.response?Ht(nn.response):Xt()},nn.onerror=Xt,nn.send(null)});var Mt,Ot=ot.print||console.log.bind(console),Dt=ot.printErr||console.warn.bind(console);Object.assign(ot,xt),xt=null,ot.thisProgram&&(wt=ot.thisProgram),ot.quit&&(St=ot.quit),ot.wasmBinary&&(Mt=ot.wasmBinary);var At=ot.noExitRuntime||!1;typeof WebAssembly!="object"&&ir("no native wasm support detected");var It,jt,qt,Jt,Bt,Wt,Lt=!1,Ut=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function tn(zt,Ht,Xt){var nn=(Ht>>>=0)+Xt;for(Xt=Ht;zt[Xt]&&!(Xt>=nn);)++Xt;if(16<Xt-Ht&&zt.buffer&&Ut)return Ut.decode(zt.subarray(Ht,Xt));for(nn="";Ht<Xt;){var on=zt[Ht++];if(128&on){var cn=63&zt[Ht++];if((224&on)==192)nn+=String.fromCharCode((31&on)<<6|cn);else{var yn=63&zt[Ht++];65536>(on=(240&on)==224?(15&on)<<12|cn<<6|yn:(7&on)<<18|cn<<12|yn<<6|63&zt[Ht++])?nn+=String.fromCharCode(on):(on-=65536,nn+=String.fromCharCode(55296|on>>10,56320|1023&on))}}else nn+=String.fromCharCode(on)}return nn}function Kt(zt,Ht){return(zt>>>=0)?tn(Jt,zt,Ht):""}function an(zt,Ht,Xt,nn){if(!(0<nn))return 0;var on=Xt>>>=0;nn=Xt+nn-1;for(var cn=0;cn<zt.length;++cn){var yn=zt.charCodeAt(cn);if(55296<=yn&&57343>=yn&&(yn=65536+((1023&yn)<<10)|1023&zt.charCodeAt(++cn)),127>=yn){if(Xt>=nn)break;Ht[Xt++>>>0]=yn}else{if(2047>=yn){if(Xt+1>=nn)break;Ht[Xt++>>>0]=192|yn>>6}else{if(65535>=yn){if(Xt+2>=nn)break;Ht[Xt++>>>0]=224|yn>>12}else{if(Xt+3>=nn)break;Ht[Xt++>>>0]=240|yn>>18,Ht[Xt++>>>0]=128|yn>>12&63}Ht[Xt++>>>0]=128|yn>>6&63}Ht[Xt++>>>0]=128|63&yn}}return Ht[Xt>>>0]=0,Xt-on}function ln(zt){for(var Ht=0,Xt=0;Xt<zt.length;++Xt){var nn=zt.charCodeAt(Xt);127>=nn?Ht++:2047>=nn?Ht+=2:55296<=nn&&57343>=nn?(Ht+=4,++Xt):Ht+=3}return Ht}function hn(){var zt=It.buffer;jt=zt,ot.HEAP8=qt=new Int8Array(zt),ot.HEAP16=new Int16Array(zt),ot.HEAP32=Bt=new Int32Array(zt),ot.HEAPU8=Jt=new Uint8Array(zt),ot.HEAPU16=new Uint16Array(zt),ot.HEAPU32=Wt=new Uint32Array(zt),ot.HEAPF32=new Float32Array(zt),ot.HEAPF64=new Float64Array(zt)}var kn,Zt=[],xn=[],En=[],Cn=[],Fn=0;function Vn(){var zt=ot.preRun.shift();Zt.unshift(zt)}var qn,cr=0,Bn=null;function ir(zt){throw ot.onAbort&&ot.onAbort(zt),Dt(zt="Aborted("+zt+")"),Lt=!0,zt=new WebAssembly.RuntimeError(zt+". Build with -sASSERTIONS for more info."),mt(zt),zt}function tr(){return qn.startsWith("data:application/octet-stream;base64,")}if(qn="ort-wasm.wasm",!tr()){var wr=qn;qn=ot.locateFile?ot.locateFile(wr,kt):kt+wr}function dr(){var zt=qn;try{if(zt==qn&&Mt)return new Uint8Array(Mt);if(ft)return ft(zt);throw"both async and sync fetching of the wasm failed"}catch(Ht){ir(Ht)}}function Sr(zt){this.name="ExitStatus",this.message="Program terminated with exit("+zt+")",this.status=zt}function ar(zt){for(;0<zt.length;)zt.shift()(ot)}var vr=[],hr=0,Hn=0;function or(zt){this.Db=zt,this.zb=zt-24,this.Ub=function(Ht){Wt[this.zb+4>>2>>>0]=Ht},this.Eb=function(){return Wt[this.zb+4>>2>>>0]},this.Sb=function(Ht){Wt[this.zb+8>>2>>>0]=Ht},this.Wb=function(){return Wt[this.zb+8>>2>>>0]},this.Tb=function(){Bt[this.zb>>2>>>0]=0},this.Ib=function(Ht){qt[this.zb+12>>0>>>0]=Ht?1:0},this.Pb=function(){return qt[this.zb+12>>0>>>0]!=0},this.Jb=function(Ht){qt[this.zb+13>>0>>>0]=Ht?1:0},this.Lb=function(){return qt[this.zb+13>>0>>>0]!=0},this.Rb=function(Ht,Xt){this.Fb(0),this.Ub(Ht),this.Sb(Xt),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){Bt[this.zb>>2>>>0]+=1},this.Xb=function(){var Ht=Bt[this.zb>>2>>>0];return Bt[this.zb>>2>>>0]=Ht-1,Ht===1},this.Fb=function(Ht){Wt[this.zb+16>>2>>>0]=Ht},this.Ob=function(){return Wt[this.zb+16>>2>>>0]},this.Qb=function(){if(qr(this.Eb()))return Wt[this.Db>>2>>>0];var Ht=this.Ob();return Ht!==0?Ht:this.Db}}function Pr(zt){return jr(new or(zt).zb)}var Cr=[];function zn(zt){var Ht=Cr[zt];return Ht||(zt>=Cr.length&&(Cr.length=zt+1),Cr[zt]=Ht=kn.get(zt)),Ht}function Yr(zt){var Ht=ln(zt)+1,Xt=Kn(Ht);return Xt&&an(zt,qt,Xt,Ht),Xt}var Fr={};function Dr(){if(!lr){var zt,Ht={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:wt||"./this.program"};for(zt in Fr)Fr[zt]===void 0?delete Ht[zt]:Ht[zt]=Fr[zt];var Xt=[];for(zt in Ht)Xt.push(zt+"="+Ht[zt]);lr=Xt}return lr}var lr,Nr=[null,[],[]];function Or(zt,Ht){var Xt=Nr[zt];Ht===0||Ht===10?((zt===1?Ot:Dt)(tn(Xt,0)),Xt.length=0):Xt.push(Ht)}var kr=0;function xr(zt){return zt%4==0&&(zt%100!=0||zt%400==0)}var In=[31,29,31,30,31,30,31,31,30,31,30,31],Br=[31,28,31,30,31,30,31,31,30,31,30,31];function Wr(zt,Ht,Xt,nn){function on(dn,Nn,sr){for(dn=typeof dn=="number"?dn.toString():dn||"";dn.length<Nn;)dn=sr[0]+dn;return dn}function cn(dn,Nn){return on(dn,Nn,"0")}function yn(dn,Nn){function sr(_r){return 0>_r?-1:0<_r?1:0}var Ar;return(Ar=sr(dn.getFullYear()-Nn.getFullYear()))===0&&(Ar=sr(dn.getMonth()-Nn.getMonth()))===0&&(Ar=sr(dn.getDate()-Nn.getDate())),Ar}function _n(dn){switch(dn.getDay()){case 0:return new Date(dn.getFullYear()-1,11,29);case 1:return dn;case 2:return new Date(dn.getFullYear(),0,3);case 3:return new Date(dn.getFullYear(),0,2);case 4:return new Date(dn.getFullYear(),0,1);case 5:return new Date(dn.getFullYear()-1,11,31);case 6:return new Date(dn.getFullYear()-1,11,30)}}function vn(dn){var Nn=dn.Bb;for(dn=new Date(new Date(dn.Cb+1900,0,1).getTime());0<Nn;){var sr=dn.getMonth(),Ar=(xr(dn.getFullYear())?In:Br)[sr];if(!(Nn>Ar-dn.getDate())){dn.setDate(dn.getDate()+Nn);break}Nn-=Ar-dn.getDate()+1,dn.setDate(1),11>sr?dn.setMonth(sr+1):(dn.setMonth(0),dn.setFullYear(dn.getFullYear()+1))}return sr=new Date(dn.getFullYear()+1,0,4),Nn=_n(new Date(dn.getFullYear(),0,4)),sr=_n(sr),0>=yn(Nn,dn)?0>=yn(sr,dn)?dn.getFullYear()+1:dn.getFullYear():dn.getFullYear()-1}var Ln=Bt[nn+40>>2>>>0];for(var Zn in nn={$b:Bt[nn>>2>>>0],Zb:Bt[nn+4>>2>>>0],Gb:Bt[nn+8>>2>>>0],Kb:Bt[nn+12>>2>>>0],Hb:Bt[nn+16>>2>>>0],Cb:Bt[nn+20>>2>>>0],Ab:Bt[nn+24>>2>>>0],Bb:Bt[nn+28>>2>>>0],bc:Bt[nn+32>>2>>>0],Yb:Bt[nn+36>>2>>>0],ac:Ln?Kt(Ln):""},Xt=Kt(Xt),Ln={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Xt=Xt.replace(new RegExp(Zn,"g"),Ln[Zn]);var gr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),fr="January February March April May June July August September October November December".split(" ");for(Zn in Ln={"%a":function(dn){return gr[dn.Ab].substring(0,3)},"%A":function(dn){return gr[dn.Ab]},"%b":function(dn){return fr[dn.Hb].substring(0,3)},"%B":function(dn){return fr[dn.Hb]},"%C":function(dn){return cn((dn.Cb+1900)/100|0,2)},"%d":function(dn){return cn(dn.Kb,2)},"%e":function(dn){return on(dn.Kb,2," ")},"%g":function(dn){return vn(dn).toString().substring(2)},"%G":function(dn){return vn(dn)},"%H":function(dn){return cn(dn.Gb,2)},"%I":function(dn){return(dn=dn.Gb)==0?dn=12:12<dn&&(dn-=12),cn(dn,2)},"%j":function(dn){for(var Nn=0,sr=0;sr<=dn.Hb-1;Nn+=(xr(dn.Cb+1900)?In:Br)[sr++]);return cn(dn.Kb+Nn,3)},"%m":function(dn){return cn(dn.Hb+1,2)},"%M":function(dn){return cn(dn.Zb,2)},"%n":function(){return`
`},"%p":function(dn){return 0<=dn.Gb&&12>dn.Gb?"AM":"PM"},"%S":function(dn){return cn(dn.$b,2)},"%t":function(){return"	"},"%u":function(dn){return dn.Ab||7},"%U":function(dn){return cn(Math.floor((dn.Bb+7-dn.Ab)/7),2)},"%V":function(dn){var Nn=Math.floor((dn.Bb+7-(dn.Ab+6)%7)/7);if(2>=(dn.Ab+371-dn.Bb-2)%7&&Nn++,Nn)Nn==53&&((sr=(dn.Ab+371-dn.Bb)%7)==4||sr==3&&xr(dn.Cb)||(Nn=1));else{Nn=52;var sr=(dn.Ab+7-dn.Bb-1)%7;(sr==4||sr==5&&xr(dn.Cb%400-1))&&Nn++}return cn(Nn,2)},"%w":function(dn){return dn.Ab},"%W":function(dn){return cn(Math.floor((dn.Bb+7-(dn.Ab+6)%7)/7),2)},"%y":function(dn){return(dn.Cb+1900).toString().substring(2)},"%Y":function(dn){return dn.Cb+1900},"%z":function(dn){var Nn=0<=(dn=dn.Yb);return dn=Math.abs(dn)/60,(Nn?"+":"-")+("0000"+(dn/60*100+dn%60)).slice(-4)},"%Z":function(dn){return dn.ac},"%%":function(){return"%"}},Xt=Xt.replace(/%%/g,"\0\0"),Ln)Xt.includes(Zn)&&(Xt=Xt.replace(new RegExp(Zn,"g"),Ln[Zn](nn)));return Zn=function(dn){var Nn=Array(ln(dn)+1);return an(dn,Nn,0,Nn.length),Nn}(Xt=Xt.replace(/\0\0/g,"%")),Zn.length>Ht?0:(qt.set(Zn,zt>>>0),Zn.length-1)}var Jr={a:function(zt){return Kn(zt+24)+24},m:function(zt){return(zt=new or(zt)).Pb()||(zt.Ib(!0),hr--),zt.Jb(!1),vr.push(zt),zt.Nb(),zt.Qb()},ia:function(zt){throw Dt("Unexpected exception thrown, this is not properly supported - aborting"),Lt=!0,zt},w:function(){On(0);var zt=vr.pop();if(zt.Xb()&&!zt.Lb()){var Ht=zt.Wb();Ht&&zn(Ht)(zt.Db),Pr(zt.Db)}Hn=0},d:function(){var zt=Hn;if(!zt)return kr=0;var Ht=new or(zt);Ht.Fb(zt);var Xt=Ht.Eb();if(!Xt)return kr=0,zt;for(var nn=Array.prototype.slice.call(arguments),on=0;on<nn.length;on++){var cn=nn[on];if(cn===0||cn===Xt)break;if(Lr(cn,Xt,Ht.zb+16))return kr=cn,zt}return kr=Xt,zt},k:function(){var zt=Hn;if(!zt)return kr=0;var Ht=new or(zt);Ht.Fb(zt);var Xt=Ht.Eb();if(!Xt)return kr=0,zt;for(var nn=Array.prototype.slice.call(arguments),on=0;on<nn.length;on++){var cn=nn[on];if(cn===0||cn===Xt)break;if(Lr(cn,Xt,Ht.zb+16))return kr=cn,zt}return kr=Xt,zt},g:function(){var zt=Hn;if(!zt)return kr=0;var Ht=new or(zt);Ht.Fb(zt);var Xt=Ht.Eb();if(!Xt)return kr=0,zt;for(var nn=Array.prototype.slice.call(arguments),on=0;on<nn.length;on++){var cn=nn[on];if(cn===0||cn===Xt)break;if(Lr(cn,Xt,Ht.zb+16))return kr=cn,zt}return kr=Xt,zt},s:Pr,L:function(){var zt=vr.pop();zt||ir("no exception to throw");var Ht=zt.Db;throw zt.Lb()||(vr.push(zt),zt.Jb(!0),zt.Ib(!1),hr++),Hn=Ht,Ht},b:function(zt,Ht,Xt){throw new or(zt).Rb(Ht,Xt),Hn=zt,hr++,zt},la:function(){return hr},i:function(zt){throw Hn||(Hn=zt),zt},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){ir("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){ir("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(zt,Ht){zt=new Date(1e3*(Wt[zt>>>2]+4294967296*Bt[zt+4>>>2])),Bt[Ht>>2>>>0]=zt.getUTCSeconds(),Bt[Ht+4>>2>>>0]=zt.getUTCMinutes(),Bt[Ht+8>>2>>>0]=zt.getUTCHours(),Bt[Ht+12>>2>>>0]=zt.getUTCDate(),Bt[Ht+16>>2>>>0]=zt.getUTCMonth(),Bt[Ht+20>>2>>>0]=zt.getUTCFullYear()-1900,Bt[Ht+24>>2>>>0]=zt.getUTCDay(),Bt[Ht+28>>2>>>0]=(zt.getTime()-Date.UTC(zt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(zt,Ht){zt=new Date(1e3*(Wt[zt>>>2]+4294967296*Bt[zt+4>>>2])),Bt[Ht>>2>>>0]=zt.getSeconds(),Bt[Ht+4>>2>>>0]=zt.getMinutes(),Bt[Ht+8>>2>>>0]=zt.getHours(),Bt[Ht+12>>2>>>0]=zt.getDate(),Bt[Ht+16>>2>>>0]=zt.getMonth(),Bt[Ht+20>>2>>>0]=zt.getFullYear()-1900,Bt[Ht+24>>2>>>0]=zt.getDay();var Xt=new Date(zt.getFullYear(),0,1);Bt[Ht+28>>2>>>0]=(zt.getTime()-Xt.getTime())/864e5|0,Bt[Ht+36>>2>>>0]=-60*zt.getTimezoneOffset();var nn=new Date(zt.getFullYear(),6,1).getTimezoneOffset();Xt=Xt.getTimezoneOffset(),Bt[Ht+32>>2>>>0]=0|(nn!=Xt&&zt.getTimezoneOffset()==Math.min(Xt,nn))},Fa:function(zt){var Ht=new Date(Bt[zt+20>>2>>>0]+1900,Bt[zt+16>>2>>>0],Bt[zt+12>>2>>>0],Bt[zt+8>>2>>>0],Bt[zt+4>>2>>>0],Bt[zt>>2>>>0],0),Xt=Bt[zt+32>>2>>>0],nn=Ht.getTimezoneOffset(),on=new Date(Ht.getFullYear(),0,1),cn=new Date(Ht.getFullYear(),6,1).getTimezoneOffset(),yn=on.getTimezoneOffset(),_n=Math.min(yn,cn);return 0>Xt?Bt[zt+32>>2>>>0]=+(cn!=yn&&_n==nn):0<Xt!=(_n==nn)&&(cn=Math.max(yn,cn),Ht.setTime(Ht.getTime()+6e4*((0<Xt?_n:cn)-nn))),Bt[zt+24>>2>>>0]=Ht.getDay(),Bt[zt+28>>2>>>0]=(Ht.getTime()-on.getTime())/864e5|0,Bt[zt>>2>>>0]=Ht.getSeconds(),Bt[zt+4>>2>>>0]=Ht.getMinutes(),Bt[zt+8>>2>>>0]=Ht.getHours(),Bt[zt+12>>2>>>0]=Ht.getDate(),Bt[zt+16>>2>>>0]=Ht.getMonth(),Ht.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function zt(Ht,Xt,nn){zt.Vb||(zt.Vb=!0,function(on,cn,yn){function _n(fr){return(fr=fr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?fr[1]:"GMT"}var vn=new Date().getFullYear(),Ln=new Date(vn,0,1),Zn=new Date(vn,6,1);vn=Ln.getTimezoneOffset();var gr=Zn.getTimezoneOffset();Bt[on>>2>>>0]=60*Math.max(vn,gr),Bt[cn>>2>>>0]=+(vn!=gr),on=_n(Ln),cn=_n(Zn),on=Yr(on),cn=Yr(cn),gr<vn?(Wt[yn>>2>>>0]=on,Wt[yn+4>>2>>>0]=cn):(Wt[yn>>2>>>0]=cn,Wt[yn+4>>2>>>0]=on)}(Ht,Xt,nn))},B:function(){ir("")},ma:function(){return 4294901760},I:Et?()=>{var zt=process.hrtime();return 1e3*zt[0]+zt[1]/1e6}:()=>performance.now(),xa:function(zt,Ht,Xt){Jt.copyWithin(zt>>>0,Ht>>>0,Ht+Xt>>>0)},G:function(zt){var Ht=Jt.length;if(4294901760<(zt>>>=0))return!1;for(var Xt=1;4>=Xt;Xt*=2){var nn=Ht*(1+.2/Xt);nn=Math.min(nn,zt+100663296);var on=Math;nn=Math.max(zt,nn),on=on.min.call(on,4294901760,nn+(65536-nn%65536)%65536);e:{try{It.grow(on-jt.byteLength+65535>>>16),hn();var cn=1;break e}catch{}cn=void 0}if(cn)return!0}return!1},va:function(zt,Ht){var Xt=0;return Dr().forEach(function(nn,on){var cn=Ht+Xt;for(on=Wt[zt+4*on>>2>>>0]=cn,cn=0;cn<nn.length;++cn)qt[on++>>0>>>0]=nn.charCodeAt(cn);qt[on>>0>>>0]=0,Xt+=nn.length+1}),0},wa:function(zt,Ht){var Xt=Dr();Wt[zt>>2>>>0]=Xt.length;var nn=0;return Xt.forEach(function(on){nn+=on.length+1}),Wt[Ht>>2>>>0]=nn,0},ba:function(zt){At||0<Fn||(Hr(),ar(En),Vr(0),Nr[1].length&&Or(1,10),Nr[2].length&&Or(2,10)),At||0<Fn||(ot.onExit&&ot.onExit(zt),Lt=!0),St(zt,new Sr(zt))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(zt,Ht,Xt,nn){for(var on=0,cn=0;cn<Xt;cn++){var yn=Wt[Ht>>2>>>0],_n=Wt[Ht+4>>2>>>0];Ht+=8;for(var vn=0;vn<_n;vn++)Or(zt,Jt[yn+vn>>>0]);on+=_n}return Wt[nn>>2>>>0]=on,0},c:function(){return kr},ja:function zt(Ht,Xt){zt.Mb||(zt.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var on=new Uint8Array(1);return()=>(crypto.getRandomValues(on),on[0])}if(Et)try{var cn=d(Object(function(){var yn=new Error("Cannot find module 'crypto'");throw yn.code="MODULE_NOT_FOUND",yn}()));return()=>cn.randomBytes(1)[0]}catch{}return()=>ir("randomDevice")}());for(var nn=0;nn<Xt;nn++)qt[Ht+nn>>0>>>0]=zt.Mb();return 0},ea:function(zt,Ht,Xt){var nn=Dn();try{return zn(zt)(Ht,Xt)}catch(on){if($n(nn),on!==on+0)throw on;On(1,0)}},fa:function(zt,Ht,Xt){var nn=Dn();try{return zn(zt)(Ht,Xt)}catch(on){if($n(nn),on!==on+0)throw on;On(1,0)}},J:function(zt){var Ht=Dn();try{return zn(zt)()}catch(Xt){if($n(Ht),Xt!==Xt+0)throw Xt;On(1,0)}},e:function(zt,Ht){var Xt=Dn();try{return zn(zt)(Ht)}catch(nn){if($n(Xt),nn!==nn+0)throw nn;On(1,0)}},N:function(zt,Ht,Xt){var nn=Dn();try{return zn(zt)(Ht,Xt)}catch(on){if($n(nn),on!==on+0)throw on;On(1,0)}},O:function(zt,Ht,Xt){var nn=Dn();try{return zn(zt)(Ht,Xt)}catch(on){if($n(nn),on!==on+0)throw on;On(1,0)}},j:function(zt,Ht,Xt){var nn=Dn();try{return zn(zt)(Ht,Xt)}catch(on){if($n(nn),on!==on+0)throw on;On(1,0)}},o:function(zt,Ht,Xt,nn){var on=Dn();try{return zn(zt)(Ht,Xt,nn)}catch(cn){if($n(on),cn!==cn+0)throw cn;On(1,0)}},p:function(zt,Ht,Xt,nn,on){var cn=Dn();try{return zn(zt)(Ht,Xt,nn,on)}catch(yn){if($n(cn),yn!==yn+0)throw yn;On(1,0)}},M:function(zt,Ht,Xt,nn,on,cn){var yn=Dn();try{return zn(zt)(Ht,Xt,nn,on,cn)}catch(_n){if($n(yn),_n!==_n+0)throw _n;On(1,0)}},r:function(zt,Ht,Xt,nn,on,cn){var yn=Dn();try{return zn(zt)(Ht,Xt,nn,on,cn)}catch(_n){if($n(yn),_n!==_n+0)throw _n;On(1,0)}},v:function(zt,Ht,Xt,nn,on,cn,yn){var _n=Dn();try{return zn(zt)(Ht,Xt,nn,on,cn,yn)}catch(vn){if($n(_n),vn!==vn+0)throw vn;On(1,0)}},K:function(zt,Ht,Xt,nn,on,cn,yn,_n){var vn=Dn();try{return zn(zt)(Ht,Xt,nn,on,cn,yn,_n)}catch(Ln){if($n(vn),Ln!==Ln+0)throw Ln;On(1,0)}},D:function(zt,Ht,Xt,nn,on,cn,yn,_n,vn,Ln,Zn,gr){var fr=Dn();try{return zn(zt)(Ht,Xt,nn,on,cn,yn,_n,vn,Ln,Zn,gr)}catch(dn){if($n(fr),dn!==dn+0)throw dn;On(1,0)}},X:function(zt,Ht,Xt,nn,on,cn,yn,_n){var vn=Dn();try{return Mn(zt,Ht,Xt,nn,on,cn,yn,_n)}catch(Ln){if($n(vn),Ln!==Ln+0)throw Ln;On(1,0)}},V:function(zt,Ht,Xt,nn,on,cn,yn){var _n=Dn();try{return Qn(zt,Ht,Xt,nn,on,cn,yn)}catch(vn){if($n(_n),vn!==vn+0)throw vn;On(1,0)}},U:function(zt,Ht,Xt,nn,on){var cn=Dn();try{return Pn(zt,Ht,Xt,nn,on)}catch(yn){if($n(cn),yn!==yn+0)throw yn;On(1,0)}},Z:function(zt,Ht,Xt,nn){var on=Dn();try{return mn(zt,Ht,Xt,nn)}catch(cn){if($n(on),cn!==cn+0)throw cn;On(1,0)}},W:function(zt){var Ht=Dn();try{return Gr(zt)}catch(Xt){if($n(Ht),Xt!==Xt+0)throw Xt;On(1,0)}},Y:function(zt,Ht){var Xt=Dn();try{return Sn(zt,Ht)}catch(nn){if($n(Xt),nn!==nn+0)throw nn;On(1,0)}},T:function(zt,Ht,Xt){var nn=Dn();try{return Ir(zt,Ht,Xt)}catch(on){if($n(nn),on!==on+0)throw on;On(1,0)}},f:function(zt){var Ht=Dn();try{zn(zt)()}catch(Xt){if($n(Ht),Xt!==Xt+0)throw Xt;On(1,0)}},q:function(zt,Ht){var Xt=Dn();try{zn(zt)(Ht)}catch(nn){if($n(Xt),nn!==nn+0)throw nn;On(1,0)}},h:function(zt,Ht,Xt){var nn=Dn();try{zn(zt)(Ht,Xt)}catch(on){if($n(nn),on!==on+0)throw on;On(1,0)}},da:function(zt,Ht,Xt,nn){var on=Dn();try{zn(zt)(Ht,Xt,nn)}catch(cn){if($n(on),cn!==cn+0)throw cn;On(1,0)}},l:function(zt,Ht,Xt,nn){var on=Dn();try{zn(zt)(Ht,Xt,nn)}catch(cn){if($n(on),cn!==cn+0)throw cn;On(1,0)}},t:function(zt,Ht,Xt,nn,on){var cn=Dn();try{zn(zt)(Ht,Xt,nn,on)}catch(yn){if($n(cn),yn!==yn+0)throw yn;On(1,0)}},u:function(zt,Ht,Xt,nn,on,cn){var yn=Dn();try{zn(zt)(Ht,Xt,nn,on,cn)}catch(_n){if($n(yn),_n!==_n+0)throw _n;On(1,0)}},x:function(zt,Ht,Xt,nn,on,cn,yn){var _n=Dn();try{zn(zt)(Ht,Xt,nn,on,cn,yn)}catch(vn){if($n(_n),vn!==vn+0)throw vn;On(1,0)}},z:function(zt,Ht,Xt,nn,on,cn,yn,_n){var vn=Dn();try{zn(zt)(Ht,Xt,nn,on,cn,yn,_n)}catch(Ln){if($n(vn),Ln!==Ln+0)throw Ln;On(1,0)}},ga:function(zt,Ht,Xt,nn,on,cn,yn,_n,vn){var Ln=Dn();try{zn(zt)(Ht,Xt,nn,on,cn,yn,_n,vn)}catch(Zn){if($n(Ln),Zn!==Zn+0)throw Zn;On(1,0)}},A:function(zt,Ht,Xt,nn,on,cn,yn,_n,vn,Ln,Zn){var gr=Dn();try{zn(zt)(Ht,Xt,nn,on,cn,yn,_n,vn,Ln,Zn)}catch(fr){if($n(gr),fr!==fr+0)throw fr;On(1,0)}},C:function(zt,Ht,Xt,nn,on,cn,yn,_n,vn,Ln,Zn,gr,fr,dn,Nn,sr){var Ar=Dn();try{zn(zt)(Ht,Xt,nn,on,cn,yn,_n,vn,Ln,Zn,gr,fr,dn,Nn,sr)}catch(_r){if($n(Ar),_r!==_r+0)throw _r;On(1,0)}},aa:function(zt,Ht,Xt,nn,on,cn,yn,_n){var vn=Dn();try{en(zt,Ht,Xt,nn,on,cn,yn,_n)}catch(Ln){if($n(vn),Ln!==Ln+0)throw Ln;On(1,0)}},_:function(zt,Ht,Xt,nn,on,cn,yn,_n,vn,Ln,Zn,gr){var fr=Dn();try{un(zt,Ht,Xt,nn,on,cn,yn,_n,vn,Ln,Zn,gr)}catch(dn){if($n(fr),dn!==dn+0)throw dn;On(1,0)}},$:function(zt,Ht,Xt,nn,on,cn){var yn=Dn();try{rn(zt,Ht,Xt,nn,on,cn)}catch(_n){if($n(yn),_n!==_n+0)throw _n;On(1,0)}},n:function(zt){return zt},F:function(zt){kr=zt},ha:Wr,y:function(zt,Ht,Xt,nn){return Wr(zt,Ht,Xt,nn)}};(function(){function zt(on){ot.asm=on.exports,It=ot.asm.Ka,hn(),kn=ot.asm.ib,xn.unshift(ot.asm.La),cr--,ot.monitorRunDependencies&&ot.monitorRunDependencies(cr),cr==0&&Bn&&(on=Bn,Bn=null,on())}function Ht(on){zt(on.instance)}function Xt(on){return function(){if(!Mt&&(_t||Tt)){if(typeof fetch=="function"&&!qn.startsWith("file://"))return fetch(qn,{credentials:"same-origin"}).then(function(cn){if(!cn.ok)throw"failed to load wasm binary file at '"+qn+"'";return cn.arrayBuffer()}).catch(function(){return dr()});if(yt)return new Promise(function(cn,yn){yt(qn,function(_n){cn(new Uint8Array(_n))},yn)})}return Promise.resolve().then(function(){return dr()})}().then(function(cn){return WebAssembly.instantiate(cn,nn)}).then(function(cn){return cn}).then(on,function(cn){Dt("failed to asynchronously prepare wasm: "+cn),ir(cn)})}var nn={a:Jr};if(cr++,ot.monitorRunDependencies&&ot.monitorRunDependencies(cr),ot.instantiateWasm)try{return ot.instantiateWasm(nn,zt)}catch(on){return Dt("Module.instantiateWasm callback failed with error: "+on),!1}(Mt||typeof WebAssembly.instantiateStreaming!="function"||tr()||qn.startsWith("file://")||Et||typeof fetch!="function"?Xt(Ht):fetch(qn,{credentials:"same-origin"}).then(function(on){return WebAssembly.instantiateStreaming(on,nn).then(Ht,function(cn){return Dt("wasm streaming compile failed: "+cn),Dt("falling back to ArrayBuffer instantiation"),Xt(Ht)})})).catch(mt)})(),ot.___wasm_call_ctors=function(){return(ot.___wasm_call_ctors=ot.asm.La).apply(null,arguments)},ot._OrtInit=function(){return(ot._OrtInit=ot.asm.Ma).apply(null,arguments)},ot._OrtCreateSessionOptions=function(){return(ot._OrtCreateSessionOptions=ot.asm.Na).apply(null,arguments)},ot._OrtAppendExecutionProvider=function(){return(ot._OrtAppendExecutionProvider=ot.asm.Oa).apply(null,arguments)},ot._OrtAddSessionConfigEntry=function(){return(ot._OrtAddSessionConfigEntry=ot.asm.Pa).apply(null,arguments)},ot._OrtReleaseSessionOptions=function(){return(ot._OrtReleaseSessionOptions=ot.asm.Qa).apply(null,arguments)},ot._OrtCreateSession=function(){return(ot._OrtCreateSession=ot.asm.Ra).apply(null,arguments)},ot._OrtReleaseSession=function(){return(ot._OrtReleaseSession=ot.asm.Sa).apply(null,arguments)},ot._OrtGetInputCount=function(){return(ot._OrtGetInputCount=ot.asm.Ta).apply(null,arguments)},ot._OrtGetOutputCount=function(){return(ot._OrtGetOutputCount=ot.asm.Ua).apply(null,arguments)},ot._OrtGetInputName=function(){return(ot._OrtGetInputName=ot.asm.Va).apply(null,arguments)},ot._OrtGetOutputName=function(){return(ot._OrtGetOutputName=ot.asm.Wa).apply(null,arguments)},ot._OrtFree=function(){return(ot._OrtFree=ot.asm.Xa).apply(null,arguments)},ot._OrtCreateTensor=function(){return(ot._OrtCreateTensor=ot.asm.Ya).apply(null,arguments)},ot._OrtGetTensorData=function(){return(ot._OrtGetTensorData=ot.asm.Za).apply(null,arguments)},ot._OrtReleaseTensor=function(){return(ot._OrtReleaseTensor=ot.asm._a).apply(null,arguments)},ot._OrtCreateRunOptions=function(){return(ot._OrtCreateRunOptions=ot.asm.$a).apply(null,arguments)},ot._OrtAddRunConfigEntry=function(){return(ot._OrtAddRunConfigEntry=ot.asm.ab).apply(null,arguments)},ot._OrtReleaseRunOptions=function(){return(ot._OrtReleaseRunOptions=ot.asm.bb).apply(null,arguments)},ot._OrtRun=function(){return(ot._OrtRun=ot.asm.cb).apply(null,arguments)},ot._OrtEndProfiling=function(){return(ot._OrtEndProfiling=ot.asm.db).apply(null,arguments)};var zr,Kn=ot._malloc=function(){return(Kn=ot._malloc=ot.asm.eb).apply(null,arguments)},jr=ot._free=function(){return(jr=ot._free=ot.asm.fb).apply(null,arguments)},Vr=ot._fflush=function(){return(Vr=ot._fflush=ot.asm.gb).apply(null,arguments)},Hr=ot.___funcs_on_exit=function(){return(Hr=ot.___funcs_on_exit=ot.asm.hb).apply(null,arguments)},On=ot._setThrew=function(){return(On=ot._setThrew=ot.asm.jb).apply(null,arguments)},Dn=ot.stackSave=function(){return(Dn=ot.stackSave=ot.asm.kb).apply(null,arguments)},$n=ot.stackRestore=function(){return($n=ot.stackRestore=ot.asm.lb).apply(null,arguments)},Er=ot.stackAlloc=function(){return(Er=ot.stackAlloc=ot.asm.mb).apply(null,arguments)},Lr=ot.___cxa_can_catch=function(){return(Lr=ot.___cxa_can_catch=ot.asm.nb).apply(null,arguments)},qr=ot.___cxa_is_pointer_type=function(){return(qr=ot.___cxa_is_pointer_type=ot.asm.ob).apply(null,arguments)},Gr=ot.dynCall_j=function(){return(Gr=ot.dynCall_j=ot.asm.pb).apply(null,arguments)},Qn=ot.dynCall_iiiiij=function(){return(Qn=ot.dynCall_iiiiij=ot.asm.qb).apply(null,arguments)},Ir=ot.dynCall_jii=function(){return(Ir=ot.dynCall_jii=ot.asm.rb).apply(null,arguments)},en=ot.dynCall_viiiiij=function(){return(en=ot.dynCall_viiiiij=ot.asm.sb).apply(null,arguments)},rn=ot.dynCall_vjji=function(){return(rn=ot.dynCall_vjji=ot.asm.tb).apply(null,arguments)},un=ot.dynCall_viiijjjii=function(){return(un=ot.dynCall_viiijjjii=ot.asm.ub).apply(null,arguments)},mn=ot.dynCall_iij=function(){return(mn=ot.dynCall_iij=ot.asm.vb).apply(null,arguments)},Sn=ot.dynCall_ji=function(){return(Sn=ot.dynCall_ji=ot.asm.wb).apply(null,arguments)},Mn=ot.dynCall_iiiiiij=function(){return(Mn=ot.dynCall_iiiiiij=ot.asm.xb).apply(null,arguments)},Pn=ot.dynCall_iiij=function(){return(Pn=ot.dynCall_iiij=ot.asm.yb).apply(null,arguments)};function bn(){function zt(){if(!zr&&(zr=!0,ot.calledRun=!0,!Lt)){if(ar(xn),ht(ot),ot.onRuntimeInitialized&&ot.onRuntimeInitialized(),ot.postRun)for(typeof ot.postRun=="function"&&(ot.postRun=[ot.postRun]);ot.postRun.length;){var Ht=ot.postRun.shift();Cn.unshift(Ht)}ar(Cn)}}if(!(0<cr)){if(ot.preRun)for(typeof ot.preRun=="function"&&(ot.preRun=[ot.preRun]);ot.preRun.length;)Vn();ar(Zt),0<cr||(ot.setStatus?(ot.setStatus("Running..."),setTimeout(function(){setTimeout(function(){ot.setStatus("")},1),zt()},1)):zt())}}if(ot.UTF8ToString=Kt,ot.stringToUTF8=function(zt,Ht,Xt){return an(zt,Jt,Ht,Xt)},ot.lengthBytesUTF8=ln,ot.stackSave=Dn,ot.stackRestore=$n,ot.stackAlloc=Er,Bn=function zt(){zr||bn(),zr||(Bn=zt)},ot.preInit)for(typeof ot.preInit=="function"&&(ot.preInit=[ot.preInit]);0<ot.preInit.length;)ot.preInit.pop()();return bn(),nt.ready});s.exports=tt},4537:s=>{s.exports=function(e,d){for(var b=new Array(arguments.length-1),tt=0,nt=2,ot=!0;nt<arguments.length;)b[tt++]=arguments[nt++];return new Promise(function(ht,mt){b[tt]=function(gt){if(ot)if(ot=!1,gt)mt(gt);else{for(var yt=new Array(arguments.length-1),ft=0;ft<yt.length;)yt[ft++]=arguments[ft];ht.apply(null,yt)}};try{e.apply(d||null,b)}catch(gt){ot&&(ot=!1,mt(gt))}})}},7419:(s,e)=>{var d=e;d.length=function(ht){var mt=ht.length;if(!mt)return 0;for(var gt=0;--mt%4>1&&ht.charAt(mt)==="=";)++gt;return Math.ceil(3*ht.length)/4-gt};for(var b=new Array(64),tt=new Array(123),nt=0;nt<64;)tt[b[nt]=nt<26?nt+65:nt<52?nt+71:nt<62?nt-4:nt-59|43]=nt++;d.encode=function(ht,mt,gt){for(var yt,ft=null,st=[],bt=0,vt=0;mt<gt;){var xt=ht[mt++];switch(vt){case 0:st[bt++]=b[xt>>2],yt=(3&xt)<<4,vt=1;break;case 1:st[bt++]=b[yt|xt>>4],yt=(15&xt)<<2,vt=2;break;case 2:st[bt++]=b[yt|xt>>6],st[bt++]=b[63&xt],vt=0}bt>8191&&((ft||(ft=[])).push(String.fromCharCode.apply(String,st)),bt=0)}return vt&&(st[bt++]=b[yt],st[bt++]=61,vt===1&&(st[bt++]=61)),ft?(bt&&ft.push(String.fromCharCode.apply(String,st.slice(0,bt))),ft.join("")):String.fromCharCode.apply(String,st.slice(0,bt))};var ot="invalid encoding";d.decode=function(ht,mt,gt){for(var yt,ft=gt,st=0,bt=0;bt<ht.length;){var vt=ht.charCodeAt(bt++);if(vt===61&&st>1)break;if((vt=tt[vt])===void 0)throw Error(ot);switch(st){case 0:yt=vt,st=1;break;case 1:mt[gt++]=yt<<2|(48&vt)>>4,yt=vt,st=2;break;case 2:mt[gt++]=(15&yt)<<4|(60&vt)>>2,yt=vt,st=3;break;case 3:mt[gt++]=(3&yt)<<6|vt,st=0}}if(st===1)throw Error(ot);return gt-ft},d.test=function(ht){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(ht)}},9211:s=>{function e(){this._listeners={}}s.exports=e,e.prototype.on=function(d,b,tt){return(this._listeners[d]||(this._listeners[d]=[])).push({fn:b,ctx:tt||this}),this},e.prototype.off=function(d,b){if(d===void 0)this._listeners={};else if(b===void 0)this._listeners[d]=[];else for(var tt=this._listeners[d],nt=0;nt<tt.length;)tt[nt].fn===b?tt.splice(nt,1):++nt;return this},e.prototype.emit=function(d){var b=this._listeners[d];if(b){for(var tt=[],nt=1;nt<arguments.length;)tt.push(arguments[nt++]);for(nt=0;nt<b.length;)b[nt].fn.apply(b[nt++].ctx,tt)}return this}},945:s=>{function e(ot){return typeof Float32Array<"u"?function(){var ht=new Float32Array([-0]),mt=new Uint8Array(ht.buffer),gt=mt[3]===128;function yt(vt,xt,wt){ht[0]=vt,xt[wt]=mt[0],xt[wt+1]=mt[1],xt[wt+2]=mt[2],xt[wt+3]=mt[3]}function ft(vt,xt,wt){ht[0]=vt,xt[wt]=mt[3],xt[wt+1]=mt[2],xt[wt+2]=mt[1],xt[wt+3]=mt[0]}function st(vt,xt){return mt[0]=vt[xt],mt[1]=vt[xt+1],mt[2]=vt[xt+2],mt[3]=vt[xt+3],ht[0]}function bt(vt,xt){return mt[3]=vt[xt],mt[2]=vt[xt+1],mt[1]=vt[xt+2],mt[0]=vt[xt+3],ht[0]}ot.writeFloatLE=gt?yt:ft,ot.writeFloatBE=gt?ft:yt,ot.readFloatLE=gt?st:bt,ot.readFloatBE=gt?bt:st}():function(){function ht(gt,yt,ft,st){var bt=yt<0?1:0;if(bt&&(yt=-yt),yt===0)gt(1/yt>0?0:2147483648,ft,st);else if(isNaN(yt))gt(2143289344,ft,st);else if(yt>34028234663852886e22)gt((bt<<31|2139095040)>>>0,ft,st);else if(yt<11754943508222875e-54)gt((bt<<31|Math.round(yt/1401298464324817e-60))>>>0,ft,st);else{var vt=Math.floor(Math.log(yt)/Math.LN2);gt((bt<<31|vt+127<<23|8388607&Math.round(yt*Math.pow(2,-vt)*8388608))>>>0,ft,st)}}function mt(gt,yt,ft){var st=gt(yt,ft),bt=2*(st>>31)+1,vt=st>>>23&255,xt=8388607&st;return vt===255?xt?NaN:bt*(1/0):vt===0?1401298464324817e-60*bt*xt:bt*Math.pow(2,vt-150)*(xt+8388608)}ot.writeFloatLE=ht.bind(null,d),ot.writeFloatBE=ht.bind(null,b),ot.readFloatLE=mt.bind(null,tt),ot.readFloatBE=mt.bind(null,nt)}(),typeof Float64Array<"u"?function(){var ht=new Float64Array([-0]),mt=new Uint8Array(ht.buffer),gt=mt[7]===128;function yt(vt,xt,wt){ht[0]=vt,xt[wt]=mt[0],xt[wt+1]=mt[1],xt[wt+2]=mt[2],xt[wt+3]=mt[3],xt[wt+4]=mt[4],xt[wt+5]=mt[5],xt[wt+6]=mt[6],xt[wt+7]=mt[7]}function ft(vt,xt,wt){ht[0]=vt,xt[wt]=mt[7],xt[wt+1]=mt[6],xt[wt+2]=mt[5],xt[wt+3]=mt[4],xt[wt+4]=mt[3],xt[wt+5]=mt[2],xt[wt+6]=mt[1],xt[wt+7]=mt[0]}function st(vt,xt){return mt[0]=vt[xt],mt[1]=vt[xt+1],mt[2]=vt[xt+2],mt[3]=vt[xt+3],mt[4]=vt[xt+4],mt[5]=vt[xt+5],mt[6]=vt[xt+6],mt[7]=vt[xt+7],ht[0]}function bt(vt,xt){return mt[7]=vt[xt],mt[6]=vt[xt+1],mt[5]=vt[xt+2],mt[4]=vt[xt+3],mt[3]=vt[xt+4],mt[2]=vt[xt+5],mt[1]=vt[xt+6],mt[0]=vt[xt+7],ht[0]}ot.writeDoubleLE=gt?yt:ft,ot.writeDoubleBE=gt?ft:yt,ot.readDoubleLE=gt?st:bt,ot.readDoubleBE=gt?bt:st}():function(){function ht(gt,yt,ft,st,bt,vt){var xt=st<0?1:0;if(xt&&(st=-st),st===0)gt(0,bt,vt+yt),gt(1/st>0?0:2147483648,bt,vt+ft);else if(isNaN(st))gt(0,bt,vt+yt),gt(2146959360,bt,vt+ft);else if(st>17976931348623157e292)gt(0,bt,vt+yt),gt((xt<<31|2146435072)>>>0,bt,vt+ft);else{var wt;if(st<22250738585072014e-324)gt((wt=st/5e-324)>>>0,bt,vt+yt),gt((xt<<31|wt/4294967296)>>>0,bt,vt+ft);else{var St=Math.floor(Math.log(st)/Math.LN2);St===1024&&(St=1023),gt(4503599627370496*(wt=st*Math.pow(2,-St))>>>0,bt,vt+yt),gt((xt<<31|St+1023<<20|1048576*wt&1048575)>>>0,bt,vt+ft)}}}function mt(gt,yt,ft,st,bt){var vt=gt(st,bt+yt),xt=gt(st,bt+ft),wt=2*(xt>>31)+1,St=xt>>>20&2047,_t=4294967296*(1048575&xt)+vt;return St===2047?_t?NaN:wt*(1/0):St===0?5e-324*wt*_t:wt*Math.pow(2,St-1075)*(_t+4503599627370496)}ot.writeDoubleLE=ht.bind(null,d,0,4),ot.writeDoubleBE=ht.bind(null,b,4,0),ot.readDoubleLE=mt.bind(null,tt,0,4),ot.readDoubleBE=mt.bind(null,nt,4,0)}(),ot}function d(ot,ht,mt){ht[mt]=255&ot,ht[mt+1]=ot>>>8&255,ht[mt+2]=ot>>>16&255,ht[mt+3]=ot>>>24}function b(ot,ht,mt){ht[mt]=ot>>>24,ht[mt+1]=ot>>>16&255,ht[mt+2]=ot>>>8&255,ht[mt+3]=255&ot}function tt(ot,ht){return(ot[ht]|ot[ht+1]<<8|ot[ht+2]<<16|ot[ht+3]<<24)>>>0}function nt(ot,ht){return(ot[ht]<<24|ot[ht+1]<<16|ot[ht+2]<<8|ot[ht+3])>>>0}s.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(s){}return null}module.exports=inquire},6662:s=>{s.exports=function(e,d,b){var tt=b||8192,nt=tt>>>1,ot=null,ht=tt;return function(mt){if(mt<1||mt>nt)return e(mt);ht+mt>tt&&(ot=e(tt),ht=0);var gt=d.call(ot,ht,ht+=mt);return 7&ht&&(ht=1+(7|ht)),gt}}},4997:(s,e)=>{var d=e;d.length=function(b){for(var tt=0,nt=0,ot=0;ot<b.length;++ot)(nt=b.charCodeAt(ot))<128?tt+=1:nt<2048?tt+=2:(64512&nt)==55296&&(64512&b.charCodeAt(ot+1))==56320?(++ot,tt+=4):tt+=3;return tt},d.read=function(b,tt,nt){if(nt-tt<1)return"";for(var ot,ht=null,mt=[],gt=0;tt<nt;)(ot=b[tt++])<128?mt[gt++]=ot:ot>191&&ot<224?mt[gt++]=(31&ot)<<6|63&b[tt++]:ot>239&&ot<365?(ot=((7&ot)<<18|(63&b[tt++])<<12|(63&b[tt++])<<6|63&b[tt++])-65536,mt[gt++]=55296+(ot>>10),mt[gt++]=56320+(1023&ot)):mt[gt++]=(15&ot)<<12|(63&b[tt++])<<6|63&b[tt++],gt>8191&&((ht||(ht=[])).push(String.fromCharCode.apply(String,mt)),gt=0);return ht?(gt&&ht.push(String.fromCharCode.apply(String,mt.slice(0,gt))),ht.join("")):String.fromCharCode.apply(String,mt.slice(0,gt))},d.write=function(b,tt,nt){for(var ot,ht,mt=nt,gt=0;gt<b.length;++gt)(ot=b.charCodeAt(gt))<128?tt[nt++]=ot:ot<2048?(tt[nt++]=ot>>6|192,tt[nt++]=63&ot|128):(64512&ot)==55296&&(64512&(ht=b.charCodeAt(gt+1)))==56320?(ot=65536+((1023&ot)<<10)+(1023&ht),++gt,tt[nt++]=ot>>18|240,tt[nt++]=ot>>12&63|128,tt[nt++]=ot>>6&63|128,tt[nt++]=63&ot|128):(tt[nt++]=ot>>12|224,tt[nt++]=ot>>6&63|128,tt[nt++]=63&ot|128);return nt-mt}},3442:(s,e)=>{e.__esModule=!0;var d=function(){function b(tt){if(!tt)throw new TypeError("Invalid argument; `value` has no value.");this.value=b.EMPTY,tt&&b.isGuid(tt)&&(this.value=tt)}return b.isGuid=function(tt){var nt=tt.toString();return tt&&(tt instanceof b||b.validator.test(nt))},b.create=function(){return new b([b.gen(2),b.gen(1),b.gen(1),b.gen(1),b.gen(3)].join("-"))},b.createEmpty=function(){return new b("emptyguid")},b.parse=function(tt){return new b(tt)},b.raw=function(){return[b.gen(2),b.gen(1),b.gen(1),b.gen(1),b.gen(3)].join("-")},b.gen=function(tt){for(var nt="",ot=0;ot<tt;ot++)nt+=(65536*(1+Math.random())|0).toString(16).substring(1);return nt},b.prototype.equals=function(tt){return b.isGuid(tt)&&this.value===tt.toString()},b.prototype.isEmpty=function(){return this.value===b.EMPTY},b.prototype.toString=function(){return this.value},b.prototype.toJSON=function(){return{value:this.value}},b.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),b.EMPTY="00000000-0000-0000-0000-000000000000",b}();e.Guid=d},3720:s=>{s.exports=d;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function d(At,It,jt){this.low=0|At,this.high=0|It,this.unsigned=!!jt}function b(At){return(At&&At.__isLong__)===!0}d.prototype.__isLong__,Object.defineProperty(d.prototype,"__isLong__",{value:!0}),d.isLong=b;var tt={},nt={};function ot(At,It){var jt,qt,Jt;return It?(Jt=0<=(At>>>=0)&&At<256)&&(qt=nt[At])?qt:(jt=mt(At,(0|At)<0?-1:0,!0),Jt&&(nt[At]=jt),jt):(Jt=-128<=(At|=0)&&At<128)&&(qt=tt[At])?qt:(jt=mt(At,At<0?-1:0,!1),Jt&&(tt[At]=jt),jt)}function ht(At,It){if(isNaN(At))return It?St:wt;if(It){if(At<0)return St;if(At>=bt)return Mt}else{if(At<=-vt)return Ot;if(At+1>=vt)return kt}return At<0?ht(-At,It).neg():mt(At%st|0,At/st|0,It)}function mt(At,It,jt){return new d(At,It,jt)}d.fromInt=ot,d.fromNumber=ht,d.fromBits=mt;var gt=Math.pow;function yt(At,It,jt){if(At.length===0)throw Error("empty string");if(At==="NaN"||At==="Infinity"||At==="+Infinity"||At==="-Infinity")return wt;if(typeof It=="number"?(jt=It,It=!1):It=!!It,(jt=jt||10)<2||36<jt)throw RangeError("radix");var qt;if((qt=At.indexOf("-"))>0)throw Error("interior hyphen");if(qt===0)return yt(At.substring(1),It,jt).neg();for(var Jt=ht(gt(jt,8)),Bt=wt,Wt=0;Wt<At.length;Wt+=8){var Lt=Math.min(8,At.length-Wt),Ut=parseInt(At.substring(Wt,Wt+Lt),jt);if(Lt<8){var tn=ht(gt(jt,Lt));Bt=Bt.mul(tn).add(ht(Ut))}else Bt=(Bt=Bt.mul(Jt)).add(ht(Ut))}return Bt.unsigned=It,Bt}function ft(At,It){return typeof At=="number"?ht(At,It):typeof At=="string"?yt(At,It):mt(At.low,At.high,typeof It=="boolean"?It:At.unsigned)}d.fromString=yt,d.fromValue=ft;var st=4294967296,bt=st*st,vt=bt/2,xt=ot(1<<24),wt=ot(0);d.ZERO=wt;var St=ot(0,!0);d.UZERO=St;var _t=ot(1);d.ONE=_t;var Tt=ot(1,!0);d.UONE=Tt;var Et=ot(-1);d.NEG_ONE=Et;var kt=mt(-1,2147483647,!1);d.MAX_VALUE=kt;var Mt=mt(-1,-1,!0);d.MAX_UNSIGNED_VALUE=Mt;var Ot=mt(0,-2147483648,!1);d.MIN_VALUE=Ot;var Dt=d.prototype;Dt.toInt=function(){return this.unsigned?this.low>>>0:this.low},Dt.toNumber=function(){return this.unsigned?(this.high>>>0)*st+(this.low>>>0):this.high*st+(this.low>>>0)},Dt.toString=function(At){if((At=At||10)<2||36<At)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Ot)){var It=ht(At),jt=this.div(It),qt=jt.mul(It).sub(this);return jt.toString(At)+qt.toInt().toString(At)}return"-"+this.neg().toString(At)}for(var Jt=ht(gt(At,6),this.unsigned),Bt=this,Wt="";;){var Lt=Bt.div(Jt),Ut=(Bt.sub(Lt.mul(Jt)).toInt()>>>0).toString(At);if((Bt=Lt).isZero())return Ut+Wt;for(;Ut.length<6;)Ut="0"+Ut;Wt=""+Ut+Wt}},Dt.getHighBits=function(){return this.high},Dt.getHighBitsUnsigned=function(){return this.high>>>0},Dt.getLowBits=function(){return this.low},Dt.getLowBitsUnsigned=function(){return this.low>>>0},Dt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ot)?64:this.neg().getNumBitsAbs();for(var At=this.high!=0?this.high:this.low,It=31;It>0&&!(At&1<<It);It--);return this.high!=0?It+33:It+1},Dt.isZero=function(){return this.high===0&&this.low===0},Dt.eqz=Dt.isZero,Dt.isNegative=function(){return!this.unsigned&&this.high<0},Dt.isPositive=function(){return this.unsigned||this.high>=0},Dt.isOdd=function(){return(1&this.low)==1},Dt.isEven=function(){return(1&this.low)==0},Dt.equals=function(At){return b(At)||(At=ft(At)),(this.unsigned===At.unsigned||this.high>>>31!=1||At.high>>>31!=1)&&this.high===At.high&&this.low===At.low},Dt.eq=Dt.equals,Dt.notEquals=function(At){return!this.eq(At)},Dt.neq=Dt.notEquals,Dt.ne=Dt.notEquals,Dt.lessThan=function(At){return this.comp(At)<0},Dt.lt=Dt.lessThan,Dt.lessThanOrEqual=function(At){return this.comp(At)<=0},Dt.lte=Dt.lessThanOrEqual,Dt.le=Dt.lessThanOrEqual,Dt.greaterThan=function(At){return this.comp(At)>0},Dt.gt=Dt.greaterThan,Dt.greaterThanOrEqual=function(At){return this.comp(At)>=0},Dt.gte=Dt.greaterThanOrEqual,Dt.ge=Dt.greaterThanOrEqual,Dt.compare=function(At){if(b(At)||(At=ft(At)),this.eq(At))return 0;var It=this.isNegative(),jt=At.isNegative();return It&&!jt?-1:!It&&jt?1:this.unsigned?At.high>>>0>this.high>>>0||At.high===this.high&&At.low>>>0>this.low>>>0?-1:1:this.sub(At).isNegative()?-1:1},Dt.comp=Dt.compare,Dt.negate=function(){return!this.unsigned&&this.eq(Ot)?Ot:this.not().add(_t)},Dt.neg=Dt.negate,Dt.add=function(At){b(At)||(At=ft(At));var It=this.high>>>16,jt=65535&this.high,qt=this.low>>>16,Jt=65535&this.low,Bt=At.high>>>16,Wt=65535&At.high,Lt=At.low>>>16,Ut=0,tn=0,Kt=0,an=0;return Kt+=(an+=Jt+(65535&At.low))>>>16,tn+=(Kt+=qt+Lt)>>>16,Ut+=(tn+=jt+Wt)>>>16,Ut+=It+Bt,mt((Kt&=65535)<<16|(an&=65535),(Ut&=65535)<<16|(tn&=65535),this.unsigned)},Dt.subtract=function(At){return b(At)||(At=ft(At)),this.add(At.neg())},Dt.sub=Dt.subtract,Dt.multiply=function(At){if(this.isZero())return wt;if(b(At)||(At=ft(At)),e)return mt(e.mul(this.low,this.high,At.low,At.high),e.get_high(),this.unsigned);if(At.isZero())return wt;if(this.eq(Ot))return At.isOdd()?Ot:wt;if(At.eq(Ot))return this.isOdd()?Ot:wt;if(this.isNegative())return At.isNegative()?this.neg().mul(At.neg()):this.neg().mul(At).neg();if(At.isNegative())return this.mul(At.neg()).neg();if(this.lt(xt)&&At.lt(xt))return ht(this.toNumber()*At.toNumber(),this.unsigned);var It=this.high>>>16,jt=65535&this.high,qt=this.low>>>16,Jt=65535&this.low,Bt=At.high>>>16,Wt=65535&At.high,Lt=At.low>>>16,Ut=65535&At.low,tn=0,Kt=0,an=0,ln=0;return an+=(ln+=Jt*Ut)>>>16,Kt+=(an+=qt*Ut)>>>16,an&=65535,Kt+=(an+=Jt*Lt)>>>16,tn+=(Kt+=jt*Ut)>>>16,Kt&=65535,tn+=(Kt+=qt*Lt)>>>16,Kt&=65535,tn+=(Kt+=Jt*Wt)>>>16,tn+=It*Ut+jt*Lt+qt*Wt+Jt*Bt,mt((an&=65535)<<16|(ln&=65535),(tn&=65535)<<16|(Kt&=65535),this.unsigned)},Dt.mul=Dt.multiply,Dt.divide=function(At){if(b(At)||(At=ft(At)),At.isZero())throw Error("division by zero");var It,jt,qt;if(e)return this.unsigned||this.high!==-2147483648||At.low!==-1||At.high!==-1?mt((this.unsigned?e.div_u:e.div_s)(this.low,this.high,At.low,At.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?St:wt;if(this.unsigned){if(At.unsigned||(At=At.toUnsigned()),At.gt(this))return St;if(At.gt(this.shru(1)))return Tt;qt=St}else{if(this.eq(Ot))return At.eq(_t)||At.eq(Et)?Ot:At.eq(Ot)?_t:(It=this.shr(1).div(At).shl(1)).eq(wt)?At.isNegative()?_t:Et:(jt=this.sub(At.mul(It)),qt=It.add(jt.div(At)));if(At.eq(Ot))return this.unsigned?St:wt;if(this.isNegative())return At.isNegative()?this.neg().div(At.neg()):this.neg().div(At).neg();if(At.isNegative())return this.div(At.neg()).neg();qt=wt}for(jt=this;jt.gte(At);){It=Math.max(1,Math.floor(jt.toNumber()/At.toNumber()));for(var Jt=Math.ceil(Math.log(It)/Math.LN2),Bt=Jt<=48?1:gt(2,Jt-48),Wt=ht(It),Lt=Wt.mul(At);Lt.isNegative()||Lt.gt(jt);)Lt=(Wt=ht(It-=Bt,this.unsigned)).mul(At);Wt.isZero()&&(Wt=_t),qt=qt.add(Wt),jt=jt.sub(Lt)}return qt},Dt.div=Dt.divide,Dt.modulo=function(At){return b(At)||(At=ft(At)),e?mt((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,At.low,At.high),e.get_high(),this.unsigned):this.sub(this.div(At).mul(At))},Dt.mod=Dt.modulo,Dt.rem=Dt.modulo,Dt.not=function(){return mt(~this.low,~this.high,this.unsigned)},Dt.and=function(At){return b(At)||(At=ft(At)),mt(this.low&At.low,this.high&At.high,this.unsigned)},Dt.or=function(At){return b(At)||(At=ft(At)),mt(this.low|At.low,this.high|At.high,this.unsigned)},Dt.xor=function(At){return b(At)||(At=ft(At)),mt(this.low^At.low,this.high^At.high,this.unsigned)},Dt.shiftLeft=function(At){return b(At)&&(At=At.toInt()),(At&=63)==0?this:At<32?mt(this.low<<At,this.high<<At|this.low>>>32-At,this.unsigned):mt(0,this.low<<At-32,this.unsigned)},Dt.shl=Dt.shiftLeft,Dt.shiftRight=function(At){return b(At)&&(At=At.toInt()),(At&=63)==0?this:At<32?mt(this.low>>>At|this.high<<32-At,this.high>>At,this.unsigned):mt(this.high>>At-32,this.high>=0?0:-1,this.unsigned)},Dt.shr=Dt.shiftRight,Dt.shiftRightUnsigned=function(At){if(b(At)&&(At=At.toInt()),(At&=63)==0)return this;var It=this.high;return At<32?mt(this.low>>>At|It<<32-At,It>>>At,this.unsigned):mt(At===32?It:It>>>At-32,0,this.unsigned)},Dt.shru=Dt.shiftRightUnsigned,Dt.shr_u=Dt.shiftRightUnsigned,Dt.toSigned=function(){return this.unsigned?mt(this.low,this.high,!1):this},Dt.toUnsigned=function(){return this.unsigned?this:mt(this.low,this.high,!0)},Dt.toBytes=function(At){return At?this.toBytesLE():this.toBytesBE()},Dt.toBytesLE=function(){var At=this.high,It=this.low;return[255&It,It>>>8&255,It>>>16&255,It>>>24,255&At,At>>>8&255,At>>>16&255,At>>>24]},Dt.toBytesBE=function(){var At=this.high,It=this.low;return[At>>>24,At>>>16&255,At>>>8&255,255&At,It>>>24,It>>>16&255,It>>>8&255,255&It]},d.fromBytes=function(At,It,jt){return jt?d.fromBytesLE(At,It):d.fromBytesBE(At,It)},d.fromBytesLE=function(At,It){return new d(At[0]|At[1]<<8|At[2]<<16|At[3]<<24,At[4]|At[5]<<8|At[6]<<16|At[7]<<24,It)},d.fromBytesBE=function(At,It){return new d(At[4]<<24|At[5]<<16|At[6]<<8|At[7],At[0]<<24|At[1]<<16|At[2]<<8|At[3],It)}},1446:(s,e,d)=>{var b,tt,nt,ot=d(2100),ht=ot.Reader,mt=ot.Writer,gt=ot.util,yt=ot.roots.default||(ot.roots.default={});yt.onnx=((nt={}).Version=(b={},(tt=Object.create(b))[b[0]="_START_VERSION"]=0,tt[b[1]="IR_VERSION_2017_10_10"]=1,tt[b[2]="IR_VERSION_2017_10_30"]=2,tt[b[3]="IR_VERSION_2017_11_3"]=3,tt[b[4]="IR_VERSION_2019_1_22"]=4,tt[b[5]="IR_VERSION"]=5,tt),nt.AttributeProto=function(){function ft(st){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.name="",ft.prototype.refAttrName="",ft.prototype.docString="",ft.prototype.type=0,ft.prototype.f=0,ft.prototype.i=gt.Long?gt.Long.fromBits(0,0,!1):0,ft.prototype.s=gt.newBuffer([]),ft.prototype.t=null,ft.prototype.g=null,ft.prototype.floats=gt.emptyArray,ft.prototype.ints=gt.emptyArray,ft.prototype.strings=gt.emptyArray,ft.prototype.tensors=gt.emptyArray,ft.prototype.graphs=gt.emptyArray,ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){if(bt||(bt=mt.create()),st.name!=null&&st.hasOwnProperty("name")&&bt.uint32(10).string(st.name),st.f!=null&&st.hasOwnProperty("f")&&bt.uint32(21).float(st.f),st.i!=null&&st.hasOwnProperty("i")&&bt.uint32(24).int64(st.i),st.s!=null&&st.hasOwnProperty("s")&&bt.uint32(34).bytes(st.s),st.t!=null&&st.hasOwnProperty("t")&&yt.onnx.TensorProto.encode(st.t,bt.uint32(42).fork()).ldelim(),st.g!=null&&st.hasOwnProperty("g")&&yt.onnx.GraphProto.encode(st.g,bt.uint32(50).fork()).ldelim(),st.floats!=null&&st.floats.length){bt.uint32(58).fork();for(var vt=0;vt<st.floats.length;++vt)bt.float(st.floats[vt]);bt.ldelim()}if(st.ints!=null&&st.ints.length){for(bt.uint32(66).fork(),vt=0;vt<st.ints.length;++vt)bt.int64(st.ints[vt]);bt.ldelim()}if(st.strings!=null&&st.strings.length)for(vt=0;vt<st.strings.length;++vt)bt.uint32(74).bytes(st.strings[vt]);if(st.tensors!=null&&st.tensors.length)for(vt=0;vt<st.tensors.length;++vt)yt.onnx.TensorProto.encode(st.tensors[vt],bt.uint32(82).fork()).ldelim();if(st.graphs!=null&&st.graphs.length)for(vt=0;vt<st.graphs.length;++vt)yt.onnx.GraphProto.encode(st.graphs[vt],bt.uint32(90).fork()).ldelim();return st.docString!=null&&st.hasOwnProperty("docString")&&bt.uint32(106).string(st.docString),st.type!=null&&st.hasOwnProperty("type")&&bt.uint32(160).int32(st.type),st.refAttrName!=null&&st.hasOwnProperty("refAttrName")&&bt.uint32(170).string(st.refAttrName),bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.AttributeProto;st.pos<vt;){var wt=st.uint32();switch(wt>>>3){case 1:xt.name=st.string();break;case 21:xt.refAttrName=st.string();break;case 13:xt.docString=st.string();break;case 20:xt.type=st.int32();break;case 2:xt.f=st.float();break;case 3:xt.i=st.int64();break;case 4:xt.s=st.bytes();break;case 5:xt.t=yt.onnx.TensorProto.decode(st,st.uint32());break;case 6:xt.g=yt.onnx.GraphProto.decode(st,st.uint32());break;case 7:if(xt.floats&&xt.floats.length||(xt.floats=[]),(7&wt)==2)for(var St=st.uint32()+st.pos;st.pos<St;)xt.floats.push(st.float());else xt.floats.push(st.float());break;case 8:if(xt.ints&&xt.ints.length||(xt.ints=[]),(7&wt)==2)for(St=st.uint32()+st.pos;st.pos<St;)xt.ints.push(st.int64());else xt.ints.push(st.int64());break;case 9:xt.strings&&xt.strings.length||(xt.strings=[]),xt.strings.push(st.bytes());break;case 10:xt.tensors&&xt.tensors.length||(xt.tensors=[]),xt.tensors.push(yt.onnx.TensorProto.decode(st,st.uint32()));break;case 11:xt.graphs&&xt.graphs.length||(xt.graphs=[]),xt.graphs.push(yt.onnx.GraphProto.decode(st,st.uint32()));break;default:st.skipType(7&wt)}}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.name!=null&&st.hasOwnProperty("name")&&!gt.isString(st.name))return"name: string expected";if(st.refAttrName!=null&&st.hasOwnProperty("refAttrName")&&!gt.isString(st.refAttrName))return"refAttrName: string expected";if(st.docString!=null&&st.hasOwnProperty("docString")&&!gt.isString(st.docString))return"docString: string expected";if(st.type!=null&&st.hasOwnProperty("type"))switch(st.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(st.f!=null&&st.hasOwnProperty("f")&&typeof st.f!="number")return"f: number expected";if(st.i!=null&&st.hasOwnProperty("i")&&!(gt.isInteger(st.i)||st.i&&gt.isInteger(st.i.low)&&gt.isInteger(st.i.high)))return"i: integer|Long expected";if(st.s!=null&&st.hasOwnProperty("s")&&!(st.s&&typeof st.s.length=="number"||gt.isString(st.s)))return"s: buffer expected";if(st.t!=null&&st.hasOwnProperty("t")&&(vt=yt.onnx.TensorProto.verify(st.t)))return"t."+vt;if(st.g!=null&&st.hasOwnProperty("g")&&(vt=yt.onnx.GraphProto.verify(st.g)))return"g."+vt;if(st.floats!=null&&st.hasOwnProperty("floats")){if(!Array.isArray(st.floats))return"floats: array expected";for(var bt=0;bt<st.floats.length;++bt)if(typeof st.floats[bt]!="number")return"floats: number[] expected"}if(st.ints!=null&&st.hasOwnProperty("ints")){if(!Array.isArray(st.ints))return"ints: array expected";for(bt=0;bt<st.ints.length;++bt)if(!(gt.isInteger(st.ints[bt])||st.ints[bt]&&gt.isInteger(st.ints[bt].low)&&gt.isInteger(st.ints[bt].high)))return"ints: integer|Long[] expected"}if(st.strings!=null&&st.hasOwnProperty("strings")){if(!Array.isArray(st.strings))return"strings: array expected";for(bt=0;bt<st.strings.length;++bt)if(!(st.strings[bt]&&typeof st.strings[bt].length=="number"||gt.isString(st.strings[bt])))return"strings: buffer[] expected"}if(st.tensors!=null&&st.hasOwnProperty("tensors")){if(!Array.isArray(st.tensors))return"tensors: array expected";for(bt=0;bt<st.tensors.length;++bt)if(vt=yt.onnx.TensorProto.verify(st.tensors[bt]))return"tensors."+vt}if(st.graphs!=null&&st.hasOwnProperty("graphs")){if(!Array.isArray(st.graphs))return"graphs: array expected";for(bt=0;bt<st.graphs.length;++bt){var vt;if(vt=yt.onnx.GraphProto.verify(st.graphs[bt]))return"graphs."+vt}}return null},ft.fromObject=function(st){if(st instanceof yt.onnx.AttributeProto)return st;var bt=new yt.onnx.AttributeProto;switch(st.name!=null&&(bt.name=String(st.name)),st.refAttrName!=null&&(bt.refAttrName=String(st.refAttrName)),st.docString!=null&&(bt.docString=String(st.docString)),st.type){case"UNDEFINED":case 0:bt.type=0;break;case"FLOAT":case 1:bt.type=1;break;case"INT":case 2:bt.type=2;break;case"STRING":case 3:bt.type=3;break;case"TENSOR":case 4:bt.type=4;break;case"GRAPH":case 5:bt.type=5;break;case"FLOATS":case 6:bt.type=6;break;case"INTS":case 7:bt.type=7;break;case"STRINGS":case 8:bt.type=8;break;case"TENSORS":case 9:bt.type=9;break;case"GRAPHS":case 10:bt.type=10}if(st.f!=null&&(bt.f=Number(st.f)),st.i!=null&&(gt.Long?(bt.i=gt.Long.fromValue(st.i)).unsigned=!1:typeof st.i=="string"?bt.i=parseInt(st.i,10):typeof st.i=="number"?bt.i=st.i:typeof st.i=="object"&&(bt.i=new gt.LongBits(st.i.low>>>0,st.i.high>>>0).toNumber())),st.s!=null&&(typeof st.s=="string"?gt.base64.decode(st.s,bt.s=gt.newBuffer(gt.base64.length(st.s)),0):st.s.length&&(bt.s=st.s)),st.t!=null){if(typeof st.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");bt.t=yt.onnx.TensorProto.fromObject(st.t)}if(st.g!=null){if(typeof st.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");bt.g=yt.onnx.GraphProto.fromObject(st.g)}if(st.floats){if(!Array.isArray(st.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");bt.floats=[];for(var vt=0;vt<st.floats.length;++vt)bt.floats[vt]=Number(st.floats[vt])}if(st.ints){if(!Array.isArray(st.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(bt.ints=[],vt=0;vt<st.ints.length;++vt)gt.Long?(bt.ints[vt]=gt.Long.fromValue(st.ints[vt])).unsigned=!1:typeof st.ints[vt]=="string"?bt.ints[vt]=parseInt(st.ints[vt],10):typeof st.ints[vt]=="number"?bt.ints[vt]=st.ints[vt]:typeof st.ints[vt]=="object"&&(bt.ints[vt]=new gt.LongBits(st.ints[vt].low>>>0,st.ints[vt].high>>>0).toNumber())}if(st.strings){if(!Array.isArray(st.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(bt.strings=[],vt=0;vt<st.strings.length;++vt)typeof st.strings[vt]=="string"?gt.base64.decode(st.strings[vt],bt.strings[vt]=gt.newBuffer(gt.base64.length(st.strings[vt])),0):st.strings[vt].length&&(bt.strings[vt]=st.strings[vt])}if(st.tensors){if(!Array.isArray(st.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(bt.tensors=[],vt=0;vt<st.tensors.length;++vt){if(typeof st.tensors[vt]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");bt.tensors[vt]=yt.onnx.TensorProto.fromObject(st.tensors[vt])}}if(st.graphs){if(!Array.isArray(st.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(bt.graphs=[],vt=0;vt<st.graphs.length;++vt){if(typeof st.graphs[vt]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");bt.graphs[vt]=yt.onnx.GraphProto.fromObject(st.graphs[vt])}}return bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};if((bt.arrays||bt.defaults)&&(vt.floats=[],vt.ints=[],vt.strings=[],vt.tensors=[],vt.graphs=[]),bt.defaults){if(vt.name="",vt.f=0,gt.Long){var xt=new gt.Long(0,0,!1);vt.i=bt.longs===String?xt.toString():bt.longs===Number?xt.toNumber():xt}else vt.i=bt.longs===String?"0":0;bt.bytes===String?vt.s="":(vt.s=[],bt.bytes!==Array&&(vt.s=gt.newBuffer(vt.s))),vt.t=null,vt.g=null,vt.docString="",vt.type=bt.enums===String?"UNDEFINED":0,vt.refAttrName=""}if(st.name!=null&&st.hasOwnProperty("name")&&(vt.name=st.name),st.f!=null&&st.hasOwnProperty("f")&&(vt.f=bt.json&&!isFinite(st.f)?String(st.f):st.f),st.i!=null&&st.hasOwnProperty("i")&&(typeof st.i=="number"?vt.i=bt.longs===String?String(st.i):st.i:vt.i=bt.longs===String?gt.Long.prototype.toString.call(st.i):bt.longs===Number?new gt.LongBits(st.i.low>>>0,st.i.high>>>0).toNumber():st.i),st.s!=null&&st.hasOwnProperty("s")&&(vt.s=bt.bytes===String?gt.base64.encode(st.s,0,st.s.length):bt.bytes===Array?Array.prototype.slice.call(st.s):st.s),st.t!=null&&st.hasOwnProperty("t")&&(vt.t=yt.onnx.TensorProto.toObject(st.t,bt)),st.g!=null&&st.hasOwnProperty("g")&&(vt.g=yt.onnx.GraphProto.toObject(st.g,bt)),st.floats&&st.floats.length){vt.floats=[];for(var wt=0;wt<st.floats.length;++wt)vt.floats[wt]=bt.json&&!isFinite(st.floats[wt])?String(st.floats[wt]):st.floats[wt]}if(st.ints&&st.ints.length)for(vt.ints=[],wt=0;wt<st.ints.length;++wt)typeof st.ints[wt]=="number"?vt.ints[wt]=bt.longs===String?String(st.ints[wt]):st.ints[wt]:vt.ints[wt]=bt.longs===String?gt.Long.prototype.toString.call(st.ints[wt]):bt.longs===Number?new gt.LongBits(st.ints[wt].low>>>0,st.ints[wt].high>>>0).toNumber():st.ints[wt];if(st.strings&&st.strings.length)for(vt.strings=[],wt=0;wt<st.strings.length;++wt)vt.strings[wt]=bt.bytes===String?gt.base64.encode(st.strings[wt],0,st.strings[wt].length):bt.bytes===Array?Array.prototype.slice.call(st.strings[wt]):st.strings[wt];if(st.tensors&&st.tensors.length)for(vt.tensors=[],wt=0;wt<st.tensors.length;++wt)vt.tensors[wt]=yt.onnx.TensorProto.toObject(st.tensors[wt],bt);if(st.graphs&&st.graphs.length)for(vt.graphs=[],wt=0;wt<st.graphs.length;++wt)vt.graphs[wt]=yt.onnx.GraphProto.toObject(st.graphs[wt],bt);return st.docString!=null&&st.hasOwnProperty("docString")&&(vt.docString=st.docString),st.type!=null&&st.hasOwnProperty("type")&&(vt.type=bt.enums===String?yt.onnx.AttributeProto.AttributeType[st.type]:st.type),st.refAttrName!=null&&st.hasOwnProperty("refAttrName")&&(vt.refAttrName=st.refAttrName),vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft.AttributeType=function(){var st={},bt=Object.create(st);return bt[st[0]="UNDEFINED"]=0,bt[st[1]="FLOAT"]=1,bt[st[2]="INT"]=2,bt[st[3]="STRING"]=3,bt[st[4]="TENSOR"]=4,bt[st[5]="GRAPH"]=5,bt[st[6]="FLOATS"]=6,bt[st[7]="INTS"]=7,bt[st[8]="STRINGS"]=8,bt[st[9]="TENSORS"]=9,bt[st[10]="GRAPHS"]=10,bt}(),ft}(),nt.ValueInfoProto=function(){function ft(st){if(st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.name="",ft.prototype.type=null,ft.prototype.docString="",ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){return bt||(bt=mt.create()),st.name!=null&&st.hasOwnProperty("name")&&bt.uint32(10).string(st.name),st.type!=null&&st.hasOwnProperty("type")&&yt.onnx.TypeProto.encode(st.type,bt.uint32(18).fork()).ldelim(),st.docString!=null&&st.hasOwnProperty("docString")&&bt.uint32(26).string(st.docString),bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.ValueInfoProto;st.pos<vt;){var wt=st.uint32();switch(wt>>>3){case 1:xt.name=st.string();break;case 2:xt.type=yt.onnx.TypeProto.decode(st,st.uint32());break;case 3:xt.docString=st.string();break;default:st.skipType(7&wt)}}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.name!=null&&st.hasOwnProperty("name")&&!gt.isString(st.name))return"name: string expected";if(st.type!=null&&st.hasOwnProperty("type")){var bt=yt.onnx.TypeProto.verify(st.type);if(bt)return"type."+bt}return st.docString!=null&&st.hasOwnProperty("docString")&&!gt.isString(st.docString)?"docString: string expected":null},ft.fromObject=function(st){if(st instanceof yt.onnx.ValueInfoProto)return st;var bt=new yt.onnx.ValueInfoProto;if(st.name!=null&&(bt.name=String(st.name)),st.type!=null){if(typeof st.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");bt.type=yt.onnx.TypeProto.fromObject(st.type)}return st.docString!=null&&(bt.docString=String(st.docString)),bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};return bt.defaults&&(vt.name="",vt.type=null,vt.docString=""),st.name!=null&&st.hasOwnProperty("name")&&(vt.name=st.name),st.type!=null&&st.hasOwnProperty("type")&&(vt.type=yt.onnx.TypeProto.toObject(st.type,bt)),st.docString!=null&&st.hasOwnProperty("docString")&&(vt.docString=st.docString),vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft}(),nt.NodeProto=function(){function ft(st){if(this.input=[],this.output=[],this.attribute=[],st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.input=gt.emptyArray,ft.prototype.output=gt.emptyArray,ft.prototype.name="",ft.prototype.opType="",ft.prototype.domain="",ft.prototype.attribute=gt.emptyArray,ft.prototype.docString="",ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){if(bt||(bt=mt.create()),st.input!=null&&st.input.length)for(var vt=0;vt<st.input.length;++vt)bt.uint32(10).string(st.input[vt]);if(st.output!=null&&st.output.length)for(vt=0;vt<st.output.length;++vt)bt.uint32(18).string(st.output[vt]);if(st.name!=null&&st.hasOwnProperty("name")&&bt.uint32(26).string(st.name),st.opType!=null&&st.hasOwnProperty("opType")&&bt.uint32(34).string(st.opType),st.attribute!=null&&st.attribute.length)for(vt=0;vt<st.attribute.length;++vt)yt.onnx.AttributeProto.encode(st.attribute[vt],bt.uint32(42).fork()).ldelim();return st.docString!=null&&st.hasOwnProperty("docString")&&bt.uint32(50).string(st.docString),st.domain!=null&&st.hasOwnProperty("domain")&&bt.uint32(58).string(st.domain),bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.NodeProto;st.pos<vt;){var wt=st.uint32();switch(wt>>>3){case 1:xt.input&&xt.input.length||(xt.input=[]),xt.input.push(st.string());break;case 2:xt.output&&xt.output.length||(xt.output=[]),xt.output.push(st.string());break;case 3:xt.name=st.string();break;case 4:xt.opType=st.string();break;case 7:xt.domain=st.string();break;case 5:xt.attribute&&xt.attribute.length||(xt.attribute=[]),xt.attribute.push(yt.onnx.AttributeProto.decode(st,st.uint32()));break;case 6:xt.docString=st.string();break;default:st.skipType(7&wt)}}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.input!=null&&st.hasOwnProperty("input")){if(!Array.isArray(st.input))return"input: array expected";for(var bt=0;bt<st.input.length;++bt)if(!gt.isString(st.input[bt]))return"input: string[] expected"}if(st.output!=null&&st.hasOwnProperty("output")){if(!Array.isArray(st.output))return"output: array expected";for(bt=0;bt<st.output.length;++bt)if(!gt.isString(st.output[bt]))return"output: string[] expected"}if(st.name!=null&&st.hasOwnProperty("name")&&!gt.isString(st.name))return"name: string expected";if(st.opType!=null&&st.hasOwnProperty("opType")&&!gt.isString(st.opType))return"opType: string expected";if(st.domain!=null&&st.hasOwnProperty("domain")&&!gt.isString(st.domain))return"domain: string expected";if(st.attribute!=null&&st.hasOwnProperty("attribute")){if(!Array.isArray(st.attribute))return"attribute: array expected";for(bt=0;bt<st.attribute.length;++bt){var vt=yt.onnx.AttributeProto.verify(st.attribute[bt]);if(vt)return"attribute."+vt}}return st.docString!=null&&st.hasOwnProperty("docString")&&!gt.isString(st.docString)?"docString: string expected":null},ft.fromObject=function(st){if(st instanceof yt.onnx.NodeProto)return st;var bt=new yt.onnx.NodeProto;if(st.input){if(!Array.isArray(st.input))throw TypeError(".onnx.NodeProto.input: array expected");bt.input=[];for(var vt=0;vt<st.input.length;++vt)bt.input[vt]=String(st.input[vt])}if(st.output){if(!Array.isArray(st.output))throw TypeError(".onnx.NodeProto.output: array expected");for(bt.output=[],vt=0;vt<st.output.length;++vt)bt.output[vt]=String(st.output[vt])}if(st.name!=null&&(bt.name=String(st.name)),st.opType!=null&&(bt.opType=String(st.opType)),st.domain!=null&&(bt.domain=String(st.domain)),st.attribute){if(!Array.isArray(st.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(bt.attribute=[],vt=0;vt<st.attribute.length;++vt){if(typeof st.attribute[vt]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");bt.attribute[vt]=yt.onnx.AttributeProto.fromObject(st.attribute[vt])}}return st.docString!=null&&(bt.docString=String(st.docString)),bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};if((bt.arrays||bt.defaults)&&(vt.input=[],vt.output=[],vt.attribute=[]),bt.defaults&&(vt.name="",vt.opType="",vt.docString="",vt.domain=""),st.input&&st.input.length){vt.input=[];for(var xt=0;xt<st.input.length;++xt)vt.input[xt]=st.input[xt]}if(st.output&&st.output.length)for(vt.output=[],xt=0;xt<st.output.length;++xt)vt.output[xt]=st.output[xt];if(st.name!=null&&st.hasOwnProperty("name")&&(vt.name=st.name),st.opType!=null&&st.hasOwnProperty("opType")&&(vt.opType=st.opType),st.attribute&&st.attribute.length)for(vt.attribute=[],xt=0;xt<st.attribute.length;++xt)vt.attribute[xt]=yt.onnx.AttributeProto.toObject(st.attribute[xt],bt);return st.docString!=null&&st.hasOwnProperty("docString")&&(vt.docString=st.docString),st.domain!=null&&st.hasOwnProperty("domain")&&(vt.domain=st.domain),vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft}(),nt.ModelProto=function(){function ft(st){if(this.opsetImport=[],this.metadataProps=[],st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.irVersion=gt.Long?gt.Long.fromBits(0,0,!1):0,ft.prototype.opsetImport=gt.emptyArray,ft.prototype.producerName="",ft.prototype.producerVersion="",ft.prototype.domain="",ft.prototype.modelVersion=gt.Long?gt.Long.fromBits(0,0,!1):0,ft.prototype.docString="",ft.prototype.graph=null,ft.prototype.metadataProps=gt.emptyArray,ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){if(bt||(bt=mt.create()),st.irVersion!=null&&st.hasOwnProperty("irVersion")&&bt.uint32(8).int64(st.irVersion),st.producerName!=null&&st.hasOwnProperty("producerName")&&bt.uint32(18).string(st.producerName),st.producerVersion!=null&&st.hasOwnProperty("producerVersion")&&bt.uint32(26).string(st.producerVersion),st.domain!=null&&st.hasOwnProperty("domain")&&bt.uint32(34).string(st.domain),st.modelVersion!=null&&st.hasOwnProperty("modelVersion")&&bt.uint32(40).int64(st.modelVersion),st.docString!=null&&st.hasOwnProperty("docString")&&bt.uint32(50).string(st.docString),st.graph!=null&&st.hasOwnProperty("graph")&&yt.onnx.GraphProto.encode(st.graph,bt.uint32(58).fork()).ldelim(),st.opsetImport!=null&&st.opsetImport.length)for(var vt=0;vt<st.opsetImport.length;++vt)yt.onnx.OperatorSetIdProto.encode(st.opsetImport[vt],bt.uint32(66).fork()).ldelim();if(st.metadataProps!=null&&st.metadataProps.length)for(vt=0;vt<st.metadataProps.length;++vt)yt.onnx.StringStringEntryProto.encode(st.metadataProps[vt],bt.uint32(114).fork()).ldelim();return bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.ModelProto;st.pos<vt;){var wt=st.uint32();switch(wt>>>3){case 1:xt.irVersion=st.int64();break;case 8:xt.opsetImport&&xt.opsetImport.length||(xt.opsetImport=[]),xt.opsetImport.push(yt.onnx.OperatorSetIdProto.decode(st,st.uint32()));break;case 2:xt.producerName=st.string();break;case 3:xt.producerVersion=st.string();break;case 4:xt.domain=st.string();break;case 5:xt.modelVersion=st.int64();break;case 6:xt.docString=st.string();break;case 7:xt.graph=yt.onnx.GraphProto.decode(st,st.uint32());break;case 14:xt.metadataProps&&xt.metadataProps.length||(xt.metadataProps=[]),xt.metadataProps.push(yt.onnx.StringStringEntryProto.decode(st,st.uint32()));break;default:st.skipType(7&wt)}}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.irVersion!=null&&st.hasOwnProperty("irVersion")&&!(gt.isInteger(st.irVersion)||st.irVersion&&gt.isInteger(st.irVersion.low)&&gt.isInteger(st.irVersion.high)))return"irVersion: integer|Long expected";if(st.opsetImport!=null&&st.hasOwnProperty("opsetImport")){if(!Array.isArray(st.opsetImport))return"opsetImport: array expected";for(var bt=0;bt<st.opsetImport.length;++bt)if(vt=yt.onnx.OperatorSetIdProto.verify(st.opsetImport[bt]))return"opsetImport."+vt}if(st.producerName!=null&&st.hasOwnProperty("producerName")&&!gt.isString(st.producerName))return"producerName: string expected";if(st.producerVersion!=null&&st.hasOwnProperty("producerVersion")&&!gt.isString(st.producerVersion))return"producerVersion: string expected";if(st.domain!=null&&st.hasOwnProperty("domain")&&!gt.isString(st.domain))return"domain: string expected";if(st.modelVersion!=null&&st.hasOwnProperty("modelVersion")&&!(gt.isInteger(st.modelVersion)||st.modelVersion&&gt.isInteger(st.modelVersion.low)&&gt.isInteger(st.modelVersion.high)))return"modelVersion: integer|Long expected";if(st.docString!=null&&st.hasOwnProperty("docString")&&!gt.isString(st.docString))return"docString: string expected";if(st.graph!=null&&st.hasOwnProperty("graph")&&(vt=yt.onnx.GraphProto.verify(st.graph)))return"graph."+vt;if(st.metadataProps!=null&&st.hasOwnProperty("metadataProps")){if(!Array.isArray(st.metadataProps))return"metadataProps: array expected";for(bt=0;bt<st.metadataProps.length;++bt){var vt;if(vt=yt.onnx.StringStringEntryProto.verify(st.metadataProps[bt]))return"metadataProps."+vt}}return null},ft.fromObject=function(st){if(st instanceof yt.onnx.ModelProto)return st;var bt=new yt.onnx.ModelProto;if(st.irVersion!=null&&(gt.Long?(bt.irVersion=gt.Long.fromValue(st.irVersion)).unsigned=!1:typeof st.irVersion=="string"?bt.irVersion=parseInt(st.irVersion,10):typeof st.irVersion=="number"?bt.irVersion=st.irVersion:typeof st.irVersion=="object"&&(bt.irVersion=new gt.LongBits(st.irVersion.low>>>0,st.irVersion.high>>>0).toNumber())),st.opsetImport){if(!Array.isArray(st.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");bt.opsetImport=[];for(var vt=0;vt<st.opsetImport.length;++vt){if(typeof st.opsetImport[vt]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");bt.opsetImport[vt]=yt.onnx.OperatorSetIdProto.fromObject(st.opsetImport[vt])}}if(st.producerName!=null&&(bt.producerName=String(st.producerName)),st.producerVersion!=null&&(bt.producerVersion=String(st.producerVersion)),st.domain!=null&&(bt.domain=String(st.domain)),st.modelVersion!=null&&(gt.Long?(bt.modelVersion=gt.Long.fromValue(st.modelVersion)).unsigned=!1:typeof st.modelVersion=="string"?bt.modelVersion=parseInt(st.modelVersion,10):typeof st.modelVersion=="number"?bt.modelVersion=st.modelVersion:typeof st.modelVersion=="object"&&(bt.modelVersion=new gt.LongBits(st.modelVersion.low>>>0,st.modelVersion.high>>>0).toNumber())),st.docString!=null&&(bt.docString=String(st.docString)),st.graph!=null){if(typeof st.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");bt.graph=yt.onnx.GraphProto.fromObject(st.graph)}if(st.metadataProps){if(!Array.isArray(st.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(bt.metadataProps=[],vt=0;vt<st.metadataProps.length;++vt){if(typeof st.metadataProps[vt]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");bt.metadataProps[vt]=yt.onnx.StringStringEntryProto.fromObject(st.metadataProps[vt])}}return bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};if((bt.arrays||bt.defaults)&&(vt.opsetImport=[],vt.metadataProps=[]),bt.defaults){if(gt.Long){var xt=new gt.Long(0,0,!1);vt.irVersion=bt.longs===String?xt.toString():bt.longs===Number?xt.toNumber():xt}else vt.irVersion=bt.longs===String?"0":0;vt.producerName="",vt.producerVersion="",vt.domain="",gt.Long?(xt=new gt.Long(0,0,!1),vt.modelVersion=bt.longs===String?xt.toString():bt.longs===Number?xt.toNumber():xt):vt.modelVersion=bt.longs===String?"0":0,vt.docString="",vt.graph=null}if(st.irVersion!=null&&st.hasOwnProperty("irVersion")&&(typeof st.irVersion=="number"?vt.irVersion=bt.longs===String?String(st.irVersion):st.irVersion:vt.irVersion=bt.longs===String?gt.Long.prototype.toString.call(st.irVersion):bt.longs===Number?new gt.LongBits(st.irVersion.low>>>0,st.irVersion.high>>>0).toNumber():st.irVersion),st.producerName!=null&&st.hasOwnProperty("producerName")&&(vt.producerName=st.producerName),st.producerVersion!=null&&st.hasOwnProperty("producerVersion")&&(vt.producerVersion=st.producerVersion),st.domain!=null&&st.hasOwnProperty("domain")&&(vt.domain=st.domain),st.modelVersion!=null&&st.hasOwnProperty("modelVersion")&&(typeof st.modelVersion=="number"?vt.modelVersion=bt.longs===String?String(st.modelVersion):st.modelVersion:vt.modelVersion=bt.longs===String?gt.Long.prototype.toString.call(st.modelVersion):bt.longs===Number?new gt.LongBits(st.modelVersion.low>>>0,st.modelVersion.high>>>0).toNumber():st.modelVersion),st.docString!=null&&st.hasOwnProperty("docString")&&(vt.docString=st.docString),st.graph!=null&&st.hasOwnProperty("graph")&&(vt.graph=yt.onnx.GraphProto.toObject(st.graph,bt)),st.opsetImport&&st.opsetImport.length){vt.opsetImport=[];for(var wt=0;wt<st.opsetImport.length;++wt)vt.opsetImport[wt]=yt.onnx.OperatorSetIdProto.toObject(st.opsetImport[wt],bt)}if(st.metadataProps&&st.metadataProps.length)for(vt.metadataProps=[],wt=0;wt<st.metadataProps.length;++wt)vt.metadataProps[wt]=yt.onnx.StringStringEntryProto.toObject(st.metadataProps[wt],bt);return vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft}(),nt.StringStringEntryProto=function(){function ft(st){if(st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.key="",ft.prototype.value="",ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){return bt||(bt=mt.create()),st.key!=null&&st.hasOwnProperty("key")&&bt.uint32(10).string(st.key),st.value!=null&&st.hasOwnProperty("value")&&bt.uint32(18).string(st.value),bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.StringStringEntryProto;st.pos<vt;){var wt=st.uint32();switch(wt>>>3){case 1:xt.key=st.string();break;case 2:xt.value=st.string();break;default:st.skipType(7&wt)}}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){return typeof st!="object"||st===null?"object expected":st.key!=null&&st.hasOwnProperty("key")&&!gt.isString(st.key)?"key: string expected":st.value!=null&&st.hasOwnProperty("value")&&!gt.isString(st.value)?"value: string expected":null},ft.fromObject=function(st){if(st instanceof yt.onnx.StringStringEntryProto)return st;var bt=new yt.onnx.StringStringEntryProto;return st.key!=null&&(bt.key=String(st.key)),st.value!=null&&(bt.value=String(st.value)),bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};return bt.defaults&&(vt.key="",vt.value=""),st.key!=null&&st.hasOwnProperty("key")&&(vt.key=st.key),st.value!=null&&st.hasOwnProperty("value")&&(vt.value=st.value),vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft}(),nt.TensorAnnotation=function(){function ft(st){if(this.quantParameterTensorNames=[],st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.tensorName="",ft.prototype.quantParameterTensorNames=gt.emptyArray,ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){if(bt||(bt=mt.create()),st.tensorName!=null&&st.hasOwnProperty("tensorName")&&bt.uint32(10).string(st.tensorName),st.quantParameterTensorNames!=null&&st.quantParameterTensorNames.length)for(var vt=0;vt<st.quantParameterTensorNames.length;++vt)yt.onnx.StringStringEntryProto.encode(st.quantParameterTensorNames[vt],bt.uint32(18).fork()).ldelim();return bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.TensorAnnotation;st.pos<vt;){var wt=st.uint32();switch(wt>>>3){case 1:xt.tensorName=st.string();break;case 2:xt.quantParameterTensorNames&&xt.quantParameterTensorNames.length||(xt.quantParameterTensorNames=[]),xt.quantParameterTensorNames.push(yt.onnx.StringStringEntryProto.decode(st,st.uint32()));break;default:st.skipType(7&wt)}}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.tensorName!=null&&st.hasOwnProperty("tensorName")&&!gt.isString(st.tensorName))return"tensorName: string expected";if(st.quantParameterTensorNames!=null&&st.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(st.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var bt=0;bt<st.quantParameterTensorNames.length;++bt){var vt=yt.onnx.StringStringEntryProto.verify(st.quantParameterTensorNames[bt]);if(vt)return"quantParameterTensorNames."+vt}}return null},ft.fromObject=function(st){if(st instanceof yt.onnx.TensorAnnotation)return st;var bt=new yt.onnx.TensorAnnotation;if(st.tensorName!=null&&(bt.tensorName=String(st.tensorName)),st.quantParameterTensorNames){if(!Array.isArray(st.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");bt.quantParameterTensorNames=[];for(var vt=0;vt<st.quantParameterTensorNames.length;++vt){if(typeof st.quantParameterTensorNames[vt]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");bt.quantParameterTensorNames[vt]=yt.onnx.StringStringEntryProto.fromObject(st.quantParameterTensorNames[vt])}}return bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};if((bt.arrays||bt.defaults)&&(vt.quantParameterTensorNames=[]),bt.defaults&&(vt.tensorName=""),st.tensorName!=null&&st.hasOwnProperty("tensorName")&&(vt.tensorName=st.tensorName),st.quantParameterTensorNames&&st.quantParameterTensorNames.length){vt.quantParameterTensorNames=[];for(var xt=0;xt<st.quantParameterTensorNames.length;++xt)vt.quantParameterTensorNames[xt]=yt.onnx.StringStringEntryProto.toObject(st.quantParameterTensorNames[xt],bt)}return vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft}(),nt.GraphProto=function(){function ft(st){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.node=gt.emptyArray,ft.prototype.name="",ft.prototype.initializer=gt.emptyArray,ft.prototype.docString="",ft.prototype.input=gt.emptyArray,ft.prototype.output=gt.emptyArray,ft.prototype.valueInfo=gt.emptyArray,ft.prototype.quantizationAnnotation=gt.emptyArray,ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){if(bt||(bt=mt.create()),st.node!=null&&st.node.length)for(var vt=0;vt<st.node.length;++vt)yt.onnx.NodeProto.encode(st.node[vt],bt.uint32(10).fork()).ldelim();if(st.name!=null&&st.hasOwnProperty("name")&&bt.uint32(18).string(st.name),st.initializer!=null&&st.initializer.length)for(vt=0;vt<st.initializer.length;++vt)yt.onnx.TensorProto.encode(st.initializer[vt],bt.uint32(42).fork()).ldelim();if(st.docString!=null&&st.hasOwnProperty("docString")&&bt.uint32(82).string(st.docString),st.input!=null&&st.input.length)for(vt=0;vt<st.input.length;++vt)yt.onnx.ValueInfoProto.encode(st.input[vt],bt.uint32(90).fork()).ldelim();if(st.output!=null&&st.output.length)for(vt=0;vt<st.output.length;++vt)yt.onnx.ValueInfoProto.encode(st.output[vt],bt.uint32(98).fork()).ldelim();if(st.valueInfo!=null&&st.valueInfo.length)for(vt=0;vt<st.valueInfo.length;++vt)yt.onnx.ValueInfoProto.encode(st.valueInfo[vt],bt.uint32(106).fork()).ldelim();if(st.quantizationAnnotation!=null&&st.quantizationAnnotation.length)for(vt=0;vt<st.quantizationAnnotation.length;++vt)yt.onnx.TensorAnnotation.encode(st.quantizationAnnotation[vt],bt.uint32(114).fork()).ldelim();return bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.GraphProto;st.pos<vt;){var wt=st.uint32();switch(wt>>>3){case 1:xt.node&&xt.node.length||(xt.node=[]),xt.node.push(yt.onnx.NodeProto.decode(st,st.uint32()));break;case 2:xt.name=st.string();break;case 5:xt.initializer&&xt.initializer.length||(xt.initializer=[]),xt.initializer.push(yt.onnx.TensorProto.decode(st,st.uint32()));break;case 10:xt.docString=st.string();break;case 11:xt.input&&xt.input.length||(xt.input=[]),xt.input.push(yt.onnx.ValueInfoProto.decode(st,st.uint32()));break;case 12:xt.output&&xt.output.length||(xt.output=[]),xt.output.push(yt.onnx.ValueInfoProto.decode(st,st.uint32()));break;case 13:xt.valueInfo&&xt.valueInfo.length||(xt.valueInfo=[]),xt.valueInfo.push(yt.onnx.ValueInfoProto.decode(st,st.uint32()));break;case 14:xt.quantizationAnnotation&&xt.quantizationAnnotation.length||(xt.quantizationAnnotation=[]),xt.quantizationAnnotation.push(yt.onnx.TensorAnnotation.decode(st,st.uint32()));break;default:st.skipType(7&wt)}}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.node!=null&&st.hasOwnProperty("node")){if(!Array.isArray(st.node))return"node: array expected";for(var bt=0;bt<st.node.length;++bt)if(vt=yt.onnx.NodeProto.verify(st.node[bt]))return"node."+vt}if(st.name!=null&&st.hasOwnProperty("name")&&!gt.isString(st.name))return"name: string expected";if(st.initializer!=null&&st.hasOwnProperty("initializer")){if(!Array.isArray(st.initializer))return"initializer: array expected";for(bt=0;bt<st.initializer.length;++bt)if(vt=yt.onnx.TensorProto.verify(st.initializer[bt]))return"initializer."+vt}if(st.docString!=null&&st.hasOwnProperty("docString")&&!gt.isString(st.docString))return"docString: string expected";if(st.input!=null&&st.hasOwnProperty("input")){if(!Array.isArray(st.input))return"input: array expected";for(bt=0;bt<st.input.length;++bt)if(vt=yt.onnx.ValueInfoProto.verify(st.input[bt]))return"input."+vt}if(st.output!=null&&st.hasOwnProperty("output")){if(!Array.isArray(st.output))return"output: array expected";for(bt=0;bt<st.output.length;++bt)if(vt=yt.onnx.ValueInfoProto.verify(st.output[bt]))return"output."+vt}if(st.valueInfo!=null&&st.hasOwnProperty("valueInfo")){if(!Array.isArray(st.valueInfo))return"valueInfo: array expected";for(bt=0;bt<st.valueInfo.length;++bt)if(vt=yt.onnx.ValueInfoProto.verify(st.valueInfo[bt]))return"valueInfo."+vt}if(st.quantizationAnnotation!=null&&st.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(st.quantizationAnnotation))return"quantizationAnnotation: array expected";for(bt=0;bt<st.quantizationAnnotation.length;++bt){var vt;if(vt=yt.onnx.TensorAnnotation.verify(st.quantizationAnnotation[bt]))return"quantizationAnnotation."+vt}}return null},ft.fromObject=function(st){if(st instanceof yt.onnx.GraphProto)return st;var bt=new yt.onnx.GraphProto;if(st.node){if(!Array.isArray(st.node))throw TypeError(".onnx.GraphProto.node: array expected");bt.node=[];for(var vt=0;vt<st.node.length;++vt){if(typeof st.node[vt]!="object")throw TypeError(".onnx.GraphProto.node: object expected");bt.node[vt]=yt.onnx.NodeProto.fromObject(st.node[vt])}}if(st.name!=null&&(bt.name=String(st.name)),st.initializer){if(!Array.isArray(st.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(bt.initializer=[],vt=0;vt<st.initializer.length;++vt){if(typeof st.initializer[vt]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");bt.initializer[vt]=yt.onnx.TensorProto.fromObject(st.initializer[vt])}}if(st.docString!=null&&(bt.docString=String(st.docString)),st.input){if(!Array.isArray(st.input))throw TypeError(".onnx.GraphProto.input: array expected");for(bt.input=[],vt=0;vt<st.input.length;++vt){if(typeof st.input[vt]!="object")throw TypeError(".onnx.GraphProto.input: object expected");bt.input[vt]=yt.onnx.ValueInfoProto.fromObject(st.input[vt])}}if(st.output){if(!Array.isArray(st.output))throw TypeError(".onnx.GraphProto.output: array expected");for(bt.output=[],vt=0;vt<st.output.length;++vt){if(typeof st.output[vt]!="object")throw TypeError(".onnx.GraphProto.output: object expected");bt.output[vt]=yt.onnx.ValueInfoProto.fromObject(st.output[vt])}}if(st.valueInfo){if(!Array.isArray(st.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(bt.valueInfo=[],vt=0;vt<st.valueInfo.length;++vt){if(typeof st.valueInfo[vt]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");bt.valueInfo[vt]=yt.onnx.ValueInfoProto.fromObject(st.valueInfo[vt])}}if(st.quantizationAnnotation){if(!Array.isArray(st.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(bt.quantizationAnnotation=[],vt=0;vt<st.quantizationAnnotation.length;++vt){if(typeof st.quantizationAnnotation[vt]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");bt.quantizationAnnotation[vt]=yt.onnx.TensorAnnotation.fromObject(st.quantizationAnnotation[vt])}}return bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};if((bt.arrays||bt.defaults)&&(vt.node=[],vt.initializer=[],vt.input=[],vt.output=[],vt.valueInfo=[],vt.quantizationAnnotation=[]),bt.defaults&&(vt.name="",vt.docString=""),st.node&&st.node.length){vt.node=[];for(var xt=0;xt<st.node.length;++xt)vt.node[xt]=yt.onnx.NodeProto.toObject(st.node[xt],bt)}if(st.name!=null&&st.hasOwnProperty("name")&&(vt.name=st.name),st.initializer&&st.initializer.length)for(vt.initializer=[],xt=0;xt<st.initializer.length;++xt)vt.initializer[xt]=yt.onnx.TensorProto.toObject(st.initializer[xt],bt);if(st.docString!=null&&st.hasOwnProperty("docString")&&(vt.docString=st.docString),st.input&&st.input.length)for(vt.input=[],xt=0;xt<st.input.length;++xt)vt.input[xt]=yt.onnx.ValueInfoProto.toObject(st.input[xt],bt);if(st.output&&st.output.length)for(vt.output=[],xt=0;xt<st.output.length;++xt)vt.output[xt]=yt.onnx.ValueInfoProto.toObject(st.output[xt],bt);if(st.valueInfo&&st.valueInfo.length)for(vt.valueInfo=[],xt=0;xt<st.valueInfo.length;++xt)vt.valueInfo[xt]=yt.onnx.ValueInfoProto.toObject(st.valueInfo[xt],bt);if(st.quantizationAnnotation&&st.quantizationAnnotation.length)for(vt.quantizationAnnotation=[],xt=0;xt<st.quantizationAnnotation.length;++xt)vt.quantizationAnnotation[xt]=yt.onnx.TensorAnnotation.toObject(st.quantizationAnnotation[xt],bt);return vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft}(),nt.TensorProto=function(){function ft(st){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.dims=gt.emptyArray,ft.prototype.dataType=0,ft.prototype.segment=null,ft.prototype.floatData=gt.emptyArray,ft.prototype.int32Data=gt.emptyArray,ft.prototype.stringData=gt.emptyArray,ft.prototype.int64Data=gt.emptyArray,ft.prototype.name="",ft.prototype.docString="",ft.prototype.rawData=gt.newBuffer([]),ft.prototype.externalData=gt.emptyArray,ft.prototype.dataLocation=0,ft.prototype.doubleData=gt.emptyArray,ft.prototype.uint64Data=gt.emptyArray,ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){if(bt||(bt=mt.create()),st.dims!=null&&st.dims.length){bt.uint32(10).fork();for(var vt=0;vt<st.dims.length;++vt)bt.int64(st.dims[vt]);bt.ldelim()}if(st.dataType!=null&&st.hasOwnProperty("dataType")&&bt.uint32(16).int32(st.dataType),st.segment!=null&&st.hasOwnProperty("segment")&&yt.onnx.TensorProto.Segment.encode(st.segment,bt.uint32(26).fork()).ldelim(),st.floatData!=null&&st.floatData.length){for(bt.uint32(34).fork(),vt=0;vt<st.floatData.length;++vt)bt.float(st.floatData[vt]);bt.ldelim()}if(st.int32Data!=null&&st.int32Data.length){for(bt.uint32(42).fork(),vt=0;vt<st.int32Data.length;++vt)bt.int32(st.int32Data[vt]);bt.ldelim()}if(st.stringData!=null&&st.stringData.length)for(vt=0;vt<st.stringData.length;++vt)bt.uint32(50).bytes(st.stringData[vt]);if(st.int64Data!=null&&st.int64Data.length){for(bt.uint32(58).fork(),vt=0;vt<st.int64Data.length;++vt)bt.int64(st.int64Data[vt]);bt.ldelim()}if(st.name!=null&&st.hasOwnProperty("name")&&bt.uint32(66).string(st.name),st.rawData!=null&&st.hasOwnProperty("rawData")&&bt.uint32(74).bytes(st.rawData),st.doubleData!=null&&st.doubleData.length){for(bt.uint32(82).fork(),vt=0;vt<st.doubleData.length;++vt)bt.double(st.doubleData[vt]);bt.ldelim()}if(st.uint64Data!=null&&st.uint64Data.length){for(bt.uint32(90).fork(),vt=0;vt<st.uint64Data.length;++vt)bt.uint64(st.uint64Data[vt]);bt.ldelim()}if(st.docString!=null&&st.hasOwnProperty("docString")&&bt.uint32(98).string(st.docString),st.externalData!=null&&st.externalData.length)for(vt=0;vt<st.externalData.length;++vt)yt.onnx.StringStringEntryProto.encode(st.externalData[vt],bt.uint32(106).fork()).ldelim();return st.dataLocation!=null&&st.hasOwnProperty("dataLocation")&&bt.uint32(112).int32(st.dataLocation),bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.TensorProto;st.pos<vt;){var wt=st.uint32();switch(wt>>>3){case 1:if(xt.dims&&xt.dims.length||(xt.dims=[]),(7&wt)==2)for(var St=st.uint32()+st.pos;st.pos<St;)xt.dims.push(st.int64());else xt.dims.push(st.int64());break;case 2:xt.dataType=st.int32();break;case 3:xt.segment=yt.onnx.TensorProto.Segment.decode(st,st.uint32());break;case 4:if(xt.floatData&&xt.floatData.length||(xt.floatData=[]),(7&wt)==2)for(St=st.uint32()+st.pos;st.pos<St;)xt.floatData.push(st.float());else xt.floatData.push(st.float());break;case 5:if(xt.int32Data&&xt.int32Data.length||(xt.int32Data=[]),(7&wt)==2)for(St=st.uint32()+st.pos;st.pos<St;)xt.int32Data.push(st.int32());else xt.int32Data.push(st.int32());break;case 6:xt.stringData&&xt.stringData.length||(xt.stringData=[]),xt.stringData.push(st.bytes());break;case 7:if(xt.int64Data&&xt.int64Data.length||(xt.int64Data=[]),(7&wt)==2)for(St=st.uint32()+st.pos;st.pos<St;)xt.int64Data.push(st.int64());else xt.int64Data.push(st.int64());break;case 8:xt.name=st.string();break;case 12:xt.docString=st.string();break;case 9:xt.rawData=st.bytes();break;case 13:xt.externalData&&xt.externalData.length||(xt.externalData=[]),xt.externalData.push(yt.onnx.StringStringEntryProto.decode(st,st.uint32()));break;case 14:xt.dataLocation=st.int32();break;case 10:if(xt.doubleData&&xt.doubleData.length||(xt.doubleData=[]),(7&wt)==2)for(St=st.uint32()+st.pos;st.pos<St;)xt.doubleData.push(st.double());else xt.doubleData.push(st.double());break;case 11:if(xt.uint64Data&&xt.uint64Data.length||(xt.uint64Data=[]),(7&wt)==2)for(St=st.uint32()+st.pos;st.pos<St;)xt.uint64Data.push(st.uint64());else xt.uint64Data.push(st.uint64());break;default:st.skipType(7&wt)}}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.dims!=null&&st.hasOwnProperty("dims")){if(!Array.isArray(st.dims))return"dims: array expected";for(var bt=0;bt<st.dims.length;++bt)if(!(gt.isInteger(st.dims[bt])||st.dims[bt]&&gt.isInteger(st.dims[bt].low)&&gt.isInteger(st.dims[bt].high)))return"dims: integer|Long[] expected"}if(st.dataType!=null&&st.hasOwnProperty("dataType")&&!gt.isInteger(st.dataType))return"dataType: integer expected";if(st.segment!=null&&st.hasOwnProperty("segment")&&(vt=yt.onnx.TensorProto.Segment.verify(st.segment)))return"segment."+vt;if(st.floatData!=null&&st.hasOwnProperty("floatData")){if(!Array.isArray(st.floatData))return"floatData: array expected";for(bt=0;bt<st.floatData.length;++bt)if(typeof st.floatData[bt]!="number")return"floatData: number[] expected"}if(st.int32Data!=null&&st.hasOwnProperty("int32Data")){if(!Array.isArray(st.int32Data))return"int32Data: array expected";for(bt=0;bt<st.int32Data.length;++bt)if(!gt.isInteger(st.int32Data[bt]))return"int32Data: integer[] expected"}if(st.stringData!=null&&st.hasOwnProperty("stringData")){if(!Array.isArray(st.stringData))return"stringData: array expected";for(bt=0;bt<st.stringData.length;++bt)if(!(st.stringData[bt]&&typeof st.stringData[bt].length=="number"||gt.isString(st.stringData[bt])))return"stringData: buffer[] expected"}if(st.int64Data!=null&&st.hasOwnProperty("int64Data")){if(!Array.isArray(st.int64Data))return"int64Data: array expected";for(bt=0;bt<st.int64Data.length;++bt)if(!(gt.isInteger(st.int64Data[bt])||st.int64Data[bt]&&gt.isInteger(st.int64Data[bt].low)&&gt.isInteger(st.int64Data[bt].high)))return"int64Data: integer|Long[] expected"}if(st.name!=null&&st.hasOwnProperty("name")&&!gt.isString(st.name))return"name: string expected";if(st.docString!=null&&st.hasOwnProperty("docString")&&!gt.isString(st.docString))return"docString: string expected";if(st.rawData!=null&&st.hasOwnProperty("rawData")&&!(st.rawData&&typeof st.rawData.length=="number"||gt.isString(st.rawData)))return"rawData: buffer expected";if(st.externalData!=null&&st.hasOwnProperty("externalData")){if(!Array.isArray(st.externalData))return"externalData: array expected";for(bt=0;bt<st.externalData.length;++bt){var vt;if(vt=yt.onnx.StringStringEntryProto.verify(st.externalData[bt]))return"externalData."+vt}}if(st.dataLocation!=null&&st.hasOwnProperty("dataLocation"))switch(st.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(st.doubleData!=null&&st.hasOwnProperty("doubleData")){if(!Array.isArray(st.doubleData))return"doubleData: array expected";for(bt=0;bt<st.doubleData.length;++bt)if(typeof st.doubleData[bt]!="number")return"doubleData: number[] expected"}if(st.uint64Data!=null&&st.hasOwnProperty("uint64Data")){if(!Array.isArray(st.uint64Data))return"uint64Data: array expected";for(bt=0;bt<st.uint64Data.length;++bt)if(!(gt.isInteger(st.uint64Data[bt])||st.uint64Data[bt]&&gt.isInteger(st.uint64Data[bt].low)&&gt.isInteger(st.uint64Data[bt].high)))return"uint64Data: integer|Long[] expected"}return null},ft.fromObject=function(st){if(st instanceof yt.onnx.TensorProto)return st;var bt=new yt.onnx.TensorProto;if(st.dims){if(!Array.isArray(st.dims))throw TypeError(".onnx.TensorProto.dims: array expected");bt.dims=[];for(var vt=0;vt<st.dims.length;++vt)gt.Long?(bt.dims[vt]=gt.Long.fromValue(st.dims[vt])).unsigned=!1:typeof st.dims[vt]=="string"?bt.dims[vt]=parseInt(st.dims[vt],10):typeof st.dims[vt]=="number"?bt.dims[vt]=st.dims[vt]:typeof st.dims[vt]=="object"&&(bt.dims[vt]=new gt.LongBits(st.dims[vt].low>>>0,st.dims[vt].high>>>0).toNumber())}if(st.dataType!=null&&(bt.dataType=0|st.dataType),st.segment!=null){if(typeof st.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");bt.segment=yt.onnx.TensorProto.Segment.fromObject(st.segment)}if(st.floatData){if(!Array.isArray(st.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(bt.floatData=[],vt=0;vt<st.floatData.length;++vt)bt.floatData[vt]=Number(st.floatData[vt])}if(st.int32Data){if(!Array.isArray(st.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(bt.int32Data=[],vt=0;vt<st.int32Data.length;++vt)bt.int32Data[vt]=0|st.int32Data[vt]}if(st.stringData){if(!Array.isArray(st.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(bt.stringData=[],vt=0;vt<st.stringData.length;++vt)typeof st.stringData[vt]=="string"?gt.base64.decode(st.stringData[vt],bt.stringData[vt]=gt.newBuffer(gt.base64.length(st.stringData[vt])),0):st.stringData[vt].length&&(bt.stringData[vt]=st.stringData[vt])}if(st.int64Data){if(!Array.isArray(st.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(bt.int64Data=[],vt=0;vt<st.int64Data.length;++vt)gt.Long?(bt.int64Data[vt]=gt.Long.fromValue(st.int64Data[vt])).unsigned=!1:typeof st.int64Data[vt]=="string"?bt.int64Data[vt]=parseInt(st.int64Data[vt],10):typeof st.int64Data[vt]=="number"?bt.int64Data[vt]=st.int64Data[vt]:typeof st.int64Data[vt]=="object"&&(bt.int64Data[vt]=new gt.LongBits(st.int64Data[vt].low>>>0,st.int64Data[vt].high>>>0).toNumber())}if(st.name!=null&&(bt.name=String(st.name)),st.docString!=null&&(bt.docString=String(st.docString)),st.rawData!=null&&(typeof st.rawData=="string"?gt.base64.decode(st.rawData,bt.rawData=gt.newBuffer(gt.base64.length(st.rawData)),0):st.rawData.length&&(bt.rawData=st.rawData)),st.externalData){if(!Array.isArray(st.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(bt.externalData=[],vt=0;vt<st.externalData.length;++vt){if(typeof st.externalData[vt]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");bt.externalData[vt]=yt.onnx.StringStringEntryProto.fromObject(st.externalData[vt])}}switch(st.dataLocation){case"DEFAULT":case 0:bt.dataLocation=0;break;case"EXTERNAL":case 1:bt.dataLocation=1}if(st.doubleData){if(!Array.isArray(st.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(bt.doubleData=[],vt=0;vt<st.doubleData.length;++vt)bt.doubleData[vt]=Number(st.doubleData[vt])}if(st.uint64Data){if(!Array.isArray(st.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(bt.uint64Data=[],vt=0;vt<st.uint64Data.length;++vt)gt.Long?(bt.uint64Data[vt]=gt.Long.fromValue(st.uint64Data[vt])).unsigned=!0:typeof st.uint64Data[vt]=="string"?bt.uint64Data[vt]=parseInt(st.uint64Data[vt],10):typeof st.uint64Data[vt]=="number"?bt.uint64Data[vt]=st.uint64Data[vt]:typeof st.uint64Data[vt]=="object"&&(bt.uint64Data[vt]=new gt.LongBits(st.uint64Data[vt].low>>>0,st.uint64Data[vt].high>>>0).toNumber(!0))}return bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};if((bt.arrays||bt.defaults)&&(vt.dims=[],vt.floatData=[],vt.int32Data=[],vt.stringData=[],vt.int64Data=[],vt.doubleData=[],vt.uint64Data=[],vt.externalData=[]),bt.defaults&&(vt.dataType=0,vt.segment=null,vt.name="",bt.bytes===String?vt.rawData="":(vt.rawData=[],bt.bytes!==Array&&(vt.rawData=gt.newBuffer(vt.rawData))),vt.docString="",vt.dataLocation=bt.enums===String?"DEFAULT":0),st.dims&&st.dims.length){vt.dims=[];for(var xt=0;xt<st.dims.length;++xt)typeof st.dims[xt]=="number"?vt.dims[xt]=bt.longs===String?String(st.dims[xt]):st.dims[xt]:vt.dims[xt]=bt.longs===String?gt.Long.prototype.toString.call(st.dims[xt]):bt.longs===Number?new gt.LongBits(st.dims[xt].low>>>0,st.dims[xt].high>>>0).toNumber():st.dims[xt]}if(st.dataType!=null&&st.hasOwnProperty("dataType")&&(vt.dataType=st.dataType),st.segment!=null&&st.hasOwnProperty("segment")&&(vt.segment=yt.onnx.TensorProto.Segment.toObject(st.segment,bt)),st.floatData&&st.floatData.length)for(vt.floatData=[],xt=0;xt<st.floatData.length;++xt)vt.floatData[xt]=bt.json&&!isFinite(st.floatData[xt])?String(st.floatData[xt]):st.floatData[xt];if(st.int32Data&&st.int32Data.length)for(vt.int32Data=[],xt=0;xt<st.int32Data.length;++xt)vt.int32Data[xt]=st.int32Data[xt];if(st.stringData&&st.stringData.length)for(vt.stringData=[],xt=0;xt<st.stringData.length;++xt)vt.stringData[xt]=bt.bytes===String?gt.base64.encode(st.stringData[xt],0,st.stringData[xt].length):bt.bytes===Array?Array.prototype.slice.call(st.stringData[xt]):st.stringData[xt];if(st.int64Data&&st.int64Data.length)for(vt.int64Data=[],xt=0;xt<st.int64Data.length;++xt)typeof st.int64Data[xt]=="number"?vt.int64Data[xt]=bt.longs===String?String(st.int64Data[xt]):st.int64Data[xt]:vt.int64Data[xt]=bt.longs===String?gt.Long.prototype.toString.call(st.int64Data[xt]):bt.longs===Number?new gt.LongBits(st.int64Data[xt].low>>>0,st.int64Data[xt].high>>>0).toNumber():st.int64Data[xt];if(st.name!=null&&st.hasOwnProperty("name")&&(vt.name=st.name),st.rawData!=null&&st.hasOwnProperty("rawData")&&(vt.rawData=bt.bytes===String?gt.base64.encode(st.rawData,0,st.rawData.length):bt.bytes===Array?Array.prototype.slice.call(st.rawData):st.rawData),st.doubleData&&st.doubleData.length)for(vt.doubleData=[],xt=0;xt<st.doubleData.length;++xt)vt.doubleData[xt]=bt.json&&!isFinite(st.doubleData[xt])?String(st.doubleData[xt]):st.doubleData[xt];if(st.uint64Data&&st.uint64Data.length)for(vt.uint64Data=[],xt=0;xt<st.uint64Data.length;++xt)typeof st.uint64Data[xt]=="number"?vt.uint64Data[xt]=bt.longs===String?String(st.uint64Data[xt]):st.uint64Data[xt]:vt.uint64Data[xt]=bt.longs===String?gt.Long.prototype.toString.call(st.uint64Data[xt]):bt.longs===Number?new gt.LongBits(st.uint64Data[xt].low>>>0,st.uint64Data[xt].high>>>0).toNumber(!0):st.uint64Data[xt];if(st.docString!=null&&st.hasOwnProperty("docString")&&(vt.docString=st.docString),st.externalData&&st.externalData.length)for(vt.externalData=[],xt=0;xt<st.externalData.length;++xt)vt.externalData[xt]=yt.onnx.StringStringEntryProto.toObject(st.externalData[xt],bt);return st.dataLocation!=null&&st.hasOwnProperty("dataLocation")&&(vt.dataLocation=bt.enums===String?yt.onnx.TensorProto.DataLocation[st.dataLocation]:st.dataLocation),vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft.DataType=function(){var st={},bt=Object.create(st);return bt[st[0]="UNDEFINED"]=0,bt[st[1]="FLOAT"]=1,bt[st[2]="UINT8"]=2,bt[st[3]="INT8"]=3,bt[st[4]="UINT16"]=4,bt[st[5]="INT16"]=5,bt[st[6]="INT32"]=6,bt[st[7]="INT64"]=7,bt[st[8]="STRING"]=8,bt[st[9]="BOOL"]=9,bt[st[10]="FLOAT16"]=10,bt[st[11]="DOUBLE"]=11,bt[st[12]="UINT32"]=12,bt[st[13]="UINT64"]=13,bt[st[14]="COMPLEX64"]=14,bt[st[15]="COMPLEX128"]=15,bt[st[16]="BFLOAT16"]=16,bt}(),ft.Segment=function(){function st(bt){if(bt)for(var vt=Object.keys(bt),xt=0;xt<vt.length;++xt)bt[vt[xt]]!=null&&(this[vt[xt]]=bt[vt[xt]])}return st.prototype.begin=gt.Long?gt.Long.fromBits(0,0,!1):0,st.prototype.end=gt.Long?gt.Long.fromBits(0,0,!1):0,st.create=function(bt){return new st(bt)},st.encode=function(bt,vt){return vt||(vt=mt.create()),bt.begin!=null&&bt.hasOwnProperty("begin")&&vt.uint32(8).int64(bt.begin),bt.end!=null&&bt.hasOwnProperty("end")&&vt.uint32(16).int64(bt.end),vt},st.encodeDelimited=function(bt,vt){return this.encode(bt,vt).ldelim()},st.decode=function(bt,vt){bt instanceof ht||(bt=ht.create(bt));for(var xt=vt===void 0?bt.len:bt.pos+vt,wt=new yt.onnx.TensorProto.Segment;bt.pos<xt;){var St=bt.uint32();switch(St>>>3){case 1:wt.begin=bt.int64();break;case 2:wt.end=bt.int64();break;default:bt.skipType(7&St)}}return wt},st.decodeDelimited=function(bt){return bt instanceof ht||(bt=new ht(bt)),this.decode(bt,bt.uint32())},st.verify=function(bt){return typeof bt!="object"||bt===null?"object expected":bt.begin!=null&&bt.hasOwnProperty("begin")&&!(gt.isInteger(bt.begin)||bt.begin&&gt.isInteger(bt.begin.low)&&gt.isInteger(bt.begin.high))?"begin: integer|Long expected":bt.end!=null&&bt.hasOwnProperty("end")&&!(gt.isInteger(bt.end)||bt.end&&gt.isInteger(bt.end.low)&&gt.isInteger(bt.end.high))?"end: integer|Long expected":null},st.fromObject=function(bt){if(bt instanceof yt.onnx.TensorProto.Segment)return bt;var vt=new yt.onnx.TensorProto.Segment;return bt.begin!=null&&(gt.Long?(vt.begin=gt.Long.fromValue(bt.begin)).unsigned=!1:typeof bt.begin=="string"?vt.begin=parseInt(bt.begin,10):typeof bt.begin=="number"?vt.begin=bt.begin:typeof bt.begin=="object"&&(vt.begin=new gt.LongBits(bt.begin.low>>>0,bt.begin.high>>>0).toNumber())),bt.end!=null&&(gt.Long?(vt.end=gt.Long.fromValue(bt.end)).unsigned=!1:typeof bt.end=="string"?vt.end=parseInt(bt.end,10):typeof bt.end=="number"?vt.end=bt.end:typeof bt.end=="object"&&(vt.end=new gt.LongBits(bt.end.low>>>0,bt.end.high>>>0).toNumber())),vt},st.toObject=function(bt,vt){vt||(vt={});var xt={};if(vt.defaults){if(gt.Long){var wt=new gt.Long(0,0,!1);xt.begin=vt.longs===String?wt.toString():vt.longs===Number?wt.toNumber():wt}else xt.begin=vt.longs===String?"0":0;gt.Long?(wt=new gt.Long(0,0,!1),xt.end=vt.longs===String?wt.toString():vt.longs===Number?wt.toNumber():wt):xt.end=vt.longs===String?"0":0}return bt.begin!=null&&bt.hasOwnProperty("begin")&&(typeof bt.begin=="number"?xt.begin=vt.longs===String?String(bt.begin):bt.begin:xt.begin=vt.longs===String?gt.Long.prototype.toString.call(bt.begin):vt.longs===Number?new gt.LongBits(bt.begin.low>>>0,bt.begin.high>>>0).toNumber():bt.begin),bt.end!=null&&bt.hasOwnProperty("end")&&(typeof bt.end=="number"?xt.end=vt.longs===String?String(bt.end):bt.end:xt.end=vt.longs===String?gt.Long.prototype.toString.call(bt.end):vt.longs===Number?new gt.LongBits(bt.end.low>>>0,bt.end.high>>>0).toNumber():bt.end),xt},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st}(),ft.DataLocation=function(){var st={},bt=Object.create(st);return bt[st[0]="DEFAULT"]=0,bt[st[1]="EXTERNAL"]=1,bt}(),ft}(),nt.TensorShapeProto=function(){function ft(st){if(this.dim=[],st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.dim=gt.emptyArray,ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){if(bt||(bt=mt.create()),st.dim!=null&&st.dim.length)for(var vt=0;vt<st.dim.length;++vt)yt.onnx.TensorShapeProto.Dimension.encode(st.dim[vt],bt.uint32(10).fork()).ldelim();return bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.TensorShapeProto;st.pos<vt;){var wt=st.uint32();wt>>>3==1?(xt.dim&&xt.dim.length||(xt.dim=[]),xt.dim.push(yt.onnx.TensorShapeProto.Dimension.decode(st,st.uint32()))):st.skipType(7&wt)}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.dim!=null&&st.hasOwnProperty("dim")){if(!Array.isArray(st.dim))return"dim: array expected";for(var bt=0;bt<st.dim.length;++bt){var vt=yt.onnx.TensorShapeProto.Dimension.verify(st.dim[bt]);if(vt)return"dim."+vt}}return null},ft.fromObject=function(st){if(st instanceof yt.onnx.TensorShapeProto)return st;var bt=new yt.onnx.TensorShapeProto;if(st.dim){if(!Array.isArray(st.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");bt.dim=[];for(var vt=0;vt<st.dim.length;++vt){if(typeof st.dim[vt]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");bt.dim[vt]=yt.onnx.TensorShapeProto.Dimension.fromObject(st.dim[vt])}}return bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};if((bt.arrays||bt.defaults)&&(vt.dim=[]),st.dim&&st.dim.length){vt.dim=[];for(var xt=0;xt<st.dim.length;++xt)vt.dim[xt]=yt.onnx.TensorShapeProto.Dimension.toObject(st.dim[xt],bt)}return vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft.Dimension=function(){function st(vt){if(vt)for(var xt=Object.keys(vt),wt=0;wt<xt.length;++wt)vt[xt[wt]]!=null&&(this[xt[wt]]=vt[xt[wt]])}var bt;return st.prototype.dimValue=gt.Long?gt.Long.fromBits(0,0,!1):0,st.prototype.dimParam="",st.prototype.denotation="",Object.defineProperty(st.prototype,"value",{get:gt.oneOfGetter(bt=["dimValue","dimParam"]),set:gt.oneOfSetter(bt)}),st.create=function(vt){return new st(vt)},st.encode=function(vt,xt){return xt||(xt=mt.create()),vt.dimValue!=null&&vt.hasOwnProperty("dimValue")&&xt.uint32(8).int64(vt.dimValue),vt.dimParam!=null&&vt.hasOwnProperty("dimParam")&&xt.uint32(18).string(vt.dimParam),vt.denotation!=null&&vt.hasOwnProperty("denotation")&&xt.uint32(26).string(vt.denotation),xt},st.encodeDelimited=function(vt,xt){return this.encode(vt,xt).ldelim()},st.decode=function(vt,xt){vt instanceof ht||(vt=ht.create(vt));for(var wt=xt===void 0?vt.len:vt.pos+xt,St=new yt.onnx.TensorShapeProto.Dimension;vt.pos<wt;){var _t=vt.uint32();switch(_t>>>3){case 1:St.dimValue=vt.int64();break;case 2:St.dimParam=vt.string();break;case 3:St.denotation=vt.string();break;default:vt.skipType(7&_t)}}return St},st.decodeDelimited=function(vt){return vt instanceof ht||(vt=new ht(vt)),this.decode(vt,vt.uint32())},st.verify=function(vt){if(typeof vt!="object"||vt===null)return"object expected";var xt={};if(vt.dimValue!=null&&vt.hasOwnProperty("dimValue")&&(xt.value=1,!(gt.isInteger(vt.dimValue)||vt.dimValue&&gt.isInteger(vt.dimValue.low)&&gt.isInteger(vt.dimValue.high))))return"dimValue: integer|Long expected";if(vt.dimParam!=null&&vt.hasOwnProperty("dimParam")){if(xt.value===1)return"value: multiple values";if(xt.value=1,!gt.isString(vt.dimParam))return"dimParam: string expected"}return vt.denotation!=null&&vt.hasOwnProperty("denotation")&&!gt.isString(vt.denotation)?"denotation: string expected":null},st.fromObject=function(vt){if(vt instanceof yt.onnx.TensorShapeProto.Dimension)return vt;var xt=new yt.onnx.TensorShapeProto.Dimension;return vt.dimValue!=null&&(gt.Long?(xt.dimValue=gt.Long.fromValue(vt.dimValue)).unsigned=!1:typeof vt.dimValue=="string"?xt.dimValue=parseInt(vt.dimValue,10):typeof vt.dimValue=="number"?xt.dimValue=vt.dimValue:typeof vt.dimValue=="object"&&(xt.dimValue=new gt.LongBits(vt.dimValue.low>>>0,vt.dimValue.high>>>0).toNumber())),vt.dimParam!=null&&(xt.dimParam=String(vt.dimParam)),vt.denotation!=null&&(xt.denotation=String(vt.denotation)),xt},st.toObject=function(vt,xt){xt||(xt={});var wt={};return xt.defaults&&(wt.denotation=""),vt.dimValue!=null&&vt.hasOwnProperty("dimValue")&&(typeof vt.dimValue=="number"?wt.dimValue=xt.longs===String?String(vt.dimValue):vt.dimValue:wt.dimValue=xt.longs===String?gt.Long.prototype.toString.call(vt.dimValue):xt.longs===Number?new gt.LongBits(vt.dimValue.low>>>0,vt.dimValue.high>>>0).toNumber():vt.dimValue,xt.oneofs&&(wt.value="dimValue")),vt.dimParam!=null&&vt.hasOwnProperty("dimParam")&&(wt.dimParam=vt.dimParam,xt.oneofs&&(wt.value="dimParam")),vt.denotation!=null&&vt.hasOwnProperty("denotation")&&(wt.denotation=vt.denotation),wt},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st}(),ft}(),nt.TypeProto=function(){function ft(bt){if(bt)for(var vt=Object.keys(bt),xt=0;xt<vt.length;++xt)bt[vt[xt]]!=null&&(this[vt[xt]]=bt[vt[xt]])}var st;return ft.prototype.tensorType=null,ft.prototype.denotation="",Object.defineProperty(ft.prototype,"value",{get:gt.oneOfGetter(st=["tensorType"]),set:gt.oneOfSetter(st)}),ft.create=function(bt){return new ft(bt)},ft.encode=function(bt,vt){return vt||(vt=mt.create()),bt.tensorType!=null&&bt.hasOwnProperty("tensorType")&&yt.onnx.TypeProto.Tensor.encode(bt.tensorType,vt.uint32(10).fork()).ldelim(),bt.denotation!=null&&bt.hasOwnProperty("denotation")&&vt.uint32(50).string(bt.denotation),vt},ft.encodeDelimited=function(bt,vt){return this.encode(bt,vt).ldelim()},ft.decode=function(bt,vt){bt instanceof ht||(bt=ht.create(bt));for(var xt=vt===void 0?bt.len:bt.pos+vt,wt=new yt.onnx.TypeProto;bt.pos<xt;){var St=bt.uint32();switch(St>>>3){case 1:wt.tensorType=yt.onnx.TypeProto.Tensor.decode(bt,bt.uint32());break;case 6:wt.denotation=bt.string();break;default:bt.skipType(7&St)}}return wt},ft.decodeDelimited=function(bt){return bt instanceof ht||(bt=new ht(bt)),this.decode(bt,bt.uint32())},ft.verify=function(bt){if(typeof bt!="object"||bt===null)return"object expected";if(bt.tensorType!=null&&bt.hasOwnProperty("tensorType")){var vt=yt.onnx.TypeProto.Tensor.verify(bt.tensorType);if(vt)return"tensorType."+vt}return bt.denotation!=null&&bt.hasOwnProperty("denotation")&&!gt.isString(bt.denotation)?"denotation: string expected":null},ft.fromObject=function(bt){if(bt instanceof yt.onnx.TypeProto)return bt;var vt=new yt.onnx.TypeProto;if(bt.tensorType!=null){if(typeof bt.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");vt.tensorType=yt.onnx.TypeProto.Tensor.fromObject(bt.tensorType)}return bt.denotation!=null&&(vt.denotation=String(bt.denotation)),vt},ft.toObject=function(bt,vt){vt||(vt={});var xt={};return vt.defaults&&(xt.denotation=""),bt.tensorType!=null&&bt.hasOwnProperty("tensorType")&&(xt.tensorType=yt.onnx.TypeProto.Tensor.toObject(bt.tensorType,vt),vt.oneofs&&(xt.value="tensorType")),bt.denotation!=null&&bt.hasOwnProperty("denotation")&&(xt.denotation=bt.denotation),xt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft.Tensor=function(){function bt(vt){if(vt)for(var xt=Object.keys(vt),wt=0;wt<xt.length;++wt)vt[xt[wt]]!=null&&(this[xt[wt]]=vt[xt[wt]])}return bt.prototype.elemType=0,bt.prototype.shape=null,bt.create=function(vt){return new bt(vt)},bt.encode=function(vt,xt){return xt||(xt=mt.create()),vt.elemType!=null&&vt.hasOwnProperty("elemType")&&xt.uint32(8).int32(vt.elemType),vt.shape!=null&&vt.hasOwnProperty("shape")&&yt.onnx.TensorShapeProto.encode(vt.shape,xt.uint32(18).fork()).ldelim(),xt},bt.encodeDelimited=function(vt,xt){return this.encode(vt,xt).ldelim()},bt.decode=function(vt,xt){vt instanceof ht||(vt=ht.create(vt));for(var wt=xt===void 0?vt.len:vt.pos+xt,St=new yt.onnx.TypeProto.Tensor;vt.pos<wt;){var _t=vt.uint32();switch(_t>>>3){case 1:St.elemType=vt.int32();break;case 2:St.shape=yt.onnx.TensorShapeProto.decode(vt,vt.uint32());break;default:vt.skipType(7&_t)}}return St},bt.decodeDelimited=function(vt){return vt instanceof ht||(vt=new ht(vt)),this.decode(vt,vt.uint32())},bt.verify=function(vt){if(typeof vt!="object"||vt===null)return"object expected";if(vt.elemType!=null&&vt.hasOwnProperty("elemType")&&!gt.isInteger(vt.elemType))return"elemType: integer expected";if(vt.shape!=null&&vt.hasOwnProperty("shape")){var xt=yt.onnx.TensorShapeProto.verify(vt.shape);if(xt)return"shape."+xt}return null},bt.fromObject=function(vt){if(vt instanceof yt.onnx.TypeProto.Tensor)return vt;var xt=new yt.onnx.TypeProto.Tensor;if(vt.elemType!=null&&(xt.elemType=0|vt.elemType),vt.shape!=null){if(typeof vt.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");xt.shape=yt.onnx.TensorShapeProto.fromObject(vt.shape)}return xt},bt.toObject=function(vt,xt){xt||(xt={});var wt={};return xt.defaults&&(wt.elemType=0,wt.shape=null),vt.elemType!=null&&vt.hasOwnProperty("elemType")&&(wt.elemType=vt.elemType),vt.shape!=null&&vt.hasOwnProperty("shape")&&(wt.shape=yt.onnx.TensorShapeProto.toObject(vt.shape,xt)),wt},bt.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},bt}(),ft}(),nt.OperatorSetIdProto=function(){function ft(st){if(st)for(var bt=Object.keys(st),vt=0;vt<bt.length;++vt)st[bt[vt]]!=null&&(this[bt[vt]]=st[bt[vt]])}return ft.prototype.domain="",ft.prototype.version=gt.Long?gt.Long.fromBits(0,0,!1):0,ft.create=function(st){return new ft(st)},ft.encode=function(st,bt){return bt||(bt=mt.create()),st.domain!=null&&st.hasOwnProperty("domain")&&bt.uint32(10).string(st.domain),st.version!=null&&st.hasOwnProperty("version")&&bt.uint32(16).int64(st.version),bt},ft.encodeDelimited=function(st,bt){return this.encode(st,bt).ldelim()},ft.decode=function(st,bt){st instanceof ht||(st=ht.create(st));for(var vt=bt===void 0?st.len:st.pos+bt,xt=new yt.onnx.OperatorSetIdProto;st.pos<vt;){var wt=st.uint32();switch(wt>>>3){case 1:xt.domain=st.string();break;case 2:xt.version=st.int64();break;default:st.skipType(7&wt)}}return xt},ft.decodeDelimited=function(st){return st instanceof ht||(st=new ht(st)),this.decode(st,st.uint32())},ft.verify=function(st){return typeof st!="object"||st===null?"object expected":st.domain!=null&&st.hasOwnProperty("domain")&&!gt.isString(st.domain)?"domain: string expected":st.version!=null&&st.hasOwnProperty("version")&&!(gt.isInteger(st.version)||st.version&&gt.isInteger(st.version.low)&&gt.isInteger(st.version.high))?"version: integer|Long expected":null},ft.fromObject=function(st){if(st instanceof yt.onnx.OperatorSetIdProto)return st;var bt=new yt.onnx.OperatorSetIdProto;return st.domain!=null&&(bt.domain=String(st.domain)),st.version!=null&&(gt.Long?(bt.version=gt.Long.fromValue(st.version)).unsigned=!1:typeof st.version=="string"?bt.version=parseInt(st.version,10):typeof st.version=="number"?bt.version=st.version:typeof st.version=="object"&&(bt.version=new gt.LongBits(st.version.low>>>0,st.version.high>>>0).toNumber())),bt},ft.toObject=function(st,bt){bt||(bt={});var vt={};if(bt.defaults)if(vt.domain="",gt.Long){var xt=new gt.Long(0,0,!1);vt.version=bt.longs===String?xt.toString():bt.longs===Number?xt.toNumber():xt}else vt.version=bt.longs===String?"0":0;return st.domain!=null&&st.hasOwnProperty("domain")&&(vt.domain=st.domain),st.version!=null&&st.hasOwnProperty("version")&&(typeof st.version=="number"?vt.version=bt.longs===String?String(st.version):st.version:vt.version=bt.longs===String?gt.Long.prototype.toString.call(st.version):bt.longs===Number?new gt.LongBits(st.version.low>>>0,st.version.high>>>0).toNumber():st.version),vt},ft.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ft}(),nt),s.exports=yt},2100:(s,e,d)=>{s.exports=d(9482)},9482:(s,e,d)=>{var b=e;function tt(){b.util._configure(),b.Writer._configure(b.BufferWriter),b.Reader._configure(b.BufferReader)}b.build="minimal",b.Writer=d(1173),b.BufferWriter=d(3155),b.Reader=d(1408),b.BufferReader=d(593),b.util=d(9693),b.rpc=d(5994),b.roots=d(5054),b.configure=tt,tt()},1408:(s,e,d)=>{s.exports=mt;var b,tt=d(9693),nt=tt.LongBits,ot=tt.utf8;function ht(xt,wt){return RangeError("index out of range: "+xt.pos+" + "+(wt||1)+" > "+xt.len)}function mt(xt){this.buf=xt,this.pos=0,this.len=xt.length}var gt,yt=typeof Uint8Array<"u"?function(xt){if(xt instanceof Uint8Array||Array.isArray(xt))return new mt(xt);throw Error("illegal buffer")}:function(xt){if(Array.isArray(xt))return new mt(xt);throw Error("illegal buffer")},ft=function(){return tt.Buffer?function(xt){return(mt.create=function(wt){return tt.Buffer.isBuffer(wt)?new b(wt):yt(wt)})(xt)}:yt};function st(){var xt=new nt(0,0),wt=0;if(!(this.len-this.pos>4)){for(;wt<3;++wt){if(this.pos>=this.len)throw ht(this);if(xt.lo=(xt.lo|(127&this.buf[this.pos])<<7*wt)>>>0,this.buf[this.pos++]<128)return xt}return xt.lo=(xt.lo|(127&this.buf[this.pos++])<<7*wt)>>>0,xt}for(;wt<4;++wt)if(xt.lo=(xt.lo|(127&this.buf[this.pos])<<7*wt)>>>0,this.buf[this.pos++]<128)return xt;if(xt.lo=(xt.lo|(127&this.buf[this.pos])<<28)>>>0,xt.hi=(xt.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return xt;if(wt=0,this.len-this.pos>4){for(;wt<5;++wt)if(xt.hi=(xt.hi|(127&this.buf[this.pos])<<7*wt+3)>>>0,this.buf[this.pos++]<128)return xt}else for(;wt<5;++wt){if(this.pos>=this.len)throw ht(this);if(xt.hi=(xt.hi|(127&this.buf[this.pos])<<7*wt+3)>>>0,this.buf[this.pos++]<128)return xt}throw Error("invalid varint encoding")}function bt(xt,wt){return(xt[wt-4]|xt[wt-3]<<8|xt[wt-2]<<16|xt[wt-1]<<24)>>>0}function vt(){if(this.pos+8>this.len)throw ht(this,8);return new nt(bt(this.buf,this.pos+=4),bt(this.buf,this.pos+=4))}mt.create=ft(),mt.prototype._slice=tt.Array.prototype.subarray||tt.Array.prototype.slice,mt.prototype.uint32=(gt=4294967295,function(){if(gt=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(gt=(gt|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(gt=(gt|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(gt=(gt|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(gt=(gt|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return gt;if((this.pos+=5)>this.len)throw this.pos=this.len,ht(this,10);return gt}),mt.prototype.int32=function(){return 0|this.uint32()},mt.prototype.sint32=function(){var xt=this.uint32();return xt>>>1^-(1&xt)|0},mt.prototype.bool=function(){return this.uint32()!==0},mt.prototype.fixed32=function(){if(this.pos+4>this.len)throw ht(this,4);return bt(this.buf,this.pos+=4)},mt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ht(this,4);return 0|bt(this.buf,this.pos+=4)},mt.prototype.float=function(){if(this.pos+4>this.len)throw ht(this,4);var xt=tt.float.readFloatLE(this.buf,this.pos);return this.pos+=4,xt},mt.prototype.double=function(){if(this.pos+8>this.len)throw ht(this,4);var xt=tt.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,xt},mt.prototype.bytes=function(){var xt=this.uint32(),wt=this.pos,St=this.pos+xt;if(St>this.len)throw ht(this,xt);return this.pos+=xt,Array.isArray(this.buf)?this.buf.slice(wt,St):wt===St?new this.buf.constructor(0):this._slice.call(this.buf,wt,St)},mt.prototype.string=function(){var xt=this.bytes();return ot.read(xt,0,xt.length)},mt.prototype.skip=function(xt){if(typeof xt=="number"){if(this.pos+xt>this.len)throw ht(this,xt);this.pos+=xt}else do if(this.pos>=this.len)throw ht(this);while(128&this.buf[this.pos++]);return this},mt.prototype.skipType=function(xt){switch(xt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(xt=7&this.uint32())!=4;)this.skipType(xt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+xt+" at offset "+this.pos)}return this},mt._configure=function(xt){b=xt,mt.create=ft(),b._configure();var wt=tt.Long?"toLong":"toNumber";tt.merge(mt.prototype,{int64:function(){return st.call(this)[wt](!1)},uint64:function(){return st.call(this)[wt](!0)},sint64:function(){return st.call(this).zzDecode()[wt](!1)},fixed64:function(){return vt.call(this)[wt](!0)},sfixed64:function(){return vt.call(this)[wt](!1)}})}},593:(s,e,d)=>{s.exports=nt;var b=d(1408);(nt.prototype=Object.create(b.prototype)).constructor=nt;var tt=d(9693);function nt(ot){b.call(this,ot)}nt._configure=function(){tt.Buffer&&(nt.prototype._slice=tt.Buffer.prototype.slice)},nt.prototype.string=function(){var ot=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+ot,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+ot,this.len))},nt._configure()},5054:s=>{s.exports={}},5994:(s,e,d)=>{e.Service=d(7948)},7948:(s,e,d)=>{s.exports=tt;var b=d(9693);function tt(nt,ot,ht){if(typeof nt!="function")throw TypeError("rpcImpl must be a function");b.EventEmitter.call(this),this.rpcImpl=nt,this.requestDelimited=!!ot,this.responseDelimited=!!ht}(tt.prototype=Object.create(b.EventEmitter.prototype)).constructor=tt,tt.prototype.rpcCall=function nt(ot,ht,mt,gt,yt){if(!gt)throw TypeError("request must be specified");var ft=this;if(!yt)return b.asPromise(nt,ft,ot,ht,mt,gt);if(ft.rpcImpl)try{return ft.rpcImpl(ot,ht[ft.requestDelimited?"encodeDelimited":"encode"](gt).finish(),function(st,bt){if(st)return ft.emit("error",st,ot),yt(st);if(bt!==null){if(!(bt instanceof mt))try{bt=mt[ft.responseDelimited?"decodeDelimited":"decode"](bt)}catch(vt){return ft.emit("error",vt,ot),yt(vt)}return ft.emit("data",bt,ot),yt(null,bt)}ft.end(!0)})}catch(st){return ft.emit("error",st,ot),void setTimeout(function(){yt(st)},0)}else setTimeout(function(){yt(Error("already ended"))},0)},tt.prototype.end=function(nt){return this.rpcImpl&&(nt||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(s,e,d)=>{s.exports=tt;var b=d(9693);function tt(mt,gt){this.lo=mt>>>0,this.hi=gt>>>0}var nt=tt.zero=new tt(0,0);nt.toNumber=function(){return 0},nt.zzEncode=nt.zzDecode=function(){return this},nt.length=function(){return 1};var ot=tt.zeroHash="\0\0\0\0\0\0\0\0";tt.fromNumber=function(mt){if(mt===0)return nt;var gt=mt<0;gt&&(mt=-mt);var yt=mt>>>0,ft=(mt-yt)/4294967296>>>0;return gt&&(ft=~ft>>>0,yt=~yt>>>0,++yt>4294967295&&(yt=0,++ft>4294967295&&(ft=0))),new tt(yt,ft)},tt.from=function(mt){if(typeof mt=="number")return tt.fromNumber(mt);if(b.isString(mt)){if(!b.Long)return tt.fromNumber(parseInt(mt,10));mt=b.Long.fromString(mt)}return mt.low||mt.high?new tt(mt.low>>>0,mt.high>>>0):nt},tt.prototype.toNumber=function(mt){if(!mt&&this.hi>>>31){var gt=1+~this.lo>>>0,yt=~this.hi>>>0;return gt||(yt=yt+1>>>0),-(gt+4294967296*yt)}return this.lo+4294967296*this.hi},tt.prototype.toLong=function(mt){return b.Long?new b.Long(0|this.lo,0|this.hi,!!mt):{low:0|this.lo,high:0|this.hi,unsigned:!!mt}};var ht=String.prototype.charCodeAt;tt.fromHash=function(mt){return mt===ot?nt:new tt((ht.call(mt,0)|ht.call(mt,1)<<8|ht.call(mt,2)<<16|ht.call(mt,3)<<24)>>>0,(ht.call(mt,4)|ht.call(mt,5)<<8|ht.call(mt,6)<<16|ht.call(mt,7)<<24)>>>0)},tt.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},tt.prototype.zzEncode=function(){var mt=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^mt)>>>0,this.lo=(this.lo<<1^mt)>>>0,this},tt.prototype.zzDecode=function(){var mt=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^mt)>>>0,this.hi=(this.hi>>>1^mt)>>>0,this},tt.prototype.length=function(){var mt=this.lo,gt=(this.lo>>>28|this.hi<<4)>>>0,yt=this.hi>>>24;return yt===0?gt===0?mt<16384?mt<128?1:2:mt<2097152?3:4:gt<16384?gt<128?5:6:gt<2097152?7:8:yt<128?9:10}},9693:function(s,e,d){var b=e;function tt(ot,ht,mt){for(var gt=Object.keys(ht),yt=0;yt<gt.length;++yt)ot[gt[yt]]!==void 0&&mt||(ot[gt[yt]]=ht[gt[yt]]);return ot}function nt(ot){function ht(mt,gt){if(!(this instanceof ht))return new ht(mt,gt);Object.defineProperty(this,"message",{get:function(){return mt}}),Error.captureStackTrace?Error.captureStackTrace(this,ht):Object.defineProperty(this,"stack",{value:new Error().stack||""}),gt&&tt(this,gt)}return(ht.prototype=Object.create(Error.prototype)).constructor=ht,Object.defineProperty(ht.prototype,"name",{get:function(){return ot}}),ht.prototype.toString=function(){return this.name+": "+this.message},ht}b.asPromise=d(4537),b.base64=d(7419),b.EventEmitter=d(9211),b.float=d(945),b.inquire=d(7199),b.utf8=d(4997),b.pool=d(6662),b.LongBits=d(1945),b.isNode=!!(d.g!==void 0&&d.g&&d.g.process&&d.g.process.versions&&d.g.process.versions.node),b.global=b.isNode&&d.g||typeof window<"u"&&window||typeof self<"u"&&self||this,b.emptyArray=Object.freeze?Object.freeze([]):[],b.emptyObject=Object.freeze?Object.freeze({}):{},b.isInteger=Number.isInteger||function(ot){return typeof ot=="number"&&isFinite(ot)&&Math.floor(ot)===ot},b.isString=function(ot){return typeof ot=="string"||ot instanceof String},b.isObject=function(ot){return ot&&typeof ot=="object"},b.isset=b.isSet=function(ot,ht){var mt=ot[ht];return!(mt==null||!ot.hasOwnProperty(ht))&&(typeof mt!="object"||(Array.isArray(mt)?mt.length:Object.keys(mt).length)>0)},b.Buffer=function(){try{var ot=b.inquire("buffer").Buffer;return ot.prototype.utf8Write?ot:null}catch{return null}}(),b._Buffer_from=null,b._Buffer_allocUnsafe=null,b.newBuffer=function(ot){return typeof ot=="number"?b.Buffer?b._Buffer_allocUnsafe(ot):new b.Array(ot):b.Buffer?b._Buffer_from(ot):typeof Uint8Array>"u"?ot:new Uint8Array(ot)},b.Array=typeof Uint8Array<"u"?Uint8Array:Array,b.Long=b.global.dcodeIO&&b.global.dcodeIO.Long||b.global.Long||b.inquire("long"),b.key2Re=/^true|false|0|1$/,b.key32Re=/^-?(?:0|[1-9][0-9]*)$/,b.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,b.longToHash=function(ot){return ot?b.LongBits.from(ot).toHash():b.LongBits.zeroHash},b.longFromHash=function(ot,ht){var mt=b.LongBits.fromHash(ot);return b.Long?b.Long.fromBits(mt.lo,mt.hi,ht):mt.toNumber(!!ht)},b.merge=tt,b.lcFirst=function(ot){return ot.charAt(0).toLowerCase()+ot.substring(1)},b.newError=nt,b.ProtocolError=nt("ProtocolError"),b.oneOfGetter=function(ot){for(var ht={},mt=0;mt<ot.length;++mt)ht[ot[mt]]=1;return function(){for(var gt=Object.keys(this),yt=gt.length-1;yt>-1;--yt)if(ht[gt[yt]]===1&&this[gt[yt]]!==void 0&&this[gt[yt]]!==null)return gt[yt]}},b.oneOfSetter=function(ot){return function(ht){for(var mt=0;mt<ot.length;++mt)ot[mt]!==ht&&delete this[ot[mt]]}},b.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},b._configure=function(){var ot=b.Buffer;ot?(b._Buffer_from=ot.from!==Uint8Array.from&&ot.from||function(ht,mt){return new ot(ht,mt)},b._Buffer_allocUnsafe=ot.allocUnsafe||function(ht){return new ot(ht)}):b._Buffer_from=b._Buffer_allocUnsafe=null}},1173:(s,e,d)=>{s.exports=ft;var b,tt=d(9693),nt=tt.LongBits,ot=tt.base64,ht=tt.utf8;function mt(_t,Tt,Et){this.fn=_t,this.len=Tt,this.next=void 0,this.val=Et}function gt(){}function yt(_t){this.head=_t.head,this.tail=_t.tail,this.len=_t.len,this.next=_t.states}function ft(){this.len=0,this.head=new mt(gt,0,0),this.tail=this.head,this.states=null}var st=function(){return tt.Buffer?function(){return(ft.create=function(){return new b})()}:function(){return new ft}};function bt(_t,Tt,Et){Tt[Et]=255&_t}function vt(_t,Tt){this.len=_t,this.next=void 0,this.val=Tt}function xt(_t,Tt,Et){for(;_t.hi;)Tt[Et++]=127&_t.lo|128,_t.lo=(_t.lo>>>7|_t.hi<<25)>>>0,_t.hi>>>=7;for(;_t.lo>127;)Tt[Et++]=127&_t.lo|128,_t.lo=_t.lo>>>7;Tt[Et++]=_t.lo}function wt(_t,Tt,Et){Tt[Et]=255&_t,Tt[Et+1]=_t>>>8&255,Tt[Et+2]=_t>>>16&255,Tt[Et+3]=_t>>>24}ft.create=st(),ft.alloc=function(_t){return new tt.Array(_t)},tt.Array!==Array&&(ft.alloc=tt.pool(ft.alloc,tt.Array.prototype.subarray)),ft.prototype._push=function(_t,Tt,Et){return this.tail=this.tail.next=new mt(_t,Tt,Et),this.len+=Tt,this},vt.prototype=Object.create(mt.prototype),vt.prototype.fn=function(_t,Tt,Et){for(;_t>127;)Tt[Et++]=127&_t|128,_t>>>=7;Tt[Et]=_t},ft.prototype.uint32=function(_t){return this.len+=(this.tail=this.tail.next=new vt((_t>>>=0)<128?1:_t<16384?2:_t<2097152?3:_t<268435456?4:5,_t)).len,this},ft.prototype.int32=function(_t){return _t<0?this._push(xt,10,nt.fromNumber(_t)):this.uint32(_t)},ft.prototype.sint32=function(_t){return this.uint32((_t<<1^_t>>31)>>>0)},ft.prototype.uint64=function(_t){var Tt=nt.from(_t);return this._push(xt,Tt.length(),Tt)},ft.prototype.int64=ft.prototype.uint64,ft.prototype.sint64=function(_t){var Tt=nt.from(_t).zzEncode();return this._push(xt,Tt.length(),Tt)},ft.prototype.bool=function(_t){return this._push(bt,1,_t?1:0)},ft.prototype.fixed32=function(_t){return this._push(wt,4,_t>>>0)},ft.prototype.sfixed32=ft.prototype.fixed32,ft.prototype.fixed64=function(_t){var Tt=nt.from(_t);return this._push(wt,4,Tt.lo)._push(wt,4,Tt.hi)},ft.prototype.sfixed64=ft.prototype.fixed64,ft.prototype.float=function(_t){return this._push(tt.float.writeFloatLE,4,_t)},ft.prototype.double=function(_t){return this._push(tt.float.writeDoubleLE,8,_t)};var St=tt.Array.prototype.set?function(_t,Tt,Et){Tt.set(_t,Et)}:function(_t,Tt,Et){for(var kt=0;kt<_t.length;++kt)Tt[Et+kt]=_t[kt]};ft.prototype.bytes=function(_t){var Tt=_t.length>>>0;if(!Tt)return this._push(bt,1,0);if(tt.isString(_t)){var Et=ft.alloc(Tt=ot.length(_t));ot.decode(_t,Et,0),_t=Et}return this.uint32(Tt)._push(St,Tt,_t)},ft.prototype.string=function(_t){var Tt=ht.length(_t);return Tt?this.uint32(Tt)._push(ht.write,Tt,_t):this._push(bt,1,0)},ft.prototype.fork=function(){return this.states=new yt(this),this.head=this.tail=new mt(gt,0,0),this.len=0,this},ft.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new mt(gt,0,0),this.len=0),this},ft.prototype.ldelim=function(){var _t=this.head,Tt=this.tail,Et=this.len;return this.reset().uint32(Et),Et&&(this.tail.next=_t.next,this.tail=Tt,this.len+=Et),this},ft.prototype.finish=function(){for(var _t=this.head.next,Tt=this.constructor.alloc(this.len),Et=0;_t;)_t.fn(_t.val,Tt,Et),Et+=_t.len,_t=_t.next;return Tt},ft._configure=function(_t){b=_t,ft.create=st(),b._configure()}},3155:(s,e,d)=>{s.exports=nt;var b=d(1173);(nt.prototype=Object.create(b.prototype)).constructor=nt;var tt=d(9693);function nt(){b.call(this)}function ot(ht,mt,gt){ht.length<40?tt.utf8.write(ht,mt,gt):mt.utf8Write?mt.utf8Write(ht,gt):mt.write(ht,gt)}nt._configure=function(){nt.alloc=tt._Buffer_allocUnsafe,nt.writeBytesBuffer=tt.Buffer&&tt.Buffer.prototype instanceof Uint8Array&&tt.Buffer.prototype.set.name==="set"?function(ht,mt,gt){mt.set(ht,gt)}:function(ht,mt,gt){if(ht.copy)ht.copy(mt,gt,0,ht.length);else for(var yt=0;yt<ht.length;)mt[gt++]=ht[yt++]}},nt.prototype.bytes=function(ht){tt.isString(ht)&&(ht=tt._Buffer_from(ht,"base64"));var mt=ht.length>>>0;return this.uint32(mt),mt&&this._push(nt.writeBytesBuffer,mt,ht),this},nt.prototype.string=function(ht){var mt=tt.Buffer.byteLength(ht);return this.uint32(mt),mt&&this._push(ot,mt,ht),this},nt._configure()},7714:(s,e,d)=>{e.R=void 0;const b=d(6919),tt=d(7448);e.R=new class{async init(){}async createSessionHandler(nt,ot){const ht=new b.Session(ot);return await ht.loadModel(nt),new tt.OnnxjsSessionHandler(ht)}}},4200:(s,e,d)=>{e.c8=e.rX=void 0;const b=d(1670),tt=d(5381),nt=d(2157),ot=d(2306);e.rX=()=>{if((typeof b.env.wasm.initTimeout!="number"||b.env.wasm.initTimeout<0)&&(b.env.wasm.initTimeout=0),typeof b.env.wasm.simd!="boolean"&&(b.env.wasm.simd=!0),typeof b.env.wasm.proxy!="boolean"&&(b.env.wasm.proxy=!1),typeof b.env.wasm.numThreads!="number"||!Number.isInteger(b.env.wasm.numThreads)||b.env.wasm.numThreads<=0){const ht=typeof navigator>"u"?(0,tt.cpus)().length:navigator.hardwareConcurrency;b.env.wasm.numThreads=Math.min(4,Math.ceil((ht||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,nt.initWasm)()}async createSessionHandler(ht,mt){const gt=new ot.OnnxruntimeWebAssemblySessionHandler;return await gt.loadModel(ht,mt),Promise.resolve(gt)}}},6018:function(s,e,d){var b=this&&this.__createBinding||(Object.create?function(ot,ht,mt,gt){gt===void 0&&(gt=mt);var yt=Object.getOwnPropertyDescriptor(ht,mt);yt&&!("get"in yt?!ht.__esModule:yt.writable||yt.configurable)||(yt={enumerable:!0,get:function(){return ht[mt]}}),Object.defineProperty(ot,gt,yt)}:function(ot,ht,mt,gt){gt===void 0&&(gt=mt),ot[gt]=ht[mt]}),tt=this&&this.__exportStar||function(ot,ht){for(var mt in ot)mt==="default"||Object.prototype.hasOwnProperty.call(ht,mt)||b(ht,ot,mt)};Object.defineProperty(e,"__esModule",{value:!0}),tt(d(1670),e);const nt=d(1670);{const ot=d(7714).R;(0,nt.registerBackend)("webgl",ot,-10)}{const ot=d(4200).c8;(0,nt.registerBackend)("cpu",ot,10),(0,nt.registerBackend)("wasm",ot,10),(0,nt.registerBackend)("xnnpack",ot,9)}},246:(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class d{constructor(tt){Object.assign(this,tt)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(tt=>`${this[tt]}`).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=b=>new d(b)},7778:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const b=d(1446),tt=d(9395),nt=d(9162),ot=d(2517);var ht=tt.onnxruntime.experimental.fbs;class mt{constructor(yt){if(this._attributes=new Map,yt!=null){for(const ft of yt)ft instanceof b.onnx.AttributeProto?this._attributes.set(ft.name,[mt.getValue(ft),mt.getType(ft)]):ft instanceof ht.Attribute&&this._attributes.set(ft.name(),[mt.getValue(ft),mt.getType(ft)]);if(this._attributes.size<yt.length)throw new Error("duplicated attribute names")}}set(yt,ft,st){this._attributes.set(yt,[st,ft])}delete(yt){this._attributes.delete(yt)}getFloat(yt,ft){return this.get(yt,"float",ft)}getInt(yt,ft){return this.get(yt,"int",ft)}getString(yt,ft){return this.get(yt,"string",ft)}getTensor(yt,ft){return this.get(yt,"tensor",ft)}getFloats(yt,ft){return this.get(yt,"floats",ft)}getInts(yt,ft){return this.get(yt,"ints",ft)}getStrings(yt,ft){return this.get(yt,"strings",ft)}getTensors(yt,ft){return this.get(yt,"tensors",ft)}get(yt,ft,st){const bt=this._attributes.get(yt);if(bt===void 0){if(st!==void 0)return st;throw new Error(`required attribute not found: ${yt}`)}if(bt[1]!==ft)throw new Error(`type mismatch: expected ${ft} but got ${bt[1]}`);return bt[0]}static getType(yt){const ft=yt instanceof b.onnx.AttributeProto?yt.type:yt.type();switch(ft){case b.onnx.AttributeProto.AttributeType.FLOAT:return"float";case b.onnx.AttributeProto.AttributeType.INT:return"int";case b.onnx.AttributeProto.AttributeType.STRING:return"string";case b.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case b.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case b.onnx.AttributeProto.AttributeType.INTS:return"ints";case b.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case b.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${b.onnx.AttributeProto.AttributeType[ft]}`)}}static getValue(yt){const ft=yt instanceof b.onnx.AttributeProto?yt.type:yt.type();if(ft===b.onnx.AttributeProto.AttributeType.GRAPH||ft===b.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const st=this.getValueNoCheck(yt);if(ft===b.onnx.AttributeProto.AttributeType.INT&&ot.LongUtil.isLong(st))return ot.LongUtil.longToNumber(st);if(ft===b.onnx.AttributeProto.AttributeType.INTS){const bt=st,vt=new Array(bt.length);for(let xt=0;xt<bt.length;xt++){const wt=bt[xt];vt[xt]=ot.LongUtil.longToNumber(wt)}return vt}if(ft===b.onnx.AttributeProto.AttributeType.TENSOR)return yt instanceof b.onnx.AttributeProto?nt.Tensor.fromProto(st):nt.Tensor.fromOrtTensor(st);if(ft===b.onnx.AttributeProto.AttributeType.TENSORS){if(yt instanceof b.onnx.AttributeProto)return st.map(bt=>nt.Tensor.fromProto(bt));if(yt instanceof ht.Attribute)return st.map(bt=>nt.Tensor.fromOrtTensor(bt))}if(ft===b.onnx.AttributeProto.AttributeType.STRING&&yt instanceof b.onnx.AttributeProto){const bt=st;return(0,ot.decodeUtf8String)(bt)}return ft===b.onnx.AttributeProto.AttributeType.STRINGS&&yt instanceof b.onnx.AttributeProto?st.map(ot.decodeUtf8String):st}static getValueNoCheck(yt){return yt instanceof b.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(yt):this.getValueNoCheckFromOrtFormat(yt)}static getValueNoCheckFromOnnxFormat(yt){switch(yt.type){case b.onnx.AttributeProto.AttributeType.FLOAT:return yt.f;case b.onnx.AttributeProto.AttributeType.INT:return yt.i;case b.onnx.AttributeProto.AttributeType.STRING:return yt.s;case b.onnx.AttributeProto.AttributeType.TENSOR:return yt.t;case b.onnx.AttributeProto.AttributeType.GRAPH:return yt.g;case b.onnx.AttributeProto.AttributeType.FLOATS:return yt.floats;case b.onnx.AttributeProto.AttributeType.INTS:return yt.ints;case b.onnx.AttributeProto.AttributeType.STRINGS:return yt.strings;case b.onnx.AttributeProto.AttributeType.TENSORS:return yt.tensors;case b.onnx.AttributeProto.AttributeType.GRAPHS:return yt.graphs;default:throw new Error(`unsupported attribute type: ${b.onnx.AttributeProto.AttributeType[yt.type]}`)}}static getValueNoCheckFromOrtFormat(yt){switch(yt.type()){case ht.AttributeType.FLOAT:return yt.f();case ht.AttributeType.INT:return yt.i();case ht.AttributeType.STRING:return yt.s();case ht.AttributeType.TENSOR:return yt.t();case ht.AttributeType.GRAPH:return yt.g();case ht.AttributeType.FLOATS:return yt.floatsArray();case ht.AttributeType.INTS:{const ft=[];for(let st=0;st<yt.intsLength();st++)ft.push(yt.ints(st));return ft}case ht.AttributeType.STRINGS:{const ft=[];for(let st=0;st<yt.stringsLength();st++)ft.push(yt.strings(st));return ft}case ht.AttributeType.TENSORS:{const ft=[];for(let st=0;st<yt.tensorsLength();st++)ft.push(yt.tensors(st));return ft}default:throw new Error(`unsupported attribute type: ${ht.AttributeType[yt.type()]}`)}}}e.Attribute=mt},7091:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const b=d(5038),tt=new Map;async function nt(ot){const ht=e.backend;if(ht[ot]!==void 0&&function(mt){const gt=mt;return"initialize"in gt&&typeof gt.initialize=="function"&&"createSessionHandler"in gt&&typeof gt.createSessionHandler=="function"&&"dispose"in gt&&typeof gt.dispose=="function"}(ht[ot])){const mt=ht[ot];let gt=mt.initialize();if(typeof gt=="object"&&"then"in gt&&(gt=await gt),gt)return tt.set(ot,mt),mt}}e.backend={webgl:new b.WebGLBackend},e.resolveBackend=async function ot(ht){if(!ht)return ot(["webgl"]);{const mt=typeof ht=="string"?[ht]:ht;for(const gt of mt){const yt=tt.get(gt);if(yt)return yt;const ft=await nt(gt);if(ft)return ft}}throw new Error("no available backend to use")}},5038:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const b=d(1670),tt=d(6231),nt=d(6416),ot=d(7305);e.WebGLBackend=class{get contextId(){return b.env.webgl.contextId}set contextId(ht){b.env.webgl.contextId=ht}get matmulMaxBatchSize(){return b.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(ht){b.env.webgl.matmulMaxBatchSize=ht}get textureCacheMode(){return b.env.webgl.textureCacheMode}set textureCacheMode(ht){b.env.webgl.textureCacheMode=ht}get pack(){return b.env.webgl.pack}set pack(ht){b.env.webgl.pack=ht}get async(){return b.env.webgl.async}set async(ht){b.env.webgl.async=ht}initialize(){try{return this.glContext=(0,ot.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),tt.Logger.setWithEnv(b.env),tt.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(ht){return tt.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${ht}`),!1}}createSessionHandler(ht){return new nt.WebGLSessionHandler(this,ht)}dispose(){this.glContext.dispose()}}},5107:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const b=d(2517),tt=d(8520),nt=d(5060),ot=d(7859),ht=d(9390);class mt extends tt.GlslLib{constructor(yt){super(yt)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new tt.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new tt.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const yt=this.context.outputTextureLayout;return yt.isPacked?this.getPackedOutputSamplingSnippet(yt):this.getUnpackedOutputSamplingSnippet(yt)}getPackedOutputSamplingSnippet(yt){const ft=yt.unpackedShape,st=[yt.width,yt.height],bt={},vt="getOutputCoords";switch(ft.length){case 0:bt[vt]=this.getOutputScalarCoords();break;case 1:bt[vt]=this.getOutputPacked1DCoords(ft,st);break;case 2:bt[vt]=this.getOutputPacked2DCoords(ft,st);break;case 3:bt[vt]=this.getOutputPacked3DCoords(ft,st);break;default:bt[vt]=this.getOutputPackedNDCoords(ft,st)}const xt=`
      void setOutput(vec4 val) {
        ${(0,nt.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return bt.floatTextureSetRGBA=new tt.GlslLibRoutine(xt),bt}getUnpackedOutputSamplingSnippet(yt){const ft=yt.unpackedShape,st=[yt.width,yt.height],bt={},vt="getOutputCoords";switch(ft.length){case 0:bt[vt]=this.getOutputScalarCoords();break;case 1:bt[vt]=this.getOutputUnpacked1DCoords(ft,st);break;case 2:bt[vt]=this.getOutputUnpacked2DCoords(ft,st);break;case 3:bt[vt]=this.getOutputUnpacked3DCoords(ft,st);break;case 4:bt[vt]=this.getOutputUnpacked4DCoords(ft,st);break;case 5:bt[vt]=this.getOutputUnpacked5DCoords(ft,st);break;case 6:bt[vt]=this.getOutputUnpacked6DCoords(ft,st);break;default:throw new Error(`Unsupported output dimensionality: ${ft.length}`)}const xt=`
        void setOutput(float val) {
          ${(0,nt.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return bt.floatTextureSetR=new tt.GlslLibRoutine(xt),bt}getOutputScalarCoords(){return new tt.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(yt,ft){const st=ft;let bt="";return st[0]===1?(bt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${st[1]}.0);
          }
        `,new tt.GlslLibRoutine(bt)):st[1]===1?(bt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${st[0]}.0);
          }
        `,new tt.GlslLibRoutine(bt)):(bt=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${st[0]}, ${st[1]}));
          return 2 * (resTexRC.y * ${st[0]} + resTexRC.x);
        }
      `,new tt.GlslLibRoutine(bt))}getOutputPacked2DCoords(yt,ft){let st="";if(b.ArrayUtil.arraysEqual(yt,ft))return st=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${ft[0]}, ${ft[1]}));
        }
      `,new tt.GlslLibRoutine(st);const bt=ft,vt=Math.ceil(yt[1]/2);return st=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${bt[0]}, ${bt[1]}));

          int index = resTexRC.y * ${bt[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${vt}) * 2;
          int c = 2 * (index / ${vt});

          return ivec2(r, c);
        }
      `,new tt.GlslLibRoutine(st)}getOutputPacked3DCoords(yt,ft){const st=[ft[0],ft[1]],bt=Math.ceil(yt[2]/2),vt=bt*Math.ceil(yt[1]/2),xt=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${st[0]}, ${st[1]}));
          int index = resTexRC.y * ${st[0]} + resTexRC.x;

          int b = index / ${vt};
          index -= b * ${vt};

          // reverse r and c order for packed texture
          int r = imod(index, ${bt}) * 2;
          int c = 2 * (index / ${bt});

          return ivec3(b, r, c);
        }
      `;return new tt.GlslLibRoutine(xt)}getOutputPackedNDCoords(yt,ft){const st=[ft[0],ft[1]],bt=Math.ceil(yt[yt.length-1]/2),vt=bt*Math.ceil(yt[yt.length-2]/2);let xt=vt,wt="",St="b, r, c";for(let Tt=2;Tt<yt.length-1;Tt++)xt*=yt[yt.length-Tt-1],wt=`
      int b${Tt} = index / ${xt};
      index -= b${Tt} * ${xt};
    `+wt,St=`b${Tt}, `+St;const _t=`
      ivec${yt.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${st[0]}, ${st[1]}));
        int index = resTexRC.y * ${st[0]} + resTexRC.x;

        ${wt}

        int b = index / ${vt};
        index -= b * ${vt};

        // reverse r and c order for packed texture
        int r = imod(index, ${bt}) * 2;
        int c = 2 * (index / ${bt});

        return ivec${yt.length}(${St});
      }
    `;return new tt.GlslLibRoutine(_t)}getOutputUnpacked1DCoords(yt,ft){const st=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ft[0]}, ${ft[1]}));
          return resTexRC.y * ${ft[0]} + resTexRC.x;
        }
      `;return new tt.GlslLibRoutine(st)}getOutputUnpacked2DCoords(yt,ft){const st=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ft[0]}, ${ft[1]}));
          int index = resTexRC.y * ${ft[0]} + resTexRC.x;
          int r = index / ${yt[1]};
          int c = index - r * ${yt[1]};
          return ivec2(r, c);
        }
      `;return new tt.GlslLibRoutine(st)}getOutputUnpacked3DCoords(yt,ft){let st="";const bt=yt.length;let vt=null;bt<2&&(vt=[]),vt=new Array(bt-1),vt[bt-2]=yt[bt-1];for(let St=bt-3;St>=0;--St)vt[St]=vt[St+1]*yt[St+1];const xt=["r","c","d"],wt=vt.map((St,_t)=>`int ${xt[_t]} = index / ${St}; ${_t===vt.length-1?`int ${xt[_t+1]} = index - ${xt[_t]} * ${St}`:`index -= ${xt[_t]} * ${St}`};`).join("");return st=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ft[0]}, ${ft[1]}));
          int index = resTexRC.y * ${ft[0]} + resTexRC.x;
          ${wt}
          return ivec3(r, c, d);
        }
      `,new tt.GlslLibRoutine(st)}getOutputUnpacked4DCoords(yt,ft){let st="";const bt=yt.length;let vt=null;bt<2&&(vt=[]),vt=new Array(bt-1),vt[bt-2]=yt[bt-1];for(let St=bt-3;St>=0;--St)vt[St]=vt[St+1]*yt[St+1];const xt=["r","c","d","d2"],wt=vt.map((St,_t)=>`int ${xt[_t]} = index / ${St}; ${_t===vt.length-1?`int ${xt[_t+1]} = index - ${xt[_t]} * ${St}`:`index -= ${xt[_t]} * ${St}`};`).join("");return st=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ft[0]}, ${ft[1]}));
          int index = resTexRC.y * ${ft[0]} + resTexRC.x;
          ${wt}
          return ivec4(r, c, d, d2);
        }
      `,new tt.GlslLibRoutine(st)}getOutputUnpacked5DCoords(yt,ft){let st="";const bt=yt.length;let vt=null;bt<2&&(vt=[]),vt=new Array(bt-1),vt[bt-2]=yt[bt-1];for(let St=bt-3;St>=0;--St)vt[St]=vt[St+1]*yt[St+1];const xt=["r","c","d","d2","d3"],wt=vt.map((St,_t)=>`int ${xt[_t]} = index / ${St}; ${_t===vt.length-1?`int ${xt[_t+1]} = index - ${xt[_t]} * ${St}`:`index -= ${xt[_t]} * ${St}`};`).join("");return st=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ft[0]}, ${ft[1]}));
          int index = resTexRC.y * ${ft[0]} + resTexRC.x;
          ${wt}
          return ivec5(r, c, d, d2, d3);
        }
      `,new tt.GlslLibRoutine(st)}getOutputUnpacked6DCoords(yt,ft){let st="";const bt=yt.length;let vt=null;bt<2&&(vt=[]),vt=new Array(bt-1),vt[bt-2]=yt[bt-1];for(let St=bt-3;St>=0;--St)vt[St]=vt[St+1]*yt[St+1];const xt=["r","c","d","d2","d3","d4"],wt=vt.map((St,_t)=>`int ${xt[_t]} = index / ${St}; ${_t===vt.length-1?`int ${xt[_t+1]} = index - ${xt[_t]} * ${St}`:`index -= ${xt[_t]} * ${St}`};`).join("");return st=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${ft[0]}, ${ft[1]}));
         int index = resTexRC.y * ${ft[0]} + resTexRC.x;
         ${wt}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new tt.GlslLibRoutine(st)}getCommonUtilFuncs(){const yt={};let ft="uvFromFlat";yt[ft]=new tt.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),ft="packedUVfrom1D",yt[ft]=new tt.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ft="packedUVfrom2D",yt[ft]=new tt.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ft="packedUVfrom3D",yt[ft]=new tt.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ft="sampleTexture";const st=(0,nt.getGlsl)(this.context.glContext.version);return yt[ft]=new tt.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${st.texture2D}(textureSampler, uv).r;
        }`),yt}getInputsSamplingSnippets(){const yt={},ft=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((st,bt)=>{const vt=this.context.inputTextureLayouts[bt],xt=(0,ht.generateShaderFuncNameFromInputSamplerName)(st);vt.isPacked?yt[xt]=this.getPackedSamplerFromInput(xt,st,vt):yt[xt]=this.getUnpackedSamplerFromInput(xt,st,vt);const wt=(0,ht.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(st);vt.unpackedShape.length<=ft.unpackedShape.length&&(vt.isPacked?yt[wt]=this.getPackedSamplerAtOutputCoords(wt,vt,ft,st):yt[wt]=this.getUnpackedSamplerAtOutputCoords(wt,vt,ft,st))}),yt}getPackedSamplerAtOutputCoords(yt,ft,st,bt){const vt=ft.unpackedShape,xt=st.unpackedShape,wt=bt,St=(0,ht.generateShaderFuncNameFromInputSamplerName)(wt),_t=vt.length,Tt=xt.length,Et=b.BroadcastUtil.getBroadcastDims(vt,xt),kt=(0,ht.getCoordsDataType)(Tt),Mt=Tt-_t;let Ot;const Dt=(0,ht.getGlChannels)();Ot=_t===0?"":Tt<2&&Et.length>=1?"coords = 0;":Et.map(Bt=>`coords.${Dt[Bt+Mt]} = 0;`).join(`
`);let At="";At=Tt<2&&_t>0?"coords":vt.map((Bt,Wt)=>`coords.${Dt[Wt+Mt]}`).join(", ");let It="return outputValue;";const jt=b.ShapeUtil.size(vt)===1,qt=b.ShapeUtil.size(xt)===1;if(_t!==1||jt||qt){if(jt&&!qt)It=Tt===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(Et.length){const Bt=_t-2,Wt=_t-1;Et.indexOf(Bt)>-1&&Et.indexOf(Wt)>-1?It="return vec4(outputValue.x);":Et.indexOf(Bt)>-1?It="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":Et.indexOf(Wt)>-1&&(It="return vec4(outputValue.xx, outputValue.zz);")}}else It=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const Jt=`
      vec4 ${yt}() {
        ${kt} coords = getOutputCoords();
        
        int lastDim = coords.${Dt[Tt-1]};
        coords.${Dt[Tt-1]} = coords.${Dt[Tt-2]};
        coords.${Dt[Tt-2]} = lastDim;
      
        ${Ot}
        vec4 outputValue = ${St}(${At});
        ${It}
      }
    `;return new tt.GlslLibRoutine(Jt,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(yt,ft,st,bt){const vt=[st.width,st.height],xt=[ft.width,ft.height],wt=ft.unpackedShape.length,St=st.unpackedShape.length,_t=ft.unpackedShape,Tt=st.unpackedShape,Et=(0,ht.generateShaderFuncNameFromInputSamplerName)(bt);if(wt===St&&b.ArrayUtil.arraysEqual(xt,vt)){const qt=`
          float ${yt}() {
            return sampleTexture(${bt}, TexCoords);
          }
        `;return new tt.GlslLibRoutine(qt,["coordinates.sampleTexture"])}const kt=(0,ht.getCoordsDataType)(St),Mt=b.BroadcastUtil.getBroadcastDims(_t,Tt),Ot=St-wt;let Dt;const At=(0,ht.getGlChannels)();Dt=wt===0?"":St<2&&Mt.length>=1?"coords = 0;":Mt.map(qt=>`coords.${At[qt+Ot]} = 0;`).join(`
`);let It="";It=St<2&&wt>0?"coords":ft.unpackedShape.map((qt,Jt)=>`coords.${At[Jt+Ot]}`).join(", ");const jt=`
        float ${yt}() {
          ${kt} coords = getOutputCoords();
          ${Dt}
          return ${Et}(${It});
        }
      `;return new tt.GlslLibRoutine(jt,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(yt,ft,st){switch(st.unpackedShape.length){case 0:return this.getPackedSamplerScalar(yt,ft);case 1:return this.getPackedSampler1D(yt,ft,st);case 2:return this.getPackedSampler2D(yt,ft,st);case 3:return this.getPackedSampler3D(yt,ft,st);default:return this.getPackedSamplerND(yt,ft,st)}}getUnpackedSamplerFromInput(yt,ft,st){const bt=st.unpackedShape;switch(bt.length){case 0:return this.getUnpackedSamplerScalar(yt,ft,st);case 1:return this.getUnpackedSampler1D(yt,ft,st);case 2:return this.getUnpackedSampler2D(yt,ft,st);case 3:return this.getUnpackedSampler3D(yt,ft,st);case 4:return this.getUnpackedSampler4D(yt,ft,st);case 5:return this.getUnpackedSampler5D(yt,ft,st);case 6:return this.getUnpackedSampler6D(yt,ft,st);default:throw new Error(`Unsupported dimension ${bt.length}-D`)}}getPackedSamplerScalar(yt,ft){const st=`
          vec4 ${yt}() {
            return ${(0,nt.getGlsl)(this.context.glContext.version).texture2D}(${ft}, halfCR);
          }
        `;return new tt.GlslLibRoutine(st)}getPackedSampler1D(yt,ft,st){const bt=[st.width,st.height],vt=[bt[1],bt[0]],xt=(0,nt.getGlsl)(this.context.glContext.version),wt=`vec4 ${yt}(int index) {
      vec2 uv = packedUVfrom1D(
      ${vt[0]}, ${vt[1]}, index);
      return ${xt.texture2D}(${ft}, uv);
    }`;return new tt.GlslLibRoutine(wt,["coordinates.packedUVfrom1D"])}getPackedSampler2D(yt,ft,st){const bt=st.unpackedShape,vt=[st.width,st.height],xt=(0,nt.getGlsl)(this.context.glContext.version),wt=vt[0],St=vt[1];if(vt!=null&&b.ArrayUtil.arraysEqual(bt,vt)){const kt=`vec4 ${yt}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${St}.0, ${wt}.0);
        return ${xt.texture2D}(${ft}, uv);
      }`;return new tt.GlslLibRoutine(kt)}const _t=vt,Tt=Math.ceil(bt[1]/2),Et=`vec4 ${yt}(int row, int col) {
      vec2 uv = packedUVfrom2D(${_t[1]}, ${_t[0]}, ${Tt}, row, col);
      return ${xt.texture2D}(${ft}, uv);
    }`;return new tt.GlslLibRoutine(Et,["coordinates.packedUVfrom2D"])}getPackedSampler3D(yt,ft,st){const bt=st.unpackedShape,vt=[st.width,st.height],xt=[vt[0],vt[1]],wt=(0,nt.getGlsl)(this.context.glContext.version);if(bt[0]===1){const kt=bt.slice(1),Mt=[1,2],Ot=(0,ht.squeezeInputShape)(bt,kt),Dt=["b","row","col"],At=JSON.parse(JSON.stringify(st));At.unpackedShape=Ot;const It=this.getPackedSamplerFromInput(yt,ft,At),jt=`${It.routineBody}
      vec4 ${yt}(int b, int row, int col) {
        return ${yt}(${(0,ht.getSqueezedParams)(Dt,Mt)});
      } `;return new tt.GlslLibRoutine(jt,It.dependencies)}const St=xt[0],_t=xt[1],Tt=Math.ceil(bt[2]/2),Et=`vec4 ${yt}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${_t}, ${St}, ${Tt*Math.ceil(bt[1]/2)}, ${Tt}, b, row, col);
      return ${wt.texture2D}(${ft}, uv);}`;return new tt.GlslLibRoutine(Et,["coordinates.packedUVfrom3D"])}getPackedSamplerND(yt,ft,st){const bt=st.unpackedShape,vt=bt.length,xt=[st.width,st.height],wt=(0,nt.getGlsl)(this.context.glContext.version),St=[xt[0],xt[1]],_t=St[1],Tt=St[0],Et=Math.ceil(bt[vt-1]/2);let kt=Et*Math.ceil(bt[vt-2]/2),Mt="int b, int row, int col",Ot=`b * ${kt} + (row / 2) * ${Et} + (col / 2)`;for(let At=2;At<vt-1;At++)Mt=`int b${At}, `+Mt,kt*=bt[vt-At-1],Ot=`b${At} * ${kt} + `+Ot;const Dt=`vec4 ${yt}(${Mt}) {
      int index = ${Ot};
      int texR = index / ${Tt};
      int texC = index - texR * ${Tt};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${Tt}, ${_t});
      return ${wt.texture2D}(${ft}, uv);
    }`;return new tt.GlslLibRoutine(Dt)}getUnpackedSamplerScalar(yt,ft,st){const[bt,vt]=[st.width,st.height];if(bt===1&&vt===1){const wt=`
          float ${yt}() {
            return sampleTexture(${ft}, halfCR);
          }
        `;return new tt.GlslLibRoutine(wt,["coordinates.sampleTexture"])}const xt=`
        float ${yt}() {
          int offset_${ft} = coordsToOffset(TexCoords, ${bt}, ${vt});
          vec2 uv = uvFromFlat(${bt}, ${vt}, offset_${ft});
          return sampleTexture(${ft}, uv);
        }
      `;return new tt.GlslLibRoutine(xt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(yt,ft,st){const bt=st.width,vt=st.height;if(vt===1&&bt===1){const wt=`
        float ${yt}(int index) {
          return sampleTexture(${ft}, halfCR);
        }
      `;return new tt.GlslLibRoutine(wt,["coordinates.sampleTexture"])}if(vt===1){const wt=`
          float ${yt}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${bt}.0, 0.5);
            return sampleTexture(${ft}, uv);
          }
        `;return new tt.GlslLibRoutine(wt,["coordinates.sampleTexture"])}if(bt===1){const wt=`
          float ${yt}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${vt}.0);
            return sampleTexture(${ft}, uv);
          }
        `;return new tt.GlslLibRoutine(wt,["coordinates.sampleTexture"])}const xt=`
        float ${yt}(int index) {
          vec2 uv = uvFromFlat(${bt}, ${vt}, index);
          return sampleTexture(${ft}, uv);
        }
      `;return new tt.GlslLibRoutine(xt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(yt,ft,st){const bt=st.unpackedShape,vt=[st.height,st.width];if(vt!=null&&b.ArrayUtil.arraysEqual(bt,vt)){const kt=`
          float ${yt}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${vt[1]}.0, ${vt[0]}.0);
            return sampleTexture(${ft}, uv);
          }
        `;return new tt.GlslLibRoutine(kt,["coordinates.sampleTexture"])}const{newShape:xt,keptDims:wt}=(0,ot.squeezeShape)(bt),St=xt;if(St.length<bt.length){const kt=(0,ht.squeezeInputShape)(bt,St),Mt=JSON.parse(JSON.stringify(st));Mt.unpackedShape=kt;const Ot=["col","row"],Dt=`
          ${this.getUnpackedSamplerFromInput(yt,ft,Mt).routineBody}
          float ${yt}(int row, int col) {
            return ${yt}(${(0,ht.getSqueezedParams)(Ot,wt)});
          }
        `;return new tt.GlslLibRoutine(Dt,["coordinates.sampleTexture"])}const _t=vt[1],Tt=vt[0];if(Tt===1){const kt=`
          float ${yt}(int row, int col) {
            int offset_${ft} = coordsToOffset(TexCoords, ${_t}, ${Tt});
            float index = dot(vec3(row, col, offset_${ft}), vec3(${bt[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${_t}.0);
            return sampleTexture(${ft}, uv);
          }
        `;return new tt.GlslLibRoutine(kt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(_t===1){const kt=`
          float ${yt}(int row, int col) {
            int offset_${ft} = coordsToOffset(TexCoords, ${_t}, ${Tt});
            float index = dot(vec3(row, col, offset_${ft}), vec3(${bt[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${Tt}.0, 0.5);
            return sampleTexture(${ft}, uv);
          }
        `;return new tt.GlslLibRoutine(kt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const Et=`
        float ${yt}(int row, int col) {
          int index = col * ${bt[1]} + row;
          vec2 uv = uvFromFlat(${_t}, ${Tt}, index);
          return sampleTexture(${ft}, uv);
        }
      `;return new tt.GlslLibRoutine(Et,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(yt,ft,st){const bt=st.unpackedShape,vt=bt[1]*bt[2],xt=bt[2],{newShape:wt,keptDims:St}=(0,ot.squeezeShape)(bt),_t=wt;if(_t.length<bt.length){const Et=(0,ht.squeezeInputShape)(bt,_t),kt=["batch","col","row"],Mt=JSON.parse(JSON.stringify(st));Mt.unpackedShape=Et;const Ot=this.getUnpackedSamplerFromInput(yt,ft,Mt),Dt=St.reverse(),At=`
          ${Ot.routineBody}
          float ${yt}(int batch, int row, int col) {
            return ${yt}(${(0,ht.getSqueezedParams)(kt,Dt)});
          }
        `;return new tt.GlslLibRoutine(At,Ot.dependencies)}const Tt=`
          float ${yt}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${vt} + col * ${xt} + row;
            vec2 uv = uvFromFlat(${st.width}, ${st.height}, index);
            return sampleTexture(${ft}, uv);
          }
      `;return new tt.GlslLibRoutine(Tt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(yt,ft,st){const bt=st.unpackedShape,vt=bt[3],xt=bt[2]*vt,wt=`
        float ${yt}(int row, int col, int depth, int depth2) {
          int index = row * ${bt[1]*xt} + col * ${xt} +
              depth2 * ${vt} + depth;
          vec2 uv = uvFromFlat(${st.width}, ${st.height}, index);
          return sampleTexture(${ft}, uv);
        }
      `;return new tt.GlslLibRoutine(wt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(yt,ft,st){const bt=st.unpackedShape,vt=bt[4],xt=bt[3]*vt,wt=bt[2]*xt,St=bt[1]*wt,{newShape:_t,keptDims:Tt}=(0,ot.squeezeShape)(bt);if(_t.length<bt.length){const kt=(0,ht.squeezeInputShape)(bt,_t),Mt=["row","col","depth","depth2","depth3"],Ot=JSON.parse(JSON.stringify(st));Ot.unpackedShape=kt;const Dt=`
          ${this.getUnpackedSamplerFromInput(yt,ft,Ot).routineBody}
          float ${yt}(int row, int col, int depth, int depth2, int depth3) {
            return ${yt}(${(0,ht.getSqueezedParams)(Mt,Tt)});
          }
        `;return new tt.GlslLibRoutine(Dt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const Et=`
        float ${yt}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${St} + col * ${wt} + depth * ${xt} +
          depth3 * ${vt} + depth2;
          vec2 uv = uvFromFlat(${st.width}, ${st.height}, index);
          return sampleTexture(${ft}, uv);
        }
      `;return new tt.GlslLibRoutine(Et,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(yt,ft,st){const bt=st.unpackedShape,vt=bt[5],xt=bt[4]*vt,wt=bt[3]*xt,St=bt[2]*wt,_t=bt[1]*St,{newShape:Tt,keptDims:Et}=(0,ot.squeezeShape)(bt);if(Tt.length<bt.length){const Mt=(0,ht.squeezeInputShape)(bt,Tt),Ot=["row","col","depth","depth2","depth3","depth4"],Dt=JSON.parse(JSON.stringify(st));Dt.unpackedShape=Mt;const At=`
            ${this.getUnpackedSamplerFromInput(yt,ft,Dt).routineBody}
            float ${yt}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${yt}(${(0,ht.getSqueezedParams)(Ot,Et)});
            }
          `;return new tt.GlslLibRoutine(At,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const kt=`
          float ${yt}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${_t} + col * ${St} + depth * ${wt} +
            depth2 * ${xt} + depth3 * ${vt} + depth4;
            vec2 uv = uvFromFlat(${st.width}, ${st.height}, index);
            return sampleTexture(${ft}, uv);
          }
        `;return new tt.GlslLibRoutine(kt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const yt=this.context.outputTextureLayout,ft=yt.shape.length,st=yt.strides,bt=yt.width,vt=yt.height,xt=[];for(let St=0;St<ft-1;++St)xt.push(`
        c[${St}] = offset / ${st[St]};`),xt.push(`
        offset -= c[${St}] * ${st[St]};`);xt.push(`
        c[${ft-1}] = offset;`);const wt=`
      void toVec(vec2 texCoords, out int c[${ft}]) {
        int offset = coordsToOffset(texCoords, ${bt}, ${vt});
        ${xt.join("")}
      }
      void toVec(int offset, out int c[${ft}]) {
        ${xt.join("")}
      }
    `;return{toVec:new tt.GlslLibRoutine(wt,["coordinates.coordsToOffset"])}}valueFrom(){const yt={};return this.context.programInfo.inputNames.forEach((ft,st)=>{const bt=this.context.inputTextureLayouts[st],vt=(bt.unpackedShape.length>0?bt.unpackedShape:bt.shape).length;let xt=`_${ft}`;yt[xt]=new tt.GlslLibRoutine(this.getValueFromSingle(ft,vt,bt.width,bt.height,!1),[`shapeUtils.indicesToOffset${xt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),xt+="_T",yt[xt]=new tt.GlslLibRoutine(this.getValueFromSingle(ft,vt,bt.width,bt.height,!0),[`shapeUtils.indicesToOffset${xt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),yt}getValueFromSingle(yt,ft,st,bt,vt){let xt=`_${yt}`;return vt&&(xt+="_T"),`
        float ${xt}(int m[${ft}]) {
          int offset = indicesToOffset${xt}(m);
          vec2 coords = offsetToCoords(offset, ${st}, ${bt});
          float value = getColorAsFloat(${(0,nt.getGlsl)(this.context.glContext.version).texture2D}(${yt}, coords));
          return value;
        }
        `}getPackedValueFrom(yt,ft,st,bt,vt){let xt=`_${yt}_Pack`;return vt&&(xt+="_T"),`
        vec4 ${xt}(int m[${ft}]) {
          int offset = indicesToOffset_${yt}(m);
          vec2 coords = offsetToCoords(offset, ${st}, ${bt});
          return ${(0,nt.getGlsl)(this.context.glContext.version).texture2D}(${yt}, coords);
        }
        `}}e.CoordsGlslLib=mt},8520:(s,e)=>{var d;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(d=e.FunctionType||(e.FunctionType={}))[d.ValueBased=0]="ValueBased",d[d.Positional=1]="Positional",e.GlslContext=class{constructor(b,tt,nt,ot){this.glContext=b,this.programInfo=tt,this.inputTextureLayouts=nt,this.outputTextureLayout=ot}},e.GlslLib=class{constructor(b){this.context=b}},e.GlslLibRoutine=class{constructor(b,tt){this.routineBody=b,this.dependencies=tt}},e.GlslLibRoutineNode=class{constructor(b,tt,nt){this.name=b,this.dependencies=nt||[],tt&&(this.routineBody=tt)}addDependency(b){b&&this.dependencies.push(b)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(b){if(!b||b.length===0)return[];if(b.length===1)return b;const tt=new Set,nt=new Set,ot=new Array;return this.createOrderedNodes(b,tt,nt,ot),ot}static createOrderedNodes(b,tt,nt,ot){for(let ht=0;ht<b.length;++ht)this.dfsTraverse(b[ht],tt,nt,ot)}static dfsTraverse(b,tt,nt,ot){if(!b||nt.has(b.name))return;if(tt.has(b.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");tt.add(b.name);const ht=b.dependencies;if(ht&&ht.length>0)for(let mt=0;mt<ht.length;++mt)this.dfsTraverse(ht[mt],tt,nt,ot);ot.push(b),nt.add(b.name),tt.delete(b.name)}}},7341:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const b=d(8520);class tt extends b.GlslLib{constructor(ot){super(ot)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new b.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new b.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const ot=tt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new b.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${ot}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const ot=tt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new b.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${ot}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const ot=new ArrayBuffer(4),ht=new Uint32Array(ot),mt=new Uint8Array(ot);if(ht[0]=3735928559,mt[0]===239)return!0;if(mt[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=tt},9894:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const b=d(8520),tt=d(5060);class nt extends b.GlslLib{constructor(ht){super(ht)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const ht=(0,tt.getGlsl)(this.context.glContext.version);return{setFragColor:new b.GlslLibRoutine(`
        void setFragColor(float value) {
            ${ht.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new b.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=nt},2848:(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const d=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(b){const tt={};let nt;for(;(nt=d.exec(b))!==null;){const ot=nt[3].split(",").map(ht=>{const mt=ht.trim().split(" ");return mt&&mt.length===2?{type:mt[0],name:mt[1]}:null}).filter(ht=>ht!==null);tt[nt[2]]={params:ot,body:nt[4]}}for(const ot in tt){const ht="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",ot),mt=new RegExp(ht,"gm");for(;(nt=mt.exec(b))!==null;){const gt=nt[1],yt=nt[2],ft=nt[3].split(","),st=gt?`${gt} ${yt};`:"";let bt=tt[ot].body,vt="";tt[ot].params.forEach((wt,St)=>{wt&&(vt+=`${wt.type} ${wt.name} = ${ft[St]};
`)}),bt=`${vt}
 ${bt}`,bt=bt.replace("return",`${yt} = `);const xt=`
      ${st}
      {
        ${bt}
      }
      `;b=b.replace(nt[0],xt)}}return b.replace(d,"")}},8879:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const b=d(8520),tt=d(2848),nt=d(5483),ot=d(5060);e.GlslPreprocessor=class{constructor(ht,mt,gt,yt){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new b.GlslContext(ht,mt,gt,yt),Object.keys(nt.glslRegistry).forEach(st=>{const bt=new nt.glslRegistry[st](this.context);this.libs[st]=bt});const ft=this.glslLibRoutineDependencyGraph;for(const st in this.libs){const bt=this.libs[st].getFunctions();for(const vt in bt){const xt=st+"."+vt;let wt;ft[xt]?(wt=ft[xt],wt.routineBody=bt[vt].routineBody):(wt=new b.GlslLibRoutineNode(xt,bt[vt].routineBody),ft[xt]=wt);const St=bt[vt].dependencies;if(St)for(let _t=0;_t<St.length;++_t)if(ft[St[_t]])wt.addDependency(ft[St[_t]]);else{const Tt=new b.GlslLibRoutineNode(St[_t]);ft[St[_t]]=Tt,wt.addDependency(Tt)}}}}preprocess(){const ht=this.context.programInfo;let mt=ht.shaderSource;return this.context.programInfo.hasMain||(mt=`${mt}
      ${(0,ot.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),mt=(0,tt.replaceInlines)(mt),`${(0,ot.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(ht.inputNames,ht.variables)}
    ${this.getImports(mt)}
    ${mt}`}getImports(ht){const mt=this.selectGlslLibRoutinesToBeIncluded(ht);if(mt.length===0)return"";let gt="";for(let yt=0;yt<mt.length;++yt){if(!mt[yt].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${mt[yt].name}`);gt+=mt[yt].routineBody+`
`}return gt}selectGlslLibRoutinesToBeIncluded(ht){const mt=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(gt=>{const yt=gt.split(".")[1];ht.indexOf(yt)!==-1&&mt.push(this.glslLibRoutineDependencyGraph[gt])}),b.TopologicalSortGlslRoutines.returnOrderedNodes(mt)}getUniforms(ht,mt){const gt=[];if(ht)for(const yt of ht)gt.push(`uniform sampler2D ${yt};`);if(mt)for(const yt of mt)gt.push(`uniform ${yt.type} ${yt.name}${yt.arrayLength?`[${yt.arrayLength}]`:""};`);return gt.join(`
`)}}},5483:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const b=d(5107),tt=d(7341),nt=d(9894),ot=d(2655),ht=d(3891);e.glslRegistry={encoding:tt.EncodingGlslLib,fragcolor:nt.FragColorGlslLib,vec:ht.VecGlslLib,shapeUtils:ot.ShapeUtilsGlslLib,coordinates:b.CoordsGlslLib}},2655:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const b=d(8520);class tt extends b.GlslLib{constructor(ot){super(ot)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const ot=this.context.outputTextureLayout.shape.length,ht={};return this.context.programInfo.inputNames.forEach((mt,gt)=>{const yt=this.context.inputTextureLayouts[gt].unpackedShape;if(yt.length<=ot){const ft=yt.length,st=ot-ft,bt=`bcastIndices_${mt}`;let vt="";for(let wt=0;wt<ft;++wt)vt+=`
          realIndices[${wt}] = int( mod(float(bcastedIndices[${st+wt}]), ${yt[wt]}.0) );
          `;const xt=`
        void ${bt} (int bcastedIndices[${ot}], out int realIndices[${ft}]) {
          ${vt}
        }
        `;ht[bt]=new b.GlslLibRoutine(xt)}}),ht}bcastMatmulIndex(){const ot=this.context.outputTextureLayout.shape.length,ht={};return this.context.programInfo.inputNames.forEach((mt,gt)=>{const yt=this.context.inputTextureLayouts[gt].shape;if(!(yt.length<2||yt.length>ot)){const ft=yt.length,st=ot-ft,bt=`bcastMatmulIndices_${mt}`;let vt="";for(let wt=0;wt<ft-2;++wt)vt+=`
          realIndices[${wt}] = int( mod(float(bcastedIndices[${st+wt}]), ${yt[wt]}.0) );
          `;const xt=`
        void ${bt}(int bcastedIndices[${ot}], out int realIndices[${ft}]) {
          ${vt}
          realIndices[${ft-1}] = bcastedIndices[${ot-1}];
          realIndices[${ft-2}] = bcastedIndices[${ot-2}];
        }
        `;ht[bt]=new b.GlslLibRoutine(xt)}}),ht}indicesToOffset(){const ot={};return this.context.programInfo.inputNames.forEach((ht,mt)=>{const gt=this.context.inputTextureLayouts[mt].shape,yt=this.context.inputTextureLayouts[mt].strides,ft=gt.length;let st=`indicesToOffset_${ht}`;ot[st]=new b.GlslLibRoutine(tt.indexToOffsetSingle(st,ft,yt)),st=`indicesToOffset_${ht}_T`,ot[st]=new b.GlslLibRoutine(tt.indexToOffsetSingle(st,ft,yt.slice().reverse()))}),ot}static indexToOffsetSingle(ot,ht,mt){let gt="";for(let yt=ht-1;yt>=0;--yt)gt+=`
        offset += indices[${yt}] * ${mt[yt]};
        `;return`
      int ${ot}(int indices[${ht}]) {
        int offset = 0;
        ${gt}
        return offset;
      }
      `}offsetToIndices(){const ot={};return this.context.programInfo.inputNames.forEach((ht,mt)=>{const gt=this.context.inputTextureLayouts[mt].shape,yt=this.context.inputTextureLayouts[mt].strides,ft=gt.length;let st=`offsetToIndices_${ht}`;ot[st]=new b.GlslLibRoutine(tt.offsetToIndicesSingle(st,ft,yt)),st=`offsetToIndices_${ht}_T`,ot[st]=new b.GlslLibRoutine(tt.offsetToIndicesSingle(st,ft,yt.slice().reverse()))}),ot}static offsetToIndicesSingle(ot,ht,mt){const gt=[];for(let yt=0;yt<ht-1;++yt)gt.push(`
      indices[${yt}] = offset / ${mt[yt]};`),gt.push(`
        offset -= indices[${yt}] * ${mt[yt]};`);return gt.push(`
      indices[${ht-1}] = offset;`),`
      void ${ot}(int offset, out int indices[${ht}]) {
        ${gt.join("")}
      }
      `}incrementIndices(){const ot={};return this.context.programInfo.inputNames.forEach((ht,mt)=>{const gt=this.context.inputTextureLayouts[mt].shape,yt=gt.length,ft=`incrementIndices_${ht}`;let st="";for(let vt=0;vt<yt;++vt)st+=`
        shape[${vt}] = ${gt[vt]};`;const bt=`
        void ${ft}(int axis, out int indices[${yt}]) {
          int shape[${yt}];
          ${st};
          for(int i = ${yt} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;ot[ft]=new b.GlslLibRoutine(bt)}),ot}}e.ShapeUtilsGlslLib=tt},5060:(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const d={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},b={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function tt(nt){return nt===1?d:b}e.getGlsl=tt,e.getVertexShaderSource=function(nt){const ot=tt(nt);return`${ot.version}
      precision highp float;
      ${ot.attribute} vec3 position;
      ${ot.attribute} vec2 textureCoord;

      ${ot.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(nt){const ot=tt(nt);return`${ot.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${ot.varyingFrag} vec2 TexCoords;
    ${ot.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(nt,ot){return`
  void main() {
    int indices[${ot}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${tt(nt).output} = result;
  }
  `}},3891:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const b=d(8520);class tt extends b.GlslLib{constructor(ot){super(ot)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const ot=this.context.outputTextureLayout.shape.length,ht={add:"+=",sub:"-=",mul:"*=",div:"/="},mt={};for(const gt in ht){const yt=`${gt}Vec`;let ft="";for(let bt=0;bt<ot;++bt)ft+=`
          dest[${bt}] ${ht[gt]} src[${bt}];
          `;const st=`
        void ${yt}(int src[${ot}], out int dest[${ot}]) {
          ${ft}
        }
        `;mt[yt]=new b.GlslLibRoutine(st)}return mt}copyVec(){const ot=this.context.outputTextureLayout.shape.length;let ht="";for(let gt=0;gt<ot;++gt)ht+=`
        dest[${gt}] = src[${gt}];
        `;const mt=`
      void copyVec(int src[${ot}], out int dest[${ot}]) {
        ${ht}
      }
      `;return{copyVec:new b.GlslLibRoutine(mt)}}setVecItem(){const ot=this.context.outputTextureLayout.shape.length;let ht=`
        if(index < 0)
            index =${ot} + index;
        if (index == 0)
            m[0] = value;
        `;for(let gt=1;gt<ot-1;++gt)ht+=`
        else if (index == ${gt})
            m[${gt}] = value;
            `;ht+=`
        else
            m[${ot-1}] = value;
        `;const mt=`
      void setVecItem(out int m[${ot}], int index, int value) {
        ${ht}
      }
        `;return{setVecItem:new b.GlslLibRoutine(mt)}}getVecItem(){const ot=this.context.outputTextureLayout.shape.length;let ht=`
        if(index < 0)
            index = ${ot} + index;
        if (index == 0)
            return m[0];
      `;for(let gt=1;gt<ot-1;++gt)ht+=`
        else if (index == ${gt})
            return m[${gt}];
      `;ht+=`
        else
            return m[${ot-1}];
        `;const mt=`
      int getVecItem(int m[${ot}], int index) {
        ${ht}
      }
    `;return{getVecItem:new b.GlslLibRoutine(mt)}}}e.VecGlslLib=tt},8316:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const b=d(6231),tt=d(9162),nt=d(2517),ot=d(2403),ht=d(7019),mt=d(8710),gt=d(5611),yt=d(4057),ft=d(2039);e.WebGLInferenceHandler=class{constructor(st){this.session=st,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(st,bt){return(0,yt.calculateTextureWidthAndHeight)(this.session.layoutStrategy,st,bt)}executeProgram(st,bt){if(bt.length<st.inputNames.length)throw new Error(`Input size mustn't be less than ${st.inputNames.length}.`);if(st.inputNames.length!==st.inputTypes.length)throw new Error("input names size does not match input types");const vt=[];for(let Et=0;Et<st.inputNames.length;++Et)vt[Et]=this.getOrCreateTextureData(bt[Et],st.inputTypes[Et]);const xt=((Et,kt)=>{const Mt=kt.map(Dt=>`${Dt.unpackedShape.join(",")};${Dt.width}x${Dt.height}`).join("_");let Ot=Et.name;return Et.cacheHint&&(Ot+="["+Et.cacheHint+"]"),Ot+=":"+Mt,Ot})(st,vt);let wt=this.session.programManager.getArtifact(xt);const St=wt?wt.programInfo:typeof st.get=="function"?st.get():st,_t=(0,yt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,St.output.dims,St.output.textureType),Tt=this.createTextureData(_t,St.output.type);return wt||(wt=this.session.programManager.build(St,vt,Tt),this.session.programManager.setArtifact(xt,wt)),this.runProgram(wt,vt,Tt),Tt}run(st,bt){return this.executeProgram(st,bt).tensor}runProgram(st,bt,vt){for(let xt=0;xt<bt.length;++xt)if(!!bt[xt].isPacked!=(st.programInfo.inputTypes[xt]===ft.TextureType.packed))throw new Error(`input[${xt}] property packed inconsistent`);if(!!vt.isPacked!=(st.programInfo.output.textureType===ft.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(st,bt,vt)}getOrCreateTextureData(st,bt){let vt=this.getTextureData(st.dataId,bt===ft.TextureType.packed);if(!vt&&(vt=this.getTextureData(st.dataId,bt!==ft.TextureType.packed),vt))return bt===ft.TextureType.packed?this.pack(vt):this.unpack(vt);if(!vt){const xt=(0,yt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,st.dims,bt);if(bt===ft.TextureType.packedLastDimension){const _t=st.dims;if(_t.length===4){const Tt=[_t[0],Math.ceil(_t[1]*_t[2]*_t[3]/4)],Et=(0,yt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Tt,bt);let kt=st.numberData;if(_t[1]*_t[2]*_t[3]%4!=0){const Mt=_t[0],Ot=_t[1]*_t[2]*_t[3],Dt=Math.ceil(Ot*1/4)*4;kt=new Float32Array(Mt*Dt);for(let At=0;At<Mt;++At){const It=At*Ot,jt=At*Dt+At%1*Ot;kt.set(st.numberData.subarray(It,It+Ot),jt)}}return this.createTextureData(Et,st.type,kt,st,1)}}if(bt===ft.TextureType.packed){const wt=(0,yt.createTextureLayoutFromShape)(this.session.layoutStrategy,st.dims,1,[],{reverseWH:!0}),St=this.createTextureData(wt,st.type,st.numberData,st,1);vt=this.pack(St)}else vt=this.createTextureData(xt,st.type,st.numberData,st,1)}return vt}createTextureDataFromLayoutBindTensor(st,bt,vt,xt){return this.createTextureData(st,bt,vt,xt,1)}createTextureData(st,bt,vt,xt,wt){b.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(st)}]`);const St=this.session.textureManager.createTextureFromLayout(bt,st,vt,wt);return this.createTextureDataFromTexture(st,bt,St,xt)}reshapeUnpacked(st,bt){const vt=this.getOrCreateTextureData(st,ft.TextureType.unpacked),xt={channels:vt.channels,height:vt.height,width:vt.width,shape:bt.length!==0?bt:[1],strides:nt.ShapeUtil.computeStrides(bt),unpackedShape:bt};return this.createTextureDataFromTexture(xt,st.type,vt.texture).tensor}reshapePacked(st,bt){const vt=this.getOrCreateTextureData(st,ft.TextureType.packed);if((0,ht.isReshapeCheap)(st.dims,bt)){const Tt={channels:vt.channels,height:vt.height,width:vt.width,shape:bt.length!==0?bt:[1],strides:nt.ShapeUtil.computeStrides(bt),unpackedShape:bt,isPacked:!0};return this.createTextureDataFromTexture(Tt,st.type,vt.texture).tensor}const xt=(0,ht.processDims3D)(st.dims),wt=(0,ht.processDims3D)(bt),St=this.reshapePacked(st,xt),_t=this.run((0,ht.createPackedReshape3DProgramInfoLoader)(this,St,wt),[St]);return this.reshapePacked(_t,bt)}cast(st,bt){const vt=this.getOrCreateTextureData(st,ft.TextureType.unpacked);return this.createTextureDataFromTexture(vt,bt,vt.texture).tensor}createTextureDataFromTexture(st,bt,vt,xt,wt){const St=Object.assign(Object.assign({},st),{tensor:xt||new tt.Tensor(st.unpackedShape,bt,_t=>this.readTexture(St),async _t=>this.readTextureAsync(St),void 0,wt),texture:vt});return this.setTextureData(St.tensor.dataId,St,st.isPacked),St}getTextureData(st,bt=!1){return this.session.isInitializer(st)?this.session.getTextureData(st,bt):bt?this.packedTextureDataCache.get(st):this.unpackedTextureDataCache.get(st)}setTextureData(st,bt,vt=!1){this.session.isInitializer(st)?this.session.setTextureData(st,bt,vt):(vt?this.packedTextureDataCache:this.unpackedTextureDataCache).set(st,bt)}isTextureLayoutCached(st,bt=!1){return!!this.getTextureData(st.dataId,bt)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(st=>this.session.textureManager.releaseTexture(st)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(st=>this.session.textureManager.releaseTexture(st)),this.unpackedTextureDataCache=new Map}readTexture(st){return st.isPacked?this.readTexture(this.unpack(st)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(st,st.tensor.type,st.channels):this.session.textureManager.readUint8TextureAsFloat((0,mt.encodeAsUint8)(this,st))}async readTextureAsync(st){return st.isPacked?this.readTextureAsync(this.unpack(st)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(st,st.tensor.type,st.channels):this.session.textureManager.readUint8TextureAsFloat((0,mt.encodeAsUint8)(this,st))}pack(st){return this.executeProgram((0,ot.createPackProgramInfoLoader)(this,st.tensor),[st.tensor])}unpack(st){return this.executeProgram((0,gt.createUnpackProgramInfoLoader)(this,st.tensor),[st.tensor])}}},1640:function(s,e,d){var b=this&&this.__createBinding||(Object.create?function(Kt,an,ln,hn){hn===void 0&&(hn=ln);var kn=Object.getOwnPropertyDescriptor(an,ln);kn&&!("get"in kn?!an.__esModule:kn.writable||kn.configurable)||(kn={enumerable:!0,get:function(){return an[ln]}}),Object.defineProperty(Kt,hn,kn)}:function(Kt,an,ln,hn){hn===void 0&&(hn=ln),Kt[hn]=an[ln]}),tt=this&&this.__setModuleDefault||(Object.create?function(Kt,an){Object.defineProperty(Kt,"default",{enumerable:!0,value:an})}:function(Kt,an){Kt.default=an}),nt=this&&this.__importStar||function(Kt){if(Kt&&Kt.__esModule)return Kt;var an={};if(Kt!=null)for(var ln in Kt)ln!=="default"&&Object.prototype.hasOwnProperty.call(Kt,ln)&&b(an,Kt,ln);return tt(an,Kt),an};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const ot=d(2898),ht=nt(d(7839)),mt=d(4196),gt=d(2069),yt=d(8138),ft=d(9663),st=d(5193),bt=d(7992),vt=d(1253),xt=d(4776),wt=d(6572),St=d(3346),_t=d(5623),Tt=d(2870),Et=d(2143),kt=d(4939),Mt=d(718),Ot=d(2268),Dt=d(8117),At=d(2278),It=d(5524),jt=d(5975),qt=d(3933),Jt=d(6558),Bt=d(5723),Wt=d(3738),Lt=nt(d(4909)),Ut=d(8428),tn=d(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Lt.abs],["Acos","","7+",Lt.acos],["Add","","7+",ht.add],["And","","7+",ht.and],["Asin","","7+",Lt.asin],["Atan","","7+",Lt.atan],["AveragePool","","7+",Et.averagePool,Et.parseAveragePoolAttributes],["BatchNormalization","","7+",ot.batchNormalization,ot.parseBatchNormalizationAttributes],["Cast","","6+",mt.cast,mt.parseCastAttributes],["Ceil","","6+",Lt.ceil],["Clip","","6-10",Lt.clip,Lt.parseClipAttributes],["Clip","","11+",Lt.clipV11],["Concat","","4+",gt.concat,gt.parseConcatAttributes],["Conv","","1+",yt.conv,yt.parseConvAttributes],["ConvTranspose","","1+",ft.convTranspose,ft.parseConvTransposeAttributes],["Cos","","7+",Lt.cos],["Div","","7+",ht.div],["Dropout","","7+",Lt.identity],["DepthToSpace","","1+",st.depthToSpace,st.parseDepthToSpaceAttributes],["Equal","","7+",ht.equal],["Elu","","6+",Lt.elu,Lt.parseEluAttributes],["Exp","","6+",Lt.exp],["Flatten","","1+",bt.flatten,bt.parseFlattenAttributes],["Floor","","6+",Lt.floor],["FusedConv","com.microsoft","1+",yt.conv,yt.parseConvAttributes],["Gather","","1+",vt.gather,vt.parseGatherAttributes],["Gemm","","7-10",xt.gemm,xt.parseGemmAttributesV7],["Gemm","","11+",xt.gemm,xt.parseGemmAttributesV11],["GlobalAveragePool","","1+",Et.globalAveragePool,Et.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",Et.globalMaxPool],["Greater","","7+",ht.greater],["Identity","","1+",Lt.identity],["ImageScaler","","1+",wt.imageScaler,wt.parseImageScalerAttributes],["InstanceNormalization","","6+",St.instanceNormalization,St.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Lt.leakyRelu,Lt.parseLeakyReluAttributes],["Less","","7+",ht.less],["Log","","6+",Lt.log],["MatMul","","1+",_t.matMul,_t.parseMatMulAttributes],["MaxPool","","1+",Et.maxPool,Et.parseMaxPoolAttributes],["Mul","","7+",ht.mul],["Neg","","6+",Lt.neg],["Not","","1+",Lt.not],["Or","","7+",ht.or],["Pad","","2-10",Tt.padV2,Tt.parsePadAttributesV2],["Pad","","11+",Tt.padV11,Tt.parsePadAttributesV11],["Pow","","7+",ht.pow],["PRelu","","7+",ht.pRelu],["ReduceLogSum","","1+",kt.reduceLogSum,kt.parseReduceAttributes],["ReduceMax","","1+",kt.reduceMax,kt.parseReduceAttributes],["ReduceMean","","1+",kt.reduceMean,kt.parseReduceAttributes],["ReduceMin","","1+",kt.reduceMin,kt.parseReduceAttributes],["ReduceProd","","1+",kt.reduceProd,kt.parseReduceAttributes],["ReduceSum","","1-12",kt.reduceSum,kt.parseReduceAttributes],["ReduceSumSquare","","1+",kt.reduceLogSumSquare,kt.parseReduceAttributes],["Relu","","6+",Lt.relu],["Reshape","","5+",Mt.reshape],["Resize","","10",Ot.resize,Ot.parseResizeAttributesV10],["Resize","","11+",Ot.resize,Ot.parseResizeAttributesV11],["Shape","","1+",Dt.shape],["Sigmoid","","6+",Lt.sigmoid],["Sin","","7+",Lt.sin],["Slice","","10+",At.sliceV10],["Slice","","1-9",At.slice,At.parseSliceAttributes],["Softmax","","1-12",It.softmax,It.parseSoftmaxAttributes],["Softmax","","13+",It.softmaxV13,It.parseSoftmaxAttributesV13],["Split","","2-12",jt.split,jt.parseSplitAttributes],["Sqrt","","6+",Lt.sqrt],["Squeeze","","1-12",qt.squeeze,qt.parseSqueezeAttributes],["Squeeze","","13+",qt.squeezeV13],["Sub","","7+",ht.sub],["Sum","","6+",Jt.sum],["Tan","","7+",Lt.tan],["Tanh","","6+",Lt.tanh],["Tile","","6+",Bt.tile],["Transpose","","1+",Wt.transpose,Wt.parseTransposeAttributes],["Upsample","","7-8",tn.upsample,tn.parseUpsampleAttributesV7],["Upsample","","9",tn.upsample,tn.parseUpsampleAttributesV9],["Unsqueeze","","1-12",Ut.unsqueeze,Ut.parseUnsqueezeAttributes],["Unsqueeze","","13+",Ut.unsqueezeV13],["Xor","","7+",ht.xor]]},2898:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const b=d(246),tt=d(5060),nt=d(2039),ot={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked]};e.batchNormalization=(gt,yt,ft)=>(mt(yt),[gt.run(Object.assign(Object.assign({},ot),{cacheHint:ft.cacheKey,get:()=>ht(gt,yt,ft)}),yt)]),e.parseBatchNormalizationAttributes=gt=>{const yt=gt.attributes.getFloat("epsilon",1e-5),ft=gt.attributes.getFloat("momentum",.9),st=gt.attributes.getInt("spatial",1);return(0,b.createAttributeWithCacheKey)({epsilon:yt,momentum:ft,spatial:st})};const ht=(gt,yt,ft)=>{const st=(0,tt.getGlsl)(gt.session.backend.glContext.version),bt=yt[0].dims.length,[vt,xt]=gt.calculateTextureWidthAndHeight(yt[1].dims,nt.TextureType.unpacked),wt=`
  float process(int[${bt}] indices) {
    vec2 position = offsetToCoords(indices[1], ${vt}, ${xt});
    float scale = getColorAsFloat(${st.texture2D}(Scale, position));
    float mean = getColorAsFloat(${st.texture2D}(Mean, position));
    float variance = getColorAsFloat(${st.texture2D}(Variance, position));
    float b = getColorAsFloat(${st.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${ft.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},ot),{output:{dims:yt[0].dims,type:yt[0].type,textureType:nt.TextureType.unpacked},shaderSource:wt})},mt=gt=>{if(!gt||gt.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const yt=gt[0],ft=gt[1],st=gt[2],bt=gt[3],vt=gt[4];if(yt.dims.length<3||ft.dims.length!==1||st.dims.length!==1||bt.dims.length!==1||vt.dims.length!==1)throw new Error("invalid input shape.");if(ft.dims[0]!==yt.dims[1]||st.dims[0]!==yt.dims[1]||bt.dims[0]!==yt.dims[1]||vt.dims[0]!==yt.dims[1])throw new Error("invalid input shape.");if(yt.type!=="float32"&&yt.type!=="float64"||ft.type!=="float32"&&ft.type!=="float64"||st.type!=="float32"&&st.type!=="float64"||bt.type!=="float32"&&bt.type!=="float64"||vt.type!=="float32"&&vt.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const b=d(2517),tt=d(8520),nt=d(5060),ot=d(2039);function ht(){const kt="add_";return{body:`
  float ${kt}(float a, float b) {
    return a + b;
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function mt(){const kt="div_";return{body:`
  float ${kt}(float a, float b) {
    return a / b;
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function gt(){const kt="mul_";return{body:`
  float ${kt}(float a, float b) {
    return a * b;
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function yt(){const kt="sub_";return{body:`
  float ${kt}(float a, float b) {
    return a - b;
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function ft(){const kt="equal_";return{body:`
  float ${kt}(float a, float b) {
    return float(a == b);
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function st(){const kt="greater_";return{body:`
  float ${kt}(float a, float b) {
    return float(a > b);
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function bt(){const kt="less_";return{body:`
  float ${kt}(float a, float b) {
    return float(a < b);
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function vt(){const kt="and_";return{body:`
  float ${kt}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function xt(){const kt="or_";return{body:`
  float ${kt}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function wt(){const kt="xor_";return{body:`
  float ${kt}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}function St(){return function(kt){const Mt=`${kt}_`;return{body:`
  float ${Mt}(float a, float b) {
    return ${kt}(a, b);
  }
  vec4 ${Mt}(vec4 v1, vec4 v2) {
    return ${kt}(v1, v2);
  }
  `,name:Mt,type:tt.FunctionType.ValueBased}}("pow")}function _t(){const kt="prelu_";return{body:`
  float ${kt}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${kt}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:kt,type:tt.FunctionType.ValueBased}}e.glslAdd=ht,e.glslDiv=mt,e.glslMul=gt,e.glslSub=yt,e.glslEqual=ft,e.glslGreater=st,e.glslLess=bt,e.glslAnd=vt,e.glslOr=xt,e.glslXor=wt,e.glslPow=St,e.glslPRelu=_t;const Tt=(kt,Mt,Ot,Dt=Mt[0].type,At)=>{const It=kt.session.pack?ot.TextureType.packed:ot.TextureType.unpacked;return{name:Ot.name,inputNames:["A","B"],inputTypes:[It,It],cacheHint:At,get:()=>Et(kt,Mt,Ot,Dt)}},Et=(kt,Mt,Ot,Dt=Mt[0].type)=>{const At=kt.session.pack?ot.TextureType.packed:ot.TextureType.unpacked,It=!b.ShapeUtil.areEqual(Mt[0].dims,Mt[1].dims);let jt=Mt[0].dims;const qt=kt.session.pack;if(It){const Wt=b.BroadcastUtil.calcShape(Mt[0].dims,Mt[1].dims,!1);if(!Wt)throw new Error("Can't perform binary op on the given tensors");jt=Wt;const Lt=jt.length,Ut=Mt[0].dims.length!==0?Mt[0].dims.length:1,tn=Mt[1].dims.length!==0?Mt[1].dims.length:1,Kt=Mt[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",an=Mt[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",ln=(0,nt.getGlsl)(kt.session.backend.glContext.version),hn=qt?`
      ${Ot.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${Ot.name}(a, b);
        ${ln.output} = result;
      }`:`
      ${Ot.body}
      float process(int indices[${Lt}]) {
        int aindices[${Ut}];
        int bindices[${tn}];
        ${Kt}
        ${an}
        return ${Ot.name}(_A(aindices), _B(bindices));
      }`;return{name:Ot.name,inputNames:["A","B"],inputTypes:[At,At],output:{dims:jt,type:Dt,textureType:At},shaderSource:hn,hasMain:qt}}const Jt=(0,nt.getGlsl)(kt.session.backend.glContext.version),Bt=`
    ${Ot.body}
    void main() {
      vec4 v1 = ${Jt.texture2D}(A, TexCoords);
      vec4 v2 = ${Jt.texture2D}(B, TexCoords);
      vec4 result = ${Ot.name}(v1, v2);
      ${Jt.output} = result;
    }
    `;return{name:Ot.name,inputNames:["A","B"],inputTypes:[At,At],output:{dims:Mt[0].dims,type:Dt,textureType:At},shaderSource:Bt,hasMain:!0}};e.add=(kt,Mt)=>[kt.run(Tt(kt,Mt,ht()),Mt)],e.and=(kt,Mt)=>[kt.run(Tt(kt,Mt,vt(),"bool"),Mt)],e.div=(kt,Mt)=>[kt.run(Tt(kt,Mt,mt()),Mt)],e.equal=(kt,Mt)=>[kt.run(Tt(kt,Mt,ft(),"bool"),Mt)],e.greater=(kt,Mt)=>[kt.run(Tt(kt,Mt,st(),"bool"),Mt)],e.less=(kt,Mt)=>[kt.run(Tt(kt,Mt,bt(),"bool"),Mt)],e.mul=(kt,Mt)=>[kt.run(Tt(kt,Mt,gt()),Mt)],e.or=(kt,Mt)=>[kt.run(Tt(kt,Mt,xt(),"bool"),Mt)],e.pow=(kt,Mt)=>[kt.run(Tt(kt,Mt,St()),Mt)],e.pRelu=(kt,Mt)=>[kt.run(Tt(kt,Mt,_t()),Mt)],e.sub=(kt,Mt)=>[kt.run(Tt(kt,Mt,yt()),Mt)],e.xor=(kt,Mt)=>[kt.run(Tt(kt,Mt,wt(),"bool"),Mt)]},4196:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const b=d(2517);e.cast=(nt,ot,ht)=>(tt(ot),[nt.cast(ot[0],ht)]),e.parseCastAttributes=nt=>b.ProtoUtil.tensorDataTypeFromProto(nt.attributes.getInt("to"));const tt=nt=>{if(!nt||nt.length!==1)throw new Error("Cast requires 1 input.");if(nt[0].type==="string")throw new Error("Invalid input type.")}},1163:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const b=d(5060),tt=d(2039),nt=d(9390),ot=d(2827);e.createPackedConcatProgramInfoLoader=(mt,gt,yt)=>{const ft=(st=gt.length,bt=yt.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:st},(vt,xt)=>`X${xt}`),inputTypes:Array(st).fill(tt.TextureType.packed),cacheHint:bt});var st,bt;return Object.assign(Object.assign({},ft),{get:()=>((vt,xt,wt,St)=>{const _t=wt[0].dims.slice();if(St>=_t.length||St<-1*_t.length)throw new Error("axis specified for concat doesn't match input dimensionality");St<0&&(St=_t.length+St);const Tt=_t.slice(0);for(let Kt=1;Kt<wt.length;Kt++){const an=wt[Kt].dims.slice();for(let ln=0;ln<_t.length;ln++)if(ln===St)Tt[St]+=an[ln];else if(_t[ln]!==an[ln])throw new Error("non concat dimensions must match")}const Et=Tt.length,kt=(0,ot.getChannels)("coords",Et),Mt=(0,nt.getCoordsDataType)(Et),Ot=(0,ot.unpackFromChannel)(),Dt=wt.map(Kt=>Kt.dims),At=(0,nt.getGlChannels)(Et),It=new Array(Dt.length-1);It[0]=Dt[0][St];for(let Kt=1;Kt<It.length;Kt++)It[Kt]=It[Kt-1]+Dt[Kt][St];const jt=At[St],qt=At.slice(-2),Jt=At.join();let Bt=`if (${jt} < ${It[0]}) {
        return getChannel(
            getX0(${Jt}), vec2(${qt.join()}));
        }`;for(let Kt=1;Kt<It.length;Kt++){const an=It[Kt-1];Bt+=`
            if (${jt} < ${It[Kt]}  && ${jt} >= ${It[Kt-1]}) {
              return getChannel(
                getX${Kt}(${ht(At,jt,an)}),
                vec2(${ht(qt,jt,an)}));
            }`}const Wt=It.length,Lt=It[It.length-1];Bt+=`
            return getChannel(
              getX${Wt}(${ht(At,jt,Lt)}),
              vec2(${ht(qt,jt,Lt)}));`;const Ut=(0,b.getGlsl)(vt.session.backend.glContext.version),tn=`
          ${Ot}
          float getValue(${At.map(Kt=>"int "+Kt)}) {
            ${Bt}
          }

          void main() {
            ${Mt} coords = getOutputCoords();
            int lastDim = coords.${At[Et-1]};
            coords.${At[Et-1]} = coords.${At[Et-2]};
            coords.${At[Et-2]} = lastDim;

            vec4 result = vec4(getValue(${kt}), 0., 0., 0.);

            ${kt[Et-1]} = ${kt[Et-1]} + 1;
            if (${kt[Et-1]} < ${Tt[Et-1]}) {
              result.g = getValue(${kt});
            }

            ${kt[Et-2]} = ${kt[Et-2]} + 1;
            if (${kt[Et-2]} < ${Tt[Et-2]}) {
              result.a = getValue(${kt});
            }

            ${kt[Et-1]} = ${kt[Et-1]} - 1;
            if (${kt[Et-2]} < ${Tt[Et-2]} &&
                ${kt[Et-1]} < ${Tt[Et-1]}) {
              result.b = getValue(${kt});
            }
            ${Ut.output} = result;
          }
        `;return Object.assign(Object.assign({},xt),{output:{dims:Tt,type:wt[0].type,textureType:tt.TextureType.packed},shaderSource:tn,hasMain:!0})})(mt,ft,gt,yt.axis)})};const ht=(mt,gt,yt)=>{const ft=mt.indexOf(gt);return mt.map((st,bt)=>bt===ft?`${st} - ${yt}`:st).join()}},2069:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const b=d(246),tt=d(2039),nt=d(1163);e.concat=(st,bt,vt)=>(ft(bt),st.session.pack&&bt[0].dims.length>1?[st.run((0,nt.createPackedConcatProgramInfoLoader)(st,bt,vt),bt)]:[st.run(ot(st,bt,vt),bt)]);const ot=(st,bt,vt)=>{const xt=(wt=bt.length,St=vt.cacheKey,{name:"Concat",inputNames:Array.from({length:wt},(_t,Tt)=>`X${Tt}`),inputTypes:Array(wt).fill(tt.TextureType.unpacked),cacheHint:St});var wt,St;return Object.assign(Object.assign({},xt),{get:()=>((_t,Tt,Et,kt)=>{const Mt=Et[0].dims.slice();if(kt>=Mt.length||kt<-1*Mt.length)throw new Error("axis specified for concat doesn't match input dimensionality");kt<0&&(kt=Mt.length+kt);const Ot=Mt.slice(0);for(let Jt=1;Jt<Et.length;Jt++){const Bt=Et[Jt].dims.slice();for(let Wt=0;Wt<Mt.length;Wt++)if(Wt===kt)Ot[kt]+=Bt[Wt];else if(Mt[Wt]!==Bt[Wt])throw new Error("non concat dimensions must match")}const Dt=Ot.length,At=new Array(Et.length);let It=0;for(let Jt=0;Jt<At.length;++Jt)It+=Et[Jt].dims[kt],At[Jt]=It;let jt="";jt=Et.length<5?ht(At):mt(At);const qt=`
        ${gt(Et.length,Dt)}
        ${yt(At)}
        ${jt}
        float process(int indices[${Dt}]) {
          int textureIndex = getTextureWhereDataResides (indices[${kt}]);

          if(textureIndex != 0) {
            indices[${kt}] = indices[${kt}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},Tt),{output:{dims:Ot,type:Et[0].type,textureType:tt.TextureType.unpacked},shaderSource:qt})})(0,xt,bt,vt.axis)})},ht=st=>`int getTextureWhereDataResides(int index) {
      ${st.map((bt,vt)=>`if(index<${bt}) {return ${vt};}
`).join("")}
    }`,mt=st=>ht(st),gt=(st,bt)=>{const vt=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${bt}]) {`];for(let xt=0;xt<st;++xt)xt===0?vt.push(`	if (textureIndex == ${xt}) { return _X${xt}(indices); }`):xt===st-1?vt.push(`	else { return _X${xt}(indices); }`):vt.push(`	else if (textureIndex == ${xt}) { return _X${xt}(indices); }`);return vt.push("	}"),vt.join(`
`)},yt=st=>{const bt=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let vt=0;vt<st.length;++vt)vt===0?bt.push(`	if (index == ${vt}) { return ${st[vt]}; }`):vt===st.length-1?bt.push(`	else { return ${st[vt]}; }`):bt.push(`	else if (index == ${vt}) { return ${st[vt]}; }`);return bt.push("	}"),bt.join(`
`)};e.parseConcatAttributes=st=>(0,b.createAttributeWithCacheKey)({axis:st.attributes.getInt("axis")});const ft=st=>{if(!st||st.length<1)throw new Error("too few inputs");const bt=st[0].type,vt=st[0].dims.length;if(bt==="string")throw new Error("string tensor is not supported yet");for(const xt of st){if(xt.type!==bt)throw new Error("input tensors should be one type");if(xt.dims.length!==vt)throw new Error("input tensors should have the same shape")}}},4770:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const b=d(6231),tt=d(5060),nt=d(2039),ot=d(8138),ht=d(2823);e.createUnpackedGroupedConvProgramInfoLoader=(mt,gt,yt)=>{const ft=(st=gt.length>2,bt=yt.cacheKey,{name:"GroupedConv",inputNames:st?["X","W","Bias"]:["X","W"],inputTypes:st?[nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked]:[nt.TextureType.unpacked,nt.TextureType.unpacked],cacheHint:bt});var st,bt;return Object.assign(Object.assign({},ft),{get:()=>((vt,xt,wt,St)=>{const _t=xt.length>2?"value += getBias(output_channel);":"",Tt=xt[0].dims.slice(),Et=xt[1].dims.slice(),kt=Et[0]/St.group;b.Logger.verbose("GroupedConv",`autpPad:${St.autoPad}, dilations:${St.dilations}, group:${St.group}, kernelShape:${St.kernelShape}, pads:${St.pads}, strides:${St.strides}`);const Mt=(0,ot.calculateOutputShape)(Tt,Et,St.dilations,St.pads,St.strides),Ot=(0,tt.getGlsl)(vt.session.backend.glContext.version),{activationFunction:Dt,applyActivation:At}=(0,ht.getActivationSnippet)(St),It=`
  const ivec2 strides = ivec2(${St.strides[0]}, ${St.strides[1]});
  const ivec2 pads = ivec2(${St.pads[0]}, ${St.pads[1]});
  ${Dt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${kt};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${Et[1]}; wInChannel++) {
      int input_channel = group_id * ${Et[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${Et[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${St.dilations[0]};

        if (xHeight < 0 || xHeight >= ${Tt[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${Et[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${St.dilations[1]};
          if (xWidth < 0 || xWidth >= ${Tt[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${_t}
    ${At}
    ${Ot.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},wt),{output:{dims:Mt,type:xt[0].type,textureType:nt.TextureType.unpacked},shaderSource:It,hasMain:!0})})(mt,gt,ft,yt)})}},1386:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const b=d(8138),tt=d(8555),nt=d(708);e.conv2DPackedPointwise=(ot,ht,mt)=>{const gt=ht[0].dims,yt=ht[1].dims,ft=(0,b.calculateOutputShape)(gt,yt,mt.dilations,mt.pads,mt.strides),st=ot.reshapePacked(ht[0],[gt[1],gt[2]*gt[3]]),bt=ot.reshapePacked(ht[1],[yt[0],yt[1]]),vt=ht.length>2?[bt,st,ht[2]]:[bt,st],xt=ot.run((0,nt.createPackedMatmulProgramInfoLoader)(ot,vt,mt),vt);return ot.reshapePacked(xt,ft)},e.conv2DPacked=(ot,ht,mt)=>{const gt=ht[0].dims,yt=ht[1].dims,ft=(0,b.calculateOutputShape)(gt,yt,mt.dilations,mt.pads,mt.strides),st=ot.run((0,tt.createPackedIm2ColProgramInfoLoader)(ot,ht[0],ht[1],ft,mt),[ht[0]]),bt=ot.reshapePacked(ht[1],[yt[0],yt[1]*yt[2]*yt[3]]),vt=ht.length===3?[bt,st,ht[2]]:[bt,st],xt=ot.run((0,nt.createPackedMatmulProgramInfoLoader)(ot,vt,mt),vt);return ot.reshapePacked(xt,ft)}},9663:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const b=d(246),tt=d(5060),nt=d(2039),ot=d(2823),ht=(bt,vt,xt,wt,St,_t)=>(bt-1)*vt+xt+(wt-1)*St+1-_t,mt=(bt,vt,xt,wt,St)=>{const _t=Math.floor(bt/2);vt==="SAME_UPPER"?(xt[wt]=_t,xt[St]=bt-_t):vt==="SAME_LOWER"&&(xt[wt]=bt-_t,xt[St]=_t)};e.convTranspose=(bt,vt,xt)=>(st(vt,xt),gt(bt,vt,xt));const gt=(bt,vt,xt)=>{const wt=ft(xt,vt);return[yt(bt,vt,wt)]},yt=(bt,vt,xt)=>bt.run(((wt,St,_t)=>{const Tt=(Et=St.length>2,kt=_t.cacheKey,{name:"ConvTranspose",inputNames:Et?["X","W","B"]:["X","W"],inputTypes:Et?[nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked]:[nt.TextureType.unpacked,nt.TextureType.unpacked],cacheHint:kt});var Et,kt;return Object.assign(Object.assign({},Tt),{get:()=>((Mt,Ot,Dt,At)=>{const It=Ot.length>2?"getB(output_channel)":"0.0",jt=Ot[0].dims,qt=Ot[1].dims,Jt=qt[1],Bt=qt[0]/At.group,Wt=[Ot[0].dims[0],Ot[1].dims[1]*At.group,...At.outputShape],Lt=(0,tt.getGlsl)(Mt.session.backend.glContext.version),{activationFunction:Ut,applyActivation:tn}=(0,ot.getActivationSnippet)(At),Kt=`
  const ivec2 strides = ivec2(${At.strides[0]}, ${At.strides[1]});
  const ivec2 pads = ivec2(${At.pads[0]}, ${At.pads[1]});
  ${Ut}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${Jt};
    int wOutChannel = output_channel - group_id * ${Jt};

    float value = ${It};
    for (int inChannelOffset = 0; inChannelOffset < ${Bt}; inChannelOffset++) {
      int input_channel = group_id * ${Bt} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${qt[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${qt[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${At.dilations[0]}, wHOff * ${At.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${jt[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${jt[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${tn}
    ${Lt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Dt),{output:{dims:Wt,type:Ot[0].type,textureType:nt.TextureType.unpacked},shaderSource:Kt,hasMain:!0})})(wt,St,Tt,_t)})})(bt,vt,xt),vt),ft=(bt,vt)=>{const xt=bt.kernelShape.slice();if(bt.kernelShape.length===0)for(let Tt=2;Tt<vt[1].dims.length;++Tt)xt.push(vt[1].dims[Tt]);const wt=bt.pads.slice(),St=bt.outputShape.slice();((Tt,Et,kt,Mt,Ot,Dt,At,It)=>{const jt=Tt.length-2,qt=It.length===0;for(let Jt=0;Jt<jt;++Jt){const Bt=qt?Tt[Jt+2]*Dt[Jt]:It[Jt],Wt=ht(Tt[Jt+2],Dt[Jt],Ot[Jt],Et[Jt],kt[Jt],Bt);mt(Wt,Mt,Ot,Jt,Jt+jt),qt&&It.push(Dt[Jt]*(Tt[Jt+2]-1)+At[Jt]+(Et[Jt]-1)*kt[Jt]+1-Ot[Jt]-Ot[Jt+jt])}})(vt[0].dims,xt,bt.dilations,bt.autoPad,wt,bt.strides,bt.outputPadding,St);const _t=Object.assign({},bt);return Object.assign(_t,{kernelShape:xt,pads:wt,outputShape:St,cacheKey:bt.cacheKey}),_t};e.parseConvTransposeAttributes=bt=>{const vt=bt.attributes,xt=(0,ot.parseInternalActivationAttributes)(vt),wt=vt.getString("auto_pad","NOTSET"),St=vt.getInts("dilations",[1,1]),_t=vt.getInt("group",1),Tt=vt.getInts("kernel_shape",[]),Et=vt.getInts("output_padding",[0,0]),kt=vt.getInts("output_shape",[]),Mt=vt.getInts("pads",[0,0,0,0]),Ot=vt.getInts("strides",[1,1]);return(0,b.createAttributeWithCacheKey)(Object.assign({autoPad:wt,dilations:St,group:_t,kernelShape:Tt,outputPadding:Et,outputShape:kt,pads:Mt,strides:Ot},xt))};const st=(bt,vt)=>{if(!bt||bt.length!==2&&bt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(bt[0].dims.length!==4||bt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(bt[0].dims[1]!==bt[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const xt=bt[1].dims[1]*vt.group;if(bt.length===3&&(bt[2].dims.length!==1||bt[2].dims[0]!==xt))throw new Error("invalid bias");const wt=bt[0].dims.length-2;if(vt.dilations.length!==wt)throw new Error(`dilations should be ${wt}D`);if(vt.strides.length!==wt)throw new Error(`strides should be ${wt}D`);if(vt.pads.length!==2*wt)throw new Error(`pads should be ${2*wt}D`);if(vt.outputPadding.length!==wt)throw new Error(`output_padding should be ${wt}D`);if(vt.kernelShape.length!==0&&vt.kernelShape.length!==bt[1].dims.length-2)throw new Error("invalid kernel shape");if(vt.outputShape.length!==0&&vt.outputShape.length!==bt[0].dims.length-2)throw new Error("invalid output shape");if(bt[0].type!=="float32"||bt[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(bt.length===3&&bt[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const b=d(246),tt=d(2517),nt=d(4770),ot=d(1386),ht=d(9828),mt=d(2823),gt=d(3248),yt=d(5623);e.calculateOutputShape=(wt,St,_t,Tt,Et)=>{const kt=wt[0],Mt=wt.slice(2),Ot=Mt.length,Dt=St[0],At=St.slice(2).map((jt,qt)=>jt+(jt-1)*(_t[qt]-1)),It=Mt.map((jt,qt)=>jt+Tt[qt]+Tt[qt+Ot]).map((jt,qt)=>Math.floor((jt-At[qt]+Et[qt])/Et[qt]));return[kt,Dt].concat(...It)},e.conv=(wt,St,_t)=>(xt(St,_t),ft(wt,St,_t));const ft=(wt,St,_t)=>{const Tt=vt(_t,St),Et=wt.session.pack,kt=Tt.kernelShape[0]===1&&Tt.kernelShape[1]===1;return Tt.group>1?[wt.run((0,nt.createUnpackedGroupedConvProgramInfoLoader)(wt,St,Tt),St)]:kt&&Et?[st(wt,St,Tt)]:Et&&St[0].dims.length===4&&St[0].dims[0]===1&&!kt?[(0,ot.conv2DPacked)(wt,St,Tt)]:[bt(wt,St,Tt)]},st=(wt,St,_t)=>{const Tt=St[0].dims,Et=St[1].dims,kt=(0,e.calculateOutputShape)(Tt,Et,_t.dilations,_t.pads,_t.strides),Mt=wt.reshapeUnpacked(St[0],[Tt[1],Tt[2]*Tt[3]]),Ot=wt.reshapeUnpacked(St[1],[Et[0],Et[1]]),Dt=St.length>2?[Ot,Mt,St[2]]:[Ot,Mt],At=wt.run((0,yt.createMatmulProgramInfoLoader)(Dt,_t),Dt);return wt.reshapeUnpacked(At,kt)},bt=(wt,St,_t)=>{const Tt=St[0].dims,Et=St[1].dims,kt=(0,e.calculateOutputShape)(Tt,Et,_t.dilations,_t.pads,_t.strides),Mt=wt.run((0,gt.createIm2ColProgramInfoLoader)(wt,St[0],St[1],kt,_t),[St[0]]),Ot=St.length===3?[Mt,St[1],St[2]]:[Mt,St[1]];return wt.run((0,ht.createDotProductProgramInfoLoader)(wt,St,kt,_t),Ot)},vt=(wt,St)=>{const _t=wt.kernelShape.slice();if(wt.kernelShape.length===0)for(let kt=2;kt<St[1].dims.length;++kt)_t.push(St[1].dims[kt]);const Tt=wt.pads.slice();tt.PoolConvUtil.adjustPadsBasedOnAutoPad(St[0].dims,wt.strides,wt.dilations,_t,Tt,wt.autoPad);const Et=Object.assign({},wt);return Object.assign(Et,{kernelShape:_t,pads:Tt,cacheKey:wt.cacheKey}),Et};e.parseConvAttributes=wt=>{const St=wt.attributes,_t=(0,mt.parseInternalActivationAttributes)(St),Tt=St.getString("auto_pad","NOTSET"),Et=St.getInts("dilations",[1,1]),kt=St.getInt("group",1),Mt=St.getInts("kernel_shape",[]),Ot=St.getInts("pads",[0,0,0,0]),Dt=St.getInts("strides",[1,1]);return(0,b.createAttributeWithCacheKey)(Object.assign({autoPad:Tt,dilations:Et,group:kt,kernelShape:Mt,pads:Ot,strides:Dt},_t))};const xt=(wt,St)=>{if(!wt||wt.length!==2&&wt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(wt[0].dims.length!==4||wt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(wt[0].dims[1]!==wt[1].dims[1]*St.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(wt.length===3&&(wt[2].dims.length!==1||wt[1].dims[0]!==wt[2].dims[0]))throw new Error("invalid bias");const _t=wt[0].dims.length-2;if(St.dilations.length!==_t)throw new Error(`dilations should be ${_t}D`);if(St.strides.length!==_t)throw new Error(`strides should be ${_t}D`);if(St.pads.length!==2*_t)throw new Error(`pads should be ${2*_t}D`);if(St.kernelShape.length!==0&&St.kernelShape.length!==wt[1].dims.length-2)throw new Error("invalid kernel shape");if(wt[0].type!=="float32"||wt[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(wt.length===3&&wt[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const b=d(3738);e.depthToSpace=(nt,ot,ht)=>{tt(ot);const mt=ht.blocksize,gt=mt*mt,yt=ht.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],ft=ht.mode==="DCR"?[ot[0].dims[0],mt,mt,ot[0].dims[1]/gt,ot[0].dims[2],ot[0].dims[3]]:[ot[0].dims[0],ot[0].dims[1]/gt,mt,mt,ot[0].dims[2],ot[0].dims[3]],st=nt.reshapeUnpacked(ot[0],ft),bt={perm:yt,cacheKey:`${yt}`},[vt]=(0,b.transpose)(nt,[st],bt),xt=[ot[0].dims[0],ot[0].dims[1]/gt,ot[0].dims[2]*mt,ot[0].dims[3]*mt];return[nt.reshapeUnpacked(vt,xt)]},e.parseDepthToSpaceAttributes=nt=>{const ot=nt.attributes.getInt("blocksize");if(ot<1)throw new Error(`blocksize must be >= 1, but got : ${ot} for DepthToSpace`);const ht=nt.attributes.getString("mode","DCR");if(ht!=="DCR"&&ht!=="CRD")throw new Error(`unrecognized mode: ${ht} for DepthToSpace`);return{mode:ht,blocksize:ot}};const tt=nt=>{if(nt.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${nt.length}`);if(nt[0].type==="string"||nt[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const b=d(2517),tt=d(5060),nt=d(2039),ot=d(2823),ht=d(3248);e.createDotProductProgramInfoLoader=(mt,gt,yt,ft)=>{const st=((bt,vt)=>({name:"ConvDotProduct",inputNames:bt?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:bt?[nt.TextureType.unpacked,nt.TextureType.packedLastDimension,nt.TextureType.unpacked]:[nt.TextureType.unpacked,nt.TextureType.packedLastDimension],cacheKey:vt.activationCacheKey}))(gt.length>2,ft);return Object.assign(Object.assign({},st),{get:()=>((bt,vt,xt,wt,St)=>{const _t=xt[0].dims,Tt=xt[1].dims,Et=[Tt[0],Math.ceil(_t[1]*Tt[2]*Tt[3]/4)],kt=(0,ht.calculateIm2ColDims)(_t,Tt,wt),[Mt,Ot]=bt.calculateTextureWidthAndHeight(Et,nt.TextureType.packedLastDimension),Dt=b.ShapeUtil.computeStrides(kt),[At,It]=bt.calculateTextureWidthAndHeight(kt,nt.TextureType.packedLastDimension),jt=wt.length,qt=xt.length<3?"0.0":"_B(b)",Jt=Math.ceil(_t[1]*Tt[2]*Tt[3]/4),{activationFunction:Bt,applyActivation:Wt}=(0,ot.getActivationSnippet)(St),Lt=(0,tt.getGlsl)(bt.session.backend.glContext.version),Ut=`
${Bt}
float process(int indices[${jt}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${Dt[0]} + im2col[1] * ${Dt[1]} + im2col[2] * ${Dt[2]};
  int kernelOffset = indices[1] * ${Et[1]};
  float value = ${qt};
  for (int i = 0; i < ${Jt}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${At}, ${It});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${Mt}, ${Ot});
    value += dot(${Lt.texture2D}(Im2Col, im2colCoords), ${Lt.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${Wt}
  return value;
}`;return Object.assign(Object.assign({},vt),{output:{dims:wt,type:xt[0].type,textureType:nt.TextureType.unpacked},shaderSource:Ut})})(mt,st,gt,yt,ft)})}},7992:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const b=d(2517);e.flatten=(nt,ot,ht)=>{tt(ot,ht);const mt=b.ShapeUtil.flattenShape(ot[0].dims,ht);return[nt.reshapeUnpacked(ot[0],mt)]},e.parseFlattenAttributes=nt=>nt.attributes.getInt("axis",1);const tt=(nt,ot)=>{if(!nt||nt.length!==1)throw new Error("Flatten requires 1 input.");const ht=nt[0].dims.length;if(ht===0)throw new Error("scalar tensor is not supported.");if(ot<-ht||ot>ht)throw new Error("Invalid axis");if(nt[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const b=d(2517),tt=d(4909);e.getActivationSnippet=function(nt){let ot;switch(nt.activation){case"Relu":ot=(0,tt.glslRelu)();break;case"Sigmoid":ot=(0,tt.glslSigmoid)();break;case"Clip":ot=(0,tt.glslClip)(nt.clipMin,nt.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const ht=ot.name;return{activationFunction:ot.body,applyActivation:`value = ${ht}_(value);`}},e.parseInternalActivationAttributes=nt=>{const ot=nt.getString("activation","");if(ot==="Clip"){const[ht,mt]=nt.getFloats("activation_params",[b.MIN_CLIP,b.MAX_CLIP]);return{activation:ot,clipMax:mt,clipMin:ht,activationCacheKey:`${ot}:${ht},${mt}`}}return{activation:ot,activationCacheKey:ot}}},1253:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const b=d(246),tt=d(782),nt=d(2517),ot=d(2039);e.gather=(yt,ft,st)=>(gt(ft,st.axis),[yt.run(mt(yt,ft,st),ft)]),e.parseGatherAttributes=yt=>(0,b.createAttributeWithCacheKey)({axis:yt.attributes.getInt("axis",0)});const ht={name:"Gather",inputNames:["A","B"],inputTypes:[ot.TextureType.unpacked,ot.TextureType.unpacked]},mt=(yt,ft,st)=>{const bt=Object.assign(Object.assign({},ht),{cacheHint:st.cacheKey});return Object.assign(Object.assign({},bt),{get:()=>((vt,xt,wt,St)=>{const _t=wt[0].dims.slice(),Tt=wt[1].dims.slice(),Et=new Array(_t.length+Tt.length-1);St=nt.ShapeUtil.normalizeAxis(St,_t.length);const kt=[];for(let Ot=0;Ot<Et.length;Ot++)Ot<St?(Et[Ot]=_t[Ot],kt.push(`inputIdx[${Ot}] = outputIdx[${Ot}];`)):Ot<St+Tt.length?(Et[Ot]=Tt[Ot-St],kt.push(`indexDataIdx[${Ot-St}] = outputIdx[${Ot}];`)):(Et[Ot]=_t[Ot-Tt.length+1],kt.push(`inputIdx[${Ot-Tt.length+1}] = outputIdx[${Ot}];`));const Mt=`
      float process(int outputIdx[${Et.length||1}]) {
        int inputIdx[${_t.length}];
        int indexDataIdx[${Tt.length||1}];
        indexDataIdx[0] = 0;
        ${kt.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${St}] = idx < 0 ? idx + ${_t[St]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},xt),{output:{dims:Et,type:wt[0].type,textureType:ot.TextureType.unpacked},shaderSource:Mt})})(0,bt,ft,st.axis)})},gt=(yt,ft)=>{if(!yt||yt.length!==2)throw new Error("Gather requires 2 inputs.");const st=yt[0].dims.length;if(st<1)throw new Error("Invalid input shape.");if(ft<-st||ft>st-1)throw new Error("Invalid axis.");if(tt.NUMBER_TYPES.indexOf(yt[0].type)===-1)throw new Error("Invaid input type.");if(yt[1].type!=="int32"&&yt[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const b=d(246),tt=d(2517),nt=d(2039);e.gemm=(yt,ft,st)=>(gt(ft,st),[yt.run(ht(ft,st),ft)]);const ot=(yt,ft)=>{const st=yt.attributes.getInt("transA",0)!==0,bt=yt.attributes.getInt("transB",0)!==0,vt=yt.attributes.getFloat("alpha",1),xt=yt.attributes.getFloat("beta",1);return(0,b.createAttributeWithCacheKey)({transA:st,transB:bt,alpha:vt,beta:xt,isOptionalC:ft})};e.parseGemmAttributesV7=yt=>ot(yt,!1),e.parseGemmAttributesV11=yt=>ot(yt,!0);const ht=(yt,ft)=>{const st={name:"Gemm",inputNames:yt.length===3?["A","B","C"]:["A","B"],inputTypes:yt.length===3?[nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked]:[nt.TextureType.unpacked,nt.TextureType.unpacked],key:ft.cacheKey};return Object.assign(Object.assign({},st),{get:()=>mt(st,yt,ft)})},mt=(yt,ft,st)=>{const bt=ft[0].dims.slice(),vt=ft[1].dims.slice(),[xt,wt]=tt.GemmUtil.getShapeOfGemmResult(bt,st.transA,vt,st.transB,ft.length===3?ft[2].dims:void 0),St=[xt,wt];if(!St)throw new Error("Can't use gemm on the given tensors");let _t=bt[bt.length-1],Tt="";st.transA&&(_t=bt[0]),st.transA&&st.transB?Tt="value += _A_T(a) * _B_T(b);":st.transA&&!st.transB?Tt="value += _A_T(a) * _B(b);":!st.transA&&st.transB?Tt="value += _A(a) * _B_T(b);":st.transA||st.transB||(Tt="value += _A(a) * _B(b);");const Et=St.length,kt=`
      float process(int indices[${Et}]) {
          int a[${Et}];
          int b[${Et}];
          ${ft.length===3?`int c[${ft[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${ft.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${_t}; ++k) {
              a[${Et-1}] = k;
              b[${Et-2}] = k;
              ${Tt}
          }

          value = value * alpha;
          ${ft.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},yt),{output:{dims:St,type:ft[0].type,textureType:nt.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:st.alpha},{name:"beta",type:"float",data:st.beta}],shaderSource:kt})},gt=(yt,ft)=>{if(!yt)throw new Error("Input is missing");if(ft.isOptionalC&&(yt.length<2||yt.length>3))throw new Error("Invaid input shape.");if(!ft.isOptionalC&&yt.length!==3)throw new Error("Gemm requires 3 inputs");if(yt.length===3&&yt[2].dims.length!==1&&yt[2].dims.length!==2)throw new Error("Invalid input shape of C");if(yt[0].type!=="float32"&&yt[0].type!=="float64"||yt[1].type!=="float32"&&yt[1].type!=="float64"||yt.length===3&&yt[2].type!=="float32"&&yt[2].type!=="float64")throw new Error("Invalid input type.");if(yt[0].type!==yt[1].type||yt.length===3&&yt[0].type!==yt[2].type)throw new Error("Input types are mismatched")}},8555:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const b=d(5060),tt=d(2039),nt=d(2827);e.createPackedIm2ColProgramInfoLoader=(ot,ht,mt,gt,yt)=>{const ft=(st=yt.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[tt.TextureType.packed],cacheHint:st});var st;return Object.assign(Object.assign({},ft),{get:()=>((bt,vt,xt,wt,St,_t)=>{const Tt=xt.dims,Et=wt.dims,kt=St.length,Mt=[Et[1]*Et[2]*Et[3],St[2]*St[3]],Ot=Et[2]*Et[3],Dt=(0,nt.unpackFromChannel)(),At=(0,b.getGlsl)(bt.session.backend.glContext.version);let It="";for(let qt=0;qt<=1;qt++)for(let Jt=0;Jt<=1;Jt++)It+=`
            blockIndex = rc.x + ${Jt};
            pos = rc.y + ${qt};

            if(blockIndex < ${Mt[1]} && pos < ${Mt[0]}) {
              offsetY = int(blockIndex / (${St[kt-1]})) * ${_t.strides[0]} -
                ${_t.pads[0]};
              d0 = offsetY + ${_t.dilations[0]} * (imod(pos, ${Ot}) / ${Et[2]});

              if(d0 < ${Tt[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${St[kt-1]}) * ${_t.strides[1]} -
                  ${_t.pads[1]};
                d1 = offsetX + ${_t.dilations[1]} * imod(imod(pos, ${Ot}), ${Et[2]});

                if(d1 < ${Tt[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${Ot}.);
                    innerDims = vec2(d0, d1);
                    result[${2*qt+Jt}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const jt=`
      ${Dt}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${It}
          ${At.output} = result;
      }
            `;return Object.assign(Object.assign({},vt),{output:{dims:Mt,type:xt.type,textureType:tt.TextureType.packed},shaderSource:jt,hasMain:!0})})(ot,ft,ht,mt,gt,yt)})}},3248:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const b=d(2039);e.createIm2ColProgramInfoLoader=(tt,nt,ot,ht,mt)=>{const gt=(yt=mt.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[b.TextureType.unpacked],cacheHint:yt});var yt;return Object.assign(Object.assign({},gt),{get:()=>((ft,st,bt,vt,xt,wt)=>{const St=bt.dims,_t=vt.dims,Tt=xt.length,Et=(0,e.calculateIm2ColDims)(St,_t,xt,4),kt=`
        const int XC = ${St[1]};
        const int XH = ${St[2]};
        const int XW = ${St[3]};
        const int KH = ${wt.kernelShape[0]};
        const int KW = ${wt.kernelShape[1]};
        const int dilationH = ${wt.dilations[0]};
        const int dilationW = ${wt.dilations[1]};
        const int strideH = ${wt.strides[0]};
        const int strideW = ${wt.strides[1]};
        const int padH = ${wt.pads[0]};
        const int padW = ${wt.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${Tt}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${St.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},st),{output:{dims:Et,type:bt.type,textureType:b.TextureType.packedLastDimension},shaderSource:kt})})(0,gt,nt,ot,ht,mt)})},e.calculateIm2ColDims=(tt,nt,ot,ht=4)=>[ot[0],ot[2],ot[3],Math.ceil(tt[1]*nt[2]*nt[3]/ht)]},6572:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const b=d(246),tt=d(2039);e.imageScaler=(gt,yt,ft)=>(mt(yt),[gt.run(ot(gt,yt,ft),yt)]),e.parseImageScalerAttributes=gt=>{const yt=gt.attributes.getFloat("scale"),ft=gt.attributes.getFloats("bias");return(0,b.createAttributeWithCacheKey)({scale:yt,bias:ft})};const nt={name:"ImageScaler",inputNames:["X"],inputTypes:[tt.TextureType.unpacked]},ot=(gt,yt,ft)=>{const st=Object.assign(Object.assign({},nt),{cacheHint:ft.cacheKey});return Object.assign(Object.assign({},st),{get:()=>((bt,vt,xt,wt)=>{const St=xt[0].dims.slice(),_t=St.length,Tt=`
      ${ht(wt.bias.length)}
      float process(int indices[${_t}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},vt),{output:{dims:St,type:xt[0].type,textureType:tt.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:wt.bias.length,data:wt.bias},{name:"scale",type:"float",data:wt.scale}],shaderSource:Tt})})(0,st,yt,ft)})},ht=gt=>{const yt=[`float getBias(float bias[${gt}], int channel) {`];for(let ft=0;ft<gt;++ft)ft===0?yt.push(`	if (channel == ${ft}) { return bias[${ft}]; }`):ft===gt-1?yt.push(`	else { return bias[${ft}]; }`):yt.push(`	else if (channel == ${ft}) { return bias[${ft}]; }`);return yt.push("	}"),yt.join(`
`)},mt=gt=>{if(!gt||gt.length!==1)throw new Error("ImageScaler requires 1 input.");if(gt[0].dims.length!==4)throw new Error("Invalid input shape.");if(gt[0].type!=="float32"&&gt[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const b=d(5060),tt=d(2039);e.instanceNormalization=(yt,ft,st)=>{gt(ft);const bt=yt.run(ot(ft[0]),ft);return[yt.run(mt(yt,ft[0],st,bt.dims),[ft[0],bt,ft[1],ft[2]])]},e.parseInstanceNormalizationAttributes=yt=>yt.attributes.getFloat("epsilon",1e-5);const nt={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[tt.TextureType.unpacked]},ot=yt=>Object.assign(Object.assign({},nt),{get:()=>((ft,st)=>{const bt=st.dims.slice(),vt=bt[1],xt=bt[2]*bt[3],wt=[bt[0],vt],St=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${bt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${bt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${xt});
        temp = 0.0;
        for(int a2=0; a2<${bt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${bt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${xt});

        return v;
      }`;return Object.assign(Object.assign({},ft),{output:{dims:wt,type:st.type,textureType:tt.TextureType.packedLastDimension},shaderSource:St})})(nt,yt)}),ht={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[tt.TextureType.unpacked,tt.TextureType.packedLastDimension,tt.TextureType.unpacked,tt.TextureType.unpacked]},mt=(yt,ft,st,bt)=>{const vt=Object.assign(Object.assign({},ht),{cacheHint:`${st}`});return Object.assign(Object.assign({},vt),{get:()=>((xt,wt,St,_t,Tt)=>{const Et=(0,b.getGlsl)(xt.session.backend.glContext.version),[kt,Mt]=xt.calculateTextureWidthAndHeight(Tt,tt.TextureType.packedLastDimension),[Ot,Dt]=[kt/4,Mt],At=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${Ot}, ${Dt});
        return ${Et.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},wt),{output:{dims:St.dims,type:St.type,textureType:tt.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:_t}],shaderSource:At})})(yt,vt,ft,st,bt)})},gt=yt=>{if(!yt||yt.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const ft=yt[0],st=yt[1],bt=yt[2];if(ft.dims.length<3||st.dims.length!==1||bt.dims.length!==1)throw new Error("Invalid input shape.");if(st.dims[0]!==ft.dims[1]||bt.dims[0]!==ft.dims[1])throw new Error("Input shapes are mismatched.");if(ft.type!=="float32"&&ft.type!=="float64"||st.type!=="float32"&&st.type!=="float64"||bt.type!=="float32"&&bt.type!=="float64")throw new Error("Invalid input type.");if(yt[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const b=d(2517),tt=d(5060),nt=d(2039),ot=d(9390),ht=d(2823),mt=d(5623);e.createPackedMatmulProgramInfoLoader=(gt,yt,ft)=>{const st=(bt=yt.length>2,vt=ft.activationCacheKey,{name:"MatMul (packed)",inputNames:bt?["A","B","Bias"]:["A","B"],inputTypes:bt?[nt.TextureType.packed,nt.TextureType.packed,nt.TextureType.packed]:[nt.TextureType.packed,nt.TextureType.packed],cacheHint:vt});var bt,vt;return Object.assign(Object.assign({},st),{get:()=>((xt,wt,St,_t)=>{const Tt=St.length>2,Et=Tt?"value += getBiasForMatmul();":"",kt=St[0].dims,Mt=St[1].dims,Ot=b.BroadcastUtil.calcShape(kt,Mt,!0),Dt=!b.ShapeUtil.areEqual(St[0].dims,St[1].dims);if(!Ot)throw new Error("Can't use matmul on the given tensors");const At=kt[kt.length-1],It=Math.ceil(At/2),jt=kt.length,qt=Mt.length,Jt=(0,tt.getGlsl)(xt.session.backend.glContext.version),Bt=(0,ot.getCoordsDataType)(Ot.length),Wt=Ot.length,Lt=(0,ot.getGlChannels)(),{activationFunction:Ut,applyActivation:tn}=(0,ht.getActivationSnippet)(_t),Kt=Tt?`${(0,mt.getBiasForMatmul)(Bt,Lt,St[2].dims,Ot,!0)}`:"",an=Dt?`${function(Zt,xn,En,Cn){let Fn=[],Vn=[];const qn=En[0].dims,cr=En[1].dims,Bn=qn.length,ir=cr.length,tr=Cn.length,wr=tr-Bn,dr=tr-ir;Fn=qn.map((or,Pr)=>`coords.${xn[Pr+wr]}`),Fn[Bn-1]="i*2",Fn.join(", "),Vn=cr.map((or,Pr)=>`coords.${xn[Pr+dr]}`),Vn[ir-2]="i*2",Vn.join(", ");const Sr=b.BroadcastUtil.getBroadcastDims(qn,Cn),ar=b.BroadcastUtil.getBroadcastDims(cr,Cn),vr=Sr.map(or=>`coords.${xn[or+wr]} = 0;`).join(`
`),hr=ar.map(or=>`coords.${xn[or+dr]} = 0;`).join(`
`),Hn=`int lastDim = coords.${xn[tr-1]};
  coords.${xn[tr-1]} = coords.${xn[tr-2]};
  coords.${xn[tr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Zt} coords = getOutputCoords();
  ${Hn}
  ${vr}
  vec4 outputValue = getA(${Fn});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Zt} coords = getOutputCoords();
  ${Hn}
  ${hr}
  vec4 outputValue = getB(${Vn});
  return outputValue;
}`}(Bt,Lt,St,Ot)}`:"",ln=Dt?"getAAtOutCoordsMatmul(i)":`getA(${function(Zt,xn){let En="";for(let Cn=0;Cn<xn-2;Cn++)En+=`rc.${Zt[Cn]}, `;return En+=`rc.${Zt[xn-2]}, i*2`,En}(Lt,jt)})`,hn=Dt?"getBAtOutCoordsMatmul(i)":`getB(${function(Zt,xn){let En="";for(let Cn=0;Cn<xn-2;Cn++)En+=`rc.${Zt[Cn]}, `;return En+=`i*2, rc.${Zt[xn-1]}`,En}(Lt,qt)})`,kn=`
            ${an}
            ${Kt}
            ${Ut}
            void main() {
              ${Dt?"":`${Bt} rc =
          getOutputCoords(); int lastDim = rc.${Lt[Wt-1]}; rc.${Lt[Wt-1]} =
          rc.${Lt[Wt-2]}; rc.${Lt[Wt-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${It}; i++) {
                vec4 a = ${ln};
                vec4 b = ${hn};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${Et}
              ${tn}
              ${Jt.output} = value;
            }`;return Object.assign(Object.assign({},wt),{output:{dims:Ot,type:St[0].type,textureType:nt.TextureType.packed},shaderSource:kn,hasMain:!0})})(gt,st,yt,ft)})}},5623:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const b=d(2517),tt=d(2039),nt=d(9390),ot=d(2823),ht=d(708);function mt(ft,st){const bt=(vt=ft.length>2,xt=st.activationCacheKey,{name:"MatMul",inputNames:vt?["A","B","Bias"]:["A","B"],inputTypes:vt?[tt.TextureType.unpacked,tt.TextureType.unpacked,tt.TextureType.unpacked]:[tt.TextureType.unpacked,tt.TextureType.unpacked],cacheHint:xt});var vt,xt;return Object.assign(Object.assign({},bt),{get:()=>function(wt,St,_t){const Tt=St[0].dims,Et=St[1].dims,kt=b.BroadcastUtil.calcShape(Tt,Et,!0);if(!kt)throw new Error("Can't use matmul on the given tensors");const Mt=(0,nt.getCoordsDataType)(kt.length),Ot=(0,nt.getGlChannels)(),{activationFunction:Dt,applyActivation:At}=(0,ot.getActivationSnippet)(_t),It=St.length>2,jt=It?"value += getBiasForMatmul();":"",qt=It?`${yt(Mt,Ot,St[2].dims,kt,!1)}`:"",Jt=kt.length,Bt=Tt.length,Wt=Et.length,Lt=`
    ${Dt}
    ${qt}
    float process(int indices[${Jt}]) {
        int a[${Bt}];
        int b[${Wt}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${Tt[Tt.length-1]}; ++k) {
            a[${Bt-1}] = k;
            b[${Wt-2}] = k;
            value += _A(a) * _B(b);
        }
        ${jt}
        ${At}
        return value;
    }`;return Object.assign(Object.assign({},wt),{output:{dims:kt,type:St[0].type,textureType:tt.TextureType.unpacked},shaderSource:Lt})}(bt,ft,st)})}e.matMul=(ft,st,bt)=>(gt(st),ft.session.pack?[ft.run((0,ht.createPackedMatmulProgramInfoLoader)(ft,st,bt),st)]:[ft.run(mt(st,bt),st)]),e.parseMatMulAttributes=ft=>(0,ot.parseInternalActivationAttributes)(ft.attributes),e.createMatmulProgramInfoLoader=mt;const gt=ft=>{if(!ft||ft.length!==2)throw new Error("MatMul requires 2 inputs.");if(ft[0].dims[ft[0].dims.length-1]!==ft[1].dims[ft[1].dims.length-2])throw new Error("shared dimension does not match.");if(ft[0].type!=="float32"&&ft[0].type!=="float64"||ft[1].type!=="float32"&&ft[1].type!=="float64")throw new Error("inputs should be float type");if(ft[0].type!==ft[1].type)throw new Error("inputs types should match")};function yt(ft,st,bt,vt,xt){let wt="";const St=bt.length,_t=vt.length,Tt=_t-St;wt=_t<2&&St>0?"coords":bt.map((Mt,Ot)=>`coords.${st[Ot+Tt]}`).join(", ");const Et=b.BroadcastUtil.getBroadcastDims(bt,vt).map(Mt=>`coords.${st[Mt+Tt]} = 0;`).join(`
`);let kt="vec4(outputValue.xx, outputValue.yy)";return b.ShapeUtil.size(bt)===1&&(kt="vec4(outputValue.x)"),xt?`
vec4 getBiasForMatmul() {
  ${ft} coords = getOutputCoords();
  ${Et}
  vec4 outputValue = getBias(${wt});
  return ${kt};
}`:`
float getBiasForMatmul() {
  ${ft} coords = getOutputCoords();
  ${Et}
  return getBias(coords.x);
}`}e.getBiasForMatmul=yt},2403:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const b=d(5060),tt=d(2039),nt=d(9390),ot=d(2827),ht={name:"pack",inputNames:["A"],inputTypes:[tt.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(mt,gt)=>Object.assign(Object.assign({},ht),{get:()=>((yt,ft)=>{const st=(0,b.getGlsl)(yt.session.backend.glContext.version),bt=ft.dims,vt=bt.length,xt=ft.dims.length,wt=(0,nt.getCoordsDataType)(xt),St=(0,ot.getChannels)("rc",xt),_t=(Tt=xt,Et=St,kt=bt[bt.length-2],Mt=bt[bt.length-1],Tt===0||Tt===1?"":`
    int r = ${Et[Tt-2]};
    int c = ${Et[Tt-1]};
    int rp1 = ${Et[Tt-2]} + 1;
    int cp1 = ${Et[Tt-1]} + 1;
    bool rEdge = rp1 >= ${Mt};
    bool cEdge = cp1 >= ${kt};
    `);var Tt,Et,kt,Mt;let Ot;Ot=vt===0?[1,1]:vt===1?[bt[0],1]:[bt[xt-1],bt[xt-2]];const Dt=function(jt,qt,Jt){if(jt===0)return"false";if(jt===1)return`rc > ${qt[0]}`;let Bt="";for(let Wt=jt-2;Wt<jt;Wt++)Bt+=`${Jt[Wt]} >= ${qt[Wt-jt+2]}`,Wt<jt-1&&(Bt+="||");return Bt}(xt,Ot,St),At=function(jt,qt){const Jt=jt.length;if(Jt===0)return"getA(), 0, 0, 0";if(Jt===1)return`getA(rc),
            rc + 1 >= ${jt[0]} ? 0. : getA(rc + 1),
            0, 0`;let Bt="";if(Jt>2)for(let Wt=0;Wt<Jt-2;++Wt)Bt+=`${qt[Wt]},`;return`getA(${Bt}r, c),
          rEdge ? 0. : getA(${Bt}rp1, c),
          cEdge ? 0. : getA(${Bt}r, cp1),
          rEdge || cEdge ? 0. : getA(${Bt}rp1, cp1)`}(bt,St),It=`
        void main() {
          ${wt} rc = getOutputCoords();

          if(${Dt}) {
            ${st.output} = vec4(0);
          } else {
            ${_t}

            ${st.output} = vec4(${At});
          }
        }
      `;return Object.assign(Object.assign({},ht),{hasMain:!0,output:{dims:ft.dims,type:ft.type,textureType:tt.TextureType.packed},shaderSource:It})})(mt,gt)})},2827:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const b=d(9390);function tt(nt,ot){return(0,b.getGlChannels)(ot).map(ht=>`${nt}.${ht}`)}e.getVecChannels=tt,e.getChannels=function(nt,ot){return ot===1?[nt]:tt(nt,ot)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const b=d(246),tt=d(2517),nt=d(5060),ot=d(2039),ht={name:"Pad",inputNames:["A"],inputTypes:[ot.TextureType.unpacked]};e.padV2=(wt,St,_t)=>(yt(St),[wt.run(Object.assign(Object.assign({},ht),{cacheHint:_t.cacheKey,get:()=>gt(wt,St[0],_t)}),St)]),e.parsePadAttributesV2=wt=>{const St=wt.attributes.getString("mode","constant"),_t=wt.attributes.getFloat("value",0),Tt=wt.attributes.getInts("pads");return(0,b.createAttributeWithCacheKey)({mode:St,value:_t,pads:Tt})},e.padV11=(wt,St,_t)=>{ft(St);const Tt=mt(wt,St,_t);return(0,e.padV2)(wt,[St[0]],Tt)},e.parsePadAttributesV11=wt=>wt.attributes.getString("mode","constant");const mt=(wt,St,_t)=>{if(!wt.session.isInitializer(St[1].dataId)||St.length>=3&&!wt.session.isInitializer(St[2].dataId))throw new Error("dynamic pad attributes are not allowed");const Tt=Array.from(St[1].integerData),Et=St.length>=3?St[2].floatData[0]:0;return(0,b.createAttributeWithCacheKey)({mode:_t,pads:Tt,value:Et})},gt=(wt,St,_t)=>{const Tt=tt.ShapeUtil.padShape(St.dims.slice(),_t.pads),Et=Tt.length,kt=`
      ${st(wt,St,_t)}
      float process(int[${Et}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[ot.TextureType.unpacked],output:{dims:Tt,type:St.type,textureType:ot.TextureType.unpacked},shaderSource:kt}},yt=wt=>{if(!wt||wt.length!==1)throw new Error("Pad requires 1 input");if(wt[0].type!=="float32"&&wt[0].type!=="float64")throw new Error("Invalid input type.")},ft=wt=>{if(!wt||wt.length!==2&&wt.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(wt[1].type!=="int32")throw new Error("Invalid input type.");if(wt.length>=3&&wt[2].type==="string")throw new Error("Invalid input type.")},st=(wt,St,_t)=>{const Tt=(0,nt.getGlsl)(wt.session.backend.glContext.version),[Et,kt]=wt.calculateTextureWidthAndHeight(St.dims,ot.TextureType.unpacked),Mt=tt.ShapeUtil.computeStrides(St.dims);switch(_t.mode){case"constant":return bt(Tt,St.dims,Mt,Et,kt,_t.pads,_t.value);case"reflect":return vt(Tt,St.dims,Mt,Et,kt,_t.pads);case"edge":return xt(Tt,St.dims,Mt,Et,kt,_t.pads);default:throw new Error("Invalid mode")}},bt=(wt,St,_t,Tt,Et,kt,Mt)=>{const Ot=St.length;let Dt="";for(let At=Ot-1;At>=0;--At)Dt+=`
        k = m[${At}] - ${kt[At]};
        if (k < 0)  return constant;
        if (k >= ${St[At]}) return constant;
        offset += k * ${_t[At]};
        `;return`
      float padA(int m[${Ot}]) {
        const float constant = float(${Mt});
        int offset = 0;
        int k = 0;
        ${Dt}
        vec2 coords = offsetToCoords(offset, ${Tt}, ${Et});
        float value = getColorAsFloat(${wt.texture2D}(A, coords));
        return value;
      }
      `},vt=(wt,St,_t,Tt,Et,kt)=>{const Mt=St.length;let Ot="";for(let Dt=Mt-1;Dt>=0;--Dt)Ot+=`
        k = m[${Dt}] - ${kt[Dt]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(St[Dt]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${St[Dt]}) { k = _2n_1 - k; }
        }
        offset += k * ${_t[Dt]};
        `;return`
      float padA(int m[${Mt}]) {
        int offset = 0;
        int k = 0;
        ${Ot}
        vec2 coords = offsetToCoords(offset, ${Tt}, ${Et});
        float value = getColorAsFloat(${wt.texture2D}(A, coords));
        return value;
      }
      `},xt=(wt,St,_t,Tt,Et,kt)=>{const Mt=St.length;let Ot="";for(let Dt=Mt-1;Dt>=0;--Dt)Ot+=`
        k = m[${Dt}] - ${kt[Dt]};
        if (k < 0)  k = 0;
        if (k >= ${St[Dt]}) k = ${St[Dt]-1};
        offset += k * ${_t[Dt]};
      `;return`
      float padA(int m[${Mt}]) {
        int offset = 0;
        int k = 0;
        ${Ot}
        vec2 coords = offsetToCoords(offset, ${Tt}, ${Et});
        float value = getColorAsFloat(${wt.texture2D}(A, coords));
        return value;
      }
      `}},2143:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const b=d(246),tt=d(2517),nt=d(2039);e.averagePool=(xt,wt,St)=>{ft(wt);const _t={name:"AveragePool",inputNames:["X"],inputTypes:[nt.TextureType.unpacked],cacheHint:St.cacheKey};return[xt.run(Object.assign(Object.assign({},_t),{get:()=>ot(wt,_t,!1,St)}),wt)]},e.parseAveragePoolAttributes=xt=>{const wt=xt.attributes.getString("auto_pad","NOTSET"),St=xt.attributes.getInt("ceil_mode",0),_t=xt.attributes.getInt("count_include_pad",0)!==0,Tt=xt.attributes.getInts("kernel_shape"),Et=xt.attributes.getInts("strides",[]),kt=xt.attributes.getInts("pads",[]);if(St!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,b.createAttributeWithCacheKey)({autoPad:wt,ceilMode:St,countIncludePad:_t,kernelShape:Tt,strides:Et,pads:kt})};const ot=(xt,wt,St,_t)=>{const[Tt,Et]=mt(xt,_t,St),kt=tt.ShapeUtil.size(Tt.kernelShape);let Mt="";Tt.countIncludePad?Mt+=`value /= float(${kt});`:Mt+=`value /= float(${kt} - pad);`;const Ot=`
        ${st(xt[0].dims,Tt,"value += _X(x);",Mt,"0.0")}
      `;return Object.assign(Object.assign({},wt),{output:{dims:Et,type:xt[0].type,textureType:nt.TextureType.unpacked},shaderSource:Ot})};e.globalAveragePool=(xt,wt,St)=>{ft(wt);const _t={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[nt.TextureType.unpacked],cacheHint:`${St.countIncludePad}`};return[xt.run(Object.assign(Object.assign({},_t),{get:()=>ot(wt,_t,!0,St)}),wt)]},e.parseGlobalAveragePoolAttributes=xt=>{const wt=xt.attributes.getInt("count_include_pad",0)!==0;return(0,b.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:wt,kernelShape:[],strides:[],pads:[]})},e.maxPool=(xt,wt,St)=>{ft(wt);const _t={name:"MaxPool",inputNames:["X"],inputTypes:[nt.TextureType.unpacked],cacheHint:St.cacheKey};return[xt.run(Object.assign(Object.assign({},_t),{get:()=>ht(wt,_t,!1,St)}),wt)]},e.parseMaxPoolAttributes=xt=>{const wt=xt.attributes.getString("auto_pad","NOTSET"),St=xt.attributes.getInt("ceil_mode",0),_t=xt.attributes.getInts("kernel_shape"),Tt=xt.attributes.getInts("strides",[]),Et=xt.attributes.getInts("pads",[]),kt=xt.attributes.getInt("storage_order",0),Mt=xt.attributes.getInts("dilations",[]);if(kt!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(St!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,b.createAttributeWithCacheKey)({autoPad:wt,ceilMode:St,countIncludePad:!1,kernelShape:_t,strides:Tt,pads:Et,storageOrder:kt,dilations:Mt})};const ht=(xt,wt,St,_t)=>{const[Tt,Et]=mt(xt,_t,St),kt=`
      ${st(xt[0].dims,Tt,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},wt),{output:{dims:Et,type:xt[0].type,textureType:nt.TextureType.unpacked},shaderSource:kt})},mt=(xt,wt,St)=>{const _t=xt[0].dims.slice(),Tt=Object.hasOwnProperty.call(wt,"dilations"),Et=wt.kernelShape.slice(),kt=wt.strides.slice(),Mt=Tt?wt.dilations.slice():[],Ot=wt.pads.slice();tt.PoolConvUtil.adjustPoolAttributes(St,_t,Et,kt,Mt,Ot);const Dt=tt.PoolConvUtil.computePoolOutputShape(St,_t,kt,Mt,Et,Ot,wt.autoPad),At=Object.assign({},wt);return Tt?Object.assign(At,{kernelShape:Et,strides:kt,pads:Ot,dilations:Mt,cacheKey:wt.cacheKey}):Object.assign(At,{kernelShape:Et,strides:kt,pads:Ot,cacheKey:wt.cacheKey}),[At,Dt]},gt={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},yt={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[nt.TextureType.unpacked]};e.globalMaxPool=(xt,wt)=>(ft(wt),[xt.run(Object.assign(Object.assign({},yt),{get:()=>ht(wt,yt,!0,gt)}),wt)]);const ft=xt=>{if(!xt||xt.length!==1)throw new Error("Pool ops requires 1 input.");if(xt[0].type!=="float32"&&xt[0].type!=="float64")throw new Error("Invalid input type.")},st=(xt,wt,St,_t,Tt)=>{const Et=xt.length;if(wt.kernelShape.length<=2){const kt=wt.kernelShape[wt.kernelShape.length-1],Mt=wt.strides[wt.strides.length-1],Ot=wt.pads[wt.pads.length/2-1],Dt=wt.pads[wt.pads.length-1],At=xt[Et-1];let It="",jt="",qt="";if(It=Ot+Dt!==0?`
          for (int i = 0; i < ${kt}; i++) {
            x[${Et} - 1] = indices[${Et} - 1] * ${Mt} - ${Ot} + i;
            if (x[${Et} - 1] < 0 || x[${Et} - 1] >= ${At}) {
              pad++;
              continue;
            }
            ${St}
          }`:`
          for (int i = 0; i < ${kt}; i++) {
            x[${Et} - 1] = indices[${Et} - 1] * ${Mt} - ${Ot} + i;
            ${St}
          }`,wt.kernelShape.length===2){const Jt=wt.kernelShape[wt.kernelShape.length-2],Bt=wt.strides[wt.strides.length-2],Wt=wt.pads[wt.pads.length/2-2],Lt=wt.pads[wt.pads.length-2],Ut=xt[Et-2];jt=Wt+Lt!==0?`
            for (int j = 0; j < ${Jt}; j++) {
              x[${Et} - 2] = indices[${Et} - 2] * ${Bt} - ${Wt} + j;
              if (x[${Et} - 2] < 0 || x[${Et} - 2] >= ${Ut}) {
                pad+= ${kt};
                continue;
              }
          `:`
            for (int j = 0; j < ${Jt}; j++) {
              x[${Et} - 2] = indices[${Et} - 2] * ${Bt} - ${Wt} + j;
            `,qt=`
          }
        `}return`
        float process(int indices[${Et}]) {
          int x[${Et}];
          copyVec(indices, x);

          float value = ${Tt};
          int pad = 0;
          ${jt}
          ${It}
          ${qt}
          ${_t}
          return value;
        }
      `}{const kt=tt.ShapeUtil.size(wt.kernelShape),Mt=tt.ShapeUtil.computeStrides(wt.kernelShape),Ot=Mt.length,Dt=wt.pads.length,At=vt(Ot),It=bt(xt,"inputDims"),jt=bt(wt.pads,"pads"),qt=bt(Mt,"kernelStrides"),Jt=bt(wt.strides,"strides");let Bt="";return Bt=wt.pads.reduce((Wt,Lt)=>Wt+Lt)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${St}
          }`:`
          }
          ${St}
        `,`
        ${At}
        float process(int indices[${Et}]) {
          int x[${Et}];
          copyVec(indices, x);
          int offset[${Ot}];
          int pads[${Dt}];
          int inputDims[${Et}];
          int kernelStrides[${Ot}];
          int strides[${Ot}];
          ${jt}
          ${It}
          ${Jt}
          ${qt}

          float value = ${Tt};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${kt}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${Et} - ${Ot}; j < ${Et}; j++) {
              x[j] = indices[j] * strides[j - ${Et} + ${Ot}]
                + offset[j - ${Et} + ${Ot}] - pads[j - 2];
              ${Bt}
          }
          ${_t}

          return value;
        }
      `}},bt=(xt,wt)=>{let St="";for(let _t=0;_t<xt.length;_t++)St+=`
      ${wt}[${_t}] = ${xt[_t]};
    `;return St},vt=xt=>`
  void offsetToIndices(int offset, int[${xt}] strides, out int[${xt}] indices) {
    if (${xt} == 0) {
      return;
    }
    for (int i = 0; i < ${xt} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${xt} - 1] = offset;
  }`},4939:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const b=d(246),tt=d(782),nt=d(2517),ot=d(2039),ht=(yt,ft,st,bt,vt)=>{gt(ft);const xt={name:bt,inputNames:["A"],inputTypes:[ot.TextureType.unpacked]};return[yt.run(Object.assign(Object.assign({},xt),{cacheHint:st.cacheKey,get:()=>mt(yt,ft,st,bt,vt,xt)}),ft)]};e.parseReduceAttributes=yt=>{const ft=yt.attributes.getInts("axes",[]),st=yt.attributes.getInt("keepdims",1)===1;return(0,b.createAttributeWithCacheKey)({axes:ft,keepDims:st})};const mt=(yt,ft,st,bt,vt,xt)=>{const wt=[],St=ft[0].dims.length||1,_t=[],Tt=nt.ShapeUtil.normalizeAxes(st.axes,ft[0].dims.length),Et=vt(ft,Tt);let kt=Et[1];for(let Ot=0;Ot<ft[0].dims.length;Ot++)Tt.indexOf(Ot)>=0||Tt.length===0?(st.keepDims&&wt.push(1),kt=`
          for(int j${Ot} = 0; j${Ot} < ${ft[0].dims[Ot]}; j${Ot}++) {
            inputIdx[${Ot}] = j${Ot};
            ${kt}
          }`):(_t.push(`inputIdx[${Ot}] = outputIdx[${wt.length}];`),wt.push(ft[0].dims[Ot]));const Mt=`
      float process(int outputIdx[${wt.length||1}]) {
        float value;                 // final result
        int inputIdx[${St}];      // addressing input data
        ${_t.join(`
`)}
        ${Et[0]}       // init ops for reduce max/min
        ${kt}
        ${Et[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},xt),{output:{dims:wt,type:ft[0].type,textureType:ot.TextureType.unpacked},shaderSource:Mt})},gt=yt=>{if(!yt||yt.length!==1)throw new Error("Reduce op requires 1 input.");if(tt.NUMBER_TYPES.indexOf(yt[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(yt,ft,st)=>ht(yt,ft,st,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),e.reduceMean=(yt,ft,st)=>ht(yt,ft,st,"ReduceMean",(bt,vt)=>{let xt=1;for(let wt=0;wt<bt[0].dims.length;wt++)(vt.indexOf(wt)>=0||vt.length===0)&&(xt*=bt[0].dims[wt]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${xt}.;`]}),e.reduceMax=(yt,ft,st)=>ht(yt,ft,st,"ReduceMax",(bt,vt)=>{const xt=[];for(let wt=0;wt<bt[0].dims.length;wt++)(vt.indexOf(wt)>=0||vt.length===0)&&xt.push(`inputIdx[${wt}] = 0;`);return[`${xt.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),e.reduceMin=(yt,ft,st)=>ht(yt,ft,st,"ReduceMin",(bt,vt)=>{const xt=[];for(let wt=0;wt<bt[0].dims.length;wt++)(vt.indexOf(wt)>=0||vt.length===0)&&xt.push(`inputIdx[${wt}] = 0;`);return[`${xt.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),e.reduceProd=(yt,ft,st)=>ht(yt,ft,st,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),e.reduceLogSum=(yt,ft,st)=>ht(yt,ft,st,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),e.reduceLogSumSquare=(yt,ft,st)=>ht(yt,ft,st,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const b=d(2517),tt=d(5060),nt=d(2039),ot=d(2827);e.createPackedReshape3DProgramInfoLoader=(ht,mt,gt)=>{const yt=(ft=>({name:"Reshape (packed)",inputTypes:[nt.TextureType.packed],inputNames:["A"],cacheHint:`${ft}`}))(gt);return Object.assign(Object.assign({},yt),{get:()=>((ft,st,bt,vt)=>{const xt=st.dims,wt=vt;let St="";for(let Et=0;Et<4;Et++){let kt="";switch(Et){case 0:kt="outputCoords = rc;";break;case 1:kt="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:kt="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:kt="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}St+=`
        ${kt}
        ${Et>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${Et}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${Et>0?"}":""}
      `}const _t=(0,tt.getGlsl)(ft.session.backend.glContext.version),Tt=`
      ${function(Et){const kt=b.ShapeUtil.computeStrides(Et),Mt=["b","r","c"],Ot="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${kt.map((Dt,At)=>`int ${Mt[At]} = ${Ot} / ${Dt}; ${At===kt.length-1?`int ${Mt[At+1]} = ${Ot} - ${Mt[At]} * ${Dt}`:`index -= ${Mt[At]} * ${Dt}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(xt)}
      ${function(Et){const kt=b.ShapeUtil.computeStrides(Et);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${kt[0]} + coords.z * ${kt[1]} + coords.y;
  }
`}(wt)}
      ${(0,ot.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${wt[2]};
        int cols = ${wt[1]};

        ${St}
        ${_t.output} = result;
      }
    `;return Object.assign(Object.assign({},bt),{output:{dims:wt,type:st.type,textureType:nt.TextureType.packed},shaderSource:Tt,hasMain:!0})})(ht,mt,yt,gt)})},e.processDims3D=function(ht){if(ht.length===0)return[1,1,1];let mt=1;for(let gt=0;gt<ht.length-2;++gt)mt*=ht[gt];return[mt,ht.length>1?ht[ht.length-2]:1,ht[ht.length-1]]},e.isReshapeCheap=function(ht,mt){let gt=!1;return gt=ht.length===0||mt.length===0||(ht.length<2||mt.length<2?ht[ht.length-1]===mt[mt.length-1]:ht[ht.length-1]===mt[mt.length-1]&&ht[ht.length-2]===mt[mt.length-2]),gt}},718:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const b=d(2517);e.reshape=(tt,nt)=>{const ot=b.ShapeUtil.calculateReshapedDims(nt[0].dims,nt[1].integerData);return tt.session.pack?[tt.reshapePacked(nt[0],ot)]:[tt.reshapeUnpacked(nt[0],ot)]}},2268:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const b=d(5060),tt=d(2039),nt=d(9390),ot=d(2827),ht=d(9793),mt={name:"Resize",inputNames:["A"],inputTypes:[tt.TextureType.packed]};e.resize=(bt,vt,xt)=>((0,ht.validateInputs)(vt,xt),[bt.run(Object.assign(Object.assign({},mt),{cacheHint:xt.cacheKey,get:()=>gt(bt,vt,xt)}),vt)]),e.parseResizeAttributesV10=bt=>(0,ht.parseUpsampleAttributes)(bt,10),e.parseResizeAttributesV11=bt=>(0,ht.parseUpsampleAttributes)(bt,11);const gt=(bt,vt,xt)=>{const wt=(0,b.getGlsl)(bt.session.backend.glContext.version),[St,_t]=yt(vt,xt);if(St.every(Bt=>Bt===1)&&xt.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},mt),{output:{dims:_t,type:vt[0].type,textureType:tt.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${wt.texture2D}(X, TexCoords);
                    ${wt.output} = v;
                }`});const Tt=_t.length;if(Tt<2)throw new Error(`output dimension should be at least 2, but got ${Tt}`);const Et=_t[Tt-2],kt=_t[Tt-1],Mt=vt[0].dims;if(Tt!==Mt.length)throw new Error(`output dimension should match input ${Mt.length}, but got ${Tt}`);const Ot=Mt[Tt-2],Dt=Mt[Tt-1],At=St[Tt-2],It=St[Tt-1];let jt="";if(xt.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${xt.mode}'`);switch(xt.coordinateTransformMode){case"asymmetric":jt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":jt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":jt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${kt}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${Et}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${kt}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${Et}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":jt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${kt}.0 - 1.0, ${Et}.0 - 1.0, ${kt}.0 - 1.0,
                            ${Et}.0 - 1.0);
                        vec4 original = vec4(${Dt}.0 - 1.0, ${Ot}.0 - 1.0, ${Dt}.0 - 1.0,
                            ${Ot}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${xt.coordinateTransformMode}'`)}const qt=(0,nt.getCoordsDataType)(Tt),Jt=`
            const vec2 inputWH = vec2(${Ot}.0, ${Dt}.0);
            const vec4 scaleWHWH = vec4(float(${At}), float(${It}), float(${At}), float(${It}));
            ${(0,ot.unpackFromChannel)()}
            ${jt}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${qt} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${Et-1};
                bool hasNextCol = rc.z < ${kt-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${wt.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},mt),{output:{dims:_t,type:vt[0].type,textureType:tt.TextureType.packed},hasMain:!0,shaderSource:Jt})},yt=(bt,vt)=>{const xt=bt[0].dims;let wt,St=vt.scales;if(St.length===0){const Tt=bt[vt.scalesInputIdx];if(Tt&&Tt.size!==0){if(bt[vt.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");St=ft(Tt,vt.mode,vt.isResize)}else{const Et=bt[vt.sizesInputIdx];if(!Et||Et.size===0)throw new Error("Either scales or sizes MUST be provided as input.");wt=Array.from(Et.integerData),St=st(wt,xt,vt.mode,vt.isResize)}}else if(bt[vt.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const _t=wt||xt.map((Tt,Et)=>Math.floor(Tt*St[Et]));return[St,_t]},ft=(bt,vt,xt)=>{const wt=Array.from(bt.floatData);return(0,ht.scalesValidation)(wt,vt,xt),wt},st=(bt,vt,xt,wt)=>{const St=vt.length,_t=new Array(St);for(let Tt=0,Et=St;Tt<Et;Tt++)if(vt[Tt]===0){if(bt[Tt]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");_t[Tt]=1}else _t[Tt]=bt[Tt]/vt[Tt];return(0,ht.scalesValidation)(_t,xt,wt),_t}},8117:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const b=d(9162);e.shape=(nt,ot)=>(tt(ot),[new b.Tensor([ot[0].dims.length],"int32",void 0,void 0,new Int32Array(ot[0].dims))]);const tt=nt=>{if(!nt||nt.length!==1)throw new Error("Shape requires 1 input.")}},2278:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const b=d(246),tt=d(782),nt=d(2517),ot=d(2039),ht={name:"Slice",inputNames:["A"],inputTypes:[ot.TextureType.unpacked]};e.slice=(st,bt,vt)=>(gt(bt),[st.run(Object.assign(Object.assign({},ht),{cacheHint:vt.cacheKey,get:()=>mt(st,bt[0],vt)}),bt)]),e.parseSliceAttributes=st=>{const bt=st.attributes.getInts("starts"),vt=st.attributes.getInts("ends"),xt=st.attributes.getInts("axes",[]);return(0,b.createAttributeWithCacheKey)({starts:bt,ends:vt,axes:xt})};const mt=(st,bt,vt)=>{const xt=vt.axes.length===0?bt.dims.slice(0).map((Mt,Ot)=>Ot):vt.axes,wt=nt.ShapeUtil.normalizeAxes(xt,bt.dims.length),St=vt.starts.map((Mt,Ot)=>Mt>bt.dims[wt[Ot]]-1?bt.dims[wt[Ot]]:nt.ShapeUtil.normalizeAxis(Mt,bt.dims[wt[Ot]])),_t=vt.ends.map((Mt,Ot)=>Mt>bt.dims[wt[Ot]]-1?bt.dims[wt[Ot]]:nt.ShapeUtil.normalizeAxis(Mt,bt.dims[wt[Ot]])),Tt=bt.dims.slice(),Et=[];for(let Mt=0;Mt<wt.length;Mt++)Tt[wt[Mt]]=_t[Mt]-St[Mt],St[Mt]>0&&Et.push(`outputIdx[${wt[Mt]}] += ${St[Mt]};`);const kt=`
      float process(int outputIdx[${Tt.length}]) {
        ${Et.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},ht),{output:{dims:Tt,type:bt.type,textureType:ot.TextureType.unpacked},shaderSource:kt})},gt=st=>{if(!st||st.length!==1)throw new Error("Slice requires 1 input.");if(tt.NUMBER_TYPES.indexOf(st[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(st,bt)=>{ft(bt);const vt=yt(st,bt);return[st.run(Object.assign(Object.assign({},ht),{cacheHint:vt.cacheKey,get:()=>mt(st,bt[0],vt)}),[bt[0]])]};const yt=(st,bt)=>{if(!st.session.isInitializer(bt[1].dataId)||!st.session.isInitializer(bt[2].dataId)||bt.length>=4&&!st.session.isInitializer(bt[3].dataId)||bt.length>=5&&!st.session.isInitializer(bt[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(bt.length>=5&&bt[4].integerData.some(St=>St!==1))throw new Error("currently non-1 steps is not supported for Slice");const vt=Array.from(bt[1].integerData),xt=Array.from(bt[2].integerData),wt=bt.length>=4?Array.from(bt[3].integerData):[];return{starts:vt,ends:xt,axes:wt,cacheKey:`${wt};${vt};${xt}`}},ft=st=>{if(!st||st.length<3||st.length>5)throw new Error("Invalid input number.");if(st[1].type!=="int32"||st[1].dims.length!==1)throw new Error("Invalid input type.");if(st[2].type!=="int32"||st[2].dims.length!==1)throw new Error("Invalid input type.");if(st.length>=4&&(st[3].type!=="int32"||st[3].dims.length!==1))throw new Error("Invalid input type.");if(st.length>=5&&(st[4].type!=="int32"||st[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const b=d(246),tt=d(2517),nt=d(5060),ot=d(2039),ht=d(3738),mt={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[ot.TextureType.unpacked]},gt={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[ot.TextureType.unpacked,ot.TextureType.unpacked]},yt={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[ot.TextureType.unpacked,ot.TextureType.unpacked,ot.TextureType.unpacked]};e.softmax=(wt,St,_t)=>{xt(St);const Tt=St[0].dims.slice(),Et=tt.ShapeUtil.normalizeAxis(_t.axis,Tt.length),kt=tt.ShapeUtil.sizeToDimension(Tt,Et),Mt=tt.ShapeUtil.sizeFromDimension(Tt,Et);return ft(wt,St,_t,kt,Mt)},e.parseSoftmaxAttributes=wt=>(0,b.createAttributeWithCacheKey)({axis:wt.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=wt=>(0,b.createAttributeWithCacheKey)({axis:wt.attributes.getInt("axis",-1)}),e.softmaxV13=(wt,St,_t)=>{xt(St);const Tt=St[0].dims.slice(),Et=tt.ShapeUtil.normalizeAxis(_t.axis,Tt.length),kt=Tt.length,Mt=Et!==kt-1,Ot=[];let Dt,At=[],It=[];Mt&&(At=Array.from({length:kt}).map((Bt,Wt)=>Wt),At[Et]=kt-1,At[kt-1]=Et,At.map(Bt=>Ot.push(Tt[Bt])),Dt=(0,b.createAttributeWithCacheKey)({perm:At}),It=(0,ht.transpose)(wt,St,Dt));const jt=Mt?tt.ShapeUtil.sizeToDimension(Ot,kt-1):tt.ShapeUtil.sizeToDimension(Tt,kt-1),qt=Mt?tt.ShapeUtil.sizeFromDimension(Ot,kt-1):tt.ShapeUtil.sizeFromDimension(Tt,kt-1),Jt=ft(wt,Mt?It:St,_t,jt,qt);return Mt?(0,ht.transpose)(wt,Jt,Dt):Jt};const ft=(wt,St,_t,Tt,Et)=>{const kt=st(wt,St[0],Tt,Et,[Tt]),Mt=wt.run(Object.assign(Object.assign({},mt),{cacheHint:_t.cacheKey,get:()=>kt}),St),Ot=bt(wt,St[0],Tt,Et,kt.output.dims,[Tt]),Dt=wt.run(Object.assign(Object.assign({},gt),{cacheHint:_t.cacheKey,get:()=>Ot}),[St[0],Mt]),At=vt(wt,St[0],Tt,Et,kt.output.dims,Ot.output.dims);return[wt.run(Object.assign(Object.assign({},yt),{cacheHint:_t.cacheKey,get:()=>At}),[St[0],Mt,Dt])]},st=(wt,St,_t,Tt,Et)=>{const[kt,Mt]=wt.calculateTextureWidthAndHeight(St.dims,ot.TextureType.unpacked),Ot=Et.length;if(_t<1||Tt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Et.length!==1)throw new Error("Dimensionality of the output should be 1");if(Et[0]!==_t)throw new Error("Shape of the output should be equal to logical row count");const Dt=(0,nt.getGlsl)(wt.session.backend.glContext.version),At=`
      float process(int[${Ot}] indices) {
        int logical_row_start_offset = indices[0] * ${Tt};

        float max = getColorAsFloat(${Dt.texture2D}(A, offsetToCoords(logical_row_start_offset, ${kt},
        ${Mt} )));
        for(int i=1; i<${Tt}; ++i)
        {
          float current = getColorAsFloat(${Dt.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${kt}, ${Mt})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},mt),{output:{dims:Et,type:St.type,textureType:ot.TextureType.unpacked},shaderSource:At})},bt=(wt,St,_t,Tt,Et,kt)=>{const[Mt,Ot]=wt.calculateTextureWidthAndHeight(St.dims,ot.TextureType.unpacked),Dt=kt.length;if(_t<1||Tt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(kt.length!==1)throw new Error("Dimensionality of the output should be 1");if(kt[0]!==_t)throw new Error("Shape of the output should be equal to logical row count");if(Et.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Et[0]!==_t)throw new Error("Shape of the intermediate results should be equal to logical row count");const At=`
      float process(int[${Dt}] indices) {
        int logical_row_start_offset = indices[0] * ${Tt};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${Tt}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,nt.getGlsl)(wt.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${Mt}, ${Ot}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},gt),{output:{dims:kt,type:St.type,textureType:ot.TextureType.unpacked},shaderSource:At})},vt=(wt,St,_t,Tt,Et,kt)=>{const[Mt,Ot]=wt.calculateTextureWidthAndHeight(St.dims,ot.TextureType.unpacked),Dt=St.dims.length;if(_t<1||Tt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Et.length!==1||kt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Et[0]!==_t||kt[0]!==_t)throw new Error("Shape of the intermediate results should be equal to logical row count");const At=`
      float process(int[${Dt}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${Mt}, ${Ot});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${Tt};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},yt),{output:{dims:St.dims,type:St.type,textureType:ot.TextureType.unpacked},shaderSource:At})},xt=wt=>{if(!wt||wt.length!==1)throw new Error("Softmax requires 1 input.");if(wt[0].type!=="float32"&&wt[0].type!=="float64")throw new Error("Invalid input type")}},5975:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const b=d(246),tt=d(2517),nt=d(2039),ot={name:"Split",inputNames:["A"],inputTypes:[nt.TextureType.unpacked]};e.split=(yt,ft,st)=>{gt(ft);const bt=tt.ShapeUtil.normalizeAxis(st.axis,ft[0].dims.length),vt=ht(yt,ft,bt,st),xt=[];for(let wt=0;wt<vt;++wt)xt.push(yt.run(Object.assign(Object.assign({},ot),{cacheHint:`${st.cacheKey};${wt}`,get:()=>mt(yt,ft[0],st,bt,wt)}),ft));return xt},e.parseSplitAttributes=yt=>{const ft=yt.attributes.getInt("axis",0),st=yt.attributes.getInts("split",[]),bt=yt.outputs.length;return(0,b.createAttributeWithCacheKey)({axis:ft,split:st,numOutputs:bt})};const ht=(yt,ft,st,bt)=>{const[,vt]=tt.SplitUtil.splitShape(ft[0].dims,st,bt.split,bt.numOutputs);return vt.length},mt=(yt,ft,st,bt,vt)=>{const[xt,wt]=tt.SplitUtil.splitShape(ft.dims,bt,st.split,st.numOutputs),St=wt[vt],_t=xt[vt],Tt=`
      float process(int indices[${_t.length}]) {
        indices[${bt}] += ${St};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},ot),{cacheHint:`${st.cacheKey}:${vt}`,output:{dims:_t,type:ft.type,textureType:nt.TextureType.unpacked},shaderSource:Tt})},gt=yt=>{if(!yt||yt.length!==1)throw new Error("Split requires one input.");if(yt[0].type!=="int8"&&yt[0].type!=="uint8"&&yt[0].type!=="int16"&&yt[0].type!=="uint16"&&yt[0].type!=="int32"&&yt[0].type!=="uint32"&&yt[0].type!=="float32"&&yt[0].type!=="float64"&&yt[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const b=d(2517);e.squeeze=(ot,ht,mt)=>{tt(ht);const gt=b.ShapeUtil.squeezeShape(ht[0].dims,mt);return[ot.reshapeUnpacked(ht[0],gt)]},e.squeezeV13=(ot,ht)=>(nt(ht),(0,e.squeeze)(ot,[ht[0]],Array.from(ht[1].integerData))),e.parseSqueezeAttributes=ot=>ot.attributes.getInts("axes");const tt=ot=>{if(!ot||ot.length!==1)throw new Error("Squeeze requires 1 input.");if(ot[0].type==="string")throw new Error("invalid input tensor types.")},nt=ot=>{if(!ot||ot.length!==2)throw new Error("Squeeze requires 2 inputs.");if(ot[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const b=d(5060),tt=d(2039);e.sum=(ht,mt)=>{ot(mt);const gt={name:"Sum",inputNames:mt.map((yt,ft)=>`X${ft}`),inputTypes:new Array(mt.length).fill(tt.TextureType.unpacked)};return[ht.run(Object.assign(Object.assign({},gt),{get:()=>nt(ht,mt,gt)}),mt)]};const nt=(ht,mt,gt)=>{const yt=(0,b.getGlsl)(ht.session.backend.glContext.version),ft=mt[0].dims.slice(),st=`
      void main() {
        vec4 result = ${mt.map((bt,vt)=>`${yt.texture2D}(X${vt},TexCoords)`).join(" + ")};
        ${yt.output} = result;
      }
    `;return Object.assign(Object.assign({},gt),{output:{dims:ft,type:mt[0].type,textureType:tt.TextureType.unpacked},hasMain:!0,shaderSource:st})},ot=ht=>{if(!ht||ht.length===0)throw new Error("Sum requires inputs.");const mt=ht[0].dims.length;for(let gt=1;gt<ht.length;gt++){if(mt!==ht[gt].dims.length)throw new Error("Input shapes are mismatched.");for(let yt=0;yt<mt;yt++)if(ht[0].dims[yt]!==ht[gt].dims[yt])throw new Error("Input shapes are not matched.")}if(ht[0].type!=="float32"&&ht[0].type!=="float64")throw new Error("Invalid input type.");for(let gt=1;gt<ht.length;gt++)if(ht[0].type!==ht[gt].type)throw new Error("Input types are not matched.")}},5723:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const b=d(782),tt=d(2039);e.tile=(ht,mt)=>{ot(mt);const gt={name:"Tile",inputNames:["A"],inputTypes:[tt.TextureType.unpacked]};return[ht.run(Object.assign(Object.assign({},gt),{get:()=>nt(ht,mt,gt)}),mt)]};const nt=(ht,mt,gt)=>{const yt=mt[0].dims.slice(),ft=new Array(yt.length),st=[];for(let xt=0;xt<yt.length;xt++)ft[xt]=yt[xt]*mt[1].numberData[xt],st.push(`inputIdx[${xt}] = int(mod(float(outputIdx[${xt}]), ${yt[xt]}.));`);const bt=ft.length,vt=`
      float process(int outputIdx[${bt}]) {
        int inputIdx[${bt}];
        ${st.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},gt),{output:{dims:ft,type:mt[0].type,textureType:tt.TextureType.unpacked},shaderSource:vt})},ot=ht=>{if(!ht||ht.length!==2)throw new Error("Tile requires 2 input.");if(ht[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(ht[1].dims[0]!==ht[0].dims.length)throw new Error("Invalid input shape.");if(b.NUMBER_TYPES.indexOf(ht[0].type)===-1)throw new Error("Invalid input type.");if(ht[1].type!=="int32"&&ht[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const b=d(246),tt=d(2517),nt=d(2039),ot={name:"Transpose",inputNames:["A"],inputTypes:[nt.TextureType.unpacked]};e.transpose=(st,bt,vt)=>(ft(bt),[st.run(Object.assign(Object.assign({},ot),{cacheHint:vt.cacheKey,get:()=>ht(st,bt[0],vt.perm)}),bt)]),e.parseTransposeAttributes=st=>(0,b.createAttributeWithCacheKey)({perm:st.attributes.getInts("perm",[])});const ht=(st,bt,vt)=>{const xt=bt.dims;vt=mt(xt,vt);const wt=gt(xt,vt),St=xt.length,_t=`
      ${yt("perm",vt,St)}
      float process(int indices[${St}]) {
        int a[${St}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},ot),{output:{dims:wt,type:bt.type,textureType:nt.TextureType.unpacked},shaderSource:_t})},mt=(st,bt)=>(bt&&bt.length!==st.length&&(bt=[...st.keys()].reverse()),bt),gt=(st,bt)=>(bt=mt(st,bt),tt.ShapeUtil.sortBasedOnPerm(st,bt)),yt=(st,bt,vt)=>{const xt=[];xt.push(`void ${st}(out int a[${vt}], int src[${vt}]) {`);for(let wt=0;wt<vt;++wt)xt.push(`	a[${bt[wt]}]=src[${wt}];`);return xt.push("	}"),xt.join(`
`)},ft=st=>{if(!st||st.length!==1)throw new Error("Transpose requires 1 input.");if(st[0].type!=="float32"&&st[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const b=d(5060),tt=d(2039);e.encodeAsUint8=(nt,ot)=>{const ht=ot.shape,mt=(0,b.getGlsl)(nt.session.backend.glContext.version),gt=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${mt.texture2D}(X,TexCoords).r;
      ${mt.output} = encodeAsUint8(value);
    }`,yt={name:"Uint8Encode",inputTypes:[tt.TextureType.unpacked],inputNames:["X"],output:{dims:ht,type:ot.tensor.type,textureType:tt.TextureType.downloadUint8AsFloat},shaderSource:gt,hasMain:!0};return nt.executeProgram(yt,[ot.tensor])}},4909:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const b=d(246),tt=d(2517),nt=d(8520),ot=d(5060),ht=d(2039);function mt(){return Jt("abs")}function gt(){return Jt("acos")}function yt(){return Jt("asin")}function ft(){return Jt("atan")}function st(){return Jt("ceil")}function bt(){return Jt("cos")}function vt(Lt){const Ut="elu";return{body:`
  const float alpha = float(${Lt});

  float ${Ut}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${Ut}_(vec4 v) {
    return vec4(${Ut}_(v.x), ${Ut}_(v.y), ${Ut}_(v.z), ${Ut}_(v.w));
  }
  `,name:Ut,type:nt.FunctionType.ValueBased}}function xt(){return Jt("exp")}function wt(){return Jt("floor")}function St(Lt,Ut){const tn="clip";return{body:`
  const float min = float(${Lt});
  const float max = float(${Ut});

  float ${tn}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${tn}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:tn,type:nt.FunctionType.ValueBased}}function _t(){const Lt="indentity";return{body:`
  float ${Lt}_(float a) {
    return a;
  }
  vec4 ${Lt}_(vec4 v) {
    return v;
  }
  `,name:Lt,type:nt.FunctionType.ValueBased}}function Tt(Lt){const Ut="leakyRelu";return{body:`
  const float alpha = float(${Lt});

  float ${Ut}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Ut}_(vec4 v) {
    return vec4(${Ut}_(v.x), ${Ut}_(v.y), ${Ut}_(v.z), ${Ut}_(v.w));
  }
  `,name:Ut,type:nt.FunctionType.ValueBased}}function Et(){return Jt("log")}function kt(){const Lt="neg";return{body:`
  float ${Lt}_(float a) {
    return -a;
  }
  vec4 ${Lt}_(vec4 v) {
    return -v;
  }
  `,name:Lt,type:nt.FunctionType.ValueBased}}function Mt(){const Lt="not";return{body:`
  float ${Lt}_(float a) {
    return float( ! bool(a) );
  }
  bool ${Lt}_(bool a) {
    return !a;
  }
  vec4 ${Lt}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${Lt}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:Lt,type:nt.FunctionType.ValueBased}}function Ot(){return Jt("sin")}function Dt(){const Lt="relu";return{body:`
  float ${Lt}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${Lt}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:Lt,type:nt.FunctionType.ValueBased}}function At(){const Lt="sigmoid";return{body:`
  float ${Lt}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${Lt}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:Lt,type:nt.FunctionType.ValueBased}}function It(){return Jt("sqrt")}function jt(){return Jt("tan")}function qt(){const Lt="tanh";return{body:`
  float ${Lt}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${Lt}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:Lt,type:nt.FunctionType.ValueBased}}function Jt(Lt){return{body:`
  float ${Lt}_(float a) {
    return ${Lt}(a);
  }
  vec4 ${Lt}_(vec4 v) {
    return ${Lt}(v);
  }
  `,name:Lt,type:nt.FunctionType.ValueBased}}e.glslAbs=mt,e.glslAcos=gt,e.glslAsin=yt,e.glslAtan=ft,e.glslCeil=st,e.glslCos=bt,e.glslElu=vt,e.glslExp=xt,e.glslFloor=wt,e.glslClip=St,e.glslIdentity=_t,e.glslLeakyRelu=Tt,e.glslLog=Et,e.glslNeg=kt,e.glslNot=Mt,e.glslSin=Ot,e.glslRelu=Dt,e.glslSigmoid=At,e.glslSqrt=It,e.glslTan=jt,e.glslTanh=qt;const Bt=(Lt,Ut,tn,Kt)=>{const an=Lt.session.pack?ht.TextureType.packed:ht.TextureType.unpacked,ln={name:tn.name,inputTypes:[an],inputNames:["A"],cacheHint:Kt};return Object.assign(Object.assign({},ln),{get:()=>((hn,kn,Zt,xn)=>{const En=hn.session.pack?ht.TextureType.packed:ht.TextureType.unpacked,Cn=(0,ot.getGlsl)(hn.session.backend.glContext.version);return Object.assign(Object.assign({},kn),{output:{dims:Zt.dims,type:Zt.type,textureType:En},shaderSource:`
     ${xn.body}
     void main() {
       vec4 v = ${Cn.texture2D}(A, TexCoords);
       v = ${xn.name}_(v);
       ${Cn.output} = v;
     }
     `,hasMain:!0})})(Lt,ln,Ut,tn)})};e.abs=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],mt()),Ut)],e.acos=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],gt()),Ut)],e.asin=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],yt()),Ut)],e.atan=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],ft()),Ut)],e.clip=(Lt,Ut,tn)=>[Lt.run(Bt(Lt,Ut[0],St(tn.min,tn.max),tn.cacheKey),Ut)],e.parseClipAttributes=Lt=>(0,b.createAttributeWithCacheKey)({min:Lt.attributes.getFloat("min",tt.MIN_CLIP),max:Lt.attributes.getFloat("max",tt.MAX_CLIP)}),e.clipV11=(Lt,Ut)=>{const tn=Wt(Lt,Ut);return(0,e.clip)(Lt,[Ut[0]],tn)};const Wt=(Lt,Ut)=>{if(Ut.length>=3&&(!Lt.session.isInitializer(Ut[1].dataId)||!Lt.session.isInitializer(Ut[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const tn=Ut.length>=3?Ut[1].numberData[0]:tt.MIN_CLIP,Kt=Ut.length>=3?Ut[2].numberData[0]:tt.MAX_CLIP;return(0,b.createAttributeWithCacheKey)({min:tn,max:Kt})};e.ceil=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],st()),Ut)],e.cos=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],bt()),Ut)],e.elu=(Lt,Ut,tn)=>[Lt.run(Bt(Lt,Ut[0],vt(tn.alpha),tn.cacheKey),Ut)],e.parseEluAttributes=Lt=>(0,b.createAttributeWithCacheKey)({alpha:Lt.attributes.getFloat("alpha",1)}),e.exp=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],xt()),Ut)],e.floor=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],wt()),Ut)],e.identity=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],_t()),Ut)],e.leakyRelu=(Lt,Ut,tn)=>[Lt.run(Bt(Lt,Ut[0],Tt(tn.alpha),tn.cacheKey),Ut)],e.parseLeakyReluAttributes=Lt=>(0,b.createAttributeWithCacheKey)({alpha:Lt.attributes.getFloat("alpha",.01)}),e.log=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],Et()),Ut)],e.neg=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],kt()),Ut)],e.not=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],Mt()),Ut)],e.relu=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],Dt()),Ut)],e.sigmoid=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],At()),Ut)],e.sin=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],Ot()),Ut)],e.sqrt=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],It()),Ut)],e.tan=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],jt()),Ut)],e.tanh=(Lt,Ut)=>[Lt.run(Bt(Lt,Ut[0],qt()),Ut)]},5611:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const b=d(5060),tt=d(2039),nt=d(9390),ot=d(2827),ht={name:"unpack",inputNames:["A"],inputTypes:[tt.TextureType.packed]};e.createUnpackProgramInfo=(mt,gt)=>{const yt=gt.dims.length,ft=(0,ot.getChannels)("rc",yt),st=ft.slice(-2),bt=(0,nt.getCoordsDataType)(yt),vt=(0,ot.unpackFromChannel)(),xt=gt.dims.length===0?"":function(_t,Tt){if(_t===1)return"rc";let Et="";for(let kt=0;kt<_t;kt++)Et+=Tt[kt],kt<_t-1&&(Et+=",");return Et}(yt,ft),wt=yt<=1?"rc":`vec2(${st.join(",")})`,St=`
    ${vt}
    void main() {
      ${bt} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${xt});

       ${(0,b.getGlsl)(mt.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${wt}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},ht),{hasMain:!0,output:{dims:gt.dims,type:gt.type,textureType:tt.TextureType.unpacked},shaderSource:St})},e.createUnpackProgramInfoLoader=(mt,gt)=>Object.assign(Object.assign({},ht),{get:()=>(0,e.createUnpackProgramInfo)(mt,gt)})},8428:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const b=d(2517);e.unsqueeze=(ot,ht,mt)=>{tt(ht);const gt=b.ShapeUtil.unsqueezeShape(ht[0].dims,mt);return[ot.reshapeUnpacked(ht[0],gt)]},e.unsqueezeV13=(ot,ht)=>(nt(ht),(0,e.unsqueeze)(ot,[ht[0]],Array.from(ht[1].integerData))),e.parseUnsqueezeAttributes=ot=>ot.attributes.getInts("axes");const tt=ot=>{if(!ot||ot.length!==1)throw new Error("Unsqueeze requires 1 input.");if(ot[0].type==="string")throw new Error("invalid input tensor types.")},nt=ot=>{if(!ot||ot.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(ot[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const b=d(246),tt=d(5060),nt=d(2039),ot={name:"Upsample",inputNames:["X"],inputTypes:[nt.TextureType.unpacked]};e.upsample=(mt,gt,yt)=>((0,e.validateInputs)(gt,yt),[mt.run(Object.assign(Object.assign({},ot),{cacheHint:yt.cacheKey,get:()=>ht(mt,gt,yt)}),gt)]),e.parseUpsampleAttributesV7=mt=>(0,e.parseUpsampleAttributes)(mt,7),e.parseUpsampleAttributesV9=mt=>(0,e.parseUpsampleAttributes)(mt,9),e.parseUpsampleAttributes=(mt,gt)=>{const yt=gt>=10,ft=mt.attributes.getString("mode","nearest");if(ft!=="nearest"&&ft!=="linear"&&(gt<11||ft!=="cubic"))throw new Error(`unrecognized mode: ${ft}`);let st=[];gt<9&&(st=mt.attributes.getFloats("scales"),(0,e.scalesValidation)(st,ft,yt));const bt=mt.attributes.getFloat("extrapolation_value",0),vt=gt>10?mt.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(vt)===-1)throw new Error(`coordinate_transform_mode '${vt}' is not supported`);const xt=vt==="tf_crop_and_resize",wt=xt,St=ft==="nearest"&&gt>=11?mt.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(St)===-1)throw new Error(`nearest_mode '${St}' is not supported`);const _t=mt.attributes.getFloat("cubic_coeff_a",-.75),Tt=mt.attributes.getInt("exclude_outside",0)!==0;if(Tt&&ft!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const Et=gt<11||ft==="nearest"&&vt==="asymmetric"&&St==="floor";let kt=0,Mt=0,Ot=0;return gt>10?mt.inputs.length>2?(kt=1,Mt=2,Ot=3):(Mt=1,Ot=2):gt===9&&(Mt=1),(0,b.createAttributeWithCacheKey)({opset:gt,isResize:yt,mode:ft,scales:st,extrapolationValue:bt,coordinateTransformMode:vt,useExtrapolation:wt,needRoiInput:xt,nearestMode:St,cubicCoefficientA:_t,excludeOutside:Tt,useNearest2xOptimization:Et,roiInputIdx:kt,scalesInputIdx:Mt,sizesInputIdx:Ot})};const ht=(mt,gt,yt)=>{const ft=(0,tt.getGlsl)(mt.session.backend.glContext.version),[st,bt]=mt.calculateTextureWidthAndHeight(gt[0].dims,nt.TextureType.unpacked),vt=gt[0].dims.map((Ot,Dt)=>Math.floor(Ot*yt.scales[Dt])),[xt,wt]=mt.calculateTextureWidthAndHeight(vt,nt.TextureType.unpacked),St=vt.length,_t=new Array(St),Tt=new Array(St);let Et=`
      int output_pitches[${St}];
      int input_pitches[${St}];
      `;for(let Ot=St-1;Ot>=0;Ot--)_t[Ot]=Ot===St-1?1:_t[Ot+1]*vt[Ot+1],Tt[Ot]=Ot===St-1?1:Tt[Ot+1]*gt[0].dims[Ot+1],Et+=`
        output_pitches[${Ot}] = ${_t[Ot]};
        input_pitches[${Ot}] = ${Tt[Ot]};
        `;const kt=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${st}, ${bt});
        float value = getColorAsFloat(${ft.texture2D}(X, coords));
        return value;
      }
      `,Mt=yt.mode==="nearest"?`
    ${kt}
    float process(int indices[${St}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${xt}, ${wt});

      ${Et}

      int d, m;
      for (int dim = 0; dim < ${St}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:St===4?`
    ${kt}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${xt}, ${wt});

      ${Et}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${gt[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${kt}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${xt}, ${wt});

      ${Et}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${gt[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},ot),{output:{dims:vt,type:gt[0].type,textureType:nt.TextureType.unpacked},shaderSource:Mt,variables:[{name:"scales",type:"int",arrayLength:yt.scales.length,data:yt.scales.map(Ot=>Math.ceil(Ot))}]})};e.validateInputs=(mt,gt)=>{if(!mt||gt.opset<9&&mt.length!==1||gt.opset>=9&&gt.opset<11&&mt.length!==2||gt.opset>=11&&mt.length<2)throw new Error("invalid inputs.");if(gt.scales.length>0&&mt[0].dims.length!==gt.scales.length)throw new Error("Invalid input shape.");if(mt[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(mt,gt,yt)=>{if(yt){for(const ft of mt)if(ft<=0)throw new Error("Scale value should be greater than 0.")}else for(const ft of mt)if(ft<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(gt!=="linear"&&gt!=="cubic"||mt.length===2||mt.length===4&&mt[0]===1&&mt[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${yt?"Resize":"Upsample"} opeartor.`)}},1958:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const b=d(1670),tt=d(6231),nt=d(8879),ot=d(5060);e.ProgramManager=class{constructor(ht,mt,gt){this.profiler=ht,this.glContext=mt,this.textureLayoutStrategy=gt,this.repo=new Map,this.attributesBound=!1}getArtifact(ht){return this.repo.get(ht)}setArtifact(ht,mt){this.repo.set(ht,mt)}run(ht,mt,gt){var yt;this.profiler.event("op",`ProgramManager.run ${(yt=ht.programInfo.name)!==null&&yt!==void 0?yt:"unknown kernel"}`,()=>{var ft;const st=this.glContext.gl,bt=ht.program;st.useProgram(bt);try{this.bindOutput(gt),this.attributesBound||this.bindAttributes(ht.attribLocations),this.bindUniforms(ht.uniformLocations,(ft=ht.programInfo.variables)!==null&&ft!==void 0?ft:[],mt)}catch(vt){throw tt.Logger.error("ProgramManager",ht.programInfo.shaderSource),vt}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(ht=>this.glContext.deleteProgram(ht.program))}build(ht,mt,gt){return this.profiler.event("backend","ProgramManager.build",()=>{const yt=new nt.GlslPreprocessor(this.glContext,ht,mt,gt),ft=yt.preprocess(),st=this.compile(ft);return{programInfo:ht,program:st,uniformLocations:this.getUniformLocations(st,yt.context.programInfo.inputNames,yt.context.programInfo.variables),attribLocations:this.getAttribLocations(st)}})}compile(ht){if(!this.vertexShader){tt.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const yt=(0,ot.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(yt,this.glContext.gl.VERTEX_SHADER)}b.env.debug&&tt.Logger.verbose("ProrgramManager",`FragShader:
${ht}
`);const mt=this.glContext.compileShader(ht,this.glContext.gl.FRAGMENT_SHADER),gt=this.glContext.createProgram(this.vertexShader,mt);return this.glContext.deleteShader(mt),gt}bindOutput(ht){const mt=ht.width,gt=ht.height;tt.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${mt}/${gt}, shape=${ht.shape}, type=${ht.tensor.type}`),this.glContext.attachFramebuffer(ht.texture,mt,gt)}bindAttributes(ht){const mt=ht.position,gt=ht.textureCoord;this.glContext.setVertexAttributes(mt,gt),this.attributesBound=!0}bindUniforms(ht,mt,gt){var yt;const ft=this.glContext.gl;let st=0;for(const{name:bt,type:vt,location:xt,arrayLength:wt}of ht){const St=(yt=mt.find(_t=>_t.name===bt))===null||yt===void 0?void 0:yt.data;if(vt!=="sampler2D"&&!St)throw new Error(`variable '${bt}' does not have data defined in program info`);switch(vt){case"sampler2D":this.bindTexture(gt[st],xt,st),st++;break;case"float":wt?ft.uniform1fv(xt,St):ft.uniform1f(xt,St);break;case"int":wt?ft.uniform1iv(xt,St):ft.uniform1i(xt,St);break;default:throw new Error(`Uniform not implemented: ${vt}`)}}}bindTexture(ht,mt,gt){this.glContext.bindTextureToUniform(ht.texture,gt,mt)}getAttribLocations(ht){return{position:this.getAttribLocation(ht,"position"),textureCoord:this.getAttribLocation(ht,"textureCoord")}}getUniformLocations(ht,mt,gt){const yt=[];if(mt)for(const ft of mt)yt.push({name:ft,type:"sampler2D",location:this.getUniformLocation(ht,ft)});if(gt)for(const ft of gt)yt.push(Object.assign(Object.assign({},ft),{location:this.getUniformLocation(ht,ft.name)}));return yt}getUniformLocation(ht,mt){const gt=this.glContext.gl.getUniformLocation(ht,mt);if(gt===null)throw new Error(`Uniform ${mt} not found.`);return gt}getAttribLocation(ht,mt){return this.glContext.gl.getAttribLocation(ht,mt)}}},6416:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const b=d(6231),tt=d(1047),nt=d(8316),ot=d(1640),ht=d(1958),mt=d(7859),gt=d(5702);e.WebGLSessionHandler=class{constructor(yt,ft){this.backend=yt,this.context=ft,this.layoutStrategy=new mt.PreferLogicalStrategy(yt.glContext.maxTextureSize),this.programManager=new ht.ProgramManager(this.context.profiler,yt.glContext,this.layoutStrategy),this.textureManager=new gt.TextureManager(yt.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:yt.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=yt.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new nt.WebGLInferenceHandler(this)}onGraphInitialized(yt){const ft=yt.getValues().filter(st=>st.from===-1&&st.tensor).map(st=>st.tensor.dataId);this.initializers=new Set(ft)}isInitializer(yt){return!!this.initializers&&this.initializers.has(yt)}addInitializer(yt){this.initializers.add(yt)}getTextureData(yt,ft){return ft?this.packedTextureDataCache.get(yt):this.unpackedTextureDataCache.get(yt)}setTextureData(yt,ft,st=!1){b.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),st?this.packedTextureDataCache.set(yt,ft):this.unpackedTextureDataCache.set(yt,ft)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(yt=>this.textureManager.releaseTexture(yt,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(yt=>this.textureManager.releaseTexture(yt,!0)),this.unpackedTextureDataCache=new Map}resolve(yt,ft,st){const bt=(0,tt.resolveOperator)(yt,ft,ot.WEBGL_OP_RESOLVE_RULES);return{impl:bt.opImpl,context:bt.opInit?bt.opInit(yt,st):yt}}}},7769:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const b=d(6231);e.RedFloat32DataEncoder=class{constructor(tt,nt=1){if(nt===1)this.internalFormat=tt.R32F,this.format=tt.RED,this.textureType=tt.FLOAT,this.channelSize=nt;else{if(nt!==4)throw new Error(`Invalid number of channels: ${nt}`);this.internalFormat=tt.RGBA32F,this.format=tt.RGBA,this.textureType=tt.FLOAT,this.channelSize=nt}}encode(tt,nt){let ot,ht;return tt.constructor!==Float32Array&&(b.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),ht=new Float32Array(tt)),nt*this.channelSize>tt.length?(b.Logger.warning("Encoder","Source data too small. Allocating larger array"),ht=tt,ot=this.allocate(nt*this.channelSize),ht.forEach((mt,gt)=>ot[gt]=mt)):(ht=tt,ot=ht),ot}allocate(tt){return new Float32Array(4*tt)}decode(tt,nt){return this.channelSize===1?tt.filter((ot,ht)=>ht%4==0).subarray(0,nt):tt.subarray(0,nt)}},e.RGBAFloatDataEncoder=class{constructor(tt,nt=1,ot){if(nt!==1&&nt!==4)throw new Error(`Invalid number of channels: ${nt}`);this.internalFormat=tt.RGBA,this.format=tt.RGBA,this.channelSize=nt,this.textureType=ot||tt.FLOAT}encode(tt,nt){let ot=tt;return this.channelSize===1&&(b.Logger.verbose("Encoder","Exploding into a larger array"),ot=this.allocate(nt),tt.forEach((ht,mt)=>ot[4*mt]=ht)),ot}allocate(tt){return new Float32Array(4*tt)}decode(tt,nt){return this.channelSize===1?tt.filter((ot,ht)=>ht%4==0).subarray(0,nt):tt.subarray(0,nt)}},e.Uint8DataEncoder=class{constructor(tt,nt=1){if(this.channelSize=4,nt===1)this.internalFormat=tt.ALPHA,this.format=tt.ALPHA,this.textureType=tt.UNSIGNED_BYTE,this.channelSize=nt;else{if(nt!==4)throw new Error(`Invalid number of channels: ${nt}`);this.internalFormat=tt.RGBA,this.format=tt.RGBA,this.textureType=tt.UNSIGNED_BYTE,this.channelSize=nt}}encode(tt,nt){return new Uint8Array(tt.buffer,tt.byteOffset,tt.byteLength)}allocate(tt){return new Uint8Array(tt*this.channelSize)}decode(tt,nt){if(tt instanceof Uint8Array)return tt.subarray(0,nt);throw new Error(`Invalid array type: ${tt.constructor}`)}}},7859:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const b=d(6231),tt=d(2517);function nt(yt,ft){const st=[],bt=[],vt=ft!=null&&Array.isArray(ft)&&ft.length===0,xt=ft==null||vt?null:ot(ft,yt).sort();let wt=0;for(let St=0;St<yt.length;++St){if(xt!=null){if(xt[wt]===St&&yt[St]!==1)throw new Error(`Can't squeeze axis ${St} since its dim '${yt[St]}' is not 1`);(xt[wt]==null||xt[wt]>St)&&yt[St]===1&&(st.push(yt[St]),bt.push(St)),xt[wt]<=St&&wt++}yt[St]!==1&&(st.push(yt[St]),bt.push(St))}return{newShape:st,keptDims:bt}}function ot(yt,ft){const st=ft.length;return yt=yt==null?ft.map((bt,vt)=>vt):[].concat(yt),(0,tt.assert)(yt.every(bt=>bt>=-st&&bt<st),()=>`All values in axis param must be in range [-${st}, ${st}) but got axis ${yt}`),(0,tt.assert)(yt.every(ht),()=>`All values in axis param must be integers but got axis ${yt}`),yt.map(bt=>bt<0?st+bt:bt)}function ht(yt){return yt%1==0}function mt(yt){if(yt.length===0)return 1;let ft=yt[0];for(let st=1;st<yt.length;st++)ft*=yt[st];return ft}function gt(yt){const ft=Math.ceil(Math.sqrt(yt));return[ft,Math.ceil(yt/ft)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(yt){this.maxTextureSize=yt}computeTextureWH(yt,ft){if(yt.length===0)return[1,1];const st=this.maxTextureSize;if(ft&&ft.breakAxis!==void 0){const xt=ft.breakAxis>=yt.length?1:yt.slice(ft.breakAxis).reduce((St,_t)=>St*_t),wt=ft.breakAxis<=0?1:yt.slice(0,ft.breakAxis).reduce((St,_t)=>St*_t);if(!(xt>st||wt>st))return[xt,wt];b.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${yt}, breakAxis:${ft.breakAxis}`)}const bt=yt.reduce((xt,wt)=>xt*wt);let vt=Math.floor(Math.sqrt(bt));for(;vt<st&&vt<bt&&bt%vt!=0;vt++);if(vt>=st||bt%vt!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${yt}`);return[vt,bt/vt]}},e.PreferLogicalStrategy=class{constructor(yt){this.maxTextureSize=yt}computeTextureWH(yt,ft){const st=this.computeTexture(yt,ft);return ft&&ft.isPacked&&(st[0]/=2,st[1]/=2),ft&&ft.reverseWH?[st[1],st[0]]:st}computeTexture(yt,ft){const st=ft&&ft.isPacked;if(yt.length===0)return st?[2,2]:[1,1];let bt=this.maxTextureSize;if(ft&&ft.breakAxis!==void 0){const wt=ft.breakAxis>=yt.length?1:yt.slice(ft.breakAxis).reduce((_t,Tt)=>_t*Tt),St=ft.breakAxis<=0?1:yt.slice(0,ft.breakAxis).reduce((_t,Tt)=>_t*Tt);if(!(wt>bt||St>bt))return[wt,St];b.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${yt}, breakAxis:${ft.breakAxis}`)}let vt=yt.slice(0);st&&(bt*=2,vt=vt.map((wt,St)=>St>=vt.length-2?vt[St]%2==0?vt[St]:vt[St]+1:vt[St]),vt.length===1&&(vt=[2,vt[0]])),vt.length!==2&&(vt=nt(vt).newShape);const xt=mt(vt);return vt.length<=1&&xt<=bt?[1,xt]:vt.length===2&&vt[0]<=bt&&vt[1]<=bt?vt:vt.length===3&&vt[0]*vt[1]<=bt&&vt[2]<=bt?[vt[0]*vt[1],vt[2]]:vt.length===3&&vt[0]<=bt&&vt[1]*vt[2]<=bt?[vt[0],vt[1]*vt[2]]:vt.length===4&&vt[0]*vt[1]*vt[2]<=bt&&vt[3]<=bt?[vt[0]*vt[1]*vt[2],vt[3]]:vt.length===4&&vt[0]<=bt&&vt[1]*vt[2]*vt[3]<=bt?[vt[0],vt[1]*vt[2]*vt[3]]:st?gt(xt/4).map(wt=>2*wt):gt(xt)}},e.squeezeShape=nt,e.parseAxisParam=ot,e.isInt=ht,e.sizeFromShape=mt,e.getRowsCols=function(yt){if(yt.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[yt.length>1?yt[yt.length-2]:1,yt[yt.length-1]]},e.sizeToSquarishShape=gt,e.getBatchDim=function(yt,ft=2){return mt(yt.slice(0,yt.length-ft))}},4057:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const b=d(2517),tt=d(2039);e.createTextureLayoutFromTextureType=(nt,ot,ht)=>{const mt=ht===tt.TextureType.unpacked||ht===tt.TextureType.unpackedReversed?1:4,gt=ht===tt.TextureType.packed,yt=ht===tt.TextureType.unpackedReversed||ht===tt.TextureType.packed,ft=ht===tt.TextureType.packedLastDimension?ot.length-1:void 0,st=ht===tt.TextureType.packedLastDimension?ot.map((bt,vt)=>vt===ot.length-1?4*bt:bt):void 0;return(0,e.createTextureLayoutFromShape)(nt,ot,mt,st,{isPacked:gt,reverseWH:yt,breakAxis:ft})},e.calculateTextureWidthAndHeight=(nt,ot,ht)=>{const mt=(0,e.createTextureLayoutFromTextureType)(nt,ot,ht);return[mt.width,mt.height]},e.createTextureLayoutFromShape=(nt,ot,ht=1,mt,gt)=>{const yt=!(!gt||!gt.isPacked),[ft,st]=nt.computeTextureWH(yt&&mt||ot,gt),bt=ot.length;let vt=ot.slice(0);if(bt===0&&(vt=[1]),ht===1)mt=ot;else if(yt){if(ht!==4)throw new Error("a packed texture must be 4-channel");mt=ot,bt>0&&(vt[bt-1]=Math.ceil(vt[bt-1]/2)),bt>1&&(vt[bt-2]=Math.ceil(vt[bt-2]/2))}else if(!mt)throw new Error("Unpacked shape is needed when using channels > 1");return{width:ft,height:st,channels:ht,isPacked:yt,shape:vt,strides:b.ShapeUtil.computeStrides(vt),unpackedShape:mt,reversedWH:gt&&gt.reverseWH}}},5702:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const b=d(6231);e.TextureManager=class{constructor(tt,nt,ot,ht){this.glContext=tt,this.layoutStrategy=nt,this.profiler=ot,this.config=ht,this.pendingRead=new Map,ht.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(tt,nt,ot,ht){const mt=this.toEncoderType(tt),gt=this.glContext.getEncoder(mt,nt.channels||1,ht);if(nt.isPacked&&ht===1)throw new Error("not implemented");const yt=nt.width,ft=nt.height;let st,bt;if(this.config.reuseTextures){st=`${yt}x${ft}_${gt.format}_${gt.internalFormat}_${gt.textureType}`,bt=this.inUseTextures.get(st),bt||(bt=[],this.inUseTextures.set(st,bt));const xt=this.idleTextures.get(st);if(xt&&xt.length>0){const wt=xt.pop();return bt.push(wt),ht===1&&this.glContext.updateTexture(wt,yt,ft,gt,this.toTextureData(tt,ot)),wt}}b.Logger.verbose("TextureManager",`Creating new texture of size ${nt.width}x${nt.height}`);const vt=this.glContext.allocateTexture(yt,ft,gt,this.toTextureData(tt,ot));return this.config.reuseTextures&&(bt.push(vt),this.textureLookup.set(vt,st)),vt}readTexture(tt,nt,ot){return ot||(ot=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const ht=tt.shape.reduce((gt,yt)=>gt*yt)*ot,mt=this.glContext.readTexture(tt.texture,tt.width,tt.height,ht,this.toEncoderType(nt),ot);return this.toTensorData(nt,mt)})}async readTextureAsync(tt,nt,ot){const ht=tt.tensor.dataId;if(ot||(ot=1),this.pendingRead.has(ht)){const mt=this.pendingRead.get(ht);return new Promise(gt=>mt==null?void 0:mt.push(gt))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(ht,[]);const mt=tt.shape.reduce((st,bt)=>st*bt)*ot;await this.glContext.createAndWaitForFence();const gt=this.glContext.readTexture(tt.texture,tt.width,tt.height,mt,this.toEncoderType(nt),ot),yt=this.toTensorData(nt,gt),ft=this.pendingRead.get(ht);return this.pendingRead.delete(ht),ft==null||ft.forEach(st=>st(yt)),yt})}readUint8TextureAsFloat(tt){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const nt=tt.shape.reduce((ht,mt)=>ht*mt),ot=this.glContext.readTexture(tt.texture,tt.width,tt.height,4*nt,"byte",4);return new Float32Array(ot.buffer,ot.byteOffset,nt)})}releaseTexture(tt,nt){let ot;if(this.config.reuseTextures&&(ot=this.textureLookup.get(tt.texture),ot)){nt&&this.textureLookup.delete(ot);const ht=this.inUseTextures.get(ot);if(ht){const mt=ht.indexOf(tt.texture);if(mt!==-1){ht.splice(mt,1);let gt=this.idleTextures.get(ot);gt||(gt=[],this.idleTextures.set(ot,gt)),gt.push(tt.texture)}}}ot&&!nt||(b.Logger.verbose("TextureManager",`Deleting texture of size ${tt.width}x${tt.height}`),this.glContext.deleteTexture(tt.texture))}toTensorData(tt,nt){switch(tt){case"int16":return nt instanceof Int16Array?nt:Int16Array.from(nt);case"int32":return nt instanceof Int32Array?nt:Int32Array.from(nt);case"int8":return nt instanceof Int8Array?nt:Int8Array.from(nt);case"uint16":return nt instanceof Uint16Array?nt:Uint16Array.from(nt);case"uint32":return nt instanceof Uint32Array?nt:Uint32Array.from(nt);case"uint8":case"bool":return nt instanceof Uint8Array?nt:Uint8Array.from(nt);case"float32":return nt instanceof Float32Array?nt:Float32Array.from(nt);case"float64":return nt instanceof Float64Array?nt:Float64Array.from(nt);default:throw new Error(`TensorData type ${tt} is not supported`)}}toTextureData(tt,nt){if(nt)return nt instanceof Float32Array?nt:new Float32Array(nt)}toEncoderType(tt){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(s,e)=>{var d;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(d=e.TextureType||(e.TextureType={}))[d.unpacked=0]="unpacked",d[d.unpackedReversed=1]="unpackedReversed",d[d.packed=2]="packed",d[d.downloadUint8AsFloat=3]="downloadUint8AsFloat",d[d.packedLastDimension=4]="packedLastDimension"},9390:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const b=d(2517);e.getPackedShape=function(tt){const nt=tt.length;return tt.slice(0,nt-1).concat(tt[nt-1]/4)},e.repeatedTry=async function(tt,nt=ht=>0,ot){return new Promise((ht,mt)=>{let gt=0;const yt=()=>{if(tt())return void ht();gt++;const ft=nt(gt);ot!=null&&gt>=ot?mt():setTimeout(yt,ft)};yt()})},e.generateShaderFuncNameFromInputSamplerName=function(tt){return(0,b.assert)(tt!==void 0&&tt.length!==0,()=>"empty string found for sampler name"),"get"+tt.charAt(0).toUpperCase()+tt.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(tt){return(0,b.assert)(tt!==void 0&&tt.length!==0,()=>"empty string found for sampler name"),"get"+tt.charAt(0).toUpperCase()+tt.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(tt,nt){let ot=JSON.parse(JSON.stringify(tt));return ot=nt,ot},e.getSqueezedParams=function(tt,nt){return nt.map(ot=>tt[ot]).join(", ")},e.getCoordsDataType=function(tt){if(tt<=1)return"int";if(tt===2)return"ivec2";if(tt===3)return"ivec3";if(tt===4)return"ivec4";if(tt===5)return"ivec5";if(tt===6)return"ivec6";throw Error(`GPU for rank ${tt} is not yet supported`)},e.getGlChannels=function(tt=6){return["x","y","z","w","u","v"].slice(0,tt)}},7305:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const b=d(6231),tt=d(1713),nt={};function ot(ht){const mt=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const ft=document.createElement("canvas");return ft.width=1,ft.height=1,ft}();let gt;const yt={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!ht||ht==="webgl2")&&(gt=mt.getContext("webgl2",yt),gt))try{return new tt.WebGLContext(gt,2)}catch(ft){b.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${ft}`)}if((!ht||ht==="webgl")&&(gt=mt.getContext("webgl",yt)||mt.getContext("experimental-webgl",yt),gt))try{return new tt.WebGLContext(gt,1)}catch(ft){b.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${ft}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function ht(mt){let gt;mt&&mt!=="webgl2"||!("webgl2"in nt)?mt&&mt!=="webgl"||!("webgl"in nt)||(gt=nt.webgl):gt=nt.webgl2,gt=gt||ot(mt),mt=mt||gt.version===1?"webgl":"webgl2";const yt=gt.gl;return nt[mt]=gt,yt.isContextLost()?(delete nt[mt],ht(mt)):(yt.disable(yt.DEPTH_TEST),yt.disable(yt.STENCIL_TEST),yt.disable(yt.BLEND),yt.disable(yt.DITHER),yt.disable(yt.POLYGON_OFFSET_FILL),yt.disable(yt.SAMPLE_COVERAGE),yt.enable(yt.SCISSOR_TEST),yt.enable(yt.CULL_FACE),yt.cullFace(yt.BACK),gt)},e.createNewWebGLContext=ot},1713:function(s,e,d){var b=this&&this.__createBinding||(Object.create?function(yt,ft,st,bt){bt===void 0&&(bt=st);var vt=Object.getOwnPropertyDescriptor(ft,st);vt&&!("get"in vt?!ft.__esModule:vt.writable||vt.configurable)||(vt={enumerable:!0,get:function(){return ft[st]}}),Object.defineProperty(yt,bt,vt)}:function(yt,ft,st,bt){bt===void 0&&(bt=st),yt[bt]=ft[st]}),tt=this&&this.__setModuleDefault||(Object.create?function(yt,ft){Object.defineProperty(yt,"default",{enumerable:!0,value:ft})}:function(yt,ft){yt.default=ft}),nt=this&&this.__importStar||function(yt){if(yt&&yt.__esModule)return yt;var ft={};if(yt!=null)for(var st in yt)st!=="default"&&Object.prototype.hasOwnProperty.call(yt,st)&&b(ft,yt,st);return tt(ft,yt),ft};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const ot=d(1670),ht=nt(d(7769)),mt=d(9390);function gt(yt){let ft=0;for(;ft<yt.length&&yt[ft]();++ft);return ft-1}e.linearSearchLastTrue=gt,e.WebGLContext=class{constructor(yt,ft){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=yt,this.version=ft,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(yt,ft,st,bt){const vt=this.gl,xt=vt.createTexture();vt.bindTexture(vt.TEXTURE_2D,xt),vt.texParameteri(vt.TEXTURE_2D,vt.TEXTURE_MIN_FILTER,vt.NEAREST),vt.texParameteri(vt.TEXTURE_2D,vt.TEXTURE_MAG_FILTER,vt.NEAREST),vt.texParameteri(vt.TEXTURE_2D,vt.TEXTURE_WRAP_S,vt.CLAMP_TO_EDGE),vt.texParameteri(vt.TEXTURE_2D,vt.TEXTURE_WRAP_T,vt.CLAMP_TO_EDGE);const wt=bt?st.encode(bt,yt*ft):null;return vt.texImage2D(vt.TEXTURE_2D,0,st.internalFormat,yt,ft,0,st.format,st.textureType,wt),this.checkError(),xt}updateTexture(yt,ft,st,bt,vt){const xt=this.gl;xt.bindTexture(xt.TEXTURE_2D,yt);const wt=bt.encode(vt,ft*st);xt.texSubImage2D(xt.TEXTURE_2D,0,0,0,ft,st,bt.format,bt.textureType,wt),this.checkError()}attachFramebuffer(yt,ft,st){const bt=this.gl;bt.bindTexture(bt.TEXTURE_2D,yt),bt.bindFramebuffer(bt.FRAMEBUFFER,this.framebuffer),bt.framebufferTexture2D(bt.FRAMEBUFFER,bt.COLOR_ATTACHMENT0,bt.TEXTURE_2D,yt,0),this.checkError(),bt.viewport(0,0,ft,st),bt.scissor(0,0,ft,st)}readTexture(yt,ft,st,bt,vt,xt){const wt=this.gl;xt||(xt=1),this.frameBufferBound||this.attachFramebuffer(yt,ft,st);const St=this.getEncoder(vt,xt),_t=St.allocate(ft*st);return wt.bindTexture(wt.TEXTURE_2D,yt),wt.framebufferTexture2D(wt.FRAMEBUFFER,wt.COLOR_ATTACHMENT0,wt.TEXTURE_2D,yt,0),wt.readPixels(0,0,ft,st,wt.RGBA,St.textureType,_t),this.checkError(),St.decode(_t,bt)}isFramebufferReady(){return!0}getActiveTexture(){const yt=this.gl;return"TEXTURE"+(yt.getParameter(this.gl.ACTIVE_TEXTURE)-yt.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(yt,ft){const st=this.gl;st.vertexAttribPointer(yt,3,st.FLOAT,!1,20,0),st.enableVertexAttribArray(yt),ft!==-1&&(st.vertexAttribPointer(ft,2,st.FLOAT,!1,20,12),st.enableVertexAttribArray(ft)),this.checkError()}createProgram(yt,ft){const st=this.gl,bt=st.createProgram();return st.attachShader(bt,yt),st.attachShader(bt,ft),st.linkProgram(bt),bt}compileShader(yt,ft){const st=this.gl,bt=st.createShader(ft);if(!bt)throw new Error(`createShader() returned null with type ${ft}`);if(st.shaderSource(bt,yt),st.compileShader(bt),st.getShaderParameter(bt,st.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${st.getShaderInfoLog(bt)}
Shader source:
${yt}`);return bt}deleteShader(yt){this.gl.deleteShader(yt)}bindTextureToUniform(yt,ft,st){const bt=this.gl;bt.activeTexture(bt.TEXTURE0+ft),this.checkError(),bt.bindTexture(bt.TEXTURE_2D,yt),this.checkError(),bt.uniform1i(st,ft),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(ot.env.debug){const yt=this.gl,ft=yt.getError();let st="";switch(ft){case yt.NO_ERROR:return;case yt.INVALID_ENUM:st="INVALID_ENUM";break;case yt.INVALID_VALUE:st="INVALID_VALUE";break;case yt.INVALID_OPERATION:st="INVALID_OPERATION";break;case yt.INVALID_FRAMEBUFFER_OPERATION:st="INVALID_FRAMEBUFFER_OPERATION";break;case yt.OUT_OF_MEMORY:st="OUT_OF_MEMORY";break;case yt.CONTEXT_LOST_WEBGL:st="CONTEXT_LOST_WEBGL";break;default:st=`Unknown WebGL Error: ${ft.toString(16)}`}throw new Error(st)}}deleteTexture(yt){this.gl.deleteTexture(yt)}deleteProgram(yt){this.gl.deleteProgram(yt)}getEncoder(yt,ft,st=0){if(this.version===2)return new ht.RedFloat32DataEncoder(this.gl,ft);switch(yt){case"float":return st===1||this.isRenderFloat32Supported?new ht.RGBAFloatDataEncoder(this.gl,ft):new ht.RGBAFloatDataEncoder(this.gl,ft,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new ht.Uint8DataEncoder(this.gl,ft);default:throw new Error(`Invalid dataType: ${yt}`)}}clearActiveTextures(){const yt=this.gl;for(let ft=0;ft<this.maxTextureImageUnits;++ft)yt.activeTexture(yt.TEXTURE0+ft),yt.bindTexture(yt.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const yt=this.gl;yt.bindFramebuffer(yt.FRAMEBUFFER,null),yt.deleteFramebuffer(this.framebuffer),yt.bindBuffer(yt.ARRAY_BUFFER,null),yt.deleteBuffer(this.vertexbuffer),yt.bindBuffer(yt.ELEMENT_ARRAY_BUFFER,null),yt.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const yt=this.gl,ft=yt.createBuffer();if(!ft)throw new Error("createBuffer() returned null");const st=this.createDefaultGeometry();return yt.bindBuffer(yt.ARRAY_BUFFER,ft),yt.bufferData(yt.ARRAY_BUFFER,st,yt.STATIC_DRAW),this.checkError(),ft}createFramebuffer(){const yt=this.gl.createFramebuffer();if(!yt)throw new Error("createFramebuffer returned null");return yt}queryVitalParameters(){const yt=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=yt.getParameter(yt.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=yt.getParameter(yt.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const yt=this.gl,ft=yt.createTexture();yt.bindTexture(yt.TEXTURE_2D,ft);const st=this.version===2?yt.RGBA32F:yt.RGBA;yt.texImage2D(yt.TEXTURE_2D,0,st,1,1,0,yt.RGBA,yt.FLOAT,null);const bt=yt.createFramebuffer();yt.bindFramebuffer(yt.FRAMEBUFFER,bt),yt.framebufferTexture2D(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,yt.TEXTURE_2D,ft,0);const vt=yt.checkFramebufferStatus(yt.FRAMEBUFFER)===yt.FRAMEBUFFER_COMPLETE;return yt.bindTexture(yt.TEXTURE_2D,null),yt.bindFramebuffer(yt.FRAMEBUFFER,null),yt.deleteTexture(ft),yt.deleteFramebuffer(bt),vt}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const yt=this.gl;let ft,st,bt,vt,xt;try{ft=yt.createTexture(),st=yt.createFramebuffer(),yt.bindTexture(yt.TEXTURE_2D,ft);const wt=this.version===2?yt.RGBA32F:yt.RGBA;return yt.texImage2D(yt.TEXTURE_2D,0,wt,1,1,0,yt.RGBA,yt.FLOAT,null),yt.bindFramebuffer(yt.FRAMEBUFFER,st),yt.framebufferTexture2D(yt.FRAMEBUFFER,yt.COLOR_ATTACHMENT0,yt.TEXTURE_2D,ft,0),yt.enable(yt.BLEND),bt=yt.createShader(yt.VERTEX_SHADER),!!bt&&(yt.shaderSource(bt,"void main(){}"),yt.compileShader(bt),vt=yt.createShader(yt.FRAGMENT_SHADER),!!vt&&(yt.shaderSource(vt,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),yt.compileShader(vt),xt=yt.createProgram(),!!xt&&(yt.attachShader(xt,bt),yt.attachShader(xt,vt),yt.linkProgram(xt),yt.useProgram(xt),yt.drawArrays(yt.POINTS,0,1),yt.getError()===yt.NO_ERROR)))}finally{yt.disable(yt.BLEND),xt&&yt.deleteProgram(xt),bt&&yt.deleteShader(bt),vt&&yt.deleteShader(vt),st&&(yt.bindFramebuffer(yt.FRAMEBUFFER,null),yt.deleteFramebuffer(st)),ft&&(yt.bindTexture(yt.TEXTURE_2D,null),yt.deleteTexture(ft))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const yt=this.gl,ft=this.disjointTimerQueryWebgl2Extension,st=yt.createQuery();return yt.beginQuery(ft.TIME_ELAPSED_EXT,st),st}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const yt=this.gl,ft=this.disjointTimerQueryWebgl2Extension;yt.endQuery(ft.TIME_ELAPSED_EXT)}}isTimerResultAvailable(yt){let ft=!1,st=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const bt=this.gl,vt=this.disjointTimerQueryWebgl2Extension;ft=bt.getQueryParameter(yt,bt.QUERY_RESULT_AVAILABLE),st=bt.getParameter(vt.GPU_DISJOINT_EXT)}return ft&&!st}getTimerResult(yt){let ft=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const st=this.gl;ft=st.getQueryParameter(yt,st.QUERY_RESULT),st.deleteQuery(yt)}return ft/1e6}async waitForQueryAndGetTime(yt){return await(0,mt.repeatedTry)(()=>this.isTimerResultAvailable(yt)),this.getTimerResult(yt)}async createAndWaitForFence(){const yt=this.createFence(this.gl);return this.pollFence(yt)}createFence(yt){let ft;const st=yt,bt=st.fenceSync(st.SYNC_GPU_COMMANDS_COMPLETE,0);return yt.flush(),ft=bt===null?()=>!0:()=>{const vt=st.clientWaitSync(bt,0,0);return vt===st.ALREADY_SIGNALED||vt===st.CONDITION_SATISFIED},{query:bt,isFencePassed:ft}}async pollFence(yt){return new Promise(ft=>{this.addItemToPoll(()=>yt.isFencePassed(),()=>ft())})}pollItems(){const yt=gt(this.itemsToPoll.map(ft=>ft.isDoneFn));for(let ft=0;ft<=yt;++ft){const{resolveFn:st}=this.itemsToPoll[ft];st()}this.itemsToPoll=this.itemsToPoll.slice(yt+1)}async addItemToPoll(yt,ft){this.itemsToPoll.push({isDoneFn:yt,resolveFn:ft}),this.itemsToPoll.length>1||await(0,mt.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const b=d(6231);class tt{constructor(ot,ht){this.op=ot,this.node=ht}}e.ExecutionPlan=class{constructor(nt,ot,ht){this.graph=nt,this.profiler=ht,this.initialize(ot)}initialize(nt){this.profiler.event("session","ExecutionPlan.initialize",()=>{const ot=this.graph.getNodes();if(ot.length!==nt.length)throw new Error("The size of nodes and OPs do not match.");this._ops=nt.map((ht,mt)=>new tt(ht,ot[mt])),this.reset(),this._starter=[],this._ops.forEach((ht,mt)=>{let gt=!0;for(const yt of ht.node.inputs)if(!this._values[yt]&&this.graph.getInputIndices().indexOf(yt)===-1){gt=!1;break}gt&&this._starter.push(mt)})})}reset(){this._values=this.graph.getValues().map(nt=>nt.tensor)}async execute(nt,ot){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const ht=nt.createInferenceHandler(),mt=this.graph.getInputIndices();if(ot.length!==mt.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${ot.length} expected: ${mt.length}`);ot.forEach((vt,xt)=>{const wt=mt[xt];this._values[wt]=vt});const gt=this._starter.slice(0),yt=this.graph.getValues(),ft=this.graph.getNodes();let st=0;for(;st<gt.length;){const vt=gt[st++],xt=this._ops[vt],wt=xt.node.inputs.map(Et=>this._values[Et]);if(wt.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${xt.node}`);const St=wt;b.Logger.verbose("ExecPlan",`Runing op:${xt.node.name} (${St.map((Et,kt)=>`'${xt.node.inputs[kt]}': ${Et.type}[${Et.dims.join(",")}]`).join(", ")})`);const _t=await this.profiler.event("node",xt.node.name,async()=>xt.op.impl(ht,St,xt.op.context));if(_t.length!==xt.node.outputs.length)throw new Error("the size of output does not match model definition.");_t.forEach((Et,kt)=>{const Mt=xt.node.outputs[kt];if(this._values[Mt])throw new Error(`output [${Mt}] already has value: op:${xt.node.name}`);this._values[Mt]=Et});const Tt=new Set;_t.forEach((Et,kt)=>{const Mt=xt.node.outputs[kt];for(const Ot of yt[Mt].to){const Dt=ft[Ot];let At=!0;for(const It of Dt.inputs)if(!this._values[It]){At=!1;break}At&&Tt.add(Ot)}}),gt.push(...Tt)}const bt=[];for(let vt=0;vt<this.graph.getOutputIndices().length;vt++){const xt=this.graph.getOutputIndices()[vt],wt=this._values[xt];if(wt===void 0)throw new Error(`required output [${xt}] does not have value`);xt===0?await wt.getData():wt.data,bt.push(wt)}return b.Logger.verbose("ExecPlan","disposing of inferenceHandler"),ht.dispose(),bt})}}},7070:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const b=d(1446),tt=d(7778),nt=d(9395),ot=d(9162),ht=d(2517);var mt=nt.onnxruntime.experimental.fbs;e.Graph={from:(st,bt)=>new ft(st,bt)};class gt{constructor(bt){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,bt&&(this.type=ht.ProtoUtil.tensorValueTypeFromProto(bt.type.tensorType))}get from(){return this._from}get to(){return this._to}}class yt{constructor(bt,vt){bt instanceof b.onnx.NodeProto?(this.name=bt.name,this.opType=bt.opType,this.attributes=new tt.Attribute(bt.attribute)):bt instanceof mt.Node&&(this.name=vt??bt.name(),this.opType=bt.opType(),this.attributes=new tt.Attribute(ht.ProtoUtil.tensorAttributesFromORTFormat(bt))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class ft{constructor(bt,vt){if(!bt)throw new TypeError("graph is empty");this.buildGraph(bt),this.transformGraph(vt),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(bt){if(bt instanceof b.onnx.GraphProto)this.buildGraphFromOnnxFormat(bt);else{if(!(bt instanceof mt.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(bt)}}buildGraphFromOnnxFormat(bt){const vt=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const xt=new Map;if(!bt.input)throw new Error("missing information in graph: input");const wt=[];for(const St of bt.input){if(vt.has(St.name))throw new Error(`duplicated input name: ${St.name}`);const _t=this._allData.push(new gt(St))-1;vt.set(St.name,_t),wt.push(St.name)}if(!bt.initializer)throw new Error("missing information in graph: initializer");for(const St of bt.initializer){let _t=vt.get(St.name);if(_t===void 0){const Tt=new gt;Tt.type={shape:{dims:ht.ProtoUtil.tensorDimsFromProto(St.dims)},tensorType:ht.ProtoUtil.tensorDataTypeFromProto(St.dataType)},_t=this._allData.push(Tt)-1,vt.set(St.name,_t)}this._allData[_t]._from=-1,this._allData[_t].tensor=ot.Tensor.fromProto(St)}for(let St=0;St<this._allData.length;St++)this._allData[St].tensor||(this._allInputIndices.push(St),this._allInputNames.push(wt[St]));if(!bt.output)throw new Error("missing information in graph: output");for(const St of bt.output){if(vt.has(St.name))throw new Error(`duplicated output name: ${St.name}`);const _t=this._allData.push(new gt(St))-1;vt.set(St.name,_t),this._allOutputIndices.push(_t),this._allOutputNames.push(St.name)}if(!bt.node)throw new Error("missing information in graph: node");for(const St of bt.node){if(!St.name)for(let Tt=0;;Tt++){const Et=`unnamed_${St.opType}_${Tt}`;if(!xt.has(Et)){St.name=Et;break}}if(xt.has(St.name))throw new Error(`duplicated node name: ${St.name}`);const _t=this._nodes.push(new yt(St))-1;xt.set(St.name,_t)}for(let St=0;St<this._nodes.length;St++){const _t=this._nodes[St],Tt=bt.node[St];if(!Tt.output)throw new Error(`missing output for node: ${Tt.name}`);for(const Et of Tt.output){let kt=vt.get(Et);if(kt===void 0&&(kt=this._allData.push(new gt)-1,vt.set(Et,kt)),_t.outputs.push(kt),this._allData[kt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${kt}`);if(this._allData[kt]._from=St,Tt.opType==="Constant"){if(!Tt.attribute||Tt.attribute.length!==1||!Tt.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!Tt.output||Tt.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");_t.outputs.pop(),_t.executeNode=!1,this._allData[kt]._from=-1,this._allData[kt].tensor=ot.Tensor.fromProto(Tt.attribute[0].t)}}}for(let St=0;St<this._nodes.length;St++){const _t=this._nodes[St],Tt=bt.node[St];if(!Tt.input)throw new Error(`missing input for node: ${Tt.name}`);for(const Et of Tt.input){const kt=vt.get(Et);if(kt===void 0){if(Et===""&&Tt.input.length===3&&Tt.opType==="Resize")continue;throw new Error(`unrecognized input '${Et}' for node: ${Tt.name}`)}_t.inputs.push(kt),this._allData[kt]._to.push(St)}}return!0}buildGraphFromOrtFormat(bt){var vt,xt,wt;const St=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const _t=new Map,Tt=[];for(let Et=0;Et<bt.inputsLength();Et++){const kt=bt.inputs(Et);if(St.has(kt))throw new Error(`duplicated input name: ${kt}`);for(let Mt=0;Mt<bt.nodeArgsLength();Mt++)if(((vt=bt.nodeArgs(Mt))===null||vt===void 0?void 0:vt.name())===kt){const Ot=new gt;if(((wt=(xt=bt.nodeArgs(Mt))===null||xt===void 0?void 0:xt.type())===null||wt===void 0?void 0:wt.valueType())!==mt.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const Dt=bt.nodeArgs(Mt).type().value(new mt.TensorTypeAndShape),At=ht.ProtoUtil.tensorDataTypeFromProto(Dt.elemType()),It=Dt.shape(),jt=[];for(let Jt=0;Jt<It.dimLength();Jt++)jt.push(ht.LongUtil.longToNumber(It.dim(Jt).value().dimValue()));Ot.type={shape:{dims:jt},tensorType:At};const qt=this._allData.push(Ot)-1;St.set(kt,qt),Tt.push(kt)}}for(let Et=0;Et<bt.initializersLength();Et++){const kt=bt.initializers(Et);let Mt=St.get(kt.name());if(Mt===void 0){const Ot=new gt,Dt=ht.ProtoUtil.tensorDimsFromORTFormat(kt),At=ht.ProtoUtil.tensorDataTypeFromProto(kt.dataType());Ot.type={shape:{dims:Dt},tensorType:At},Mt=this._allData.push(Ot)-1,St.set(kt.name(),Mt)}this._allData[Mt]._from=-1,this._allData[Mt].tensor=ot.Tensor.fromOrtTensor(kt)}for(let Et=0;Et<this._allData.length;Et++)this._allData[Et].tensor||(this._allInputIndices.push(Et),this._allInputNames.push(Tt[Et]));for(let Et=0;Et<bt.outputsLength();Et++){const kt=bt.outputs(Et);if(St.has(kt))throw new Error(`duplicated output name: ${kt}`);const Mt=this._allData.push(new gt)-1;St.set(kt,Mt),this._allOutputIndices.push(Mt),this._allOutputNames.push(kt)}if(!bt.nodes)throw new Error("missing information in graph: node");for(let Et=0;Et<bt.nodesLength();Et++){const kt=bt.nodes(Et);let Mt=kt.name();if(!Mt)for(let Dt=0;Mt=`unnamed_${kt.opType()}_${Dt}`,_t.has(Mt);Dt++);if(_t.has(Mt))throw new Error(`duplicated node name: ${Mt}`);const Ot=this._nodes.push(new yt(kt,Mt))-1;_t.set(Mt,Ot)}for(let Et=0;Et<this._nodes.length;Et++){const kt=this._nodes[Et],Mt=bt.nodes(Et);if(Mt==null)throw new Error(`No node exists at index ${Et}`);if((Mt==null?void 0:Mt.outputsLength())===0)throw new Error(`missing output for node: ${Mt.name}`);for(let Ot=0;Ot<(Mt==null?void 0:Mt.outputsLength());Ot++){const Dt=Mt==null?void 0:Mt.outputs(Ot);let At=St.get(Dt);if(At===void 0&&(At=this._allData.push(new gt)-1,St.set(Dt,At)),kt.outputs.push(At),this._allData[At]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${At}`);if(this._allData[At]._from=Et,Mt.opType()==="Constant"){if(Mt.attributesLength()!==1||!Mt.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(Mt.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");kt.outputs.pop(),kt.executeNode=!1,this._allData[At]._from=-1,this._allData[At].tensor=ot.Tensor.fromOrtTensor(Mt.attributes(0).t())}}}for(let Et=0;Et<this._nodes.length;Et++){const kt=this._nodes[Et],Mt=bt.nodes(Et);if(Mt.inputsLength()===0)throw new Error(`missing input for node: ${Mt.name}`);for(let Ot=0;Ot<Mt.inputsLength();Ot++){const Dt=Mt.inputs(Ot),At=St.get(Dt);if(At===void 0)throw new Error(`unrecognized input '${Dt}' for node: ${Mt.name()}`);kt.inputs.push(At),this._allData[At]._to.push(Et)}}}checkIsAcyclic(){const bt=new Set;this._allInputIndices.forEach(wt=>{this._allData[wt]._to.forEach(St=>{bt.add(St)})});const vt=Array.from(bt),xt=new Array(this._nodes.length).fill("white");for(;vt.length>0;){const wt=vt.pop();xt[wt]==="gray"?xt[wt]="black":(vt.push(wt),xt[wt]="gray",this._nodes[wt].outputs.forEach(St=>{const _t=this._allData[St];if(_t.tensor!==void 0)throw new Error("node outputs should not be initialized");if(_t._from!==wt)throw new Error("from property of the Value object doesn't match index of Node being processed");_t._to.forEach(Tt=>{if(xt[Tt]==="gray")throw new Error("model graph is cyclic");xt[Tt]==="white"&&vt.push(Tt)})}))}}transformGraph(bt){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),bt&&bt.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let bt=0;for(let vt=0;vt<this._nodes.length;vt++)this._nodes[vt].executeNode?bt>0&&(this._nodes[vt].inputs.forEach(xt=>{const wt=this._allData[xt]._to.indexOf(vt+bt);wt!==-1&&(this._allData[xt]._to[wt]=vt)}),this._nodes[vt].outputs.forEach(xt=>{this._allData[xt]._from&&this._allData[xt]._from===vt+bt&&(this._allData[xt]._from=vt)})):(bt++,this._nodes[vt].outputs.forEach(xt=>{this._allData[xt]._from=-2}),this._nodes.splice(vt,1),vt--);bt=0;for(let vt=0;vt<this._allData.length;vt++)if(this._allData[vt].from!==-2||this._allOutputIndices.indexOf(vt+bt)!==-1){if(bt>0){let xt=-1;this._allData[vt].from!==void 0&&this._allData[vt].from!==-1?(xt=this._nodes[this._allData[vt].from].outputs.indexOf(vt+bt),xt!==-1&&(this._nodes[this._allData[vt].from].outputs[xt]=vt)):(xt=this._allInputIndices.indexOf(vt+bt),xt!==-1&&(this._allInputIndices[xt]=vt)),this._allData[vt].to.forEach(wt=>{xt=this._nodes[wt].inputs.indexOf(vt+bt),xt!==-1&&(this._nodes[wt].inputs[xt]=vt)}),this._allData[vt].to.length===0&&(xt=this._allOutputIndices.indexOf(vt+bt),xt!==-1&&(this._allOutputIndices[xt]=vt))}}else bt++,this._allData.splice(vt,1),vt--}deleteNode(bt){const vt=this._nodes[bt];if(vt.outputs.length>1){for(let Et=1;Et<vt.outputs.length;Et++)if(this._allData[vt.outputs[Et]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}vt.executeNode=!1;const xt=vt.inputs[0],wt=vt.outputs[0],St=this._allData[wt].to,_t=this._allData[xt].to.indexOf(bt);if(_t===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[xt].to.splice(_t,1),this._allData[wt]._to=[];const Tt=this._allOutputIndices.indexOf(wt);if(Tt!==-1&&(this._allOutputIndices[Tt]=xt),St&&St.length>0)for(const Et of St){const kt=this._nodes[Et].inputs.indexOf(wt);if(kt===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[Et].inputs[kt]=xt,this._allData[xt].to.push(Et)}}removeAllDropoutNodes(){let bt=0;for(const vt of this._nodes){if(vt.opType==="Dropout"){if(vt.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(vt.outputs.length!==1&&vt.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(vt.outputs.length===2&&this._allData[vt.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(bt)}bt++}}removeAllIdentityNodes(){let bt=0;for(const vt of this._nodes)vt.opType==="Identity"&&this.deleteNode(bt),bt++}isActivation(bt){switch(bt.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const bt of this._nodes)if(bt.opType==="Conv"){const vt=this._allData[bt.outputs[0]]._to;if(vt.length===1&&this.isActivation(this._nodes[vt[0]])){const xt=this._nodes[vt[0]];if(xt.opType==="Clip")if(xt.inputs.length===1)try{bt.attributes.set("activation_params","floats",[xt.attributes.getFloat("min"),xt.attributes.getFloat("max")])}catch{bt.attributes.set("activation_params","floats",[ht.MIN_CLIP,ht.MAX_CLIP])}else{if(!(xt.inputs.length>=3&&this._allData[xt.inputs[1]].tensor!==void 0&&this._allData[xt.inputs[2]].tensor!==void 0))continue;bt.attributes.set("activation_params","floats",[this._allData[xt.inputs[1]].tensor.floatData[0],this._allData[xt.inputs[2]].tensor.floatData[0]])}bt.attributes.set("activation","string",xt.opType),this.deleteNode(vt[0])}}}}},6231:(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const d={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},b={none:new class{log(yt,ft,st){}},console:new class{log(yt,ft,st){console.log(`${this.color(yt)} ${st?"\x1B[35m"+st+"\x1B[0m ":""}${ft}`)}color(yt){switch(yt){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${yt}`)}}}},tt={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let nt={"":tt};function ot(yt,ft,st,bt){if(ft===void 0)return vt=yt,{verbose:ot.verbose.bind(null,vt),info:ot.info.bind(null,vt),warning:ot.warning.bind(null,vt),error:ot.error.bind(null,vt),fatal:ot.fatal.bind(null,vt)};if(st===void 0)ht(yt,ft);else if(typeof st=="number"&&bt===void 0)ht(yt,ft);else if(typeof st=="string"&&bt===void 0)ht(yt,st,0,ft);else{if(typeof st!="string"||typeof bt!="number")throw new TypeError("input is valid");ht(yt,st,0,ft)}var vt}function ht(yt,ft,st,bt){const vt=nt[bt||""]||nt[""];d[yt]<d[vt.minimalSeverity]||(vt.logDateTime&&(ft=`${new Date().toISOString()}|${ft}`),vt.logSourceLocation,b[vt.provider].log(yt,ft,bt))}(function(yt){function ft(bt){nt={},st("",bt||{})}function st(bt,vt){if(bt==="*")ft(vt);else{const xt=nt[bt]||tt;nt[bt]={provider:vt.provider||xt.provider,minimalSeverity:vt.minimalSeverity||xt.minimalSeverity,logDateTime:vt.logDateTime===void 0?xt.logDateTime:vt.logDateTime,logSourceLocation:vt.logSourceLocation===void 0?xt.logSourceLocation:vt.logSourceLocation}}}yt.verbose=function(bt,vt){yt("verbose",bt,vt)},yt.info=function(bt,vt){yt("info",bt,vt)},yt.warning=function(bt,vt){yt("warning",bt,vt)},yt.error=function(bt,vt){yt("error",bt,vt)},yt.fatal=function(bt,vt){yt("fatal",bt,vt)},yt.reset=ft,yt.set=st,yt.setWithEnv=function(bt){const vt={};bt.logLevel&&(vt.minimalSeverity=bt.logLevel),st("",vt)}})(ot||(ot={})),e.Logger=ot;class mt{constructor(ft,st,bt,vt,xt,wt){this.category=ft,this.name=st,this.startTime=bt,this.endCallback=vt,this.timer=xt,this.ctx=wt}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class gt{constructor(ft,st,bt,vt){this.category=ft,this.name=st,this.startTime=bt,this.endTime=vt}}e.Profiler=class{static create(yt){return yt===void 0?new this:new this(yt.maxNumberEvents,yt.flushBatchSize,yt.flushIntervalInMilliseconds)}constructor(yt,ft,st){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=yt===void 0?1e4:yt,this._flushBatchSize=ft===void 0?10:ft,this._flushIntervalInMilliseconds=st===void 0?5e3:st}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(yt,ft,st,bt){const vt=this._started?this.begin(yt,ft,bt):void 0;let xt=!1;const wt=st();if(wt&&typeof wt.then=="function")return xt=!0,new Promise((St,_t)=>{wt.then(async Tt=>{vt&&await vt.end(),St(Tt)},async Tt=>{vt&&await vt.end(),_t(Tt)})});if(!xt&&vt){const St=vt.end();if(St&&typeof St.then=="function")return new Promise((_t,Tt)=>{St.then(()=>{_t(wt)},Et=>{Tt(Et)})})}return wt}begin(yt,ft,st){if(!this._started)throw new Error("profiler is not started yet");if(st===void 0){const bt=(0,e.now)();return this.flush(bt),new mt(yt,ft,bt,vt=>this.endSync(vt))}{const bt=st.beginTimer();return new mt(yt,ft,0,async vt=>this.end(vt),bt,st)}}async end(yt){const ft=await yt.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new gt(yt.category,yt.name,yt.startTime,ft)),this.flush(ft))}endSync(yt){const ft=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new gt(yt.category,yt.name,yt.startTime,ft)),this.flush(ft))}logOneEvent(yt){e.Logger.verbose(`Profiler.${yt.category}`,`${(yt.endTime-yt.startTime).toFixed(2)}ms on event '${yt.name}' at ${yt.endTime.toFixed(2)}`)}flush(yt){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||yt-this._flushTime>=this._flushIntervalInMilliseconds){for(const ft=this._flushPointer;this._flushPointer<ft+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const b=d(5686),tt=d(1446),nt=d(7070),ot=d(9395),ht=d(2517);var mt=ot.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(gt,yt,ft){if(!ft)try{return void this.loadFromOnnxFormat(gt,yt)}catch(st){if(ft!==void 0)throw st}this.loadFromOrtFormat(gt,yt)}loadFromOnnxFormat(gt,yt){const ft=tt.onnx.ModelProto.decode(gt);if(ht.LongUtil.longToNumber(ft.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=ft.opsetImport.map(st=>({domain:st.domain,version:ht.LongUtil.longToNumber(st.version)})),this._graph=nt.Graph.from(ft.graph,yt)}loadFromOrtFormat(gt,yt){const ft=new b.flatbuffers.ByteBuffer(gt),st=mt.InferenceSession.getRootAsInferenceSession(ft).model();if(ht.LongUtil.longToNumber(st.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let bt=0;bt<st.opsetImportLength();bt++){const vt=st.opsetImport(bt);this._opsets.push({domain:vt==null?void 0:vt.domain(),version:ht.LongUtil.longToNumber(vt.version())})}this._graph=nt.Graph.from(st.graph(),yt)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(s,e)=>{function d(b,tt){if(tt.endsWith("+")){const nt=Number.parseInt(tt.substring(0,tt.length-1),10);return!isNaN(nt)&&nt<=b}if(tt.split("-").length===2){const nt=tt.split("-"),ot=Number.parseInt(nt[0],10),ht=Number.parseInt(nt[1],10);return!isNaN(ot)&&!isNaN(ht)&&ot<=b&&b<=ht}return Number.parseInt(tt,10)===b}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(b,tt,nt){for(const ot of nt){const ht=ot[0],mt=ot[1],gt=ot[2],yt=ot[3],ft=ot[4];if(b.opType===ht){for(const st of tt)if((st.domain===mt||st.domain==="ai.onnx"&&mt==="")&&d(st.version,gt))return{opImpl:yt,opInit:ft}}}throw new TypeError(`cannot resolve operator '${b.opType}' with opsets: ${tt.map(ot=>`${ot.domain||"ai.onnx"} v${ot.version}`).join(", ")}`)}},9395:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const b=d(5686);var tt,nt;tt=e.onnxruntime||(e.onnxruntime={}),function(ot){(function(ht){ht[ht.UNDEFINED=0]="UNDEFINED",ht[ht.FLOAT=1]="FLOAT",ht[ht.INT=2]="INT",ht[ht.STRING=3]="STRING",ht[ht.TENSOR=4]="TENSOR",ht[ht.GRAPH=5]="GRAPH",ht[ht.FLOATS=6]="FLOATS",ht[ht.INTS=7]="INTS",ht[ht.STRINGS=8]="STRINGS",ht[ht.TENSORS=9]="TENSORS",ht[ht.GRAPHS=10]="GRAPHS",ht[ht.SPARSE_TENSOR=11]="SPARSE_TENSOR",ht[ht.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(ot.AttributeType||(ot.AttributeType={}))}((nt=tt.experimental||(tt.experimental={})).fbs||(nt.fbs={})),function(ot){(function(ht){(function(mt){(function(gt){gt[gt.UNKNOWN=0]="UNKNOWN",gt[gt.VALUE=1]="VALUE",gt[gt.PARAM=2]="PARAM"})(mt.DimensionValueType||(mt.DimensionValueType={}))})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){(function(gt){gt[gt.UNDEFINED=0]="UNDEFINED",gt[gt.FLOAT=1]="FLOAT",gt[gt.UINT8=2]="UINT8",gt[gt.INT8=3]="INT8",gt[gt.UINT16=4]="UINT16",gt[gt.INT16=5]="INT16",gt[gt.INT32=6]="INT32",gt[gt.INT64=7]="INT64",gt[gt.STRING=8]="STRING",gt[gt.BOOL=9]="BOOL",gt[gt.FLOAT16=10]="FLOAT16",gt[gt.DOUBLE=11]="DOUBLE",gt[gt.UINT32=12]="UINT32",gt[gt.UINT64=13]="UINT64",gt[gt.COMPLEX64=14]="COMPLEX64",gt[gt.COMPLEX128=15]="COMPLEX128",gt[gt.BFLOAT16=16]="BFLOAT16"})(mt.TensorDataType||(mt.TensorDataType={}))})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){(function(gt){gt[gt.Primitive=0]="Primitive",gt[gt.Fused=1]="Fused"})(mt.NodeType||(mt.NodeType={}))})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){(function(gt){gt[gt.NONE=0]="NONE",gt[gt.tensor_type=1]="tensor_type",gt[gt.sequence_type=2]="sequence_type",gt[gt.map_type=3]="map_type"})(mt.TypeInfoValue||(mt.TypeInfoValue={}))})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsShape(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsShape(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}dim(ft,st){let bt=this.bb.__offset(this.bb_pos,4);return bt?(st||new ot.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}dimLength(){let ft=this.bb.__offset(this.bb_pos,4);return ft?this.bb.__vector_len(this.bb_pos+ft):0}static startShape(ft){ft.startObject(1)}static addDim(ft,st){ft.addFieldOffset(0,st,0)}static createDimVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startDimVector(ft,st){ft.startVector(4,st,4)}static endShape(ft){return ft.endObject()}static createShape(ft,st){return gt.startShape(ft),gt.addDim(ft,st),gt.endShape(ft)}}mt.Shape=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsDimension(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsDimension(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}value(ft){let st=this.bb.__offset(this.bb_pos,4);return st?(ft||new ot.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}denotation(ft){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__string(this.bb_pos+st,ft):null}static startDimension(ft){ft.startObject(2)}static addValue(ft,st){ft.addFieldOffset(0,st,0)}static addDenotation(ft,st){ft.addFieldOffset(1,st,0)}static endDimension(ft){return ft.endObject()}static createDimension(ft,st,bt){return gt.startDimension(ft),gt.addValue(ft,st),gt.addDenotation(ft,bt),gt.endDimension(ft)}}mt.Dimension=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsDimensionValue(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsDimensionValue(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}dimType(){let ft=this.bb.__offset(this.bb_pos,4);return ft?this.bb.readInt8(this.bb_pos+ft):ot.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let ft=this.bb.__offset(this.bb_pos,6);return ft?this.bb.readInt64(this.bb_pos+ft):this.bb.createLong(0,0)}dimParam(ft){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.__string(this.bb_pos+st,ft):null}static startDimensionValue(ft){ft.startObject(3)}static addDimType(ft,st){ft.addFieldInt8(0,st,ot.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(ft,st){ft.addFieldInt64(1,st,ft.createLong(0,0))}static addDimParam(ft,st){ft.addFieldOffset(2,st,0)}static endDimensionValue(ft){return ft.endObject()}static createDimensionValue(ft,st,bt,vt){return gt.startDimensionValue(ft),gt.addDimType(ft,st),gt.addDimValue(ft,bt),gt.addDimParam(ft,vt),gt.endDimensionValue(ft)}}mt.DimensionValue=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsTensorTypeAndShape(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsTensorTypeAndShape(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}elemType(){let ft=this.bb.__offset(this.bb_pos,4);return ft?this.bb.readInt32(this.bb_pos+ft):ot.experimental.fbs.TensorDataType.UNDEFINED}shape(ft){let st=this.bb.__offset(this.bb_pos,6);return st?(ft||new ot.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}static startTensorTypeAndShape(ft){ft.startObject(2)}static addElemType(ft,st){ft.addFieldInt32(0,st,ot.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(ft,st){ft.addFieldOffset(1,st,0)}static endTensorTypeAndShape(ft){return ft.endObject()}static createTensorTypeAndShape(ft,st,bt){return gt.startTensorTypeAndShape(ft),gt.addElemType(ft,st),gt.addShape(ft,bt),gt.endTensorTypeAndShape(ft)}}mt.TensorTypeAndShape=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsMapType(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsMapType(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}keyType(){let ft=this.bb.__offset(this.bb_pos,4);return ft?this.bb.readInt32(this.bb_pos+ft):ot.experimental.fbs.TensorDataType.UNDEFINED}valueType(ft){let st=this.bb.__offset(this.bb_pos,6);return st?(ft||new ot.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}static startMapType(ft){ft.startObject(2)}static addKeyType(ft,st){ft.addFieldInt32(0,st,ot.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(ft,st){ft.addFieldOffset(1,st,0)}static endMapType(ft){return ft.endObject()}static createMapType(ft,st,bt){return gt.startMapType(ft),gt.addKeyType(ft,st),gt.addValueType(ft,bt),gt.endMapType(ft)}}mt.MapType=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsSequenceType(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsSequenceType(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}elemType(ft){let st=this.bb.__offset(this.bb_pos,4);return st?(ft||new ot.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}static startSequenceType(ft){ft.startObject(1)}static addElemType(ft,st){ft.addFieldOffset(0,st,0)}static endSequenceType(ft){return ft.endObject()}static createSequenceType(ft,st){return gt.startSequenceType(ft),gt.addElemType(ft,st),gt.endSequenceType(ft)}}mt.SequenceType=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(ht.fbs||(ht.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(mt,gt){return this.bb_pos=mt,this.bb=gt,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(mt,gt,yt,ft){return mt.prep(4,12),mt.writeInt32(ft),mt.writeInt32(yt),mt.writeInt32(gt),mt.offset()}}})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsNodeEdge(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsNodeEdge(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}nodeIndex(){let ft=this.bb.__offset(this.bb_pos,4);return ft?this.bb.readUint32(this.bb_pos+ft):0}inputEdges(ft,st){let bt=this.bb.__offset(this.bb_pos,6);return bt?(st||new ot.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+bt)+12*ft,this.bb):null}inputEdgesLength(){let ft=this.bb.__offset(this.bb_pos,6);return ft?this.bb.__vector_len(this.bb_pos+ft):0}outputEdges(ft,st){let bt=this.bb.__offset(this.bb_pos,8);return bt?(st||new ot.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+bt)+12*ft,this.bb):null}outputEdgesLength(){let ft=this.bb.__offset(this.bb_pos,8);return ft?this.bb.__vector_len(this.bb_pos+ft):0}static startNodeEdge(ft){ft.startObject(3)}static addNodeIndex(ft,st){ft.addFieldInt32(0,st,0)}static addInputEdges(ft,st){ft.addFieldOffset(1,st,0)}static startInputEdgesVector(ft,st){ft.startVector(12,st,4)}static addOutputEdges(ft,st){ft.addFieldOffset(2,st,0)}static startOutputEdgesVector(ft,st){ft.startVector(12,st,4)}static endNodeEdge(ft){return ft.endObject()}static createNodeEdge(ft,st,bt,vt){return gt.startNodeEdge(ft),gt.addNodeIndex(ft,st),gt.addInputEdges(ft,bt),gt.addOutputEdges(ft,vt),gt.endNodeEdge(ft)}}mt.NodeEdge=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsNode(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsNode(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}name(ft){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__string(this.bb_pos+st,ft):null}docString(ft){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__string(this.bb_pos+st,ft):null}domain(ft){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.__string(this.bb_pos+st,ft):null}sinceVersion(){let ft=this.bb.__offset(this.bb_pos,10);return ft?this.bb.readInt32(this.bb_pos+ft):0}index(){let ft=this.bb.__offset(this.bb_pos,12);return ft?this.bb.readUint32(this.bb_pos+ft):0}opType(ft){let st=this.bb.__offset(this.bb_pos,14);return st?this.bb.__string(this.bb_pos+st,ft):null}type(){let ft=this.bb.__offset(this.bb_pos,16);return ft?this.bb.readInt32(this.bb_pos+ft):ot.experimental.fbs.NodeType.Primitive}executionProviderType(ft){let st=this.bb.__offset(this.bb_pos,18);return st?this.bb.__string(this.bb_pos+st,ft):null}inputs(ft,st){let bt=this.bb.__offset(this.bb_pos,20);return bt?this.bb.__string(this.bb.__vector(this.bb_pos+bt)+4*ft,st):null}inputsLength(){let ft=this.bb.__offset(this.bb_pos,20);return ft?this.bb.__vector_len(this.bb_pos+ft):0}outputs(ft,st){let bt=this.bb.__offset(this.bb_pos,22);return bt?this.bb.__string(this.bb.__vector(this.bb_pos+bt)+4*ft,st):null}outputsLength(){let ft=this.bb.__offset(this.bb_pos,22);return ft?this.bb.__vector_len(this.bb_pos+ft):0}attributes(ft,st){let bt=this.bb.__offset(this.bb_pos,24);return bt?(st||new ot.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}attributesLength(){let ft=this.bb.__offset(this.bb_pos,24);return ft?this.bb.__vector_len(this.bb_pos+ft):0}inputArgCounts(ft){let st=this.bb.__offset(this.bb_pos,26);return st?this.bb.readInt32(this.bb.__vector(this.bb_pos+st)+4*ft):0}inputArgCountsLength(){let ft=this.bb.__offset(this.bb_pos,26);return ft?this.bb.__vector_len(this.bb_pos+ft):0}inputArgCountsArray(){let ft=this.bb.__offset(this.bb_pos,26);return ft?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ft),this.bb.__vector_len(this.bb_pos+ft)):null}implicitInputs(ft,st){let bt=this.bb.__offset(this.bb_pos,28);return bt?this.bb.__string(this.bb.__vector(this.bb_pos+bt)+4*ft,st):null}implicitInputsLength(){let ft=this.bb.__offset(this.bb_pos,28);return ft?this.bb.__vector_len(this.bb_pos+ft):0}static startNode(ft){ft.startObject(13)}static addName(ft,st){ft.addFieldOffset(0,st,0)}static addDocString(ft,st){ft.addFieldOffset(1,st,0)}static addDomain(ft,st){ft.addFieldOffset(2,st,0)}static addSinceVersion(ft,st){ft.addFieldInt32(3,st,0)}static addIndex(ft,st){ft.addFieldInt32(4,st,0)}static addOpType(ft,st){ft.addFieldOffset(5,st,0)}static addType(ft,st){ft.addFieldInt32(6,st,ot.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(ft,st){ft.addFieldOffset(7,st,0)}static addInputs(ft,st){ft.addFieldOffset(8,st,0)}static createInputsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startInputsVector(ft,st){ft.startVector(4,st,4)}static addOutputs(ft,st){ft.addFieldOffset(9,st,0)}static createOutputsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startOutputsVector(ft,st){ft.startVector(4,st,4)}static addAttributes(ft,st){ft.addFieldOffset(10,st,0)}static createAttributesVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startAttributesVector(ft,st){ft.startVector(4,st,4)}static addInputArgCounts(ft,st){ft.addFieldOffset(11,st,0)}static createInputArgCountsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addInt32(st[bt]);return ft.endVector()}static startInputArgCountsVector(ft,st){ft.startVector(4,st,4)}static addImplicitInputs(ft,st){ft.addFieldOffset(12,st,0)}static createImplicitInputsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startImplicitInputsVector(ft,st){ft.startVector(4,st,4)}static endNode(ft){return ft.endObject()}static createNode(ft,st,bt,vt,xt,wt,St,_t,Tt,Et,kt,Mt,Ot,Dt){return gt.startNode(ft),gt.addName(ft,st),gt.addDocString(ft,bt),gt.addDomain(ft,vt),gt.addSinceVersion(ft,xt),gt.addIndex(ft,wt),gt.addOpType(ft,St),gt.addType(ft,_t),gt.addExecutionProviderType(ft,Tt),gt.addInputs(ft,Et),gt.addOutputs(ft,kt),gt.addAttributes(ft,Mt),gt.addInputArgCounts(ft,Ot),gt.addImplicitInputs(ft,Dt),gt.endNode(ft)}}mt.Node=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsValueInfo(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsValueInfo(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}name(ft){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__string(this.bb_pos+st,ft):null}docString(ft){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__string(this.bb_pos+st,ft):null}type(ft){let st=this.bb.__offset(this.bb_pos,8);return st?(ft||new ot.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}static startValueInfo(ft){ft.startObject(3)}static addName(ft,st){ft.addFieldOffset(0,st,0)}static addDocString(ft,st){ft.addFieldOffset(1,st,0)}static addType(ft,st){ft.addFieldOffset(2,st,0)}static endValueInfo(ft){return ft.endObject()}static createValueInfo(ft,st,bt,vt){return gt.startValueInfo(ft),gt.addName(ft,st),gt.addDocString(ft,bt),gt.addType(ft,vt),gt.endValueInfo(ft)}}mt.ValueInfo=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsTypeInfo(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsTypeInfo(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}denotation(ft){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__string(this.bb_pos+st,ft):null}valueType(){let ft=this.bb.__offset(this.bb_pos,6);return ft?this.bb.readUint8(this.bb_pos+ft):ot.experimental.fbs.TypeInfoValue.NONE}value(ft){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.__union(ft,this.bb_pos+st):null}static startTypeInfo(ft){ft.startObject(3)}static addDenotation(ft,st){ft.addFieldOffset(0,st,0)}static addValueType(ft,st){ft.addFieldInt8(1,st,ot.experimental.fbs.TypeInfoValue.NONE)}static addValue(ft,st){ft.addFieldOffset(2,st,0)}static endTypeInfo(ft){return ft.endObject()}static createTypeInfo(ft,st,bt,vt){return gt.startTypeInfo(ft),gt.addDenotation(ft,st),gt.addValueType(ft,bt),gt.addValue(ft,vt),gt.endTypeInfo(ft)}}mt.TypeInfo=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsOperatorSetId(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsOperatorSetId(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}domain(ft){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__string(this.bb_pos+st,ft):null}version(){let ft=this.bb.__offset(this.bb_pos,6);return ft?this.bb.readInt64(this.bb_pos+ft):this.bb.createLong(0,0)}static startOperatorSetId(ft){ft.startObject(2)}static addDomain(ft,st){ft.addFieldOffset(0,st,0)}static addVersion(ft,st){ft.addFieldInt64(1,st,ft.createLong(0,0))}static endOperatorSetId(ft){return ft.endObject()}static createOperatorSetId(ft,st,bt){return gt.startOperatorSetId(ft),gt.addDomain(ft,st),gt.addVersion(ft,bt),gt.endOperatorSetId(ft)}}mt.OperatorSetId=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsTensor(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsTensor(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}name(ft){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__string(this.bb_pos+st,ft):null}docString(ft){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__string(this.bb_pos+st,ft):null}dims(ft){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.readInt64(this.bb.__vector(this.bb_pos+st)+8*ft):this.bb.createLong(0,0)}dimsLength(){let ft=this.bb.__offset(this.bb_pos,8);return ft?this.bb.__vector_len(this.bb_pos+ft):0}dataType(){let ft=this.bb.__offset(this.bb_pos,10);return ft?this.bb.readInt32(this.bb_pos+ft):ot.experimental.fbs.TensorDataType.UNDEFINED}rawData(ft){let st=this.bb.__offset(this.bb_pos,12);return st?this.bb.readUint8(this.bb.__vector(this.bb_pos+st)+ft):0}rawDataLength(){let ft=this.bb.__offset(this.bb_pos,12);return ft?this.bb.__vector_len(this.bb_pos+ft):0}rawDataArray(){let ft=this.bb.__offset(this.bb_pos,12);return ft?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ft),this.bb.__vector_len(this.bb_pos+ft)):null}stringData(ft,st){let bt=this.bb.__offset(this.bb_pos,14);return bt?this.bb.__string(this.bb.__vector(this.bb_pos+bt)+4*ft,st):null}stringDataLength(){let ft=this.bb.__offset(this.bb_pos,14);return ft?this.bb.__vector_len(this.bb_pos+ft):0}static startTensor(ft){ft.startObject(6)}static addName(ft,st){ft.addFieldOffset(0,st,0)}static addDocString(ft,st){ft.addFieldOffset(1,st,0)}static addDims(ft,st){ft.addFieldOffset(2,st,0)}static createDimsVector(ft,st){ft.startVector(8,st.length,8);for(let bt=st.length-1;bt>=0;bt--)ft.addInt64(st[bt]);return ft.endVector()}static startDimsVector(ft,st){ft.startVector(8,st,8)}static addDataType(ft,st){ft.addFieldInt32(3,st,ot.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(ft,st){ft.addFieldOffset(4,st,0)}static createRawDataVector(ft,st){ft.startVector(1,st.length,1);for(let bt=st.length-1;bt>=0;bt--)ft.addInt8(st[bt]);return ft.endVector()}static startRawDataVector(ft,st){ft.startVector(1,st,1)}static addStringData(ft,st){ft.addFieldOffset(5,st,0)}static createStringDataVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startStringDataVector(ft,st){ft.startVector(4,st,4)}static endTensor(ft){return ft.endObject()}static createTensor(ft,st,bt,vt,xt,wt,St){return gt.startTensor(ft),gt.addName(ft,st),gt.addDocString(ft,bt),gt.addDims(ft,vt),gt.addDataType(ft,xt),gt.addRawData(ft,wt),gt.addStringData(ft,St),gt.endTensor(ft)}}mt.Tensor=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsSparseTensor(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsSparseTensor(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}values(ft){let st=this.bb.__offset(this.bb_pos,4);return st?(ft||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}indices(ft){let st=this.bb.__offset(this.bb_pos,6);return st?(ft||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}dims(ft){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.readInt64(this.bb.__vector(this.bb_pos+st)+8*ft):this.bb.createLong(0,0)}dimsLength(){let ft=this.bb.__offset(this.bb_pos,8);return ft?this.bb.__vector_len(this.bb_pos+ft):0}static startSparseTensor(ft){ft.startObject(3)}static addValues(ft,st){ft.addFieldOffset(0,st,0)}static addIndices(ft,st){ft.addFieldOffset(1,st,0)}static addDims(ft,st){ft.addFieldOffset(2,st,0)}static createDimsVector(ft,st){ft.startVector(8,st.length,8);for(let bt=st.length-1;bt>=0;bt--)ft.addInt64(st[bt]);return ft.endVector()}static startDimsVector(ft,st){ft.startVector(8,st,8)}static endSparseTensor(ft){return ft.endObject()}static createSparseTensor(ft,st,bt,vt){return gt.startSparseTensor(ft),gt.addValues(ft,st),gt.addIndices(ft,bt),gt.addDims(ft,vt),gt.endSparseTensor(ft)}}mt.SparseTensor=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsAttribute(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsAttribute(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}name(ft){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__string(this.bb_pos+st,ft):null}docString(ft){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__string(this.bb_pos+st,ft):null}type(){let ft=this.bb.__offset(this.bb_pos,8);return ft?this.bb.readInt32(this.bb_pos+ft):ot.experimental.fbs.AttributeType.UNDEFINED}f(){let ft=this.bb.__offset(this.bb_pos,10);return ft?this.bb.readFloat32(this.bb_pos+ft):0}i(){let ft=this.bb.__offset(this.bb_pos,12);return ft?this.bb.readInt64(this.bb_pos+ft):this.bb.createLong(0,0)}s(ft){let st=this.bb.__offset(this.bb_pos,14);return st?this.bb.__string(this.bb_pos+st,ft):null}t(ft){let st=this.bb.__offset(this.bb_pos,16);return st?(ft||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}g(ft){let st=this.bb.__offset(this.bb_pos,18);return st?(ft||new ot.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}floats(ft){let st=this.bb.__offset(this.bb_pos,20);return st?this.bb.readFloat32(this.bb.__vector(this.bb_pos+st)+4*ft):0}floatsLength(){let ft=this.bb.__offset(this.bb_pos,20);return ft?this.bb.__vector_len(this.bb_pos+ft):0}floatsArray(){let ft=this.bb.__offset(this.bb_pos,20);return ft?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ft),this.bb.__vector_len(this.bb_pos+ft)):null}ints(ft){let st=this.bb.__offset(this.bb_pos,22);return st?this.bb.readInt64(this.bb.__vector(this.bb_pos+st)+8*ft):this.bb.createLong(0,0)}intsLength(){let ft=this.bb.__offset(this.bb_pos,22);return ft?this.bb.__vector_len(this.bb_pos+ft):0}strings(ft,st){let bt=this.bb.__offset(this.bb_pos,24);return bt?this.bb.__string(this.bb.__vector(this.bb_pos+bt)+4*ft,st):null}stringsLength(){let ft=this.bb.__offset(this.bb_pos,24);return ft?this.bb.__vector_len(this.bb_pos+ft):0}tensors(ft,st){let bt=this.bb.__offset(this.bb_pos,26);return bt?(st||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}tensorsLength(){let ft=this.bb.__offset(this.bb_pos,26);return ft?this.bb.__vector_len(this.bb_pos+ft):0}graphs(ft,st){let bt=this.bb.__offset(this.bb_pos,28);return bt?(st||new ot.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}graphsLength(){let ft=this.bb.__offset(this.bb_pos,28);return ft?this.bb.__vector_len(this.bb_pos+ft):0}static startAttribute(ft){ft.startObject(13)}static addName(ft,st){ft.addFieldOffset(0,st,0)}static addDocString(ft,st){ft.addFieldOffset(1,st,0)}static addType(ft,st){ft.addFieldInt32(2,st,ot.experimental.fbs.AttributeType.UNDEFINED)}static addF(ft,st){ft.addFieldFloat32(3,st,0)}static addI(ft,st){ft.addFieldInt64(4,st,ft.createLong(0,0))}static addS(ft,st){ft.addFieldOffset(5,st,0)}static addT(ft,st){ft.addFieldOffset(6,st,0)}static addG(ft,st){ft.addFieldOffset(7,st,0)}static addFloats(ft,st){ft.addFieldOffset(8,st,0)}static createFloatsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addFloat32(st[bt]);return ft.endVector()}static startFloatsVector(ft,st){ft.startVector(4,st,4)}static addInts(ft,st){ft.addFieldOffset(9,st,0)}static createIntsVector(ft,st){ft.startVector(8,st.length,8);for(let bt=st.length-1;bt>=0;bt--)ft.addInt64(st[bt]);return ft.endVector()}static startIntsVector(ft,st){ft.startVector(8,st,8)}static addStrings(ft,st){ft.addFieldOffset(10,st,0)}static createStringsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startStringsVector(ft,st){ft.startVector(4,st,4)}static addTensors(ft,st){ft.addFieldOffset(11,st,0)}static createTensorsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startTensorsVector(ft,st){ft.startVector(4,st,4)}static addGraphs(ft,st){ft.addFieldOffset(12,st,0)}static createGraphsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startGraphsVector(ft,st){ft.startVector(4,st,4)}static endAttribute(ft){return ft.endObject()}static createAttribute(ft,st,bt,vt,xt,wt,St,_t,Tt,Et,kt,Mt,Ot,Dt){return gt.startAttribute(ft),gt.addName(ft,st),gt.addDocString(ft,bt),gt.addType(ft,vt),gt.addF(ft,xt),gt.addI(ft,wt),gt.addS(ft,St),gt.addT(ft,_t),gt.addG(ft,Tt),gt.addFloats(ft,Et),gt.addInts(ft,kt),gt.addStrings(ft,Mt),gt.addTensors(ft,Ot),gt.addGraphs(ft,Dt),gt.endAttribute(ft)}}mt.Attribute=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsGraph(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsGraph(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}initializers(ft,st){let bt=this.bb.__offset(this.bb_pos,4);return bt?(st||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}initializersLength(){let ft=this.bb.__offset(this.bb_pos,4);return ft?this.bb.__vector_len(this.bb_pos+ft):0}nodeArgs(ft,st){let bt=this.bb.__offset(this.bb_pos,6);return bt?(st||new ot.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}nodeArgsLength(){let ft=this.bb.__offset(this.bb_pos,6);return ft?this.bb.__vector_len(this.bb_pos+ft):0}nodes(ft,st){let bt=this.bb.__offset(this.bb_pos,8);return bt?(st||new ot.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}nodesLength(){let ft=this.bb.__offset(this.bb_pos,8);return ft?this.bb.__vector_len(this.bb_pos+ft):0}maxNodeIndex(){let ft=this.bb.__offset(this.bb_pos,10);return ft?this.bb.readUint32(this.bb_pos+ft):0}nodeEdges(ft,st){let bt=this.bb.__offset(this.bb_pos,12);return bt?(st||new ot.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}nodeEdgesLength(){let ft=this.bb.__offset(this.bb_pos,12);return ft?this.bb.__vector_len(this.bb_pos+ft):0}inputs(ft,st){let bt=this.bb.__offset(this.bb_pos,14);return bt?this.bb.__string(this.bb.__vector(this.bb_pos+bt)+4*ft,st):null}inputsLength(){let ft=this.bb.__offset(this.bb_pos,14);return ft?this.bb.__vector_len(this.bb_pos+ft):0}outputs(ft,st){let bt=this.bb.__offset(this.bb_pos,16);return bt?this.bb.__string(this.bb.__vector(this.bb_pos+bt)+4*ft,st):null}outputsLength(){let ft=this.bb.__offset(this.bb_pos,16);return ft?this.bb.__vector_len(this.bb_pos+ft):0}sparseInitializers(ft,st){let bt=this.bb.__offset(this.bb_pos,18);return bt?(st||new ot.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}sparseInitializersLength(){let ft=this.bb.__offset(this.bb_pos,18);return ft?this.bb.__vector_len(this.bb_pos+ft):0}static startGraph(ft){ft.startObject(8)}static addInitializers(ft,st){ft.addFieldOffset(0,st,0)}static createInitializersVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startInitializersVector(ft,st){ft.startVector(4,st,4)}static addNodeArgs(ft,st){ft.addFieldOffset(1,st,0)}static createNodeArgsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startNodeArgsVector(ft,st){ft.startVector(4,st,4)}static addNodes(ft,st){ft.addFieldOffset(2,st,0)}static createNodesVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startNodesVector(ft,st){ft.startVector(4,st,4)}static addMaxNodeIndex(ft,st){ft.addFieldInt32(3,st,0)}static addNodeEdges(ft,st){ft.addFieldOffset(4,st,0)}static createNodeEdgesVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startNodeEdgesVector(ft,st){ft.startVector(4,st,4)}static addInputs(ft,st){ft.addFieldOffset(5,st,0)}static createInputsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startInputsVector(ft,st){ft.startVector(4,st,4)}static addOutputs(ft,st){ft.addFieldOffset(6,st,0)}static createOutputsVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startOutputsVector(ft,st){ft.startVector(4,st,4)}static addSparseInitializers(ft,st){ft.addFieldOffset(7,st,0)}static createSparseInitializersVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startSparseInitializersVector(ft,st){ft.startVector(4,st,4)}static endGraph(ft){return ft.endObject()}static createGraph(ft,st,bt,vt,xt,wt,St,_t,Tt){return gt.startGraph(ft),gt.addInitializers(ft,st),gt.addNodeArgs(ft,bt),gt.addNodes(ft,vt),gt.addMaxNodeIndex(ft,xt),gt.addNodeEdges(ft,wt),gt.addInputs(ft,St),gt.addOutputs(ft,_t),gt.addSparseInitializers(ft,Tt),gt.endGraph(ft)}}mt.Graph=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsModel(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsModel(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}irVersion(){let ft=this.bb.__offset(this.bb_pos,4);return ft?this.bb.readInt64(this.bb_pos+ft):this.bb.createLong(0,0)}opsetImport(ft,st){let bt=this.bb.__offset(this.bb_pos,6);return bt?(st||new ot.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}opsetImportLength(){let ft=this.bb.__offset(this.bb_pos,6);return ft?this.bb.__vector_len(this.bb_pos+ft):0}producerName(ft){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.__string(this.bb_pos+st,ft):null}producerVersion(ft){let st=this.bb.__offset(this.bb_pos,10);return st?this.bb.__string(this.bb_pos+st,ft):null}domain(ft){let st=this.bb.__offset(this.bb_pos,12);return st?this.bb.__string(this.bb_pos+st,ft):null}modelVersion(){let ft=this.bb.__offset(this.bb_pos,14);return ft?this.bb.readInt64(this.bb_pos+ft):this.bb.createLong(0,0)}docString(ft){let st=this.bb.__offset(this.bb_pos,16);return st?this.bb.__string(this.bb_pos+st,ft):null}graph(ft){let st=this.bb.__offset(this.bb_pos,18);return st?(ft||new ot.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}graphDocString(ft){let st=this.bb.__offset(this.bb_pos,20);return st?this.bb.__string(this.bb_pos+st,ft):null}static startModel(ft){ft.startObject(9)}static addIrVersion(ft,st){ft.addFieldInt64(0,st,ft.createLong(0,0))}static addOpsetImport(ft,st){ft.addFieldOffset(1,st,0)}static createOpsetImportVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startOpsetImportVector(ft,st){ft.startVector(4,st,4)}static addProducerName(ft,st){ft.addFieldOffset(2,st,0)}static addProducerVersion(ft,st){ft.addFieldOffset(3,st,0)}static addDomain(ft,st){ft.addFieldOffset(4,st,0)}static addModelVersion(ft,st){ft.addFieldInt64(5,st,ft.createLong(0,0))}static addDocString(ft,st){ft.addFieldOffset(6,st,0)}static addGraph(ft,st){ft.addFieldOffset(7,st,0)}static addGraphDocString(ft,st){ft.addFieldOffset(8,st,0)}static endModel(ft){return ft.endObject()}static createModel(ft,st,bt,vt,xt,wt,St,_t,Tt,Et){return gt.startModel(ft),gt.addIrVersion(ft,st),gt.addOpsetImport(ft,bt),gt.addProducerName(ft,vt),gt.addProducerVersion(ft,xt),gt.addDomain(ft,wt),gt.addModelVersion(ft,St),gt.addDocString(ft,_t),gt.addGraph(ft,Tt),gt.addGraphDocString(ft,Et),gt.endModel(ft)}}mt.Model=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsKernelCreateInfos(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsKernelCreateInfos(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}nodeIndices(ft){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.readUint32(this.bb.__vector(this.bb_pos+st)+4*ft):0}nodeIndicesLength(){let ft=this.bb.__offset(this.bb_pos,4);return ft?this.bb.__vector_len(this.bb_pos+ft):0}nodeIndicesArray(){let ft=this.bb.__offset(this.bb_pos,4);return ft?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ft),this.bb.__vector_len(this.bb_pos+ft)):null}kernelDefHashes(ft){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.readUint64(this.bb.__vector(this.bb_pos+st)+8*ft):this.bb.createLong(0,0)}kernelDefHashesLength(){let ft=this.bb.__offset(this.bb_pos,6);return ft?this.bb.__vector_len(this.bb_pos+ft):0}static startKernelCreateInfos(ft){ft.startObject(2)}static addNodeIndices(ft,st){ft.addFieldOffset(0,st,0)}static createNodeIndicesVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addInt32(st[bt]);return ft.endVector()}static startNodeIndicesVector(ft,st){ft.startVector(4,st,4)}static addKernelDefHashes(ft,st){ft.addFieldOffset(1,st,0)}static createKernelDefHashesVector(ft,st){ft.startVector(8,st.length,8);for(let bt=st.length-1;bt>=0;bt--)ft.addInt64(st[bt]);return ft.endVector()}static startKernelDefHashesVector(ft,st){ft.startVector(8,st,8)}static endKernelCreateInfos(ft){return ft.endObject()}static createKernelCreateInfos(ft,st,bt){return gt.startKernelCreateInfos(ft),gt.addNodeIndices(ft,st),gt.addKernelDefHashes(ft,bt),gt.endKernelCreateInfos(ft)}}mt.KernelCreateInfos=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsSubGraphSessionState(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsSubGraphSessionState(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}graphId(ft){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__string(this.bb_pos+st,ft):null}sessionState(ft){let st=this.bb.__offset(this.bb_pos,6);return st?(ft||new ot.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}static startSubGraphSessionState(ft){ft.startObject(2)}static addGraphId(ft,st){ft.addFieldOffset(0,st,0)}static addSessionState(ft,st){ft.addFieldOffset(1,st,0)}static endSubGraphSessionState(ft){let st=ft.endObject();return ft.requiredField(st,4),st}static createSubGraphSessionState(ft,st,bt){return gt.startSubGraphSessionState(ft),gt.addGraphId(ft,st),gt.addSessionState(ft,bt),gt.endSubGraphSessionState(ft)}}mt.SubGraphSessionState=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsSessionState(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsSessionState(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}kernels(ft){let st=this.bb.__offset(this.bb_pos,4);return st?(ft||new ot.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}subGraphSessionStates(ft,st){let bt=this.bb.__offset(this.bb_pos,6);return bt?(st||new ot.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+bt)+4*ft),this.bb):null}subGraphSessionStatesLength(){let ft=this.bb.__offset(this.bb_pos,6);return ft?this.bb.__vector_len(this.bb_pos+ft):0}static startSessionState(ft){ft.startObject(2)}static addKernels(ft,st){ft.addFieldOffset(0,st,0)}static addSubGraphSessionStates(ft,st){ft.addFieldOffset(1,st,0)}static createSubGraphSessionStatesVector(ft,st){ft.startVector(4,st.length,4);for(let bt=st.length-1;bt>=0;bt--)ft.addOffset(st[bt]);return ft.endVector()}static startSubGraphSessionStatesVector(ft,st){ft.startVector(4,st,4)}static endSessionState(ft){return ft.endObject()}static createSessionState(ft,st,bt){return gt.startSessionState(ft),gt.addKernels(ft,st),gt.addSubGraphSessionStates(ft,bt),gt.endSessionState(ft)}}mt.SessionState=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(ot){(function(ht){(function(mt){class gt{constructor(){this.bb=null,this.bb_pos=0}__init(ft,st){return this.bb_pos=ft,this.bb=st,this}static getRootAsInferenceSession(ft,st){return(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static getSizePrefixedRootAsInferenceSession(ft,st){return ft.setPosition(ft.position()+b.flatbuffers.SIZE_PREFIX_LENGTH),(st||new gt).__init(ft.readInt32(ft.position())+ft.position(),ft)}static bufferHasIdentifier(ft){return ft.__has_identifier("ORTM")}ortVersion(ft){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__string(this.bb_pos+st,ft):null}model(ft){let st=this.bb.__offset(this.bb_pos,6);return st?(ft||new ot.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}sessionState(ft){let st=this.bb.__offset(this.bb_pos,8);return st?(ft||new ot.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+st),this.bb):null}static startInferenceSession(ft){ft.startObject(3)}static addOrtVersion(ft,st){ft.addFieldOffset(0,st,0)}static addModel(ft,st){ft.addFieldOffset(1,st,0)}static addSessionState(ft,st){ft.addFieldOffset(2,st,0)}static endInferenceSession(ft){return ft.endObject()}static finishInferenceSessionBuffer(ft,st){ft.finish(st,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(ft,st){ft.finish(st,"ORTM",!0)}static createInferenceSession(ft,st,bt,vt){return gt.startInferenceSession(ft),gt.addOrtVersion(ft,st),gt.addModel(ft,bt),gt.addSessionState(ft,vt),gt.endInferenceSession(ft)}}mt.InferenceSession=gt})(ht.fbs||(ht.fbs={}))})(ot.experimental||(ot.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const b=d(1670),tt=d(9162);e.OnnxjsSessionHandler=class{constructor(nt){this.session=nt,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(nt,ot,ht){const mt=new Map;for(const ft in nt)if(Object.hasOwnProperty.call(nt,ft)){const st=nt[ft];mt.set(ft,new tt.Tensor(st.dims,st.type,void 0,void 0,st.data))}const gt=await this.session.run(mt),yt={};return gt.forEach((ft,st)=>{yt[st]=new b.Tensor(ft.type,ft.data,ft.dims)}),yt}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const b=d(7067),tt=d(1296),nt=d(7091),ot=d(1036),ht=d(6231),mt=d(2644);e.Session=class{constructor(gt={}){this._initialized=!1,this.backendHint=gt.backendHint,this.profiler=ht.Profiler.create(gt.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(gt,yt,ft){await this.profiler.event("session","Session.loadModel",async()=>{const st=await(0,nt.resolveBackend)(this.backendHint);if(this.sessionHandler=st.createSessionHandler(this.context),this._model=new mt.Model,typeof gt=="string"){const bt=gt.endsWith(".ort");if(typeof fetch>"u"){const vt=await(0,tt.promisify)(b.readFile)(gt);this.initialize(vt,bt)}else{const vt=await fetch(gt),xt=await vt.arrayBuffer();this.initialize(new Uint8Array(xt),bt)}}else if(ArrayBuffer.isView(gt))this.initialize(gt);else{const bt=new Uint8Array(gt,yt||0,ft||gt.byteLength);this.initialize(bt)}})}initialize(gt,yt){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const ft=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(gt,ft,yt),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new ot.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(gt){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const yt=this.normalizeAndValidateInputs(gt),ft=await this._executionPlan.execute(this.sessionHandler,yt);return this.createOutput(ft)})}normalizeAndValidateInputs(gt){const yt=this._model.graph.getInputNames();if(Array.isArray(gt)){if(gt.length!==yt.length)throw new Error(`incorrect input array length: expected ${yt.length} but got ${gt.length}`)}else{if(gt.size!==yt.length)throw new Error(`incorrect input map size: expected ${yt.length} but got ${gt.size}`);const ft=new Array(gt.size);let st=0;for(let bt=0;bt<yt.length;++bt){const vt=gt.get(yt[bt]);if(!vt)throw new Error(`missing input tensor for: '${name}'`);ft[st++]=vt}gt=ft}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,gt,!1);else{const ft=this._model.graph.getInputIndices(),st=this._model.graph.getValues(),bt=new Array(ft.length);for(let vt=0;vt<ft.length;++vt){const xt=st[ft[vt]];bt[vt]=xt.type.shape.dims,this.context.graphInputTypes.push(xt.type.tensorType),this.context.graphInputDims.push(gt[vt].dims)}this.validateInputTensorDims(bt,gt,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,gt),gt}validateInputTensorTypes(gt,yt){for(let ft=0;ft<yt.length;ft++){const st=gt[ft],bt=yt[ft].type;if(st!==bt)throw new Error(`input tensor[${ft}] check failed: expected type '${st}' but got ${bt}`)}}validateInputTensorDims(gt,yt,ft){for(let st=0;st<yt.length;st++){const bt=gt[st],vt=yt[st].dims;if(!this.compareTensorDims(bt,vt,ft))throw new Error(`input tensor[${st}] check failed: expected shape '[${bt.join(",")}]' but got [${vt.join(",")}]`)}}compareTensorDims(gt,yt,ft){if(gt.length!==yt.length)return!1;for(let st=0;st<gt.length;++st)if(gt[st]!==yt[st]&&(!ft||gt[st]!==0))return!1;return!0}createOutput(gt){const yt=this._model.graph.getOutputNames();if(gt.length!==yt.length)throw new Error("expected number of outputs do not match number of generated outputs");const ft=new Map;for(let st=0;st<yt.length;++st)ft.set(yt[st],gt[st]);return ft}initializeOps(gt){const yt=gt.getNodes();this._ops=new Array(yt.length);for(let ft=0;ft<yt.length;ft++)this._ops[ft]=this.sessionHandler.resolve(yt[ft],this._model.opsets,gt)}}},9162:function(s,e,d){var b=this&&this.__importDefault||function(xt){return xt&&xt.__esModule?xt:{default:xt}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const tt=d(3442),nt=b(d(3720)),ot=d(1446),ht=d(9395),mt=d(2517);var gt=ht.onnxruntime.experimental.fbs;class yt{get data(){if(this.cache===void 0){const wt=this.dataProvider(this.dataId);if(wt.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=wt}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(wt){return this.data[mt.ShapeUtil.indicesToOffset(wt,this.strides)]}set(wt,St){this.data[mt.ShapeUtil.indicesToOffset(wt,this.strides)]=St}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=mt.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(wt,St,_t,Tt,Et,kt=tt.Guid.create()){this.dims=wt,this.type=St,this.dataProvider=_t,this.asyncDataProvider=Tt,this.cache=Et,this.dataId=kt,this.size=mt.ShapeUtil.validateDimsAndCalcSize(wt);const Mt=this.size,Ot=_t===void 0&&Tt===void 0&&Et===void 0;if(Et!==void 0&&Et.length!==Mt)throw new RangeError("Input dims doesn't match data length.");if(St==="string"){if(!(Et===void 0||Array.isArray(Et)&&Et.every(Dt=>typeof Dt=="string")))throw new TypeError("cache should be a string array");Ot&&(this.cache=new Array(Mt))}else{if(Et!==void 0){const Dt=st(St);if(!(Et instanceof Dt))throw new TypeError(`cache should be type ${Dt.name}`)}if(Ot){const Dt=new ArrayBuffer(Mt*function(At){switch(At){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${At}`)}}(St));this.cache=function(At,It){return new(st(It))(At)}(Dt,St)}}}static fromProto(wt){if(!wt)throw new Error("cannot construct Value from an empty tensor");const St=mt.ProtoUtil.tensorDataTypeFromProto(wt.dataType),_t=mt.ProtoUtil.tensorDimsFromProto(wt.dims),Tt=new yt(_t,St);if(St==="string")wt.stringData.forEach((Et,kt)=>{Tt.data[kt]=(0,mt.decodeUtf8String)(Et)});else if(wt.rawData&&typeof wt.rawData.byteLength=="number"&&wt.rawData.byteLength>0){const Et=Tt.data,kt=new DataView(wt.rawData.buffer,wt.rawData.byteOffset,wt.rawData.byteLength),Mt=ft(wt.dataType),Ot=wt.rawData.byteLength/Mt;if(wt.rawData.byteLength%Mt!=0)throw new Error("invalid buffer length");if(Et.length!==Ot)throw new Error("buffer length mismatch");for(let Dt=0;Dt<Ot;Dt++){const At=vt(kt,wt.dataType,Dt*Mt);Et[Dt]=At}}else{let Et;switch(wt.dataType){case ot.onnx.TensorProto.DataType.FLOAT:Et=wt.floatData;break;case ot.onnx.TensorProto.DataType.INT32:case ot.onnx.TensorProto.DataType.INT16:case ot.onnx.TensorProto.DataType.UINT16:case ot.onnx.TensorProto.DataType.INT8:case ot.onnx.TensorProto.DataType.UINT8:case ot.onnx.TensorProto.DataType.BOOL:Et=wt.int32Data;break;case ot.onnx.TensorProto.DataType.INT64:Et=wt.int64Data;break;case ot.onnx.TensorProto.DataType.DOUBLE:Et=wt.doubleData;break;case ot.onnx.TensorProto.DataType.UINT32:case ot.onnx.TensorProto.DataType.UINT64:Et=wt.uint64Data;break;default:throw new Error("unspecific error")}if(Et==null)throw new Error("failed to populate data from a tensorproto value");const kt=Tt.data;if(kt.length!==Et.length)throw new Error("array length mismatch");for(let Mt=0;Mt<Et.length;Mt++){const Ot=Et[Mt];nt.default.isLong(Ot)?kt[Mt]=bt(Ot,wt.dataType):kt[Mt]=Ot}}return Tt}static fromData(wt,St,_t){return new yt(St,_t,void 0,void 0,wt)}static fromOrtTensor(wt){if(!wt)throw new Error("cannot construct Value from an empty tensor");const St=mt.ProtoUtil.tensorDimsFromORTFormat(wt),_t=mt.ProtoUtil.tensorDataTypeFromProto(wt.dataType()),Tt=new yt(St,_t);if(_t==="string")for(let Et=0;Et<wt.stringDataLength();Et++)Tt.data[Et]=wt.stringData(Et);else if(wt.rawDataArray()&&typeof wt.rawDataLength()=="number"&&wt.rawDataLength()>0){const Et=Tt.data,kt=new DataView(wt.rawDataArray().buffer,wt.rawDataArray().byteOffset,wt.rawDataLength()),Mt=ft(wt.dataType()),Ot=wt.rawDataLength()/Mt;if(wt.rawDataLength()%Mt!=0)throw new Error("invalid buffer length");if(Et.length!==Ot)throw new Error("buffer length mismatch");for(let Dt=0;Dt<Ot;Dt++){const At=vt(kt,wt.dataType(),Dt*Mt);Et[Dt]=At}}return Tt}}function ft(xt){switch(xt){case ot.onnx.TensorProto.DataType.UINT8:case ot.onnx.TensorProto.DataType.INT8:case ot.onnx.TensorProto.DataType.BOOL:return 1;case ot.onnx.TensorProto.DataType.UINT16:case ot.onnx.TensorProto.DataType.INT16:return 2;case ot.onnx.TensorProto.DataType.FLOAT:case ot.onnx.TensorProto.DataType.INT32:case ot.onnx.TensorProto.DataType.UINT32:return 4;case ot.onnx.TensorProto.DataType.INT64:case ot.onnx.TensorProto.DataType.DOUBLE:case ot.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ot.onnx.TensorProto.DataType[xt]}`)}}function st(xt){switch(xt){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function bt(xt,wt){if(wt===ot.onnx.TensorProto.DataType.INT64||wt===gt.TensorDataType.INT64){if(xt.greaterThanOrEqual(2147483648)||xt.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(wt!==ot.onnx.TensorProto.DataType.UINT32&&wt!==gt.TensorDataType.UINT32&&wt!==ot.onnx.TensorProto.DataType.UINT64&&wt!==gt.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${ot.onnx.TensorProto.DataType[wt]}`);if(xt.greaterThanOrEqual(4294967296)||xt.lessThan(0))throw new TypeError("uint64 is not supported")}return xt.toNumber()}function vt(xt,wt,St){switch(wt){case ot.onnx.TensorProto.DataType.BOOL:case ot.onnx.TensorProto.DataType.UINT8:return xt.getUint8(St);case ot.onnx.TensorProto.DataType.INT8:return xt.getInt8(St);case ot.onnx.TensorProto.DataType.UINT16:return xt.getUint16(St,!0);case ot.onnx.TensorProto.DataType.INT16:return xt.getInt16(St,!0);case ot.onnx.TensorProto.DataType.FLOAT:return xt.getFloat32(St,!0);case ot.onnx.TensorProto.DataType.INT32:return xt.getInt32(St,!0);case ot.onnx.TensorProto.DataType.UINT32:return xt.getUint32(St,!0);case ot.onnx.TensorProto.DataType.INT64:return bt(nt.default.fromBits(xt.getUint32(St,!0),xt.getUint32(St+4,!0),!1),wt);case ot.onnx.TensorProto.DataType.DOUBLE:return xt.getFloat64(St,!0);case ot.onnx.TensorProto.DataType.UINT64:return bt(nt.default.fromBits(xt.getUint32(St,!0),xt.getUint32(St+4,!0),!0),wt);default:throw new Error(`cannot read from DataView for type ${ot.onnx.TensorProto.DataType[wt]}`)}}e.Tensor=yt},2517:function(s,e,d){var b=this&&this.__importDefault||function(wt){return wt&&wt.__esModule?wt:{default:wt}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const tt=d(5686),nt=b(d(3720)),ot=d(1446),ht=d(9162);e.checkInputsShape=function(wt,...St){if(!wt||wt.length!==St.length)return!1;for(let _t=0;_t<wt.length;_t++)if(!wt[_t].dims||wt[_t].dims.length!==St[_t])return!1;return!0},e.assert=function(wt,St){if(!wt)throw new Error(typeof St=="string"?St:St())},e.ArrayUtil=class{static arraysEqual(wt,St){if(wt.length!==St.length)return!1;for(let _t=0;_t<wt.length;_t++)if(wt[_t]!==St[_t])return!1;return!0}};class mt{static preprocessInputShapes(St,_t){return[St.length===1?[1,St[0]]:St,_t.length===1?[_t[0],1]:_t]}static postprocessOutputShape(St,_t,Tt){_t===1&&St.splice(St.length-2,1),Tt===1&&St.pop()}static calcMatMulShape(St,_t){return St[1]!==_t[0]?void 0:[St[0],_t[1]]}}e.MatMulUtil=mt;class gt{static calcShape(St,_t,Tt=!1){const Et=St.length,kt=_t.length;if(Et===0)return _t;if(kt===0)return St;const Mt=Math.max(St.length,_t.length),Ot=new Array(Mt);if(Tt){if(Et<2||kt<2)return;const Dt=mt.calcMatMulShape([St[Et-2],St[Et-1]],[_t[kt-2],_t[kt-1]]);if(Dt===void 0)return;[Ot[Mt-2],Ot[Mt-1]]=Dt}for(let Dt=Tt?3:1;Dt<=Mt;Dt++){const At=Et-Dt<0?1:St[Et-Dt],It=kt-Dt<0?1:_t[kt-Dt];if(At!==It&&At>1&&It>1)return;Ot[Mt-Dt]=Math.max(At,It)}return Ot}static index(St,_t){const Tt=new Array(_t.length);return gt.fillIndex(St,_t,Tt),Tt}static fillIndex(St,_t,Tt){const Et=St.length-_t.length;for(let kt=0;kt<_t.length;kt++)Tt[kt]=St[Et+kt]%_t[kt]}static calc(St,_t,Tt,Et,kt){const Mt=gt.calcShape(St.dims,_t.dims);if(Mt){if(Et&&!st.areEqual(Mt,St.dims))return;const Ot=st.size(Mt),Dt=Et?St:new ht.Tensor(Mt,kt||St.type);if(Mt.length===0)Dt.set([],Tt(St.get([]),_t.get([])));else{const At=new Array(Mt.length),It=new Array(St.dims.length),jt=new Array(_t.dims.length);let qt,Jt=0,Bt=0,Wt=!1,Lt=!1;St.dims.length===0&&(Jt=St.get([]),Wt=!0),_t.dims.length===0&&(Bt=_t.get([]),Lt=!0);for(let Ut=0;Ut<Ot;Ut++){qt=Ut;for(let tn=Mt.length-1;tn>=0;tn--)At[tn]=qt%Mt[tn],qt=Math.floor(qt/Mt[tn]);Wt||(gt.fillIndex(At,St.dims,It),Jt=St.get(It)),Lt||(gt.fillIndex(At,_t.dims,jt),Bt=_t.get(jt)),Dt.set(At,Tt(Jt,Bt))}}return Dt}}static isValidBroadcast(St,_t){const Tt=St.length,Et=_t.length;if(Tt>Et)return!1;for(let kt=1;kt<=Tt;kt++)if(St[Tt-kt]!==1&&St[Tt-kt]!==_t[Et-kt])return!1;return!0}static getBroadcastDims(St,_t){const Tt=St.length,Et=[];for(let kt=0;kt<Tt;kt++){const Mt=Tt-1-kt,Ot=St[Mt]||1;(_t[_t.length-1-kt]||1)>1&&Ot===1&&Et.unshift(Mt)}return Et}}e.BroadcastUtil=gt,e.arrayCopyHelper=function(wt,St,_t,Tt,Et){if(Tt<0||Tt>=St.length)throw new Error("sourceIndex out of bounds");if(_t<0||_t>=wt.length)throw new Error("targetIndex out of bounds");if(Tt+Et>St.length)throw new Error("source indices to be copied are outside bounds");if(_t+Et>wt.length)throw new Error("target array is too small to hold result");for(let kt=0;kt<Et;kt++)wt[_t+kt]=St[Tt+kt]},e.GemmUtil=class{static getShapeOfGemmResult(wt,St,_t,Tt,Et){if(wt.length!==2||_t.length!==2)throw new Error("shape need to be of size 2");let kt,Mt,Ot;St?(kt=wt[1],Mt=wt[0]):(kt=wt[0],Mt=wt[1]);let Dt=-1;if(Tt?(Ot=_t[0],Dt=1):(Ot=_t[1],Dt=0),_t[Dt]!==Mt)throw new Error("dimension mismatch");if(kt<=0||Ot<=0||Mt<=0)throw new Error("invalid shape specified");if(Et&&!gt.isValidBroadcast(Et,[kt,Ot]))throw new Error("gemm: invalid bias shape for broadcast");return[kt,Ot,Mt]}};class yt{static tensorDataTypeFromProto(St){switch(St){case ot.onnx.TensorProto.DataType.INT8:return"int8";case ot.onnx.TensorProto.DataType.UINT8:return"uint8";case ot.onnx.TensorProto.DataType.BOOL:return"bool";case ot.onnx.TensorProto.DataType.INT16:return"int16";case ot.onnx.TensorProto.DataType.UINT16:return"uint16";case ot.onnx.TensorProto.DataType.INT32:return"int32";case ot.onnx.TensorProto.DataType.UINT32:return"uint32";case ot.onnx.TensorProto.DataType.FLOAT:return"float32";case ot.onnx.TensorProto.DataType.DOUBLE:return"float64";case ot.onnx.TensorProto.DataType.STRING:return"string";case ot.onnx.TensorProto.DataType.INT64:return"int32";case ot.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ot.onnx.TensorProto.DataType[St]}`)}}static tensorDataTypeStringToEnum(St){switch(St){case"int8":return ot.onnx.TensorProto.DataType.INT8;case"uint8":return ot.onnx.TensorProto.DataType.UINT8;case"bool":return ot.onnx.TensorProto.DataType.BOOL;case"int16":return ot.onnx.TensorProto.DataType.INT16;case"uint16":return ot.onnx.TensorProto.DataType.UINT16;case"int32":return ot.onnx.TensorProto.DataType.INT32;case"uint32":return ot.onnx.TensorProto.DataType.UINT32;case"float32":return ot.onnx.TensorProto.DataType.FLOAT;case"float64":return ot.onnx.TensorProto.DataType.DOUBLE;case"string":return ot.onnx.TensorProto.DataType.STRING;case"int64":return ot.onnx.TensorProto.DataType.INT64;case"uint64":return ot.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${St}`)}}static tensorDimsFromProto(St){return St.map(_t=>nt.default.isLong(_t)?_t.toNumber():_t)}static tensorValueTypeFromProto(St){return{tensorType:yt.tensorDataTypeFromProto(St.elemType),shape:{dims:yt.tensorDimsFromProto(St.shape.dim.map(_t=>_t.dimValue))}}}static tensorDimsFromORTFormat(St){const _t=[];for(let Tt=0;Tt<St.dimsLength();Tt++)_t.push(ft.longToNumber(St.dims(Tt)));return _t}static tensorAttributesFromORTFormat(St){const _t=[];for(let Tt=0;Tt<St.attributesLength();Tt++)_t.push(St.attributes(Tt));return _t}}e.ProtoUtil=yt;class ft{static longToNumber(St,_t){return nt.default.isLong(St)?St.toNumber():St instanceof tt.flatbuffers.Long?nt.default.fromValue({low:St.low,high:St.high,unsigned:_t!=null&&_t}).toNumber():St}static isLong(St){return nt.default.isLong(St)||St instanceof tt.flatbuffers.Long}}e.LongUtil=ft;class st{static size(St){return st.getSizeFromDimensionRange(St,0,St.length)}static sizeFromDimension(St,_t){if(_t<0||_t>St.length)throw new Error(`invalid dimension of ${_t} for sizeFromDimension as Tensor has ${St.length} dimensions.`);return st.getSizeFromDimensionRange(St,_t,St.length)}static sizeToDimension(St,_t){if(_t<0||_t>St.length)throw new Error(`invalid dimension of ${_t} for sizeToDimension as Tensor has ${St.length} dimensions.`);return st.getSizeFromDimensionRange(St,0,_t)}static getSizeFromDimensionRange(St,_t,Tt){let Et=1;for(let kt=_t;kt<Tt;kt++){if(St[kt]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");Et*=St[kt]}return Et}static computeStrides(St){const _t=St.length;if(_t===0)return[];if(_t===1)return[1];const Tt=new Array(_t);Tt[_t-1]=1,Tt[_t-2]=St[_t-1];for(let Et=_t-3;Et>=0;--Et)Tt[Et]=Tt[Et+1]*St[Et+1];return Tt}static transpose(St){return St.slice().reverse()}static indicesToOffset(St,_t,Tt){Tt===void 0&&(Tt=St.length);let Et=0;for(let kt=0;kt<Tt;++kt)Et+=_t[kt]*St[kt];return Et}static offsetToIndices(St,_t){const Tt=_t.length;if(Tt===0)return[];if(Tt===1)return[St*_t[0]];const Et=new Array(_t.length);for(let kt=0;kt<Et.length-1;++kt)Et[kt]=Math.floor(St/_t[kt]),St-=Et[kt]*_t[kt];return Et[Et.length-1]=St,Et}static normalizeAxis(St,_t){if(St<-_t&&St>=_t)throw new Error("unsupported axis for this operation.");return St<0?St+_t:St}static normalizeAxes(St,_t){return St.map(Tt=>this.normalizeAxis(Tt,_t))}static incrementIndex(St,_t,Tt){if(_t.length===0||St.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(Tt===void 0)Tt=_t.length;else if(Tt<=0||Tt>_t.length)throw new Error("Incorrect axis to increment on");for(let Et=Tt-1;Et>=0&&(St[Et]++,!(St[Et]<_t[Et]));--Et)St[Et]=0}static calculateReshapedDims(St,_t){if(_t.length===0){if(St.length===0||st.size(St)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const Tt=_t.length,Et=new Array(Tt);let kt=-1,Mt=1;for(let Dt=0;Dt<Tt;Dt++){if(_t[Dt]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(_t[Dt]===-1){if(kt!==-1)throw new Error("at most one dimension in shape hints can be -1");kt=Dt}else{if(_t[Dt]===0){if(Dt>=St.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");Et[Dt]=St[Dt]}else Et[Dt]=_t[Dt];Mt*=Et[Dt]}}const Ot=st.size(St);if(kt!==-1){if(Ot%Mt!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${St}] Output shape: [${_t}]`);Et[kt]=Ot/Mt}else if(Mt!==Ot)throw new Error("reshapedDims and originalDims don't have matching sizes");return Et}static sortBasedOnPerm(St,_t){return _t?_t.map(Tt=>St[Tt]):St.slice().reverse()}static padShape(St,_t){const Tt=St.length;return St.map((Et,kt)=>Et+_t[kt]+_t[kt+Tt])}static areEqual(St,_t){return St.length===_t.length&&St.every((Tt,Et)=>Tt===_t[Et])}static validateDimsAndCalcSize(St){if(St.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let _t=1;for(const Tt of St){if(!Number.isInteger(Tt))throw new TypeError(`Invalid shape: ${Tt} is not an integer`);if(Tt<0||Tt>2147483647)throw new TypeError(`Invalid shape: length ${Tt} is not allowed`);_t*=Tt}return _t}static flattenShape(St,_t){_t<0&&(_t+=St.length);const Tt=St.reduce((kt,Mt)=>kt*Mt,1),Et=St.slice(_t).reduce((kt,Mt)=>kt*Mt,1);return[Tt/Et,Et]}static squeezeShape(St,_t){const Tt=new Array;_t=st.normalizeAxes(_t,St.length);for(let Et=0;Et<St.length;Et++){const kt=_t.indexOf(Et)>=0;if(kt&&St[Et]!==1)throw new Error("squeeze an axis of size different than 1");(_t.length===0&&St[Et]>1||_t.length>0&&!kt)&&Tt.push(St[Et])}return Tt}static unsqueezeShape(St,_t){const Tt=new Array(St.length+_t.length);Tt.fill(0);for(let kt=0;kt<_t.length;kt++){const Mt=st.normalizeAxis(_t[kt],Tt.length);if(Mt>=Tt.length)throw new Error("'axes' has an out of range axis");if(Tt[Mt]!==0)throw new Error("'axes' has a duplicate axis");Tt[Mt]=1}let Et=0;for(let kt=0;kt<Tt.length;kt++)Tt[kt]===0&&(Tt[kt]=St[Et++]);if(Et!==St.length)throw new Error("the unsqueezed dimension could not be established");return Tt}}e.ShapeUtil=st,e.MathUtil=class{static sqr(wt,St,_t,Tt,Et){if(Tt<0||Tt>=St.length)throw new Error("sourceIndex out of bounds");if(_t<0||_t>=wt.length)throw new Error("targetIndex out of bounds");if(Tt+Et>St.length)throw new Error("source indices to be copied are outside bounds");if(_t+Et>wt.length)throw new Error("target array is too small to hold result");for(let kt=0;kt<Et;kt++)wt[_t+kt]+=Math.pow(St[Tt+kt],2)}static axpy(wt,St,_t,Tt,Et,kt){if(Tt<0||Tt>=St.length)throw new Error("sourceIndex out of bounds");if(_t<0||_t>=wt.length)throw new Error("targetIndex out of bounds");if(Tt+Et>St.length)throw new Error("source indices to be copied are outside bounds");if(_t+Et>wt.length)throw new Error("target array is too small to hold result");for(let Mt=0;Mt<Et;Mt++)wt[_t+Mt]+=kt*St[Tt+Mt]}static powx(wt,St,_t,Tt,Et,kt){if(Tt<0||Tt>=St.length)throw new Error("sourceIndex out of bounds");if(_t<0||_t>=wt.length)throw new Error("targetIndex out of bounds");if(Tt+Et>St.length)throw new Error("source indices to be copied are outside bounds");if(_t+Et>wt.length)throw new Error("target array is too small to hold result");for(let Mt=0;Mt<Et;Mt++)wt[_t+Mt]=Math.pow(St[Tt+Mt],kt)}static mul(wt,St,_t,Tt,Et){if(Tt<0||Tt>=St.length)throw new Error("sourceIndex out of bounds");if(_t<0||_t>=wt.length)throw new Error("targetIndex out of bounds");if(Tt+Et>St.length)throw new Error("source indices to be copied are outside bounds");if(_t+Et>wt.length)throw new Error("target array is too small to hold result");for(let kt=0;kt<Et;kt++)wt[_t+kt]=St[Tt+kt]*wt[_t+kt]}};class bt{static splitShape(St,_t,Tt,Et){if(Tt.length===0){if(!Et)throw new Error("need to know number of outputs when the 'split' attribute is not specified");bt.determineSplit(St[_t],Et,Tt)}const kt=[],Mt=[0];for(let Ot=0;Ot<Tt.length;++Ot){Ot!==0&&Mt.push(Mt[Ot-1]+Tt[Ot-1]);const Dt=St.slice();Dt[_t]=Tt[Ot],kt.push(Dt)}return[kt,Mt]}static determineSplit(St,_t,Tt){if(St%_t!=0)throw new Error("cannot split tensor to equal sized parts");for(let Et=0;Et<_t;++Et)Tt.push(St/_t)}}e.SplitUtil=bt;class vt{static calcReduce(St,_t,Tt,Et,kt){const Mt=St.dims.slice(0);_t.length===0&&Mt.forEach((Jt,Bt)=>_t.push(Bt));const Ot=vt.calcReduceShape(Mt,_t,!0),Dt=st.size(Ot),At=new ht.Tensor(Ot,St.type),It=st.computeStrides(Ot),jt=st.computeStrides(Mt),qt=new Array(Mt.length);for(let Jt=0;Jt<Dt;Jt++){const Bt=st.offsetToIndices(Jt,It);gt.fillIndex(Bt,Mt,qt),At.set(Bt,vt.calcReduceByAxis(St.numberData,_t,Mt,0,st.indicesToOffset(qt,jt),Et,kt))}return Tt?At:new ht.Tensor(vt.calcReduceShape(Mt,_t,Tt),At.type,void 0,void 0,At.data,At.dataId)}static calcReduceByAxis(St,_t,Tt,Et,kt,Mt,Ot){let Dt=0;if(Et>=_t.length)return Mt(St[kt]);const At=_t[Et],It=At>=Tt.length?1:st.size(Tt.slice(At+1));for(let jt=0;jt<Tt[At];jt++)Dt=jt===0?vt.calcReduceByAxis(St,_t,Tt,Et+1,kt,Mt,Ot):Ot(Dt,vt.calcReduceByAxis(St,_t,Tt,Et+1,kt,Mt,Ot)),kt+=It;return Dt}static calcReduceShape(St,_t,Tt){const Et=St.slice();for(let kt=0;kt<_t.length;kt++)Et[_t[kt]]=Tt?1:0;return Et.filter(kt=>kt!==0)}}e.ReduceUtil=vt;class xt{static adjustPoolAttributes(St,_t,Tt,Et,kt,Mt){if(!St&&Tt.length!==_t.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(St)for(let Ot=0;Ot<_t.length-2;Ot++)Ot>=Tt.length?Tt.push(_t[Ot+2]):Tt[Ot]=_t[Ot+2];for(let Ot=0;Ot<Tt.length;Ot++)if(Ot<Et.length){if(Et[Ot]<0)throw new Error("strides should be greater than or equal to 1")}else Et.push(1);for(let Ot=0;Ot<Tt.length;Ot++)if(Ot<kt.length){if(kt[Ot]<0)throw new Error("dilations should be greater than or equal to 1")}else kt.push(1);for(let Ot=0;Ot<2*Tt.length;Ot++)if(Ot<Mt.length){if(Mt[Ot]<0)throw new Error("pad should be greater than or equal to 1")}else Mt.push(0);for(let Ot=0;Ot<Tt.length;Ot++){if(Tt[Ot]<=0)throw new Error("kernel shapes need to be greater than 0");if(Mt[Ot]>=Tt[Ot]||Mt[Ot+Tt.length]>=Tt[Ot])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(St,_t,Tt,Et,kt,Mt){if(Mt){if(kt.length!==2*(St.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(_t.length!==St.length-2)throw new Error("length of strides should be the length of data dimensions");if(Et.length!==St.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let Ot=0;Ot<St.length-2;Ot++)xt.adjustPadAndReturnShape(St[Ot+2],_t[Ot],Tt[Ot],Et[Ot],kt,Ot,Ot+St.length-2,Mt)}}static computePoolOutputShape(St,_t,Tt,Et,kt,Mt,Ot){if(_t.length<=0)throw new Error("input shape must be of size greater than 0");const Dt=[_t[0],_t[1]];return xt.computeShapeHelper(St,_t,Dt,Tt,Et,kt,Mt,Ot),Dt}static computeConvOutputShape(St,_t,Tt,Et,kt,Mt,Ot){if(St.length<=0||_t.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Dt=[St[0],_t[0]];return xt.computeShapeHelper(!1,St,Dt,Tt,Et,kt,Mt,Ot),Dt}static computeShapeHelper(St,_t,Tt,Et,kt,Mt,Ot,Dt){if(St)for(let At=0;At<_t.length-2;At++)Tt.push(1);else for(let At=0;At<_t.length-2;At++)Tt.push(xt.adjustPadAndReturnShape(_t[At+2],Et[At],kt[At],Mt[At],Ot,At,At+_t.length-2,Dt))}static adjustPadAndReturnShape(St,_t,Tt,Et,kt,Mt,Ot,Dt){const At=Tt*(Et-1)+1;if(!Dt||Dt==="NOTSET")return Math.floor((St+kt[Mt]+kt[Ot]-At)/_t+1);switch(Dt){case"VALID":return kt[Mt]=0,kt[Ot]=0,Math.floor((St-At)/_t+1);case"SAME_LOWER":case"SAME_UPPER":if(Tt!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const It=((St+_t-1)/_t-1)*_t+Et-St;return kt[Mt]=Math.floor(Dt==="SAME_LOWER"?(It+1)/2:It/2),kt[Ot]=It-kt[Mt],Math.floor((St+It-Et)/_t+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=xt,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(wt){return new TextDecoder().decode(wt)}},7967:(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(d,b,tt,nt)=>{if(typeof d=="object"&&d!==null){if(tt.has(d))throw new Error("Circular reference in options");tt.add(d)}Object.entries(d).forEach(([ot,ht])=>{const mt=b?b+ot:ot;if(typeof ht=="object")(0,e.iterateExtraOptions)(ht,mt+".",tt,nt);else if(typeof ht=="string"||typeof ht=="number")nt(mt,ht.toString());else{if(typeof ht!="boolean")throw new Error("Can't handle extra config type: "+typeof ht);nt(mt,ht?"1":"0")}})}},2157:function(s,e,d){var b,tt=this&&this.__createBinding||(Object.create?function(It,jt,qt,Jt){Jt===void 0&&(Jt=qt);var Bt=Object.getOwnPropertyDescriptor(jt,qt);Bt&&!("get"in Bt?!jt.__esModule:Bt.writable||Bt.configurable)||(Bt={enumerable:!0,get:function(){return jt[qt]}}),Object.defineProperty(It,Jt,Bt)}:function(It,jt,qt,Jt){Jt===void 0&&(Jt=qt),It[Jt]=jt[qt]}),nt=this&&this.__setModuleDefault||(Object.create?function(It,jt){Object.defineProperty(It,"default",{enumerable:!0,value:jt})}:function(It,jt){It.default=jt}),ot=this&&this.__importStar||function(It){if(It&&It.__esModule)return It;var jt={};if(It!=null)for(var qt in It)qt!=="default"&&Object.prototype.hasOwnProperty.call(It,qt)&&tt(jt,It,qt);return nt(jt,It),jt};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const ht=d(1670),mt=ot(d(349)),gt=d(6361),yt=()=>!!ht.env.wasm.proxy&&typeof document<"u";let ft,st,bt,vt=!1,xt=!1,wt=!1;const St=[],_t=[],Tt=[],Et=[],kt=[],Mt=[],Ot=()=>{if(vt||!xt||wt||!ft)throw new Error("worker not ready")},Dt=It=>{switch(It.data.type){case"init-wasm":vt=!1,It.data.err?(wt=!0,st[1](It.data.err)):(xt=!0,st[0]());break;case"init-ort":It.data.err?bt[1](It.data.err):bt[0]();break;case"create_allocate":It.data.err?St.shift()[1](It.data.err):St.shift()[0](It.data.out);break;case"create_finalize":It.data.err?_t.shift()[1](It.data.err):_t.shift()[0](It.data.out);break;case"create":It.data.err?Tt.shift()[1](It.data.err):Tt.shift()[0](It.data.out);break;case"release":It.data.err?Et.shift()[1](It.data.err):Et.shift()[0]();break;case"run":It.data.err?kt.shift()[1](It.data.err):kt.shift()[0](It.data.out);break;case"end-profiling":It.data.err?Mt.shift()[1](It.data.err):Mt.shift()[0]()}},At=typeof document<"u"?(b=document==null?void 0:document.currentScript)===null||b===void 0?void 0:b.src:void 0;e.initWasm=async()=>{if(yt()){if(xt)return;if(vt)throw new Error("multiple calls to 'initWasm()' detected.");if(wt)throw new Error("previous call to 'initWasm()' failed.");return vt=!0,ht.env.wasm.wasmPaths===void 0&&At&&At.indexOf("blob:")!==0&&(ht.env.wasm.wasmPaths=At.substr(0,+At.lastIndexOf("/")+1)),new Promise((It,jt)=>{ft==null||ft.terminate(),ft=d(9710).Z(),ft.onmessage=Dt,st=[It,jt];const qt={type:"init-wasm",in:ht.env.wasm};ft.postMessage(qt)})}return(0,gt.initializeWebAssembly)(ht.env.wasm)},e.initOrt=async(It,jt)=>{if(yt())return Ot(),new Promise((qt,Jt)=>{bt=[qt,Jt];const Bt={type:"init-ort",in:{numThreads:It,loggingLevel:jt}};ft.postMessage(Bt)});mt.initOrt(It,jt)},e.createSessionAllocate=async It=>yt()?(Ot(),new Promise((jt,qt)=>{St.push([jt,qt]);const Jt={type:"create_allocate",in:{model:It}};ft.postMessage(Jt,[It.buffer])})):mt.createSessionAllocate(It),e.createSessionFinalize=async(It,jt)=>yt()?(Ot(),new Promise((qt,Jt)=>{_t.push([qt,Jt]);const Bt={type:"create_finalize",in:{modeldata:It,options:jt}};ft.postMessage(Bt)})):mt.createSessionFinalize(It,jt),e.createSession=async(It,jt)=>yt()?(Ot(),new Promise((qt,Jt)=>{Tt.push([qt,Jt]);const Bt={type:"create",in:{model:It,options:jt}};ft.postMessage(Bt,[It.buffer])})):mt.createSession(It,jt),e.releaseSession=async It=>{if(yt())return Ot(),new Promise((jt,qt)=>{Et.push([jt,qt]);const Jt={type:"release",in:It};ft.postMessage(Jt)});mt.releaseSession(It)},e.run=async(It,jt,qt,Jt,Bt)=>yt()?(Ot(),new Promise((Wt,Lt)=>{kt.push([Wt,Lt]);const Ut={type:"run",in:{sessionId:It,inputIndices:jt,inputs:qt,outputIndices:Jt,options:Bt}};ft.postMessage(Ut,mt.extractTransferableBuffers(qt))})):mt.run(It,jt,qt,Jt,Bt),e.endProfiling=async It=>{if(yt())return Ot(),new Promise((jt,qt)=>{Mt.push([jt,qt]);const Jt={type:"end-profiling",in:It};ft.postMessage(Jt)});mt.endProfiling(It)}},586:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const b=d(7967),tt=d(4983),nt=d(6361);e.setRunOptions=ot=>{const ht=(0,nt.getInstance)();let mt=0;const gt=[],yt=ot||{};try{if((ot==null?void 0:ot.logSeverityLevel)===void 0)yt.logSeverityLevel=2;else if(typeof ot.logSeverityLevel!="number"||!Number.isInteger(ot.logSeverityLevel)||ot.logSeverityLevel<0||ot.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${ot.logSeverityLevel}`);if((ot==null?void 0:ot.logVerbosityLevel)===void 0)yt.logVerbosityLevel=0;else if(typeof ot.logVerbosityLevel!="number"||!Number.isInteger(ot.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${ot.logVerbosityLevel}`);(ot==null?void 0:ot.terminate)===void 0&&(yt.terminate=!1);let ft=0;if((ot==null?void 0:ot.tag)!==void 0&&(ft=(0,tt.allocWasmString)(ot.tag,gt)),mt=ht._OrtCreateRunOptions(yt.logSeverityLevel,yt.logVerbosityLevel,!!yt.terminate,ft),mt===0)throw new Error("Can't create run options");return(ot==null?void 0:ot.extra)!==void 0&&(0,b.iterateExtraOptions)(ot.extra,"",new WeakSet,(st,bt)=>{const vt=(0,tt.allocWasmString)(st,gt),xt=(0,tt.allocWasmString)(bt,gt);if(ht._OrtAddRunConfigEntry(mt,vt,xt)!==0)throw new Error(`Can't set a run config entry: ${st} - ${bt}`)}),[mt,gt]}catch(ft){throw mt!==0&&ht._OrtReleaseRunOptions(mt),gt.forEach(ht._free),ft}}},2306:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const b=d(2806),tt=d(1670),nt=d(2850),ot=d(2157);let ht;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(mt){const gt=await fetch(mt),yt=await gt.arrayBuffer();return(0,ot.createSessionAllocate)(new Uint8Array(yt))}async loadModel(mt,gt){if(ht||(await(0,ot.initOrt)(tt.env.wasm.numThreads,(yt=>{switch(yt){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${yt}`)}})(tt.env.logLevel)),ht=!0),typeof mt=="string")if(typeof fetch>"u"){const yt=await(0,nt.promisify)(b.readFile)(mt);[this.sessionId,this.inputNames,this.outputNames]=await(0,ot.createSession)(yt,gt)}else{const yt=await this.createSessionAllocate(mt);[this.sessionId,this.inputNames,this.outputNames]=await(0,ot.createSessionFinalize)(yt,gt)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,ot.createSession)(mt,gt)}async dispose(){return(0,ot.releaseSession)(this.sessionId)}async run(mt,gt,yt){const ft=[],st=[];Object.entries(mt).forEach(wt=>{const St=wt[0],_t=wt[1],Tt=this.inputNames.indexOf(St);if(Tt===-1)throw new Error(`invalid input '${St}'`);ft.push(_t),st.push(Tt)});const bt=[];Object.entries(gt).forEach(wt=>{const St=wt[0],_t=this.outputNames.indexOf(St);if(_t===-1)throw new Error(`invalid output '${St}'`);bt.push(_t)});const vt=await(0,ot.run)(this.sessionId,st,ft.map(wt=>[wt.type,wt.dims,wt.data]),bt,yt),xt={};for(let wt=0;wt<vt.length;wt++)xt[this.outputNames[bt[wt]]]=new tt.Tensor(vt[wt][0],vt[wt][2],vt[wt][1]);return xt}startProfiling(){}endProfiling(){(0,ot.endProfiling)(this.sessionId)}}},4919:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const b=d(7967),tt=d(4983),nt=d(6361);e.setSessionOptions=ot=>{const ht=(0,nt.getInstance)();let mt=0;const gt=[],yt=ot||{};(ft=>{ft.extra||(ft.extra={}),ft.extra.session||(ft.extra.session={});const st=ft.extra.session;st.use_ort_model_bytes_directly||(st.use_ort_model_bytes_directly="1")})(yt);try{(ot==null?void 0:ot.graphOptimizationLevel)===void 0&&(yt.graphOptimizationLevel="all");const ft=(vt=>{switch(vt){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${vt}`)}})(yt.graphOptimizationLevel);(ot==null?void 0:ot.enableCpuMemArena)===void 0&&(yt.enableCpuMemArena=!0),(ot==null?void 0:ot.enableMemPattern)===void 0&&(yt.enableMemPattern=!0),(ot==null?void 0:ot.executionMode)===void 0&&(yt.executionMode="sequential");const st=(vt=>{switch(vt){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${vt}`)}})(yt.executionMode);let bt=0;if((ot==null?void 0:ot.logId)!==void 0&&(bt=(0,tt.allocWasmString)(ot.logId,gt)),(ot==null?void 0:ot.logSeverityLevel)===void 0)yt.logSeverityLevel=2;else if(typeof ot.logSeverityLevel!="number"||!Number.isInteger(ot.logSeverityLevel)||ot.logSeverityLevel<0||ot.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${ot.logSeverityLevel}`);if((ot==null?void 0:ot.logVerbosityLevel)===void 0)yt.logVerbosityLevel=0;else if(typeof ot.logVerbosityLevel!="number"||!Number.isInteger(ot.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${ot.logVerbosityLevel}`);if((ot==null?void 0:ot.enableProfiling)===void 0&&(yt.enableProfiling=!1),mt=ht._OrtCreateSessionOptions(ft,!!yt.enableCpuMemArena,!!yt.enableMemPattern,st,!!yt.enableProfiling,0,bt,yt.logSeverityLevel,yt.logVerbosityLevel),mt===0)throw new Error("Can't create session options");return ot!=null&&ot.executionProviders&&((vt,xt,wt)=>{for(const St of xt){let _t=typeof St=="string"?St:St.name;switch(_t){case"xnnpack":_t="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${_t}`)}const Tt=(0,tt.allocWasmString)(_t,wt);if((0,nt.getInstance)()._OrtAppendExecutionProvider(vt,Tt)!==0)throw new Error(`Can't append execution provider: ${_t}`)}})(mt,ot.executionProviders,gt),(ot==null?void 0:ot.extra)!==void 0&&(0,b.iterateExtraOptions)(ot.extra,"",new WeakSet,(vt,xt)=>{const wt=(0,tt.allocWasmString)(vt,gt),St=(0,tt.allocWasmString)(xt,gt);if(ht._OrtAddSessionConfigEntry(mt,wt,St)!==0)throw new Error(`Can't set a session config entry: ${vt} - ${xt}`)}),[mt,gt]}catch(ft){throw mt!==0&&ht._OrtReleaseSessionOptions(mt),gt.forEach(ht._free),ft}}},4983:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const b=d(6361);e.allocWasmString=(tt,nt)=>{const ot=(0,b.getInstance)(),ht=ot.lengthBytesUTF8(tt)+1,mt=ot._malloc(ht);return ot.stringToUTF8(tt,mt,ht),nt.push(mt),mt}},349:(s,e,d)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const b=d(586),tt=d(4919),nt=d(4983),ot=d(6361);e.initOrt=(ft,st)=>{const bt=(0,ot.getInstance)()._OrtInit(ft,st);if(bt!==0)throw new Error(`Can't initialize onnxruntime. error code = ${bt}`)};const ht=new Map;e.createSessionAllocate=ft=>{const st=(0,ot.getInstance)(),bt=st._malloc(ft.byteLength);return st.HEAPU8.set(ft,bt),[bt,ft.byteLength]},e.createSessionFinalize=(ft,st)=>{const bt=(0,ot.getInstance)();let vt=0,xt=0,wt=[];try{if([xt,wt]=(0,tt.setSessionOptions)(st),vt=bt._OrtCreateSession(ft[0],ft[1],xt),vt===0)throw new Error("Can't create a session")}finally{bt._free(ft[0]),bt._OrtReleaseSessionOptions(xt),wt.forEach(bt._free)}const St=bt._OrtGetInputCount(vt),_t=bt._OrtGetOutputCount(vt),Tt=[],Et=[],kt=[],Mt=[];for(let Ot=0;Ot<St;Ot++){const Dt=bt._OrtGetInputName(vt,Ot);if(Dt===0)throw new Error("Can't get an input name");Et.push(Dt),Tt.push(bt.UTF8ToString(Dt))}for(let Ot=0;Ot<_t;Ot++){const Dt=bt._OrtGetOutputName(vt,Ot);if(Dt===0)throw new Error("Can't get an output name");Mt.push(Dt),kt.push(bt.UTF8ToString(Dt))}return ht.set(vt,[vt,Et,Mt]),[vt,Tt,kt]},e.createSession=(ft,st)=>{const bt=(0,e.createSessionAllocate)(ft);return(0,e.createSessionFinalize)(bt,st)},e.releaseSession=ft=>{const st=(0,ot.getInstance)(),bt=ht.get(ft);if(!bt)throw new Error("invalid session id");const vt=bt[0],xt=bt[1],wt=bt[2];xt.forEach(st._OrtFree),wt.forEach(st._OrtFree),st._OrtReleaseSession(vt),ht.delete(ft)};const mt=ft=>{switch(ft){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${ft}`)}},gt=ft=>{switch(ft){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${ft}`)}},yt=ft=>{switch(ft){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${ft}`)}};e.run=(ft,st,bt,vt,xt)=>{const wt=(0,ot.getInstance)(),St=ht.get(ft);if(!St)throw new Error("invalid session id");const _t=St[0],Tt=St[1],Et=St[2],kt=st.length,Mt=vt.length;let Ot=0,Dt=[];const At=[],It=[];try{[Ot,Dt]=(0,b.setRunOptions)(xt);for(let Lt=0;Lt<kt;Lt++){const Ut=bt[Lt][0],tn=bt[Lt][1],Kt=bt[Lt][2];let an,ln;if(Array.isArray(Kt)){ln=4*Kt.length,an=wt._malloc(ln),It.push(an);let Zt=an/4;for(let xn=0;xn<Kt.length;xn++){if(typeof Kt[xn]!="string")throw new TypeError(`tensor data at index ${xn} is not a string`);wt.HEAPU32[Zt++]=(0,nt.allocWasmString)(Kt[xn],It)}}else ln=Kt.byteLength,an=wt._malloc(ln),It.push(an),wt.HEAPU8.set(new Uint8Array(Kt.buffer,Kt.byteOffset,ln),an);const hn=wt.stackSave(),kn=wt.stackAlloc(4*tn.length);try{let Zt=kn/4;tn.forEach(En=>wt.HEAP32[Zt++]=En);const xn=wt._OrtCreateTensor(mt(Ut),an,ln,kn,tn.length);if(xn===0)throw new Error("Can't create a tensor");At.push(xn)}finally{wt.stackRestore(hn)}}const jt=wt.stackSave(),qt=wt.stackAlloc(4*kt),Jt=wt.stackAlloc(4*kt),Bt=wt.stackAlloc(4*Mt),Wt=wt.stackAlloc(4*Mt);try{let Lt=qt/4,Ut=Jt/4,tn=Bt/4,Kt=Wt/4;for(let hn=0;hn<kt;hn++)wt.HEAPU32[Lt++]=At[hn],wt.HEAPU32[Ut++]=Tt[st[hn]];for(let hn=0;hn<Mt;hn++)wt.HEAPU32[tn++]=0,wt.HEAPU32[Kt++]=Et[vt[hn]];let an=wt._OrtRun(_t,Jt,qt,kt,Wt,Mt,Bt,Ot);const ln=[];if(an===0)for(let hn=0;hn<Mt;hn++){const kn=wt.HEAPU32[Bt/4+hn],Zt=wt.stackSave(),xn=wt.stackAlloc(16);let En,Cn=0;try{if(an=wt._OrtGetTensorData(kn,xn,xn+4,xn+8,xn+12),an!==0)throw new Error(`Can't access output tensor data. error code = ${an}`);let Fn=xn/4;const Vn=wt.HEAPU32[Fn++];Cn=wt.HEAPU32[Fn++];const qn=wt.HEAPU32[Fn++],cr=wt.HEAPU32[Fn++],Bn=[];for(let tr=0;tr<cr;tr++)Bn.push(wt.HEAPU32[qn/4+tr]);wt._OrtFree(qn);const ir=Bn.length===0?1:Bn.reduce((tr,wr)=>tr*wr);if(En=gt(Vn),En==="string"){const tr=[];let wr=Cn/4;for(let dr=0;dr<ir;dr++){const Sr=wt.HEAPU32[wr++],ar=dr===ir-1?void 0:wt.HEAPU32[wr]-Sr;tr.push(wt.UTF8ToString(Sr,ar))}ln.push([En,Bn,tr])}else{const tr=new(yt(En))(ir);new Uint8Array(tr.buffer,tr.byteOffset,tr.byteLength).set(wt.HEAPU8.subarray(Cn,Cn+tr.byteLength)),ln.push([En,Bn,tr])}}finally{wt.stackRestore(Zt),En==="string"&&Cn&&wt._free(Cn),wt._OrtReleaseTensor(kn)}}if(an===0)return ln;throw new Error(`failed to call OrtRun(). error code = ${an}.`)}finally{wt.stackRestore(jt)}}finally{At.forEach(wt._OrtReleaseTensor),It.forEach(wt._free),wt._OrtReleaseRunOptions(Ot),Dt.forEach(wt._free)}},e.endProfiling=ft=>{const st=(0,ot.getInstance)(),bt=ht.get(ft);if(!bt)throw new Error("invalid session id");const vt=bt[0],xt=st._OrtEndProfiling(vt);if(xt===0)throw new Error("Can't get an profile file name");st._OrtFree(xt)},e.extractTransferableBuffers=ft=>{const st=[];for(const bt of ft){const vt=bt[2];!Array.isArray(vt)&&vt.buffer&&st.push(vt.buffer)}return st}},6361:function(s,e,d){var b=this&&this.__createBinding||(Object.create?function(xt,wt,St,_t){_t===void 0&&(_t=St);var Tt=Object.getOwnPropertyDescriptor(wt,St);Tt&&!("get"in Tt?!wt.__esModule:Tt.writable||Tt.configurable)||(Tt={enumerable:!0,get:function(){return wt[St]}}),Object.defineProperty(xt,_t,Tt)}:function(xt,wt,St,_t){_t===void 0&&(_t=St),xt[_t]=wt[St]}),tt=this&&this.__setModuleDefault||(Object.create?function(xt,wt){Object.defineProperty(xt,"default",{enumerable:!0,value:wt})}:function(xt,wt){xt.default=wt}),nt=this&&this.__importStar||function(xt){if(xt&&xt.__esModule)return xt;var wt={};if(xt!=null)for(var St in xt)St!=="default"&&Object.prototype.hasOwnProperty.call(xt,St)&&b(wt,xt,St);return tt(wt,xt),wt},ot=this&&this.__importDefault||function(xt){return xt&&xt.__esModule?xt:{default:xt}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const ht=nt(d(6449)),mt=ot(d(932)),gt=d(3474);let yt,ft=!1,st=!1,bt=!1;const vt=(xt,wt)=>wt?xt?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":xt?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async xt=>{if(ft)return Promise.resolve();if(st)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(bt)throw new Error("previous call to 'initializeWebAssembly()' failed.");st=!0;const wt=xt.initTimeout,St=xt.numThreads,_t=xt.simd,Tt=St>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),Et=_t&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),kt=typeof xt.wasmPaths=="string"?xt.wasmPaths:void 0,Mt=vt(!1,Tt),Ot=vt(Et,Tt),Dt=typeof xt.wasmPaths=="object"?xt.wasmPaths[Ot]:void 0;let At=!1;const It=[];if(wt>0&&It.push(new Promise(jt=>{setTimeout(()=>{At=!0,jt()},wt)})),It.push(new Promise((jt,qt)=>{const Jt=Tt?gt:mt.default,Bt={locateFile:(Wt,Lt)=>Tt&&Wt.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([d(4154)],{type:"text/javascript"})):Wt===Mt?Dt??(kt??Lt)+Ot:Lt+Wt};if(Tt)if(typeof Blob>"u")Bt.mainScriptUrlOrBlob=ht.join("/","ort-wasm-threaded.js");else{const Wt=`var ortWasmThreaded=(function(){var _scriptDir;return ${Jt.toString()}})();`;Bt.mainScriptUrlOrBlob=new Blob([Wt],{type:"text/javascript"})}Jt(Bt).then(Wt=>{st=!1,ft=!0,yt=Wt,jt()},Wt=>{st=!1,bt=!0,qt(Wt)})})),await Promise.race(It),At)throw new Error(`WebAssembly backend initializing failed due to timeout: ${wt}ms`)},e.getInstance=()=>{if(ft&&yt)return yt;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var xt;!ft||st||bt||(st=!0,(xt=yt.PThread)===null||xt===void 0||xt.terminateAllThreads(),yt=void 0,st=!1,ft=!1,bt=!0)}},9710:(s,e,d)=>{d.d(e,{Z:()=>nt});var b=d(477),tt=d.n(b);function nt(){return tt()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:s=>{s.exports=function(e,d,b,tt){var nt=self||window;try{try{var ot;try{ot=new nt.Blob([e])}catch{(ot=new(nt.BlobBuilder||nt.WebKitBlobBuilder||nt.MozBlobBuilder||nt.MSBlobBuilder)).append(e),ot=ot.getBlob()}var ht=nt.URL||nt.webkitURL,mt=ht.createObjectURL(ot),gt=new nt[d](mt,b);return ht.revokeObjectURL(mt),gt}catch{return new nt[d]("data:application/javascript,".concat(encodeURIComponent(e)),b)}}catch{if(!tt)throw Error("Inline worker is not supported");return new nt[d](tt,b)}}},4154:s=>{s.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:s=>{s.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(s,e,d)=>{d.r(e),d.d(e,{flatbuffers:()=>b});var b={};b.Offset,b.Table,b.SIZEOF_SHORT=2,b.SIZEOF_INT=4,b.FILE_IDENTIFIER_LENGTH=4,b.SIZE_PREFIX_LENGTH=4,b.Encoding={UTF8_BYTES:1,UTF16_STRING:2},b.int32=new Int32Array(2),b.float32=new Float32Array(b.int32.buffer),b.float64=new Float64Array(b.int32.buffer),b.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,b.Long=function(tt,nt){this.low=0|tt,this.high=0|nt},b.Long.create=function(tt,nt){return tt==0&&nt==0?b.Long.ZERO:new b.Long(tt,nt)},b.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},b.Long.prototype.equals=function(tt){return this.low==tt.low&&this.high==tt.high},b.Long.ZERO=new b.Long(0,0),b.Builder=function(tt){if(tt)nt=tt;else var nt=1024;this.bb=b.ByteBuffer.allocate(nt),this.space=nt,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},b.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},b.Builder.prototype.forceDefaults=function(tt){this.force_defaults=tt},b.Builder.prototype.dataBuffer=function(){return this.bb},b.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},b.Builder.prototype.prep=function(tt,nt){tt>this.minalign&&(this.minalign=tt);for(var ot=1+~(this.bb.capacity()-this.space+nt)&tt-1;this.space<ot+tt+nt;){var ht=this.bb.capacity();this.bb=b.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-ht}this.pad(ot)},b.Builder.prototype.pad=function(tt){for(var nt=0;nt<tt;nt++)this.bb.writeInt8(--this.space,0)},b.Builder.prototype.writeInt8=function(tt){this.bb.writeInt8(this.space-=1,tt)},b.Builder.prototype.writeInt16=function(tt){this.bb.writeInt16(this.space-=2,tt)},b.Builder.prototype.writeInt32=function(tt){this.bb.writeInt32(this.space-=4,tt)},b.Builder.prototype.writeInt64=function(tt){this.bb.writeInt64(this.space-=8,tt)},b.Builder.prototype.writeFloat32=function(tt){this.bb.writeFloat32(this.space-=4,tt)},b.Builder.prototype.writeFloat64=function(tt){this.bb.writeFloat64(this.space-=8,tt)},b.Builder.prototype.addInt8=function(tt){this.prep(1,0),this.writeInt8(tt)},b.Builder.prototype.addInt16=function(tt){this.prep(2,0),this.writeInt16(tt)},b.Builder.prototype.addInt32=function(tt){this.prep(4,0),this.writeInt32(tt)},b.Builder.prototype.addInt64=function(tt){this.prep(8,0),this.writeInt64(tt)},b.Builder.prototype.addFloat32=function(tt){this.prep(4,0),this.writeFloat32(tt)},b.Builder.prototype.addFloat64=function(tt){this.prep(8,0),this.writeFloat64(tt)},b.Builder.prototype.addFieldInt8=function(tt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addInt8(nt),this.slot(tt))},b.Builder.prototype.addFieldInt16=function(tt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addInt16(nt),this.slot(tt))},b.Builder.prototype.addFieldInt32=function(tt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addInt32(nt),this.slot(tt))},b.Builder.prototype.addFieldInt64=function(tt,nt,ot){!this.force_defaults&&nt.equals(ot)||(this.addInt64(nt),this.slot(tt))},b.Builder.prototype.addFieldFloat32=function(tt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addFloat32(nt),this.slot(tt))},b.Builder.prototype.addFieldFloat64=function(tt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addFloat64(nt),this.slot(tt))},b.Builder.prototype.addFieldOffset=function(tt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addOffset(nt),this.slot(tt))},b.Builder.prototype.addFieldStruct=function(tt,nt,ot){nt!=ot&&(this.nested(nt),this.slot(tt))},b.Builder.prototype.nested=function(tt){if(tt!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},b.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},b.Builder.prototype.slot=function(tt){this.vtable[tt]=this.offset()},b.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},b.Builder.growByteBuffer=function(tt){var nt=tt.capacity();if(3221225472&nt)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var ot=nt<<1,ht=b.ByteBuffer.allocate(ot);return ht.setPosition(ot-nt),ht.bytes().set(tt.bytes(),ot-nt),ht},b.Builder.prototype.addOffset=function(tt){this.prep(b.SIZEOF_INT,0),this.writeInt32(this.offset()-tt+b.SIZEOF_INT)},b.Builder.prototype.startObject=function(tt){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=tt;for(var nt=0;nt<tt;nt++)this.vtable[nt]=0;this.isNested=!0,this.object_start=this.offset()},b.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var tt=this.offset(),nt=this.vtable_in_use-1;nt>=0&&this.vtable[nt]==0;nt--);for(var ot=nt+1;nt>=0;nt--)this.addInt16(this.vtable[nt]!=0?tt-this.vtable[nt]:0);this.addInt16(tt-this.object_start);var ht=(ot+2)*b.SIZEOF_SHORT;this.addInt16(ht);var mt=0,gt=this.space;e:for(nt=0;nt<this.vtables.length;nt++){var yt=this.bb.capacity()-this.vtables[nt];if(ht==this.bb.readInt16(yt)){for(var ft=b.SIZEOF_SHORT;ft<ht;ft+=b.SIZEOF_SHORT)if(this.bb.readInt16(gt+ft)!=this.bb.readInt16(yt+ft))continue e;mt=this.vtables[nt];break}}return mt?(this.space=this.bb.capacity()-tt,this.bb.writeInt32(this.space,mt-tt)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-tt,this.offset()-tt)),this.isNested=!1,tt},b.Builder.prototype.finish=function(tt,nt,ot){var ht=ot?b.SIZE_PREFIX_LENGTH:0;if(nt){var mt=nt;if(this.prep(this.minalign,b.SIZEOF_INT+b.FILE_IDENTIFIER_LENGTH+ht),mt.length!=b.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+b.FILE_IDENTIFIER_LENGTH);for(var gt=b.FILE_IDENTIFIER_LENGTH-1;gt>=0;gt--)this.writeInt8(mt.charCodeAt(gt))}this.prep(this.minalign,b.SIZEOF_INT+ht),this.addOffset(tt),ht&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},b.Builder.prototype.finishSizePrefixed=function(tt,nt){this.finish(tt,nt,!0)},b.Builder.prototype.requiredField=function(tt,nt){var ot=this.bb.capacity()-tt,ht=ot-this.bb.readInt32(ot);if(this.bb.readInt16(ht+nt)==0)throw new Error("FlatBuffers: field "+nt+" must be set")},b.Builder.prototype.startVector=function(tt,nt,ot){this.notNested(),this.vector_num_elems=nt,this.prep(b.SIZEOF_INT,tt*nt),this.prep(ot,tt*nt)},b.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},b.Builder.prototype.createString=function(tt){if(tt instanceof Uint8Array)var nt=tt;else{nt=[];for(var ot=0;ot<tt.length;){var ht,mt=tt.charCodeAt(ot++);(ht=mt<55296||mt>=56320?mt:(mt<<10)+tt.charCodeAt(ot++)+-56613888)<128?nt.push(ht):(ht<2048?nt.push(ht>>6&31|192):(ht<65536?nt.push(ht>>12&15|224):nt.push(ht>>18&7|240,ht>>12&63|128),nt.push(ht>>6&63|128)),nt.push(63&ht|128))}}this.addInt8(0),this.startVector(1,nt.length,1),this.bb.setPosition(this.space-=nt.length),ot=0;for(var gt=this.space,yt=this.bb.bytes();ot<nt.length;ot++)yt[gt++]=nt[ot];return this.endVector()},b.Builder.prototype.createLong=function(tt,nt){return b.Long.create(tt,nt)},b.ByteBuffer=function(tt){this.bytes_=tt,this.position_=0},b.ByteBuffer.allocate=function(tt){return new b.ByteBuffer(new Uint8Array(tt))},b.ByteBuffer.prototype.clear=function(){this.position_=0},b.ByteBuffer.prototype.bytes=function(){return this.bytes_},b.ByteBuffer.prototype.position=function(){return this.position_},b.ByteBuffer.prototype.setPosition=function(tt){this.position_=tt},b.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},b.ByteBuffer.prototype.readInt8=function(tt){return this.readUint8(tt)<<24>>24},b.ByteBuffer.prototype.readUint8=function(tt){return this.bytes_[tt]},b.ByteBuffer.prototype.readInt16=function(tt){return this.readUint16(tt)<<16>>16},b.ByteBuffer.prototype.readUint16=function(tt){return this.bytes_[tt]|this.bytes_[tt+1]<<8},b.ByteBuffer.prototype.readInt32=function(tt){return this.bytes_[tt]|this.bytes_[tt+1]<<8|this.bytes_[tt+2]<<16|this.bytes_[tt+3]<<24},b.ByteBuffer.prototype.readUint32=function(tt){return this.readInt32(tt)>>>0},b.ByteBuffer.prototype.readInt64=function(tt){return new b.Long(this.readInt32(tt),this.readInt32(tt+4))},b.ByteBuffer.prototype.readUint64=function(tt){return new b.Long(this.readUint32(tt),this.readUint32(tt+4))},b.ByteBuffer.prototype.readFloat32=function(tt){return b.int32[0]=this.readInt32(tt),b.float32[0]},b.ByteBuffer.prototype.readFloat64=function(tt){return b.int32[b.isLittleEndian?0:1]=this.readInt32(tt),b.int32[b.isLittleEndian?1:0]=this.readInt32(tt+4),b.float64[0]},b.ByteBuffer.prototype.writeInt8=function(tt,nt){this.bytes_[tt]=nt},b.ByteBuffer.prototype.writeUint8=function(tt,nt){this.bytes_[tt]=nt},b.ByteBuffer.prototype.writeInt16=function(tt,nt){this.bytes_[tt]=nt,this.bytes_[tt+1]=nt>>8},b.ByteBuffer.prototype.writeUint16=function(tt,nt){this.bytes_[tt]=nt,this.bytes_[tt+1]=nt>>8},b.ByteBuffer.prototype.writeInt32=function(tt,nt){this.bytes_[tt]=nt,this.bytes_[tt+1]=nt>>8,this.bytes_[tt+2]=nt>>16,this.bytes_[tt+3]=nt>>24},b.ByteBuffer.prototype.writeUint32=function(tt,nt){this.bytes_[tt]=nt,this.bytes_[tt+1]=nt>>8,this.bytes_[tt+2]=nt>>16,this.bytes_[tt+3]=nt>>24},b.ByteBuffer.prototype.writeInt64=function(tt,nt){this.writeInt32(tt,nt.low),this.writeInt32(tt+4,nt.high)},b.ByteBuffer.prototype.writeUint64=function(tt,nt){this.writeUint32(tt,nt.low),this.writeUint32(tt+4,nt.high)},b.ByteBuffer.prototype.writeFloat32=function(tt,nt){b.float32[0]=nt,this.writeInt32(tt,b.int32[0])},b.ByteBuffer.prototype.writeFloat64=function(tt,nt){b.float64[0]=nt,this.writeInt32(tt,b.int32[b.isLittleEndian?0:1]),this.writeInt32(tt+4,b.int32[b.isLittleEndian?1:0])},b.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+b.SIZEOF_INT+b.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var tt="",nt=0;nt<b.FILE_IDENTIFIER_LENGTH;nt++)tt+=String.fromCharCode(this.readInt8(this.position_+b.SIZEOF_INT+nt));return tt},b.ByteBuffer.prototype.__offset=function(tt,nt){var ot=tt-this.readInt32(tt);return nt<this.readInt16(ot)?this.readInt16(ot+nt):0},b.ByteBuffer.prototype.__union=function(tt,nt){return tt.bb_pos=nt+this.readInt32(nt),tt.bb=this,tt},b.ByteBuffer.prototype.__string=function(tt,nt){tt+=this.readInt32(tt);var ot=this.readInt32(tt),ht="",mt=0;if(tt+=b.SIZEOF_INT,nt===b.Encoding.UTF8_BYTES)return this.bytes_.subarray(tt,tt+ot);for(;mt<ot;){var gt,yt=this.readUint8(tt+mt++);if(yt<192)gt=yt;else{var ft=this.readUint8(tt+mt++);if(yt<224)gt=(31&yt)<<6|63&ft;else{var st=this.readUint8(tt+mt++);gt=yt<240?(15&yt)<<12|(63&ft)<<6|63&st:(7&yt)<<18|(63&ft)<<12|(63&st)<<6|63&this.readUint8(tt+mt++)}}gt<65536?ht+=String.fromCharCode(gt):(gt-=65536,ht+=String.fromCharCode(55296+(gt>>10),56320+(1023&gt)))}return ht},b.ByteBuffer.prototype.__indirect=function(tt){return tt+this.readInt32(tt)},b.ByteBuffer.prototype.__vector=function(tt){return tt+this.readInt32(tt)+b.SIZEOF_INT},b.ByteBuffer.prototype.__vector_len=function(tt){return this.readInt32(tt+this.readInt32(tt))},b.ByteBuffer.prototype.__has_identifier=function(tt){if(tt.length!=b.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+b.FILE_IDENTIFIER_LENGTH);for(var nt=0;nt<b.FILE_IDENTIFIER_LENGTH;nt++)if(tt.charCodeAt(nt)!=this.readInt8(this.position_+b.SIZEOF_INT+nt))return!1;return!0},b.ByteBuffer.prototype.createLong=function(tt,nt){return b.Long.create(tt,nt)}}},__webpack_module_cache__={};function __webpack_require__(s){var e=__webpack_module_cache__[s];if(e!==void 0)return e.exports;var d=__webpack_module_cache__[s]={exports:{}};return __webpack_modules__[s].call(d.exports,d,d.exports,__webpack_require__),d.exports}__webpack_require__.n=s=>{var e=s&&s.__esModule?()=>s.default:()=>s;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(s,e)=>{for(var d in e)__webpack_require__.o(e,d)&&!__webpack_require__.o(s,d)&&Object.defineProperty(s,d,{enumerable:!0,get:e[d]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e),__webpack_require__.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min$1);var ortWeb_minExports=ortWeb_min$1.exports;const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];var $s;typeof process<"u"&&(($s=process==null?void 0:process.release)==null?void 0:$s.name)==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env!=null&&onnx_env.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={backends:{onnx:onnx_env,tfjs:{}},__dirname,version:VERSION,allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR,useCustomCache:!1,customCache:null};function isEmpty(s){return Object.keys(s).length===0}var define_process_env_default={};class FileResponse{constructor(e){Rn(this,"_CONTENT_TYPE_MAP",{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"});if(this.filePath=e,this.headers=new Headers,this.exists=sharp.existsSync(e),this.exists){this.status=200,this.statusText="OK";let d=sharp.statSync(e);this.headers.set("content-length",d.size.toString()),this.updateContentType();let b=this;this.body=new ReadableStream({start(tt){b.arrayBuffer().then(nt=>{tt.enqueue(new Uint8Array(nt)),tt.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new FileResponse(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const e=await sharp.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(s,e=null,d=null){let b;try{b=new URL(s)}catch{return!1}return!(e&&!e.includes(b.protocol)||d&&!d.includes(b.hostname))}async function getFile(s){var e;if(env$1.useFS&&!isValidUrl(s,["http:","https:","blob:"]))return new FileResponse(s);if(typeof process<"u"&&((e=process==null?void 0:process.release)==null?void 0:e.name)==="node"){const d=!!(define_process_env_default!=null&&define_process_env_default.TESTING_REMOTELY),b=env$1.version,tt=new Headers;if(tt.set("User-Agent",`transformers.js/${b}; is_ci/${d};`),isValidUrl(s,["http:","https:"],["huggingface.co","hf.co"])){const ot=(define_process_env_default==null?void 0:define_process_env_default.HF_TOKEN)??(define_process_env_default==null?void 0:define_process_env_default.HF_ACCESS_TOKEN);ot&&tt.set("Authorization",`Bearer ${ot}`)}return fetch(s,{headers:tt})}else return fetch(s)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(s,e,d){if(!d)return null;const b=ERROR_MAPPING[s]??`Error (${s}) occurred while trying to load file`;throw Error(`${b}: "${e}".`)}class FileCache{constructor(e){this.path=e}async match(e){let d=sharp.join(this.path,e),b=new FileResponse(d);if(b.exists)return b}async put(e,d){const b=Buffer.from(await d.arrayBuffer());let tt=sharp.join(this.path,e);try{await sharp.promises.mkdir(sharp.dirname(tt),{recursive:!0}),await sharp.promises.writeFile(tt,b)}catch(nt){console.warn("An error occurred while writing the file to cache:",nt)}}}async function tryCache(s,...e){for(let d of e)try{let b=await s.match(d);if(b)return b}catch{continue}}async function getModelFile(s,e,d=!0,b={}){dispatchCallback(b.progress_callback,{status:"initiate",name:s,file:e});let tt;if(!tt&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{tt=await caches.open("transformers-cache")}catch(St){console.warn("An error occurred while opening the browser cache:",St)}}if(!tt&&env$1.useFSCache&&(tt=new FileCache(b.cache_dir??env$1.cacheDir)),!tt&&env$1.useCustomCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");const nt=b.revision??"main";let ot=pathJoin(s,e),ht=pathJoin(env$1.localModelPath,ot),mt=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",s).replaceAll("{revision}",encodeURIComponent(nt)),e),gt=nt==="main"?ot:pathJoin(s,nt,e),yt,ft=tt instanceof FileCache?gt:mt,st=!1,bt;tt&&(bt=await tryCache(tt,ht,ft));const vt=bt!==void 0;if(bt===void 0){if(isValidUrl(ot,["http:","https:"])){if(b.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${ot}.`)}else try{bt=await getFile(ht),yt=ht}catch(_t){console.warn(`Unable to load from local path "${ht}": "${_t}"`)}if(bt===void 0||bt.status===404){if(b.local_files_only||!env$1.allowRemoteModels){if(d)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${ht}".`);return null}if(bt=await getFile(mt),bt.status!==200)return handleError(bt.status,mt,d);yt=ft}st=tt&&typeof Response<"u"&&bt instanceof Response&&bt.status===200}dispatchCallback(b.progress_callback,{status:"download",name:s,file:e});const xt={status:"progress",name:s,file:e};let wt;return b.progress_callback?vt&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(wt=new Uint8Array(await bt.arrayBuffer()),dispatchCallback(b.progress_callback,{...xt,progress:100,loaded:wt.length,total:wt.length})):wt=await readResponse(bt,St=>{dispatchCallback(b.progress_callback,{...xt,...St})}):wt=new Uint8Array(await bt.arrayBuffer()),st&&yt&&await tt.match(yt)===void 0&&await tt.put(yt,new Response(wt,{headers:bt.headers})).catch(St=>{console.warn(`Unable to add response to browser cache: ${St}.`)}),dispatchCallback(b.progress_callback,{status:"done",name:s,file:e}),wt}async function getModelJSON(s,e,d=!0,b={}){let tt=await getModelFile(s,e,d,b);if(tt===null)return{};let ot=new TextDecoder("utf-8").decode(tt);return JSON.parse(ot)}async function readResponse(s,e){const d=s.headers.get("Content-Length");d===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let b=parseInt(d??"0"),tt=new Uint8Array(b),nt=0;const ot=s.body.getReader();async function ht(){const{done:mt,value:gt}=await ot.read();if(mt)return;let yt=nt+gt.length;if(yt>b){b=yt;let st=new Uint8Array(b);st.set(tt),tt=st}tt.set(gt,nt),nt=yt;const ft=nt/b*100;return e({progress:ft,loaded:nt,total:b}),ht()}return await ht(),tt}function pathJoin(...s){return s=s.map((e,d)=>(d&&(e=e.replace(new RegExp("^/"),"")),d!==s.length-1&&(e=e.replace(new RegExp("/$"),"")),e)),s.join("/")}function permute_data(s,e,d){const b=new Array(d.length),tt=new Array(d.length);for(let ht=d.length-1,mt=1;ht>=0;--ht)tt[ht]=mt,b[ht]=e[d[ht]],mt*=b[ht];const nt=d.map((ht,mt)=>tt[d.indexOf(mt)]),ot=new s.constructor(s.length);for(let ht=0;ht<s.length;++ht){let mt=0;for(let gt=e.length-1,yt=ht;gt>=0;--gt)mt+=yt%e[gt]*nt[gt],yt=Math.floor(yt/e[gt]);ot[mt]=s[ht]}return[ot,b]}function softmax(s){const e=max(s)[0],d=s.map(nt=>Math.exp(nt-e)),b=d.reduce((nt,ot)=>nt+ot,0);return d.map(nt=>nt/b)}function log_softmax(s){return softmax(s).map(b=>Math.log(b))}function getTopItems(s,e=0){return s=Array.from(s).map((d,b)=>[b,d]).sort((d,b)=>b[1]-d[1]),e!==null&&e>0&&(s=s.slice(0,e)),s}function max(s){if(s.length===0)throw Error("Array must not be empty");let e=s[0],d=0;for(let b=1;b<s.length;++b)s[b]>e&&(e=s[b],d=b);return[Number(e),d]}function medianFilter(s,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const d=new s.constructor(s.length),b=new s.constructor(e),tt=Math.floor(e/2);for(let nt=0;nt<s.length;++nt){let ot=0;for(let ht=-tt;ht<=tt;++ht){let mt=nt+ht;mt<0?mt=Math.abs(mt):mt>=s.length&&(mt=2*(s.length-1)-mt),b[ot++]=s[mt]}b.sort(),d[nt]=b[tt]}return d}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{constructor(...e){Rn(this,"dims");Rn(this,"type");Rn(this,"data");Rn(this,"size");return e[0]instanceof ONNXTensor$1?Object.assign(this,e[0]):Object.assign(this,new ONNXTensor$1(e[0],e[1],e[2])),new Proxy(this,{get:(d,b)=>{if(typeof b=="string"){let tt=Number(b);if(Number.isInteger(tt))return d._getitem(tt)}return d[b]},set:(d,b,tt)=>d[b]=tt})}*[Symbol.iterator](){const[e,...d]=this.dims;if(d.length>0){const b=d.reduce((tt,nt)=>tt*nt);for(let tt=0;tt<e;++tt)yield this._subarray(tt,b,d)}else yield*this.data}_getitem(e){const[d,...b]=this.dims;if(e=safeIndex(e,d),b.length>0){const tt=b.reduce((nt,ot)=>nt*ot);return this._subarray(e,tt,b)}else return new Tensor(this.type,[this.data[e]],b)}indexOf(e){for(let d=0;d<this.data.length;++d)if(this.data[d]==e)return d;return-1}_subarray(e,d,b){const tt=e*d,nt=(e+1)*d,ot="subarray"in this.data?this.data.subarray(tt,nt):this.data.slice(tt,nt);return new Tensor(this.type,ot,b)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let d=0;d<this.data.length;++d)this.data[d]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let d=0;d<this.data.length;++d)this.data[d]+=e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...e){let d=[],b=[];for(let mt=0;mt<this.dims.length;++mt){let gt=e[mt];if(gt==null)b.push([0,this.dims[mt]]),d.push(this.dims[mt]);else if(typeof gt=="number")gt=safeIndex(gt,this.dims[mt],mt),b.push([gt,gt+1]);else if(Array.isArray(gt)&&gt.length===2){if(gt[0]>gt[1])throw new Error(`Invalid slice: ${gt}`);let yt=[Math.max(gt[0],0),Math.min(gt[1],this.dims[mt])];b.push(yt),d.push(yt[1]-yt[0])}else throw new Error(`Invalid slice: ${gt}`)}let tt=b.map(([mt,gt])=>gt-mt),nt=tt.reduce((mt,gt)=>mt*gt),ot=new this.data.constructor(nt);const ht=this.stride();for(let mt=0;mt<nt;++mt){let gt=0;for(let yt=tt.length-1,ft=mt;yt>=0;--yt){const st=tt[yt];gt+=(ft%st+b[yt][0])*ht[yt],ft=Math.floor(ft/st)}ot[mt]=this.data[gt]}return new Tensor(this.type,ot,d)}permute(...e){return permute(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,d=!1){return this.norm(1,e,d)}norm(e="fro",d=null,b=!1){if(e==="fro")e=2;else if(typeof e=="string")throw Error(`Unsupported norm: ${e}`);if(d===null){let ot=this.data.reduce((ht,mt)=>ht+mt**e,0)**(1/e);return new Tensor(this.type,[ot],[])}d=safeIndex(d,this.dims.length);const tt=this.dims.slice();tt[d]=1;const nt=new this.data.constructor(this.data.length/this.dims[d]);for(let ot=0;ot<this.data.length;++ot){let ht=0;for(let mt=this.dims.length-1,gt=ot,yt=1;mt>=0;--mt){const ft=this.dims[mt];if(mt!==d){const st=gt%ft;ht+=st*yt,yt*=tt[mt]}gt=Math.floor(gt/ft)}nt[ht]+=this.data[ot]**e}if(e!==1)for(let ot=0;ot<nt.length;++ot)nt[ot]=nt[ot]**(1/e);return b||tt.splice(d,1),new Tensor(this.type,nt,tt)}normalize_(e=2,d=1){d=safeIndex(d,this.dims.length);const b=this.norm(e,d,!0);for(let tt=0;tt<this.data.length;++tt){let nt=0;for(let ot=this.dims.length-1,ht=tt,mt=1;ot>=0;--ot){const gt=this.dims[ot];if(ot!==d){const yt=ht%gt;nt+=yt*mt,mt*=this.dims[ot]}ht=Math.floor(ht/gt)}this.data[tt]/=b.data[nt]}return this}normalize(e=2,d=1){return this.clone().normalize_(e,d)}stride(){return dimsToStride(this.dims)}squeeze(e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,e))}squeeze_(e=null){return this.dims=calc_squeeze_dims(this.dims,e),this}unsqueeze(e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,e))}unsqueeze_(e=null){return this.dims=calc_unsqueeze_dims(this.dims,e),this}flatten_(e=0,d=-1){d=(d+this.dims.length)%this.dims.length;let b=this.dims.slice(0,e),tt=this.dims.slice(e,d+1),nt=this.dims.slice(d+1);return this.dims=[...b,tt.reduce((ot,ht)=>ot*ht,1),...nt],this}flatten(e=0,d=-1){return this.clone().flatten_(e,d)}view(...e){let d=-1;for(let b=0;b<e.length;++b)if(e[b]===-1){if(d!==-1)throw new Error("Only one dimension can be inferred");d=b}if(d!==-1){const b=e.reduce((tt,nt,ot)=>ot!==d?tt*nt:tt,1);e[d]=this.data.length/b}return new Tensor(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,d){for(let b=0;b<this.data.length;++b)this.data[b]=Math.min(Math.max(this.data[b],e),d);return this}clamp(e,d){return this.clone().clamp_(e,d)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!DataTypeMap.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new Tensor(e,DataTypeMap[e].from(this.data),this.dims)}}function reshape(s,e){const d=s.length,b=e.reduce((nt,ot)=>nt*ot);if(d!==b)throw Error(`cannot reshape array of size ${d} into shape (${e})`);let tt=s;for(let nt=e.length-1;nt>=0;nt--)tt=tt.reduce((ot,ht)=>{let mt=ot[ot.length-1];return mt.length<e[nt]?mt.push(ht):ot.push([ht]),ot},[[]]);return tt[0]}function permute(s,e){const[d,b]=permute_data(s.data,s.dims,e);return new Tensor(s.type,d,b)}function calc_squeeze_dims(s,e){return s=s.slice(),e===null?s=s.filter(d=>d!==1):typeof e=="number"?s[e]===1&&s.splice(e,1):Array.isArray(e)&&(s=s.filter((d,b)=>d!==1||!e.includes(b))),s}function calc_unsqueeze_dims(s,e){return e=safeIndex(e,s.length+1),s=s.slice(),s.splice(e,0,1),s}function safeIndex(s,e,d=null){if(s<-e||s>=e)throw new Error(`IndexError: index ${s} is out of bounds for dimension${d===null?"":" "+d} with size ${e}`);return s<0&&(s=(s%e+e)%e),s}function cat(s,e=0){e=safeIndex(e,s[0].dims.length);const d=s[0].dims.slice();d[e]=s.reduce((ot,ht)=>ot+ht.dims[e],0);const b=d.reduce((ot,ht)=>ot*ht,1),tt=new s[0].data.constructor(b),nt=s[0].type;if(e===0){let ot=0;for(let ht of s)tt.set(ht.data,ot),ot+=ht.data.length}else{let ot=0;for(let ht=0;ht<s.length;++ht){let mt=s[ht];for(let gt=0;gt<mt.data.length;++gt){let yt=0;for(let ft=mt.dims.length-1,st=gt,bt=1;ft>=0;--ft){const vt=mt.dims[ft];let xt=st%vt;ft===e&&(xt+=ot),yt+=xt*bt,bt*=d[ft],st=Math.floor(st/vt)}tt[yt]=mt.data[gt]}ot+=mt.dims[e]}}return new Tensor(nt,tt,d)}function stack(s,e=0){return cat(s.map(d=>d.unsqueeze(e)),e)}function std_mean(s,e=null,d=1,b=!1){if(e===null){const gt=s.data.reduce((bt,vt)=>bt+vt,0)/s.data.length,yt=Math.sqrt(s.data.reduce((bt,vt)=>bt+(vt-gt)**2,0)/(s.data.length-d)),ft=new Tensor(s.type,[gt],[]);return[new Tensor(s.type,[yt],[]),ft]}e=safeIndex(e,s.dims.length);const tt=mean(s,e,b),nt=s.dims.slice();nt[e]=1;const ot=new s.data.constructor(s.data.length/s.dims[e]);for(let mt=0;mt<s.data.length;++mt){let gt=0;for(let yt=s.dims.length-1,ft=mt,st=1;yt>=0;--yt){const bt=s.dims[yt];if(yt!==e){const vt=ft%bt;gt+=vt*st,st*=nt[yt]}ft=Math.floor(ft/bt)}ot[gt]+=(s.data[mt]-tt.data[gt])**2}for(let mt=0;mt<ot.length;++mt)ot[mt]=Math.sqrt(ot[mt]/(s.dims[e]-d));return b||nt.splice(e,1),[new Tensor(s.type,ot,nt),tt]}function mean(s,e=null,d=!1){if(e===null){let nt=s.data.reduce((ot,ht)=>ot+ht,0);return new Tensor(s.type,[nt/s.data.length],[])}e=safeIndex(e,s.dims.length);const b=s.dims.slice();b[e]=1;const tt=new s.data.constructor(s.data.length/s.dims[e]);for(let nt=0;nt<s.data.length;++nt){let ot=0;for(let ht=s.dims.length-1,mt=nt,gt=1;ht>=0;--ht){const yt=s.dims[ht];if(ht!==e){const ft=mt%yt;ot+=ft*gt,gt*=b[ht]}mt=Math.floor(mt/yt)}tt[ot]+=s.data[nt]}if(s.dims[e]!==1)for(let nt=0;nt<tt.length;++nt)tt[nt]=tt[nt]/s.dims[e];return d||b.splice(e,1),new Tensor(s.type,tt,b)}function dynamicTimeWarping(s){const[e,d]=s.dims,b=[e+1,d+1],tt=new Tensor("float32",new Float32Array(b[0]*b[1]).fill(1/0),b),nt=new Tensor("float32",new Float32Array(b[0]*b[1]).fill(-1),b);tt[0].data[0]=0;for(let yt=1;yt<d+1;++yt)for(let ft=1;ft<e+1;++ft){const st=tt[ft-1][yt-1].item(),bt=tt[ft-1][yt].item(),vt=tt[ft][yt-1].item();let xt,wt;st<bt&&st<vt?(xt=st,wt=0):bt<st&&bt<vt?(xt=bt,wt=1):(xt=vt,wt=2),tt[ft].data[yt]=s[ft-1][yt-1].item()+xt,nt[ft].data[yt]=wt}let ot=e,ht=d;nt.data.fill(2,0,b[1]);for(let yt=0;yt<b[0];++yt)nt[yt].data[0]=1;let mt=[],gt=[];for(;ot>0||ht>0;)switch(mt.push(ot-1),gt.push(ht-1),nt[ot][ht].item()){case 0:--ot,--ht;break;case 1:--ot;break;case 2:--ht;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${ot}, ${ht}]. Please file a bug report.`)}return mt.reverse(),gt.reverse(),[mt,gt]}function dimsToStride(s){const e=new Array(s.length);for(let d=s.length-1,b=1;d>=0;--d)e[d]=b,b*=s[d];return e}function ones(s){const e=s.reduce((d,b)=>d*b,1);return new Tensor("int64",new BigInt64Array(e).fill(1n),s)}function ones_like(s){return ones(s.dims)}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"});Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral});TOKEN_TYPES.OpenStatement,TOKEN_TYPES.CloseStatement,TOKEN_TYPES.OpenExpression,TOKEN_TYPES.CloseExpression,TOKEN_TYPES.OpenParen,TOKEN_TYPES.CloseParen,TOKEN_TYPES.OpenCurlyBracket,TOKEN_TYPES.CloseCurlyBracket,TOKEN_TYPES.OpenSquareBracket,TOKEN_TYPES.CloseSquareBracket,TOKEN_TYPES.Comma,TOKEN_TYPES.Dot,TOKEN_TYPES.Colon,TOKEN_TYPES.Pipe,TOKEN_TYPES.ComparisonBinaryOperator,TOKEN_TYPES.ComparisonBinaryOperator,TOKEN_TYPES.ComparisonBinaryOperator,TOKEN_TYPES.ComparisonBinaryOperator,TOKEN_TYPES.ComparisonBinaryOperator,TOKEN_TYPES.ComparisonBinaryOperator,TOKEN_TYPES.AdditiveBinaryOperator,TOKEN_TYPES.AdditiveBinaryOperator,TOKEN_TYPES.MultiplicativeBinaryOperator,TOKEN_TYPES.MultiplicativeBinaryOperator,TOKEN_TYPES.MultiplicativeBinaryOperator,TOKEN_TYPES.Equals;const BYTES_TO_UNICODE=(()=>{const s=[...Array.from({length:94},(tt,nt)=>nt+33),...Array.from({length:12},(tt,nt)=>nt+161),...Array.from({length:82},(tt,nt)=>nt+174)],e=s.slice();let d=0;for(let tt=0;tt<256;++tt)s.includes(tt)||(s.push(tt),e.push(256+d),d+=1);const b=e.map(tt=>String.fromCharCode(tt));return Object.fromEntries(s.map((tt,nt)=>[tt,b[nt]]))})();reverseDictionary(BYTES_TO_UNICODE);const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]];new Map(WHISPER_LANGUAGES);async function loadConfig(s,e){return await getModelJSON(s,"config.json",!0,e)}class PretrainedConfig{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:d=null,config:b=null,cache_dir:tt=null,local_files_only:nt=!1,revision:ot="main"}={}){let ht=b??await loadConfig(e,{progress_callback:d,config:b,cache_dir:tt,local_files_only:nt,revision:ot});return new this(ht)}}class AutoConfig{static async from_pretrained(...e){return PretrainedConfig.from_pretrained(...e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,d){for(let b of d)this.processors.forEach(tt=>tt(e,b))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(e,d){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,d){let b=this.force_token_map[e.length];return exists(b)&&(d.data.fill(-1/0),d.data[b]=0),d}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.bos_token_id=e}_call(e,d){return e.length===1&&(d.data.fill(-1/0),d.data[this.bos_token_id]=0),d}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(e,d){super(),this.max_length=e,this.forced_eos_token_id=d}_call(e,d){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(e,d){super(),this.begin_suppress_tokens=e,this.begin_index=d}_call(e,d){if(e.length===this.begin_index)for(let b of this.begin_suppress_tokens)d.data[b]=-1/0;return d}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,d){const b=d.data;if(b[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return b.fill(-1/0),b[this.timestamp_begin]=0,d;const tt=e.slice(this.begin_index),nt=tt.length>=1&&tt[tt.length-1]>=this.timestamp_begin,ot=tt.length<2||tt[tt.length-2]>=this.timestamp_begin;if(nt&&(ot?b.subarray(this.timestamp_begin).fill(-1/0):b.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const yt=this.timestamp_begin+this.max_initial_timestamp_index;b.subarray(yt+1).fill(-1/0)}const ht=log_softmax(b),mt=Math.log(ht.subarray(this.timestamp_begin).map(Math.exp).reduce((yt,ft)=>yt+ft)),gt=max(ht.subarray(0,this.timestamp_begin))[0];return mt>gt&&b.subarray(0,this.timestamp_begin).fill(-1/0),d}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const d=e.length,b=[];for(let nt=0;nt<d+1-this.no_repeat_ngram_size;++nt){const ot=[];for(let ht=0;ht<this.no_repeat_ngram_size;++ht)ot.push(e[nt+ht]);b.push(ot)}const tt=new Map;for(const nt of b){const ot=nt.slice(0,nt.length-1),ht=JSON.stringify(ot),mt=tt.get(ht)??[];mt.push(nt[nt.length-1]),tt.set(ht,mt)}return tt}getGeneratedNgrams(e,d){const b=d.slice(d.length+1-this.no_repeat_ngram_size,d.length);return e.get(JSON.stringify(b))??[]}calcBannedNgramTokens(e){const d=[];if(e.length+1<this.no_repeat_ngram_size)return d;{const b=this.getNgrams(e);return this.getGeneratedNgrams(b,e)}}_call(e,d){const b=this.calcBannedNgramTokens(e);for(const tt of b)d.data[tt]=-1/0;return d}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.penalty=e}_call(e,d){for(const b of e)d.data[b]<0?d.data[b]*=this.penalty:d.data[b]/=this.penalty;return d}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(e,d){super(),this.min_length=e,this.eos_token_id=Array.isArray(d)?d:[d]}_call(e,d){if(e.length<this.min_length)for(const b of this.eos_token_id)d.data[b]=-1/0;return d}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(e,d,b){super(),this.prompt_length_to_skip=e,this.min_new_tokens=d,this.eos_token_id=Array.isArray(b)?b:[b]}_call(e,d){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const tt of this.eos_token_id)d.data[tt]=-1/0;return d}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(e,d){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(d)?d:[d]}_call(e,d){for(const b of this.bad_words_ids){let tt=!0;for(let nt=1;nt<=b.length-1&&b.length<e.length;++nt)if(b.at(-nt-1)!==e.at(-nt)){tt=!1;break}tt&&(d.data[b.at(-1)]=-1/0)}return d}}const GenerationConfig=class{constructor(s={}){this.max_length=s.max_length??20,this.max_new_tokens=s.max_new_tokens??null,this.min_length=s.min_length??0,this.min_new_tokens=s.min_new_tokens??null,this.early_stopping=s.early_stopping??!1,this.max_time=s.max_time??null,this.do_sample=s.do_sample??!1,this.num_beams=s.num_beams??1,this.num_beam_groups=s.num_beam_groups??1,this.penalty_alpha=s.penalty_alpha??null,this.use_cache=s.use_cache??!0,this.temperature=s.temperature??1,this.top_k=s.top_k??50,this.top_p=s.top_p??1,this.typical_p=s.typical_p??1,this.epsilon_cutoff=s.epsilon_cutoff??0,this.eta_cutoff=s.eta_cutoff??0,this.diversity_penalty=s.diversity_penalty??0,this.repetition_penalty=s.repetition_penalty??1,this.encoder_repetition_penalty=s.encoder_repetition_penalty??1,this.length_penalty=s.length_penalty??1,this.no_repeat_ngram_size=s.no_repeat_ngram_size??0,this.bad_words_ids=s.bad_words_ids??null,this.force_words_ids=s.force_words_ids??null,this.renormalize_logits=s.renormalize_logits??!1,this.constraints=s.constraints??null,this.forced_bos_token_id=s.forced_bos_token_id??null,this.forced_eos_token_id=s.forced_eos_token_id??null,this.remove_invalid_values=s.remove_invalid_values??!1,this.exponential_decay_length_penalty=s.exponential_decay_length_penalty??null,this.suppress_tokens=s.suppress_tokens??null,this.begin_suppress_tokens=s.begin_suppress_tokens??null,this.forced_decoder_ids=s.forced_decoder_ids??null,this.num_return_sequences=s.num_return_sequences??1,this.output_attentions=s.output_attentions??!1,this.output_hidden_states=s.output_hidden_states??!1,this.output_scores=s.output_scores??!1,this.return_dict_in_generate=s.return_dict_in_generate??!1,this.pad_token_id=s.pad_token_id??null,this.bos_token_id=s.bos_token_id??null,this.eos_token_id=s.eos_token_id??null,this.encoder_no_repeat_ngram_size=s.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=s.decoder_start_token_id??null,this.generation_kwargs=s.generation_kwargs??{}}};class Sampler extends Callable{constructor(e){super(),this.generation_config=e}_call(e,d=-1){return this.sample(e,d)}sample(e,d){throw Error("sample should be implemented in subclasses.")}getLogits(e,d){let b=e.dims.at(-1),tt=e.data;if(d===-1)tt=tt.slice(-b);else{let nt=d*b;tt=tt.slice(nt,nt+b)}return this.generation_config.temperature>0&&(tt=tt.map(nt=>nt/this.generation_config.temperature)),tt}randomSelect(e){let d=e.reduce((tt,nt)=>tt+nt,0),b=Math.random()*d;for(let tt=0;tt<e.length;++tt)if(b-=e[tt],b<=0)return tt;return 0}static getSampler(e){if(e.do_sample)return new MultinomialSampler(e);if(e.num_beams>1)return new BeamSearchSampler(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new GreedySampler(e)}}class GreedySampler extends Sampler{sample(e,d=-1){let b=this.getLogits(e,d);return[[max(b)[1],0]]}}class MultinomialSampler extends Sampler{sample(e,d=-1){let b=e.dims.at(-1);this.generation_config.top_k>0&&(b=Math.min(this.generation_config.top_k,b));const tt=this.getLogits(e,d),nt=getTopItems(tt,b),ot=softmax(nt.map(ht=>ht[1]));return Array.from({length:this.generation_config.num_beams},()=>{const ht=this.randomSelect(ot);return[nt[ht][0],Math.log(ot[ht])]})}}class BeamSearchSampler extends Sampler{sample(e,d=-1){let b=e.dims.at(-1);this.generation_config.top_k>0&&(b=Math.min(this.generation_config.top_k,b));const tt=this.getLogits(e,d),nt=getTopItems(tt,b),ot=softmax(nt.map(ht=>ht[1]));return Array.from({length:this.generation_config.num_beams},(ht,mt)=>[nt[mt][0],Math.log(ot[mt])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(s,e,d){let b=`onnx/${e}${d.quantized?"_quantized":""}.onnx`,tt=await getModelFile(s,b,!0,d);try{return await InferenceSession.create(tt,{executionProviders})}catch(nt){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw nt;return console.warn(nt),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(tt,{executionProviders:["wasm"]})}}function validateInputs(s,e){const d=Object.create(null),b=[];for(const ot of s.inputNames){const ht=e[ot];if(!(ht instanceof Tensor)){b.push(ot);continue}d[ot]=env.wasm.proxy?ht.clone():ht}if(b.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${b.join(", ")}.`);const tt=Object.keys(e).length,nt=s.inputNames.length;if(tt>nt){let ot=Object.keys(e).filter(ht=>!s.inputNames.includes(ht));console.warn(`WARNING: Too many inputs were provided (${tt} > ${nt}). The following inputs will be ignored: "${ot.join(", ")}".`)}return d}async function sessionRun(s,e){const d=validateInputs(s,e);try{let b=await s.run(d);return b=replaceTensors(b),b}catch(b){throw console.error(`An error occurred during model execution: "${b}".`),console.error("Inputs given to model:",d),b}}function replaceTensors(s){for(let e in s)s[e]instanceof ONNXTensor?s[e]=new Tensor(s[e]):typeof s[e]=="object"&&replaceTensors(s[e]);return s}function toI64Tensor(s){if(s instanceof Tensor)return s;if(s.length===0)throw Error("items must be non-empty");if(Array.isArray(s[0])){if(s.some(e=>e.length!==s[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(s.flat().map(e=>BigInt(e))),[s.length,s[0].length])}else return new Tensor("int64",BigInt64Array.from(s.map(e=>BigInt(e))),[1,s.length])}function prepareAttentionMask(s,e){let d=s.config.pad_token_id??null,b=s.config.eos_token_id??null;isIntegralNumber(b)&&(b=[b]);let tt=e.indexOf(d)!==-1,nt=b===null||!b.includes(d);if(tt&&nt){let ot=BigInt64Array.from(e.data.map(ht=>ht!=d));return new Tensor("int64",ot,e.dims)}else return ones_like(e)}function preparePositionIds(s,e,d){if(!s.inputNames.includes("position_ids"))return;const b=new BigInt64Array(e.attention_mask.data.length);for(let tt=0;tt<e.attention_mask.dims[0];++tt){let nt=tt*e.attention_mask.dims[1],ot=BigInt(0);for(let ht=0;ht<e.attention_mask.dims[1];++ht){const mt=nt+ht;e.attention_mask.data[mt]===0n?b[mt]=BigInt(1):(b[mt]=ot,ot+=e.attention_mask.data[mt])}}e.position_ids=new Tensor("int64",b,e.attention_mask.dims),d&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(s){return new Tensor("bool",[s],[1])}async function seq2seqForward(s,e){let{encoder_outputs:d,past_key_values:b}=e;d||(d=(await encoderForward(s,e)).last_hidden_state);let tt={input_ids:e.decoder_input_ids,encoder_hidden_states:d};const nt=!!b;s.decoder_merged_session.inputNames.includes("use_cache_branch")&&(tt.use_cache_branch=boolTensor(nt)),s.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(tt.encoder_attention_mask=e.attention_mask),preparePositionIds(s.decoder_merged_session,tt,nt),s.addPastKeyValues(tt,b);const ot=await sessionRun(s.decoder_merged_session,tt);let ht=ot.logits;b=s.getPastKeyValues(ot,b);const mt=s.getAttentions(ot);return new Seq2SeqLMOutput({logits:ht,past_key_values:b,encoder_outputs:d,...mt})}function seq2seqStartBeams(s,e,d,b){let tt=[],nt=0;const ot=s.requires_attention_mask??!0;let ht=d.decoder_input_ids??d.decoder_start_token_id??d.bos_token_id??d.eos_token_id;ht instanceof Tensor?ht=ht.tolist().flat():Array.isArray(ht)||(ht=[ht]);for(let mt of e){mt.dims=[1,...mt.dims];let gt={inputs:mt,encoder_outputs:null,prev_model_outputs:null,output_token_ids:ht,done:!1,score:0,id:nt++};ot&&(gt.attention_mask=prepareAttentionMask(s,mt)),tt.push(gt)}return tt}async function seq2seqRunBeam(s,e){var ot;const d=s.main_input_name;let b=e.output_token_ids;e.prev_model_outputs&&(b=b.slice(-1));let tt={[d]:e.inputs,decoder_input_ids:toI64Tensor(b),encoder_outputs:e.encoder_outputs,past_key_values:(ot=e.prev_model_outputs)==null?void 0:ot.past_key_values};e.attention_mask&&(tt.attention_mask=e.attention_mask);let nt=await s.forward(tt);return e.prev_model_outputs=nt,e.encoder_outputs=nt.encoder_outputs,nt}function seq2seqUpdatebeam(s,e){s.output_token_ids=[...s.output_token_ids,e]}async function encoderForward(s,e){const d=Object.create(null);for(const b of s.session.inputNames)d[b]=e[b];return s.session.inputNames.includes("token_type_ids")&&!d.token_type_ids&&(d.token_type_ids=new Tensor("int64",new BigInt64Array(d.input_ids.data.length),d.input_ids.dims)),await sessionRun(s.session,d)}async function decoderForward(s,e){let{input_ids:d,past_key_values:b,attention_mask:tt}=e,nt={input_ids:d,attention_mask:tt??prepareAttentionMask(s,d)};const ot=!!b;s.session.inputNames.includes("use_cache_branch")&&(nt.use_cache_branch=boolTensor(ot)),preparePositionIds(s.session,nt,ot),s.addPastKeyValues(nt,b);let ht=await sessionRun(s.session,nt),mt=ht.logits;return b=s.getPastKeyValues(ht,b),{logits:mt,past_key_values:b}}function decoderStartBeams(s,e,d,b,tt){let nt=[],ot=0;for(let ht of e){let mt=ht.tolist().map(Number);ht.dims=[1,...ht.dims];let gt;tt?(gt=tt[ot],gt.dims=[1,...gt.dims]):gt=prepareAttentionMask(s,ht);let yt={input:ht,model_input_ids:ht,attention_mask:gt,prev_model_outputs:null,output_token_ids:mt,num_output_tokens:b,done:!1,score:0,id:ot++};nt.push(yt)}return nt}async function decoderRunBeam(s,e){var nt;let d=new BigInt64Array(e.output_token_ids.length).fill(1n),b={input_ids:e.model_input_ids,attention_mask:new Tensor("int64",d,[1,d.length]),past_key_values:(nt=e.prev_model_outputs)==null?void 0:nt.past_key_values},tt=await s.forward(b);return e.prev_model_outputs=tt,tt}function decoderUpdatebeam(s,e){s.output_token_ids=[...s.output_token_ids,e],s.model_input_ids=new Tensor("int64",[BigInt(e)],[1,1])}class PreTrainedModel extends Callable{constructor(d,b){super();Rn(this,"main_input_name","input_ids");this.config=d,this.session=b;const tt=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),nt=MODEL_TYPE_MAPPING.get(tt);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,nt===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):nt===MODEL_TYPES.Seq2Seq||nt===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):nt===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const d=[];for(let b of Object.keys(this)){const tt=this[b];tt instanceof InferenceSession&&d.push(tt.handler.dispose())}return await Promise.all(d)}static async from_pretrained(d,{quantized:b=!0,progress_callback:tt=null,config:nt=null,cache_dir:ot=null,local_files_only:ht=!1,revision:mt="main",model_file_name:gt=null}={}){let yt={quantized:b,progress_callback:tt,config:nt,cache_dir:ot,local_files_only:ht,revision:mt,model_file_name:gt};const ft=MODEL_CLASS_TO_NAME_MAPPING.get(this),st=MODEL_TYPE_MAPPING.get(ft);let bt;return st===MODEL_TYPES.DecoderOnly?bt=await Promise.all([AutoConfig.from_pretrained(d,yt),constructSession(d,yt.model_file_name??"decoder_model_merged",yt),getModelJSON(d,"generation_config.json",!1,yt)]):st===MODEL_TYPES.Seq2Seq||st===MODEL_TYPES.Vision2Seq?bt=await Promise.all([AutoConfig.from_pretrained(d,yt),constructSession(d,"encoder_model",yt),constructSession(d,"decoder_model_merged",yt),getModelJSON(d,"generation_config.json",!1,yt)]):st===MODEL_TYPES.MaskGeneration?bt=await Promise.all([AutoConfig.from_pretrained(d,yt),constructSession(d,"vision_encoder",yt),constructSession(d,"prompt_encoder_mask_decoder",yt)]):st===MODEL_TYPES.EncoderDecoder?bt=await Promise.all([AutoConfig.from_pretrained(d,yt),constructSession(d,"encoder_model",yt),constructSession(d,"decoder_model_merged",yt)]):(st!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${ft??(nt==null?void 0:nt.model_type)}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),bt=await Promise.all([AutoConfig.from_pretrained(d,yt),constructSession(d,yt.model_file_name??"model",yt)])),new this(...bt)}async _call(d){return await this.forward(d)}async forward(d){return await this._forward(this,d)}_get_logits_processor(d,b,tt=null){const nt=new LogitsProcessorList;if(d.repetition_penalty!==null&&d.repetition_penalty!==1&&nt.push(new RepetitionPenaltyLogitsProcessor(d.repetition_penalty)),d.no_repeat_ngram_size!==null&&d.no_repeat_ngram_size>0&&nt.push(new NoRepeatNGramLogitsProcessor(d.no_repeat_ngram_size)),d.bad_words_ids!==null&&nt.push(new NoBadWordsLogitsProcessor(d.bad_words_ids,d.eos_token_id)),d.min_length!==null&&d.eos_token_id!==null&&d.min_length>0&&nt.push(new MinLengthLogitsProcessor(d.min_length,d.eos_token_id)),d.min_new_tokens!==null&&d.eos_token_id!==null&&d.min_new_tokens>0&&nt.push(new MinNewTokensLengthLogitsProcessor(b,d.min_new_tokens,d.eos_token_id)),d.forced_bos_token_id!==null&&nt.push(new ForcedBOSTokenLogitsProcessor(d.forced_bos_token_id)),d.forced_eos_token_id!==null&&nt.push(new ForcedEOSTokenLogitsProcessor(d.max_length,d.forced_eos_token_id)),d.begin_suppress_tokens!==null){let ot=b>1||d.forced_bos_token_id===null?b:b+1;d.forced_decoder_ids!==null&&(ot+=d.forced_decoder_ids[d.forced_decoder_ids.length-1][0]),nt.push(new SuppressTokensAtBeginLogitsProcessor(d.begin_suppress_tokens,ot))}return d.forced_decoder_ids!==null&&nt.push(new ForceTokensLogitsProcessor(d.forced_decoder_ids)),tt!==null&&nt.extend(tt),nt}_get_generation_config(d){let b=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(b,this.generation_config),d!==null&&Object.assign(b,d),b}async generate(d,b=null,tt=null,{inputs_attention_mask:nt=null}={}){if(!this.can_generate){let St=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const _t=this.config.model_type,Tt=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(_t)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(_t)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(_t)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(_t);throw Tt&&(St+=` Please use the following class instead: '${Tt[0]}'`),Error(St)}if(!(d instanceof Tensor)&&!isTypedArray(d)&&!Array.isArray(d))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${d.constructor.name}".`);let ot;if(this.config.is_encoder_decoder)ot=0;else if(ot=d instanceof Tensor?d.dims.at(-1):d.length,ot===0)throw Error("Must supply a non-empty array of input token ids.");b=this._get_generation_config(b),tt=tt??new LogitsProcessorList,tt=this._get_logits_processor(b,ot,tt);let ht=b.eos_token_id;ht!==null&&!Array.isArray(ht)&&(ht=[ht]);let mt=1;const gt=mt+(b.max_new_tokens??1/0),yt=Number.isInteger(b.max_length)&&(b.max_new_tokens??null)===null;let ft=Sampler.getSampler(b),st=this.getStartBeams(d,b,mt,nt);for(;st.some(wt=>!wt.done)&&mt<gt;){let wt=[];for(let St of st){if(St.done){wt.push(St);continue}if(yt&&St.output_token_ids.length>=b.max_length){St.done=!0,wt.push(St);continue}let _t=await this.runBeam(St);b.output_attentions&&this.addAttentionsToBeam(St,_t),b.output_scores&&console.log(_t);let Tt=_t.logits.slice(null,-1,null);tt(St.output_token_ids,Tt);let Et=ft(Tt);for(let[kt,Mt]of Et){let Ot={...St};this.updateBeam(Ot,kt),Ot.score+=Mt,ht&&ht.includes(kt)&&(Ot.done=!0),wt.push(Ot)}}++mt,wt=this.groupBeams(wt).map(St=>St.sort((_t,Tt)=>Tt.score-_t.score).slice(0,b.num_beams)),st=wt.flat(),b.callback_function&&b.callback_function(st)}const bt=this.groupBeams(st),vt=wt=>bt.map(St=>b.num_return_sequences>1?St.slice(0,b.num_return_sequences).map(_t=>_t[wt]):[St[0][wt]]).flat(),xt=vt("output_token_ids");if(b.return_dict_in_generate){const wt=vt("decoder_attentions"),St=vt("cross_attentions");return{sequences:xt,decoder_attentions:wt,cross_attentions:St}}else return xt}addAttentionsToBeam(d,b){if(this.config.is_encoder_decoder){if(!b.cross_attentions||b.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");d.cross_attentions||(d.cross_attentions=[]),d.cross_attentions.push(b.cross_attentions)}if(!b.decoder_attentions||b.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");d.decoder_attentions||(d.decoder_attentions=[]),d.decoder_attentions.push(b.decoder_attentions)}groupBeams(d){const b=Object.create(null);for(const tt of d)b[tt.id]===void 0?b[tt.id]=[tt]:b[tt.id].push(tt);return Object.values(b)}getPastKeyValues(d,b){const tt=Object.create(null);for(const nt in d)if(nt.startsWith("present")){let ot=nt.replace("present","past_key_values");b&&nt.includes("encoder")?tt[ot]=b[ot]:tt[ot]=d[nt]}return tt}getAttentions(d){const b=Object.create(null);for(const tt of["cross_attentions","decoder_attentions"]){const nt=[];for(const ot in d)if(ot.startsWith(tt)){const ht=ot.split(".").pop();nt[ht]=d[ot]}b[tt]=nt}return b}addPastKeyValues(d,b){if(b)Object.assign(d,b);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let nt=[1,this.num_encoder_heads,0,this.encoder_dim_kv],ot=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let ht=0;ht<this.num_decoder_layers;++ht)d[`past_key_values.${ht}.encoder.key`]=new Tensor("float32",[],nt),d[`past_key_values.${ht}.encoder.value`]=new Tensor("float32",[],nt),d[`past_key_values.${ht}.decoder.key`]=new Tensor("float32",[],ot),d[`past_key_values.${ht}.decoder.value`]=new Tensor("float32",[],ot)}else if(this.config.model_type==="falcon"){let nt=[1*this.num_heads,0,this.dim_kv];for(let ot=0;ot<this.num_layers;++ot)d[`past_key_values.${ot}.key`]=new Tensor("float32",[],nt),d[`past_key_values.${ot}.value`]=new Tensor("float32",[],nt)}else if(this.config.multi_query){let nt=[1*this.num_heads,0,2*this.dim_kv];for(let ot=0;ot<this.num_layers;++ot)d[`past_key_values.${ot}.key_value`]=new Tensor("float32",[],nt)}else if(this.config.model_type==="bloom"){let nt=[1*this.num_heads,this.dim_kv,0],ot=[1*this.num_heads,0,this.dim_kv];for(let ht=0;ht<this.num_layers;++ht)d[`past_key_values.${ht}.key`]=new Tensor("float32",[],nt),d[`past_key_values.${ht}.value`]=new Tensor("float32",[],ot)}else{let nt=[1,this.num_heads,0,this.dim_kv];for(let ot=0;ot<this.num_layers;++ot)d[`past_key_values.${ot}.key`]=new Tensor("float32",[],nt),d[`past_key_values.${ot}.value`]=new Tensor("float32",[],nt)}}getStartBeams(d,b,tt,nt){return this._getStartBeams(this,d,b,tt,nt)}async runBeam(d){return await this._runBeam(this,d)}updateBeam(d,b){return this._updateBeam(d,b)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{constructor(d,b,tt,nt){super(d,b);Rn(this,"requires_attention_mask",!1);Rn(this,"main_input_name","input_features");this.decoder_merged_session=tt,this.generation_config=nt,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(d,b=null,tt=null){if(b=this._get_generation_config(b),b.return_timestamps??(b.return_timestamps=!1),b.return_timestamps&&(tt=[new WhisperTimeStampLogitsProcessor(b)]),b.return_token_timestamps&&(b.output_attentions=!0,b.return_dict_in_generate=!0,b.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!b.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const nt=await super.generate(d,b,tt);return b.return_token_timestamps&&b.alignment_heads&&(nt.token_timestamps=this._extract_token_timestamps(nt,b.alignment_heads,b.num_frames)),nt}_extract_token_timestamps(d,b,tt=null,nt=.02){if(!d.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let ot=this.config.median_filter_width;ot===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),ot=7);const ht=d.cross_attentions.map(yt=>{let ft=Array.from({length:this.config.decoder_layers},(St,_t)=>cat(yt.map(Tt=>Tt[_t]),2)),st=stack(b.map(([St,_t])=>tt?ft[St].slice(null,_t,null,[0,tt]):ft[St].slice(null,_t)));st=st.transpose(1,0,2,3);let[bt,vt]=std_mean(st,-2,0,!0),xt=st.clone();for(let St=0;St<xt.dims[0];++St){let _t=xt[St];for(let Tt=0;Tt<_t.dims[0];++Tt){let Et=_t[Tt];const kt=bt[St][Tt][0],Mt=vt[St][Tt][0];for(let Ot=0;Ot<Et.dims[0];++Ot){let Dt=Et[Ot];for(let At=0;At<Dt.data.length;++At)Dt.data[At]=(Dt.data[At]-Mt.data[At])/kt.data[At];Dt.data.set(medianFilter(Dt.data,ot))}}}return mean(xt,1)}),mt=[d.sequences.length,d.sequences[0].length],gt=new Tensor("float32",new Float32Array(mt[0]*mt[1]),mt);for(let yt=0;yt<mt[0];++yt){const ft=ht[yt].neg().squeeze_(0);let[st,bt]=dynamicTimeWarping(ft),vt=Array.from({length:st.length-1},(St,_t)=>st[_t+1]-st[_t]),xt=mergeArrays([1],vt).map(St=>!!St),wt=[];for(let St=0;St<xt.length;++St)xt[St]&&wt.push(bt[St]*nt);gt[yt].data.set(wt,1)}return gt}}class VisionEncoderDecoderModel extends PreTrainedModel{constructor(d,b,tt,nt){super(d,b);Rn(this,"main_input_name","pixel_values");this.decoder_merged_session=tt,this.generation_config=nt;const ot=this.config.encoder,ht=this.config.decoder,mt=ot.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(mt)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(mt))||console.warn(`Model type for encoder '${mt}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const yt=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(ht.model_type);if(!yt)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const ft=yt[1],st=new ft(ht,tt,nt);this.add_encoder_pkv="num_decoder_layers"in st,this.add_encoder_pkv?(this.num_decoder_layers=st.num_decoder_layers,this.num_decoder_heads=st.num_decoder_heads,this.decoder_dim_kv=st.decoder_dim_kv,this.num_encoder_layers=st.num_encoder_layers,this.num_encoder_heads=st.num_encoder_heads,this.encoder_dim_kv=st.encoder_dim_kv):(this.num_layers=st.num_layers,this.num_heads=st.num_heads,this.dim_kv=st.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,d={}){return d.model_file_name??(d.model_file_name="text_model"),super.from_pretrained(e,d)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,d={}){return d.model_file_name??(d.model_file_name="vision_model"),super.from_pretrained(e,d)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(e,d={}){return d.model_file_name??(d.model_file_name="text_model"),super.from_pretrained(e,d)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(e,d={}){return d.model_file_name??(d.model_file_name="vision_model"),super.from_pretrained(e,d)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(e){return new ImageMattingOutput(await super._call(e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(e){return new DetrObjectDetectionOutput(await super._call(e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(e){return new DetrSegmentationOutput(await super._call(e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:d}){super(),this.logits=e,this.pred_boxes=d}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:e,pred_boxes:d,pred_masks:b}){super(),this.logits=e,this.pred_boxes=d,this.pred_masks=b}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(e){return new TableTransformerObjectDetectionOutput(await super._call(e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(e){return new YolosObjectDetectionOutput(await super._call(e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:d}){super(),this.logits=e,this.pred_boxes=d}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(e,d,b){super(e,d),this.prompt_encoder_mask_decoder=b}async get_image_embeddings({pixel_values:e}){return await encoderForward(this,{pixel_values:e})}async forward(e){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){const d=e.input_points.dims.slice(0,-1),b=d.reduce((tt,nt)=>tt*nt,1);e.input_labels=new Tensor("int64",new BigInt64Array(b).fill(1n),d)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new SamImageSegmentationOutput(await super._call(e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:e,pred_masks:d}){super(),this.iou_scores=e,this.pred_masks=d}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(e){return new XVectorOutput(await super._call(e))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(e,d,b,tt){super(e,d),this.decoder_merged_session=b,this.generation_config=tt,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,d,{threshold:b=.5,minlenratio:tt=0,maxlenratio:nt=20,vocoder:ot=null}={}){const ht={input_ids:e},{encoder_outputs:mt,encoder_attention_mask:gt}=await encoderForward(this,ht),yt=mt.dims[1]/this.config.reduction_factor,ft=Math.floor(yt*nt),st=Math.floor(yt*tt),bt=this.config.num_mel_bins;let vt=[],xt=null,wt=null,St=0;for(;;){++St;const Et=boolTensor(!!wt);let kt;wt?kt=wt.output_sequence_out:kt=new Tensor("float32",new Float32Array(bt),[1,1,bt]);let Mt={use_cache_branch:Et,output_sequence:kt,encoder_attention_mask:gt,speaker_embeddings:d,encoder_hidden_states:mt};this.addPastKeyValues(Mt,xt),wt=await sessionRun(this.decoder_merged_session,Mt),xt=this.getPastKeyValues(wt,xt);const{prob:Ot,spectrum:Dt}=wt;if(vt.push(Dt),St>=st&&(Array.from(Ot.data).filter(At=>At>=b).length>0||St>=ft))break}const _t=cat(vt),{waveform:Tt}=await sessionRun(ot.session,{spectrogram:_t});return{spectrogram:_t,waveform:Tt}}}class SpeechT5HifiGan extends PreTrainedModel{constructor(){super(...arguments);Rn(this,"main_input_name","spectrogram")}}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,d={}){return d.model_file_name??(d.model_file_name="text_model"),super.from_pretrained(e,d)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,d={}){return d.model_file_name??(d.model_file_name="audio_model"),super.from_pretrained(e,d)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(e){return new VitsModelOutput(await super._call(e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(e,d,b){super(e,d),this.generation_config=b,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class PretrainedMixin{static async from_pretrained(e,{quantized:d=!0,progress_callback:b=null,config:tt=null,cache_dir:nt=null,local_files_only:ot=!1,revision:ht="main",model_file_name:mt=null}={}){let gt={quantized:d,progress_callback:b,config:tt,cache_dir:nt,local_files_only:ot,revision:ht,model_file_name:mt};if(tt=await AutoConfig.from_pretrained(e,gt),gt.config||(gt.config=tt),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let yt of this.MODEL_CLASS_MAPPINGS){const ft=yt.get(tt.model_type);if(ft)return await ft[1].from_pretrained(e,gt)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${tt.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(e,gt);throw Error(`Unsupported model type: ${tt.model_type}`)}}Rn(PretrainedMixin,"MODEL_CLASS_MAPPINGS",null),Rn(PretrainedMixin,"BASE_IF_FAIL",!1);const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[s,e]of MODEL_CLASS_TYPE_MAPPING)for(const[d,b]of s.values())MODEL_TYPE_MAPPING.set(d,e),MODEL_CLASS_TO_NAME_MAPPING.set(b,d),MODEL_NAME_TO_CLASS_MAPPING.set(d,b);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[s,e,d]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(s,d),MODEL_CLASS_TO_NAME_MAPPING.set(e,s),MODEL_NAME_TO_CLASS_MAPPING.set(s,e);class AutoModel extends PretrainedMixin{}Rn(AutoModel,"MODEL_CLASS_MAPPINGS",MODEL_CLASS_TYPE_MAPPING.map(e=>e[0])),Rn(AutoModel,"BASE_IF_FAIL",!0);class Seq2SeqLMOutput extends ModelOutput{constructor({logits:e,past_key_values:d,encoder_outputs:b,decoder_attentions:tt=null,cross_attentions:nt=null}){super(),this.logits=e,this.past_key_values=d,this.encoder_outputs=b,this.decoder_attentions=tt,this.cross_attentions=nt}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class XVectorOutput extends ModelOutput{constructor({logits:e,embeddings:d}){super(),this.logits=e,this.embeddings=d}}class TokenClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class MaskedLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:e,end_logits:d}){super(),this.start_logits=e,this.end_logits=d}}class CausalLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:e}){super(),this.alphas=e}}class VitsModelOutput extends ModelOutput{constructor({waveform:e,spectrogram:d}){super(),this.waveform=e,this.spectrogram=d}}const BROWSER_ENV=typeof self<"u";if(!BROWSER_ENV){if(!sharp)throw new Error("Unable to load image processing library.")}const BeamSearchVis=()=>{const s=reactExports.useRef(null),[e,d]=reactExports.useState(""),b={name:"root",children:[]},[tt,nt]=reactExports.useState({tree:null,useTimeout:!1,isRunning:!1,currentLayer:[],currentDepth:0,showAnimateButton:!1,showResetButton:!1,isStepDisabled:!1,renderTree:b,numBeams:2,maxDepth:2,input:"",lastMessage:"",isDraggable:!1,zoom:.75});function ot(vt){let xt=0;function wt(_t,Tt){if(!_t.children||_t.children.length===0){xt=Math.max(xt,Tt);return}_t.children.forEach(Et=>wt(Et,Tt+1))}function St(_t,Tt){Tt<xt&&delete _t.score,_t.children&&_t.children.forEach(Et=>St(Et,Tt+1))}return wt(vt,0),St(vt,0),vt}const ht=async vt=>new Promise(xt=>setTimeout(xt,vt)),mt=()=>new Promise(vt=>{const xt=()=>{vt(),window.removeEventListener("stepPress",xt)};window.addEventListener("stepPress",xt)}),gt=(vt,xt,wt)=>{let St=JSON.parse(JSON.stringify(xt));console.log("toKeepTemp:",vt);const _t=(kt,Mt)=>{Mt.forEach(Ot=>{console.log("Node:",kt,"Node's sequence:",kt.sequence),console.log("N to highlight:",Ot,"N to Highlight's sequence:",Ot.sequence),console.log("Does node have children?",Ot.haveChildren,"Comparing Names:",Ot.name===kt.name,"Comparing Scores:",Ot.score===kt.score),Ot.name===kt.name&&Ot.haveChildren&&Ot.score===kt.score&&(kt.highlighted=!0,console.log(`Highlighted node: ${kt.name} with score: ${kt.score}`))}),kt.children&&Array.isArray(kt.children)&&kt.children.forEach(Ot=>_t(Ot,Mt))},Tt=(kt,Mt=null)=>(!kt.children||kt.children.length===0?(!Mt||Math.abs(kt.score)<Math.abs(Mt.score))&&(Mt=kt):kt.children.forEach(Ot=>{Mt=Tt(Ot,Mt)}),Mt),Et=kt=>kt.highlighted?!0:kt.children&&Array.isArray(kt.children)?kt.children.some(Mt=>Et(Mt)):!1;if(console.log("Initial Render Tree:",JSON.stringify(xt,null,2)),console.log("Nodes to Highlight (toKeepTemp):",JSON.stringify(vt,null,2)),St.children=St.children||[],Array.isArray(St.children)?St.children.forEach(kt=>_t(kt,vt)):console.error("highlightedTree.children is not an array"),!Et(St)){const kt=Tt(St);kt&&(kt.highlighted=!0,console.log(`Highlighted leaf node with lowest score: ${kt.name} with score: ${kt.score}`))}wt(St)},yt=(vt,xt)=>{let wt=JSON.parse(JSON.stringify(vt));const St=_t=>{_t.highlighted=!1,_t.children&&_t.children.forEach(Tt=>St(Tt))};wt.children.forEach(_t=>St(_t)),xt(wt)},ft=async(vt,xt=0)=>{var wt;try{if(console.log("NEW RECURSIVE CALL!!!!!!!!!!!!!!!!"),console.log("THIS IS THE TREE!",tt.tree),xt===0){vt=[...JSON.parse(JSON.stringify(tt.tree)).children],console.log("Layer",vt[0]);let At={name:vt[0].name,sequence:vt[0].name,children:[]},It={...tt.renderTree,children:[At],highlighted:!1};nt(jt=>({...jt,renderTree:It}))}else console.log("Layer at beginning of recursive function:",vt);nt(At=>({...At,currentLayer:vt,currentDepth:xt})),tt.useTimeout||nt(At=>({...At,showAnimateButton:!0})),tt.useTimeout?await ht(2e3):(console.log("Waiting for button press..."),await mt()),nt(At=>({...At,showAnimateButton:!1}));let St=[];for(let At of vt){console.log("Beam in the layer",At),console.log("Beam Children",At.children);let It=[];for(let jt of At.children){console.log("Child of Beam.children in the adding step",jt);let qt={name:jt.token,score:jt.score,children:[],highlighted:!1};console.log("Candidate:",qt),It.push(qt)}console.log("Candidates after we add all of them!",It),St.push({name:xt===0?At.name:At.sequence,children:It,highlighted:!1}),console.log("Beams after push",St)}console.log("Beams",St);let _t={...tt.renderTree,children:St,highlighted:!1};nt(At=>({...At,renderTree:_t})),console.log("Logging the layer parameter after visualizing the candidates",vt),tt.useTimeout?await ht(2e3):(console.log("Waiting for button press..."),await mt());let Tt=[],Et=[],kt=vt,Mt=[],Ot=[],Dt=0;console.log("Layer before the prune step",vt);for(let At of kt){console.log("Beam",At);for(let It of At.children){if(Mt.push(It),It.highlighted=!1,console.log("Child of Beam.children in the pruning step",It),((wt=It.children)==null?void 0:wt.length)>0){Tt.push(JSON.parse(JSON.stringify(It))),console.log("To Keep Array",Tt),console.log(It.token);let jt={name:It.token,score:It.score,children:[],haveChildren:!0,highlighted:!1},qt={name:It.sequence,score:It.score,children:[],haveChildren:!0,highlighted:!1};Et.push(qt),Ot.push(jt)}console.log("Beam Children",Ot)}Ot.length===0&&(Dt+=1),console.log("Final Beam Children",Ot),At.children=Ot,console.log("After we add beamChildren array to beam.children",At.children)}if(kt.length===Dt){let At=[],It=null;for(let jt of Mt)(!It||Math.abs(jt.score)<Math.abs(It.score))&&(It=jt);At.push(It),Et=At,Ot=At;for(let jt of Et)jt.name=jt.sequence,jt.haveChildren=!0,jt.highlighted=!1}if(console.log("TO KEEP TEMP BEFORE WE CALL HIGHLIGHT NODES",Et),console.log("BEAM CHILDREN",Ot),gt(Ot,_t,At=>{nt(It=>({...It,renderTree:At}))}),tt.useTimeout?await ht(2e3):(console.log("Waiting for button press..."),await mt()),console.log("To Keep for Next Stack Frame",xt,Tt),console.log("To Keep Temp",xt,Et),_t={...tt.renderTree,children:Et},console.log(_t),nt(At=>({...At,renderTree:_t})),Tt.length>0)console.log("This is the toKeep array",Tt),console.log("Recursing, this is what we are passing into layer!",JSON.parse(JSON.stringify(Tt))),yt(_t,At=>{nt(It=>({...It,renderTree:At}))}),setTimeout(()=>{ft(JSON.parse(JSON.stringify(Tt)),xt+1)},0);else{console.log("Finished!"),console.log("Final Tree",JSON.parse(JSON.stringify(tt.tree)));let At=ot(JSON.parse(JSON.stringify(tt.tree)));nt(It=>({...It,renderTree:At,isStepDisabled:!0,showResetButton:!0,isDraggable:!0}))}nt(At=>({...At,showAnimateButton:!1}))}catch(St){console.error("Error during animation:",St)}};reactExports.useEffect(()=>{tt.useTimeout&&tt.isRunning&&ft(tt.currentLayer,tt.currentDepth)},[tt.useTimeout,tt.isRunning]),reactExports.useEffect(()=>{s.current===null&&(s.current=new Worker(new URL("/probability-tiptap/assets/beamSearchWorker-CHAE842m.js",import.meta.url),{type:"module"}));const vt=xt=>{xt.data.status==="update"&&(console.log("Update Output:",xt.data.output),d(xt.data.sequence)),xt.data.status==="complete"&&(console.log("Complete Output:",xt.data.output),d(xt.data.sequence),nt(wt=>({...wt,tree:xt.data.output})))};return s.current.addEventListener("message",vt),()=>{s.current.terminate(),s.current=null}},[]);const bt={config:tt,setConfig:nt,animate:ft,generate:async()=>{await ht(0),console.log("This is what tree looks like: ",tt.tree),console.log("This is what we are sending to the worker: ",tt.input,tt.numBeams,tt.maxDepth),s.current.postMessage({text:tt.input,numBeams:tt.numBeams,maxDepth:tt.maxDepth})},lastMessage:e};return jsxRuntimeExports.jsx("div",{style:{height:"100vh",width:"100vw",display:"flex"},children:jsxRuntimeExports.jsxs(BSContext.Provider,{value:bt,children:[jsxRuntimeExports.jsx(ControlPanel,{style:{width:"20%",backgroundColor:"blue",color:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}),jsxRuntimeExports.jsx("div",{style:{flex:1,backgroundColor:"lightgray"},children:jsxRuntimeExports.jsx(TreeComponent,{})})]})})};var cssUnit={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function parseLengthAndUnit(s){if(typeof s=="number")return{value:s,unit:"px"};var e,d=(s.match(/^[0-9.]*/)||"").toString();d.includes(".")?e=parseFloat(d):e=parseInt(d,10);var b=(s.match(/[^0-9]*$/)||"").toString();return cssUnit[b]?{value:e,unit:b}:(console.warn("React Spinners: ".concat(s," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function cssValue(s){var e=parseLengthAndUnit(s);return"".concat(e.value).concat(e.unit)}var createAnimation=function(s,e,d){var b="react-spinners-".concat(s,"-").concat(d);if(typeof window>"u"||!window.document)return b;var tt=document.createElement("style");document.head.appendChild(tt);var nt=tt.sheet,ot=`
    @keyframes `.concat(b,` {
      `).concat(e,`
    }
  `);return nt&&nt.insertRule(ot,0),b},BasicColors;(function(s){s.maroon="#800000",s.red="#FF0000",s.orange="#FFA500",s.yellow="#FFFF00",s.olive="#808000",s.green="#008000",s.purple="#800080",s.fuchsia="#FF00FF",s.lime="#00FF00",s.teal="#008080",s.aqua="#00FFFF",s.blue="#0000FF",s.navy="#000080",s.black="#000000",s.gray="#808080",s.silver="#C0C0C0",s.white="#FFFFFF"})(BasicColors||(BasicColors={}));var handleRgbColorString=function(s,e){if(s.includes("/"))return s.replace("rgb(","rgba(");var d=s.substring(s.startsWith("rgba(")?5:4,s.length-1).trim(),b=d.split(",");return b.length===4?s.replace("rgb(","rgba("):b.length===3?"rgba(".concat(d,", ").concat(e,")"):"rgba(".concat(d," / ").concat(e,")")},calculateRgba=function(s,e){if(s.startsWith("rgb"))return handleRgbColorString(s,e);if(Object.keys(BasicColors).includes(s)&&(s=BasicColors[s]),s[0]==="#"&&(s=s.slice(1)),s.length===3){var d="";s.split("").forEach(function(tt){d+=tt,d+=tt}),s=d}var b=(s.match(/.{2}/g)||[]).map(function(tt){return parseInt(tt,16)}).join(", ");return"rgba(".concat(b,", ").concat(e,")")},__assign=function(){return __assign=Object.assign||function(s){for(var e,d=1,b=arguments.length;d<b;d++){e=arguments[d];for(var tt in e)Object.prototype.hasOwnProperty.call(e,tt)&&(s[tt]=e[tt])}return s},__assign.apply(this,arguments)},__rest=function(s,e){var d={};for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&e.indexOf(b)<0&&(d[b]=s[b]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,b=Object.getOwnPropertySymbols(s);tt<b.length;tt++)e.indexOf(b[tt])<0&&Object.prototype.propertyIsEnumerable.call(s,b[tt])&&(d[b[tt]]=s[b[tt]]);return d};function HashLoader(s){var e=s.loading,d=e===void 0?!0:e,b=s.color,tt=b===void 0?"#000000":b,nt=s.speedMultiplier,ot=nt===void 0?1:nt,ht=s.cssOverride,mt=ht===void 0?{}:ht,gt=s.size,yt=gt===void 0?50:gt,ft=__rest(s,["loading","color","speedMultiplier","cssOverride","size"]),st=parseLengthAndUnit(yt),bt=st.value,vt=st.unit,xt=__assign({display:"inherit",position:"relative",width:cssValue(yt),height:cssValue(yt),transform:"rotate(165deg)"},mt),wt=bt/5,St=(bt-wt)/2,_t=St-wt,Tt=calculateRgba(tt,.75),Et=createAnimation("HashLoader","0% {width: ".concat(wt,"px; box-shadow: ").concat(St,"px ").concat(-_t,"px ").concat(Tt,", ").concat(-St,"px ").concat(_t,"px ").concat(Tt,`}
    35% {width: `).concat(cssValue(yt),"; box-shadow: 0 ").concat(-_t,"px ").concat(Tt,", 0 ").concat(_t,"px ").concat(Tt,`}
    70% {width: `).concat(wt,"px; box-shadow: ").concat(-St,"px ").concat(-_t,"px ").concat(Tt,", ").concat(St,"px ").concat(_t,"px ").concat(Tt,`}
    100% {box-shadow: `).concat(St,"px ").concat(-_t,"px ").concat(Tt,", ").concat(-St,"px ").concat(_t,"px ").concat(Tt,"}"),"before"),kt=createAnimation("HashLoader","0% {height: ".concat(wt,"px; box-shadow: ").concat(_t,"px ").concat(St,"px ").concat(tt,", ").concat(-_t,"px ").concat(-St,"px ").concat(tt,`}
    35% {height: `).concat(cssValue(yt),"; box-shadow: ").concat(_t,"px 0 ").concat(tt,", ").concat(-_t,"px 0 ").concat(tt,`}
    70% {height: `).concat(wt,"px; box-shadow: ").concat(_t,"px ").concat(-St,"px ").concat(tt,", ").concat(-_t,"px ").concat(St,"px ").concat(tt,`}
    100% {box-shadow: `).concat(_t,"px ").concat(St,"px ").concat(tt,", ").concat(-_t,"px ").concat(-St,"px ").concat(tt,"}"),"after"),Mt=function(Ot){return{position:"absolute",top:"50%",left:"50%",display:"block",width:"".concat(bt/5).concat(vt),height:"".concat(bt/5).concat(vt),borderRadius:"".concat(bt/10).concat(vt),transform:"translate(-50%, -50%)",animationFillMode:"none",animation:"".concat(Ot===1?Et:kt," ").concat(2/ot,"s infinite")}};return d?reactExports.createElement("span",__assign({style:xt},ft),reactExports.createElement("span",{style:Mt(1)}),reactExports.createElement("span",{style:Mt(2)})):null}const Loading=()=>jsxRuntimeExports.jsx("div",{className:"loading",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"white"},children:jsxRuntimeExports.jsx(HashLoader,{color:"#42a5f5",loading:!0,speedMultiplier:.85,size:100})}),BeamSearch=()=>{const{pyodideLoadingState:s}=reactExports.useContext(PyodideContext);return jsxRuntimeExports.jsx("div",{children:s!=="ready"?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsx(BeamSearchVis,{})})},router=createBrowserRouter([{path:"/",element:jsxRuntimeExports.jsx(FileStructureOuter,{})},{path:"/ur",element:jsxRuntimeExports.jsx(GameOfUr,{})},{path:"/beamsearch",element:jsxRuntimeExports.jsx(BeamSearch,{})}]);client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(PyodideProvider,{children:jsxRuntimeExports.jsx(RouterProvider,{router})}));
